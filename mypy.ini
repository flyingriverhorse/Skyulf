[mypy]
python_version = 3.12
mypy_path = backend,skyulf-core
explicit_package_bases = True
namespace_packages = True
check_untyped_defs = True
warn_return_any = True
warn_unused_ignores = False
show_error_codes = True
exclude = (?x)(
    ^tests/
    | ^migrations/
    | ^testingdb/
    | ^temp/
  )

# External libraries that might lack stubs or cause issues
[mypy-sklearn.*]
ignore_missing_imports = True

[mypy-joblib.*]
ignore_missing_imports = True

[mypy-optuna.*]
ignore_missing_imports = True

[mypy-optuna_integration.*]
ignore_missing_imports = True

[mypy-celery.*]
ignore_missing_imports = True

[mypy-redis.*]
ignore_missing_imports = True

[mypy-imblearn.*]
ignore_missing_imports = True

# --- Pandas / Polars dual-engine modules ---
# DataFrame indexing, operators, and union-attr are false positives
# in data-science code that uses dynamic column access patterns.
[mypy-skyulf.preprocessing.*]
disable_error_code = index, operator, union-attr, call-overload, arg-type, assignment, return-value, override, no-redef, misc, call-arg, no-any-return, var-annotated

[mypy-skyulf.profiling.*]
disable_error_code = index, operator, union-attr, call-overload, arg-type, assignment, attr-defined, var-annotated, return-value

[mypy-skyulf.utils]
disable_error_code = index, operator, union-attr, assignment, no-any-return, no-redef

[mypy-skyulf.modeling.*]
disable_error_code = assignment, arg-type, override, return-value, index, no-any-return

[mypy-skyulf.engines.*]
disable_error_code = import-untyped, return-value, no-any-return

[mypy-skyulf.registry]
disable_error_code = assignment, return-value

# --- Backend data-heavy modules ---
[mypy-backend.eda.*]
disable_error_code = index, operator, union-attr, arg-type, assignment, call-overload, var-annotated

[mypy-backend.ml_pipeline.execution.*]
disable_error_code = index, union-attr, arg-type, assignment, list-item

[mypy-backend.ml_pipeline.tasks]
disable_error_code = arg-type, union-attr, assignment

[mypy-backend.ml_pipeline.deployment.*]
disable_error_code = assignment

[mypy-backend.ml_pipeline.artifacts.*]
disable_error_code = import-untyped, assignment

[mypy-backend.ml_pipeline.api]
disable_error_code = arg-type

[mypy-backend.ml_pipeline.services.*]
disable_error_code = attr-defined, no-any-return

[mypy-backend.services.*]
disable_error_code = union-attr

[mypy-backend.ml_pipeline.model_registry.*]
disable_error_code = assignment

[mypy-backend.ml_pipeline.tests.*]
disable_error_code = attr-defined

[mypy-backend.data.*]
disable_error_code = override, no-any-return, return-value

[mypy-backend.data_ingestion.*]
disable_error_code = no-any-return

[mypy-backend.utils.*]
disable_error_code = assignment, no-any-return

[mypy-backend.monitoring.*]
disable_error_code = union-attr

# Untyped third-party libraries
[mypy-xgboost.*]
ignore_missing_imports = True

[mypy-polars.*]
ignore_missing_imports = True

[mypy-aiofiles.*]
ignore_missing_imports = True

[mypy-starlette.*]
ignore_missing_imports = True

[mypy-uvicorn.*]
ignore_missing_imports = True

[mypy-multipart.*]
ignore_missing_imports = True

[mypy-python_multipart.*]
ignore_missing_imports = True

[mypy-s3fs.*]
ignore_missing_imports = True

[mypy-pyarrow.*]
ignore_missing_imports = True

[mypy-scipy.*]
ignore_missing_imports = True

[mypy-statsmodels.*]
ignore_missing_imports = True

[mypy-rich.*]
ignore_missing_imports = True

[mypy-matplotlib.*]
ignore_missing_imports = True

[mypy-vaderSentiment.*]
ignore_missing_imports = True

[mypy-causallearn.*]
ignore_missing_imports = True

# --- Test modules: suppress false positives from dict configs & DataFrame assertions ---
[mypy-tests.*]
disable_error_code = arg-type, call-overload, index, union-attr

[mypy-skyulf-core.tests.*]
disable_error_code = arg-type, call-overload, index, union-attr
