var W1=Object.defineProperty;var Wf=e=>{throw TypeError(e)};var q1=(e,t,n)=>t in e?W1(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var tu=(e,t,n)=>q1(e,typeof t!="symbol"?t+"":t,n),nu=(e,t,n)=>t.has(e)||Wf("Cannot "+n);var D=(e,t,n)=>(nu(e,t,"read from private field"),n?n.call(e):t.get(e)),te=(e,t,n)=>t.has(e)?Wf("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),Q=(e,t,n,r)=>(nu(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),le=(e,t,n)=>(nu(e,t,"access private method"),n);var zi=(e,t,n,r)=>({set _(s){Q(e,t,s,n)},get _(){return D(e,t,r)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();function Wp(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var qp={exports:{}},yl={},Qp={exports:{}},ae={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yi=Symbol.for("react.element"),Q1=Symbol.for("react.portal"),X1=Symbol.for("react.fragment"),K1=Symbol.for("react.strict_mode"),Y1=Symbol.for("react.profiler"),G1=Symbol.for("react.provider"),Z1=Symbol.for("react.context"),J1=Symbol.for("react.forward_ref"),eb=Symbol.for("react.suspense"),tb=Symbol.for("react.memo"),nb=Symbol.for("react.lazy"),qf=Symbol.iterator;function rb(e){return e===null||typeof e!="object"?null:(e=qf&&e[qf]||e["@@iterator"],typeof e=="function"?e:null)}var Xp={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Kp=Object.assign,Yp={};function Ys(e,t,n){this.props=e,this.context=t,this.refs=Yp,this.updater=n||Xp}Ys.prototype.isReactComponent={};Ys.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Ys.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Gp(){}Gp.prototype=Ys.prototype;function gd(e,t,n){this.props=e,this.context=t,this.refs=Yp,this.updater=n||Xp}var xd=gd.prototype=new Gp;xd.constructor=gd;Kp(xd,Ys.prototype);xd.isPureReactComponent=!0;var Qf=Array.isArray,Zp=Object.prototype.hasOwnProperty,yd={current:null},Jp={key:!0,ref:!0,__self:!0,__source:!0};function eg(e,t,n){var r,s={},o=null,a=null;if(t!=null)for(r in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(o=""+t.key),t)Zp.call(t,r)&&!Jp.hasOwnProperty(r)&&(s[r]=t[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];s.children=u}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:yi,type:e,key:o,ref:a,props:s,_owner:yd.current}}function sb(e,t){return{$$typeof:yi,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function vd(e){return typeof e=="object"&&e!==null&&e.$$typeof===yi}function ob(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Xf=/\/+/g;function ru(e,t){return typeof e=="object"&&e!==null&&e.key!=null?ob(""+e.key):t.toString(36)}function ma(e,t,n,r,s){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case yi:case Q1:a=!0}}if(a)return a=e,s=s(a),e=r===""?"."+ru(a,0):r,Qf(s)?(n="",e!=null&&(n=e.replace(Xf,"$&/")+"/"),ma(s,t,n,"",function(c){return c})):s!=null&&(vd(s)&&(s=sb(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(Xf,"$&/")+"/")+e)),t.push(s)),1;if(a=0,r=r===""?".":r+":",Qf(e))for(var l=0;l<e.length;l++){o=e[l];var u=r+ru(o,l);a+=ma(o,t,n,u,s)}else if(u=rb(e),typeof u=="function")for(e=u.call(e),l=0;!(o=e.next()).done;)o=o.value,u=r+ru(o,l++),a+=ma(o,t,n,u,s);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function Li(e,t,n){if(e==null)return e;var r=[],s=0;return ma(e,r,"","",function(o){return t.call(n,o,s++)}),r}function ib(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var tt={current:null},ha={transition:null},ab={ReactCurrentDispatcher:tt,ReactCurrentBatchConfig:ha,ReactCurrentOwner:yd};function tg(){throw Error("act(...) is not supported in production builds of React.")}ae.Children={map:Li,forEach:function(e,t,n){Li(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Li(e,function(){t++}),t},toArray:function(e){return Li(e,function(t){return t})||[]},only:function(e){if(!vd(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ae.Component=Ys;ae.Fragment=X1;ae.Profiler=Y1;ae.PureComponent=gd;ae.StrictMode=K1;ae.Suspense=eb;ae.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ab;ae.act=tg;ae.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Kp({},e.props),s=e.key,o=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,a=yd.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(u in t)Zp.call(t,u)&&!Jp.hasOwnProperty(u)&&(r[u]=t[u]===void 0&&l!==void 0?l[u]:t[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];r.children=l}return{$$typeof:yi,type:e.type,key:s,ref:o,props:r,_owner:a}};ae.createContext=function(e){return e={$$typeof:Z1,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:G1,_context:e},e.Consumer=e};ae.createElement=eg;ae.createFactory=function(e){var t=eg.bind(null,e);return t.type=e,t};ae.createRef=function(){return{current:null}};ae.forwardRef=function(e){return{$$typeof:J1,render:e}};ae.isValidElement=vd;ae.lazy=function(e){return{$$typeof:nb,_payload:{_status:-1,_result:e},_init:ib}};ae.memo=function(e,t){return{$$typeof:tb,type:e,compare:t===void 0?null:t}};ae.startTransition=function(e){var t=ha.transition;ha.transition={};try{e()}finally{ha.transition=t}};ae.unstable_act=tg;ae.useCallback=function(e,t){return tt.current.useCallback(e,t)};ae.useContext=function(e){return tt.current.useContext(e)};ae.useDebugValue=function(){};ae.useDeferredValue=function(e){return tt.current.useDeferredValue(e)};ae.useEffect=function(e,t){return tt.current.useEffect(e,t)};ae.useId=function(){return tt.current.useId()};ae.useImperativeHandle=function(e,t,n){return tt.current.useImperativeHandle(e,t,n)};ae.useInsertionEffect=function(e,t){return tt.current.useInsertionEffect(e,t)};ae.useLayoutEffect=function(e,t){return tt.current.useLayoutEffect(e,t)};ae.useMemo=function(e,t){return tt.current.useMemo(e,t)};ae.useReducer=function(e,t,n){return tt.current.useReducer(e,t,n)};ae.useRef=function(e){return tt.current.useRef(e)};ae.useState=function(e){return tt.current.useState(e)};ae.useSyncExternalStore=function(e,t,n){return tt.current.useSyncExternalStore(e,t,n)};ae.useTransition=function(){return tt.current.useTransition()};ae.version="18.3.1";Qp.exports=ae;var T=Qp.exports;const zt=Wp(T);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lb=T,ub=Symbol.for("react.element"),cb=Symbol.for("react.fragment"),db=Object.prototype.hasOwnProperty,fb=lb.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,mb={key:!0,ref:!0,__self:!0,__source:!0};function ng(e,t,n){var r,s={},o=null,a=null;n!==void 0&&(o=""+n),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(a=t.ref);for(r in t)db.call(t,r)&&!mb.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:ub,type:e,key:o,ref:a,props:s,_owner:fb.current}}yl.Fragment=cb;yl.jsx=ng;yl.jsxs=ng;qp.exports=yl;var i=qp.exports,Bu={},rg={exports:{}},vt={},sg={exports:{}},og={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(E,P){var F=E.length;E.push(P);e:for(;0<F;){var V=F-1>>>1,H=E[V];if(0<s(H,P))E[V]=P,E[F]=H,F=V;else break e}}function n(E){return E.length===0?null:E[0]}function r(E){if(E.length===0)return null;var P=E[0],F=E.pop();if(F!==P){E[0]=F;e:for(var V=0,H=E.length,q=H>>>1;V<q;){var U=2*(V+1)-1,K=E[U],Y=U+1,Z=E[Y];if(0>s(K,F))Y<H&&0>s(Z,K)?(E[V]=Z,E[Y]=F,V=Y):(E[V]=K,E[U]=F,V=U);else if(Y<H&&0>s(Z,F))E[V]=Z,E[Y]=F,V=Y;else break e}}return P}function s(E,P){var F=E.sortIndex-P.sortIndex;return F!==0?F:E.id-P.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();e.unstable_now=function(){return a.now()-l}}var u=[],c=[],d=1,f=null,m=3,y=!1,x=!1,w=!1,j=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,h=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function g(E){for(var P=n(c);P!==null;){if(P.callback===null)r(c);else if(P.startTime<=E)r(c),P.sortIndex=P.expirationTime,t(u,P);else break;P=n(c)}}function v(E){if(w=!1,g(E),!x)if(n(u)!==null)x=!0,A(N);else{var P=n(c);P!==null&&z(v,P.startTime-E)}}function N(E,P){x=!1,w&&(w=!1,p(_),_=-1),y=!0;var F=m;try{for(g(P),f=n(u);f!==null&&(!(f.expirationTime>P)||E&&!I());){var V=f.callback;if(typeof V=="function"){f.callback=null,m=f.priorityLevel;var H=V(f.expirationTime<=P);P=e.unstable_now(),typeof H=="function"?f.callback=H:f===n(u)&&r(u),g(P)}else r(u);f=n(u)}if(f!==null)var q=!0;else{var U=n(c);U!==null&&z(v,U.startTime-P),q=!1}return q}finally{f=null,m=F,y=!1}}var k=!1,b=null,_=-1,C=5,M=-1;function I(){return!(e.unstable_now()-M<C)}function R(){if(b!==null){var E=e.unstable_now();M=E;var P=!0;try{P=b(!0,E)}finally{P?O():(k=!1,b=null)}}else k=!1}var O;if(typeof h=="function")O=function(){h(R)};else if(typeof MessageChannel<"u"){var S=new MessageChannel,L=S.port2;S.port1.onmessage=R,O=function(){L.postMessage(null)}}else O=function(){j(R,0)};function A(E){b=E,k||(k=!0,O())}function z(E,P){_=j(function(){E(e.unstable_now())},P)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(E){E.callback=null},e.unstable_continueExecution=function(){x||y||(x=!0,A(N))},e.unstable_forceFrameRate=function(E){0>E||125<E?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<E?Math.floor(1e3/E):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(E){switch(m){case 1:case 2:case 3:var P=3;break;default:P=m}var F=m;m=P;try{return E()}finally{m=F}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(E,P){switch(E){case 1:case 2:case 3:case 4:case 5:break;default:E=3}var F=m;m=E;try{return P()}finally{m=F}},e.unstable_scheduleCallback=function(E,P,F){var V=e.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?V+F:V):F=V,E){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=F+H,E={id:d++,callback:P,priorityLevel:E,startTime:F,expirationTime:H,sortIndex:-1},F>V?(E.sortIndex=F,t(c,E),n(u)===null&&E===n(c)&&(w?(p(_),_=-1):w=!0,z(v,F-V))):(E.sortIndex=H,t(u,E),x||y||(x=!0,A(N))),E},e.unstable_shouldYield=I,e.unstable_wrapCallback=function(E){var P=m;return function(){var F=m;m=P;try{return E.apply(this,arguments)}finally{m=F}}}})(og);sg.exports=og;var hb=sg.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pb=T,xt=hb;function B(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ig=new Set,Fo={};function Br(e,t){Ps(e,t),Ps(e+"Capture",t)}function Ps(e,t){for(Fo[e]=t,e=0;e<t.length;e++)ig.add(t[e])}var yn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Uu=Object.prototype.hasOwnProperty,gb=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Kf={},Yf={};function xb(e){return Uu.call(Yf,e)?!0:Uu.call(Kf,e)?!1:gb.test(e)?Yf[e]=!0:(Kf[e]=!0,!1)}function yb(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function vb(e,t,n,r){if(t===null||typeof t>"u"||yb(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function nt(e,t,n,r,s,o,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}var Ue={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ue[e]=new nt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ue[t]=new nt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ue[e]=new nt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ue[e]=new nt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ue[e]=new nt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ue[e]=new nt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ue[e]=new nt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ue[e]=new nt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ue[e]=new nt(e,5,!1,e.toLowerCase(),null,!1,!1)});var bd=/[\-:]([a-z])/g;function wd(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(bd,wd);Ue[t]=new nt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(bd,wd);Ue[t]=new nt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(bd,wd);Ue[t]=new nt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ue[e]=new nt(e,1,!1,e.toLowerCase(),null,!1,!1)});Ue.xlinkHref=new nt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ue[e]=new nt(e,1,!1,e.toLowerCase(),null,!0,!0)});function Nd(e,t,n,r){var s=Ue.hasOwnProperty(t)?Ue[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(vb(t,n,s,r)&&(n=null),r||s===null?xb(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var jn=pb.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Fi=Symbol.for("react.element"),Zr=Symbol.for("react.portal"),Jr=Symbol.for("react.fragment"),jd=Symbol.for("react.strict_mode"),Wu=Symbol.for("react.profiler"),ag=Symbol.for("react.provider"),lg=Symbol.for("react.context"),kd=Symbol.for("react.forward_ref"),qu=Symbol.for("react.suspense"),Qu=Symbol.for("react.suspense_list"),_d=Symbol.for("react.memo"),Rn=Symbol.for("react.lazy"),ug=Symbol.for("react.offscreen"),Gf=Symbol.iterator;function uo(e){return e===null||typeof e!="object"?null:(e=Gf&&e[Gf]||e["@@iterator"],typeof e=="function"?e:null)}var Ce=Object.assign,su;function wo(e){if(su===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);su=t&&t[1]||""}return`
`+su+e}var ou=!1;function iu(e,t){if(!e||ou)return"";ou=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),o=r.stack.split(`
`),a=s.length-1,l=o.length-1;1<=a&&0<=l&&s[a]!==o[l];)l--;for(;1<=a&&0<=l;a--,l--)if(s[a]!==o[l]){if(a!==1||l!==1)do if(a--,l--,0>l||s[a]!==o[l]){var u=`
`+s[a].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=a&&0<=l);break}}}finally{ou=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?wo(e):""}function bb(e){switch(e.tag){case 5:return wo(e.type);case 16:return wo("Lazy");case 13:return wo("Suspense");case 19:return wo("SuspenseList");case 0:case 2:case 15:return e=iu(e.type,!1),e;case 11:return e=iu(e.type.render,!1),e;case 1:return e=iu(e.type,!0),e;default:return""}}function Xu(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Jr:return"Fragment";case Zr:return"Portal";case Wu:return"Profiler";case jd:return"StrictMode";case qu:return"Suspense";case Qu:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case lg:return(e.displayName||"Context")+".Consumer";case ag:return(e._context.displayName||"Context")+".Provider";case kd:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case _d:return t=e.displayName||null,t!==null?t:Xu(e.type)||"Memo";case Rn:t=e._payload,e=e._init;try{return Xu(e(t))}catch{}}return null}function wb(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Xu(t);case 8:return t===jd?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function tr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function cg(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Nb(e){var t=cg(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,o.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function $i(e){e._valueTracker||(e._valueTracker=Nb(e))}function dg(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=cg(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Ia(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Ku(e,t){var n=t.checked;return Ce({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Zf(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=tr(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function fg(e,t){t=t.checked,t!=null&&Nd(e,"checked",t,!1)}function Yu(e,t){fg(e,t);var n=tr(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Gu(e,t.type,n):t.hasOwnProperty("defaultValue")&&Gu(e,t.type,tr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Jf(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Gu(e,t,n){(t!=="number"||Ia(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var No=Array.isArray;function fs(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+tr(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Zu(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(B(91));return Ce({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function em(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(B(92));if(No(n)){if(1<n.length)throw Error(B(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:tr(n)}}function mg(e,t){var n=tr(t.value),r=tr(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function tm(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function hg(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ju(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?hg(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Vi,pg=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Vi=Vi||document.createElement("div"),Vi.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Vi.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function $o(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Eo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},jb=["Webkit","ms","Moz","O"];Object.keys(Eo).forEach(function(e){jb.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Eo[t]=Eo[e]})});function gg(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Eo.hasOwnProperty(e)&&Eo[e]?(""+t).trim():t+"px"}function xg(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=gg(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var kb=Ce({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ec(e,t){if(t){if(kb[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(B(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(B(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(B(61))}if(t.style!=null&&typeof t.style!="object")throw Error(B(62))}}function tc(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var nc=null;function Sd(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var rc=null,ms=null,hs=null;function nm(e){if(e=wi(e)){if(typeof rc!="function")throw Error(B(280));var t=e.stateNode;t&&(t=jl(t),rc(e.stateNode,e.type,t))}}function yg(e){ms?hs?hs.push(e):hs=[e]:ms=e}function vg(){if(ms){var e=ms,t=hs;if(hs=ms=null,nm(e),t)for(e=0;e<t.length;e++)nm(t[e])}}function bg(e,t){return e(t)}function wg(){}var au=!1;function Ng(e,t,n){if(au)return e(t,n);au=!0;try{return bg(e,t,n)}finally{au=!1,(ms!==null||hs!==null)&&(wg(),vg())}}function Vo(e,t){var n=e.stateNode;if(n===null)return null;var r=jl(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(B(231,t,typeof n));return n}var sc=!1;if(yn)try{var co={};Object.defineProperty(co,"passive",{get:function(){sc=!0}}),window.addEventListener("test",co,co),window.removeEventListener("test",co,co)}catch{sc=!1}function _b(e,t,n,r,s,o,a,l,u){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(d){this.onError(d)}}var To=!1,Da=null,Aa=!1,oc=null,Sb={onError:function(e){To=!0,Da=e}};function Cb(e,t,n,r,s,o,a,l,u){To=!1,Da=null,_b.apply(Sb,arguments)}function Eb(e,t,n,r,s,o,a,l,u){if(Cb.apply(this,arguments),To){if(To){var c=Da;To=!1,Da=null}else throw Error(B(198));Aa||(Aa=!0,oc=c)}}function Ur(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function jg(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function rm(e){if(Ur(e)!==e)throw Error(B(188))}function Tb(e){var t=e.alternate;if(!t){if(t=Ur(e),t===null)throw Error(B(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var o=s.alternate;if(o===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===n)return rm(s),e;if(o===r)return rm(s),t;o=o.sibling}throw Error(B(188))}if(n.return!==r.return)n=s,r=o;else{for(var a=!1,l=s.child;l;){if(l===n){a=!0,n=s,r=o;break}if(l===r){a=!0,r=s,n=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===n){a=!0,n=o,r=s;break}if(l===r){a=!0,r=o,n=s;break}l=l.sibling}if(!a)throw Error(B(189))}}if(n.alternate!==r)throw Error(B(190))}if(n.tag!==3)throw Error(B(188));return n.stateNode.current===n?e:t}function kg(e){return e=Tb(e),e!==null?_g(e):null}function _g(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=_g(e);if(t!==null)return t;e=e.sibling}return null}var Sg=xt.unstable_scheduleCallback,sm=xt.unstable_cancelCallback,Rb=xt.unstable_shouldYield,Mb=xt.unstable_requestPaint,Me=xt.unstable_now,Pb=xt.unstable_getCurrentPriorityLevel,Cd=xt.unstable_ImmediatePriority,Cg=xt.unstable_UserBlockingPriority,Oa=xt.unstable_NormalPriority,Ib=xt.unstable_LowPriority,Eg=xt.unstable_IdlePriority,vl=null,en=null;function Db(e){if(en&&typeof en.onCommitFiberRoot=="function")try{en.onCommitFiberRoot(vl,e,void 0,(e.current.flags&128)===128)}catch{}}var $t=Math.clz32?Math.clz32:zb,Ab=Math.log,Ob=Math.LN2;function zb(e){return e>>>=0,e===0?32:31-(Ab(e)/Ob|0)|0}var Hi=64,Bi=4194304;function jo(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function za(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,o=e.pingedLanes,a=n&268435455;if(a!==0){var l=a&~s;l!==0?r=jo(l):(o&=a,o!==0&&(r=jo(o)))}else a=n&~s,a!==0?r=jo(a):o!==0&&(r=jo(o));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,o=t&-t,s>=o||s===16&&(o&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-$t(t),s=1<<n,r|=e[n],t&=~s;return r}function Lb(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Fb(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,o=e.pendingLanes;0<o;){var a=31-$t(o),l=1<<a,u=s[a];u===-1?(!(l&n)||l&r)&&(s[a]=Lb(l,t)):u<=t&&(e.expiredLanes|=l),o&=~l}}function ic(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Tg(){var e=Hi;return Hi<<=1,!(Hi&4194240)&&(Hi=64),e}function lu(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vi(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-$t(t),e[t]=n}function $b(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-$t(n),o=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~o}}function Ed(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-$t(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var xe=0;function Rg(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Mg,Td,Pg,Ig,Dg,ac=!1,Ui=[],Wn=null,qn=null,Qn=null,Ho=new Map,Bo=new Map,Pn=[],Vb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function om(e,t){switch(e){case"focusin":case"focusout":Wn=null;break;case"dragenter":case"dragleave":qn=null;break;case"mouseover":case"mouseout":Qn=null;break;case"pointerover":case"pointerout":Ho.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Bo.delete(t.pointerId)}}function fo(e,t,n,r,s,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[s]},t!==null&&(t=wi(t),t!==null&&Td(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function Hb(e,t,n,r,s){switch(t){case"focusin":return Wn=fo(Wn,e,t,n,r,s),!0;case"dragenter":return qn=fo(qn,e,t,n,r,s),!0;case"mouseover":return Qn=fo(Qn,e,t,n,r,s),!0;case"pointerover":var o=s.pointerId;return Ho.set(o,fo(Ho.get(o)||null,e,t,n,r,s)),!0;case"gotpointercapture":return o=s.pointerId,Bo.set(o,fo(Bo.get(o)||null,e,t,n,r,s)),!0}return!1}function Ag(e){var t=fr(e.target);if(t!==null){var n=Ur(t);if(n!==null){if(t=n.tag,t===13){if(t=jg(n),t!==null){e.blockedOn=t,Dg(e.priority,function(){Pg(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function pa(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=lc(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);nc=r,n.target.dispatchEvent(r),nc=null}else return t=wi(n),t!==null&&Td(t),e.blockedOn=n,!1;t.shift()}return!0}function im(e,t,n){pa(e)&&n.delete(t)}function Bb(){ac=!1,Wn!==null&&pa(Wn)&&(Wn=null),qn!==null&&pa(qn)&&(qn=null),Qn!==null&&pa(Qn)&&(Qn=null),Ho.forEach(im),Bo.forEach(im)}function mo(e,t){e.blockedOn===t&&(e.blockedOn=null,ac||(ac=!0,xt.unstable_scheduleCallback(xt.unstable_NormalPriority,Bb)))}function Uo(e){function t(s){return mo(s,e)}if(0<Ui.length){mo(Ui[0],e);for(var n=1;n<Ui.length;n++){var r=Ui[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Wn!==null&&mo(Wn,e),qn!==null&&mo(qn,e),Qn!==null&&mo(Qn,e),Ho.forEach(t),Bo.forEach(t),n=0;n<Pn.length;n++)r=Pn[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Pn.length&&(n=Pn[0],n.blockedOn===null);)Ag(n),n.blockedOn===null&&Pn.shift()}var ps=jn.ReactCurrentBatchConfig,La=!0;function Ub(e,t,n,r){var s=xe,o=ps.transition;ps.transition=null;try{xe=1,Rd(e,t,n,r)}finally{xe=s,ps.transition=o}}function Wb(e,t,n,r){var s=xe,o=ps.transition;ps.transition=null;try{xe=4,Rd(e,t,n,r)}finally{xe=s,ps.transition=o}}function Rd(e,t,n,r){if(La){var s=lc(e,t,n,r);if(s===null)yu(e,t,r,Fa,n),om(e,r);else if(Hb(s,e,t,n,r))r.stopPropagation();else if(om(e,r),t&4&&-1<Vb.indexOf(e)){for(;s!==null;){var o=wi(s);if(o!==null&&Mg(o),o=lc(e,t,n,r),o===null&&yu(e,t,r,Fa,n),o===s)break;s=o}s!==null&&r.stopPropagation()}else yu(e,t,r,null,n)}}var Fa=null;function lc(e,t,n,r){if(Fa=null,e=Sd(r),e=fr(e),e!==null)if(t=Ur(e),t===null)e=null;else if(n=t.tag,n===13){if(e=jg(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Fa=e,null}function Og(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Pb()){case Cd:return 1;case Cg:return 4;case Oa:case Ib:return 16;case Eg:return 536870912;default:return 16}default:return 16}}var Bn=null,Md=null,ga=null;function zg(){if(ga)return ga;var e,t=Md,n=t.length,r,s="value"in Bn?Bn.value:Bn.textContent,o=s.length;for(e=0;e<n&&t[e]===s[e];e++);var a=n-e;for(r=1;r<=a&&t[n-r]===s[o-r];r++);return ga=s.slice(e,1<r?1-r:void 0)}function xa(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Wi(){return!0}function am(){return!1}function bt(e){function t(n,r,s,o,a){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(o):o[l]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Wi:am,this.isPropagationStopped=am,this}return Ce(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Wi)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Wi)},persist:function(){},isPersistent:Wi}),t}var Gs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Pd=bt(Gs),bi=Ce({},Gs,{view:0,detail:0}),qb=bt(bi),uu,cu,ho,bl=Ce({},bi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Id,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ho&&(ho&&e.type==="mousemove"?(uu=e.screenX-ho.screenX,cu=e.screenY-ho.screenY):cu=uu=0,ho=e),uu)},movementY:function(e){return"movementY"in e?e.movementY:cu}}),lm=bt(bl),Qb=Ce({},bl,{dataTransfer:0}),Xb=bt(Qb),Kb=Ce({},bi,{relatedTarget:0}),du=bt(Kb),Yb=Ce({},Gs,{animationName:0,elapsedTime:0,pseudoElement:0}),Gb=bt(Yb),Zb=Ce({},Gs,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Jb=bt(Zb),ew=Ce({},Gs,{data:0}),um=bt(ew),tw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},nw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},rw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function sw(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=rw[e])?!!t[e]:!1}function Id(){return sw}var ow=Ce({},bi,{key:function(e){if(e.key){var t=tw[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=xa(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?nw[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Id,charCode:function(e){return e.type==="keypress"?xa(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?xa(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),iw=bt(ow),aw=Ce({},bl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),cm=bt(aw),lw=Ce({},bi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Id}),uw=bt(lw),cw=Ce({},Gs,{propertyName:0,elapsedTime:0,pseudoElement:0}),dw=bt(cw),fw=Ce({},bl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),mw=bt(fw),hw=[9,13,27,32],Dd=yn&&"CompositionEvent"in window,Ro=null;yn&&"documentMode"in document&&(Ro=document.documentMode);var pw=yn&&"TextEvent"in window&&!Ro,Lg=yn&&(!Dd||Ro&&8<Ro&&11>=Ro),dm=" ",fm=!1;function Fg(e,t){switch(e){case"keyup":return hw.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $g(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var es=!1;function gw(e,t){switch(e){case"compositionend":return $g(t);case"keypress":return t.which!==32?null:(fm=!0,dm);case"textInput":return e=t.data,e===dm&&fm?null:e;default:return null}}function xw(e,t){if(es)return e==="compositionend"||!Dd&&Fg(e,t)?(e=zg(),ga=Md=Bn=null,es=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Lg&&t.locale!=="ko"?null:t.data;default:return null}}var yw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function mm(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!yw[e.type]:t==="textarea"}function Vg(e,t,n,r){yg(r),t=$a(t,"onChange"),0<t.length&&(n=new Pd("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Mo=null,Wo=null;function vw(e){Zg(e,0)}function wl(e){var t=rs(e);if(dg(t))return e}function bw(e,t){if(e==="change")return t}var Hg=!1;if(yn){var fu;if(yn){var mu="oninput"in document;if(!mu){var hm=document.createElement("div");hm.setAttribute("oninput","return;"),mu=typeof hm.oninput=="function"}fu=mu}else fu=!1;Hg=fu&&(!document.documentMode||9<document.documentMode)}function pm(){Mo&&(Mo.detachEvent("onpropertychange",Bg),Wo=Mo=null)}function Bg(e){if(e.propertyName==="value"&&wl(Wo)){var t=[];Vg(t,Wo,e,Sd(e)),Ng(vw,t)}}function ww(e,t,n){e==="focusin"?(pm(),Mo=t,Wo=n,Mo.attachEvent("onpropertychange",Bg)):e==="focusout"&&pm()}function Nw(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return wl(Wo)}function jw(e,t){if(e==="click")return wl(t)}function kw(e,t){if(e==="input"||e==="change")return wl(t)}function _w(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ht=typeof Object.is=="function"?Object.is:_w;function qo(e,t){if(Ht(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Uu.call(t,s)||!Ht(e[s],t[s]))return!1}return!0}function gm(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function xm(e,t){var n=gm(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=gm(n)}}function Ug(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Ug(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Wg(){for(var e=window,t=Ia();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Ia(e.document)}return t}function Ad(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Sw(e){var t=Wg(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Ug(n.ownerDocument.documentElement,n)){if(r!==null&&Ad(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,o=Math.min(r.start,s);r=r.end===void 0?o:Math.min(r.end,s),!e.extend&&o>r&&(s=r,r=o,o=s),s=xm(n,o);var a=xm(n,r);s&&a&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Cw=yn&&"documentMode"in document&&11>=document.documentMode,ts=null,uc=null,Po=null,cc=!1;function ym(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;cc||ts==null||ts!==Ia(r)||(r=ts,"selectionStart"in r&&Ad(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Po&&qo(Po,r)||(Po=r,r=$a(uc,"onSelect"),0<r.length&&(t=new Pd("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=ts)))}function qi(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var ns={animationend:qi("Animation","AnimationEnd"),animationiteration:qi("Animation","AnimationIteration"),animationstart:qi("Animation","AnimationStart"),transitionend:qi("Transition","TransitionEnd")},hu={},qg={};yn&&(qg=document.createElement("div").style,"AnimationEvent"in window||(delete ns.animationend.animation,delete ns.animationiteration.animation,delete ns.animationstart.animation),"TransitionEvent"in window||delete ns.transitionend.transition);function Nl(e){if(hu[e])return hu[e];if(!ns[e])return e;var t=ns[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in qg)return hu[e]=t[n];return e}var Qg=Nl("animationend"),Xg=Nl("animationiteration"),Kg=Nl("animationstart"),Yg=Nl("transitionend"),Gg=new Map,vm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function rr(e,t){Gg.set(e,t),Br(t,[e])}for(var pu=0;pu<vm.length;pu++){var gu=vm[pu],Ew=gu.toLowerCase(),Tw=gu[0].toUpperCase()+gu.slice(1);rr(Ew,"on"+Tw)}rr(Qg,"onAnimationEnd");rr(Xg,"onAnimationIteration");rr(Kg,"onAnimationStart");rr("dblclick","onDoubleClick");rr("focusin","onFocus");rr("focusout","onBlur");rr(Yg,"onTransitionEnd");Ps("onMouseEnter",["mouseout","mouseover"]);Ps("onMouseLeave",["mouseout","mouseover"]);Ps("onPointerEnter",["pointerout","pointerover"]);Ps("onPointerLeave",["pointerout","pointerover"]);Br("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Br("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Br("onBeforeInput",["compositionend","keypress","textInput","paste"]);Br("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Br("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Br("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ko="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Rw=new Set("cancel close invalid load scroll toggle".split(" ").concat(ko));function bm(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,Eb(r,t,void 0,e),e.currentTarget=null}function Zg(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var a=r.length-1;0<=a;a--){var l=r[a],u=l.instance,c=l.currentTarget;if(l=l.listener,u!==o&&s.isPropagationStopped())break e;bm(s,l,c),o=u}else for(a=0;a<r.length;a++){if(l=r[a],u=l.instance,c=l.currentTarget,l=l.listener,u!==o&&s.isPropagationStopped())break e;bm(s,l,c),o=u}}}if(Aa)throw e=oc,Aa=!1,oc=null,e}function be(e,t){var n=t[pc];n===void 0&&(n=t[pc]=new Set);var r=e+"__bubble";n.has(r)||(Jg(t,e,2,!1),n.add(r))}function xu(e,t,n){var r=0;t&&(r|=4),Jg(n,e,r,t)}var Qi="_reactListening"+Math.random().toString(36).slice(2);function Qo(e){if(!e[Qi]){e[Qi]=!0,ig.forEach(function(n){n!=="selectionchange"&&(Rw.has(n)||xu(n,!1,e),xu(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Qi]||(t[Qi]=!0,xu("selectionchange",!1,t))}}function Jg(e,t,n,r){switch(Og(t)){case 1:var s=Ub;break;case 4:s=Wb;break;default:s=Rd}n=s.bind(null,t,n,e),s=void 0,!sc||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function yu(e,t,n,r,s){var o=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var u=a.tag;if((u===3||u===4)&&(u=a.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;a=a.return}for(;l!==null;){if(a=fr(l),a===null)return;if(u=a.tag,u===5||u===6){r=o=a;continue e}l=l.parentNode}}r=r.return}Ng(function(){var c=o,d=Sd(n),f=[];e:{var m=Gg.get(e);if(m!==void 0){var y=Pd,x=e;switch(e){case"keypress":if(xa(n)===0)break e;case"keydown":case"keyup":y=iw;break;case"focusin":x="focus",y=du;break;case"focusout":x="blur",y=du;break;case"beforeblur":case"afterblur":y=du;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=lm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=Xb;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=uw;break;case Qg:case Xg:case Kg:y=Gb;break;case Yg:y=dw;break;case"scroll":y=qb;break;case"wheel":y=mw;break;case"copy":case"cut":case"paste":y=Jb;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=cm}var w=(t&4)!==0,j=!w&&e==="scroll",p=w?m!==null?m+"Capture":null:m;w=[];for(var h=c,g;h!==null;){g=h;var v=g.stateNode;if(g.tag===5&&v!==null&&(g=v,p!==null&&(v=Vo(h,p),v!=null&&w.push(Xo(h,v,g)))),j)break;h=h.return}0<w.length&&(m=new y(m,x,null,n,d),f.push({event:m,listeners:w}))}}if(!(t&7)){e:{if(m=e==="mouseover"||e==="pointerover",y=e==="mouseout"||e==="pointerout",m&&n!==nc&&(x=n.relatedTarget||n.fromElement)&&(fr(x)||x[vn]))break e;if((y||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,y?(x=n.relatedTarget||n.toElement,y=c,x=x?fr(x):null,x!==null&&(j=Ur(x),x!==j||x.tag!==5&&x.tag!==6)&&(x=null)):(y=null,x=c),y!==x)){if(w=lm,v="onMouseLeave",p="onMouseEnter",h="mouse",(e==="pointerout"||e==="pointerover")&&(w=cm,v="onPointerLeave",p="onPointerEnter",h="pointer"),j=y==null?m:rs(y),g=x==null?m:rs(x),m=new w(v,h+"leave",y,n,d),m.target=j,m.relatedTarget=g,v=null,fr(d)===c&&(w=new w(p,h+"enter",x,n,d),w.target=g,w.relatedTarget=j,v=w),j=v,y&&x)t:{for(w=y,p=x,h=0,g=w;g;g=Yr(g))h++;for(g=0,v=p;v;v=Yr(v))g++;for(;0<h-g;)w=Yr(w),h--;for(;0<g-h;)p=Yr(p),g--;for(;h--;){if(w===p||p!==null&&w===p.alternate)break t;w=Yr(w),p=Yr(p)}w=null}else w=null;y!==null&&wm(f,m,y,w,!1),x!==null&&j!==null&&wm(f,j,x,w,!0)}}e:{if(m=c?rs(c):window,y=m.nodeName&&m.nodeName.toLowerCase(),y==="select"||y==="input"&&m.type==="file")var N=bw;else if(mm(m))if(Hg)N=kw;else{N=Nw;var k=ww}else(y=m.nodeName)&&y.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(N=jw);if(N&&(N=N(e,c))){Vg(f,N,n,d);break e}k&&k(e,m,c),e==="focusout"&&(k=m._wrapperState)&&k.controlled&&m.type==="number"&&Gu(m,"number",m.value)}switch(k=c?rs(c):window,e){case"focusin":(mm(k)||k.contentEditable==="true")&&(ts=k,uc=c,Po=null);break;case"focusout":Po=uc=ts=null;break;case"mousedown":cc=!0;break;case"contextmenu":case"mouseup":case"dragend":cc=!1,ym(f,n,d);break;case"selectionchange":if(Cw)break;case"keydown":case"keyup":ym(f,n,d)}var b;if(Dd)e:{switch(e){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else es?Fg(e,n)&&(_="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(_="onCompositionStart");_&&(Lg&&n.locale!=="ko"&&(es||_!=="onCompositionStart"?_==="onCompositionEnd"&&es&&(b=zg()):(Bn=d,Md="value"in Bn?Bn.value:Bn.textContent,es=!0)),k=$a(c,_),0<k.length&&(_=new um(_,e,null,n,d),f.push({event:_,listeners:k}),b?_.data=b:(b=$g(n),b!==null&&(_.data=b)))),(b=pw?gw(e,n):xw(e,n))&&(c=$a(c,"onBeforeInput"),0<c.length&&(d=new um("onBeforeInput","beforeinput",null,n,d),f.push({event:d,listeners:c}),d.data=b))}Zg(f,t)})}function Xo(e,t,n){return{instance:e,listener:t,currentTarget:n}}function $a(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,o=s.stateNode;s.tag===5&&o!==null&&(s=o,o=Vo(e,n),o!=null&&r.unshift(Xo(e,o,s)),o=Vo(e,t),o!=null&&r.push(Xo(e,o,s))),e=e.return}return r}function Yr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function wm(e,t,n,r,s){for(var o=t._reactName,a=[];n!==null&&n!==r;){var l=n,u=l.alternate,c=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&c!==null&&(l=c,s?(u=Vo(n,o),u!=null&&a.unshift(Xo(n,u,l))):s||(u=Vo(n,o),u!=null&&a.push(Xo(n,u,l)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var Mw=/\r\n?/g,Pw=/\u0000|\uFFFD/g;function Nm(e){return(typeof e=="string"?e:""+e).replace(Mw,`
`).replace(Pw,"")}function Xi(e,t,n){if(t=Nm(t),Nm(e)!==t&&n)throw Error(B(425))}function Va(){}var dc=null,fc=null;function mc(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var hc=typeof setTimeout=="function"?setTimeout:void 0,Iw=typeof clearTimeout=="function"?clearTimeout:void 0,jm=typeof Promise=="function"?Promise:void 0,Dw=typeof queueMicrotask=="function"?queueMicrotask:typeof jm<"u"?function(e){return jm.resolve(null).then(e).catch(Aw)}:hc;function Aw(e){setTimeout(function(){throw e})}function vu(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),Uo(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Uo(t)}function Xn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function km(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Zs=Math.random().toString(36).slice(2),Jt="__reactFiber$"+Zs,Ko="__reactProps$"+Zs,vn="__reactContainer$"+Zs,pc="__reactEvents$"+Zs,Ow="__reactListeners$"+Zs,zw="__reactHandles$"+Zs;function fr(e){var t=e[Jt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[vn]||n[Jt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=km(e);e!==null;){if(n=e[Jt])return n;e=km(e)}return t}e=n,n=e.parentNode}return null}function wi(e){return e=e[Jt]||e[vn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function rs(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(B(33))}function jl(e){return e[Ko]||null}var gc=[],ss=-1;function sr(e){return{current:e}}function we(e){0>ss||(e.current=gc[ss],gc[ss]=null,ss--)}function ye(e,t){ss++,gc[ss]=e.current,e.current=t}var nr={},Ye=sr(nr),lt=sr(!1),Pr=nr;function Is(e,t){var n=e.type.contextTypes;if(!n)return nr;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},o;for(o in n)s[o]=t[o];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function ut(e){return e=e.childContextTypes,e!=null}function Ha(){we(lt),we(Ye)}function _m(e,t,n){if(Ye.current!==nr)throw Error(B(168));ye(Ye,t),ye(lt,n)}function ex(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(B(108,wb(e)||"Unknown",s));return Ce({},n,r)}function Ba(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||nr,Pr=Ye.current,ye(Ye,e),ye(lt,lt.current),!0}function Sm(e,t,n){var r=e.stateNode;if(!r)throw Error(B(169));n?(e=ex(e,t,Pr),r.__reactInternalMemoizedMergedChildContext=e,we(lt),we(Ye),ye(Ye,e)):we(lt),ye(lt,n)}var dn=null,kl=!1,bu=!1;function tx(e){dn===null?dn=[e]:dn.push(e)}function Lw(e){kl=!0,tx(e)}function or(){if(!bu&&dn!==null){bu=!0;var e=0,t=xe;try{var n=dn;for(xe=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}dn=null,kl=!1}catch(s){throw dn!==null&&(dn=dn.slice(e+1)),Sg(Cd,or),s}finally{xe=t,bu=!1}}return null}var os=[],is=0,Ua=null,Wa=0,jt=[],kt=0,Ir=null,hn=1,pn="";function lr(e,t){os[is++]=Wa,os[is++]=Ua,Ua=e,Wa=t}function nx(e,t,n){jt[kt++]=hn,jt[kt++]=pn,jt[kt++]=Ir,Ir=e;var r=hn;e=pn;var s=32-$t(r)-1;r&=~(1<<s),n+=1;var o=32-$t(t)+s;if(30<o){var a=s-s%5;o=(r&(1<<a)-1).toString(32),r>>=a,s-=a,hn=1<<32-$t(t)+s|n<<s|r,pn=o+e}else hn=1<<o|n<<s|r,pn=e}function Od(e){e.return!==null&&(lr(e,1),nx(e,1,0))}function zd(e){for(;e===Ua;)Ua=os[--is],os[is]=null,Wa=os[--is],os[is]=null;for(;e===Ir;)Ir=jt[--kt],jt[kt]=null,pn=jt[--kt],jt[kt]=null,hn=jt[--kt],jt[kt]=null}var gt=null,pt=null,Ne=!1,At=null;function rx(e,t){var n=_t(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Cm(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,gt=e,pt=Xn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,gt=e,pt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Ir!==null?{id:hn,overflow:pn}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=_t(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,gt=e,pt=null,!0):!1;default:return!1}}function xc(e){return(e.mode&1)!==0&&(e.flags&128)===0}function yc(e){if(Ne){var t=pt;if(t){var n=t;if(!Cm(e,t)){if(xc(e))throw Error(B(418));t=Xn(n.nextSibling);var r=gt;t&&Cm(e,t)?rx(r,n):(e.flags=e.flags&-4097|2,Ne=!1,gt=e)}}else{if(xc(e))throw Error(B(418));e.flags=e.flags&-4097|2,Ne=!1,gt=e}}}function Em(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;gt=e}function Ki(e){if(e!==gt)return!1;if(!Ne)return Em(e),Ne=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!mc(e.type,e.memoizedProps)),t&&(t=pt)){if(xc(e))throw sx(),Error(B(418));for(;t;)rx(e,t),t=Xn(t.nextSibling)}if(Em(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(B(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){pt=Xn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}pt=null}}else pt=gt?Xn(e.stateNode.nextSibling):null;return!0}function sx(){for(var e=pt;e;)e=Xn(e.nextSibling)}function Ds(){pt=gt=null,Ne=!1}function Ld(e){At===null?At=[e]:At.push(e)}var Fw=jn.ReactCurrentBatchConfig;function po(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(B(309));var r=n.stateNode}if(!r)throw Error(B(147,e));var s=r,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(a){var l=s.refs;a===null?delete l[o]:l[o]=a},t._stringRef=o,t)}if(typeof e!="string")throw Error(B(284));if(!n._owner)throw Error(B(290,e))}return e}function Yi(e,t){throw e=Object.prototype.toString.call(t),Error(B(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Tm(e){var t=e._init;return t(e._payload)}function ox(e){function t(p,h){if(e){var g=p.deletions;g===null?(p.deletions=[h],p.flags|=16):g.push(h)}}function n(p,h){if(!e)return null;for(;h!==null;)t(p,h),h=h.sibling;return null}function r(p,h){for(p=new Map;h!==null;)h.key!==null?p.set(h.key,h):p.set(h.index,h),h=h.sibling;return p}function s(p,h){return p=Zn(p,h),p.index=0,p.sibling=null,p}function o(p,h,g){return p.index=g,e?(g=p.alternate,g!==null?(g=g.index,g<h?(p.flags|=2,h):g):(p.flags|=2,h)):(p.flags|=1048576,h)}function a(p){return e&&p.alternate===null&&(p.flags|=2),p}function l(p,h,g,v){return h===null||h.tag!==6?(h=Cu(g,p.mode,v),h.return=p,h):(h=s(h,g),h.return=p,h)}function u(p,h,g,v){var N=g.type;return N===Jr?d(p,h,g.props.children,v,g.key):h!==null&&(h.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===Rn&&Tm(N)===h.type)?(v=s(h,g.props),v.ref=po(p,h,g),v.return=p,v):(v=ka(g.type,g.key,g.props,null,p.mode,v),v.ref=po(p,h,g),v.return=p,v)}function c(p,h,g,v){return h===null||h.tag!==4||h.stateNode.containerInfo!==g.containerInfo||h.stateNode.implementation!==g.implementation?(h=Eu(g,p.mode,v),h.return=p,h):(h=s(h,g.children||[]),h.return=p,h)}function d(p,h,g,v,N){return h===null||h.tag!==7?(h=Er(g,p.mode,v,N),h.return=p,h):(h=s(h,g),h.return=p,h)}function f(p,h,g){if(typeof h=="string"&&h!==""||typeof h=="number")return h=Cu(""+h,p.mode,g),h.return=p,h;if(typeof h=="object"&&h!==null){switch(h.$$typeof){case Fi:return g=ka(h.type,h.key,h.props,null,p.mode,g),g.ref=po(p,null,h),g.return=p,g;case Zr:return h=Eu(h,p.mode,g),h.return=p,h;case Rn:var v=h._init;return f(p,v(h._payload),g)}if(No(h)||uo(h))return h=Er(h,p.mode,g,null),h.return=p,h;Yi(p,h)}return null}function m(p,h,g,v){var N=h!==null?h.key:null;if(typeof g=="string"&&g!==""||typeof g=="number")return N!==null?null:l(p,h,""+g,v);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Fi:return g.key===N?u(p,h,g,v):null;case Zr:return g.key===N?c(p,h,g,v):null;case Rn:return N=g._init,m(p,h,N(g._payload),v)}if(No(g)||uo(g))return N!==null?null:d(p,h,g,v,null);Yi(p,g)}return null}function y(p,h,g,v,N){if(typeof v=="string"&&v!==""||typeof v=="number")return p=p.get(g)||null,l(h,p,""+v,N);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Fi:return p=p.get(v.key===null?g:v.key)||null,u(h,p,v,N);case Zr:return p=p.get(v.key===null?g:v.key)||null,c(h,p,v,N);case Rn:var k=v._init;return y(p,h,g,k(v._payload),N)}if(No(v)||uo(v))return p=p.get(g)||null,d(h,p,v,N,null);Yi(h,v)}return null}function x(p,h,g,v){for(var N=null,k=null,b=h,_=h=0,C=null;b!==null&&_<g.length;_++){b.index>_?(C=b,b=null):C=b.sibling;var M=m(p,b,g[_],v);if(M===null){b===null&&(b=C);break}e&&b&&M.alternate===null&&t(p,b),h=o(M,h,_),k===null?N=M:k.sibling=M,k=M,b=C}if(_===g.length)return n(p,b),Ne&&lr(p,_),N;if(b===null){for(;_<g.length;_++)b=f(p,g[_],v),b!==null&&(h=o(b,h,_),k===null?N=b:k.sibling=b,k=b);return Ne&&lr(p,_),N}for(b=r(p,b);_<g.length;_++)C=y(b,p,_,g[_],v),C!==null&&(e&&C.alternate!==null&&b.delete(C.key===null?_:C.key),h=o(C,h,_),k===null?N=C:k.sibling=C,k=C);return e&&b.forEach(function(I){return t(p,I)}),Ne&&lr(p,_),N}function w(p,h,g,v){var N=uo(g);if(typeof N!="function")throw Error(B(150));if(g=N.call(g),g==null)throw Error(B(151));for(var k=N=null,b=h,_=h=0,C=null,M=g.next();b!==null&&!M.done;_++,M=g.next()){b.index>_?(C=b,b=null):C=b.sibling;var I=m(p,b,M.value,v);if(I===null){b===null&&(b=C);break}e&&b&&I.alternate===null&&t(p,b),h=o(I,h,_),k===null?N=I:k.sibling=I,k=I,b=C}if(M.done)return n(p,b),Ne&&lr(p,_),N;if(b===null){for(;!M.done;_++,M=g.next())M=f(p,M.value,v),M!==null&&(h=o(M,h,_),k===null?N=M:k.sibling=M,k=M);return Ne&&lr(p,_),N}for(b=r(p,b);!M.done;_++,M=g.next())M=y(b,p,_,M.value,v),M!==null&&(e&&M.alternate!==null&&b.delete(M.key===null?_:M.key),h=o(M,h,_),k===null?N=M:k.sibling=M,k=M);return e&&b.forEach(function(R){return t(p,R)}),Ne&&lr(p,_),N}function j(p,h,g,v){if(typeof g=="object"&&g!==null&&g.type===Jr&&g.key===null&&(g=g.props.children),typeof g=="object"&&g!==null){switch(g.$$typeof){case Fi:e:{for(var N=g.key,k=h;k!==null;){if(k.key===N){if(N=g.type,N===Jr){if(k.tag===7){n(p,k.sibling),h=s(k,g.props.children),h.return=p,p=h;break e}}else if(k.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===Rn&&Tm(N)===k.type){n(p,k.sibling),h=s(k,g.props),h.ref=po(p,k,g),h.return=p,p=h;break e}n(p,k);break}else t(p,k);k=k.sibling}g.type===Jr?(h=Er(g.props.children,p.mode,v,g.key),h.return=p,p=h):(v=ka(g.type,g.key,g.props,null,p.mode,v),v.ref=po(p,h,g),v.return=p,p=v)}return a(p);case Zr:e:{for(k=g.key;h!==null;){if(h.key===k)if(h.tag===4&&h.stateNode.containerInfo===g.containerInfo&&h.stateNode.implementation===g.implementation){n(p,h.sibling),h=s(h,g.children||[]),h.return=p,p=h;break e}else{n(p,h);break}else t(p,h);h=h.sibling}h=Eu(g,p.mode,v),h.return=p,p=h}return a(p);case Rn:return k=g._init,j(p,h,k(g._payload),v)}if(No(g))return x(p,h,g,v);if(uo(g))return w(p,h,g,v);Yi(p,g)}return typeof g=="string"&&g!==""||typeof g=="number"?(g=""+g,h!==null&&h.tag===6?(n(p,h.sibling),h=s(h,g),h.return=p,p=h):(n(p,h),h=Cu(g,p.mode,v),h.return=p,p=h),a(p)):n(p,h)}return j}var As=ox(!0),ix=ox(!1),qa=sr(null),Qa=null,as=null,Fd=null;function $d(){Fd=as=Qa=null}function Vd(e){var t=qa.current;we(qa),e._currentValue=t}function vc(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function gs(e,t){Qa=e,Fd=as=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(it=!0),e.firstContext=null)}function Ct(e){var t=e._currentValue;if(Fd!==e)if(e={context:e,memoizedValue:t,next:null},as===null){if(Qa===null)throw Error(B(308));as=e,Qa.dependencies={lanes:0,firstContext:e}}else as=as.next=e;return t}var mr=null;function Hd(e){mr===null?mr=[e]:mr.push(e)}function ax(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,Hd(t)):(n.next=s.next,s.next=n),t.interleaved=n,bn(e,r)}function bn(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Mn=!1;function Bd(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function lx(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function xn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Kn(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,fe&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,bn(e,n)}return s=r.interleaved,s===null?(t.next=t,Hd(r)):(t.next=s.next,s.next=t),r.interleaved=t,bn(e,n)}function ya(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Ed(e,n)}}function Rm(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?s=o=a:o=o.next=a,n=n.next}while(n!==null);o===null?s=o=t:o=o.next=t}else s=o=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:o,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Xa(e,t,n,r){var s=e.updateQueue;Mn=!1;var o=s.firstBaseUpdate,a=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var u=l,c=u.next;u.next=null,a===null?o=c:a.next=c,a=u;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==a&&(l===null?d.firstBaseUpdate=c:l.next=c,d.lastBaseUpdate=u))}if(o!==null){var f=s.baseState;a=0,d=c=u=null,l=o;do{var m=l.lane,y=l.eventTime;if((r&m)===m){d!==null&&(d=d.next={eventTime:y,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var x=e,w=l;switch(m=t,y=n,w.tag){case 1:if(x=w.payload,typeof x=="function"){f=x.call(y,f,m);break e}f=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=w.payload,m=typeof x=="function"?x.call(y,f,m):x,m==null)break e;f=Ce({},f,m);break e;case 2:Mn=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,m=s.effects,m===null?s.effects=[l]:m.push(l))}else y={eventTime:y,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(c=d=y,u=f):d=d.next=y,a|=m;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;m=l,l=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(d===null&&(u=f),s.baseState=u,s.firstBaseUpdate=c,s.lastBaseUpdate=d,t=s.shared.interleaved,t!==null){s=t;do a|=s.lane,s=s.next;while(s!==t)}else o===null&&(s.shared.lanes=0);Ar|=a,e.lanes=a,e.memoizedState=f}}function Mm(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(B(191,s));s.call(r)}}}var Ni={},tn=sr(Ni),Yo=sr(Ni),Go=sr(Ni);function hr(e){if(e===Ni)throw Error(B(174));return e}function Ud(e,t){switch(ye(Go,t),ye(Yo,e),ye(tn,Ni),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Ju(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Ju(t,e)}we(tn),ye(tn,t)}function Os(){we(tn),we(Yo),we(Go)}function ux(e){hr(Go.current);var t=hr(tn.current),n=Ju(t,e.type);t!==n&&(ye(Yo,e),ye(tn,n))}function Wd(e){Yo.current===e&&(we(tn),we(Yo))}var _e=sr(0);function Ka(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var wu=[];function qd(){for(var e=0;e<wu.length;e++)wu[e]._workInProgressVersionPrimary=null;wu.length=0}var va=jn.ReactCurrentDispatcher,Nu=jn.ReactCurrentBatchConfig,Dr=0,Se=null,Oe=null,Fe=null,Ya=!1,Io=!1,Zo=0,$w=0;function qe(){throw Error(B(321))}function Qd(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Ht(e[n],t[n]))return!1;return!0}function Xd(e,t,n,r,s,o){if(Dr=o,Se=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,va.current=e===null||e.memoizedState===null?Uw:Ww,e=n(r,s),Io){o=0;do{if(Io=!1,Zo=0,25<=o)throw Error(B(301));o+=1,Fe=Oe=null,t.updateQueue=null,va.current=qw,e=n(r,s)}while(Io)}if(va.current=Ga,t=Oe!==null&&Oe.next!==null,Dr=0,Fe=Oe=Se=null,Ya=!1,t)throw Error(B(300));return e}function Kd(){var e=Zo!==0;return Zo=0,e}function Xt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Fe===null?Se.memoizedState=Fe=e:Fe=Fe.next=e,Fe}function Et(){if(Oe===null){var e=Se.alternate;e=e!==null?e.memoizedState:null}else e=Oe.next;var t=Fe===null?Se.memoizedState:Fe.next;if(t!==null)Fe=t,Oe=e;else{if(e===null)throw Error(B(310));Oe=e,e={memoizedState:Oe.memoizedState,baseState:Oe.baseState,baseQueue:Oe.baseQueue,queue:Oe.queue,next:null},Fe===null?Se.memoizedState=Fe=e:Fe=Fe.next=e}return Fe}function Jo(e,t){return typeof t=="function"?t(e):t}function ju(e){var t=Et(),n=t.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=e;var r=Oe,s=r.baseQueue,o=n.pending;if(o!==null){if(s!==null){var a=s.next;s.next=o.next,o.next=a}r.baseQueue=s=o,n.pending=null}if(s!==null){o=s.next,r=r.baseState;var l=a=null,u=null,c=o;do{var d=c.lane;if((Dr&d)===d)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var f={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(l=u=f,a=r):u=u.next=f,Se.lanes|=d,Ar|=d}c=c.next}while(c!==null&&c!==o);u===null?a=r:u.next=l,Ht(r,t.memoizedState)||(it=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=u,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do o=s.lane,Se.lanes|=o,Ar|=o,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function ku(e){var t=Et(),n=t.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,o=t.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do o=e(o,a.action),a=a.next;while(a!==s);Ht(o,t.memoizedState)||(it=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function cx(){}function dx(e,t){var n=Se,r=Et(),s=t(),o=!Ht(r.memoizedState,s);if(o&&(r.memoizedState=s,it=!0),r=r.queue,Yd(hx.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||Fe!==null&&Fe.memoizedState.tag&1){if(n.flags|=2048,ei(9,mx.bind(null,n,r,s,t),void 0,null),$e===null)throw Error(B(349));Dr&30||fx(n,t,s)}return s}function fx(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Se.updateQueue,t===null?(t={lastEffect:null,stores:null},Se.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function mx(e,t,n,r){t.value=n,t.getSnapshot=r,px(t)&&gx(e)}function hx(e,t,n){return n(function(){px(t)&&gx(e)})}function px(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Ht(e,n)}catch{return!0}}function gx(e){var t=bn(e,1);t!==null&&Vt(t,e,1,-1)}function Pm(e){var t=Xt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Jo,lastRenderedState:e},t.queue=e,e=e.dispatch=Bw.bind(null,Se,e),[t.memoizedState,e]}function ei(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Se.updateQueue,t===null?(t={lastEffect:null,stores:null},Se.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function xx(){return Et().memoizedState}function ba(e,t,n,r){var s=Xt();Se.flags|=e,s.memoizedState=ei(1|t,n,void 0,r===void 0?null:r)}function _l(e,t,n,r){var s=Et();r=r===void 0?null:r;var o=void 0;if(Oe!==null){var a=Oe.memoizedState;if(o=a.destroy,r!==null&&Qd(r,a.deps)){s.memoizedState=ei(t,n,o,r);return}}Se.flags|=e,s.memoizedState=ei(1|t,n,o,r)}function Im(e,t){return ba(8390656,8,e,t)}function Yd(e,t){return _l(2048,8,e,t)}function yx(e,t){return _l(4,2,e,t)}function vx(e,t){return _l(4,4,e,t)}function bx(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function wx(e,t,n){return n=n!=null?n.concat([e]):null,_l(4,4,bx.bind(null,t,e),n)}function Gd(){}function Nx(e,t){var n=Et();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Qd(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function jx(e,t){var n=Et();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Qd(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function kx(e,t,n){return Dr&21?(Ht(n,t)||(n=Tg(),Se.lanes|=n,Ar|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,it=!0),e.memoizedState=n)}function Vw(e,t){var n=xe;xe=n!==0&&4>n?n:4,e(!0);var r=Nu.transition;Nu.transition={};try{e(!1),t()}finally{xe=n,Nu.transition=r}}function _x(){return Et().memoizedState}function Hw(e,t,n){var r=Gn(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Sx(e))Cx(t,n);else if(n=ax(e,t,n,r),n!==null){var s=et();Vt(n,e,r,s),Ex(n,t,r)}}function Bw(e,t,n){var r=Gn(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Sx(e))Cx(t,s);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var a=t.lastRenderedState,l=o(a,n);if(s.hasEagerState=!0,s.eagerState=l,Ht(l,a)){var u=t.interleaved;u===null?(s.next=s,Hd(t)):(s.next=u.next,u.next=s),t.interleaved=s;return}}catch{}finally{}n=ax(e,t,s,r),n!==null&&(s=et(),Vt(n,e,r,s),Ex(n,t,r))}}function Sx(e){var t=e.alternate;return e===Se||t!==null&&t===Se}function Cx(e,t){Io=Ya=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Ex(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Ed(e,n)}}var Ga={readContext:Ct,useCallback:qe,useContext:qe,useEffect:qe,useImperativeHandle:qe,useInsertionEffect:qe,useLayoutEffect:qe,useMemo:qe,useReducer:qe,useRef:qe,useState:qe,useDebugValue:qe,useDeferredValue:qe,useTransition:qe,useMutableSource:qe,useSyncExternalStore:qe,useId:qe,unstable_isNewReconciler:!1},Uw={readContext:Ct,useCallback:function(e,t){return Xt().memoizedState=[e,t===void 0?null:t],e},useContext:Ct,useEffect:Im,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,ba(4194308,4,bx.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ba(4194308,4,e,t)},useInsertionEffect:function(e,t){return ba(4,2,e,t)},useMemo:function(e,t){var n=Xt();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Xt();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Hw.bind(null,Se,e),[r.memoizedState,e]},useRef:function(e){var t=Xt();return e={current:e},t.memoizedState=e},useState:Pm,useDebugValue:Gd,useDeferredValue:function(e){return Xt().memoizedState=e},useTransition:function(){var e=Pm(!1),t=e[0];return e=Vw.bind(null,e[1]),Xt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Se,s=Xt();if(Ne){if(n===void 0)throw Error(B(407));n=n()}else{if(n=t(),$e===null)throw Error(B(349));Dr&30||fx(r,t,n)}s.memoizedState=n;var o={value:n,getSnapshot:t};return s.queue=o,Im(hx.bind(null,r,o,e),[e]),r.flags|=2048,ei(9,mx.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Xt(),t=$e.identifierPrefix;if(Ne){var n=pn,r=hn;n=(r&~(1<<32-$t(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Zo++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=$w++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Ww={readContext:Ct,useCallback:Nx,useContext:Ct,useEffect:Yd,useImperativeHandle:wx,useInsertionEffect:yx,useLayoutEffect:vx,useMemo:jx,useReducer:ju,useRef:xx,useState:function(){return ju(Jo)},useDebugValue:Gd,useDeferredValue:function(e){var t=Et();return kx(t,Oe.memoizedState,e)},useTransition:function(){var e=ju(Jo)[0],t=Et().memoizedState;return[e,t]},useMutableSource:cx,useSyncExternalStore:dx,useId:_x,unstable_isNewReconciler:!1},qw={readContext:Ct,useCallback:Nx,useContext:Ct,useEffect:Yd,useImperativeHandle:wx,useInsertionEffect:yx,useLayoutEffect:vx,useMemo:jx,useReducer:ku,useRef:xx,useState:function(){return ku(Jo)},useDebugValue:Gd,useDeferredValue:function(e){var t=Et();return Oe===null?t.memoizedState=e:kx(t,Oe.memoizedState,e)},useTransition:function(){var e=ku(Jo)[0],t=Et().memoizedState;return[e,t]},useMutableSource:cx,useSyncExternalStore:dx,useId:_x,unstable_isNewReconciler:!1};function Rt(e,t){if(e&&e.defaultProps){t=Ce({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function bc(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Ce({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Sl={isMounted:function(e){return(e=e._reactInternals)?Ur(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=et(),s=Gn(e),o=xn(r,s);o.payload=t,n!=null&&(o.callback=n),t=Kn(e,o,s),t!==null&&(Vt(t,e,s,r),ya(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=et(),s=Gn(e),o=xn(r,s);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=Kn(e,o,s),t!==null&&(Vt(t,e,s,r),ya(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=et(),r=Gn(e),s=xn(n,r);s.tag=2,t!=null&&(s.callback=t),t=Kn(e,s,r),t!==null&&(Vt(t,e,r,n),ya(t,e,r))}};function Dm(e,t,n,r,s,o,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,o,a):t.prototype&&t.prototype.isPureReactComponent?!qo(n,r)||!qo(s,o):!0}function Tx(e,t,n){var r=!1,s=nr,o=t.contextType;return typeof o=="object"&&o!==null?o=Ct(o):(s=ut(t)?Pr:Ye.current,r=t.contextTypes,o=(r=r!=null)?Is(e,s):nr),t=new t(n,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Sl,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=o),t}function Am(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Sl.enqueueReplaceState(t,t.state,null)}function wc(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},Bd(e);var o=t.contextType;typeof o=="object"&&o!==null?s.context=Ct(o):(o=ut(t)?Pr:Ye.current,s.context=Is(e,o)),s.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(bc(e,t,o,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&Sl.enqueueReplaceState(s,s.state,null),Xa(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function zs(e,t){try{var n="",r=t;do n+=bb(r),r=r.return;while(r);var s=n}catch(o){s=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:s,digest:null}}function _u(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Nc(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Qw=typeof WeakMap=="function"?WeakMap:Map;function Rx(e,t,n){n=xn(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ja||(Ja=!0,Pc=r),Nc(e,t)},n}function Mx(e,t,n){n=xn(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){Nc(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){Nc(e,t),typeof r!="function"&&(Yn===null?Yn=new Set([this]):Yn.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function Om(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new Qw;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=aN.bind(null,e,t,n),t.then(e,e))}function zm(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Lm(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=xn(-1,1),t.tag=2,Kn(n,t,1))),n.lanes|=1),e)}var Xw=jn.ReactCurrentOwner,it=!1;function Je(e,t,n,r){t.child=e===null?ix(t,null,n,r):As(t,e.child,n,r)}function Fm(e,t,n,r,s){n=n.render;var o=t.ref;return gs(t,s),r=Xd(e,t,n,r,o,s),n=Kd(),e!==null&&!it?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,wn(e,t,s)):(Ne&&n&&Od(t),t.flags|=1,Je(e,t,r,s),t.child)}function $m(e,t,n,r,s){if(e===null){var o=n.type;return typeof o=="function"&&!of(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=o,Px(e,t,o,r,s)):(e=ka(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&s)){var a=o.memoizedProps;if(n=n.compare,n=n!==null?n:qo,n(a,r)&&e.ref===t.ref)return wn(e,t,s)}return t.flags|=1,e=Zn(o,r),e.ref=t.ref,e.return=t,t.child=e}function Px(e,t,n,r,s){if(e!==null){var o=e.memoizedProps;if(qo(o,r)&&e.ref===t.ref)if(it=!1,t.pendingProps=r=o,(e.lanes&s)!==0)e.flags&131072&&(it=!0);else return t.lanes=e.lanes,wn(e,t,s)}return jc(e,t,n,r,s)}function Ix(e,t,n){var r=t.pendingProps,s=r.children,o=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ye(us,mt),mt|=n;else{if(!(n&1073741824))return e=o!==null?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ye(us,mt),mt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,ye(us,mt),mt|=r}else o!==null?(r=o.baseLanes|n,t.memoizedState=null):r=n,ye(us,mt),mt|=r;return Je(e,t,s,n),t.child}function Dx(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function jc(e,t,n,r,s){var o=ut(n)?Pr:Ye.current;return o=Is(t,o),gs(t,s),n=Xd(e,t,n,r,o,s),r=Kd(),e!==null&&!it?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,wn(e,t,s)):(Ne&&r&&Od(t),t.flags|=1,Je(e,t,n,s),t.child)}function Vm(e,t,n,r,s){if(ut(n)){var o=!0;Ba(t)}else o=!1;if(gs(t,s),t.stateNode===null)wa(e,t),Tx(t,n,r),wc(t,n,r,s),r=!0;else if(e===null){var a=t.stateNode,l=t.memoizedProps;a.props=l;var u=a.context,c=n.contextType;typeof c=="object"&&c!==null?c=Ct(c):(c=ut(n)?Pr:Ye.current,c=Is(t,c));var d=n.getDerivedStateFromProps,f=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function";f||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==r||u!==c)&&Am(t,a,r,c),Mn=!1;var m=t.memoizedState;a.state=m,Xa(t,r,a,s),u=t.memoizedState,l!==r||m!==u||lt.current||Mn?(typeof d=="function"&&(bc(t,n,d,r),u=t.memoizedState),(l=Mn||Dm(t,n,l,r,m,u,c))?(f||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),a.props=r,a.state=u,a.context=c,r=l):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,lx(e,t),l=t.memoizedProps,c=t.type===t.elementType?l:Rt(t.type,l),a.props=c,f=t.pendingProps,m=a.context,u=n.contextType,typeof u=="object"&&u!==null?u=Ct(u):(u=ut(n)?Pr:Ye.current,u=Is(t,u));var y=n.getDerivedStateFromProps;(d=typeof y=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==f||m!==u)&&Am(t,a,r,u),Mn=!1,m=t.memoizedState,a.state=m,Xa(t,r,a,s);var x=t.memoizedState;l!==f||m!==x||lt.current||Mn?(typeof y=="function"&&(bc(t,n,y,r),x=t.memoizedState),(c=Mn||Dm(t,n,c,r,m,x,u)||!1)?(d||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,x,u),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,x,u)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=x),a.props=r,a.state=x,a.context=u,r=c):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),r=!1)}return kc(e,t,n,r,o,s)}function kc(e,t,n,r,s,o){Dx(e,t);var a=(t.flags&128)!==0;if(!r&&!a)return s&&Sm(t,n,!1),wn(e,t,o);r=t.stateNode,Xw.current=t;var l=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&a?(t.child=As(t,e.child,null,o),t.child=As(t,null,l,o)):Je(e,t,l,o),t.memoizedState=r.state,s&&Sm(t,n,!0),t.child}function Ax(e){var t=e.stateNode;t.pendingContext?_m(e,t.pendingContext,t.pendingContext!==t.context):t.context&&_m(e,t.context,!1),Ud(e,t.containerInfo)}function Hm(e,t,n,r,s){return Ds(),Ld(s),t.flags|=256,Je(e,t,n,r),t.child}var _c={dehydrated:null,treeContext:null,retryLane:0};function Sc(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ox(e,t,n){var r=t.pendingProps,s=_e.current,o=!1,a=(t.flags&128)!==0,l;if((l=a)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),ye(_e,s&1),e===null)return yc(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=r.children,e=r.fallback,o?(r=t.mode,o=t.child,a={mode:"hidden",children:a},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=Tl(a,r,0,null),e=Er(e,r,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Sc(n),t.memoizedState=_c,e):Zd(t,a));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return Kw(e,t,a,r,l,s,n);if(o){o=r.fallback,a=t.mode,s=e.child,l=s.sibling;var u={mode:"hidden",children:r.children};return!(a&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=u,t.deletions=null):(r=Zn(s,u),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?o=Zn(l,o):(o=Er(o,a,n,null),o.flags|=2),o.return=t,r.return=t,r.sibling=o,t.child=r,r=o,o=t.child,a=e.child.memoizedState,a=a===null?Sc(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=e.childLanes&~n,t.memoizedState=_c,r}return o=e.child,e=o.sibling,r=Zn(o,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Zd(e,t){return t=Tl({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Gi(e,t,n,r){return r!==null&&Ld(r),As(t,e.child,null,n),e=Zd(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Kw(e,t,n,r,s,o,a){if(n)return t.flags&256?(t.flags&=-257,r=_u(Error(B(422))),Gi(e,t,a,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=r.fallback,s=t.mode,r=Tl({mode:"visible",children:r.children},s,0,null),o=Er(o,s,a,null),o.flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,t.mode&1&&As(t,e.child,null,a),t.child.memoizedState=Sc(a),t.memoizedState=_c,o);if(!(t.mode&1))return Gi(e,t,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,o=Error(B(419)),r=_u(o,r,void 0),Gi(e,t,a,r)}if(l=(a&e.childLanes)!==0,it||l){if(r=$e,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==o.retryLane&&(o.retryLane=s,bn(e,s),Vt(r,e,s,-1))}return sf(),r=_u(Error(B(421))),Gi(e,t,a,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=lN.bind(null,e),s._reactRetry=t,null):(e=o.treeContext,pt=Xn(s.nextSibling),gt=t,Ne=!0,At=null,e!==null&&(jt[kt++]=hn,jt[kt++]=pn,jt[kt++]=Ir,hn=e.id,pn=e.overflow,Ir=t),t=Zd(t,r.children),t.flags|=4096,t)}function Bm(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),vc(e.return,t,n)}function Su(e,t,n,r,s){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=s)}function zx(e,t,n){var r=t.pendingProps,s=r.revealOrder,o=r.tail;if(Je(e,t,r.children,n),r=_e.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Bm(e,n,t);else if(e.tag===19)Bm(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ye(_e,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&Ka(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Su(t,!1,s,n,o);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Ka(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Su(t,!0,n,null,o);break;case"together":Su(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function wa(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function wn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Ar|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(B(153));if(t.child!==null){for(e=t.child,n=Zn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Zn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Yw(e,t,n){switch(t.tag){case 3:Ax(t),Ds();break;case 5:ux(t);break;case 1:ut(t.type)&&Ba(t);break;case 4:Ud(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;ye(qa,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(ye(_e,_e.current&1),t.flags|=128,null):n&t.child.childLanes?Ox(e,t,n):(ye(_e,_e.current&1),e=wn(e,t,n),e!==null?e.sibling:null);ye(_e,_e.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return zx(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ye(_e,_e.current),r)break;return null;case 22:case 23:return t.lanes=0,Ix(e,t,n)}return wn(e,t,n)}var Lx,Cc,Fx,$x;Lx=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Cc=function(){};Fx=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,hr(tn.current);var o=null;switch(n){case"input":s=Ku(e,s),r=Ku(e,r),o=[];break;case"select":s=Ce({},s,{value:void 0}),r=Ce({},r,{value:void 0}),o=[];break;case"textarea":s=Zu(e,s),r=Zu(e,r),o=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Va)}ec(n,r);var a;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var l=s[c];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Fo.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in r){var u=r[c];if(l=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&u!==l&&(u!=null||l!=null))if(c==="style")if(l){for(a in l)!l.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in u)u.hasOwnProperty(a)&&l[a]!==u[a]&&(n||(n={}),n[a]=u[a])}else n||(o||(o=[]),o.push(c,n)),n=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(o=o||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(o=o||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Fo.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&be("scroll",e),o||l===u||(o=[])):(o=o||[]).push(c,u))}n&&(o=o||[]).push("style",n);var c=o;(t.updateQueue=c)&&(t.flags|=4)}};$x=function(e,t,n,r){n!==r&&(t.flags|=4)};function go(e,t){if(!Ne)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Qe(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Gw(e,t,n){var r=t.pendingProps;switch(zd(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qe(t),null;case 1:return ut(t.type)&&Ha(),Qe(t),null;case 3:return r=t.stateNode,Os(),we(lt),we(Ye),qd(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Ki(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,At!==null&&(Ac(At),At=null))),Cc(e,t),Qe(t),null;case 5:Wd(t);var s=hr(Go.current);if(n=t.type,e!==null&&t.stateNode!=null)Fx(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(B(166));return Qe(t),null}if(e=hr(tn.current),Ki(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[Jt]=t,r[Ko]=o,e=(t.mode&1)!==0,n){case"dialog":be("cancel",r),be("close",r);break;case"iframe":case"object":case"embed":be("load",r);break;case"video":case"audio":for(s=0;s<ko.length;s++)be(ko[s],r);break;case"source":be("error",r);break;case"img":case"image":case"link":be("error",r),be("load",r);break;case"details":be("toggle",r);break;case"input":Zf(r,o),be("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},be("invalid",r);break;case"textarea":em(r,o),be("invalid",r)}ec(n,o),s=null;for(var a in o)if(o.hasOwnProperty(a)){var l=o[a];a==="children"?typeof l=="string"?r.textContent!==l&&(o.suppressHydrationWarning!==!0&&Xi(r.textContent,l,e),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(o.suppressHydrationWarning!==!0&&Xi(r.textContent,l,e),s=["children",""+l]):Fo.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&be("scroll",r)}switch(n){case"input":$i(r),Jf(r,o,!0);break;case"textarea":$i(r),tm(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=Va)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=hg(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),n==="select"&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[Jt]=t,e[Ko]=r,Lx(e,t,!1,!1),t.stateNode=e;e:{switch(a=tc(n,r),n){case"dialog":be("cancel",e),be("close",e),s=r;break;case"iframe":case"object":case"embed":be("load",e),s=r;break;case"video":case"audio":for(s=0;s<ko.length;s++)be(ko[s],e);s=r;break;case"source":be("error",e),s=r;break;case"img":case"image":case"link":be("error",e),be("load",e),s=r;break;case"details":be("toggle",e),s=r;break;case"input":Zf(e,r),s=Ku(e,r),be("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=Ce({},r,{value:void 0}),be("invalid",e);break;case"textarea":em(e,r),s=Zu(e,r),be("invalid",e);break;default:s=r}ec(n,s),l=s;for(o in l)if(l.hasOwnProperty(o)){var u=l[o];o==="style"?xg(e,u):o==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&pg(e,u)):o==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&$o(e,u):typeof u=="number"&&$o(e,""+u):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Fo.hasOwnProperty(o)?u!=null&&o==="onScroll"&&be("scroll",e):u!=null&&Nd(e,o,u,a))}switch(n){case"input":$i(e),Jf(e,r,!1);break;case"textarea":$i(e),tm(e);break;case"option":r.value!=null&&e.setAttribute("value",""+tr(r.value));break;case"select":e.multiple=!!r.multiple,o=r.value,o!=null?fs(e,!!r.multiple,o,!1):r.defaultValue!=null&&fs(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Va)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Qe(t),null;case 6:if(e&&t.stateNode!=null)$x(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(B(166));if(n=hr(Go.current),hr(tn.current),Ki(t)){if(r=t.stateNode,n=t.memoizedProps,r[Jt]=t,(o=r.nodeValue!==n)&&(e=gt,e!==null))switch(e.tag){case 3:Xi(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Xi(r.nodeValue,n,(e.mode&1)!==0)}o&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Jt]=t,t.stateNode=r}return Qe(t),null;case 13:if(we(_e),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ne&&pt!==null&&t.mode&1&&!(t.flags&128))sx(),Ds(),t.flags|=98560,o=!1;else if(o=Ki(t),r!==null&&r.dehydrated!==null){if(e===null){if(!o)throw Error(B(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(B(317));o[Jt]=t}else Ds(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Qe(t),o=!1}else At!==null&&(Ac(At),At=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||_e.current&1?ze===0&&(ze=3):sf())),t.updateQueue!==null&&(t.flags|=4),Qe(t),null);case 4:return Os(),Cc(e,t),e===null&&Qo(t.stateNode.containerInfo),Qe(t),null;case 10:return Vd(t.type._context),Qe(t),null;case 17:return ut(t.type)&&Ha(),Qe(t),null;case 19:if(we(_e),o=t.memoizedState,o===null)return Qe(t),null;if(r=(t.flags&128)!==0,a=o.rendering,a===null)if(r)go(o,!1);else{if(ze!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=Ka(e),a!==null){for(t.flags|=128,go(o,!1),r=a.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)o=n,e=r,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,e=a.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ye(_e,_e.current&1|2),t.child}e=e.sibling}o.tail!==null&&Me()>Ls&&(t.flags|=128,r=!0,go(o,!1),t.lanes=4194304)}else{if(!r)if(e=Ka(a),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),go(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!Ne)return Qe(t),null}else 2*Me()-o.renderingStartTime>Ls&&n!==1073741824&&(t.flags|=128,r=!0,go(o,!1),t.lanes=4194304);o.isBackwards?(a.sibling=t.child,t.child=a):(n=o.last,n!==null?n.sibling=a:t.child=a,o.last=a)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Me(),t.sibling=null,n=_e.current,ye(_e,r?n&1|2:n&1),t):(Qe(t),null);case 22:case 23:return rf(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?mt&1073741824&&(Qe(t),t.subtreeFlags&6&&(t.flags|=8192)):Qe(t),null;case 24:return null;case 25:return null}throw Error(B(156,t.tag))}function Zw(e,t){switch(zd(t),t.tag){case 1:return ut(t.type)&&Ha(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Os(),we(lt),we(Ye),qd(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Wd(t),null;case 13:if(we(_e),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(B(340));Ds()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return we(_e),null;case 4:return Os(),null;case 10:return Vd(t.type._context),null;case 22:case 23:return rf(),null;case 24:return null;default:return null}}var Zi=!1,Xe=!1,Jw=typeof WeakSet=="function"?WeakSet:Set,X=null;function ls(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Te(e,t,r)}else n.current=null}function Ec(e,t,n){try{n()}catch(r){Te(e,t,r)}}var Um=!1;function eN(e,t){if(dc=La,e=Wg(),Ad(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var a=0,l=-1,u=-1,c=0,d=0,f=e,m=null;t:for(;;){for(var y;f!==n||s!==0&&f.nodeType!==3||(l=a+s),f!==o||r!==0&&f.nodeType!==3||(u=a+r),f.nodeType===3&&(a+=f.nodeValue.length),(y=f.firstChild)!==null;)m=f,f=y;for(;;){if(f===e)break t;if(m===n&&++c===s&&(l=a),m===o&&++d===r&&(u=a),(y=f.nextSibling)!==null)break;f=m,m=f.parentNode}f=y}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(fc={focusedElem:e,selectionRange:n},La=!1,X=t;X!==null;)if(t=X,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,X=e;else for(;X!==null;){t=X;try{var x=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var w=x.memoizedProps,j=x.memoizedState,p=t.stateNode,h=p.getSnapshotBeforeUpdate(t.elementType===t.type?w:Rt(t.type,w),j);p.__reactInternalSnapshotBeforeUpdate=h}break;case 3:var g=t.stateNode.containerInfo;g.nodeType===1?g.textContent="":g.nodeType===9&&g.documentElement&&g.removeChild(g.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(B(163))}}catch(v){Te(t,t.return,v)}if(e=t.sibling,e!==null){e.return=t.return,X=e;break}X=t.return}return x=Um,Um=!1,x}function Do(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var o=s.destroy;s.destroy=void 0,o!==void 0&&Ec(t,n,o)}s=s.next}while(s!==r)}}function Cl(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Tc(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Vx(e){var t=e.alternate;t!==null&&(e.alternate=null,Vx(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Jt],delete t[Ko],delete t[pc],delete t[Ow],delete t[zw])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Hx(e){return e.tag===5||e.tag===3||e.tag===4}function Wm(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Hx(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Rc(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Va));else if(r!==4&&(e=e.child,e!==null))for(Rc(e,t,n),e=e.sibling;e!==null;)Rc(e,t,n),e=e.sibling}function Mc(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Mc(e,t,n),e=e.sibling;e!==null;)Mc(e,t,n),e=e.sibling}var Ve=null,It=!1;function Sn(e,t,n){for(n=n.child;n!==null;)Bx(e,t,n),n=n.sibling}function Bx(e,t,n){if(en&&typeof en.onCommitFiberUnmount=="function")try{en.onCommitFiberUnmount(vl,n)}catch{}switch(n.tag){case 5:Xe||ls(n,t);case 6:var r=Ve,s=It;Ve=null,Sn(e,t,n),Ve=r,It=s,Ve!==null&&(It?(e=Ve,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Ve.removeChild(n.stateNode));break;case 18:Ve!==null&&(It?(e=Ve,n=n.stateNode,e.nodeType===8?vu(e.parentNode,n):e.nodeType===1&&vu(e,n),Uo(e)):vu(Ve,n.stateNode));break;case 4:r=Ve,s=It,Ve=n.stateNode.containerInfo,It=!0,Sn(e,t,n),Ve=r,It=s;break;case 0:case 11:case 14:case 15:if(!Xe&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var o=s,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&Ec(n,t,a),s=s.next}while(s!==r)}Sn(e,t,n);break;case 1:if(!Xe&&(ls(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Te(n,t,l)}Sn(e,t,n);break;case 21:Sn(e,t,n);break;case 22:n.mode&1?(Xe=(r=Xe)||n.memoizedState!==null,Sn(e,t,n),Xe=r):Sn(e,t,n);break;default:Sn(e,t,n)}}function qm(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Jw),t.forEach(function(r){var s=uN.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Tt(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var o=e,a=t,l=a;e:for(;l!==null;){switch(l.tag){case 5:Ve=l.stateNode,It=!1;break e;case 3:Ve=l.stateNode.containerInfo,It=!0;break e;case 4:Ve=l.stateNode.containerInfo,It=!0;break e}l=l.return}if(Ve===null)throw Error(B(160));Bx(o,a,s),Ve=null,It=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(c){Te(s,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Ux(t,e),t=t.sibling}function Ux(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Tt(t,e),Wt(e),r&4){try{Do(3,e,e.return),Cl(3,e)}catch(w){Te(e,e.return,w)}try{Do(5,e,e.return)}catch(w){Te(e,e.return,w)}}break;case 1:Tt(t,e),Wt(e),r&512&&n!==null&&ls(n,n.return);break;case 5:if(Tt(t,e),Wt(e),r&512&&n!==null&&ls(n,n.return),e.flags&32){var s=e.stateNode;try{$o(s,"")}catch(w){Te(e,e.return,w)}}if(r&4&&(s=e.stateNode,s!=null)){var o=e.memoizedProps,a=n!==null?n.memoizedProps:o,l=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{l==="input"&&o.type==="radio"&&o.name!=null&&fg(s,o),tc(l,a);var c=tc(l,o);for(a=0;a<u.length;a+=2){var d=u[a],f=u[a+1];d==="style"?xg(s,f):d==="dangerouslySetInnerHTML"?pg(s,f):d==="children"?$o(s,f):Nd(s,d,f,c)}switch(l){case"input":Yu(s,o);break;case"textarea":mg(s,o);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!o.multiple;var y=o.value;y!=null?fs(s,!!o.multiple,y,!1):m!==!!o.multiple&&(o.defaultValue!=null?fs(s,!!o.multiple,o.defaultValue,!0):fs(s,!!o.multiple,o.multiple?[]:"",!1))}s[Ko]=o}catch(w){Te(e,e.return,w)}}break;case 6:if(Tt(t,e),Wt(e),r&4){if(e.stateNode===null)throw Error(B(162));s=e.stateNode,o=e.memoizedProps;try{s.nodeValue=o}catch(w){Te(e,e.return,w)}}break;case 3:if(Tt(t,e),Wt(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Uo(t.containerInfo)}catch(w){Te(e,e.return,w)}break;case 4:Tt(t,e),Wt(e);break;case 13:Tt(t,e),Wt(e),s=e.child,s.flags&8192&&(o=s.memoizedState!==null,s.stateNode.isHidden=o,!o||s.alternate!==null&&s.alternate.memoizedState!==null||(tf=Me())),r&4&&qm(e);break;case 22:if(d=n!==null&&n.memoizedState!==null,e.mode&1?(Xe=(c=Xe)||d,Tt(t,e),Xe=c):Tt(t,e),Wt(e),r&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!d&&e.mode&1)for(X=e,d=e.child;d!==null;){for(f=X=d;X!==null;){switch(m=X,y=m.child,m.tag){case 0:case 11:case 14:case 15:Do(4,m,m.return);break;case 1:ls(m,m.return);var x=m.stateNode;if(typeof x.componentWillUnmount=="function"){r=m,n=m.return;try{t=r,x.props=t.memoizedProps,x.state=t.memoizedState,x.componentWillUnmount()}catch(w){Te(r,n,w)}}break;case 5:ls(m,m.return);break;case 22:if(m.memoizedState!==null){Xm(f);continue}}y!==null?(y.return=m,X=y):Xm(f)}d=d.sibling}e:for(d=null,f=e;;){if(f.tag===5){if(d===null){d=f;try{s=f.stateNode,c?(o=s.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(l=f.stateNode,u=f.memoizedProps.style,a=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=gg("display",a))}catch(w){Te(e,e.return,w)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(w){Te(e,e.return,w)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Tt(t,e),Wt(e),r&4&&qm(e);break;case 21:break;default:Tt(t,e),Wt(e)}}function Wt(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Hx(n)){var r=n;break e}n=n.return}throw Error(B(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&($o(s,""),r.flags&=-33);var o=Wm(e);Mc(e,o,s);break;case 3:case 4:var a=r.stateNode.containerInfo,l=Wm(e);Rc(e,l,a);break;default:throw Error(B(161))}}catch(u){Te(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function tN(e,t,n){X=e,Wx(e)}function Wx(e,t,n){for(var r=(e.mode&1)!==0;X!==null;){var s=X,o=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||Zi;if(!a){var l=s.alternate,u=l!==null&&l.memoizedState!==null||Xe;l=Zi;var c=Xe;if(Zi=a,(Xe=u)&&!c)for(X=s;X!==null;)a=X,u=a.child,a.tag===22&&a.memoizedState!==null?Km(s):u!==null?(u.return=a,X=u):Km(s);for(;o!==null;)X=o,Wx(o),o=o.sibling;X=s,Zi=l,Xe=c}Qm(e)}else s.subtreeFlags&8772&&o!==null?(o.return=s,X=o):Qm(e)}}function Qm(e){for(;X!==null;){var t=X;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Xe||Cl(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Xe)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:Rt(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&Mm(t,o,r);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Mm(t,a,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&Uo(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(B(163))}Xe||t.flags&512&&Tc(t)}catch(m){Te(t,t.return,m)}}if(t===e){X=null;break}if(n=t.sibling,n!==null){n.return=t.return,X=n;break}X=t.return}}function Xm(e){for(;X!==null;){var t=X;if(t===e){X=null;break}var n=t.sibling;if(n!==null){n.return=t.return,X=n;break}X=t.return}}function Km(e){for(;X!==null;){var t=X;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Cl(4,t)}catch(u){Te(t,n,u)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(u){Te(t,s,u)}}var o=t.return;try{Tc(t)}catch(u){Te(t,o,u)}break;case 5:var a=t.return;try{Tc(t)}catch(u){Te(t,a,u)}}}catch(u){Te(t,t.return,u)}if(t===e){X=null;break}var l=t.sibling;if(l!==null){l.return=t.return,X=l;break}X=t.return}}var nN=Math.ceil,Za=jn.ReactCurrentDispatcher,Jd=jn.ReactCurrentOwner,St=jn.ReactCurrentBatchConfig,fe=0,$e=null,Ie=null,Be=0,mt=0,us=sr(0),ze=0,ti=null,Ar=0,El=0,ef=0,Ao=null,ot=null,tf=0,Ls=1/0,cn=null,Ja=!1,Pc=null,Yn=null,Ji=!1,Un=null,el=0,Oo=0,Ic=null,Na=-1,ja=0;function et(){return fe&6?Me():Na!==-1?Na:Na=Me()}function Gn(e){return e.mode&1?fe&2&&Be!==0?Be&-Be:Fw.transition!==null?(ja===0&&(ja=Tg()),ja):(e=xe,e!==0||(e=window.event,e=e===void 0?16:Og(e.type)),e):1}function Vt(e,t,n,r){if(50<Oo)throw Oo=0,Ic=null,Error(B(185));vi(e,n,r),(!(fe&2)||e!==$e)&&(e===$e&&(!(fe&2)&&(El|=n),ze===4&&In(e,Be)),ct(e,r),n===1&&fe===0&&!(t.mode&1)&&(Ls=Me()+500,kl&&or()))}function ct(e,t){var n=e.callbackNode;Fb(e,t);var r=za(e,e===$e?Be:0);if(r===0)n!==null&&sm(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&sm(n),t===1)e.tag===0?Lw(Ym.bind(null,e)):tx(Ym.bind(null,e)),Dw(function(){!(fe&6)&&or()}),n=null;else{switch(Rg(r)){case 1:n=Cd;break;case 4:n=Cg;break;case 16:n=Oa;break;case 536870912:n=Eg;break;default:n=Oa}n=Jx(n,qx.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function qx(e,t){if(Na=-1,ja=0,fe&6)throw Error(B(327));var n=e.callbackNode;if(xs()&&e.callbackNode!==n)return null;var r=za(e,e===$e?Be:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=tl(e,r);else{t=r;var s=fe;fe|=2;var o=Xx();($e!==e||Be!==t)&&(cn=null,Ls=Me()+500,Cr(e,t));do try{oN();break}catch(l){Qx(e,l)}while(!0);$d(),Za.current=o,fe=s,Ie!==null?t=0:($e=null,Be=0,t=ze)}if(t!==0){if(t===2&&(s=ic(e),s!==0&&(r=s,t=Dc(e,s))),t===1)throw n=ti,Cr(e,0),In(e,r),ct(e,Me()),n;if(t===6)In(e,r);else{if(s=e.current.alternate,!(r&30)&&!rN(s)&&(t=tl(e,r),t===2&&(o=ic(e),o!==0&&(r=o,t=Dc(e,o))),t===1))throw n=ti,Cr(e,0),In(e,r),ct(e,Me()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(B(345));case 2:ur(e,ot,cn);break;case 3:if(In(e,r),(r&130023424)===r&&(t=tf+500-Me(),10<t)){if(za(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){et(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=hc(ur.bind(null,e,ot,cn),t);break}ur(e,ot,cn);break;case 4:if(In(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var a=31-$t(r);o=1<<a,a=t[a],a>s&&(s=a),r&=~o}if(r=s,r=Me()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*nN(r/1960))-r,10<r){e.timeoutHandle=hc(ur.bind(null,e,ot,cn),r);break}ur(e,ot,cn);break;case 5:ur(e,ot,cn);break;default:throw Error(B(329))}}}return ct(e,Me()),e.callbackNode===n?qx.bind(null,e):null}function Dc(e,t){var n=Ao;return e.current.memoizedState.isDehydrated&&(Cr(e,t).flags|=256),e=tl(e,t),e!==2&&(t=ot,ot=n,t!==null&&Ac(t)),e}function Ac(e){ot===null?ot=e:ot.push.apply(ot,e)}function rN(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],o=s.getSnapshot;s=s.value;try{if(!Ht(o(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function In(e,t){for(t&=~ef,t&=~El,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-$t(t),r=1<<n;e[n]=-1,t&=~r}}function Ym(e){if(fe&6)throw Error(B(327));xs();var t=za(e,0);if(!(t&1))return ct(e,Me()),null;var n=tl(e,t);if(e.tag!==0&&n===2){var r=ic(e);r!==0&&(t=r,n=Dc(e,r))}if(n===1)throw n=ti,Cr(e,0),In(e,t),ct(e,Me()),n;if(n===6)throw Error(B(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,ur(e,ot,cn),ct(e,Me()),null}function nf(e,t){var n=fe;fe|=1;try{return e(t)}finally{fe=n,fe===0&&(Ls=Me()+500,kl&&or())}}function Or(e){Un!==null&&Un.tag===0&&!(fe&6)&&xs();var t=fe;fe|=1;var n=St.transition,r=xe;try{if(St.transition=null,xe=1,e)return e()}finally{xe=r,St.transition=n,fe=t,!(fe&6)&&or()}}function rf(){mt=us.current,we(us)}function Cr(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Iw(n)),Ie!==null)for(n=Ie.return;n!==null;){var r=n;switch(zd(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ha();break;case 3:Os(),we(lt),we(Ye),qd();break;case 5:Wd(r);break;case 4:Os();break;case 13:we(_e);break;case 19:we(_e);break;case 10:Vd(r.type._context);break;case 22:case 23:rf()}n=n.return}if($e=e,Ie=e=Zn(e.current,null),Be=mt=t,ze=0,ti=null,ef=El=Ar=0,ot=Ao=null,mr!==null){for(t=0;t<mr.length;t++)if(n=mr[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,o=n.pending;if(o!==null){var a=o.next;o.next=s,r.next=a}n.pending=r}mr=null}return e}function Qx(e,t){do{var n=Ie;try{if($d(),va.current=Ga,Ya){for(var r=Se.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Ya=!1}if(Dr=0,Fe=Oe=Se=null,Io=!1,Zo=0,Jd.current=null,n===null||n.return===null){ze=1,ti=t,Ie=null;break}e:{var o=e,a=n.return,l=n,u=t;if(t=Be,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,d=l,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var m=d.alternate;m?(d.updateQueue=m.updateQueue,d.memoizedState=m.memoizedState,d.lanes=m.lanes):(d.updateQueue=null,d.memoizedState=null)}var y=zm(a);if(y!==null){y.flags&=-257,Lm(y,a,l,o,t),y.mode&1&&Om(o,c,t),t=y,u=c;var x=t.updateQueue;if(x===null){var w=new Set;w.add(u),t.updateQueue=w}else x.add(u);break e}else{if(!(t&1)){Om(o,c,t),sf();break e}u=Error(B(426))}}else if(Ne&&l.mode&1){var j=zm(a);if(j!==null){!(j.flags&65536)&&(j.flags|=256),Lm(j,a,l,o,t),Ld(zs(u,l));break e}}o=u=zs(u,l),ze!==4&&(ze=2),Ao===null?Ao=[o]:Ao.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var p=Rx(o,u,t);Rm(o,p);break e;case 1:l=u;var h=o.type,g=o.stateNode;if(!(o.flags&128)&&(typeof h.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(Yn===null||!Yn.has(g)))){o.flags|=65536,t&=-t,o.lanes|=t;var v=Mx(o,l,t);Rm(o,v);break e}}o=o.return}while(o!==null)}Yx(n)}catch(N){t=N,Ie===n&&n!==null&&(Ie=n=n.return);continue}break}while(!0)}function Xx(){var e=Za.current;return Za.current=Ga,e===null?Ga:e}function sf(){(ze===0||ze===3||ze===2)&&(ze=4),$e===null||!(Ar&268435455)&&!(El&268435455)||In($e,Be)}function tl(e,t){var n=fe;fe|=2;var r=Xx();($e!==e||Be!==t)&&(cn=null,Cr(e,t));do try{sN();break}catch(s){Qx(e,s)}while(!0);if($d(),fe=n,Za.current=r,Ie!==null)throw Error(B(261));return $e=null,Be=0,ze}function sN(){for(;Ie!==null;)Kx(Ie)}function oN(){for(;Ie!==null&&!Rb();)Kx(Ie)}function Kx(e){var t=Zx(e.alternate,e,mt);e.memoizedProps=e.pendingProps,t===null?Yx(e):Ie=t,Jd.current=null}function Yx(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=Zw(n,t),n!==null){n.flags&=32767,Ie=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ze=6,Ie=null;return}}else if(n=Gw(n,t,mt),n!==null){Ie=n;return}if(t=t.sibling,t!==null){Ie=t;return}Ie=t=e}while(t!==null);ze===0&&(ze=5)}function ur(e,t,n){var r=xe,s=St.transition;try{St.transition=null,xe=1,iN(e,t,n,r)}finally{St.transition=s,xe=r}return null}function iN(e,t,n,r){do xs();while(Un!==null);if(fe&6)throw Error(B(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(B(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if($b(e,o),e===$e&&(Ie=$e=null,Be=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ji||(Ji=!0,Jx(Oa,function(){return xs(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=St.transition,St.transition=null;var a=xe;xe=1;var l=fe;fe|=4,Jd.current=null,eN(e,n),Ux(n,e),Sw(fc),La=!!dc,fc=dc=null,e.current=n,tN(n),Mb(),fe=l,xe=a,St.transition=o}else e.current=n;if(Ji&&(Ji=!1,Un=e,el=s),o=e.pendingLanes,o===0&&(Yn=null),Db(n.stateNode),ct(e,Me()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Ja)throw Ja=!1,e=Pc,Pc=null,e;return el&1&&e.tag!==0&&xs(),o=e.pendingLanes,o&1?e===Ic?Oo++:(Oo=0,Ic=e):Oo=0,or(),null}function xs(){if(Un!==null){var e=Rg(el),t=St.transition,n=xe;try{if(St.transition=null,xe=16>e?16:e,Un===null)var r=!1;else{if(e=Un,Un=null,el=0,fe&6)throw Error(B(331));var s=fe;for(fe|=4,X=e.current;X!==null;){var o=X,a=o.child;if(X.flags&16){var l=o.deletions;if(l!==null){for(var u=0;u<l.length;u++){var c=l[u];for(X=c;X!==null;){var d=X;switch(d.tag){case 0:case 11:case 15:Do(8,d,o)}var f=d.child;if(f!==null)f.return=d,X=f;else for(;X!==null;){d=X;var m=d.sibling,y=d.return;if(Vx(d),d===c){X=null;break}if(m!==null){m.return=y,X=m;break}X=y}}}var x=o.alternate;if(x!==null){var w=x.child;if(w!==null){x.child=null;do{var j=w.sibling;w.sibling=null,w=j}while(w!==null)}}X=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,X=a;else e:for(;X!==null;){if(o=X,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Do(9,o,o.return)}var p=o.sibling;if(p!==null){p.return=o.return,X=p;break e}X=o.return}}var h=e.current;for(X=h;X!==null;){a=X;var g=a.child;if(a.subtreeFlags&2064&&g!==null)g.return=a,X=g;else e:for(a=h;X!==null;){if(l=X,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Cl(9,l)}}catch(N){Te(l,l.return,N)}if(l===a){X=null;break e}var v=l.sibling;if(v!==null){v.return=l.return,X=v;break e}X=l.return}}if(fe=s,or(),en&&typeof en.onPostCommitFiberRoot=="function")try{en.onPostCommitFiberRoot(vl,e)}catch{}r=!0}return r}finally{xe=n,St.transition=t}}return!1}function Gm(e,t,n){t=zs(n,t),t=Rx(e,t,1),e=Kn(e,t,1),t=et(),e!==null&&(vi(e,1,t),ct(e,t))}function Te(e,t,n){if(e.tag===3)Gm(e,e,n);else for(;t!==null;){if(t.tag===3){Gm(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Yn===null||!Yn.has(r))){e=zs(n,e),e=Mx(t,e,1),t=Kn(t,e,1),e=et(),t!==null&&(vi(t,1,e),ct(t,e));break}}t=t.return}}function aN(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=et(),e.pingedLanes|=e.suspendedLanes&n,$e===e&&(Be&n)===n&&(ze===4||ze===3&&(Be&130023424)===Be&&500>Me()-tf?Cr(e,0):ef|=n),ct(e,t)}function Gx(e,t){t===0&&(e.mode&1?(t=Bi,Bi<<=1,!(Bi&130023424)&&(Bi=4194304)):t=1);var n=et();e=bn(e,t),e!==null&&(vi(e,t,n),ct(e,n))}function lN(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Gx(e,n)}function uN(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(B(314))}r!==null&&r.delete(t),Gx(e,n)}var Zx;Zx=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||lt.current)it=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return it=!1,Yw(e,t,n);it=!!(e.flags&131072)}else it=!1,Ne&&t.flags&1048576&&nx(t,Wa,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;wa(e,t),e=t.pendingProps;var s=Is(t,Ye.current);gs(t,n),s=Xd(null,t,r,e,s,n);var o=Kd();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ut(r)?(o=!0,Ba(t)):o=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Bd(t),s.updater=Sl,t.stateNode=s,s._reactInternals=t,wc(t,r,e,n),t=kc(null,t,r,!0,o,n)):(t.tag=0,Ne&&o&&Od(t),Je(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(wa(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=dN(r),e=Rt(r,e),s){case 0:t=jc(null,t,r,e,n);break e;case 1:t=Vm(null,t,r,e,n);break e;case 11:t=Fm(null,t,r,e,n);break e;case 14:t=$m(null,t,r,Rt(r.type,e),n);break e}throw Error(B(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Rt(r,s),jc(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Rt(r,s),Vm(e,t,r,s,n);case 3:e:{if(Ax(t),e===null)throw Error(B(387));r=t.pendingProps,o=t.memoizedState,s=o.element,lx(e,t),Xa(t,r,null,n);var a=t.memoizedState;if(r=a.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){s=zs(Error(B(423)),t),t=Hm(e,t,r,n,s);break e}else if(r!==s){s=zs(Error(B(424)),t),t=Hm(e,t,r,n,s);break e}else for(pt=Xn(t.stateNode.containerInfo.firstChild),gt=t,Ne=!0,At=null,n=ix(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ds(),r===s){t=wn(e,t,n);break e}Je(e,t,r,n)}t=t.child}return t;case 5:return ux(t),e===null&&yc(t),r=t.type,s=t.pendingProps,o=e!==null?e.memoizedProps:null,a=s.children,mc(r,s)?a=null:o!==null&&mc(r,o)&&(t.flags|=32),Dx(e,t),Je(e,t,a,n),t.child;case 6:return e===null&&yc(t),null;case 13:return Ox(e,t,n);case 4:return Ud(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=As(t,null,r,n):Je(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Rt(r,s),Fm(e,t,r,s,n);case 7:return Je(e,t,t.pendingProps,n),t.child;case 8:return Je(e,t,t.pendingProps.children,n),t.child;case 12:return Je(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,o=t.memoizedProps,a=s.value,ye(qa,r._currentValue),r._currentValue=a,o!==null)if(Ht(o.value,a)){if(o.children===s.children&&!lt.current){t=wn(e,t,n);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var l=o.dependencies;if(l!==null){a=o.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(o.tag===1){u=xn(-1,n&-n),u.tag=2;var c=o.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?u.next=u:(u.next=d.next,d.next=u),c.pending=u}}o.lanes|=n,u=o.alternate,u!==null&&(u.lanes|=n),vc(o.return,n,t),l.lanes|=n;break}u=u.next}}else if(o.tag===10)a=o.type===t.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(B(341));a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),vc(a,n,t),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===t){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}Je(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,gs(t,n),s=Ct(s),r=r(s),t.flags|=1,Je(e,t,r,n),t.child;case 14:return r=t.type,s=Rt(r,t.pendingProps),s=Rt(r.type,s),$m(e,t,r,s,n);case 15:return Px(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Rt(r,s),wa(e,t),t.tag=1,ut(r)?(e=!0,Ba(t)):e=!1,gs(t,n),Tx(t,r,s),wc(t,r,s,n),kc(null,t,r,!0,e,n);case 19:return zx(e,t,n);case 22:return Ix(e,t,n)}throw Error(B(156,t.tag))};function Jx(e,t){return Sg(e,t)}function cN(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _t(e,t,n,r){return new cN(e,t,n,r)}function of(e){return e=e.prototype,!(!e||!e.isReactComponent)}function dN(e){if(typeof e=="function")return of(e)?1:0;if(e!=null){if(e=e.$$typeof,e===kd)return 11;if(e===_d)return 14}return 2}function Zn(e,t){var n=e.alternate;return n===null?(n=_t(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function ka(e,t,n,r,s,o){var a=2;if(r=e,typeof e=="function")of(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case Jr:return Er(n.children,s,o,t);case jd:a=8,s|=8;break;case Wu:return e=_t(12,n,t,s|2),e.elementType=Wu,e.lanes=o,e;case qu:return e=_t(13,n,t,s),e.elementType=qu,e.lanes=o,e;case Qu:return e=_t(19,n,t,s),e.elementType=Qu,e.lanes=o,e;case ug:return Tl(n,s,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case ag:a=10;break e;case lg:a=9;break e;case kd:a=11;break e;case _d:a=14;break e;case Rn:a=16,r=null;break e}throw Error(B(130,e==null?e:typeof e,""))}return t=_t(a,n,t,s),t.elementType=e,t.type=r,t.lanes=o,t}function Er(e,t,n,r){return e=_t(7,e,r,t),e.lanes=n,e}function Tl(e,t,n,r){return e=_t(22,e,r,t),e.elementType=ug,e.lanes=n,e.stateNode={isHidden:!1},e}function Cu(e,t,n){return e=_t(6,e,null,t),e.lanes=n,e}function Eu(e,t,n){return t=_t(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function fN(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=lu(0),this.expirationTimes=lu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=lu(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function af(e,t,n,r,s,o,a,l,u){return e=new fN(e,t,n,l,u),t===1?(t=1,o===!0&&(t|=8)):t=0,o=_t(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Bd(o),e}function mN(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Zr,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function e0(e){if(!e)return nr;e=e._reactInternals;e:{if(Ur(e)!==e||e.tag!==1)throw Error(B(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ut(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(B(171))}if(e.tag===1){var n=e.type;if(ut(n))return ex(e,n,t)}return t}function t0(e,t,n,r,s,o,a,l,u){return e=af(n,r,!0,e,s,o,a,l,u),e.context=e0(null),n=e.current,r=et(),s=Gn(n),o=xn(r,s),o.callback=t??null,Kn(n,o,s),e.current.lanes=s,vi(e,s,r),ct(e,r),e}function Rl(e,t,n,r){var s=t.current,o=et(),a=Gn(s);return n=e0(n),t.context===null?t.context=n:t.pendingContext=n,t=xn(o,a),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Kn(s,t,a),e!==null&&(Vt(e,s,a,o),ya(e,s,a)),a}function nl(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Zm(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function lf(e,t){Zm(e,t),(e=e.alternate)&&Zm(e,t)}function hN(){return null}var n0=typeof reportError=="function"?reportError:function(e){console.error(e)};function uf(e){this._internalRoot=e}Ml.prototype.render=uf.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(B(409));Rl(e,t,null,null)};Ml.prototype.unmount=uf.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Or(function(){Rl(null,e,null,null)}),t[vn]=null}};function Ml(e){this._internalRoot=e}Ml.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ig();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Pn.length&&t!==0&&t<Pn[n].priority;n++);Pn.splice(n,0,e),n===0&&Ag(e)}};function cf(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Pl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Jm(){}function pN(e,t,n,r,s){if(s){if(typeof r=="function"){var o=r;r=function(){var c=nl(a);o.call(c)}}var a=t0(t,r,e,0,null,!1,!1,"",Jm);return e._reactRootContainer=a,e[vn]=a.current,Qo(e.nodeType===8?e.parentNode:e),Or(),a}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var c=nl(u);l.call(c)}}var u=af(e,0,!1,null,null,!1,!1,"",Jm);return e._reactRootContainer=u,e[vn]=u.current,Qo(e.nodeType===8?e.parentNode:e),Or(function(){Rl(t,u,n,r)}),u}function Il(e,t,n,r,s){var o=n._reactRootContainer;if(o){var a=o;if(typeof s=="function"){var l=s;s=function(){var u=nl(a);l.call(u)}}Rl(t,a,e,s)}else a=pN(n,t,e,s,r);return nl(a)}Mg=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=jo(t.pendingLanes);n!==0&&(Ed(t,n|1),ct(t,Me()),!(fe&6)&&(Ls=Me()+500,or()))}break;case 13:Or(function(){var r=bn(e,1);if(r!==null){var s=et();Vt(r,e,1,s)}}),lf(e,1)}};Td=function(e){if(e.tag===13){var t=bn(e,134217728);if(t!==null){var n=et();Vt(t,e,134217728,n)}lf(e,134217728)}};Pg=function(e){if(e.tag===13){var t=Gn(e),n=bn(e,t);if(n!==null){var r=et();Vt(n,e,t,r)}lf(e,t)}};Ig=function(){return xe};Dg=function(e,t){var n=xe;try{return xe=e,t()}finally{xe=n}};rc=function(e,t,n){switch(t){case"input":if(Yu(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=jl(r);if(!s)throw Error(B(90));dg(r),Yu(r,s)}}}break;case"textarea":mg(e,n);break;case"select":t=n.value,t!=null&&fs(e,!!n.multiple,t,!1)}};bg=nf;wg=Or;var gN={usingClientEntryPoint:!1,Events:[wi,rs,jl,yg,vg,nf]},xo={findFiberByHostInstance:fr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},xN={bundleType:xo.bundleType,version:xo.version,rendererPackageName:xo.rendererPackageName,rendererConfig:xo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:jn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=kg(e),e===null?null:e.stateNode},findFiberByHostInstance:xo.findFiberByHostInstance||hN,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ea=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ea.isDisabled&&ea.supportsFiber)try{vl=ea.inject(xN),en=ea}catch{}}vt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=gN;vt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!cf(t))throw Error(B(200));return mN(e,t,null,n)};vt.createRoot=function(e,t){if(!cf(e))throw Error(B(299));var n=!1,r="",s=n0;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=af(e,1,!1,null,null,n,!1,r,s),e[vn]=t.current,Qo(e.nodeType===8?e.parentNode:e),new uf(t)};vt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(B(188)):(e=Object.keys(e).join(","),Error(B(268,e)));return e=kg(t),e=e===null?null:e.stateNode,e};vt.flushSync=function(e){return Or(e)};vt.hydrate=function(e,t,n){if(!Pl(t))throw Error(B(200));return Il(null,e,t,!0,n)};vt.hydrateRoot=function(e,t,n){if(!cf(e))throw Error(B(405));var r=n!=null&&n.hydratedSources||null,s=!1,o="",a=n0;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=t0(t,null,e,1,n??null,s,!1,o,a),e[vn]=t.current,Qo(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new Ml(t)};vt.render=function(e,t,n){if(!Pl(t))throw Error(B(200));return Il(null,e,t,!1,n)};vt.unmountComponentAtNode=function(e){if(!Pl(e))throw Error(B(40));return e._reactRootContainer?(Or(function(){Il(null,null,e,!1,function(){e._reactRootContainer=null,e[vn]=null})}),!0):!1};vt.unstable_batchedUpdates=nf;vt.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Pl(n))throw Error(B(200));if(e==null||e._reactInternals===void 0)throw Error(B(38));return Il(e,t,n,!1,r)};vt.version="18.3.1-next-f1338f8080-20240426";function r0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r0)}catch(e){console.error(e)}}r0(),rg.exports=vt;var s0=rg.exports,eh=s0;Bu.createRoot=eh.createRoot,Bu.hydrateRoot=eh.hydrateRoot;var ji=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},yN={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},An,pd,Ap,vN=(Ap=class{constructor(){te(this,An,yN);te(this,pd,!1)}setTimeoutProvider(e){Q(this,An,e)}setTimeout(e,t){return D(this,An).setTimeout(e,t)}clearTimeout(e){D(this,An).clearTimeout(e)}setInterval(e,t){return D(this,An).setInterval(e,t)}clearInterval(e){D(this,An).clearInterval(e)}},An=new WeakMap,pd=new WeakMap,Ap),pr=new vN;function bN(e){setTimeout(e,0)}var zr=typeof window>"u"||"Deno"in globalThis;function st(){}function wN(e,t){return typeof e=="function"?e(t):e}function Oc(e){return typeof e=="number"&&e>=0&&e!==1/0}function o0(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Jn(e,t){return typeof e=="function"?e(t):e}function Nt(e,t){return typeof e=="function"?e(t):e}function th(e,t){const{type:n="all",exact:r,fetchStatus:s,predicate:o,queryKey:a,stale:l}=e;if(a){if(r){if(t.queryHash!==df(a,t.options))return!1}else if(!ri(t.queryKey,a))return!1}if(n!=="all"){const u=t.isActive();if(n==="active"&&!u||n==="inactive"&&u)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||s&&s!==t.state.fetchStatus||o&&!o(t))}function nh(e,t){const{exact:n,status:r,predicate:s,mutationKey:o}=e;if(o){if(!t.options.mutationKey)return!1;if(n){if(ni(t.options.mutationKey)!==ni(o))return!1}else if(!ri(t.options.mutationKey,o))return!1}return!(r&&t.state.status!==r||s&&!s(t))}function df(e,t){return((t==null?void 0:t.queryKeyHashFn)||ni)(e)}function ni(e){return JSON.stringify(e,(t,n)=>Lc(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function ri(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(n=>ri(e[n],t[n])):!1}var NN=Object.prototype.hasOwnProperty;function i0(e,t){if(e===t)return e;const n=rh(e)&&rh(t);if(!n&&!(Lc(e)&&Lc(t)))return t;const s=(n?e:Object.keys(e)).length,o=n?t:Object.keys(t),a=o.length,l=n?new Array(a):{};let u=0;for(let c=0;c<a;c++){const d=n?c:o[c],f=e[d],m=t[d];if(f===m){l[d]=f,(n?c<s:NN.call(e,d))&&u++;continue}if(f===null||m===null||typeof f!="object"||typeof m!="object"){l[d]=m;continue}const y=i0(f,m);l[d]=y,y===f&&u++}return s===a&&u===s?e:l}function zc(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}function rh(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Lc(e){if(!sh(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!sh(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function sh(e){return Object.prototype.toString.call(e)==="[object Object]"}function jN(e){return new Promise(t=>{pr.setTimeout(t,e)})}function Fc(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?i0(e,t):t}function kN(e,t,n=0){const r=[...e,t];return n&&r.length>n?r.slice(1):r}function _N(e,t,n=0){const r=[t,...e];return n&&r.length>n?r.slice(0,-1):r}var ff=Symbol();function a0(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===ff?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function SN(e,t){return typeof e=="function"?e(...t):!!e}var yr,On,bs,Op,CN=(Op=class extends ji{constructor(){super();te(this,yr);te(this,On);te(this,bs);Q(this,bs,t=>{if(!zr&&window.addEventListener){const n=()=>t();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){D(this,On)||this.setEventListener(D(this,bs))}onUnsubscribe(){var t;this.hasListeners()||((t=D(this,On))==null||t.call(this),Q(this,On,void 0))}setEventListener(t){var n;Q(this,bs,t),(n=D(this,On))==null||n.call(this),Q(this,On,t(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(t){D(this,yr)!==t&&(Q(this,yr,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(n=>{n(t)})}isFocused(){var t;return typeof D(this,yr)=="boolean"?D(this,yr):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},yr=new WeakMap,On=new WeakMap,bs=new WeakMap,Op),mf=new CN;function $c(){let e,t;const n=new Promise((s,o)=>{e=s,t=o});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),e(s)},n.reject=s=>{r({status:"rejected",reason:s}),t(s)},n}var EN=bN;function TN(){let e=[],t=0,n=l=>{l()},r=l=>{l()},s=EN;const o=l=>{t?e.push(l):s(()=>{n(l)})},a=()=>{const l=e;e=[],l.length&&s(()=>{r(()=>{l.forEach(u=>{n(u)})})})};return{batch:l=>{let u;t++;try{u=l()}finally{t--,t||a()}return u},batchCalls:l=>(...u)=>{o(()=>{l(...u)})},schedule:o,setNotifyFunction:l=>{n=l},setBatchNotifyFunction:l=>{r=l},setScheduler:l=>{s=l}}}var He=TN(),ws,zn,Ns,zp,RN=(zp=class extends ji{constructor(){super();te(this,ws,!0);te(this,zn);te(this,Ns);Q(this,Ns,t=>{if(!zr&&window.addEventListener){const n=()=>t(!0),r=()=>t(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){D(this,zn)||this.setEventListener(D(this,Ns))}onUnsubscribe(){var t;this.hasListeners()||((t=D(this,zn))==null||t.call(this),Q(this,zn,void 0))}setEventListener(t){var n;Q(this,Ns,t),(n=D(this,zn))==null||n.call(this),Q(this,zn,t(this.setOnline.bind(this)))}setOnline(t){D(this,ws)!==t&&(Q(this,ws,t),this.listeners.forEach(r=>{r(t)}))}isOnline(){return D(this,ws)}},ws=new WeakMap,zn=new WeakMap,Ns=new WeakMap,zp),rl=new RN;function MN(e){return Math.min(1e3*2**e,3e4)}function l0(e){return(e??"online")==="online"?rl.isOnline():!0}var Vc=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function u0(e){let t=!1,n=0,r;const s=$c(),o=()=>s.status!=="pending",a=w=>{var j;if(!o()){const p=new Vc(w);m(p),(j=e.onCancel)==null||j.call(e,p)}},l=()=>{t=!0},u=()=>{t=!1},c=()=>mf.isFocused()&&(e.networkMode==="always"||rl.isOnline())&&e.canRun(),d=()=>l0(e.networkMode)&&e.canRun(),f=w=>{o()||(r==null||r(),s.resolve(w))},m=w=>{o()||(r==null||r(),s.reject(w))},y=()=>new Promise(w=>{var j;r=p=>{(o()||c())&&w(p)},(j=e.onPause)==null||j.call(e)}).then(()=>{var w;r=void 0,o()||(w=e.onContinue)==null||w.call(e)}),x=()=>{if(o())return;let w;const j=n===0?e.initialPromise:void 0;try{w=j??e.fn()}catch(p){w=Promise.reject(p)}Promise.resolve(w).then(f).catch(p=>{var k;if(o())return;const h=e.retry??(zr?0:3),g=e.retryDelay??MN,v=typeof g=="function"?g(n,p):g,N=h===!0||typeof h=="number"&&n<h||typeof h=="function"&&h(n,p);if(t||!N){m(p);return}n++,(k=e.onFail)==null||k.call(e,n,p),jN(v).then(()=>c()?void 0:y()).then(()=>{t?m(p):x()})})};return{promise:s,status:()=>s.status,cancel:a,continue:()=>(r==null||r(),s),cancelRetry:l,continueRetry:u,canStart:d,start:()=>(d()?x():y().then(x),s)}}var vr,Lp,c0=(Lp=class{constructor(){te(this,vr)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Oc(this.gcTime)&&Q(this,vr,pr.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(zr?1/0:5*60*1e3))}clearGcTimeout(){D(this,vr)&&(pr.clearTimeout(D(this,vr)),Q(this,vr,void 0))}},vr=new WeakMap,Lp),br,js,wt,wr,Le,mi,Nr,Mt,un,Fp,PN=(Fp=class extends c0{constructor(t){super();te(this,Mt);te(this,br);te(this,js);te(this,wt);te(this,wr);te(this,Le);te(this,mi);te(this,Nr);Q(this,Nr,!1),Q(this,mi,t.defaultOptions),this.setOptions(t.options),this.observers=[],Q(this,wr,t.client),Q(this,wt,D(this,wr).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,Q(this,br,ih(this.options)),this.state=t.state??D(this,br),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=D(this,Le))==null?void 0:t.promise}setOptions(t){if(this.options={...D(this,mi),...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const n=ih(this.options);n.data!==void 0&&(this.setState(oh(n.data,n.dataUpdatedAt)),Q(this,br,n))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&D(this,wt).remove(this)}setData(t,n){const r=Fc(this.state.data,t,this.options);return le(this,Mt,un).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(t,n){le(this,Mt,un).call(this,{type:"setState",state:t,setStateOptions:n})}cancel(t){var r,s;const n=(r=D(this,Le))==null?void 0:r.promise;return(s=D(this,Le))==null||s.cancel(t),n?n.then(st).catch(st):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(D(this,br))}isActive(){return this.observers.some(t=>Nt(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===ff||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>Jn(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!o0(this.state.dataUpdatedAt,t)}onFocus(){var n;const t=this.observers.find(r=>r.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(n=D(this,Le))==null||n.continue()}onOnline(){var n;const t=this.observers.find(r=>r.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(n=D(this,Le))==null||n.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),D(this,wt).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(n=>n!==t),this.observers.length||(D(this,Le)&&(D(this,Nr)?D(this,Le).cancel({revert:!0}):D(this,Le).cancelRetry()),this.scheduleGc()),D(this,wt).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||le(this,Mt,un).call(this,{type:"invalidate"})}async fetch(t,n){var u,c,d,f,m,y,x,w,j,p,h,g;if(this.state.fetchStatus!=="idle"&&((u=D(this,Le))==null?void 0:u.status())!=="rejected"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(D(this,Le))return D(this,Le).continueRetry(),D(this,Le).promise}if(t&&this.setOptions(t),!this.options.queryFn){const v=this.observers.find(N=>N.options.queryFn);v&&this.setOptions(v.options)}const r=new AbortController,s=v=>{Object.defineProperty(v,"signal",{enumerable:!0,get:()=>(Q(this,Nr,!0),r.signal)})},o=()=>{const v=a0(this.options,n),k=(()=>{const b={client:D(this,wr),queryKey:this.queryKey,meta:this.meta};return s(b),b})();return Q(this,Nr,!1),this.options.persister?this.options.persister(v,k,this):v(k)},l=(()=>{const v={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:D(this,wr),state:this.state,fetchFn:o};return s(v),v})();(c=this.options.behavior)==null||c.onFetch(l,this),Q(this,js,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=l.fetchOptions)==null?void 0:d.meta))&&le(this,Mt,un).call(this,{type:"fetch",meta:(f=l.fetchOptions)==null?void 0:f.meta}),Q(this,Le,u0({initialPromise:n==null?void 0:n.initialPromise,fn:l.fetchFn,onCancel:v=>{v instanceof Vc&&v.revert&&this.setState({...D(this,js),fetchStatus:"idle"}),r.abort()},onFail:(v,N)=>{le(this,Mt,un).call(this,{type:"failed",failureCount:v,error:N})},onPause:()=>{le(this,Mt,un).call(this,{type:"pause"})},onContinue:()=>{le(this,Mt,un).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0}));try{const v=await D(this,Le).start();if(v===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(v),(y=(m=D(this,wt).config).onSuccess)==null||y.call(m,v,this),(w=(x=D(this,wt).config).onSettled)==null||w.call(x,v,this.state.error,this),v}catch(v){if(v instanceof Vc){if(v.silent)return D(this,Le).promise;if(v.revert){if(this.state.data===void 0)throw v;return this.state.data}}throw le(this,Mt,un).call(this,{type:"error",error:v}),(p=(j=D(this,wt).config).onError)==null||p.call(j,v,this),(g=(h=D(this,wt).config).onSettled)==null||g.call(h,this.state.data,v,this),v}finally{this.scheduleGc()}}},br=new WeakMap,js=new WeakMap,wt=new WeakMap,wr=new WeakMap,Le=new WeakMap,mi=new WeakMap,Nr=new WeakMap,Mt=new WeakSet,un=function(t){const n=r=>{switch(t.type){case"failed":return{...r,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...d0(r.data,this.options),fetchMeta:t.meta??null};case"success":const s={...r,...oh(t.data,t.dataUpdatedAt),dataUpdateCount:r.dataUpdateCount+1,...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return Q(this,js,t.manual?s:void 0),s;case"error":const o=t.error;return{...r,error:o,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:o,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...t.state}}};this.state=n(this.state),He.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),D(this,wt).notify({query:this,type:"updated",action:t})})},Fp);function d0(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:l0(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function oh(e,t){return{data:e,dataUpdatedAt:t??Date.now(),error:null,isInvalidated:!1,status:"success"}}function ih(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,r=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var rt,ue,hi,Ge,jr,ks,fn,Ln,pi,_s,Ss,kr,_r,Fn,Cs,ge,_o,Hc,Bc,Uc,Wc,qc,Qc,Xc,f0,$p,IN=($p=class extends ji{constructor(t,n){super();te(this,ge);te(this,rt);te(this,ue);te(this,hi);te(this,Ge);te(this,jr);te(this,ks);te(this,fn);te(this,Ln);te(this,pi);te(this,_s);te(this,Ss);te(this,kr);te(this,_r);te(this,Fn);te(this,Cs,new Set);this.options=n,Q(this,rt,t),Q(this,Ln,null),Q(this,fn,$c()),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(D(this,ue).addObserver(this),ah(D(this,ue),this.options)?le(this,ge,_o).call(this):this.updateResult(),le(this,ge,Wc).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Kc(D(this,ue),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Kc(D(this,ue),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,le(this,ge,qc).call(this),le(this,ge,Qc).call(this),D(this,ue).removeObserver(this)}setOptions(t){const n=this.options,r=D(this,ue);if(this.options=D(this,rt).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Nt(this.options.enabled,D(this,ue))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");le(this,ge,Xc).call(this),D(this,ue).setOptions(this.options),n._defaulted&&!zc(this.options,n)&&D(this,rt).getQueryCache().notify({type:"observerOptionsUpdated",query:D(this,ue),observer:this});const s=this.hasListeners();s&&lh(D(this,ue),r,this.options,n)&&le(this,ge,_o).call(this),this.updateResult(),s&&(D(this,ue)!==r||Nt(this.options.enabled,D(this,ue))!==Nt(n.enabled,D(this,ue))||Jn(this.options.staleTime,D(this,ue))!==Jn(n.staleTime,D(this,ue)))&&le(this,ge,Hc).call(this);const o=le(this,ge,Bc).call(this);s&&(D(this,ue)!==r||Nt(this.options.enabled,D(this,ue))!==Nt(n.enabled,D(this,ue))||o!==D(this,Fn))&&le(this,ge,Uc).call(this,o)}getOptimisticResult(t){const n=D(this,rt).getQueryCache().build(D(this,rt),t),r=this.createResult(n,t);return AN(this,r)&&(Q(this,Ge,r),Q(this,ks,this.options),Q(this,jr,D(this,ue).state)),r}getCurrentResult(){return D(this,Ge)}trackResult(t,n){return new Proxy(t,{get:(r,s)=>(this.trackProp(s),n==null||n(s),s==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&D(this,fn).status==="pending"&&D(this,fn).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(r,s))})}trackProp(t){D(this,Cs).add(t)}getCurrentQuery(){return D(this,ue)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const n=D(this,rt).defaultQueryOptions(t),r=D(this,rt).getQueryCache().build(D(this,rt),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(t){return le(this,ge,_o).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),D(this,Ge)))}createResult(t,n){var C;const r=D(this,ue),s=this.options,o=D(this,Ge),a=D(this,jr),l=D(this,ks),c=t!==r?t.state:D(this,hi),{state:d}=t;let f={...d},m=!1,y;if(n._optimisticResults){const M=this.hasListeners(),I=!M&&ah(t,n),R=M&&lh(t,r,n,s);(I||R)&&(f={...f,...d0(d.data,t.options)}),n._optimisticResults==="isRestoring"&&(f.fetchStatus="idle")}let{error:x,errorUpdatedAt:w,status:j}=f;y=f.data;let p=!1;if(n.placeholderData!==void 0&&y===void 0&&j==="pending"){let M;o!=null&&o.isPlaceholderData&&n.placeholderData===(l==null?void 0:l.placeholderData)?(M=o.data,p=!0):M=typeof n.placeholderData=="function"?n.placeholderData((C=D(this,Ss))==null?void 0:C.state.data,D(this,Ss)):n.placeholderData,M!==void 0&&(j="success",y=Fc(o==null?void 0:o.data,M,n),m=!0)}if(n.select&&y!==void 0&&!p)if(o&&y===(a==null?void 0:a.data)&&n.select===D(this,pi))y=D(this,_s);else try{Q(this,pi,n.select),y=n.select(y),y=Fc(o==null?void 0:o.data,y,n),Q(this,_s,y),Q(this,Ln,null)}catch(M){Q(this,Ln,M)}D(this,Ln)&&(x=D(this,Ln),y=D(this,_s),w=Date.now(),j="error");const h=f.fetchStatus==="fetching",g=j==="pending",v=j==="error",N=g&&h,k=y!==void 0,_={status:j,fetchStatus:f.fetchStatus,isPending:g,isSuccess:j==="success",isError:v,isInitialLoading:N,isLoading:N,data:y,dataUpdatedAt:f.dataUpdatedAt,error:x,errorUpdatedAt:w,failureCount:f.fetchFailureCount,failureReason:f.fetchFailureReason,errorUpdateCount:f.errorUpdateCount,isFetched:f.dataUpdateCount>0||f.errorUpdateCount>0,isFetchedAfterMount:f.dataUpdateCount>c.dataUpdateCount||f.errorUpdateCount>c.errorUpdateCount,isFetching:h,isRefetching:h&&!g,isLoadingError:v&&!k,isPaused:f.fetchStatus==="paused",isPlaceholderData:m,isRefetchError:v&&k,isStale:hf(t,n),refetch:this.refetch,promise:D(this,fn),isEnabled:Nt(n.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const M=O=>{_.status==="error"?O.reject(_.error):_.data!==void 0&&O.resolve(_.data)},I=()=>{const O=Q(this,fn,_.promise=$c());M(O)},R=D(this,fn);switch(R.status){case"pending":t.queryHash===r.queryHash&&M(R);break;case"fulfilled":(_.status==="error"||_.data!==R.value)&&I();break;case"rejected":(_.status!=="error"||_.error!==R.reason)&&I();break}}return _}updateResult(){const t=D(this,Ge),n=this.createResult(D(this,ue),this.options);if(Q(this,jr,D(this,ue).state),Q(this,ks,this.options),D(this,jr).data!==void 0&&Q(this,Ss,D(this,ue)),zc(n,t))return;Q(this,Ge,n);const r=()=>{if(!t)return!0;const{notifyOnChangeProps:s}=this.options,o=typeof s=="function"?s():s;if(o==="all"||!o&&!D(this,Cs).size)return!0;const a=new Set(o??D(this,Cs));return this.options.throwOnError&&a.add("error"),Object.keys(D(this,Ge)).some(l=>{const u=l;return D(this,Ge)[u]!==t[u]&&a.has(u)})};le(this,ge,f0).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&le(this,ge,Wc).call(this)}},rt=new WeakMap,ue=new WeakMap,hi=new WeakMap,Ge=new WeakMap,jr=new WeakMap,ks=new WeakMap,fn=new WeakMap,Ln=new WeakMap,pi=new WeakMap,_s=new WeakMap,Ss=new WeakMap,kr=new WeakMap,_r=new WeakMap,Fn=new WeakMap,Cs=new WeakMap,ge=new WeakSet,_o=function(t){le(this,ge,Xc).call(this);let n=D(this,ue).fetch(this.options,t);return t!=null&&t.throwOnError||(n=n.catch(st)),n},Hc=function(){le(this,ge,qc).call(this);const t=Jn(this.options.staleTime,D(this,ue));if(zr||D(this,Ge).isStale||!Oc(t))return;const r=o0(D(this,Ge).dataUpdatedAt,t)+1;Q(this,kr,pr.setTimeout(()=>{D(this,Ge).isStale||this.updateResult()},r))},Bc=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(D(this,ue)):this.options.refetchInterval)??!1},Uc=function(t){le(this,ge,Qc).call(this),Q(this,Fn,t),!(zr||Nt(this.options.enabled,D(this,ue))===!1||!Oc(D(this,Fn))||D(this,Fn)===0)&&Q(this,_r,pr.setInterval(()=>{(this.options.refetchIntervalInBackground||mf.isFocused())&&le(this,ge,_o).call(this)},D(this,Fn)))},Wc=function(){le(this,ge,Hc).call(this),le(this,ge,Uc).call(this,le(this,ge,Bc).call(this))},qc=function(){D(this,kr)&&(pr.clearTimeout(D(this,kr)),Q(this,kr,void 0))},Qc=function(){D(this,_r)&&(pr.clearInterval(D(this,_r)),Q(this,_r,void 0))},Xc=function(){const t=D(this,rt).getQueryCache().build(D(this,rt),this.options);if(t===D(this,ue))return;const n=D(this,ue);Q(this,ue,t),Q(this,hi,t.state),this.hasListeners()&&(n==null||n.removeObserver(this),t.addObserver(this))},f0=function(t){He.batch(()=>{t.listeners&&this.listeners.forEach(n=>{n(D(this,Ge))}),D(this,rt).getQueryCache().notify({query:D(this,ue),type:"observerResultsUpdated"})})},$p);function DN(e,t){return Nt(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function ah(e,t){return DN(e,t)||e.state.data!==void 0&&Kc(e,t,t.refetchOnMount)}function Kc(e,t,n){if(Nt(t.enabled,e)!==!1&&Jn(t.staleTime,e)!=="static"){const r=typeof n=="function"?n(e):n;return r==="always"||r!==!1&&hf(e,t)}return!1}function lh(e,t,n,r){return(e!==t||Nt(r.enabled,e)===!1)&&(!n.suspense||e.state.status!=="error")&&hf(e,n)}function hf(e,t){return Nt(t.enabled,e)!==!1&&e.isStaleByTime(Jn(t.staleTime,e))}function AN(e,t){return!zc(e.getCurrentResult(),t)}function uh(e){return{onFetch:(t,n)=>{var d,f,m,y,x;const r=t.options,s=(m=(f=(d=t.fetchOptions)==null?void 0:d.meta)==null?void 0:f.fetchMore)==null?void 0:m.direction,o=((y=t.state.data)==null?void 0:y.pages)||[],a=((x=t.state.data)==null?void 0:x.pageParams)||[];let l={pages:[],pageParams:[]},u=0;const c=async()=>{let w=!1;const j=g=>{Object.defineProperty(g,"signal",{enumerable:!0,get:()=>(t.signal.aborted?w=!0:t.signal.addEventListener("abort",()=>{w=!0}),t.signal)})},p=a0(t.options,t.fetchOptions),h=async(g,v,N)=>{if(w)return Promise.reject();if(v==null&&g.pages.length)return Promise.resolve(g);const b=(()=>{const I={client:t.client,queryKey:t.queryKey,pageParam:v,direction:N?"backward":"forward",meta:t.options.meta};return j(I),I})(),_=await p(b),{maxPages:C}=t.options,M=N?_N:kN;return{pages:M(g.pages,_,C),pageParams:M(g.pageParams,v,C)}};if(s&&o.length){const g=s==="backward",v=g?ON:ch,N={pages:o,pageParams:a},k=v(r,N);l=await h(N,k,g)}else{const g=e??o.length;do{const v=u===0?a[0]??r.initialPageParam:ch(r,l);if(u>0&&v==null)break;l=await h(l,v),u++}while(u<g)}return l};t.options.persister?t.fetchFn=()=>{var w,j;return(j=(w=t.options).persister)==null?void 0:j.call(w,c,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n)}:t.fetchFn=c}}}function ch(e,{pages:t,pageParams:n}){const r=t.length-1;return t.length>0?e.getNextPageParam(t[r],t,n[r],n):void 0}function ON(e,{pages:t,pageParams:n}){var r;return t.length>0?(r=e.getPreviousPageParam)==null?void 0:r.call(e,t[0],t,n[0],n):void 0}var gi,Kt,Ze,Sr,Yt,Tn,Vp,zN=(Vp=class extends c0{constructor(t){super();te(this,Yt);te(this,gi);te(this,Kt);te(this,Ze);te(this,Sr);Q(this,gi,t.client),this.mutationId=t.mutationId,Q(this,Ze,t.mutationCache),Q(this,Kt,[]),this.state=t.state||LN(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){D(this,Kt).includes(t)||(D(this,Kt).push(t),this.clearGcTimeout(),D(this,Ze).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){Q(this,Kt,D(this,Kt).filter(n=>n!==t)),this.scheduleGc(),D(this,Ze).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){D(this,Kt).length||(this.state.status==="pending"?this.scheduleGc():D(this,Ze).remove(this))}continue(){var t;return((t=D(this,Sr))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var a,l,u,c,d,f,m,y,x,w,j,p,h,g,v,N,k,b,_,C;const n=()=>{le(this,Yt,Tn).call(this,{type:"continue"})},r={client:D(this,gi),meta:this.options.meta,mutationKey:this.options.mutationKey};Q(this,Sr,u0({fn:()=>this.options.mutationFn?this.options.mutationFn(t,r):Promise.reject(new Error("No mutationFn found")),onFail:(M,I)=>{le(this,Yt,Tn).call(this,{type:"failed",failureCount:M,error:I})},onPause:()=>{le(this,Yt,Tn).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>D(this,Ze).canRun(this)}));const s=this.state.status==="pending",o=!D(this,Sr).canStart();try{if(s)n();else{le(this,Yt,Tn).call(this,{type:"pending",variables:t,isPaused:o}),await((l=(a=D(this,Ze).config).onMutate)==null?void 0:l.call(a,t,this,r));const I=await((c=(u=this.options).onMutate)==null?void 0:c.call(u,t,r));I!==this.state.context&&le(this,Yt,Tn).call(this,{type:"pending",context:I,variables:t,isPaused:o})}const M=await D(this,Sr).start();return await((f=(d=D(this,Ze).config).onSuccess)==null?void 0:f.call(d,M,t,this.state.context,this,r)),await((y=(m=this.options).onSuccess)==null?void 0:y.call(m,M,t,this.state.context,r)),await((w=(x=D(this,Ze).config).onSettled)==null?void 0:w.call(x,M,null,this.state.variables,this.state.context,this,r)),await((p=(j=this.options).onSettled)==null?void 0:p.call(j,M,null,t,this.state.context,r)),le(this,Yt,Tn).call(this,{type:"success",data:M}),M}catch(M){try{throw await((g=(h=D(this,Ze).config).onError)==null?void 0:g.call(h,M,t,this.state.context,this,r)),await((N=(v=this.options).onError)==null?void 0:N.call(v,M,t,this.state.context,r)),await((b=(k=D(this,Ze).config).onSettled)==null?void 0:b.call(k,void 0,M,this.state.variables,this.state.context,this,r)),await((C=(_=this.options).onSettled)==null?void 0:C.call(_,void 0,M,t,this.state.context,r)),M}finally{le(this,Yt,Tn).call(this,{type:"error",error:M})}}finally{D(this,Ze).runNext(this)}}},gi=new WeakMap,Kt=new WeakMap,Ze=new WeakMap,Sr=new WeakMap,Yt=new WeakSet,Tn=function(t){const n=r=>{switch(t.type){case"failed":return{...r,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...r,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:t.error,failureCount:r.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=n(this.state),He.batch(()=>{D(this,Kt).forEach(r=>{r.onMutationUpdate(t)}),D(this,Ze).notify({mutation:this,type:"updated",action:t})})},Vp);function LN(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var mn,Pt,xi,Hp,FN=(Hp=class extends ji{constructor(t={}){super();te(this,mn);te(this,Pt);te(this,xi);this.config=t,Q(this,mn,new Set),Q(this,Pt,new Map),Q(this,xi,0)}build(t,n,r){const s=new zN({client:t,mutationCache:this,mutationId:++zi(this,xi)._,options:t.defaultMutationOptions(n),state:r});return this.add(s),s}add(t){D(this,mn).add(t);const n=ta(t);if(typeof n=="string"){const r=D(this,Pt).get(n);r?r.push(t):D(this,Pt).set(n,[t])}this.notify({type:"added",mutation:t})}remove(t){if(D(this,mn).delete(t)){const n=ta(t);if(typeof n=="string"){const r=D(this,Pt).get(n);if(r)if(r.length>1){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}else r[0]===t&&D(this,Pt).delete(n)}}this.notify({type:"removed",mutation:t})}canRun(t){const n=ta(t);if(typeof n=="string"){const r=D(this,Pt).get(n),s=r==null?void 0:r.find(o=>o.state.status==="pending");return!s||s===t}else return!0}runNext(t){var r;const n=ta(t);if(typeof n=="string"){const s=(r=D(this,Pt).get(n))==null?void 0:r.find(o=>o!==t&&o.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){He.batch(()=>{D(this,mn).forEach(t=>{this.notify({type:"removed",mutation:t})}),D(this,mn).clear(),D(this,Pt).clear()})}getAll(){return Array.from(D(this,mn))}find(t){const n={exact:!0,...t};return this.getAll().find(r=>nh(n,r))}findAll(t={}){return this.getAll().filter(n=>nh(t,n))}notify(t){He.batch(()=>{this.listeners.forEach(n=>{n(t)})})}resumePausedMutations(){const t=this.getAll().filter(n=>n.state.isPaused);return He.batch(()=>Promise.all(t.map(n=>n.continue().catch(st))))}},mn=new WeakMap,Pt=new WeakMap,xi=new WeakMap,Hp);function ta(e){var t;return(t=e.options.scope)==null?void 0:t.id}var Gt,Bp,$N=(Bp=class extends ji{constructor(t={}){super();te(this,Gt);this.config=t,Q(this,Gt,new Map)}build(t,n,r){const s=n.queryKey,o=n.queryHash??df(s,n);let a=this.get(o);return a||(a=new PN({client:t,queryKey:s,queryHash:o,options:t.defaultQueryOptions(n),state:r,defaultOptions:t.getQueryDefaults(s)}),this.add(a)),a}add(t){D(this,Gt).has(t.queryHash)||(D(this,Gt).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const n=D(this,Gt).get(t.queryHash);n&&(t.destroy(),n===t&&D(this,Gt).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){He.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return D(this,Gt).get(t)}getAll(){return[...D(this,Gt).values()]}find(t){const n={exact:!0,...t};return this.getAll().find(r=>th(n,r))}findAll(t={}){const n=this.getAll();return Object.keys(t).length>0?n.filter(r=>th(t,r)):n}notify(t){He.batch(()=>{this.listeners.forEach(n=>{n(t)})})}onFocus(){He.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){He.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},Gt=new WeakMap,Bp),Ee,$n,Vn,Es,Ts,Hn,Rs,Ms,Up,VN=(Up=class{constructor(e={}){te(this,Ee);te(this,$n);te(this,Vn);te(this,Es);te(this,Ts);te(this,Hn);te(this,Rs);te(this,Ms);Q(this,Ee,e.queryCache||new $N),Q(this,$n,e.mutationCache||new FN),Q(this,Vn,e.defaultOptions||{}),Q(this,Es,new Map),Q(this,Ts,new Map),Q(this,Hn,0)}mount(){zi(this,Hn)._++,D(this,Hn)===1&&(Q(this,Rs,mf.subscribe(async e=>{e&&(await this.resumePausedMutations(),D(this,Ee).onFocus())})),Q(this,Ms,rl.subscribe(async e=>{e&&(await this.resumePausedMutations(),D(this,Ee).onOnline())})))}unmount(){var e,t;zi(this,Hn)._--,D(this,Hn)===0&&((e=D(this,Rs))==null||e.call(this),Q(this,Rs,void 0),(t=D(this,Ms))==null||t.call(this),Q(this,Ms,void 0))}isFetching(e){return D(this,Ee).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return D(this,$n).findAll({...e,status:"pending"}).length}getQueryData(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=D(this,Ee).get(t.queryHash))==null?void 0:n.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),n=D(this,Ee).build(this,t),r=n.state.data;return r===void 0?this.fetchQuery(e):(e.revalidateIfStale&&n.isStaleByTime(Jn(t.staleTime,n))&&this.prefetchQuery(t),Promise.resolve(r))}getQueriesData(e){return D(this,Ee).findAll(e).map(({queryKey:t,state:n})=>{const r=n.data;return[t,r]})}setQueryData(e,t,n){const r=this.defaultQueryOptions({queryKey:e}),s=D(this,Ee).get(r.queryHash),o=s==null?void 0:s.state.data,a=wN(t,o);if(a!==void 0)return D(this,Ee).build(this,r).setData(a,{...n,manual:!0})}setQueriesData(e,t,n){return He.batch(()=>D(this,Ee).findAll(e).map(({queryKey:r})=>[r,this.setQueryData(r,t,n)]))}getQueryState(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=D(this,Ee).get(t.queryHash))==null?void 0:n.state}removeQueries(e){const t=D(this,Ee);He.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=D(this,Ee);return He.batch(()=>(n.findAll(e).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const n={revert:!0,...t},r=He.batch(()=>D(this,Ee).findAll(e).map(s=>s.cancel(n)));return Promise.all(r).then(st).catch(st)}invalidateQueries(e,t={}){return He.batch(()=>(D(this,Ee).findAll(e).forEach(n=>{n.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const n={...t,cancelRefetch:t.cancelRefetch??!0},r=He.batch(()=>D(this,Ee).findAll(e).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let o=s.fetch(void 0,n);return n.throwOnError||(o=o.catch(st)),s.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(r).then(st)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=D(this,Ee).build(this,t);return n.isStaleByTime(Jn(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(st).catch(st)}fetchInfiniteQuery(e){return e.behavior=uh(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(st).catch(st)}ensureInfiniteQueryData(e){return e.behavior=uh(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return rl.isOnline()?D(this,$n).resumePausedMutations():Promise.resolve()}getQueryCache(){return D(this,Ee)}getMutationCache(){return D(this,$n)}getDefaultOptions(){return D(this,Vn)}setDefaultOptions(e){Q(this,Vn,e)}setQueryDefaults(e,t){D(this,Es).set(ni(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...D(this,Es).values()],n={};return t.forEach(r=>{ri(e,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(e,t){D(this,Ts).set(ni(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...D(this,Ts).values()],n={};return t.forEach(r=>{ri(e,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...D(this,Vn).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=df(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===ff&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...D(this,Vn).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){D(this,Ee).clear(),D(this,$n).clear()}},Ee=new WeakMap,$n=new WeakMap,Vn=new WeakMap,Es=new WeakMap,Ts=new WeakMap,Hn=new WeakMap,Rs=new WeakMap,Ms=new WeakMap,Up),m0=T.createContext(void 0),HN=e=>{const t=T.useContext(m0);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},BN=({client:e,children:t})=>(T.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),i.jsx(m0.Provider,{value:e,children:t})),h0=T.createContext(!1),UN=()=>T.useContext(h0);h0.Provider;function WN(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var qN=T.createContext(WN()),QN=()=>T.useContext(qN),XN=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},KN=e=>{T.useEffect(()=>{e.clearReset()},[e])},YN=({result:e,errorResetBoundary:t,throwOnError:n,query:r,suspense:s})=>e.isError&&!t.isReset()&&!e.isFetching&&r&&(s&&e.data===void 0||SN(n,[e.error,r])),GN=e=>{if(e.suspense){const n=s=>s==="static"?s:Math.max(s??1e3,1e3),r=e.staleTime;e.staleTime=typeof r=="function"?(...s)=>n(r(...s)):n(r),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},ZN=(e,t)=>e.isLoading&&e.isFetching&&!t,JN=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,dh=(e,t,n)=>t.fetchOptimistic(e).catch(()=>{n.clearReset()});function ej(e,t,n){var f,m,y,x,w;const r=UN(),s=QN(),o=HN(),a=o.defaultQueryOptions(e);(m=(f=o.getDefaultOptions().queries)==null?void 0:f._experimental_beforeQuery)==null||m.call(f,a),a._optimisticResults=r?"isRestoring":"optimistic",GN(a),XN(a,s),KN(s);const l=!o.getQueryCache().get(a.queryHash),[u]=T.useState(()=>new t(o,a)),c=u.getOptimisticResult(a),d=!r&&e.subscribed!==!1;if(T.useSyncExternalStore(T.useCallback(j=>{const p=d?u.subscribe(He.batchCalls(j)):st;return u.updateResult(),p},[u,d]),()=>u.getCurrentResult(),()=>u.getCurrentResult()),T.useEffect(()=>{u.setOptions(a)},[a,u]),JN(a,c))throw dh(a,u,s);if(YN({result:c,errorResetBoundary:s,throwOnError:a.throwOnError,query:o.getQueryCache().get(a.queryHash),suspense:a.suspense}))throw c.error;if((x=(y=o.getDefaultOptions().queries)==null?void 0:y._experimental_afterQuery)==null||x.call(y,a,c),a.experimental_prefetchInRender&&!zr&&ZN(c,r)){const j=l?dh(a,u,s):(w=o.getQueryCache().get(a.queryHash))==null?void 0:w.promise;j==null||j.catch(st).finally(()=>{u.updateResult()})}return a.notifyOnChangeProps?c:u.trackResult(c)}function tj(e,t){return ej(e,IN)}const dr=class dr{constructor(){tu(this,"nodes",new Map)}static getInstance(){return dr.instance||(dr.instance=new dr),dr.instance}register(t){this.nodes.has(t.type)&&console.warn(`Node type "${t.type}" is already registered. Overwriting.`),this.nodes.set(t.type,t),console.log(`[Registry] Registered node: ${t.label} (${t.type})`)}get(t){return this.nodes.get(t)}getAll(){return Array.from(this.nodes.values())}getByCategory(){const t={};return this.nodes.forEach(n=>{t[n.category]||(t[n.category]=[]),t[n.category].push(n)}),t}};tu(dr,"instance");let Yc=dr;const pe=Yc.getInstance(),nj={},fh=e=>{let t;const n=new Set,r=(d,f)=>{const m=typeof d=="function"?d(t):d;if(!Object.is(m,t)){const y=t;t=f??(typeof m!="object"||m===null)?m:Object.assign({},t,m),n.forEach(x=>x(t,y))}},s=()=>t,u={setState:r,getState:s,getInitialState:()=>c,subscribe:d=>(n.add(d),()=>n.delete(d)),destroy:()=>{(nj?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},c=t=e(r,s,u);return u},p0=e=>e?fh(e):fh;var g0={exports:{}},x0={},y0={exports:{}},v0={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fs=T;function rj(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var sj=typeof Object.is=="function"?Object.is:rj,oj=Fs.useState,ij=Fs.useEffect,aj=Fs.useLayoutEffect,lj=Fs.useDebugValue;function uj(e,t){var n=t(),r=oj({inst:{value:n,getSnapshot:t}}),s=r[0].inst,o=r[1];return aj(function(){s.value=n,s.getSnapshot=t,Tu(s)&&o({inst:s})},[e,n,t]),ij(function(){return Tu(s)&&o({inst:s}),e(function(){Tu(s)&&o({inst:s})})},[e]),lj(n),n}function Tu(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sj(e,n)}catch{return!0}}function cj(e,t){return t()}var dj=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?cj:uj;v0.useSyncExternalStore=Fs.useSyncExternalStore!==void 0?Fs.useSyncExternalStore:dj;y0.exports=v0;var fj=y0.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dl=T,mj=fj;function hj(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var pj=typeof Object.is=="function"?Object.is:hj,gj=mj.useSyncExternalStore,xj=Dl.useRef,yj=Dl.useEffect,vj=Dl.useMemo,bj=Dl.useDebugValue;x0.useSyncExternalStoreWithSelector=function(e,t,n,r,s){var o=xj(null);if(o.current===null){var a={hasValue:!1,value:null};o.current=a}else a=o.current;o=vj(function(){function u(y){if(!c){if(c=!0,d=y,y=r(y),s!==void 0&&a.hasValue){var x=a.value;if(s(x,y))return f=x}return f=y}if(x=f,pj(d,y))return x;var w=r(y);return s!==void 0&&s(x,w)?(d=y,x):(d=y,f=w)}var c=!1,d,f,m=n===void 0?null:n;return[function(){return u(t())},m===null?void 0:function(){return u(m())}]},[t,n,r,s]);var l=gj(e,o[0],o[1]);return yj(function(){a.hasValue=!0,a.value=l},[l]),bj(l),l};g0.exports=x0;var wj=g0.exports;const b0=Wp(wj),w0={},{useDebugValue:Nj}=zt,{useSyncExternalStoreWithSelector:jj}=b0;let mh=!1;const kj=e=>e;function _j(e,t=kj,n){(w0?"production":void 0)!=="production"&&n&&!mh&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),mh=!0);const r=jj(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return Nj(r),r}const hh=e=>{(w0?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof e=="function"?p0(e):e,n=(r,s)=>_j(t,r,s);return Object.assign(n,t),n},Sj=e=>e?hh(e):hh;function De(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,r;n<e.length;n++)(r=De(e[n]))!==""&&(t+=(t&&" ")+r);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var Cj={value:()=>{}};function Al(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new _a(n)}function _a(e){this._=e}function Ej(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",s=n.indexOf(".");if(s>=0&&(r=n.slice(s+1),n=n.slice(0,s)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}_a.prototype=Al.prototype={constructor:_a,on:function(e,t){var n=this._,r=Ej(e+"",n),s,o=-1,a=r.length;if(arguments.length<2){for(;++o<a;)if((s=(e=r[o]).type)&&(s=Tj(n[s],e.name)))return s;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<a;)if(s=(e=r[o]).type)n[s]=ph(n[s],e.name,t);else if(t==null)for(s in n)n[s]=ph(n[s],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new _a(e)},call:function(e,t){if((s=arguments.length-2)>0)for(var n=new Array(s),r=0,s,o;r<s;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],r=0,s=o.length;r<s;++r)o[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],s=0,o=r.length;s<o;++s)r[s].value.apply(t,n)}};function Tj(e,t){for(var n=0,r=e.length,s;n<r;++n)if((s=e[n]).name===t)return s.value}function ph(e,t,n){for(var r=0,s=e.length;r<s;++r)if(e[r].name===t){e[r]=Cj,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var Gc="http://www.w3.org/1999/xhtml";const gh={svg:"http://www.w3.org/2000/svg",xhtml:Gc,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Ol(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),gh.hasOwnProperty(t)?{space:gh[t],local:e}:e}function Rj(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Gc&&t.documentElement.namespaceURI===Gc?t.createElement(e):t.createElementNS(n,e)}}function Mj(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function N0(e){var t=Ol(e);return(t.local?Mj:Rj)(t)}function Pj(){}function pf(e){return e==null?Pj:function(){return this.querySelector(e)}}function Ij(e){typeof e!="function"&&(e=pf(e));for(var t=this._groups,n=t.length,r=new Array(n),s=0;s<n;++s)for(var o=t[s],a=o.length,l=r[s]=new Array(a),u,c,d=0;d<a;++d)(u=o[d])&&(c=e.call(u,u.__data__,d,o))&&("__data__"in u&&(c.__data__=u.__data__),l[d]=c);return new yt(r,this._parents)}function Dj(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Aj(){return[]}function j0(e){return e==null?Aj:function(){return this.querySelectorAll(e)}}function Oj(e){return function(){return Dj(e.apply(this,arguments))}}function zj(e){typeof e=="function"?e=Oj(e):e=j0(e);for(var t=this._groups,n=t.length,r=[],s=[],o=0;o<n;++o)for(var a=t[o],l=a.length,u,c=0;c<l;++c)(u=a[c])&&(r.push(e.call(u,u.__data__,c,a)),s.push(u));return new yt(r,s)}function k0(e){return function(){return this.matches(e)}}function _0(e){return function(t){return t.matches(e)}}var Lj=Array.prototype.find;function Fj(e){return function(){return Lj.call(this.children,e)}}function $j(){return this.firstElementChild}function Vj(e){return this.select(e==null?$j:Fj(typeof e=="function"?e:_0(e)))}var Hj=Array.prototype.filter;function Bj(){return Array.from(this.children)}function Uj(e){return function(){return Hj.call(this.children,e)}}function Wj(e){return this.selectAll(e==null?Bj:Uj(typeof e=="function"?e:_0(e)))}function qj(e){typeof e!="function"&&(e=k0(e));for(var t=this._groups,n=t.length,r=new Array(n),s=0;s<n;++s)for(var o=t[s],a=o.length,l=r[s]=[],u,c=0;c<a;++c)(u=o[c])&&e.call(u,u.__data__,c,o)&&l.push(u);return new yt(r,this._parents)}function S0(e){return new Array(e.length)}function Qj(){return new yt(this._enter||this._groups.map(S0),this._parents)}function sl(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}sl.prototype={constructor:sl,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Xj(e){return function(){return e}}function Kj(e,t,n,r,s,o){for(var a=0,l,u=t.length,c=o.length;a<c;++a)(l=t[a])?(l.__data__=o[a],r[a]=l):n[a]=new sl(e,o[a]);for(;a<u;++a)(l=t[a])&&(s[a]=l)}function Yj(e,t,n,r,s,o,a){var l,u,c=new Map,d=t.length,f=o.length,m=new Array(d),y;for(l=0;l<d;++l)(u=t[l])&&(m[l]=y=a.call(u,u.__data__,l,t)+"",c.has(y)?s[l]=u:c.set(y,u));for(l=0;l<f;++l)y=a.call(e,o[l],l,o)+"",(u=c.get(y))?(r[l]=u,u.__data__=o[l],c.delete(y)):n[l]=new sl(e,o[l]);for(l=0;l<d;++l)(u=t[l])&&c.get(m[l])===u&&(s[l]=u)}function Gj(e){return e.__data__}function Zj(e,t){if(!arguments.length)return Array.from(this,Gj);var n=t?Yj:Kj,r=this._parents,s=this._groups;typeof e!="function"&&(e=Xj(e));for(var o=s.length,a=new Array(o),l=new Array(o),u=new Array(o),c=0;c<o;++c){var d=r[c],f=s[c],m=f.length,y=Jj(e.call(d,d&&d.__data__,c,r)),x=y.length,w=l[c]=new Array(x),j=a[c]=new Array(x),p=u[c]=new Array(m);n(d,f,w,j,p,y,t);for(var h=0,g=0,v,N;h<x;++h)if(v=w[h]){for(h>=g&&(g=h+1);!(N=j[g])&&++g<x;);v._next=N||null}}return a=new yt(a,r),a._enter=l,a._exit=u,a}function Jj(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function e2(){return new yt(this._exit||this._groups.map(S0),this._parents)}function t2(e,t,n){var r=this.enter(),s=this,o=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(s=t(s),s&&(s=s.selection())),n==null?o.remove():n(o),r&&s?r.merge(s).order():s}function n2(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,s=n.length,o=r.length,a=Math.min(s,o),l=new Array(s),u=0;u<a;++u)for(var c=n[u],d=r[u],f=c.length,m=l[u]=new Array(f),y,x=0;x<f;++x)(y=c[x]||d[x])&&(m[x]=y);for(;u<s;++u)l[u]=n[u];return new yt(l,this._parents)}function r2(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],s=r.length-1,o=r[s],a;--s>=0;)(a=r[s])&&(o&&a.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(a,o),o=a);return this}function s2(e){e||(e=o2);function t(f,m){return f&&m?e(f.__data__,m.__data__):!f-!m}for(var n=this._groups,r=n.length,s=new Array(r),o=0;o<r;++o){for(var a=n[o],l=a.length,u=s[o]=new Array(l),c,d=0;d<l;++d)(c=a[d])&&(u[d]=c);u.sort(t)}return new yt(s,this._parents).order()}function o2(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function i2(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function a2(){return Array.from(this)}function l2(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],s=0,o=r.length;s<o;++s){var a=r[s];if(a)return a}return null}function u2(){let e=0;for(const t of this)++e;return e}function c2(){return!this.node()}function d2(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var s=t[n],o=0,a=s.length,l;o<a;++o)(l=s[o])&&e.call(l,l.__data__,o,s);return this}function f2(e){return function(){this.removeAttribute(e)}}function m2(e){return function(){this.removeAttributeNS(e.space,e.local)}}function h2(e,t){return function(){this.setAttribute(e,t)}}function p2(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function g2(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function x2(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function y2(e,t){var n=Ol(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?m2:f2:typeof t=="function"?n.local?x2:g2:n.local?p2:h2)(n,t))}function C0(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function v2(e){return function(){this.style.removeProperty(e)}}function b2(e,t,n){return function(){this.style.setProperty(e,t,n)}}function w2(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function N2(e,t,n){return arguments.length>1?this.each((t==null?v2:typeof t=="function"?w2:b2)(e,t,n??"")):$s(this.node(),e)}function $s(e,t){return e.style.getPropertyValue(t)||C0(e).getComputedStyle(e,null).getPropertyValue(t)}function j2(e){return function(){delete this[e]}}function k2(e,t){return function(){this[e]=t}}function _2(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function S2(e,t){return arguments.length>1?this.each((t==null?j2:typeof t=="function"?_2:k2)(e,t)):this.node()[e]}function E0(e){return e.trim().split(/^|\s+/)}function gf(e){return e.classList||new T0(e)}function T0(e){this._node=e,this._names=E0(e.getAttribute("class")||"")}T0.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function R0(e,t){for(var n=gf(e),r=-1,s=t.length;++r<s;)n.add(t[r])}function M0(e,t){for(var n=gf(e),r=-1,s=t.length;++r<s;)n.remove(t[r])}function C2(e){return function(){R0(this,e)}}function E2(e){return function(){M0(this,e)}}function T2(e,t){return function(){(t.apply(this,arguments)?R0:M0)(this,e)}}function R2(e,t){var n=E0(e+"");if(arguments.length<2){for(var r=gf(this.node()),s=-1,o=n.length;++s<o;)if(!r.contains(n[s]))return!1;return!0}return this.each((typeof t=="function"?T2:t?C2:E2)(n,t))}function M2(){this.textContent=""}function P2(e){return function(){this.textContent=e}}function I2(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function D2(e){return arguments.length?this.each(e==null?M2:(typeof e=="function"?I2:P2)(e)):this.node().textContent}function A2(){this.innerHTML=""}function O2(e){return function(){this.innerHTML=e}}function z2(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function L2(e){return arguments.length?this.each(e==null?A2:(typeof e=="function"?z2:O2)(e)):this.node().innerHTML}function F2(){this.nextSibling&&this.parentNode.appendChild(this)}function $2(){return this.each(F2)}function V2(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function H2(){return this.each(V2)}function B2(e){var t=typeof e=="function"?e:N0(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function U2(){return null}function W2(e,t){var n=typeof e=="function"?e:N0(e),r=t==null?U2:typeof t=="function"?t:pf(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function q2(){var e=this.parentNode;e&&e.removeChild(this)}function Q2(){return this.each(q2)}function X2(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function K2(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Y2(e){return this.select(e?K2:X2)}function G2(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Z2(e){return function(t){e.call(this,t,this.__data__)}}function J2(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function ek(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,s=t.length,o;n<s;++n)o=t[n],(!e.type||o.type===e.type)&&o.name===e.name?this.removeEventListener(o.type,o.listener,o.options):t[++r]=o;++r?t.length=r:delete this.__on}}}function tk(e,t,n){return function(){var r=this.__on,s,o=Z2(t);if(r){for(var a=0,l=r.length;a<l;++a)if((s=r[a]).type===e.type&&s.name===e.name){this.removeEventListener(s.type,s.listener,s.options),this.addEventListener(s.type,s.listener=o,s.options=n),s.value=t;return}}this.addEventListener(e.type,o,n),s={type:e.type,name:e.name,value:t,listener:o,options:n},r?r.push(s):this.__on=[s]}}function nk(e,t,n){var r=J2(e+""),s,o=r.length,a;if(arguments.length<2){var l=this.node().__on;if(l){for(var u=0,c=l.length,d;u<c;++u)for(s=0,d=l[u];s<o;++s)if((a=r[s]).type===d.type&&a.name===d.name)return d.value}return}for(l=t?tk:ek,s=0;s<o;++s)this.each(l(r[s],t,n));return this}function P0(e,t,n){var r=C0(e),s=r.CustomEvent;typeof s=="function"?s=new s(t,n):(s=r.document.createEvent("Event"),n?(s.initEvent(t,n.bubbles,n.cancelable),s.detail=n.detail):s.initEvent(t,!1,!1)),e.dispatchEvent(s)}function rk(e,t){return function(){return P0(this,e,t)}}function sk(e,t){return function(){return P0(this,e,t.apply(this,arguments))}}function ok(e,t){return this.each((typeof t=="function"?sk:rk)(e,t))}function*ik(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],s=0,o=r.length,a;s<o;++s)(a=r[s])&&(yield a)}var I0=[null];function yt(e,t){this._groups=e,this._parents=t}function ki(){return new yt([[document.documentElement]],I0)}function ak(){return this}yt.prototype=ki.prototype={constructor:yt,select:Ij,selectAll:zj,selectChild:Vj,selectChildren:Wj,filter:qj,data:Zj,enter:Qj,exit:e2,join:t2,merge:n2,selection:ak,order:r2,sort:s2,call:i2,nodes:a2,node:l2,size:u2,empty:c2,each:d2,attr:y2,style:N2,property:S2,classed:R2,text:D2,html:L2,raise:$2,lower:H2,append:B2,insert:W2,remove:Q2,clone:Y2,datum:G2,on:nk,dispatch:ok,[Symbol.iterator]:ik};function ht(e){return typeof e=="string"?new yt([[document.querySelector(e)]],[document.documentElement]):new yt([[e]],I0)}function lk(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Dt(e,t){if(e=lk(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var s=t.getBoundingClientRect();return[e.clientX-s.left-t.clientLeft,e.clientY-s.top-t.clientTop]}}return[e.pageX,e.pageY]}const uk={passive:!1},si={capture:!0,passive:!1};function Ru(e){e.stopImmediatePropagation()}function ys(e){e.preventDefault(),e.stopImmediatePropagation()}function D0(e){var t=e.document.documentElement,n=ht(e).on("dragstart.drag",ys,si);"onselectstart"in t?n.on("selectstart.drag",ys,si):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function A0(e,t){var n=e.document.documentElement,r=ht(e).on("dragstart.drag",null);t&&(r.on("click.drag",ys,si),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const na=e=>()=>e;function Zc(e,{sourceEvent:t,subject:n,target:r,identifier:s,active:o,x:a,y:l,dx:u,dy:c,dispatch:d}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:s,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:a,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:u,enumerable:!0,configurable:!0},dy:{value:c,enumerable:!0,configurable:!0},_:{value:d}})}Zc.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function ck(e){return!e.ctrlKey&&!e.button}function dk(){return this.parentNode}function fk(e,t){return t??{x:e.x,y:e.y}}function mk(){return navigator.maxTouchPoints||"ontouchstart"in this}function O0(){var e=ck,t=dk,n=fk,r=mk,s={},o=Al("start","drag","end"),a=0,l,u,c,d,f=0;function m(v){v.on("mousedown.drag",y).filter(r).on("touchstart.drag",j).on("touchmove.drag",p,uk).on("touchend.drag touchcancel.drag",h).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function y(v,N){if(!(d||!e.call(this,v,N))){var k=g(this,t.call(this,v,N),v,N,"mouse");k&&(ht(v.view).on("mousemove.drag",x,si).on("mouseup.drag",w,si),D0(v.view),Ru(v),c=!1,l=v.clientX,u=v.clientY,k("start",v))}}function x(v){if(ys(v),!c){var N=v.clientX-l,k=v.clientY-u;c=N*N+k*k>f}s.mouse("drag",v)}function w(v){ht(v.view).on("mousemove.drag mouseup.drag",null),A0(v.view,c),ys(v),s.mouse("end",v)}function j(v,N){if(e.call(this,v,N)){var k=v.changedTouches,b=t.call(this,v,N),_=k.length,C,M;for(C=0;C<_;++C)(M=g(this,b,v,N,k[C].identifier,k[C]))&&(Ru(v),M("start",v,k[C]))}}function p(v){var N=v.changedTouches,k=N.length,b,_;for(b=0;b<k;++b)(_=s[N[b].identifier])&&(ys(v),_("drag",v,N[b]))}function h(v){var N=v.changedTouches,k=N.length,b,_;for(d&&clearTimeout(d),d=setTimeout(function(){d=null},500),b=0;b<k;++b)(_=s[N[b].identifier])&&(Ru(v),_("end",v,N[b]))}function g(v,N,k,b,_,C){var M=o.copy(),I=Dt(C||k,N),R,O,S;if((S=n.call(v,new Zc("beforestart",{sourceEvent:k,target:m,identifier:_,active:a,x:I[0],y:I[1],dx:0,dy:0,dispatch:M}),b))!=null)return R=S.x-I[0]||0,O=S.y-I[1]||0,function L(A,z,E){var P=I,F;switch(A){case"start":s[_]=L,F=a++;break;case"end":delete s[_],--a;case"drag":I=Dt(E||z,N),F=a;break}M.call(A,v,new Zc(A,{sourceEvent:z,subject:S,target:m,identifier:_,active:F,x:I[0]+R,y:I[1]+O,dx:I[0]-P[0],dy:I[1]-P[1],dispatch:M}),b)}}return m.filter=function(v){return arguments.length?(e=typeof v=="function"?v:na(!!v),m):e},m.container=function(v){return arguments.length?(t=typeof v=="function"?v:na(v),m):t},m.subject=function(v){return arguments.length?(n=typeof v=="function"?v:na(v),m):n},m.touchable=function(v){return arguments.length?(r=typeof v=="function"?v:na(!!v),m):r},m.on=function(){var v=o.on.apply(o,arguments);return v===o?m:v},m.clickDistance=function(v){return arguments.length?(f=(v=+v)*v,m):Math.sqrt(f)},m}function xf(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function z0(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function _i(){}var oi=.7,ol=1/oi,vs="\\s*([+-]?\\d+)\\s*",ii="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",nn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",hk=/^#([0-9a-f]{3,8})$/,pk=new RegExp(`^rgb\\(${vs},${vs},${vs}\\)$`),gk=new RegExp(`^rgb\\(${nn},${nn},${nn}\\)$`),xk=new RegExp(`^rgba\\(${vs},${vs},${vs},${ii}\\)$`),yk=new RegExp(`^rgba\\(${nn},${nn},${nn},${ii}\\)$`),vk=new RegExp(`^hsl\\(${ii},${nn},${nn}\\)$`),bk=new RegExp(`^hsla\\(${ii},${nn},${nn},${ii}\\)$`),xh={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};xf(_i,Lr,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:yh,formatHex:yh,formatHex8:wk,formatHsl:Nk,formatRgb:vh,toString:vh});function yh(){return this.rgb().formatHex()}function wk(){return this.rgb().formatHex8()}function Nk(){return L0(this).formatHsl()}function vh(){return this.rgb().formatRgb()}function Lr(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=hk.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?bh(t):n===3?new at(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?ra(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?ra(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=pk.exec(e))?new at(t[1],t[2],t[3],1):(t=gk.exec(e))?new at(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=xk.exec(e))?ra(t[1],t[2],t[3],t[4]):(t=yk.exec(e))?ra(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=vk.exec(e))?jh(t[1],t[2]/100,t[3]/100,1):(t=bk.exec(e))?jh(t[1],t[2]/100,t[3]/100,t[4]):xh.hasOwnProperty(e)?bh(xh[e]):e==="transparent"?new at(NaN,NaN,NaN,0):null}function bh(e){return new at(e>>16&255,e>>8&255,e&255,1)}function ra(e,t,n,r){return r<=0&&(e=t=n=NaN),new at(e,t,n,r)}function jk(e){return e instanceof _i||(e=Lr(e)),e?(e=e.rgb(),new at(e.r,e.g,e.b,e.opacity)):new at}function Jc(e,t,n,r){return arguments.length===1?jk(e):new at(e,t,n,r??1)}function at(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}xf(at,Jc,z0(_i,{brighter(e){return e=e==null?ol:Math.pow(ol,e),new at(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?oi:Math.pow(oi,e),new at(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new at(Tr(this.r),Tr(this.g),Tr(this.b),il(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:wh,formatHex:wh,formatHex8:kk,formatRgb:Nh,toString:Nh}));function wh(){return`#${gr(this.r)}${gr(this.g)}${gr(this.b)}`}function kk(){return`#${gr(this.r)}${gr(this.g)}${gr(this.b)}${gr((isNaN(this.opacity)?1:this.opacity)*255)}`}function Nh(){const e=il(this.opacity);return`${e===1?"rgb(":"rgba("}${Tr(this.r)}, ${Tr(this.g)}, ${Tr(this.b)}${e===1?")":`, ${e})`}`}function il(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Tr(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function gr(e){return e=Tr(e),(e<16?"0":"")+e.toString(16)}function jh(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Ot(e,t,n,r)}function L0(e){if(e instanceof Ot)return new Ot(e.h,e.s,e.l,e.opacity);if(e instanceof _i||(e=Lr(e)),!e)return new Ot;if(e instanceof Ot)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,s=Math.min(t,n,r),o=Math.max(t,n,r),a=NaN,l=o-s,u=(o+s)/2;return l?(t===o?a=(n-r)/l+(n<r)*6:n===o?a=(r-t)/l+2:a=(t-n)/l+4,l/=u<.5?o+s:2-o-s,a*=60):l=u>0&&u<1?0:a,new Ot(a,l,u,e.opacity)}function _k(e,t,n,r){return arguments.length===1?L0(e):new Ot(e,t,n,r??1)}function Ot(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}xf(Ot,_k,z0(_i,{brighter(e){return e=e==null?ol:Math.pow(ol,e),new Ot(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?oi:Math.pow(oi,e),new Ot(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,s=2*n-r;return new at(Mu(e>=240?e-240:e+120,s,r),Mu(e,s,r),Mu(e<120?e+240:e-120,s,r),this.opacity)},clamp(){return new Ot(kh(this.h),sa(this.s),sa(this.l),il(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=il(this.opacity);return`${e===1?"hsl(":"hsla("}${kh(this.h)}, ${sa(this.s)*100}%, ${sa(this.l)*100}%${e===1?")":`, ${e})`}`}}));function kh(e){return e=(e||0)%360,e<0?e+360:e}function sa(e){return Math.max(0,Math.min(1,e||0))}function Mu(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const yf=e=>()=>e;function Sk(e,t){return function(n){return e+n*t}}function Ck(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function Ek(e){return(e=+e)==1?F0:function(t,n){return n-t?Ck(t,n,e):yf(isNaN(t)?n:t)}}function F0(e,t){var n=t-e;return n?Sk(e,n):yf(isNaN(e)?t:e)}const al=function e(t){var n=Ek(t);function r(s,o){var a=n((s=Jc(s)).r,(o=Jc(o)).r),l=n(s.g,o.g),u=n(s.b,o.b),c=F0(s.opacity,o.opacity);return function(d){return s.r=a(d),s.g=l(d),s.b=u(d),s.opacity=c(d),s+""}}return r.gamma=e,r}(1);function Tk(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),s;return function(o){for(s=0;s<n;++s)r[s]=e[s]*(1-o)+t[s]*o;return r}}function Rk(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Mk(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,s=new Array(r),o=new Array(n),a;for(a=0;a<r;++a)s[a]=zo(e[a],t[a]);for(;a<n;++a)o[a]=t[a];return function(l){for(a=0;a<r;++a)o[a]=s[a](l);return o}}function Pk(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Zt(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Ik(e,t){var n={},r={},s;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(s in t)s in e?n[s]=zo(e[s],t[s]):r[s]=t[s];return function(o){for(s in n)r[s]=n[s](o);return r}}var ed=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Pu=new RegExp(ed.source,"g");function Dk(e){return function(){return e}}function Ak(e){return function(t){return e(t)+""}}function $0(e,t){var n=ed.lastIndex=Pu.lastIndex=0,r,s,o,a=-1,l=[],u=[];for(e=e+"",t=t+"";(r=ed.exec(e))&&(s=Pu.exec(t));)(o=s.index)>n&&(o=t.slice(n,o),l[a]?l[a]+=o:l[++a]=o),(r=r[0])===(s=s[0])?l[a]?l[a]+=s:l[++a]=s:(l[++a]=null,u.push({i:a,x:Zt(r,s)})),n=Pu.lastIndex;return n<t.length&&(o=t.slice(n),l[a]?l[a]+=o:l[++a]=o),l.length<2?u[0]?Ak(u[0].x):Dk(t):(t=u.length,function(c){for(var d=0,f;d<t;++d)l[(f=u[d]).i]=f.x(c);return l.join("")})}function zo(e,t){var n=typeof t,r;return t==null||n==="boolean"?yf(t):(n==="number"?Zt:n==="string"?(r=Lr(t))?(t=r,al):$0:t instanceof Lr?al:t instanceof Date?Pk:Rk(t)?Tk:Array.isArray(t)?Mk:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Ik:Zt)(e,t)}var _h=180/Math.PI,td={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function V0(e,t,n,r,s,o){var a,l,u;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(l=Math.sqrt(n*n+r*r))&&(n/=l,r/=l,u/=l),e*r<t*n&&(e=-e,t=-t,u=-u,a=-a),{translateX:s,translateY:o,rotate:Math.atan2(t,e)*_h,skewX:Math.atan(u)*_h,scaleX:a,scaleY:l}}var oa;function Ok(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?td:V0(t.a,t.b,t.c,t.d,t.e,t.f)}function zk(e){return e==null||(oa||(oa=document.createElementNS("http://www.w3.org/2000/svg","g")),oa.setAttribute("transform",e),!(e=oa.transform.baseVal.consolidate()))?td:(e=e.matrix,V0(e.a,e.b,e.c,e.d,e.e,e.f))}function H0(e,t,n,r){function s(c){return c.length?c.pop()+" ":""}function o(c,d,f,m,y,x){if(c!==f||d!==m){var w=y.push("translate(",null,t,null,n);x.push({i:w-4,x:Zt(c,f)},{i:w-2,x:Zt(d,m)})}else(f||m)&&y.push("translate("+f+t+m+n)}function a(c,d,f,m){c!==d?(c-d>180?d+=360:d-c>180&&(c+=360),m.push({i:f.push(s(f)+"rotate(",null,r)-2,x:Zt(c,d)})):d&&f.push(s(f)+"rotate("+d+r)}function l(c,d,f,m){c!==d?m.push({i:f.push(s(f)+"skewX(",null,r)-2,x:Zt(c,d)}):d&&f.push(s(f)+"skewX("+d+r)}function u(c,d,f,m,y,x){if(c!==f||d!==m){var w=y.push(s(y)+"scale(",null,",",null,")");x.push({i:w-4,x:Zt(c,f)},{i:w-2,x:Zt(d,m)})}else(f!==1||m!==1)&&y.push(s(y)+"scale("+f+","+m+")")}return function(c,d){var f=[],m=[];return c=e(c),d=e(d),o(c.translateX,c.translateY,d.translateX,d.translateY,f,m),a(c.rotate,d.rotate,f,m),l(c.skewX,d.skewX,f,m),u(c.scaleX,c.scaleY,d.scaleX,d.scaleY,f,m),c=d=null,function(y){for(var x=-1,w=m.length,j;++x<w;)f[(j=m[x]).i]=j.x(y);return f.join("")}}}var Lk=H0(Ok,"px, ","px)","deg)"),Fk=H0(zk,", ",")",")"),$k=1e-12;function Sh(e){return((e=Math.exp(e))+1/e)/2}function Vk(e){return((e=Math.exp(e))-1/e)/2}function Hk(e){return((e=Math.exp(2*e))-1)/(e+1)}const Sa=function e(t,n,r){function s(o,a){var l=o[0],u=o[1],c=o[2],d=a[0],f=a[1],m=a[2],y=d-l,x=f-u,w=y*y+x*x,j,p;if(w<$k)p=Math.log(m/c)/t,j=function(b){return[l+b*y,u+b*x,c*Math.exp(t*b*p)]};else{var h=Math.sqrt(w),g=(m*m-c*c+r*w)/(2*c*n*h),v=(m*m-c*c-r*w)/(2*m*n*h),N=Math.log(Math.sqrt(g*g+1)-g),k=Math.log(Math.sqrt(v*v+1)-v);p=(k-N)/t,j=function(b){var _=b*p,C=Sh(N),M=c/(n*h)*(C*Hk(t*_+N)-Vk(N));return[l+M*y,u+M*x,c*C/Sh(t*_+N)]}}return j.duration=p*1e3*t/Math.SQRT2,j}return s.rho=function(o){var a=Math.max(.001,+o),l=a*a,u=l*l;return e(a,l,u)},s}(Math.SQRT2,2,4);var Vs=0,So=0,yo=0,B0=1e3,ll,Co,ul=0,Fr=0,zl=0,ai=typeof performance=="object"&&performance.now?performance:Date,U0=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function vf(){return Fr||(U0(Bk),Fr=ai.now()+zl)}function Bk(){Fr=0}function cl(){this._call=this._time=this._next=null}cl.prototype=W0.prototype={constructor:cl,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?vf():+n)+(t==null?0:+t),!this._next&&Co!==this&&(Co?Co._next=this:ll=this,Co=this),this._call=e,this._time=n,nd()},stop:function(){this._call&&(this._call=null,this._time=1/0,nd())}};function W0(e,t,n){var r=new cl;return r.restart(e,t,n),r}function Uk(){vf(),++Vs;for(var e=ll,t;e;)(t=Fr-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Vs}function Ch(){Fr=(ul=ai.now())+zl,Vs=So=0;try{Uk()}finally{Vs=0,qk(),Fr=0}}function Wk(){var e=ai.now(),t=e-ul;t>B0&&(zl-=t,ul=e)}function qk(){for(var e,t=ll,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:ll=n);Co=e,nd(r)}function nd(e){if(!Vs){So&&(So=clearTimeout(So));var t=e-Fr;t>24?(e<1/0&&(So=setTimeout(Ch,e-ai.now()-zl)),yo&&(yo=clearInterval(yo))):(yo||(ul=ai.now(),yo=setInterval(Wk,B0)),Vs=1,U0(Ch))}}function Eh(e,t,n){var r=new cl;return t=t==null?0:+t,r.restart(s=>{r.stop(),e(s+t)},t,n),r}var Qk=Al("start","end","cancel","interrupt"),Xk=[],q0=0,Th=1,rd=2,Ca=3,Rh=4,sd=5,Ea=6;function Ll(e,t,n,r,s,o){var a=e.__transition;if(!a)e.__transition={};else if(n in a)return;Kk(e,n,{name:t,index:r,group:s,on:Qk,tween:Xk,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:q0})}function bf(e,t){var n=Bt(e,t);if(n.state>q0)throw new Error("too late; already scheduled");return n}function on(e,t){var n=Bt(e,t);if(n.state>Ca)throw new Error("too late; already running");return n}function Bt(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Kk(e,t,n){var r=e.__transition,s;r[t]=n,n.timer=W0(o,0,n.time);function o(c){n.state=Th,n.timer.restart(a,n.delay,n.time),n.delay<=c&&a(c-n.delay)}function a(c){var d,f,m,y;if(n.state!==Th)return u();for(d in r)if(y=r[d],y.name===n.name){if(y.state===Ca)return Eh(a);y.state===Rh?(y.state=Ea,y.timer.stop(),y.on.call("interrupt",e,e.__data__,y.index,y.group),delete r[d]):+d<t&&(y.state=Ea,y.timer.stop(),y.on.call("cancel",e,e.__data__,y.index,y.group),delete r[d])}if(Eh(function(){n.state===Ca&&(n.state=Rh,n.timer.restart(l,n.delay,n.time),l(c))}),n.state=rd,n.on.call("start",e,e.__data__,n.index,n.group),n.state===rd){for(n.state=Ca,s=new Array(m=n.tween.length),d=0,f=-1;d<m;++d)(y=n.tween[d].value.call(e,e.__data__,n.index,n.group))&&(s[++f]=y);s.length=f+1}}function l(c){for(var d=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(u),n.state=sd,1),f=-1,m=s.length;++f<m;)s[f].call(e,d);n.state===sd&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){n.state=Ea,n.timer.stop(),delete r[t];for(var c in r)return;delete e.__transition}}function Ta(e,t){var n=e.__transition,r,s,o=!0,a;if(n){t=t==null?null:t+"";for(a in n){if((r=n[a]).name!==t){o=!1;continue}s=r.state>rd&&r.state<sd,r.state=Ea,r.timer.stop(),r.on.call(s?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[a]}o&&delete e.__transition}}function Yk(e){return this.each(function(){Ta(this,e)})}function Gk(e,t){var n,r;return function(){var s=on(this,e),o=s.tween;if(o!==n){r=n=o;for(var a=0,l=r.length;a<l;++a)if(r[a].name===t){r=r.slice(),r.splice(a,1);break}}s.tween=r}}function Zk(e,t,n){var r,s;if(typeof n!="function")throw new Error;return function(){var o=on(this,e),a=o.tween;if(a!==r){s=(r=a).slice();for(var l={name:t,value:n},u=0,c=s.length;u<c;++u)if(s[u].name===t){s[u]=l;break}u===c&&s.push(l)}o.tween=s}}function Jk(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=Bt(this.node(),n).tween,s=0,o=r.length,a;s<o;++s)if((a=r[s]).name===e)return a.value;return null}return this.each((t==null?Gk:Zk)(n,e,t))}function wf(e,t,n){var r=e._id;return e.each(function(){var s=on(this,r);(s.value||(s.value={}))[t]=n.apply(this,arguments)}),function(s){return Bt(s,r).value[t]}}function Q0(e,t){var n;return(typeof t=="number"?Zt:t instanceof Lr?al:(n=Lr(t))?(t=n,al):$0)(e,t)}function e_(e){return function(){this.removeAttribute(e)}}function t_(e){return function(){this.removeAttributeNS(e.space,e.local)}}function n_(e,t,n){var r,s=n+"",o;return function(){var a=this.getAttribute(e);return a===s?null:a===r?o:o=t(r=a,n)}}function r_(e,t,n){var r,s=n+"",o;return function(){var a=this.getAttributeNS(e.space,e.local);return a===s?null:a===r?o:o=t(r=a,n)}}function s_(e,t,n){var r,s,o;return function(){var a,l=n(this),u;return l==null?void this.removeAttribute(e):(a=this.getAttribute(e),u=l+"",a===u?null:a===r&&u===s?o:(s=u,o=t(r=a,l)))}}function o_(e,t,n){var r,s,o;return function(){var a,l=n(this),u;return l==null?void this.removeAttributeNS(e.space,e.local):(a=this.getAttributeNS(e.space,e.local),u=l+"",a===u?null:a===r&&u===s?o:(s=u,o=t(r=a,l)))}}function i_(e,t){var n=Ol(e),r=n==="transform"?Fk:Q0;return this.attrTween(e,typeof t=="function"?(n.local?o_:s_)(n,r,wf(this,"attr."+e,t)):t==null?(n.local?t_:e_)(n):(n.local?r_:n_)(n,r,t))}function a_(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function l_(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function u_(e,t){var n,r;function s(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&l_(e,o)),n}return s._value=t,s}function c_(e,t){var n,r;function s(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&a_(e,o)),n}return s._value=t,s}function d_(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=Ol(e);return this.tween(n,(r.local?u_:c_)(r,t))}function f_(e,t){return function(){bf(this,e).delay=+t.apply(this,arguments)}}function m_(e,t){return t=+t,function(){bf(this,e).delay=t}}function h_(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?f_:m_)(t,e)):Bt(this.node(),t).delay}function p_(e,t){return function(){on(this,e).duration=+t.apply(this,arguments)}}function g_(e,t){return t=+t,function(){on(this,e).duration=t}}function x_(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?p_:g_)(t,e)):Bt(this.node(),t).duration}function y_(e,t){if(typeof t!="function")throw new Error;return function(){on(this,e).ease=t}}function v_(e){var t=this._id;return arguments.length?this.each(y_(t,e)):Bt(this.node(),t).ease}function b_(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;on(this,e).ease=n}}function w_(e){if(typeof e!="function")throw new Error;return this.each(b_(this._id,e))}function N_(e){typeof e!="function"&&(e=k0(e));for(var t=this._groups,n=t.length,r=new Array(n),s=0;s<n;++s)for(var o=t[s],a=o.length,l=r[s]=[],u,c=0;c<a;++c)(u=o[c])&&e.call(u,u.__data__,c,o)&&l.push(u);return new Nn(r,this._parents,this._name,this._id)}function j_(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,s=n.length,o=Math.min(r,s),a=new Array(r),l=0;l<o;++l)for(var u=t[l],c=n[l],d=u.length,f=a[l]=new Array(d),m,y=0;y<d;++y)(m=u[y]||c[y])&&(f[y]=m);for(;l<r;++l)a[l]=t[l];return new Nn(a,this._parents,this._name,this._id)}function k_(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function __(e,t,n){var r,s,o=k_(t)?bf:on;return function(){var a=o(this,e),l=a.on;l!==r&&(s=(r=l).copy()).on(t,n),a.on=s}}function S_(e,t){var n=this._id;return arguments.length<2?Bt(this.node(),n).on.on(e):this.each(__(n,e,t))}function C_(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function E_(){return this.on("end.remove",C_(this._id))}function T_(e){var t=this._name,n=this._id;typeof e!="function"&&(e=pf(e));for(var r=this._groups,s=r.length,o=new Array(s),a=0;a<s;++a)for(var l=r[a],u=l.length,c=o[a]=new Array(u),d,f,m=0;m<u;++m)(d=l[m])&&(f=e.call(d,d.__data__,m,l))&&("__data__"in d&&(f.__data__=d.__data__),c[m]=f,Ll(c[m],t,n,m,c,Bt(d,n)));return new Nn(o,this._parents,t,n)}function R_(e){var t=this._name,n=this._id;typeof e!="function"&&(e=j0(e));for(var r=this._groups,s=r.length,o=[],a=[],l=0;l<s;++l)for(var u=r[l],c=u.length,d,f=0;f<c;++f)if(d=u[f]){for(var m=e.call(d,d.__data__,f,u),y,x=Bt(d,n),w=0,j=m.length;w<j;++w)(y=m[w])&&Ll(y,t,n,w,m,x);o.push(m),a.push(d)}return new Nn(o,a,t,n)}var M_=ki.prototype.constructor;function P_(){return new M_(this._groups,this._parents)}function I_(e,t){var n,r,s;return function(){var o=$s(this,e),a=(this.style.removeProperty(e),$s(this,e));return o===a?null:o===n&&a===r?s:s=t(n=o,r=a)}}function X0(e){return function(){this.style.removeProperty(e)}}function D_(e,t,n){var r,s=n+"",o;return function(){var a=$s(this,e);return a===s?null:a===r?o:o=t(r=a,n)}}function A_(e,t,n){var r,s,o;return function(){var a=$s(this,e),l=n(this),u=l+"";return l==null&&(u=l=(this.style.removeProperty(e),$s(this,e))),a===u?null:a===r&&u===s?o:(s=u,o=t(r=a,l))}}function O_(e,t){var n,r,s,o="style."+t,a="end."+o,l;return function(){var u=on(this,e),c=u.on,d=u.value[o]==null?l||(l=X0(t)):void 0;(c!==n||s!==d)&&(r=(n=c).copy()).on(a,s=d),u.on=r}}function z_(e,t,n){var r=(e+="")=="transform"?Lk:Q0;return t==null?this.styleTween(e,I_(e,r)).on("end.style."+e,X0(e)):typeof t=="function"?this.styleTween(e,A_(e,r,wf(this,"style."+e,t))).each(O_(this._id,e)):this.styleTween(e,D_(e,r,t),n).on("end.style."+e,null)}function L_(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function F_(e,t,n){var r,s;function o(){var a=t.apply(this,arguments);return a!==s&&(r=(s=a)&&L_(e,a,n)),r}return o._value=t,o}function $_(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,F_(e,t,n??""))}function V_(e){return function(){this.textContent=e}}function H_(e){return function(){var t=e(this);this.textContent=t??""}}function B_(e){return this.tween("text",typeof e=="function"?H_(wf(this,"text",e)):V_(e==null?"":e+""))}function U_(e){return function(t){this.textContent=e.call(this,t)}}function W_(e){var t,n;function r(){var s=e.apply(this,arguments);return s!==n&&(t=(n=s)&&U_(s)),t}return r._value=e,r}function q_(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,W_(e))}function Q_(){for(var e=this._name,t=this._id,n=K0(),r=this._groups,s=r.length,o=0;o<s;++o)for(var a=r[o],l=a.length,u,c=0;c<l;++c)if(u=a[c]){var d=Bt(u,t);Ll(u,e,n,c,a,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new Nn(r,this._parents,e,n)}function X_(){var e,t,n=this,r=n._id,s=n.size();return new Promise(function(o,a){var l={value:a},u={value:function(){--s===0&&o()}};n.each(function(){var c=on(this,r),d=c.on;d!==e&&(t=(e=d).copy(),t._.cancel.push(l),t._.interrupt.push(l),t._.end.push(u)),c.on=t}),s===0&&o()})}var K_=0;function Nn(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function K0(){return++K_}var ln=ki.prototype;Nn.prototype={constructor:Nn,select:T_,selectAll:R_,selectChild:ln.selectChild,selectChildren:ln.selectChildren,filter:N_,merge:j_,selection:P_,transition:Q_,call:ln.call,nodes:ln.nodes,node:ln.node,size:ln.size,empty:ln.empty,each:ln.each,on:S_,attr:i_,attrTween:d_,style:z_,styleTween:$_,text:B_,textTween:q_,remove:E_,tween:Jk,delay:h_,duration:x_,ease:v_,easeVarying:w_,end:X_,[Symbol.iterator]:ln[Symbol.iterator]};function Y_(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var G_={time:null,delay:0,duration:250,ease:Y_};function Z_(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function J_(e){var t,n;e instanceof Nn?(t=e._id,e=e._name):(t=K0(),(n=G_).time=vf(),e=e==null?null:e+"");for(var r=this._groups,s=r.length,o=0;o<s;++o)for(var a=r[o],l=a.length,u,c=0;c<l;++c)(u=a[c])&&Ll(u,e,t,c,a,n||Z_(u,t));return new Nn(r,this._parents,e,t)}ki.prototype.interrupt=Yk;ki.prototype.transition=J_;const ia=e=>()=>e;function eS(e,{sourceEvent:t,target:n,transform:r,dispatch:s}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:s}})}function gn(e,t,n){this.k=e,this.x=t,this.y=n}gn.prototype={constructor:gn,scale:function(e){return e===1?this:new gn(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new gn(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Fl=new gn(1,0,0);Y0.prototype=gn.prototype;function Y0(e){for(;!e.__zoom;)if(!(e=e.parentNode))return Fl;return e.__zoom}function Iu(e){e.stopImmediatePropagation()}function vo(e){e.preventDefault(),e.stopImmediatePropagation()}function tS(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function nS(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Mh(){return this.__zoom||Fl}function rS(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function sS(){return navigator.maxTouchPoints||"ontouchstart"in this}function oS(e,t,n){var r=e.invertX(t[0][0])-n[0][0],s=e.invertX(t[1][0])-n[1][0],o=e.invertY(t[0][1])-n[0][1],a=e.invertY(t[1][1])-n[1][1];return e.translate(s>r?(r+s)/2:Math.min(0,r)||Math.max(0,s),a>o?(o+a)/2:Math.min(0,o)||Math.max(0,a))}function G0(){var e=tS,t=nS,n=oS,r=rS,s=sS,o=[0,1/0],a=[[-1/0,-1/0],[1/0,1/0]],l=250,u=Sa,c=Al("start","zoom","end"),d,f,m,y=500,x=150,w=0,j=10;function p(S){S.property("__zoom",Mh).on("wheel.zoom",_,{passive:!1}).on("mousedown.zoom",C).on("dblclick.zoom",M).filter(s).on("touchstart.zoom",I).on("touchmove.zoom",R).on("touchend.zoom touchcancel.zoom",O).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}p.transform=function(S,L,A,z){var E=S.selection?S.selection():S;E.property("__zoom",Mh),S!==E?N(S,L,A,z):E.interrupt().each(function(){k(this,arguments).event(z).start().zoom(null,typeof L=="function"?L.apply(this,arguments):L).end()})},p.scaleBy=function(S,L,A,z){p.scaleTo(S,function(){var E=this.__zoom.k,P=typeof L=="function"?L.apply(this,arguments):L;return E*P},A,z)},p.scaleTo=function(S,L,A,z){p.transform(S,function(){var E=t.apply(this,arguments),P=this.__zoom,F=A==null?v(E):typeof A=="function"?A.apply(this,arguments):A,V=P.invert(F),H=typeof L=="function"?L.apply(this,arguments):L;return n(g(h(P,H),F,V),E,a)},A,z)},p.translateBy=function(S,L,A,z){p.transform(S,function(){return n(this.__zoom.translate(typeof L=="function"?L.apply(this,arguments):L,typeof A=="function"?A.apply(this,arguments):A),t.apply(this,arguments),a)},null,z)},p.translateTo=function(S,L,A,z,E){p.transform(S,function(){var P=t.apply(this,arguments),F=this.__zoom,V=z==null?v(P):typeof z=="function"?z.apply(this,arguments):z;return n(Fl.translate(V[0],V[1]).scale(F.k).translate(typeof L=="function"?-L.apply(this,arguments):-L,typeof A=="function"?-A.apply(this,arguments):-A),P,a)},z,E)};function h(S,L){return L=Math.max(o[0],Math.min(o[1],L)),L===S.k?S:new gn(L,S.x,S.y)}function g(S,L,A){var z=L[0]-A[0]*S.k,E=L[1]-A[1]*S.k;return z===S.x&&E===S.y?S:new gn(S.k,z,E)}function v(S){return[(+S[0][0]+ +S[1][0])/2,(+S[0][1]+ +S[1][1])/2]}function N(S,L,A,z){S.on("start.zoom",function(){k(this,arguments).event(z).start()}).on("interrupt.zoom end.zoom",function(){k(this,arguments).event(z).end()}).tween("zoom",function(){var E=this,P=arguments,F=k(E,P).event(z),V=t.apply(E,P),H=A==null?v(V):typeof A=="function"?A.apply(E,P):A,q=Math.max(V[1][0]-V[0][0],V[1][1]-V[0][1]),U=E.__zoom,K=typeof L=="function"?L.apply(E,P):L,Y=u(U.invert(H).concat(q/U.k),K.invert(H).concat(q/K.k));return function(Z){if(Z===1)Z=K;else{var W=Y(Z),ee=q/W[2];Z=new gn(ee,H[0]-W[0]*ee,H[1]-W[1]*ee)}F.zoom(null,Z)}})}function k(S,L,A){return!A&&S.__zooming||new b(S,L)}function b(S,L){this.that=S,this.args=L,this.active=0,this.sourceEvent=null,this.extent=t.apply(S,L),this.taps=0}b.prototype={event:function(S){return S&&(this.sourceEvent=S),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(S,L){return this.mouse&&S!=="mouse"&&(this.mouse[1]=L.invert(this.mouse[0])),this.touch0&&S!=="touch"&&(this.touch0[1]=L.invert(this.touch0[0])),this.touch1&&S!=="touch"&&(this.touch1[1]=L.invert(this.touch1[0])),this.that.__zoom=L,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(S){var L=ht(this.that).datum();c.call(S,this.that,new eS(S,{sourceEvent:this.sourceEvent,target:p,transform:this.that.__zoom,dispatch:c}),L)}};function _(S,...L){if(!e.apply(this,arguments))return;var A=k(this,L).event(S),z=this.__zoom,E=Math.max(o[0],Math.min(o[1],z.k*Math.pow(2,r.apply(this,arguments)))),P=Dt(S);if(A.wheel)(A.mouse[0][0]!==P[0]||A.mouse[0][1]!==P[1])&&(A.mouse[1]=z.invert(A.mouse[0]=P)),clearTimeout(A.wheel);else{if(z.k===E)return;A.mouse=[P,z.invert(P)],Ta(this),A.start()}vo(S),A.wheel=setTimeout(F,x),A.zoom("mouse",n(g(h(z,E),A.mouse[0],A.mouse[1]),A.extent,a));function F(){A.wheel=null,A.end()}}function C(S,...L){if(m||!e.apply(this,arguments))return;var A=S.currentTarget,z=k(this,L,!0).event(S),E=ht(S.view).on("mousemove.zoom",H,!0).on("mouseup.zoom",q,!0),P=Dt(S,A),F=S.clientX,V=S.clientY;D0(S.view),Iu(S),z.mouse=[P,this.__zoom.invert(P)],Ta(this),z.start();function H(U){if(vo(U),!z.moved){var K=U.clientX-F,Y=U.clientY-V;z.moved=K*K+Y*Y>w}z.event(U).zoom("mouse",n(g(z.that.__zoom,z.mouse[0]=Dt(U,A),z.mouse[1]),z.extent,a))}function q(U){E.on("mousemove.zoom mouseup.zoom",null),A0(U.view,z.moved),vo(U),z.event(U).end()}}function M(S,...L){if(e.apply(this,arguments)){var A=this.__zoom,z=Dt(S.changedTouches?S.changedTouches[0]:S,this),E=A.invert(z),P=A.k*(S.shiftKey?.5:2),F=n(g(h(A,P),z,E),t.apply(this,L),a);vo(S),l>0?ht(this).transition().duration(l).call(N,F,z,S):ht(this).call(p.transform,F,z,S)}}function I(S,...L){if(e.apply(this,arguments)){var A=S.touches,z=A.length,E=k(this,L,S.changedTouches.length===z).event(S),P,F,V,H;for(Iu(S),F=0;F<z;++F)V=A[F],H=Dt(V,this),H=[H,this.__zoom.invert(H),V.identifier],E.touch0?!E.touch1&&E.touch0[2]!==H[2]&&(E.touch1=H,E.taps=0):(E.touch0=H,P=!0,E.taps=1+!!d);d&&(d=clearTimeout(d)),P&&(E.taps<2&&(f=H[0],d=setTimeout(function(){d=null},y)),Ta(this),E.start())}}function R(S,...L){if(this.__zooming){var A=k(this,L).event(S),z=S.changedTouches,E=z.length,P,F,V,H;for(vo(S),P=0;P<E;++P)F=z[P],V=Dt(F,this),A.touch0&&A.touch0[2]===F.identifier?A.touch0[0]=V:A.touch1&&A.touch1[2]===F.identifier&&(A.touch1[0]=V);if(F=A.that.__zoom,A.touch1){var q=A.touch0[0],U=A.touch0[1],K=A.touch1[0],Y=A.touch1[1],Z=(Z=K[0]-q[0])*Z+(Z=K[1]-q[1])*Z,W=(W=Y[0]-U[0])*W+(W=Y[1]-U[1])*W;F=h(F,Math.sqrt(Z/W)),V=[(q[0]+K[0])/2,(q[1]+K[1])/2],H=[(U[0]+Y[0])/2,(U[1]+Y[1])/2]}else if(A.touch0)V=A.touch0[0],H=A.touch0[1];else return;A.zoom("touch",n(g(F,V,H),A.extent,a))}}function O(S,...L){if(this.__zooming){var A=k(this,L).event(S),z=S.changedTouches,E=z.length,P,F;for(Iu(S),m&&clearTimeout(m),m=setTimeout(function(){m=null},y),P=0;P<E;++P)F=z[P],A.touch0&&A.touch0[2]===F.identifier?delete A.touch0:A.touch1&&A.touch1[2]===F.identifier&&delete A.touch1;if(A.touch1&&!A.touch0&&(A.touch0=A.touch1,delete A.touch1),A.touch0)A.touch0[1]=this.__zoom.invert(A.touch0[0]);else if(A.end(),A.taps===2&&(F=Dt(F,this),Math.hypot(f[0]-F[0],f[1]-F[1])<j)){var V=ht(this).on("dblclick.zoom");V&&V.apply(this,arguments)}}}return p.wheelDelta=function(S){return arguments.length?(r=typeof S=="function"?S:ia(+S),p):r},p.filter=function(S){return arguments.length?(e=typeof S=="function"?S:ia(!!S),p):e},p.touchable=function(S){return arguments.length?(s=typeof S=="function"?S:ia(!!S),p):s},p.extent=function(S){return arguments.length?(t=typeof S=="function"?S:ia([[+S[0][0],+S[0][1]],[+S[1][0],+S[1][1]]]),p):t},p.scaleExtent=function(S){return arguments.length?(o[0]=+S[0],o[1]=+S[1],p):[o[0],o[1]]},p.translateExtent=function(S){return arguments.length?(a[0][0]=+S[0][0],a[1][0]=+S[1][0],a[0][1]=+S[0][1],a[1][1]=+S[1][1],p):[[a[0][0],a[0][1]],[a[1][0],a[1][1]]]},p.constrain=function(S){return arguments.length?(n=S,p):n},p.duration=function(S){return arguments.length?(l=+S,p):l},p.interpolate=function(S){return arguments.length?(u=S,p):u},p.on=function(){var S=c.on.apply(c,arguments);return S===c?p:S},p.clickDistance=function(S){return arguments.length?(w=(S=+S)*S,p):Math.sqrt(w)},p.tapDistance=function(S){return arguments.length?(j=+S,p):j},p}const rn={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,{id:t,sourceHandle:n,targetHandle:r})=>`Couldn't create edge for ${e} handle id: "${e==="source"?n:r}", edge id: ${t}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(e="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${e}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},li=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Z0=["Enter"," ","Escape"],J0={"node.a11yDescription.default":"Press enter or space to select a node. Press delete to remove it and escape to cancel.","node.a11yDescription.keyboardDisabled":"Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.","node.a11yDescription.ariaLiveMessage":({direction:e,x:t,y:n})=>`Moved selected node ${e}. New position, x: ${t}, y: ${n}`,"edge.a11yDescription.default":"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.","controls.ariaLabel":"Control Panel","controls.zoomIn.ariaLabel":"Zoom In","controls.zoomOut.ariaLabel":"Zoom Out","controls.fitView.ariaLabel":"Fit View","controls.interactive.ariaLabel":"Toggle Interactivity","minimap.ariaLabel":"Mini Map","handle.ariaLabel":"Handle"};var Hs;(function(e){e.Strict="strict",e.Loose="loose"})(Hs||(Hs={}));var Rr;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(Rr||(Rr={}));var ui;(function(e){e.Partial="partial",e.Full="full"})(ui||(ui={}));const ey={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null,pointer:null};var Dn;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(Dn||(Dn={}));var dl;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(dl||(dl={}));var G;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(G||(G={}));const Ph={[G.Left]:G.Right,[G.Right]:G.Left,[G.Top]:G.Bottom,[G.Bottom]:G.Top};function ty(e){return e===null?null:e?"valid":"invalid"}const ny=e=>"id"in e&&"source"in e&&"target"in e,iS=e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e),Nf=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),Js=(e,t,n)=>{if(!e.id)return[];const r=new Set;return n.forEach(s=>{s.target===e.id&&r.add(s.source)}),t.filter(s=>r.has(s.id))},Si=(e,t=[0,0])=>{const{width:n,height:r}=kn(e),s=e.origin??t,o=n*s[0],a=r*s[1];return{x:e.position.x-o,y:e.position.y-a}},aS=(e,t={nodeOrigin:[0,0]})=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((r,s)=>{const o=typeof s=="string";let a=!t.nodeLookup&&!o?s:void 0;t.nodeLookup&&(a=o?t.nodeLookup.get(s):Nf(s)?s:t.nodeLookup.get(s.id));const l=a?fl(a,t.nodeOrigin):{x:0,y:0,x2:0,y2:0};return $l(r,l)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Vl(n)},Ci=(e,t={})=>{let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0},r=!1;return e.forEach(s=>{(t.filter===void 0||t.filter(s))&&(n=$l(n,fl(s)),r=!0)}),r?Vl(n):{x:0,y:0,width:0,height:0}},jf=(e,t,[n,r,s]=[0,0,1],o=!1,a=!1)=>{const l={...Ti(t,[n,r,s]),width:t.width/s,height:t.height/s},u=[];for(const c of e.values()){const{measured:d,selectable:f=!0,hidden:m=!1}=c;if(a&&!f||m)continue;const y=d.width??c.width??c.initialWidth??null,x=d.height??c.height??c.initialHeight??null,w=ci(l,Us(c)),j=(y??0)*(x??0),p=o&&w>0;(!c.internals.handleBounds||p||w>=j||c.dragging)&&u.push(c)}return u},lS=(e,t)=>{const n=new Set;return e.forEach(r=>{n.add(r.id)}),t.filter(r=>n.has(r.source)||n.has(r.target))};function uS(e,t){const n=new Map,r=t!=null&&t.nodes?new Set(t.nodes.map(s=>s.id)):null;return e.forEach(s=>{s.measured.width&&s.measured.height&&((t==null?void 0:t.includeHiddenNodes)||!s.hidden)&&(!r||r.has(s.id))&&n.set(s.id,s)}),n}async function cS({nodes:e,width:t,height:n,panZoom:r,minZoom:s,maxZoom:o},a){if(e.size===0)return Promise.resolve(!0);const l=uS(e,a),u=Ci(l),c=kf(u,t,n,(a==null?void 0:a.minZoom)??s,(a==null?void 0:a.maxZoom)??o,(a==null?void 0:a.padding)??.1);return await r.setViewport(c,{duration:a==null?void 0:a.duration,ease:a==null?void 0:a.ease,interpolate:a==null?void 0:a.interpolate}),Promise.resolve(!0)}function ry({nodeId:e,nextPosition:t,nodeLookup:n,nodeOrigin:r=[0,0],nodeExtent:s,onError:o}){const a=n.get(e),l=a.parentId?n.get(a.parentId):void 0,{x:u,y:c}=l?l.internals.positionAbsolute:{x:0,y:0},d=a.origin??r;let f=a.extent||s;if(a.extent==="parent"&&!a.expandParent)if(!l)o==null||o("005",rn.error005());else{const y=l.measured.width,x=l.measured.height;y&&x&&(f=[[u,c],[u+y,c+x]])}else l&&Ws(a.extent)&&(f=[[a.extent[0][0]+u,a.extent[0][1]+c],[a.extent[1][0]+u,a.extent[1][1]+c]]);const m=Ws(f)?$r(t,f,a.measured):t;return(a.measured.width===void 0||a.measured.height===void 0)&&(o==null||o("015",rn.error015())),{position:{x:m.x-u+(a.measured.width??0)*d[0],y:m.y-c+(a.measured.height??0)*d[1]},positionAbsolute:m}}async function dS({nodesToRemove:e=[],edgesToRemove:t=[],nodes:n,edges:r,onBeforeDelete:s}){const o=new Set(e.map(m=>m.id)),a=[];for(const m of n){if(m.deletable===!1)continue;const y=o.has(m.id),x=!y&&m.parentId&&a.find(w=>w.id===m.parentId);(y||x)&&a.push(m)}const l=new Set(t.map(m=>m.id)),u=r.filter(m=>m.deletable!==!1),d=lS(a,u);for(const m of u)l.has(m.id)&&!d.find(x=>x.id===m.id)&&d.push(m);if(!s)return{edges:d,nodes:a};const f=await s({nodes:a,edges:d});return typeof f=="boolean"?f?{edges:d,nodes:a}:{edges:[],nodes:[]}:f}const Bs=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),$r=(e={x:0,y:0},t,n)=>({x:Bs(e.x,t[0][0],t[1][0]-((n==null?void 0:n.width)??0)),y:Bs(e.y,t[0][1],t[1][1]-((n==null?void 0:n.height)??0))});function sy(e,t,n){const{width:r,height:s}=kn(n),{x:o,y:a}=n.internals.positionAbsolute;return $r(e,[[o,a],[o+r,a+s]],t)}const Ih=(e,t,n)=>e<t?Bs(Math.abs(e-t),1,t)/t:e>n?-Bs(Math.abs(e-n),1,t)/t:0,oy=(e,t,n=15,r=40)=>{const s=Ih(e.x,r,t.width-r)*n,o=Ih(e.y,r,t.height-r)*n;return[s,o]},$l=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),od=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),Vl=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),Us=(e,t=[0,0])=>{var s,o;const{x:n,y:r}=Nf(e)?e.internals.positionAbsolute:Si(e,t);return{x:n,y:r,width:((s=e.measured)==null?void 0:s.width)??e.width??e.initialWidth??0,height:((o=e.measured)==null?void 0:o.height)??e.height??e.initialHeight??0}},fl=(e,t=[0,0])=>{var s,o;const{x:n,y:r}=Nf(e)?e.internals.positionAbsolute:Si(e,t);return{x:n,y:r,x2:n+(((s=e.measured)==null?void 0:s.width)??e.width??e.initialWidth??0),y2:r+(((o=e.measured)==null?void 0:o.height)??e.height??e.initialHeight??0)}},iy=(e,t)=>Vl($l(od(e),od(t))),ci=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},Dh=e=>Lt(e.width)&&Lt(e.height)&&Lt(e.x)&&Lt(e.y),Lt=e=>!isNaN(e)&&isFinite(e),fS=(e,t)=>{},Ei=(e,t=[1,1])=>({x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}),Ti=({x:e,y:t},[n,r,s],o=!1,a=[1,1])=>{const l={x:(e-n)/s,y:(t-r)/s};return o?Ei(l,a):l},ml=({x:e,y:t},[n,r,s])=>({x:e*s+n,y:t*s+r});function Gr(e,t){if(typeof e=="number")return Math.floor((t-t/(1+e))*.5);if(typeof e=="string"&&e.endsWith("px")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(n)}if(typeof e=="string"&&e.endsWith("%")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(t*n*.01)}return console.error(`[React Flow] The padding value "${e}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function mS(e,t,n){if(typeof e=="string"||typeof e=="number"){const r=Gr(e,n),s=Gr(e,t);return{top:r,right:s,bottom:r,left:s,x:s*2,y:r*2}}if(typeof e=="object"){const r=Gr(e.top??e.y??0,n),s=Gr(e.bottom??e.y??0,n),o=Gr(e.left??e.x??0,t),a=Gr(e.right??e.x??0,t);return{top:r,right:a,bottom:s,left:o,x:o+a,y:r+s}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function hS(e,t,n,r,s,o){const{x:a,y:l}=ml(e,[t,n,r]),{x:u,y:c}=ml({x:e.x+e.width,y:e.y+e.height},[t,n,r]),d=s-u,f=o-c;return{left:Math.floor(a),top:Math.floor(l),right:Math.floor(d),bottom:Math.floor(f)}}const kf=(e,t,n,r,s,o)=>{const a=mS(o,t,n),l=(t-a.x)/e.width,u=(n-a.y)/e.height,c=Math.min(l,u),d=Bs(c,r,s),f=e.x+e.width/2,m=e.y+e.height/2,y=t/2-f*d,x=n/2-m*d,w=hS(e,y,x,d,t,n),j={left:Math.min(w.left-a.left,0),top:Math.min(w.top-a.top,0),right:Math.min(w.right-a.right,0),bottom:Math.min(w.bottom-a.bottom,0)};return{x:y-j.left+j.right,y:x-j.top+j.bottom,zoom:d}},di=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0};function Ws(e){return e!=null&&e!=="parent"}function kn(e){var t,n;return{width:((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth??0,height:((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight??0}}function ay(e){var t,n;return(((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth)!==void 0&&(((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight)!==void 0}function ly(e,t={width:0,height:0},n,r,s){const o={...e},a=r.get(n);if(a){const l=a.origin||s;o.x+=a.internals.positionAbsolute.x-(t.width??0)*l[0],o.y+=a.internals.positionAbsolute.y-(t.height??0)*l[1]}return o}function Ah(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function pS(){let e,t;return{promise:new Promise((r,s)=>{e=r,t=s}),resolve:e,reject:t}}function gS(e){return{...J0,...e||{}}}function Lo(e,{snapGrid:t=[0,0],snapToGrid:n=!1,transform:r,containerBounds:s}){const{x:o,y:a}=Ft(e),l=Ti({x:o-((s==null?void 0:s.left)??0),y:a-((s==null?void 0:s.top)??0)},r),{x:u,y:c}=n?Ei(l,t):l;return{xSnapped:u,ySnapped:c,...l}}const _f=e=>({width:e.offsetWidth,height:e.offsetHeight}),uy=e=>{var t;return((t=e==null?void 0:e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},xS=["INPUT","SELECT","TEXTAREA"];function cy(e){var r,s;const t=((s=(r=e.composedPath)==null?void 0:r.call(e))==null?void 0:s[0])||e.target;return(t==null?void 0:t.nodeType)!==1?!1:xS.includes(t.nodeName)||t.hasAttribute("contenteditable")||!!t.closest(".nokey")}const dy=e=>"clientX"in e,Ft=(e,t)=>{var o,a;const n=dy(e),r=n?e.clientX:(o=e.touches)==null?void 0:o[0].clientX,s=n?e.clientY:(a=e.touches)==null?void 0:a[0].clientY;return{x:r-((t==null?void 0:t.left)??0),y:s-((t==null?void 0:t.top)??0)}},Oh=(e,t,n,r,s)=>{const o=t.querySelectorAll(`.${e}`);return!o||!o.length?null:Array.from(o).map(a=>{const l=a.getBoundingClientRect();return{id:a.getAttribute("data-handleid"),type:e,nodeId:s,position:a.getAttribute("data-handlepos"),x:(l.left-n.left)/r,y:(l.top-n.top)/r,..._f(a)}})};function fy({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:s,sourceControlY:o,targetControlX:a,targetControlY:l}){const u=e*.125+s*.375+a*.375+n*.125,c=t*.125+o*.375+l*.375+r*.125,d=Math.abs(u-e),f=Math.abs(c-t);return[u,c,d,f]}function aa(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function zh({pos:e,x1:t,y1:n,x2:r,y2:s,c:o}){switch(e){case G.Left:return[t-aa(t-r,o),n];case G.Right:return[t+aa(r-t,o),n];case G.Top:return[t,n-aa(n-s,o)];case G.Bottom:return[t,n+aa(s-n,o)]}}function my({sourceX:e,sourceY:t,sourcePosition:n=G.Bottom,targetX:r,targetY:s,targetPosition:o=G.Top,curvature:a=.25}){const[l,u]=zh({pos:n,x1:e,y1:t,x2:r,y2:s,c:a}),[c,d]=zh({pos:o,x1:r,y1:s,x2:e,y2:t,c:a}),[f,m,y,x]=fy({sourceX:e,sourceY:t,targetX:r,targetY:s,sourceControlX:l,sourceControlY:u,targetControlX:c,targetControlY:d});return[`M${e},${t} C${l},${u} ${c},${d} ${r},${s}`,f,m,y,x]}function hy({sourceX:e,sourceY:t,targetX:n,targetY:r}){const s=Math.abs(n-e)/2,o=n<e?n+s:n-s,a=Math.abs(r-t)/2,l=r<t?r+a:r-a;return[o,l,s,a]}function yS({sourceNode:e,targetNode:t,selected:n=!1,zIndex:r=0,elevateOnSelect:s=!1,zIndexMode:o="basic"}){if(o==="manual")return r;const a=s&&n?r+1e3:r,l=Math.max(e.parentId||s&&e.selected?e.internals.z:0,t.parentId||s&&t.selected?t.internals.z:0);return a+l}function vS({sourceNode:e,targetNode:t,width:n,height:r,transform:s}){const o=$l(fl(e),fl(t));o.x===o.x2&&(o.x2+=1),o.y===o.y2&&(o.y2+=1);const a={x:-s[0]/s[2],y:-s[1]/s[2],width:n/s[2],height:r/s[2]};return ci(a,Vl(o))>0}const bS=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`xy-edge__${e}${t||""}-${n}${r||""}`,wS=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),py=(e,t,n={})=>{if(!e.source||!e.target)return t;const r=n.getEdgeId||bS;let s;return ny(e)?s={...e}:s={...e,id:r(e)},wS(s,t)?t:(s.sourceHandle===null&&delete s.sourceHandle,s.targetHandle===null&&delete s.targetHandle,t.concat(s))};function gy({sourceX:e,sourceY:t,targetX:n,targetY:r}){const[s,o,a,l]=hy({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,s,o,a,l]}const Lh={[G.Left]:{x:-1,y:0},[G.Right]:{x:1,y:0},[G.Top]:{x:0,y:-1},[G.Bottom]:{x:0,y:1}},NS=({source:e,sourcePosition:t=G.Bottom,target:n})=>t===G.Left||t===G.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},Fh=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function jS({source:e,sourcePosition:t=G.Bottom,target:n,targetPosition:r=G.Top,center:s,offset:o,stepPosition:a}){const l=Lh[t],u=Lh[r],c={x:e.x+l.x*o,y:e.y+l.y*o},d={x:n.x+u.x*o,y:n.y+u.y*o},f=NS({source:c,sourcePosition:t,target:d}),m=f.x!==0?"x":"y",y=f[m];let x=[],w,j;const p={x:0,y:0},h={x:0,y:0},[,,g,v]=hy({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(l[m]*u[m]===-1){m==="x"?(w=s.x??c.x+(d.x-c.x)*a,j=s.y??(c.y+d.y)/2):(w=s.x??(c.x+d.x)/2,j=s.y??c.y+(d.y-c.y)*a);const k=[{x:w,y:c.y},{x:w,y:d.y}],b=[{x:c.x,y:j},{x:d.x,y:j}];l[m]===y?x=m==="x"?k:b:x=m==="x"?b:k}else{const k=[{x:c.x,y:d.y}],b=[{x:d.x,y:c.y}];if(m==="x"?x=l.x===y?b:k:x=l.y===y?k:b,t===r){const R=Math.abs(e[m]-n[m]);if(R<=o){const O=Math.min(o-1,o-R);l[m]===y?p[m]=(c[m]>e[m]?-1:1)*O:h[m]=(d[m]>n[m]?-1:1)*O}}if(t!==r){const R=m==="x"?"y":"x",O=l[m]===u[R],S=c[R]>d[R],L=c[R]<d[R];(l[m]===1&&(!O&&S||O&&L)||l[m]!==1&&(!O&&L||O&&S))&&(x=m==="x"?k:b)}const _={x:c.x+p.x,y:c.y+p.y},C={x:d.x+h.x,y:d.y+h.y},M=Math.max(Math.abs(_.x-x[0].x),Math.abs(C.x-x[0].x)),I=Math.max(Math.abs(_.y-x[0].y),Math.abs(C.y-x[0].y));M>=I?(w=(_.x+C.x)/2,j=x[0].y):(w=x[0].x,j=(_.y+C.y)/2)}return[[e,{x:c.x+p.x,y:c.y+p.y},...x,{x:d.x+h.x,y:d.y+h.y},n],w,j,g,v]}function kS(e,t,n,r){const s=Math.min(Fh(e,t)/2,Fh(t,n)/2,r),{x:o,y:a}=t;if(e.x===o&&o===n.x||e.y===a&&a===n.y)return`L${o} ${a}`;if(e.y===a){const c=e.x<n.x?-1:1,d=e.y<n.y?1:-1;return`L ${o+s*c},${a}Q ${o},${a} ${o},${a+s*d}`}const l=e.x<n.x?1:-1,u=e.y<n.y?-1:1;return`L ${o},${a+s*u}Q ${o},${a} ${o+s*l},${a}`}function hl({sourceX:e,sourceY:t,sourcePosition:n=G.Bottom,targetX:r,targetY:s,targetPosition:o=G.Top,borderRadius:a=5,centerX:l,centerY:u,offset:c=20,stepPosition:d=.5}){const[f,m,y,x,w]=jS({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:s},targetPosition:o,center:{x:l,y:u},offset:c,stepPosition:d});return[f.reduce((p,h,g)=>{let v="";return g>0&&g<f.length-1?v=kS(f[g-1],h,f[g+1],a):v=`${g===0?"M":"L"}${h.x} ${h.y}`,p+=v,p},""),m,y,x,w]}function $h(e){var t;return e&&!!(e.internals.handleBounds||(t=e.handles)!=null&&t.length)&&!!(e.measured.width||e.width||e.initialWidth)}function _S(e){var f;const{sourceNode:t,targetNode:n}=e;if(!$h(t)||!$h(n))return null;const r=t.internals.handleBounds||Vh(t.handles),s=n.internals.handleBounds||Vh(n.handles),o=Hh((r==null?void 0:r.source)??[],e.sourceHandle),a=Hh(e.connectionMode===Hs.Strict?(s==null?void 0:s.target)??[]:((s==null?void 0:s.target)??[]).concat((s==null?void 0:s.source)??[]),e.targetHandle);if(!o||!a)return(f=e.onError)==null||f.call(e,"008",rn.error008(o?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;const l=(o==null?void 0:o.position)||G.Bottom,u=(a==null?void 0:a.position)||G.Top,c=Vr(t,o,l),d=Vr(n,a,u);return{sourceX:c.x,sourceY:c.y,targetX:d.x,targetY:d.y,sourcePosition:l,targetPosition:u}}function Vh(e){if(!e)return null;const t=[],n=[];for(const r of e)r.width=r.width??1,r.height=r.height??1,r.type==="source"?t.push(r):r.type==="target"&&n.push(r);return{source:t,target:n}}function Vr(e,t,n=G.Left,r=!1){const s=((t==null?void 0:t.x)??0)+e.internals.positionAbsolute.x,o=((t==null?void 0:t.y)??0)+e.internals.positionAbsolute.y,{width:a,height:l}=t??kn(e);if(r)return{x:s+a/2,y:o+l/2};switch((t==null?void 0:t.position)??n){case G.Top:return{x:s+a/2,y:o};case G.Right:return{x:s+a,y:o+l/2};case G.Bottom:return{x:s+a/2,y:o+l};case G.Left:return{x:s,y:o+l/2}}}function Hh(e,t){return e&&(t?e.find(n=>n.id===t):e[0])||null}function id(e,t){return e?typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(r=>`${r}=${e[r]}`).join("&")}`:""}function SS(e,{id:t,defaultColor:n,defaultMarkerStart:r,defaultMarkerEnd:s}){const o=new Set;return e.reduce((a,l)=>([l.markerStart||r,l.markerEnd||s].forEach(u=>{if(u&&typeof u=="object"){const c=id(u,t);o.has(c)||(a.push({id:c,color:u.color||n,...u}),o.add(c))}}),a),[]).sort((a,l)=>a.id.localeCompare(l.id))}const xy=1e3,CS=10,Sf={nodeOrigin:[0,0],nodeExtent:li,elevateNodesOnSelect:!0,zIndexMode:"basic",defaults:{}},ES={...Sf,checkEquality:!0};function Cf(e,t){const n={...e};for(const r in t)t[r]!==void 0&&(n[r]=t[r]);return n}function TS(e,t,n){const r=Cf(Sf,n);for(const s of e.values())if(s.parentId)Tf(s,e,t,r);else{const o=Si(s,r.nodeOrigin),a=Ws(s.extent)?s.extent:r.nodeExtent,l=$r(o,a,kn(s));s.internals.positionAbsolute=l}}function RS(e,t){if(!e.handles)return e.measured?t==null?void 0:t.internals.handleBounds:void 0;const n=[],r=[];for(const s of e.handles){const o={id:s.id,width:s.width??1,height:s.height??1,nodeId:e.id,x:s.x,y:s.y,position:s.position,type:s.type};s.type==="source"?n.push(o):s.type==="target"&&r.push(o)}return{source:n,target:r}}function Ef(e){return e==="manual"}function ad(e,t,n,r={}){var c,d;const s=Cf(ES,r),o={i:0},a=new Map(t),l=s!=null&&s.elevateNodesOnSelect&&!Ef(s.zIndexMode)?xy:0;let u=e.length>0;t.clear(),n.clear();for(const f of e){let m=a.get(f.id);if(s.checkEquality&&f===(m==null?void 0:m.internals.userNode))t.set(f.id,m);else{const y=Si(f,s.nodeOrigin),x=Ws(f.extent)?f.extent:s.nodeExtent,w=$r(y,x,kn(f));m={...s.defaults,...f,measured:{width:(c=f.measured)==null?void 0:c.width,height:(d=f.measured)==null?void 0:d.height},internals:{positionAbsolute:w,handleBounds:RS(f,m),z:yy(f,l,s.zIndexMode),userNode:f}},t.set(f.id,m)}(m.measured===void 0||m.measured.width===void 0||m.measured.height===void 0)&&!m.hidden&&(u=!1),f.parentId&&Tf(m,t,n,r,o)}return u}function MS(e,t){if(!e.parentId)return;const n=t.get(e.parentId);n?n.set(e.id,e):t.set(e.parentId,new Map([[e.id,e]]))}function Tf(e,t,n,r,s){const{elevateNodesOnSelect:o,nodeOrigin:a,nodeExtent:l,zIndexMode:u}=Cf(Sf,r),c=e.parentId,d=t.get(c);if(!d){console.warn(`Parent node ${c} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}MS(e,n),s&&!d.parentId&&d.internals.rootParentIndex===void 0&&u==="auto"&&(d.internals.rootParentIndex=++s.i,d.internals.z=d.internals.z+s.i*CS),s&&d.internals.rootParentIndex!==void 0&&(s.i=d.internals.rootParentIndex);const f=o&&!Ef(u)?xy:0,{x:m,y,z:x}=PS(e,d,a,l,f,u),{positionAbsolute:w}=e.internals,j=m!==w.x||y!==w.y;(j||x!==e.internals.z)&&t.set(e.id,{...e,internals:{...e.internals,positionAbsolute:j?{x:m,y}:w,z:x}})}function yy(e,t,n){const r=Lt(e.zIndex)?e.zIndex:0;return Ef(n)?r:r+(e.selected?t:0)}function PS(e,t,n,r,s,o){const{x:a,y:l}=t.internals.positionAbsolute,u=kn(e),c=Si(e,n),d=Ws(e.extent)?$r(c,e.extent,u):c;let f=$r({x:a+d.x,y:l+d.y},r,u);e.extent==="parent"&&(f=sy(f,u,t));const m=yy(e,s,o),y=t.internals.z??0;return{x:f.x,y:f.y,z:y>=m?y+1:m}}function Rf(e,t,n,r=[0,0]){var a;const s=[],o=new Map;for(const l of e){const u=t.get(l.parentId);if(!u)continue;const c=((a=o.get(l.parentId))==null?void 0:a.expandedRect)??Us(u),d=iy(c,l.rect);o.set(l.parentId,{expandedRect:d,parent:u})}return o.size>0&&o.forEach(({expandedRect:l,parent:u},c)=>{var g;const d=u.internals.positionAbsolute,f=kn(u),m=u.origin??r,y=l.x<d.x?Math.round(Math.abs(d.x-l.x)):0,x=l.y<d.y?Math.round(Math.abs(d.y-l.y)):0,w=Math.max(f.width,Math.round(l.width)),j=Math.max(f.height,Math.round(l.height)),p=(w-f.width)*m[0],h=(j-f.height)*m[1];(y>0||x>0||p||h)&&(s.push({id:c,type:"position",position:{x:u.position.x-y+p,y:u.position.y-x+h}}),(g=n.get(c))==null||g.forEach(v=>{e.some(N=>N.id===v.id)||s.push({id:v.id,type:"position",position:{x:v.position.x+y,y:v.position.y+x}})})),(f.width<l.width||f.height<l.height||y||x)&&s.push({id:c,type:"dimensions",setAttributes:!0,dimensions:{width:w+(y?m[0]*y-p:0),height:j+(x?m[1]*x-h:0)}})}),s}function IS(e,t,n,r,s,o,a){const l=r==null?void 0:r.querySelector(".xyflow__viewport");let u=!1;if(!l)return{changes:[],updatedInternals:u};const c=[],d=window.getComputedStyle(l),{m22:f}=new window.DOMMatrixReadOnly(d.transform),m=[];for(const y of e.values()){const x=t.get(y.id);if(!x)continue;if(x.hidden){t.set(x.id,{...x,internals:{...x.internals,handleBounds:void 0}}),u=!0;continue}const w=_f(y.nodeElement),j=x.measured.width!==w.width||x.measured.height!==w.height;if(!!(w.width&&w.height&&(j||!x.internals.handleBounds||y.force))){const h=y.nodeElement.getBoundingClientRect(),g=Ws(x.extent)?x.extent:o;let{positionAbsolute:v}=x.internals;x.parentId&&x.extent==="parent"?v=sy(v,w,t.get(x.parentId)):g&&(v=$r(v,g,w));const N={...x,measured:w,internals:{...x.internals,positionAbsolute:v,handleBounds:{source:Oh("source",y.nodeElement,h,f,x.id),target:Oh("target",y.nodeElement,h,f,x.id)}}};t.set(x.id,N),x.parentId&&Tf(N,t,n,{nodeOrigin:s,zIndexMode:a}),u=!0,j&&(c.push({id:x.id,type:"dimensions",dimensions:w}),x.expandParent&&x.parentId&&m.push({id:x.id,parentId:x.parentId,rect:Us(N,s)}))}}if(m.length>0){const y=Rf(m,t,n,s);c.push(...y)}return{changes:c,updatedInternals:u}}async function DS({delta:e,panZoom:t,transform:n,translateExtent:r,width:s,height:o}){if(!t||!e.x&&!e.y)return Promise.resolve(!1);const a=await t.setViewportConstrained({x:n[0]+e.x,y:n[1]+e.y,zoom:n[2]},[[0,0],[s,o]],r),l=!!a&&(a.x!==n[0]||a.y!==n[1]||a.k!==n[2]);return Promise.resolve(l)}function Bh(e,t,n,r,s,o){let a=s;const l=r.get(a)||new Map;r.set(a,l.set(n,t)),a=`${s}-${e}`;const u=r.get(a)||new Map;if(r.set(a,u.set(n,t)),o){a=`${s}-${e}-${o}`;const c=r.get(a)||new Map;r.set(a,c.set(n,t))}}function vy(e,t,n){e.clear(),t.clear();for(const r of n){const{source:s,target:o,sourceHandle:a=null,targetHandle:l=null}=r,u={edgeId:r.id,source:s,target:o,sourceHandle:a,targetHandle:l},c=`${s}-${a}--${o}-${l}`,d=`${o}-${l}--${s}-${a}`;Bh("source",u,d,e,s,a),Bh("target",u,c,e,o,l),t.set(r.id,r)}}function by(e,t){if(!e.parentId)return!1;const n=t.get(e.parentId);return n?n.selected?!0:by(n,t):!1}function Uh(e,t,n){var s;let r=e;do{if((s=r==null?void 0:r.matches)!=null&&s.call(r,t))return!0;if(r===n)return!1;r=r==null?void 0:r.parentElement}while(r);return!1}function AS(e,t,n,r){const s=new Map;for(const[o,a]of e)if((a.selected||a.id===r)&&(!a.parentId||!by(a,e))&&(a.draggable||t&&typeof a.draggable>"u")){const l=e.get(o);l&&s.set(o,{id:o,position:l.position||{x:0,y:0},distance:{x:n.x-l.internals.positionAbsolute.x,y:n.y-l.internals.positionAbsolute.y},extent:l.extent,parentId:l.parentId,origin:l.origin,expandParent:l.expandParent,internals:{positionAbsolute:l.internals.positionAbsolute||{x:0,y:0}},measured:{width:l.measured.width??0,height:l.measured.height??0}})}return s}function Du({nodeId:e,dragItems:t,nodeLookup:n,dragging:r=!0}){var a,l,u;const s=[];for(const[c,d]of t){const f=(a=n.get(c))==null?void 0:a.internals.userNode;f&&s.push({...f,position:d.position,dragging:r})}if(!e)return[s[0],s];const o=(l=n.get(e))==null?void 0:l.internals.userNode;return[o?{...o,position:((u=t.get(e))==null?void 0:u.position)||o.position,dragging:r}:s[0],s]}function OS({dragItems:e,snapGrid:t,x:n,y:r}){const s=e.values().next().value;if(!s)return null;const o={x:n-s.distance.x,y:r-s.distance.y},a=Ei(o,t);return{x:a.x-o.x,y:a.y-o.y}}function zS({onNodeMouseDown:e,getStoreItems:t,onDragStart:n,onDrag:r,onDragStop:s}){let o={x:null,y:null},a=0,l=new Map,u=!1,c={x:0,y:0},d=null,f=!1,m=null,y=!1,x=!1,w=null;function j({noDragClassName:h,handleSelector:g,domNode:v,isSelectable:N,nodeId:k,nodeClickDistance:b=0}){m=ht(v);function _({x:R,y:O}){const{nodeLookup:S,nodeExtent:L,snapGrid:A,snapToGrid:z,nodeOrigin:E,onNodeDrag:P,onSelectionDrag:F,onError:V,updateNodePositions:H}=t();o={x:R,y:O};let q=!1;const U=l.size>1,K=U&&L?od(Ci(l)):null,Y=U&&z?OS({dragItems:l,snapGrid:A,x:R,y:O}):null;for(const[Z,W]of l){if(!S.has(Z))continue;let ee={x:R-W.distance.x,y:O-W.distance.y};z&&(ee=Y?{x:Math.round(ee.x+Y.x),y:Math.round(ee.y+Y.y)}:Ei(ee,A));let ie=null;if(U&&L&&!W.extent&&K){const{positionAbsolute:ne}=W.internals,he=ne.x-K.x+L[0][0],ve=ne.x+W.measured.width-K.x2+L[1][0],me=ne.y-K.y+L[0][1],We=ne.y+W.measured.height-K.y2+L[1][1];ie=[[he,me],[ve,We]]}const{position:se,positionAbsolute:re}=ry({nodeId:Z,nextPosition:ee,nodeLookup:S,nodeExtent:ie||L,nodeOrigin:E,onError:V});q=q||W.position.x!==se.x||W.position.y!==se.y,W.position=se,W.internals.positionAbsolute=re}if(x=x||q,!!q&&(H(l,!0),w&&(r||P||!k&&F))){const[Z,W]=Du({nodeId:k,dragItems:l,nodeLookup:S});r==null||r(w,l,Z,W),P==null||P(w,Z,W),k||F==null||F(w,W)}}async function C(){if(!d)return;const{transform:R,panBy:O,autoPanSpeed:S,autoPanOnNodeDrag:L}=t();if(!L){u=!1,cancelAnimationFrame(a);return}const[A,z]=oy(c,d,S);(A!==0||z!==0)&&(o.x=(o.x??0)-A/R[2],o.y=(o.y??0)-z/R[2],await O({x:A,y:z})&&_(o)),a=requestAnimationFrame(C)}function M(R){var U;const{nodeLookup:O,multiSelectionActive:S,nodesDraggable:L,transform:A,snapGrid:z,snapToGrid:E,selectNodesOnDrag:P,onNodeDragStart:F,onSelectionDragStart:V,unselectNodesAndEdges:H}=t();f=!0,(!P||!N)&&!S&&k&&((U=O.get(k))!=null&&U.selected||H()),N&&P&&k&&(e==null||e(k));const q=Lo(R.sourceEvent,{transform:A,snapGrid:z,snapToGrid:E,containerBounds:d});if(o=q,l=AS(O,L,q,k),l.size>0&&(n||F||!k&&V)){const[K,Y]=Du({nodeId:k,dragItems:l,nodeLookup:O});n==null||n(R.sourceEvent,l,K,Y),F==null||F(R.sourceEvent,K,Y),k||V==null||V(R.sourceEvent,Y)}}const I=O0().clickDistance(b).on("start",R=>{const{domNode:O,nodeDragThreshold:S,transform:L,snapGrid:A,snapToGrid:z}=t();d=(O==null?void 0:O.getBoundingClientRect())||null,y=!1,x=!1,w=R.sourceEvent,S===0&&M(R),o=Lo(R.sourceEvent,{transform:L,snapGrid:A,snapToGrid:z,containerBounds:d}),c=Ft(R.sourceEvent,d)}).on("drag",R=>{const{autoPanOnNodeDrag:O,transform:S,snapGrid:L,snapToGrid:A,nodeDragThreshold:z,nodeLookup:E}=t(),P=Lo(R.sourceEvent,{transform:S,snapGrid:L,snapToGrid:A,containerBounds:d});if(w=R.sourceEvent,(R.sourceEvent.type==="touchmove"&&R.sourceEvent.touches.length>1||k&&!E.has(k))&&(y=!0),!y){if(!u&&O&&f&&(u=!0,C()),!f){const F=Ft(R.sourceEvent,d),V=F.x-c.x,H=F.y-c.y;Math.sqrt(V*V+H*H)>z&&M(R)}(o.x!==P.xSnapped||o.y!==P.ySnapped)&&l&&f&&(c=Ft(R.sourceEvent,d),_(P))}}).on("end",R=>{if(!(!f||y)&&(u=!1,f=!1,cancelAnimationFrame(a),l.size>0)){const{nodeLookup:O,updateNodePositions:S,onNodeDragStop:L,onSelectionDragStop:A}=t();if(x&&(S(l,!1),x=!1),s||L||!k&&A){const[z,E]=Du({nodeId:k,dragItems:l,nodeLookup:O,dragging:!1});s==null||s(R.sourceEvent,l,z,E),L==null||L(R.sourceEvent,z,E),k||A==null||A(R.sourceEvent,E)}}}).filter(R=>{const O=R.target;return!R.button&&(!h||!Uh(O,`.${h}`,v))&&(!g||Uh(O,g,v))});m.call(I)}function p(){m==null||m.on(".drag",null)}return{update:j,destroy:p}}function LS(e,t,n){const r=[],s={x:e.x-n,y:e.y-n,width:n*2,height:n*2};for(const o of t.values())ci(s,Us(o))>0&&r.push(o);return r}const FS=250;function $S(e,t,n,r){var l,u;let s=[],o=1/0;const a=LS(e,n,t+FS);for(const c of a){const d=[...((l=c.internals.handleBounds)==null?void 0:l.source)??[],...((u=c.internals.handleBounds)==null?void 0:u.target)??[]];for(const f of d){if(r.nodeId===f.nodeId&&r.type===f.type&&r.id===f.id)continue;const{x:m,y}=Vr(c,f,f.position,!0),x=Math.sqrt(Math.pow(m-e.x,2)+Math.pow(y-e.y,2));x>t||(x<o?(s=[{...f,x:m,y}],o=x):x===o&&s.push({...f,x:m,y}))}}if(!s.length)return null;if(s.length>1){const c=r.type==="source"?"target":"source";return s.find(d=>d.type===c)??s[0]}return s[0]}function wy(e,t,n,r,s,o=!1){var c,d,f;const a=r.get(e);if(!a)return null;const l=s==="strict"?(c=a.internals.handleBounds)==null?void 0:c[t]:[...((d=a.internals.handleBounds)==null?void 0:d.source)??[],...((f=a.internals.handleBounds)==null?void 0:f.target)??[]],u=(n?l==null?void 0:l.find(m=>m.id===n):l==null?void 0:l[0])??null;return u&&o?{...u,...Vr(a,u,u.position,!0)}:u}function Ny(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function VS(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}const jy=()=>!0;function HS(e,{connectionMode:t,connectionRadius:n,handleId:r,nodeId:s,edgeUpdaterType:o,isTarget:a,domNode:l,nodeLookup:u,lib:c,autoPanOnConnect:d,flowId:f,panBy:m,cancelConnection:y,onConnectStart:x,onConnect:w,onConnectEnd:j,isValidConnection:p=jy,onReconnectEnd:h,updateConnection:g,getTransform:v,getFromHandle:N,autoPanSpeed:k,dragThreshold:b=1,handleDomNode:_}){const C=uy(e.target);let M=0,I;const{x:R,y:O}=Ft(e),S=Ny(o,_),L=l==null?void 0:l.getBoundingClientRect();let A=!1;if(!L||!S)return;const z=wy(s,S,r,u,t);if(!z)return;let E=Ft(e,L),P=!1,F=null,V=!1,H=null;function q(){if(!d||!L)return;const[se,re]=oy(E,L,k);m({x:se,y:re}),M=requestAnimationFrame(q)}const U={...z,nodeId:s,type:S,position:z.position},K=u.get(s);let Z={inProgress:!0,isValid:null,from:Vr(K,U,G.Left,!0),fromHandle:U,fromPosition:U.position,fromNode:K,to:E,toHandle:null,toPosition:Ph[U.position],toNode:null,pointer:E};function W(){A=!0,g(Z),x==null||x(e,{nodeId:s,handleId:r,handleType:S})}b===0&&W();function ee(se){if(!A){const{x:We,y:_n}=Ft(se),an=We-R,ar=_n-O;if(!(an*an+ar*ar>b*b))return;W()}if(!N()||!U){ie(se);return}const re=v();E=Ft(se,L),I=$S(Ti(E,re,!1,[1,1]),n,u,U),P||(q(),P=!0);const ne=ky(se,{handle:I,connectionMode:t,fromNodeId:s,fromHandleId:r,fromType:a?"target":"source",isValidConnection:p,doc:C,lib:c,flowId:f,nodeLookup:u});H=ne.handleDomNode,F=ne.connection,V=VS(!!I,ne.isValid);const he=u.get(s),ve=he?Vr(he,U,G.Left,!0):Z.from,me={...Z,from:ve,isValid:V,to:ne.toHandle&&V?ml({x:ne.toHandle.x,y:ne.toHandle.y},re):E,toHandle:ne.toHandle,toPosition:V&&ne.toHandle?ne.toHandle.position:Ph[U.position],toNode:ne.toHandle?u.get(ne.toHandle.nodeId):null,pointer:E};g(me),Z=me}function ie(se){if(!("touches"in se&&se.touches.length>0)){if(A){(I||H)&&F&&V&&(w==null||w(F));const{inProgress:re,...ne}=Z,he={...ne,toPosition:Z.toHandle?Z.toPosition:null};j==null||j(se,he),o&&(h==null||h(se,he))}y(),cancelAnimationFrame(M),P=!1,V=!1,F=null,H=null,C.removeEventListener("mousemove",ee),C.removeEventListener("mouseup",ie),C.removeEventListener("touchmove",ee),C.removeEventListener("touchend",ie)}}C.addEventListener("mousemove",ee),C.addEventListener("mouseup",ie),C.addEventListener("touchmove",ee),C.addEventListener("touchend",ie)}function ky(e,{handle:t,connectionMode:n,fromNodeId:r,fromHandleId:s,fromType:o,doc:a,lib:l,flowId:u,isValidConnection:c=jy,nodeLookup:d}){const f=o==="target",m=t?a.querySelector(`.${l}-flow__handle[data-id="${u}-${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`):null,{x:y,y:x}=Ft(e),w=a.elementFromPoint(y,x),j=w!=null&&w.classList.contains(`${l}-flow__handle`)?w:m,p={handleDomNode:j,isValid:!1,connection:null,toHandle:null};if(j){const h=Ny(void 0,j),g=j.getAttribute("data-nodeid"),v=j.getAttribute("data-handleid"),N=j.classList.contains("connectable"),k=j.classList.contains("connectableend");if(!g||!h)return p;const b={source:f?g:r,sourceHandle:f?v:s,target:f?r:g,targetHandle:f?s:v};p.connection=b;const C=N&&k&&(n===Hs.Strict?f&&h==="source"||!f&&h==="target":g!==r||v!==s);p.isValid=C&&c(b),p.toHandle=wy(g,h,v,d,n,!0)}return p}const ld={onPointerDown:HS,isValid:ky};function BS({domNode:e,panZoom:t,getTransform:n,getViewScale:r}){const s=ht(e);function o({translateExtent:l,width:u,height:c,zoomStep:d=1,pannable:f=!0,zoomable:m=!0,inversePan:y=!1}){const x=g=>{if(g.sourceEvent.type!=="wheel"||!t)return;const v=n(),N=g.sourceEvent.ctrlKey&&di()?10:1,k=-g.sourceEvent.deltaY*(g.sourceEvent.deltaMode===1?.05:g.sourceEvent.deltaMode?1:.002)*d,b=v[2]*Math.pow(2,k*N);t.scaleTo(b)};let w=[0,0];const j=g=>{(g.sourceEvent.type==="mousedown"||g.sourceEvent.type==="touchstart")&&(w=[g.sourceEvent.clientX??g.sourceEvent.touches[0].clientX,g.sourceEvent.clientY??g.sourceEvent.touches[0].clientY])},p=g=>{const v=n();if(g.sourceEvent.type!=="mousemove"&&g.sourceEvent.type!=="touchmove"||!t)return;const N=[g.sourceEvent.clientX??g.sourceEvent.touches[0].clientX,g.sourceEvent.clientY??g.sourceEvent.touches[0].clientY],k=[N[0]-w[0],N[1]-w[1]];w=N;const b=r()*Math.max(v[2],Math.log(v[2]))*(y?-1:1),_={x:v[0]-k[0]*b,y:v[1]-k[1]*b},C=[[0,0],[u,c]];t.setViewportConstrained({x:_.x,y:_.y,zoom:v[2]},C,l)},h=G0().on("start",j).on("zoom",f?p:null).on("zoom.wheel",m?x:null);s.call(h,{})}function a(){s.on("zoom",null)}return{update:o,destroy:a,pointer:Dt}}const Hl=e=>({x:e.x,y:e.y,zoom:e.k}),Au=({x:e,y:t,zoom:n})=>Fl.translate(e,t).scale(n),cs=(e,t)=>e.target.closest(`.${t}`),_y=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),US=e=>((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2,Ou=(e,t=0,n=US,r=()=>{})=>{const s=typeof t=="number"&&t>0;return s||r(),s?e.transition().duration(t).ease(n).on("end",r):e},Sy=e=>{const t=e.ctrlKey&&di()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t};function WS({zoomPanValues:e,noWheelClassName:t,d3Selection:n,d3Zoom:r,panOnScrollMode:s,panOnScrollSpeed:o,zoomOnPinch:a,onPanZoomStart:l,onPanZoom:u,onPanZoomEnd:c}){return d=>{if(cs(d,t))return d.ctrlKey&&d.preventDefault(),!1;d.preventDefault(),d.stopImmediatePropagation();const f=n.property("__zoom").k||1;if(d.ctrlKey&&a){const j=Dt(d),p=Sy(d),h=f*Math.pow(2,p);r.scaleTo(n,h,j,d);return}const m=d.deltaMode===1?20:1;let y=s===Rr.Vertical?0:d.deltaX*m,x=s===Rr.Horizontal?0:d.deltaY*m;!di()&&d.shiftKey&&s!==Rr.Vertical&&(y=d.deltaY*m,x=0),r.translateBy(n,-(y/f)*o,-(x/f)*o,{internal:!0});const w=Hl(n.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling?(u==null||u(d,w),e.panScrollTimeout=setTimeout(()=>{c==null||c(d,w),e.isPanScrolling=!1},150)):(e.isPanScrolling=!0,l==null||l(d,w))}}function qS({noWheelClassName:e,preventScrolling:t,d3ZoomHandler:n}){return function(r,s){const o=r.type==="wheel",a=!t&&o&&!r.ctrlKey,l=cs(r,e);if(r.ctrlKey&&o&&l&&r.preventDefault(),a||l)return null;r.preventDefault(),n.call(this,r,s)}}function QS({zoomPanValues:e,onDraggingChange:t,onPanZoomStart:n}){return r=>{var o,a,l;if((o=r.sourceEvent)!=null&&o.internal)return;const s=Hl(r.transform);e.mouseButton=((a=r.sourceEvent)==null?void 0:a.button)||0,e.isZoomingOrPanning=!0,e.prevViewport=s,((l=r.sourceEvent)==null?void 0:l.type)==="mousedown"&&t(!0),n&&(n==null||n(r.sourceEvent,s))}}function XS({zoomPanValues:e,panOnDrag:t,onPaneContextMenu:n,onTransformChange:r,onPanZoom:s}){return o=>{var a,l;e.usedRightMouseButton=!!(n&&_y(t,e.mouseButton??0)),(a=o.sourceEvent)!=null&&a.sync||r([o.transform.x,o.transform.y,o.transform.k]),s&&!((l=o.sourceEvent)!=null&&l.internal)&&(s==null||s(o.sourceEvent,Hl(o.transform)))}}function KS({zoomPanValues:e,panOnDrag:t,panOnScroll:n,onDraggingChange:r,onPanZoomEnd:s,onPaneContextMenu:o}){return a=>{var l;if(!((l=a.sourceEvent)!=null&&l.internal)&&(e.isZoomingOrPanning=!1,o&&_y(t,e.mouseButton??0)&&!e.usedRightMouseButton&&a.sourceEvent&&o(a.sourceEvent),e.usedRightMouseButton=!1,r(!1),s)){const u=Hl(a.transform);e.prevViewport=u,clearTimeout(e.timerId),e.timerId=setTimeout(()=>{s==null||s(a.sourceEvent,u)},n?150:0)}}}function YS({zoomActivationKeyPressed:e,zoomOnScroll:t,zoomOnPinch:n,panOnDrag:r,panOnScroll:s,zoomOnDoubleClick:o,userSelectionActive:a,noWheelClassName:l,noPanClassName:u,lib:c,connectionInProgress:d}){return f=>{var j;const m=e||t,y=n&&f.ctrlKey,x=f.type==="wheel";if(f.button===1&&f.type==="mousedown"&&(cs(f,`${c}-flow__node`)||cs(f,`${c}-flow__edge`)))return!0;if(!r&&!m&&!s&&!o&&!n||a||d&&!x||cs(f,l)&&x||cs(f,u)&&(!x||s&&x&&!e)||!n&&f.ctrlKey&&x)return!1;if(!n&&f.type==="touchstart"&&((j=f.touches)==null?void 0:j.length)>1)return f.preventDefault(),!1;if(!m&&!s&&!y&&x||!r&&(f.type==="mousedown"||f.type==="touchstart")||Array.isArray(r)&&!r.includes(f.button)&&f.type==="mousedown")return!1;const w=Array.isArray(r)&&r.includes(f.button)||!f.button||f.button<=1;return(!f.ctrlKey||x)&&w}}function GS({domNode:e,minZoom:t,maxZoom:n,translateExtent:r,viewport:s,onPanZoom:o,onPanZoomStart:a,onPanZoomEnd:l,onDraggingChange:u}){const c={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},d=e.getBoundingClientRect(),f=G0().scaleExtent([t,n]).translateExtent(r),m=ht(e).call(f);h({x:s.x,y:s.y,zoom:Bs(s.zoom,t,n)},[[0,0],[d.width,d.height]],r);const y=m.on("wheel.zoom"),x=m.on("dblclick.zoom");f.wheelDelta(Sy);function w(I,R){return m?new Promise(O=>{f==null||f.interpolate((R==null?void 0:R.interpolate)==="linear"?zo:Sa).transform(Ou(m,R==null?void 0:R.duration,R==null?void 0:R.ease,()=>O(!0)),I)}):Promise.resolve(!1)}function j({noWheelClassName:I,noPanClassName:R,onPaneContextMenu:O,userSelectionActive:S,panOnScroll:L,panOnDrag:A,panOnScrollMode:z,panOnScrollSpeed:E,preventScrolling:P,zoomOnPinch:F,zoomOnScroll:V,zoomOnDoubleClick:H,zoomActivationKeyPressed:q,lib:U,onTransformChange:K,connectionInProgress:Y,paneClickDistance:Z,selectionOnDrag:W}){S&&!c.isZoomingOrPanning&&p();const ee=L&&!q&&!S;f.clickDistance(W?1/0:!Lt(Z)||Z<0?0:Z);const ie=ee?WS({zoomPanValues:c,noWheelClassName:I,d3Selection:m,d3Zoom:f,panOnScrollMode:z,panOnScrollSpeed:E,zoomOnPinch:F,onPanZoomStart:a,onPanZoom:o,onPanZoomEnd:l}):qS({noWheelClassName:I,preventScrolling:P,d3ZoomHandler:y});if(m.on("wheel.zoom",ie,{passive:!1}),!S){const re=QS({zoomPanValues:c,onDraggingChange:u,onPanZoomStart:a});f.on("start",re);const ne=XS({zoomPanValues:c,panOnDrag:A,onPaneContextMenu:!!O,onPanZoom:o,onTransformChange:K});f.on("zoom",ne);const he=KS({zoomPanValues:c,panOnDrag:A,panOnScroll:L,onPaneContextMenu:O,onPanZoomEnd:l,onDraggingChange:u});f.on("end",he)}const se=YS({zoomActivationKeyPressed:q,panOnDrag:A,zoomOnScroll:V,panOnScroll:L,zoomOnDoubleClick:H,zoomOnPinch:F,userSelectionActive:S,noPanClassName:R,noWheelClassName:I,lib:U,connectionInProgress:Y});f.filter(se),H?m.on("dblclick.zoom",x):m.on("dblclick.zoom",null)}function p(){f.on("zoom",null)}async function h(I,R,O){const S=Au(I),L=f==null?void 0:f.constrain()(S,R,O);return L&&await w(L),new Promise(A=>A(L))}async function g(I,R){const O=Au(I);return await w(O,R),new Promise(S=>S(O))}function v(I){if(m){const R=Au(I),O=m.property("__zoom");(O.k!==I.zoom||O.x!==I.x||O.y!==I.y)&&(f==null||f.transform(m,R,null,{sync:!0}))}}function N(){const I=m?Y0(m.node()):{x:0,y:0,k:1};return{x:I.x,y:I.y,zoom:I.k}}function k(I,R){return m?new Promise(O=>{f==null||f.interpolate((R==null?void 0:R.interpolate)==="linear"?zo:Sa).scaleTo(Ou(m,R==null?void 0:R.duration,R==null?void 0:R.ease,()=>O(!0)),I)}):Promise.resolve(!1)}function b(I,R){return m?new Promise(O=>{f==null||f.interpolate((R==null?void 0:R.interpolate)==="linear"?zo:Sa).scaleBy(Ou(m,R==null?void 0:R.duration,R==null?void 0:R.ease,()=>O(!0)),I)}):Promise.resolve(!1)}function _(I){f==null||f.scaleExtent(I)}function C(I){f==null||f.translateExtent(I)}function M(I){const R=!Lt(I)||I<0?0:I;f==null||f.clickDistance(R)}return{update:j,destroy:p,setViewport:g,setViewportConstrained:h,getViewport:N,scaleTo:k,scaleBy:b,setScaleExtent:_,setTranslateExtent:C,syncViewport:v,setClickDistance:M}}var qs;(function(e){e.Line="line",e.Handle="handle"})(qs||(qs={}));function ZS({width:e,prevWidth:t,height:n,prevHeight:r,affectsX:s,affectsY:o}){const a=e-t,l=n-r,u=[a>0?1:a<0?-1:0,l>0?1:l<0?-1:0];return a&&s&&(u[0]=u[0]*-1),l&&o&&(u[1]=u[1]*-1),u}function Wh(e){const t=e.includes("right")||e.includes("left"),n=e.includes("bottom")||e.includes("top"),r=e.includes("left"),s=e.includes("top");return{isHorizontal:t,isVertical:n,affectsX:r,affectsY:s}}function Cn(e,t){return Math.max(0,t-e)}function En(e,t){return Math.max(0,e-t)}function la(e,t,n){return Math.max(0,t-e,e-n)}function qh(e,t){return e?!t:t}function JS(e,t,n,r,s,o,a,l){let{affectsX:u,affectsY:c}=t;const{isHorizontal:d,isVertical:f}=t,m=d&&f,{xSnapped:y,ySnapped:x}=n,{minWidth:w,maxWidth:j,minHeight:p,maxHeight:h}=r,{x:g,y:v,width:N,height:k,aspectRatio:b}=e;let _=Math.floor(d?y-e.pointerX:0),C=Math.floor(f?x-e.pointerY:0);const M=N+(u?-_:_),I=k+(c?-C:C),R=-o[0]*N,O=-o[1]*k;let S=la(M,w,j),L=la(I,p,h);if(a){let E=0,P=0;u&&_<0?E=Cn(g+_+R,a[0][0]):!u&&_>0&&(E=En(g+M+R,a[1][0])),c&&C<0?P=Cn(v+C+O,a[0][1]):!c&&C>0&&(P=En(v+I+O,a[1][1])),S=Math.max(S,E),L=Math.max(L,P)}if(l){let E=0,P=0;u&&_>0?E=En(g+_,l[0][0]):!u&&_<0&&(E=Cn(g+M,l[1][0])),c&&C>0?P=En(v+C,l[0][1]):!c&&C<0&&(P=Cn(v+I,l[1][1])),S=Math.max(S,E),L=Math.max(L,P)}if(s){if(d){const E=la(M/b,p,h)*b;if(S=Math.max(S,E),a){let P=0;!u&&!c||u&&!c&&m?P=En(v+O+M/b,a[1][1])*b:P=Cn(v+O+(u?_:-_)/b,a[0][1])*b,S=Math.max(S,P)}if(l){let P=0;!u&&!c||u&&!c&&m?P=Cn(v+M/b,l[1][1])*b:P=En(v+(u?_:-_)/b,l[0][1])*b,S=Math.max(S,P)}}if(f){const E=la(I*b,w,j)/b;if(L=Math.max(L,E),a){let P=0;!u&&!c||c&&!u&&m?P=En(g+I*b+R,a[1][0])/b:P=Cn(g+(c?C:-C)*b+R,a[0][0])/b,L=Math.max(L,P)}if(l){let P=0;!u&&!c||c&&!u&&m?P=Cn(g+I*b,l[1][0])/b:P=En(g+(c?C:-C)*b,l[0][0])/b,L=Math.max(L,P)}}}C=C+(C<0?L:-L),_=_+(_<0?S:-S),s&&(m?M>I*b?C=(qh(u,c)?-_:_)/b:_=(qh(u,c)?-C:C)*b:d?(C=_/b,c=u):(_=C*b,u=c));const A=u?g+_:g,z=c?v+C:v;return{width:N+(u?-_:_),height:k+(c?-C:C),x:o[0]*_*(u?-1:1)+A,y:o[1]*C*(c?-1:1)+z}}const Cy={width:0,height:0,x:0,y:0},eC={...Cy,pointerX:0,pointerY:0,aspectRatio:1};function tC(e){return[[0,0],[e.measured.width,e.measured.height]]}function nC(e,t,n){const r=t.position.x+e.position.x,s=t.position.y+e.position.y,o=e.measured.width??0,a=e.measured.height??0,l=n[0]*o,u=n[1]*a;return[[r-l,s-u],[r+o-l,s+a-u]]}function rC({domNode:e,nodeId:t,getStoreItems:n,onChange:r,onEnd:s}){const o=ht(e);let a={controlDirection:Wh("bottom-right"),boundaries:{minWidth:0,minHeight:0,maxWidth:Number.MAX_VALUE,maxHeight:Number.MAX_VALUE},resizeDirection:void 0,keepAspectRatio:!1};function l({controlPosition:c,boundaries:d,keepAspectRatio:f,resizeDirection:m,onResizeStart:y,onResize:x,onResizeEnd:w,shouldResize:j}){let p={...Cy},h={...eC};a={boundaries:d,resizeDirection:m,keepAspectRatio:f,controlDirection:Wh(c)};let g,v=null,N=[],k,b,_,C=!1;const M=O0().on("start",I=>{const{nodeLookup:R,transform:O,snapGrid:S,snapToGrid:L,nodeOrigin:A,paneDomNode:z}=n();if(g=R.get(t),!g)return;v=(z==null?void 0:z.getBoundingClientRect())??null;const{xSnapped:E,ySnapped:P}=Lo(I.sourceEvent,{transform:O,snapGrid:S,snapToGrid:L,containerBounds:v});p={width:g.measured.width??0,height:g.measured.height??0,x:g.position.x??0,y:g.position.y??0},h={...p,pointerX:E,pointerY:P,aspectRatio:p.width/p.height},k=void 0,g.parentId&&(g.extent==="parent"||g.expandParent)&&(k=R.get(g.parentId),b=k&&g.extent==="parent"?tC(k):void 0),N=[],_=void 0;for(const[F,V]of R)if(V.parentId===t&&(N.push({id:F,position:{...V.position},extent:V.extent}),V.extent==="parent"||V.expandParent)){const H=nC(V,g,V.origin??A);_?_=[[Math.min(H[0][0],_[0][0]),Math.min(H[0][1],_[0][1])],[Math.max(H[1][0],_[1][0]),Math.max(H[1][1],_[1][1])]]:_=H}y==null||y(I,{...p})}).on("drag",I=>{const{transform:R,snapGrid:O,snapToGrid:S,nodeOrigin:L}=n(),A=Lo(I.sourceEvent,{transform:R,snapGrid:O,snapToGrid:S,containerBounds:v}),z=[];if(!g)return;const{x:E,y:P,width:F,height:V}=p,H={},q=g.origin??L,{width:U,height:K,x:Y,y:Z}=JS(h,a.controlDirection,A,a.boundaries,a.keepAspectRatio,q,b,_),W=U!==F,ee=K!==V,ie=Y!==E&&W,se=Z!==P&&ee;if(!ie&&!se&&!W&&!ee)return;if((ie||se||q[0]===1||q[1]===1)&&(H.x=ie?Y:p.x,H.y=se?Z:p.y,p.x=H.x,p.y=H.y,N.length>0)){const ve=Y-E,me=Z-P;for(const We of N)We.position={x:We.position.x-ve+q[0]*(U-F),y:We.position.y-me+q[1]*(K-V)},z.push(We)}if((W||ee)&&(H.width=W&&(!a.resizeDirection||a.resizeDirection==="horizontal")?U:p.width,H.height=ee&&(!a.resizeDirection||a.resizeDirection==="vertical")?K:p.height,p.width=H.width,p.height=H.height),k&&g.expandParent){const ve=q[0]*(H.width??0);H.x&&H.x<ve&&(p.x=ve,h.x=h.x-(H.x-ve));const me=q[1]*(H.height??0);H.y&&H.y<me&&(p.y=me,h.y=h.y-(H.y-me))}const re=ZS({width:p.width,prevWidth:F,height:p.height,prevHeight:V,affectsX:a.controlDirection.affectsX,affectsY:a.controlDirection.affectsY}),ne={...p,direction:re};(j==null?void 0:j(I,ne))!==!1&&(C=!0,x==null||x(I,ne),r(H,z))}).on("end",I=>{C&&(w==null||w(I,{...p}),s==null||s({...p}),C=!1)});o.call(M)}function u(){o.on(".drag",null)}return{update:l,destroy:u}}const{useDebugValue:sC}=zt,{useSyncExternalStoreWithSelector:oC}=b0,iC=e=>e;function Ey(e,t=iC,n){const r=oC(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return sC(r),r}const Qh=(e,t)=>{const n=p0(e),r=(s,o=t)=>Ey(n,s,o);return Object.assign(r,n),r},aC=(e,t)=>e?Qh(e,t):Qh;function je(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[r,s]of e)if(!Object.is(s,t.get(r)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}const Bl=T.createContext(null),lC=Bl.Provider,Ty=rn.error001();function de(e,t){const n=T.useContext(Bl);if(n===null)throw new Error(Ty);return Ey(n,e,t)}function ke(){const e=T.useContext(Bl);if(e===null)throw new Error(Ty);return T.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe}),[e])}const Xh={display:"none"},uC={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},Ry="react-flow__node-desc",My="react-flow__edge-desc",cC="react-flow__aria-live",dC=e=>e.ariaLiveMessage,fC=e=>e.ariaLabelConfig;function mC({rfId:e}){const t=de(dC);return i.jsx("div",{id:`${cC}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:uC,children:t})}function hC({rfId:e,disableKeyboardA11y:t}){const n=de(fC);return i.jsxs(i.Fragment,{children:[i.jsx("div",{id:`${Ry}-${e}`,style:Xh,children:t?n["node.a11yDescription.default"]:n["node.a11yDescription.keyboardDisabled"]}),i.jsx("div",{id:`${My}-${e}`,style:Xh,children:n["edge.a11yDescription.default"]}),!t&&i.jsx(mC,{rfId:e})]})}const Ul=T.forwardRef(({position:e="top-left",children:t,className:n,style:r,...s},o)=>{const a=`${e}`.split("-");return i.jsx("div",{className:De(["react-flow__panel",n,...a]),style:r,ref:o,...s,children:t})});Ul.displayName="Panel";function pC({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:i.jsx(Ul,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:i.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const gC=e=>{const t=[],n=[];for(const[,r]of e.nodeLookup)r.selected&&t.push(r.internals.userNode);for(const[,r]of e.edgeLookup)r.selected&&n.push(r);return{selectedNodes:t,selectedEdges:n}},ua=e=>e.id;function xC(e,t){return je(e.selectedNodes.map(ua),t.selectedNodes.map(ua))&&je(e.selectedEdges.map(ua),t.selectedEdges.map(ua))}function yC({onSelectionChange:e}){const t=ke(),{selectedNodes:n,selectedEdges:r}=de(gC,xC);return T.useEffect(()=>{const s={nodes:n,edges:r};e==null||e(s),t.getState().onSelectionChangeHandlers.forEach(o=>o(s))},[n,r,e]),null}const vC=e=>!!e.onSelectionChangeHandlers;function bC({onSelectionChange:e}){const t=de(vC);return e||t?i.jsx(yC,{onSelectionChange:e}):null}const Py=[0,0],wC={x:0,y:0,zoom:1},NC=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","autoPanOnNodeFocus","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","connectionDragThreshold","onBeforeDelete","debug","autoPanSpeed","ariaLabelConfig","zIndexMode"],Kh=[...NC,"rfId"],jC=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges}),Yh={translateExtent:li,nodeOrigin:Py,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1"};function kC(e){const{setNodes:t,setEdges:n,setMinZoom:r,setMaxZoom:s,setTranslateExtent:o,setNodeExtent:a,reset:l,setDefaultNodesAndEdges:u}=de(jC,je),c=ke();T.useEffect(()=>(u(e.defaultNodes,e.defaultEdges),()=>{d.current=Yh,l()}),[]);const d=T.useRef(Yh);return T.useEffect(()=>{for(const f of Kh){const m=e[f],y=d.current[f];m!==y&&(typeof e[f]>"u"||(f==="nodes"?t(m):f==="edges"?n(m):f==="minZoom"?r(m):f==="maxZoom"?s(m):f==="translateExtent"?o(m):f==="nodeExtent"?a(m):f==="ariaLabelConfig"?c.setState({ariaLabelConfig:gS(m)}):f==="fitView"?c.setState({fitViewQueued:m}):f==="fitViewOptions"?c.setState({fitViewOptions:m}):c.setState({[f]:m})))}d.current=e},Kh.map(f=>e[f])),null}function Gh(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function _C(e){var r;const[t,n]=T.useState(e==="system"?null:e);return T.useEffect(()=>{if(e!=="system"){n(e);return}const s=Gh(),o=()=>n(s!=null&&s.matches?"dark":"light");return o(),s==null||s.addEventListener("change",o),()=>{s==null||s.removeEventListener("change",o)}},[e]),t!==null?t:(r=Gh())!=null&&r.matches?"dark":"light"}const Zh=typeof document<"u"?document:null;function fi(e=null,t={target:Zh,actInsideInputWithModifier:!0}){const[n,r]=T.useState(!1),s=T.useRef(!1),o=T.useRef(new Set([])),[a,l]=T.useMemo(()=>{if(e!==null){const c=(Array.isArray(e)?e:[e]).filter(f=>typeof f=="string").map(f=>f.replace("+",`
`).replace(`

`,`
+`).split(`
`)),d=c.reduce((f,m)=>f.concat(...m),[]);return[c,d]}return[[],[]]},[e]);return T.useEffect(()=>{const u=(t==null?void 0:t.target)??Zh,c=(t==null?void 0:t.actInsideInputWithModifier)??!0;if(e!==null){const d=y=>{var j,p;if(s.current=y.ctrlKey||y.metaKey||y.shiftKey||y.altKey,(!s.current||s.current&&!c)&&cy(y))return!1;const w=ep(y.code,l);if(o.current.add(y[w]),Jh(a,o.current,!1)){const h=((p=(j=y.composedPath)==null?void 0:j.call(y))==null?void 0:p[0])||y.target,g=(h==null?void 0:h.nodeName)==="BUTTON"||(h==null?void 0:h.nodeName)==="A";t.preventDefault!==!1&&(s.current||!g)&&y.preventDefault(),r(!0)}},f=y=>{const x=ep(y.code,l);Jh(a,o.current,!0)?(r(!1),o.current.clear()):o.current.delete(y[x]),y.key==="Meta"&&o.current.clear(),s.current=!1},m=()=>{o.current.clear(),r(!1)};return u==null||u.addEventListener("keydown",d),u==null||u.addEventListener("keyup",f),window.addEventListener("blur",m),window.addEventListener("contextmenu",m),()=>{u==null||u.removeEventListener("keydown",d),u==null||u.removeEventListener("keyup",f),window.removeEventListener("blur",m),window.removeEventListener("contextmenu",m)}}},[e,r]),n}function Jh(e,t,n){return e.filter(r=>n||r.length===t.size).some(r=>r.every(s=>t.has(s)))}function ep(e,t){return t.includes(e)?"code":"key"}const SC=()=>{const e=ke();return T.useMemo(()=>({zoomIn:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1.2,{duration:t==null?void 0:t.duration}):Promise.resolve(!1)},zoomOut:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1/1.2,{duration:t==null?void 0:t.duration}):Promise.resolve(!1)},zoomTo:(t,n)=>{const{panZoom:r}=e.getState();return r?r.scaleTo(t,{duration:n==null?void 0:n.duration}):Promise.resolve(!1)},getZoom:()=>e.getState().transform[2],setViewport:async(t,n)=>{const{transform:[r,s,o],panZoom:a}=e.getState();return a?(await a.setViewport({x:t.x??r,y:t.y??s,zoom:t.zoom??o},n),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[t,n,r]=e.getState().transform;return{x:t,y:n,zoom:r}},setCenter:async(t,n,r)=>e.getState().setCenter(t,n,r),fitBounds:async(t,n)=>{const{width:r,height:s,minZoom:o,maxZoom:a,panZoom:l}=e.getState(),u=kf(t,r,s,o,a,(n==null?void 0:n.padding)??.1);return l?(await l.setViewport(u,{duration:n==null?void 0:n.duration,ease:n==null?void 0:n.ease,interpolate:n==null?void 0:n.interpolate}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(t,n={})=>{const{transform:r,snapGrid:s,snapToGrid:o,domNode:a}=e.getState();if(!a)return t;const{x:l,y:u}=a.getBoundingClientRect(),c={x:t.x-l,y:t.y-u},d=n.snapGrid??s,f=n.snapToGrid??o;return Ti(c,r,f,d)},flowToScreenPosition:t=>{const{transform:n,domNode:r}=e.getState();if(!r)return t;const{x:s,y:o}=r.getBoundingClientRect(),a=ml(t,n);return{x:a.x+s,y:a.y+o}}}),[])};function Iy(e,t){const n=[],r=new Map,s=[];for(const o of e)if(o.type==="add"){s.push(o);continue}else if(o.type==="remove"||o.type==="replace")r.set(o.id,[o]);else{const a=r.get(o.id);a?a.push(o):r.set(o.id,[o])}for(const o of t){const a=r.get(o.id);if(!a){n.push(o);continue}if(a[0].type==="remove")continue;if(a[0].type==="replace"){n.push({...a[0].item});continue}const l={...o};for(const u of a)CC(u,l);n.push(l)}return s.length&&s.forEach(o=>{o.index!==void 0?n.splice(o.index,0,{...o.item}):n.push({...o.item})}),n}function CC(e,t){switch(e.type){case"select":{t.selected=e.selected;break}case"position":{typeof e.position<"u"&&(t.position=e.position),typeof e.dragging<"u"&&(t.dragging=e.dragging);break}case"dimensions":{typeof e.dimensions<"u"&&(t.measured={...e.dimensions},e.setAttributes&&((e.setAttributes===!0||e.setAttributes==="width")&&(t.width=e.dimensions.width),(e.setAttributes===!0||e.setAttributes==="height")&&(t.height=e.dimensions.height))),typeof e.resizing=="boolean"&&(t.resizing=e.resizing);break}}}function Dy(e,t){return Iy(e,t)}function Ay(e,t){return Iy(e,t)}function cr(e,t){return{id:e,type:"select",selected:t}}function ds(e,t=new Set,n=!1){const r=[];for(const[s,o]of e){const a=t.has(s);!(o.selected===void 0&&!a)&&o.selected!==a&&(n&&(o.selected=a),r.push(cr(o.id,a)))}return r}function tp({items:e=[],lookup:t}){var s;const n=[],r=new Map(e.map(o=>[o.id,o]));for(const[o,a]of e.entries()){const l=t.get(a.id),u=((s=l==null?void 0:l.internals)==null?void 0:s.userNode)??l;u!==void 0&&u!==a&&n.push({id:a.id,item:a,type:"replace"}),u===void 0&&n.push({item:a,type:"add",index:o})}for(const[o]of t)r.get(o)===void 0&&n.push({id:o,type:"remove"});return n}function np(e){return{id:e.id,type:"remove"}}const rp=e=>iS(e),EC=e=>ny(e);function Oy(e){return T.forwardRef(e)}const TC=typeof window<"u"?T.useLayoutEffect:T.useEffect;function sp(e){const[t,n]=T.useState(BigInt(0)),[r]=T.useState(()=>RC(()=>n(s=>s+BigInt(1))));return TC(()=>{const s=r.get();s.length&&(e(s),r.reset())},[t]),r}function RC(e){let t=[];return{get:()=>t,reset:()=>{t=[]},push:n=>{t.push(n),e()}}}const zy=T.createContext(null);function MC({children:e}){const t=ke(),n=T.useCallback(l=>{const{nodes:u=[],setNodes:c,hasDefaultNodes:d,onNodesChange:f,nodeLookup:m,fitViewQueued:y,onNodesChangeMiddlewareMap:x}=t.getState();let w=u;for(const p of l)w=typeof p=="function"?p(w):p;let j=tp({items:w,lookup:m});for(const p of x.values())j=p(j);d&&c(w),j.length>0?f==null||f(j):y&&window.requestAnimationFrame(()=>{const{fitViewQueued:p,nodes:h,setNodes:g}=t.getState();p&&g(h)})},[]),r=sp(n),s=T.useCallback(l=>{const{edges:u=[],setEdges:c,hasDefaultEdges:d,onEdgesChange:f,edgeLookup:m}=t.getState();let y=u;for(const x of l)y=typeof x=="function"?x(y):x;d?c(y):f&&f(tp({items:y,lookup:m}))},[]),o=sp(s),a=T.useMemo(()=>({nodeQueue:r,edgeQueue:o}),[]);return i.jsx(zy.Provider,{value:a,children:e})}function PC(){const e=T.useContext(zy);if(!e)throw new Error("useBatchContext must be used within a BatchProvider");return e}const IC=e=>!!e.panZoom;function eo(){const e=SC(),t=ke(),n=PC(),r=de(IC),s=T.useMemo(()=>{const o=f=>t.getState().nodeLookup.get(f),a=f=>{n.nodeQueue.push(f)},l=f=>{n.edgeQueue.push(f)},u=f=>{var p,h;const{nodeLookup:m,nodeOrigin:y}=t.getState(),x=rp(f)?f:m.get(f.id),w=x.parentId?ly(x.position,x.measured,x.parentId,m,y):x.position,j={...x,position:w,width:((p=x.measured)==null?void 0:p.width)??x.width,height:((h=x.measured)==null?void 0:h.height)??x.height};return Us(j)},c=(f,m,y={replace:!1})=>{a(x=>x.map(w=>{if(w.id===f){const j=typeof m=="function"?m(w):m;return y.replace&&rp(j)?j:{...w,...j}}return w}))},d=(f,m,y={replace:!1})=>{l(x=>x.map(w=>{if(w.id===f){const j=typeof m=="function"?m(w):m;return y.replace&&EC(j)?j:{...w,...j}}return w}))};return{getNodes:()=>t.getState().nodes.map(f=>({...f})),getNode:f=>{var m;return(m=o(f))==null?void 0:m.internals.userNode},getInternalNode:o,getEdges:()=>{const{edges:f=[]}=t.getState();return f.map(m=>({...m}))},getEdge:f=>t.getState().edgeLookup.get(f),setNodes:a,setEdges:l,addNodes:f=>{const m=Array.isArray(f)?f:[f];n.nodeQueue.push(y=>[...y,...m])},addEdges:f=>{const m=Array.isArray(f)?f:[f];n.edgeQueue.push(y=>[...y,...m])},toObject:()=>{const{nodes:f=[],edges:m=[],transform:y}=t.getState(),[x,w,j]=y;return{nodes:f.map(p=>({...p})),edges:m.map(p=>({...p})),viewport:{x,y:w,zoom:j}}},deleteElements:async({nodes:f=[],edges:m=[]})=>{const{nodes:y,edges:x,onNodesDelete:w,onEdgesDelete:j,triggerNodeChanges:p,triggerEdgeChanges:h,onDelete:g,onBeforeDelete:v}=t.getState(),{nodes:N,edges:k}=await dS({nodesToRemove:f,edgesToRemove:m,nodes:y,edges:x,onBeforeDelete:v}),b=k.length>0,_=N.length>0;if(b){const C=k.map(np);j==null||j(k),h(C)}if(_){const C=N.map(np);w==null||w(N),p(C)}return(_||b)&&(g==null||g({nodes:N,edges:k})),{deletedNodes:N,deletedEdges:k}},getIntersectingNodes:(f,m=!0,y)=>{const x=Dh(f),w=x?f:u(f),j=y!==void 0;return w?(y||t.getState().nodes).filter(p=>{const h=t.getState().nodeLookup.get(p.id);if(h&&!x&&(p.id===f.id||!h.internals.positionAbsolute))return!1;const g=Us(j?p:h),v=ci(g,w);return m&&v>0||v>=g.width*g.height||v>=w.width*w.height}):[]},isNodeIntersecting:(f,m,y=!0)=>{const w=Dh(f)?f:u(f);if(!w)return!1;const j=ci(w,m);return y&&j>0||j>=m.width*m.height||j>=w.width*w.height},updateNode:c,updateNodeData:(f,m,y={replace:!1})=>{c(f,x=>{const w=typeof m=="function"?m(x):m;return y.replace?{...x,data:w}:{...x,data:{...x.data,...w}}},y)},updateEdge:d,updateEdgeData:(f,m,y={replace:!1})=>{d(f,x=>{const w=typeof m=="function"?m(x):m;return y.replace?{...x,data:w}:{...x,data:{...x.data,...w}}},y)},getNodesBounds:f=>{const{nodeLookup:m,nodeOrigin:y}=t.getState();return aS(f,{nodeLookup:m,nodeOrigin:y})},getHandleConnections:({type:f,id:m,nodeId:y})=>{var x;return Array.from(((x=t.getState().connectionLookup.get(`${y}-${f}${m?`-${m}`:""}`))==null?void 0:x.values())??[])},getNodeConnections:({type:f,handleId:m,nodeId:y})=>{var x;return Array.from(((x=t.getState().connectionLookup.get(`${y}${f?m?`-${f}-${m}`:`-${f}`:""}`))==null?void 0:x.values())??[])},fitView:async f=>{const m=t.getState().fitViewResolver??pS();return t.setState({fitViewQueued:!0,fitViewOptions:f,fitViewResolver:m}),n.nodeQueue.push(y=>[...y]),m.promise}}},[]);return T.useMemo(()=>({...s,...e,viewportInitialized:r}),[r])}const op=e=>e.selected,DC=typeof window<"u"?window:void 0;function AC({deleteKeyCode:e,multiSelectionKeyCode:t}){const n=ke(),{deleteElements:r}=eo(),s=fi(e,{actInsideInputWithModifier:!1}),o=fi(t,{target:DC});T.useEffect(()=>{if(s){const{edges:a,nodes:l}=n.getState();r({nodes:l.filter(op),edges:a.filter(op)}),n.setState({nodesSelectionActive:!1})}},[s]),T.useEffect(()=>{n.setState({multiSelectionActive:o})},[o])}function OC(e){const t=ke();T.useEffect(()=>{const n=()=>{var s,o,a,l;if(!e.current||!(((o=(s=e.current).checkVisibility)==null?void 0:o.call(s))??!0))return!1;const r=_f(e.current);(r.height===0||r.width===0)&&((l=(a=t.getState()).onError)==null||l.call(a,"004",rn.error004())),t.setState({width:r.width||500,height:r.height||500})};if(e.current){n(),window.addEventListener("resize",n);const r=new ResizeObserver(()=>n());return r.observe(e.current),()=>{window.removeEventListener("resize",n),r&&e.current&&r.unobserve(e.current)}}},[])}const Wl={position:"absolute",width:"100%",height:"100%",top:0,left:0},zC=e=>({userSelectionActive:e.userSelectionActive,lib:e.lib,connectionInProgress:e.connection.inProgress});function LC({onPaneContextMenu:e,zoomOnScroll:t=!0,zoomOnPinch:n=!0,panOnScroll:r=!1,panOnScrollSpeed:s=.5,panOnScrollMode:o=Rr.Free,zoomOnDoubleClick:a=!0,panOnDrag:l=!0,defaultViewport:u,translateExtent:c,minZoom:d,maxZoom:f,zoomActivationKeyCode:m,preventScrolling:y=!0,children:x,noWheelClassName:w,noPanClassName:j,onViewportChange:p,isControlledViewport:h,paneClickDistance:g,selectionOnDrag:v}){const N=ke(),k=T.useRef(null),{userSelectionActive:b,lib:_,connectionInProgress:C}=de(zC,je),M=fi(m),I=T.useRef();OC(k);const R=T.useCallback(O=>{p==null||p({x:O[0],y:O[1],zoom:O[2]}),h||N.setState({transform:O})},[p,h]);return T.useEffect(()=>{if(k.current){I.current=GS({domNode:k.current,minZoom:d,maxZoom:f,translateExtent:c,viewport:u,onDraggingChange:A=>N.setState({paneDragging:A}),onPanZoomStart:(A,z)=>{const{onViewportChangeStart:E,onMoveStart:P}=N.getState();P==null||P(A,z),E==null||E(z)},onPanZoom:(A,z)=>{const{onViewportChange:E,onMove:P}=N.getState();P==null||P(A,z),E==null||E(z)},onPanZoomEnd:(A,z)=>{const{onViewportChangeEnd:E,onMoveEnd:P}=N.getState();P==null||P(A,z),E==null||E(z)}});const{x:O,y:S,zoom:L}=I.current.getViewport();return N.setState({panZoom:I.current,transform:[O,S,L],domNode:k.current.closest(".react-flow")}),()=>{var A;(A=I.current)==null||A.destroy()}}},[]),T.useEffect(()=>{var O;(O=I.current)==null||O.update({onPaneContextMenu:e,zoomOnScroll:t,zoomOnPinch:n,panOnScroll:r,panOnScrollSpeed:s,panOnScrollMode:o,zoomOnDoubleClick:a,panOnDrag:l,zoomActivationKeyPressed:M,preventScrolling:y,noPanClassName:j,userSelectionActive:b,noWheelClassName:w,lib:_,onTransformChange:R,connectionInProgress:C,selectionOnDrag:v,paneClickDistance:g})},[e,t,n,r,s,o,a,l,M,y,j,b,w,_,R,C,v,g]),i.jsx("div",{className:"react-flow__renderer",ref:k,style:Wl,children:x})}const FC=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function $C(){const{userSelectionActive:e,userSelectionRect:t}=de(FC,je);return e&&t?i.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}const zu=(e,t)=>n=>{n.target===t.current&&(e==null||e(n))},VC=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,connectionInProgress:e.connection.inProgress,dragging:e.paneDragging});function HC({isSelecting:e,selectionKeyPressed:t,selectionMode:n=ui.Full,panOnDrag:r,paneClickDistance:s,selectionOnDrag:o,onSelectionStart:a,onSelectionEnd:l,onPaneClick:u,onPaneContextMenu:c,onPaneScroll:d,onPaneMouseEnter:f,onPaneMouseMove:m,onPaneMouseLeave:y,children:x}){const w=ke(),{userSelectionActive:j,elementsSelectable:p,dragging:h,connectionInProgress:g}=de(VC,je),v=p&&(e||j),N=T.useRef(null),k=T.useRef(),b=T.useRef(new Set),_=T.useRef(new Set),C=T.useRef(!1),M=E=>{if(C.current||g){C.current=!1;return}u==null||u(E),w.getState().resetSelectedElements(),w.setState({nodesSelectionActive:!1})},I=E=>{if(Array.isArray(r)&&(r!=null&&r.includes(2))){E.preventDefault();return}c==null||c(E)},R=d?E=>d(E):void 0,O=E=>{C.current&&(E.stopPropagation(),C.current=!1)},S=E=>{var K,Y;const{domNode:P}=w.getState();if(k.current=P==null?void 0:P.getBoundingClientRect(),!k.current)return;const F=E.target===N.current;if(!F&&!!E.target.closest(".nokey")||!e||!(o&&F||t)||E.button!==0||!E.isPrimary)return;(Y=(K=E.target)==null?void 0:K.setPointerCapture)==null||Y.call(K,E.pointerId),C.current=!1;const{x:q,y:U}=Ft(E.nativeEvent,k.current);w.setState({userSelectionRect:{width:0,height:0,startX:q,startY:U,x:q,y:U}}),F||(E.stopPropagation(),E.preventDefault())},L=E=>{const{userSelectionRect:P,transform:F,nodeLookup:V,edgeLookup:H,connectionLookup:q,triggerNodeChanges:U,triggerEdgeChanges:K,defaultEdgeOptions:Y,resetSelectedElements:Z}=w.getState();if(!k.current||!P)return;const{x:W,y:ee}=Ft(E.nativeEvent,k.current),{startX:ie,startY:se}=P;if(!C.current){const me=t?0:s;if(Math.hypot(W-ie,ee-se)<=me)return;Z(),a==null||a(E)}C.current=!0;const re={startX:ie,startY:se,x:W<ie?W:ie,y:ee<se?ee:se,width:Math.abs(W-ie),height:Math.abs(ee-se)},ne=b.current,he=_.current;b.current=new Set(jf(V,re,F,n===ui.Partial,!0).map(me=>me.id)),_.current=new Set;const ve=(Y==null?void 0:Y.selectable)??!0;for(const me of b.current){const We=q.get(me);if(We)for(const{edgeId:_n}of We.values()){const an=H.get(_n);an&&(an.selectable??ve)&&_.current.add(_n)}}if(!Ah(ne,b.current)){const me=ds(V,b.current,!0);U(me)}if(!Ah(he,_.current)){const me=ds(H,_.current);K(me)}w.setState({userSelectionRect:re,userSelectionActive:!0,nodesSelectionActive:!1})},A=E=>{var P,F;E.button===0&&((F=(P=E.target)==null?void 0:P.releasePointerCapture)==null||F.call(P,E.pointerId),!j&&E.target===N.current&&w.getState().userSelectionRect&&(M==null||M(E)),w.setState({userSelectionActive:!1,userSelectionRect:null}),C.current&&(l==null||l(E),w.setState({nodesSelectionActive:b.current.size>0})))},z=r===!0||Array.isArray(r)&&r.includes(0);return i.jsxs("div",{className:De(["react-flow__pane",{draggable:z,dragging:h,selection:e}]),onClick:v?void 0:zu(M,N),onContextMenu:zu(I,N),onWheel:zu(R,N),onPointerEnter:v?void 0:f,onPointerMove:v?L:m,onPointerUp:v?A:void 0,onPointerDownCapture:v?S:void 0,onClickCapture:v?O:void 0,onPointerLeave:y,ref:N,style:Wl,children:[x,i.jsx($C,{})]})}function ud({id:e,store:t,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:s,unselectNodesAndEdges:o,multiSelectionActive:a,nodeLookup:l,onError:u}=t.getState(),c=l.get(e);if(!c){u==null||u("012",rn.error012(e));return}t.setState({nodesSelectionActive:!1}),c.selected?(n||c.selected&&a)&&(o({nodes:[c],edges:[]}),requestAnimationFrame(()=>{var d;return(d=r==null?void 0:r.current)==null?void 0:d.blur()})):s([e])}function Ly({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:r,nodeId:s,isSelectable:o,nodeClickDistance:a}){const l=ke(),[u,c]=T.useState(!1),d=T.useRef();return T.useEffect(()=>{d.current=zS({getStoreItems:()=>l.getState(),onNodeMouseDown:f=>{ud({id:f,store:l,nodeRef:e})},onDragStart:()=>{c(!0)},onDragStop:()=>{c(!1)}})},[]),T.useEffect(()=>{var f,m;if(t)(f=d.current)==null||f.destroy();else if(e.current)return(m=d.current)==null||m.update({noDragClassName:n,handleSelector:r,domNode:e.current,isSelectable:o,nodeId:s,nodeClickDistance:a}),()=>{var y;(y=d.current)==null||y.destroy()}},[n,r,t,o,e,s]),u}const BC=e=>t=>t.selected&&(t.draggable||e&&typeof t.draggable>"u");function Fy(){const e=ke();return T.useCallback(n=>{const{nodeExtent:r,snapToGrid:s,snapGrid:o,nodesDraggable:a,onError:l,updateNodePositions:u,nodeLookup:c,nodeOrigin:d}=e.getState(),f=new Map,m=BC(a),y=s?o[0]:5,x=s?o[1]:5,w=n.direction.x*y*n.factor,j=n.direction.y*x*n.factor;for(const[,p]of c){if(!m(p))continue;let h={x:p.internals.positionAbsolute.x+w,y:p.internals.positionAbsolute.y+j};s&&(h=Ei(h,o));const{position:g,positionAbsolute:v}=ry({nodeId:p.id,nextPosition:h,nodeLookup:c,nodeExtent:r,nodeOrigin:d,onError:l});p.position=g,p.internals.positionAbsolute=v,f.set(p.id,p)}u(f)},[])}const Mf=T.createContext(null),UC=Mf.Provider;Mf.Consumer;const $y=()=>T.useContext(Mf),WC=e=>({connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName,rfId:e.rfId}),qC=(e,t,n)=>r=>{const{connectionClickStartHandle:s,connectionMode:o,connection:a}=r,{fromHandle:l,toHandle:u,isValid:c}=a,d=(u==null?void 0:u.nodeId)===e&&(u==null?void 0:u.id)===t&&(u==null?void 0:u.type)===n;return{connectingFrom:(l==null?void 0:l.nodeId)===e&&(l==null?void 0:l.id)===t&&(l==null?void 0:l.type)===n,connectingTo:d,clickConnecting:(s==null?void 0:s.nodeId)===e&&(s==null?void 0:s.id)===t&&(s==null?void 0:s.type)===n,isPossibleEndHandle:o===Hs.Strict?(l==null?void 0:l.type)!==n:e!==(l==null?void 0:l.nodeId)||t!==(l==null?void 0:l.id),connectionInProcess:!!l,clickConnectionInProcess:!!s,valid:d&&c}};function QC({type:e="source",position:t=G.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:s=!0,isConnectableEnd:o=!0,id:a,onConnect:l,children:u,className:c,onMouseDown:d,onTouchStart:f,...m},y){var L,A;const x=a||null,w=e==="target",j=ke(),p=$y(),{connectOnClick:h,noPanClassName:g,rfId:v}=de(WC,je),{connectingFrom:N,connectingTo:k,clickConnecting:b,isPossibleEndHandle:_,connectionInProcess:C,clickConnectionInProcess:M,valid:I}=de(qC(p,x,e),je);p||(A=(L=j.getState()).onError)==null||A.call(L,"010",rn.error010());const R=z=>{const{defaultEdgeOptions:E,onConnect:P,hasDefaultEdges:F}=j.getState(),V={...E,...z};if(F){const{edges:H,setEdges:q}=j.getState();q(py(V,H))}P==null||P(V),l==null||l(V)},O=z=>{if(!p)return;const E=dy(z.nativeEvent);if(s&&(E&&z.button===0||!E)){const P=j.getState();ld.onPointerDown(z.nativeEvent,{handleDomNode:z.currentTarget,autoPanOnConnect:P.autoPanOnConnect,connectionMode:P.connectionMode,connectionRadius:P.connectionRadius,domNode:P.domNode,nodeLookup:P.nodeLookup,lib:P.lib,isTarget:w,handleId:x,nodeId:p,flowId:P.rfId,panBy:P.panBy,cancelConnection:P.cancelConnection,onConnectStart:P.onConnectStart,onConnectEnd:P.onConnectEnd,updateConnection:P.updateConnection,onConnect:R,isValidConnection:n||P.isValidConnection,getTransform:()=>j.getState().transform,getFromHandle:()=>j.getState().connection.fromHandle,autoPanSpeed:P.autoPanSpeed,dragThreshold:P.connectionDragThreshold})}E?d==null||d(z):f==null||f(z)},S=z=>{const{onClickConnectStart:E,onClickConnectEnd:P,connectionClickStartHandle:F,connectionMode:V,isValidConnection:H,lib:q,rfId:U,nodeLookup:K,connection:Y}=j.getState();if(!p||!F&&!s)return;if(!F){E==null||E(z.nativeEvent,{nodeId:p,handleId:x,handleType:e}),j.setState({connectionClickStartHandle:{nodeId:p,type:e,id:x}});return}const Z=uy(z.target),W=n||H,{connection:ee,isValid:ie}=ld.isValid(z.nativeEvent,{handle:{nodeId:p,id:x,type:e},connectionMode:V,fromNodeId:F.nodeId,fromHandleId:F.id||null,fromType:F.type,isValidConnection:W,flowId:U,doc:Z,lib:q,nodeLookup:K});ie&&ee&&R(ee);const se=structuredClone(Y);delete se.inProgress,se.toPosition=se.toHandle?se.toHandle.position:null,P==null||P(z,se),j.setState({connectionClickStartHandle:null})};return i.jsx("div",{"data-handleid":x,"data-nodeid":p,"data-handlepos":t,"data-id":`${v}-${p}-${x}-${e}`,className:De(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",g,c,{source:!w,target:w,connectable:r,connectablestart:s,connectableend:o,clickconnecting:b,connectingfrom:N,connectingto:k,valid:I,connectionindicator:r&&(!C||_)&&(C||M?o:s)}]),onMouseDown:O,onTouchStart:O,onClick:h?S:void 0,ref:y,...m,children:u})}const Qs=T.memo(Oy(QC));function XC({data:e,isConnectable:t,sourcePosition:n=G.Bottom}){return i.jsxs(i.Fragment,{children:[e==null?void 0:e.label,i.jsx(Qs,{type:"source",position:n,isConnectable:t})]})}function KC({data:e,isConnectable:t,targetPosition:n=G.Top,sourcePosition:r=G.Bottom}){return i.jsxs(i.Fragment,{children:[i.jsx(Qs,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label,i.jsx(Qs,{type:"source",position:r,isConnectable:t})]})}function YC(){return null}function GC({data:e,isConnectable:t,targetPosition:n=G.Top}){return i.jsxs(i.Fragment,{children:[i.jsx(Qs,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label]})}const pl={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},ip={input:XC,default:KC,output:GC,group:YC};function ZC(e){var t,n,r,s;return e.internals.handleBounds===void 0?{width:e.width??e.initialWidth??((t=e.style)==null?void 0:t.width),height:e.height??e.initialHeight??((n=e.style)==null?void 0:n.height)}:{width:e.width??((r=e.style)==null?void 0:r.width),height:e.height??((s=e.style)==null?void 0:s.height)}}const JC=e=>{const{width:t,height:n,x:r,y:s}=Ci(e.nodeLookup,{filter:o=>!!o.selected});return{width:Lt(t)?t:null,height:Lt(n)?n:null,userSelectionActive:e.userSelectionActive,transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]}) translate(${r}px,${s}px)`}};function eE({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const r=ke(),{width:s,height:o,transformString:a,userSelectionActive:l}=de(JC,je),u=Fy(),c=T.useRef(null);if(T.useEffect(()=>{var m;n||(m=c.current)==null||m.focus({preventScroll:!0})},[n]),Ly({nodeRef:c}),l||!s||!o)return null;const d=e?m=>{const y=r.getState().nodes.filter(x=>x.selected);e(m,y)}:void 0,f=m=>{Object.prototype.hasOwnProperty.call(pl,m.key)&&(m.preventDefault(),u({direction:pl[m.key],factor:m.shiftKey?4:1}))};return i.jsx("div",{className:De(["react-flow__nodesselection","react-flow__container",t]),style:{transform:a},children:i.jsx("div",{ref:c,className:"react-flow__nodesselection-rect",onContextMenu:d,tabIndex:n?void 0:-1,onKeyDown:n?void 0:f,style:{width:s,height:o}})})}const ap=typeof window<"u"?window:void 0,tE=e=>({nodesSelectionActive:e.nodesSelectionActive,userSelectionActive:e.userSelectionActive});function Vy({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:s,onPaneContextMenu:o,onPaneScroll:a,paneClickDistance:l,deleteKeyCode:u,selectionKeyCode:c,selectionOnDrag:d,selectionMode:f,onSelectionStart:m,onSelectionEnd:y,multiSelectionKeyCode:x,panActivationKeyCode:w,zoomActivationKeyCode:j,elementsSelectable:p,zoomOnScroll:h,zoomOnPinch:g,panOnScroll:v,panOnScrollSpeed:N,panOnScrollMode:k,zoomOnDoubleClick:b,panOnDrag:_,defaultViewport:C,translateExtent:M,minZoom:I,maxZoom:R,preventScrolling:O,onSelectionContextMenu:S,noWheelClassName:L,noPanClassName:A,disableKeyboardA11y:z,onViewportChange:E,isControlledViewport:P}){const{nodesSelectionActive:F,userSelectionActive:V}=de(tE,je),H=fi(c,{target:ap}),q=fi(w,{target:ap}),U=q||_,K=q||v,Y=d&&U!==!0,Z=H||V||Y;return AC({deleteKeyCode:u,multiSelectionKeyCode:x}),i.jsx(LC,{onPaneContextMenu:o,elementsSelectable:p,zoomOnScroll:h,zoomOnPinch:g,panOnScroll:K,panOnScrollSpeed:N,panOnScrollMode:k,zoomOnDoubleClick:b,panOnDrag:!H&&U,defaultViewport:C,translateExtent:M,minZoom:I,maxZoom:R,zoomActivationKeyCode:j,preventScrolling:O,noWheelClassName:L,noPanClassName:A,onViewportChange:E,isControlledViewport:P,paneClickDistance:l,selectionOnDrag:Y,children:i.jsxs(HC,{onSelectionStart:m,onSelectionEnd:y,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:s,onPaneContextMenu:o,onPaneScroll:a,panOnDrag:U,isSelecting:!!Z,selectionMode:f,selectionKeyPressed:H,paneClickDistance:l,selectionOnDrag:Y,children:[e,F&&i.jsx(eE,{onSelectionContextMenu:S,noPanClassName:A,disableKeyboardA11y:z})]})})}Vy.displayName="FlowRenderer";const nE=T.memo(Vy),rE=e=>t=>e?jf(t.nodeLookup,{x:0,y:0,width:t.width,height:t.height},t.transform,!0).map(n=>n.id):Array.from(t.nodeLookup.keys());function sE(e){return de(T.useCallback(rE(e),[e]),je)}const oE=e=>e.updateNodeInternals;function iE(){const e=de(oE),[t]=T.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(n=>{const r=new Map;n.forEach(s=>{const o=s.target.getAttribute("data-id");r.set(o,{id:o,nodeElement:s.target,force:!0})}),e(r)}));return T.useEffect(()=>()=>{t==null||t.disconnect()},[t]),t}function aE({node:e,nodeType:t,hasDimensions:n,resizeObserver:r}){const s=ke(),o=T.useRef(null),a=T.useRef(null),l=T.useRef(e.sourcePosition),u=T.useRef(e.targetPosition),c=T.useRef(t),d=n&&!!e.internals.handleBounds;return T.useEffect(()=>{o.current&&!e.hidden&&(!d||a.current!==o.current)&&(a.current&&(r==null||r.unobserve(a.current)),r==null||r.observe(o.current),a.current=o.current)},[d,e.hidden]),T.useEffect(()=>()=>{a.current&&(r==null||r.unobserve(a.current),a.current=null)},[]),T.useEffect(()=>{if(o.current){const f=c.current!==t,m=l.current!==e.sourcePosition,y=u.current!==e.targetPosition;(f||m||y)&&(c.current=t,l.current=e.sourcePosition,u.current=e.targetPosition,s.getState().updateNodeInternals(new Map([[e.id,{id:e.id,nodeElement:o.current,force:!0}]])))}},[e.id,t,e.sourcePosition,e.targetPosition]),o}function lE({id:e,onClick:t,onMouseEnter:n,onMouseMove:r,onMouseLeave:s,onContextMenu:o,onDoubleClick:a,nodesDraggable:l,elementsSelectable:u,nodesConnectable:c,nodesFocusable:d,resizeObserver:f,noDragClassName:m,noPanClassName:y,disableKeyboardA11y:x,rfId:w,nodeTypes:j,nodeClickDistance:p,onError:h}){const{node:g,internals:v,isParent:N}=de(W=>{const ee=W.nodeLookup.get(e),ie=W.parentLookup.has(e);return{node:ee,internals:ee.internals,isParent:ie}},je);let k=g.type||"default",b=(j==null?void 0:j[k])||ip[k];b===void 0&&(h==null||h("003",rn.error003(k)),k="default",b=(j==null?void 0:j.default)||ip.default);const _=!!(g.draggable||l&&typeof g.draggable>"u"),C=!!(g.selectable||u&&typeof g.selectable>"u"),M=!!(g.connectable||c&&typeof g.connectable>"u"),I=!!(g.focusable||d&&typeof g.focusable>"u"),R=ke(),O=ay(g),S=aE({node:g,nodeType:k,hasDimensions:O,resizeObserver:f}),L=Ly({nodeRef:S,disabled:g.hidden||!_,noDragClassName:m,handleSelector:g.dragHandle,nodeId:e,isSelectable:C,nodeClickDistance:p}),A=Fy();if(g.hidden)return null;const z=kn(g),E=ZC(g),P=C||_||t||n||r||s,F=n?W=>n(W,{...v.userNode}):void 0,V=r?W=>r(W,{...v.userNode}):void 0,H=s?W=>s(W,{...v.userNode}):void 0,q=o?W=>o(W,{...v.userNode}):void 0,U=a?W=>a(W,{...v.userNode}):void 0,K=W=>{const{selectNodesOnDrag:ee,nodeDragThreshold:ie}=R.getState();C&&(!ee||!_||ie>0)&&ud({id:e,store:R,nodeRef:S}),t&&t(W,{...v.userNode})},Y=W=>{if(!(cy(W.nativeEvent)||x)){if(Z0.includes(W.key)&&C){const ee=W.key==="Escape";ud({id:e,store:R,unselect:ee,nodeRef:S})}else if(_&&g.selected&&Object.prototype.hasOwnProperty.call(pl,W.key)){W.preventDefault();const{ariaLabelConfig:ee}=R.getState();R.setState({ariaLiveMessage:ee["node.a11yDescription.ariaLiveMessage"]({direction:W.key.replace("Arrow","").toLowerCase(),x:~~v.positionAbsolute.x,y:~~v.positionAbsolute.y})}),A({direction:pl[W.key],factor:W.shiftKey?4:1})}}},Z=()=>{var he;if(x||!((he=S.current)!=null&&he.matches(":focus-visible")))return;const{transform:W,width:ee,height:ie,autoPanOnNodeFocus:se,setCenter:re}=R.getState();if(!se)return;jf(new Map([[e,g]]),{x:0,y:0,width:ee,height:ie},W,!0).length>0||re(g.position.x+z.width/2,g.position.y+z.height/2,{zoom:W[2]})};return i.jsx("div",{className:De(["react-flow__node",`react-flow__node-${k}`,{[y]:_},g.className,{selected:g.selected,selectable:C,parent:N,draggable:_,dragging:L}]),ref:S,style:{zIndex:v.z,transform:`translate(${v.positionAbsolute.x}px,${v.positionAbsolute.y}px)`,pointerEvents:P?"all":"none",visibility:O?"visible":"hidden",...g.style,...E},"data-id":e,"data-testid":`rf__node-${e}`,onMouseEnter:F,onMouseMove:V,onMouseLeave:H,onContextMenu:q,onClick:K,onDoubleClick:U,onKeyDown:I?Y:void 0,tabIndex:I?0:void 0,onFocus:I?Z:void 0,role:g.ariaRole??(I?"group":void 0),"aria-roledescription":"node","aria-describedby":x?void 0:`${Ry}-${w}`,"aria-label":g.ariaLabel,...g.domAttributes,children:i.jsx(UC,{value:e,children:i.jsx(b,{id:e,data:g.data,type:k,positionAbsoluteX:v.positionAbsolute.x,positionAbsoluteY:v.positionAbsolute.y,selected:g.selected??!1,selectable:C,draggable:_,deletable:g.deletable??!0,isConnectable:M,sourcePosition:g.sourcePosition,targetPosition:g.targetPosition,dragging:L,dragHandle:g.dragHandle,zIndex:v.z,parentId:g.parentId,...z})})})}var uE=T.memo(lE);const cE=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,onError:e.onError});function Hy(e){const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:s,onError:o}=de(cE,je),a=sE(e.onlyRenderVisibleElements),l=iE();return i.jsx("div",{className:"react-flow__nodes",style:Wl,children:a.map(u=>i.jsx(uE,{id:u,nodeTypes:e.nodeTypes,nodeExtent:e.nodeExtent,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,resizeObserver:l,nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:s,nodeClickDistance:e.nodeClickDistance,onError:o},u))})}Hy.displayName="NodeRenderer";const dE=T.memo(Hy);function fE(e){return de(T.useCallback(n=>{if(!e)return n.edges.map(s=>s.id);const r=[];if(n.width&&n.height)for(const s of n.edges){const o=n.nodeLookup.get(s.source),a=n.nodeLookup.get(s.target);o&&a&&vS({sourceNode:o,targetNode:a,width:n.width,height:n.height,transform:n.transform})&&r.push(s.id)}return r},[e]),je)}const mE=({color:e="none",strokeWidth:t=1})=>{const n={strokeWidth:t,...e&&{stroke:e}};return i.jsx("polyline",{className:"arrow",style:n,strokeLinecap:"round",fill:"none",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4"})},hE=({color:e="none",strokeWidth:t=1})=>{const n={strokeWidth:t,...e&&{stroke:e,fill:e}};return i.jsx("polyline",{className:"arrowclosed",style:n,strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})},lp={[dl.Arrow]:mE,[dl.ArrowClosed]:hE};function pE(e){const t=ke();return T.useMemo(()=>{var s,o;return Object.prototype.hasOwnProperty.call(lp,e)?lp[e]:((o=(s=t.getState()).onError)==null||o.call(s,"009",rn.error009(e)),null)},[e])}const gE=({id:e,type:t,color:n,width:r=12.5,height:s=12.5,markerUnits:o="strokeWidth",strokeWidth:a,orient:l="auto-start-reverse"})=>{const u=pE(t);return u?i.jsx("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${r}`,markerHeight:`${s}`,viewBox:"-10 -10 20 20",markerUnits:o,orient:l,refX:"0",refY:"0",children:i.jsx(u,{color:n,strokeWidth:a})}):null},By=({defaultColor:e,rfId:t})=>{const n=de(o=>o.edges),r=de(o=>o.defaultEdgeOptions),s=T.useMemo(()=>SS(n,{id:t,defaultColor:e,defaultMarkerStart:r==null?void 0:r.markerStart,defaultMarkerEnd:r==null?void 0:r.markerEnd}),[n,r,t,e]);return s.length?i.jsx("svg",{className:"react-flow__marker","aria-hidden":"true",children:i.jsx("defs",{children:s.map(o=>i.jsx(gE,{id:o.id,type:o.type,color:o.color,width:o.width,height:o.height,markerUnits:o.markerUnits,strokeWidth:o.strokeWidth,orient:o.orient},o.id))})}):null};By.displayName="MarkerDefinitions";var xE=T.memo(By);function Uy({x:e,y:t,label:n,labelStyle:r,labelShowBg:s=!0,labelBgStyle:o,labelBgPadding:a=[2,4],labelBgBorderRadius:l=2,children:u,className:c,...d}){const[f,m]=T.useState({x:1,y:0,width:0,height:0}),y=De(["react-flow__edge-textwrapper",c]),x=T.useRef(null);return T.useEffect(()=>{if(x.current){const w=x.current.getBBox();m({x:w.x,y:w.y,width:w.width,height:w.height})}},[n]),n?i.jsxs("g",{transform:`translate(${e-f.width/2} ${t-f.height/2})`,className:y,visibility:f.width?"visible":"hidden",...d,children:[s&&i.jsx("rect",{width:f.width+2*a[0],x:-a[0],y:-a[1],height:f.height+2*a[1],className:"react-flow__edge-textbg",style:o,rx:l,ry:l}),i.jsx("text",{className:"react-flow__edge-text",y:f.height/2,dy:"0.3em",ref:x,style:r,children:n}),u]}):null}Uy.displayName="EdgeText";const yE=T.memo(Uy);function Xs({path:e,labelX:t,labelY:n,label:r,labelStyle:s,labelShowBg:o,labelBgStyle:a,labelBgPadding:l,labelBgBorderRadius:u,interactionWidth:c=20,...d}){return i.jsxs(i.Fragment,{children:[i.jsx("path",{...d,d:e,fill:"none",className:De(["react-flow__edge-path",d.className])}),c?i.jsx("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:c,className:"react-flow__edge-interaction"}):null,r&&Lt(t)&&Lt(n)?i.jsx(yE,{x:t,y:n,label:r,labelStyle:s,labelShowBg:o,labelBgStyle:a,labelBgPadding:l,labelBgBorderRadius:u}):null]})}function up({pos:e,x1:t,y1:n,x2:r,y2:s}){return e===G.Left||e===G.Right?[.5*(t+r),n]:[t,.5*(n+s)]}function Wy({sourceX:e,sourceY:t,sourcePosition:n=G.Bottom,targetX:r,targetY:s,targetPosition:o=G.Top}){const[a,l]=up({pos:n,x1:e,y1:t,x2:r,y2:s}),[u,c]=up({pos:o,x1:r,y1:s,x2:e,y2:t}),[d,f,m,y]=fy({sourceX:e,sourceY:t,targetX:r,targetY:s,sourceControlX:a,sourceControlY:l,targetControlX:u,targetControlY:c});return[`M${e},${t} C${a},${l} ${u},${c} ${r},${s}`,d,f,m,y]}function qy(e){return T.memo(({id:t,sourceX:n,sourceY:r,targetX:s,targetY:o,sourcePosition:a,targetPosition:l,label:u,labelStyle:c,labelShowBg:d,labelBgStyle:f,labelBgPadding:m,labelBgBorderRadius:y,style:x,markerEnd:w,markerStart:j,interactionWidth:p})=>{const[h,g,v]=Wy({sourceX:n,sourceY:r,sourcePosition:a,targetX:s,targetY:o,targetPosition:l}),N=e.isInternal?void 0:t;return i.jsx(Xs,{id:N,path:h,labelX:g,labelY:v,label:u,labelStyle:c,labelShowBg:d,labelBgStyle:f,labelBgPadding:m,labelBgBorderRadius:y,style:x,markerEnd:w,markerStart:j,interactionWidth:p})})}const vE=qy({isInternal:!1}),Qy=qy({isInternal:!0});vE.displayName="SimpleBezierEdge";Qy.displayName="SimpleBezierEdgeInternal";function Xy(e){return T.memo(({id:t,sourceX:n,sourceY:r,targetX:s,targetY:o,label:a,labelStyle:l,labelShowBg:u,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:f,style:m,sourcePosition:y=G.Bottom,targetPosition:x=G.Top,markerEnd:w,markerStart:j,pathOptions:p,interactionWidth:h})=>{const[g,v,N]=hl({sourceX:n,sourceY:r,sourcePosition:y,targetX:s,targetY:o,targetPosition:x,borderRadius:p==null?void 0:p.borderRadius,offset:p==null?void 0:p.offset,stepPosition:p==null?void 0:p.stepPosition}),k=e.isInternal?void 0:t;return i.jsx(Xs,{id:k,path:g,labelX:v,labelY:N,label:a,labelStyle:l,labelShowBg:u,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:f,style:m,markerEnd:w,markerStart:j,interactionWidth:h})})}const Ky=Xy({isInternal:!1}),Yy=Xy({isInternal:!0});Ky.displayName="SmoothStepEdge";Yy.displayName="SmoothStepEdgeInternal";function Gy(e){return T.memo(({id:t,...n})=>{var s;const r=e.isInternal?void 0:t;return i.jsx(Ky,{...n,id:r,pathOptions:T.useMemo(()=>{var o;return{borderRadius:0,offset:(o=n.pathOptions)==null?void 0:o.offset}},[(s=n.pathOptions)==null?void 0:s.offset])})})}const bE=Gy({isInternal:!1}),Zy=Gy({isInternal:!0});bE.displayName="StepEdge";Zy.displayName="StepEdgeInternal";function Jy(e){return T.memo(({id:t,sourceX:n,sourceY:r,targetX:s,targetY:o,label:a,labelStyle:l,labelShowBg:u,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:f,style:m,markerEnd:y,markerStart:x,interactionWidth:w})=>{const[j,p,h]=gy({sourceX:n,sourceY:r,targetX:s,targetY:o}),g=e.isInternal?void 0:t;return i.jsx(Xs,{id:g,path:j,labelX:p,labelY:h,label:a,labelStyle:l,labelShowBg:u,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:f,style:m,markerEnd:y,markerStart:x,interactionWidth:w})})}const wE=Jy({isInternal:!1}),ev=Jy({isInternal:!0});wE.displayName="StraightEdge";ev.displayName="StraightEdgeInternal";function tv(e){return T.memo(({id:t,sourceX:n,sourceY:r,targetX:s,targetY:o,sourcePosition:a=G.Bottom,targetPosition:l=G.Top,label:u,labelStyle:c,labelShowBg:d,labelBgStyle:f,labelBgPadding:m,labelBgBorderRadius:y,style:x,markerEnd:w,markerStart:j,pathOptions:p,interactionWidth:h})=>{const[g,v,N]=my({sourceX:n,sourceY:r,sourcePosition:a,targetX:s,targetY:o,targetPosition:l,curvature:p==null?void 0:p.curvature}),k=e.isInternal?void 0:t;return i.jsx(Xs,{id:k,path:g,labelX:v,labelY:N,label:u,labelStyle:c,labelShowBg:d,labelBgStyle:f,labelBgPadding:m,labelBgBorderRadius:y,style:x,markerEnd:w,markerStart:j,interactionWidth:h})})}const NE=tv({isInternal:!1}),nv=tv({isInternal:!0});NE.displayName="BezierEdge";nv.displayName="BezierEdgeInternal";const cp={default:nv,straight:ev,step:Zy,smoothstep:Yy,simplebezier:Qy},dp={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},jE=(e,t,n)=>n===G.Left?e-t:n===G.Right?e+t:e,kE=(e,t,n)=>n===G.Top?e-t:n===G.Bottom?e+t:e,fp="react-flow__edgeupdater";function mp({position:e,centerX:t,centerY:n,radius:r=10,onMouseDown:s,onMouseEnter:o,onMouseOut:a,type:l}){return i.jsx("circle",{onMouseDown:s,onMouseEnter:o,onMouseOut:a,className:De([fp,`${fp}-${l}`]),cx:jE(t,r,e),cy:kE(n,r,e),r,stroke:"transparent",fill:"transparent"})}function _E({isReconnectable:e,reconnectRadius:t,edge:n,sourceX:r,sourceY:s,targetX:o,targetY:a,sourcePosition:l,targetPosition:u,onReconnect:c,onReconnectStart:d,onReconnectEnd:f,setReconnecting:m,setUpdateHover:y}){const x=ke(),w=(v,N)=>{if(v.button!==0)return;const{autoPanOnConnect:k,domNode:b,isValidConnection:_,connectionMode:C,connectionRadius:M,lib:I,onConnectStart:R,onConnectEnd:O,cancelConnection:S,nodeLookup:L,rfId:A,panBy:z,updateConnection:E}=x.getState(),P=N.type==="target",F=(q,U)=>{m(!1),f==null||f(q,n,N.type,U)},V=q=>c==null?void 0:c(n,q),H=(q,U)=>{m(!0),d==null||d(v,n,N.type),R==null||R(q,U)};ld.onPointerDown(v.nativeEvent,{autoPanOnConnect:k,connectionMode:C,connectionRadius:M,domNode:b,handleId:N.id,nodeId:N.nodeId,nodeLookup:L,isTarget:P,edgeUpdaterType:N.type,lib:I,flowId:A,cancelConnection:S,panBy:z,isValidConnection:_,onConnect:V,onConnectStart:H,onConnectEnd:O,onReconnectEnd:F,updateConnection:E,getTransform:()=>x.getState().transform,getFromHandle:()=>x.getState().connection.fromHandle,dragThreshold:x.getState().connectionDragThreshold,handleDomNode:v.currentTarget})},j=v=>w(v,{nodeId:n.target,id:n.targetHandle??null,type:"target"}),p=v=>w(v,{nodeId:n.source,id:n.sourceHandle??null,type:"source"}),h=()=>y(!0),g=()=>y(!1);return i.jsxs(i.Fragment,{children:[(e===!0||e==="source")&&i.jsx(mp,{position:l,centerX:r,centerY:s,radius:t,onMouseDown:j,onMouseEnter:h,onMouseOut:g,type:"source"}),(e===!0||e==="target")&&i.jsx(mp,{position:u,centerX:o,centerY:a,radius:t,onMouseDown:p,onMouseEnter:h,onMouseOut:g,type:"target"})]})}function SE({id:e,edgesFocusable:t,edgesReconnectable:n,elementsSelectable:r,onClick:s,onDoubleClick:o,onContextMenu:a,onMouseEnter:l,onMouseMove:u,onMouseLeave:c,reconnectRadius:d,onReconnect:f,onReconnectStart:m,onReconnectEnd:y,rfId:x,edgeTypes:w,noPanClassName:j,onError:p,disableKeyboardA11y:h}){let g=de(re=>re.edgeLookup.get(e));const v=de(re=>re.defaultEdgeOptions);g=v?{...v,...g}:g;let N=g.type||"default",k=(w==null?void 0:w[N])||cp[N];k===void 0&&(p==null||p("011",rn.error011(N)),N="default",k=(w==null?void 0:w.default)||cp.default);const b=!!(g.focusable||t&&typeof g.focusable>"u"),_=typeof f<"u"&&(g.reconnectable||n&&typeof g.reconnectable>"u"),C=!!(g.selectable||r&&typeof g.selectable>"u"),M=T.useRef(null),[I,R]=T.useState(!1),[O,S]=T.useState(!1),L=ke(),{zIndex:A,sourceX:z,sourceY:E,targetX:P,targetY:F,sourcePosition:V,targetPosition:H}=de(T.useCallback(re=>{const ne=re.nodeLookup.get(g.source),he=re.nodeLookup.get(g.target);if(!ne||!he)return{zIndex:g.zIndex,...dp};const ve=_S({id:e,sourceNode:ne,targetNode:he,sourceHandle:g.sourceHandle||null,targetHandle:g.targetHandle||null,connectionMode:re.connectionMode,onError:p});return{zIndex:yS({selected:g.selected,zIndex:g.zIndex,sourceNode:ne,targetNode:he,elevateOnSelect:re.elevateEdgesOnSelect,zIndexMode:re.zIndexMode}),...ve||dp}},[g.source,g.target,g.sourceHandle,g.targetHandle,g.selected,g.zIndex]),je),q=T.useMemo(()=>g.markerStart?`url('#${id(g.markerStart,x)}')`:void 0,[g.markerStart,x]),U=T.useMemo(()=>g.markerEnd?`url('#${id(g.markerEnd,x)}')`:void 0,[g.markerEnd,x]);if(g.hidden||z===null||E===null||P===null||F===null)return null;const K=re=>{var me;const{addSelectedEdges:ne,unselectNodesAndEdges:he,multiSelectionActive:ve}=L.getState();C&&(L.setState({nodesSelectionActive:!1}),g.selected&&ve?(he({nodes:[],edges:[g]}),(me=M.current)==null||me.blur()):ne([e])),s&&s(re,g)},Y=o?re=>{o(re,{...g})}:void 0,Z=a?re=>{a(re,{...g})}:void 0,W=l?re=>{l(re,{...g})}:void 0,ee=u?re=>{u(re,{...g})}:void 0,ie=c?re=>{c(re,{...g})}:void 0,se=re=>{var ne;if(!h&&Z0.includes(re.key)&&C){const{unselectNodesAndEdges:he,addSelectedEdges:ve}=L.getState();re.key==="Escape"?((ne=M.current)==null||ne.blur(),he({edges:[g]})):ve([e])}};return i.jsx("svg",{style:{zIndex:A},children:i.jsxs("g",{className:De(["react-flow__edge",`react-flow__edge-${N}`,g.className,j,{selected:g.selected,animated:g.animated,inactive:!C&&!s,updating:I,selectable:C}]),onClick:K,onDoubleClick:Y,onContextMenu:Z,onMouseEnter:W,onMouseMove:ee,onMouseLeave:ie,onKeyDown:b?se:void 0,tabIndex:b?0:void 0,role:g.ariaRole??(b?"group":"img"),"aria-roledescription":"edge","data-id":e,"data-testid":`rf__edge-${e}`,"aria-label":g.ariaLabel===null?void 0:g.ariaLabel||`Edge from ${g.source} to ${g.target}`,"aria-describedby":b?`${My}-${x}`:void 0,ref:M,...g.domAttributes,children:[!O&&i.jsx(k,{id:e,source:g.source,target:g.target,type:g.type,selected:g.selected,animated:g.animated,selectable:C,deletable:g.deletable??!0,label:g.label,labelStyle:g.labelStyle,labelShowBg:g.labelShowBg,labelBgStyle:g.labelBgStyle,labelBgPadding:g.labelBgPadding,labelBgBorderRadius:g.labelBgBorderRadius,sourceX:z,sourceY:E,targetX:P,targetY:F,sourcePosition:V,targetPosition:H,data:g.data,style:g.style,sourceHandleId:g.sourceHandle,targetHandleId:g.targetHandle,markerStart:q,markerEnd:U,pathOptions:"pathOptions"in g?g.pathOptions:void 0,interactionWidth:g.interactionWidth}),_&&i.jsx(_E,{edge:g,isReconnectable:_,reconnectRadius:d,onReconnect:f,onReconnectStart:m,onReconnectEnd:y,sourceX:z,sourceY:E,targetX:P,targetY:F,sourcePosition:V,targetPosition:H,setUpdateHover:R,setReconnecting:S})]})})}var CE=T.memo(SE);const EE=e=>({edgesFocusable:e.edgesFocusable,edgesReconnectable:e.edgesReconnectable,elementsSelectable:e.elementsSelectable,connectionMode:e.connectionMode,onError:e.onError});function rv({defaultMarkerColor:e,onlyRenderVisibleElements:t,rfId:n,edgeTypes:r,noPanClassName:s,onReconnect:o,onEdgeContextMenu:a,onEdgeMouseEnter:l,onEdgeMouseMove:u,onEdgeMouseLeave:c,onEdgeClick:d,reconnectRadius:f,onEdgeDoubleClick:m,onReconnectStart:y,onReconnectEnd:x,disableKeyboardA11y:w}){const{edgesFocusable:j,edgesReconnectable:p,elementsSelectable:h,onError:g}=de(EE,je),v=fE(t);return i.jsxs("div",{className:"react-flow__edges",children:[i.jsx(xE,{defaultColor:e,rfId:n}),v.map(N=>i.jsx(CE,{id:N,edgesFocusable:j,edgesReconnectable:p,elementsSelectable:h,noPanClassName:s,onReconnect:o,onContextMenu:a,onMouseEnter:l,onMouseMove:u,onMouseLeave:c,onClick:d,reconnectRadius:f,onDoubleClick:m,onReconnectStart:y,onReconnectEnd:x,rfId:n,onError:g,edgeTypes:r,disableKeyboardA11y:w},N))]})}rv.displayName="EdgeRenderer";const TE=T.memo(rv),RE=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function ME({children:e}){const t=de(RE);return i.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:t},children:e})}function PE(e){const t=eo(),n=T.useRef(!1);T.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const IE=e=>{var t;return(t=e.panZoom)==null?void 0:t.syncViewport};function DE(e){const t=de(IE),n=ke();return T.useEffect(()=>{e&&(t==null||t(e),n.setState({transform:[e.x,e.y,e.zoom]}))},[e,t]),null}function AE(e){return e.connection.inProgress?{...e.connection,to:Ti(e.connection.to,e.transform)}:{...e.connection}}function OE(e){return AE}function zE(e){const t=OE();return de(t,je)}const LE=e=>({nodesConnectable:e.nodesConnectable,isValid:e.connection.isValid,inProgress:e.connection.inProgress,width:e.width,height:e.height});function FE({containerStyle:e,style:t,type:n,component:r}){const{nodesConnectable:s,width:o,height:a,isValid:l,inProgress:u}=de(LE,je);return!(o&&s&&u)?null:i.jsx("svg",{style:e,width:o,height:a,className:"react-flow__connectionline react-flow__container",children:i.jsx("g",{className:De(["react-flow__connection",ty(l)]),children:i.jsx(sv,{style:t,type:n,CustomComponent:r,isValid:l})})})}const sv=({style:e,type:t=Dn.Bezier,CustomComponent:n,isValid:r})=>{const{inProgress:s,from:o,fromNode:a,fromHandle:l,fromPosition:u,to:c,toNode:d,toHandle:f,toPosition:m,pointer:y}=zE();if(!s)return;if(n)return i.jsx(n,{connectionLineType:t,connectionLineStyle:e,fromNode:a,fromHandle:l,fromX:o.x,fromY:o.y,toX:c.x,toY:c.y,fromPosition:u,toPosition:m,connectionStatus:ty(r),toNode:d,toHandle:f,pointer:y});let x="";const w={sourceX:o.x,sourceY:o.y,sourcePosition:u,targetX:c.x,targetY:c.y,targetPosition:m};switch(t){case Dn.Bezier:[x]=my(w);break;case Dn.SimpleBezier:[x]=Wy(w);break;case Dn.Step:[x]=hl({...w,borderRadius:0});break;case Dn.SmoothStep:[x]=hl(w);break;default:[x]=gy(w)}return i.jsx("path",{d:x,fill:"none",className:"react-flow__connection-path",style:e})};sv.displayName="ConnectionLine";const $E={};function hp(e=$E){T.useRef(e),ke(),T.useEffect(()=>{},[e])}function VE(){ke(),T.useRef(!1),T.useEffect(()=>{},[])}function ov({nodeTypes:e,edgeTypes:t,onInit:n,onNodeClick:r,onEdgeClick:s,onNodeDoubleClick:o,onEdgeDoubleClick:a,onNodeMouseEnter:l,onNodeMouseMove:u,onNodeMouseLeave:c,onNodeContextMenu:d,onSelectionContextMenu:f,onSelectionStart:m,onSelectionEnd:y,connectionLineType:x,connectionLineStyle:w,connectionLineComponent:j,connectionLineContainerStyle:p,selectionKeyCode:h,selectionOnDrag:g,selectionMode:v,multiSelectionKeyCode:N,panActivationKeyCode:k,zoomActivationKeyCode:b,deleteKeyCode:_,onlyRenderVisibleElements:C,elementsSelectable:M,defaultViewport:I,translateExtent:R,minZoom:O,maxZoom:S,preventScrolling:L,defaultMarkerColor:A,zoomOnScroll:z,zoomOnPinch:E,panOnScroll:P,panOnScrollSpeed:F,panOnScrollMode:V,zoomOnDoubleClick:H,panOnDrag:q,onPaneClick:U,onPaneMouseEnter:K,onPaneMouseMove:Y,onPaneMouseLeave:Z,onPaneScroll:W,onPaneContextMenu:ee,paneClickDistance:ie,nodeClickDistance:se,onEdgeContextMenu:re,onEdgeMouseEnter:ne,onEdgeMouseMove:he,onEdgeMouseLeave:ve,reconnectRadius:me,onReconnect:We,onReconnectStart:_n,onReconnectEnd:an,noDragClassName:ar,noWheelClassName:oo,noPanClassName:io,disableKeyboardA11y:ao,nodeExtent:Zl,rfId:Ai,viewport:Kr,onViewportChange:lo}){return hp(e),hp(t),VE(),PE(n),DE(Kr),i.jsx(nE,{onPaneClick:U,onPaneMouseEnter:K,onPaneMouseMove:Y,onPaneMouseLeave:Z,onPaneContextMenu:ee,onPaneScroll:W,paneClickDistance:ie,deleteKeyCode:_,selectionKeyCode:h,selectionOnDrag:g,selectionMode:v,onSelectionStart:m,onSelectionEnd:y,multiSelectionKeyCode:N,panActivationKeyCode:k,zoomActivationKeyCode:b,elementsSelectable:M,zoomOnScroll:z,zoomOnPinch:E,zoomOnDoubleClick:H,panOnScroll:P,panOnScrollSpeed:F,panOnScrollMode:V,panOnDrag:q,defaultViewport:I,translateExtent:R,minZoom:O,maxZoom:S,onSelectionContextMenu:f,preventScrolling:L,noDragClassName:ar,noWheelClassName:oo,noPanClassName:io,disableKeyboardA11y:ao,onViewportChange:lo,isControlledViewport:!!Kr,children:i.jsxs(ME,{children:[i.jsx(TE,{edgeTypes:t,onEdgeClick:s,onEdgeDoubleClick:a,onReconnect:We,onReconnectStart:_n,onReconnectEnd:an,onlyRenderVisibleElements:C,onEdgeContextMenu:re,onEdgeMouseEnter:ne,onEdgeMouseMove:he,onEdgeMouseLeave:ve,reconnectRadius:me,defaultMarkerColor:A,noPanClassName:io,disableKeyboardA11y:ao,rfId:Ai}),i.jsx(FE,{style:w,type:x,component:j,containerStyle:p}),i.jsx("div",{className:"react-flow__edgelabel-renderer"}),i.jsx(dE,{nodeTypes:e,onNodeClick:r,onNodeDoubleClick:o,onNodeMouseEnter:l,onNodeMouseMove:u,onNodeMouseLeave:c,onNodeContextMenu:d,nodeClickDistance:se,onlyRenderVisibleElements:C,noPanClassName:io,noDragClassName:ar,disableKeyboardA11y:ao,nodeExtent:Zl,rfId:Ai}),i.jsx("div",{className:"react-flow__viewport-portal"})]})})}ov.displayName="GraphView";const HE=T.memo(ov),pp=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:s,height:o,fitView:a,fitViewOptions:l,minZoom:u=.5,maxZoom:c=2,nodeOrigin:d,nodeExtent:f,zIndexMode:m="basic"}={})=>{const y=new Map,x=new Map,w=new Map,j=new Map,p=r??t??[],h=n??e??[],g=d??[0,0],v=f??li;vy(w,j,p);const N=ad(h,y,x,{nodeOrigin:g,nodeExtent:v,zIndexMode:m});let k=[0,0,1];if(a&&s&&o){const b=Ci(y,{filter:I=>!!((I.width||I.initialWidth)&&(I.height||I.initialHeight))}),{x:_,y:C,zoom:M}=kf(b,s,o,u,c,(l==null?void 0:l.padding)??.1);k=[_,C,M]}return{rfId:"1",width:s??0,height:o??0,transform:k,nodes:h,nodesInitialized:N,nodeLookup:y,parentLookup:x,edges:p,edgeLookup:j,connectionLookup:w,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:n!==void 0,hasDefaultEdges:r!==void 0,panZoom:null,minZoom:u,maxZoom:c,translateExtent:li,nodeExtent:v,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:Hs.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:g,nodeDragThreshold:1,connectionDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!0,selectNodesOnDrag:!0,multiSelectionActive:!1,fitViewQueued:a??!1,fitViewOptions:l,fitViewResolver:null,connection:{...ey},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanOnNodeFocus:!0,autoPanSpeed:15,connectionRadius:20,onError:fS,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1,ariaLabelConfig:J0,zIndexMode:m,onNodesChangeMiddlewareMap:new Map,onEdgesChangeMiddlewareMap:new Map}},BE=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:s,height:o,fitView:a,fitViewOptions:l,minZoom:u,maxZoom:c,nodeOrigin:d,nodeExtent:f,zIndexMode:m})=>aC((y,x)=>{async function w(){const{nodeLookup:j,panZoom:p,fitViewOptions:h,fitViewResolver:g,width:v,height:N,minZoom:k,maxZoom:b}=x();p&&(await cS({nodes:j,width:v,height:N,panZoom:p,minZoom:k,maxZoom:b},h),g==null||g.resolve(!0),y({fitViewResolver:null}))}return{...pp({nodes:e,edges:t,width:s,height:o,fitView:a,fitViewOptions:l,minZoom:u,maxZoom:c,nodeOrigin:d,nodeExtent:f,defaultNodes:n,defaultEdges:r,zIndexMode:m}),setNodes:j=>{const{nodeLookup:p,parentLookup:h,nodeOrigin:g,elevateNodesOnSelect:v,fitViewQueued:N,zIndexMode:k}=x(),b=ad(j,p,h,{nodeOrigin:g,nodeExtent:f,elevateNodesOnSelect:v,checkEquality:!0,zIndexMode:k});N&&b?(w(),y({nodes:j,nodesInitialized:b,fitViewQueued:!1,fitViewOptions:void 0})):y({nodes:j,nodesInitialized:b})},setEdges:j=>{const{connectionLookup:p,edgeLookup:h}=x();vy(p,h,j),y({edges:j})},setDefaultNodesAndEdges:(j,p)=>{if(j){const{setNodes:h}=x();h(j),y({hasDefaultNodes:!0})}if(p){const{setEdges:h}=x();h(p),y({hasDefaultEdges:!0})}},updateNodeInternals:j=>{const{triggerNodeChanges:p,nodeLookup:h,parentLookup:g,domNode:v,nodeOrigin:N,nodeExtent:k,debug:b,fitViewQueued:_,zIndexMode:C}=x(),{changes:M,updatedInternals:I}=IS(j,h,g,v,N,k,C);I&&(TS(h,g,{nodeOrigin:N,nodeExtent:k,zIndexMode:C}),_?(w(),y({fitViewQueued:!1,fitViewOptions:void 0})):y({}),(M==null?void 0:M.length)>0&&(b&&console.log("React Flow: trigger node changes",M),p==null||p(M)))},updateNodePositions:(j,p=!1)=>{const h=[];let g=[];const{nodeLookup:v,triggerNodeChanges:N,connection:k,updateConnection:b,onNodesChangeMiddlewareMap:_}=x();for(const[C,M]of j){const I=v.get(C),R=!!(I!=null&&I.expandParent&&(I!=null&&I.parentId)&&(M!=null&&M.position)),O={id:C,type:"position",position:R?{x:Math.max(0,M.position.x),y:Math.max(0,M.position.y)}:M.position,dragging:p};if(I&&k.inProgress&&k.fromNode.id===I.id){const S=Vr(I,k.fromHandle,G.Left,!0);b({...k,from:S})}R&&I.parentId&&h.push({id:C,parentId:I.parentId,rect:{...M.internals.positionAbsolute,width:M.measured.width??0,height:M.measured.height??0}}),g.push(O)}if(h.length>0){const{parentLookup:C,nodeOrigin:M}=x(),I=Rf(h,v,C,M);g.push(...I)}for(const C of _.values())g=C(g);N(g)},triggerNodeChanges:j=>{const{onNodesChange:p,setNodes:h,nodes:g,hasDefaultNodes:v,debug:N}=x();if(j!=null&&j.length){if(v){const k=Dy(j,g);h(k)}N&&console.log("React Flow: trigger node changes",j),p==null||p(j)}},triggerEdgeChanges:j=>{const{onEdgesChange:p,setEdges:h,edges:g,hasDefaultEdges:v,debug:N}=x();if(j!=null&&j.length){if(v){const k=Ay(j,g);h(k)}N&&console.log("React Flow: trigger edge changes",j),p==null||p(j)}},addSelectedNodes:j=>{const{multiSelectionActive:p,edgeLookup:h,nodeLookup:g,triggerNodeChanges:v,triggerEdgeChanges:N}=x();if(p){const k=j.map(b=>cr(b,!0));v(k);return}v(ds(g,new Set([...j]),!0)),N(ds(h))},addSelectedEdges:j=>{const{multiSelectionActive:p,edgeLookup:h,nodeLookup:g,triggerNodeChanges:v,triggerEdgeChanges:N}=x();if(p){const k=j.map(b=>cr(b,!0));N(k);return}N(ds(h,new Set([...j]))),v(ds(g,new Set,!0))},unselectNodesAndEdges:({nodes:j,edges:p}={})=>{const{edges:h,nodes:g,nodeLookup:v,triggerNodeChanges:N,triggerEdgeChanges:k}=x(),b=j||g,_=p||h,C=b.map(I=>{const R=v.get(I.id);return R&&(R.selected=!1),cr(I.id,!1)}),M=_.map(I=>cr(I.id,!1));N(C),k(M)},setMinZoom:j=>{const{panZoom:p,maxZoom:h}=x();p==null||p.setScaleExtent([j,h]),y({minZoom:j})},setMaxZoom:j=>{const{panZoom:p,minZoom:h}=x();p==null||p.setScaleExtent([h,j]),y({maxZoom:j})},setTranslateExtent:j=>{var p;(p=x().panZoom)==null||p.setTranslateExtent(j),y({translateExtent:j})},resetSelectedElements:()=>{const{edges:j,nodes:p,triggerNodeChanges:h,triggerEdgeChanges:g,elementsSelectable:v}=x();if(!v)return;const N=p.reduce((b,_)=>_.selected?[...b,cr(_.id,!1)]:b,[]),k=j.reduce((b,_)=>_.selected?[...b,cr(_.id,!1)]:b,[]);h(N),g(k)},setNodeExtent:j=>{const{nodes:p,nodeLookup:h,parentLookup:g,nodeOrigin:v,elevateNodesOnSelect:N,nodeExtent:k,zIndexMode:b}=x();j[0][0]===k[0][0]&&j[0][1]===k[0][1]&&j[1][0]===k[1][0]&&j[1][1]===k[1][1]||(ad(p,h,g,{nodeOrigin:v,nodeExtent:j,elevateNodesOnSelect:N,checkEquality:!1,zIndexMode:b}),y({nodeExtent:j}))},panBy:j=>{const{transform:p,width:h,height:g,panZoom:v,translateExtent:N}=x();return DS({delta:j,panZoom:v,transform:p,translateExtent:N,width:h,height:g})},setCenter:async(j,p,h)=>{const{width:g,height:v,maxZoom:N,panZoom:k}=x();if(!k)return Promise.resolve(!1);const b=typeof(h==null?void 0:h.zoom)<"u"?h.zoom:N;return await k.setViewport({x:g/2-j*b,y:v/2-p*b,zoom:b},{duration:h==null?void 0:h.duration,ease:h==null?void 0:h.ease,interpolate:h==null?void 0:h.interpolate}),Promise.resolve(!0)},cancelConnection:()=>{y({connection:{...ey}})},updateConnection:j=>{y({connection:j})},reset:()=>y({...pp()})}},Object.is);function iv({initialNodes:e,initialEdges:t,defaultNodes:n,defaultEdges:r,initialWidth:s,initialHeight:o,initialMinZoom:a,initialMaxZoom:l,initialFitViewOptions:u,fitView:c,nodeOrigin:d,nodeExtent:f,zIndexMode:m,children:y}){const[x]=T.useState(()=>BE({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:s,height:o,fitView:c,minZoom:a,maxZoom:l,fitViewOptions:u,nodeOrigin:d,nodeExtent:f,zIndexMode:m}));return i.jsx(lC,{value:x,children:i.jsx(MC,{children:y})})}function UE({children:e,nodes:t,edges:n,defaultNodes:r,defaultEdges:s,width:o,height:a,fitView:l,fitViewOptions:u,minZoom:c,maxZoom:d,nodeOrigin:f,nodeExtent:m,zIndexMode:y}){return T.useContext(Bl)?i.jsx(i.Fragment,{children:e}):i.jsx(iv,{initialNodes:t,initialEdges:n,defaultNodes:r,defaultEdges:s,initialWidth:o,initialHeight:a,fitView:l,initialFitViewOptions:u,initialMinZoom:c,initialMaxZoom:d,nodeOrigin:f,nodeExtent:m,zIndexMode:y,children:e})}const WE={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function qE({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,className:s,nodeTypes:o,edgeTypes:a,onNodeClick:l,onEdgeClick:u,onInit:c,onMove:d,onMoveStart:f,onMoveEnd:m,onConnect:y,onConnectStart:x,onConnectEnd:w,onClickConnectStart:j,onClickConnectEnd:p,onNodeMouseEnter:h,onNodeMouseMove:g,onNodeMouseLeave:v,onNodeContextMenu:N,onNodeDoubleClick:k,onNodeDragStart:b,onNodeDrag:_,onNodeDragStop:C,onNodesDelete:M,onEdgesDelete:I,onDelete:R,onSelectionChange:O,onSelectionDragStart:S,onSelectionDrag:L,onSelectionDragStop:A,onSelectionContextMenu:z,onSelectionStart:E,onSelectionEnd:P,onBeforeDelete:F,connectionMode:V,connectionLineType:H=Dn.Bezier,connectionLineStyle:q,connectionLineComponent:U,connectionLineContainerStyle:K,deleteKeyCode:Y="Backspace",selectionKeyCode:Z="Shift",selectionOnDrag:W=!1,selectionMode:ee=ui.Full,panActivationKeyCode:ie="Space",multiSelectionKeyCode:se=di()?"Meta":"Control",zoomActivationKeyCode:re=di()?"Meta":"Control",snapToGrid:ne,snapGrid:he,onlyRenderVisibleElements:ve=!1,selectNodesOnDrag:me,nodesDraggable:We,autoPanOnNodeFocus:_n,nodesConnectable:an,nodesFocusable:ar,nodeOrigin:oo=Py,edgesFocusable:io,edgesReconnectable:ao,elementsSelectable:Zl=!0,defaultViewport:Ai=wC,minZoom:Kr=.5,maxZoom:lo=2,translateExtent:zf=li,preventScrolling:Hv=!0,nodeExtent:Jl,defaultMarkerColor:Bv="#b1b1b7",zoomOnScroll:Uv=!0,zoomOnPinch:Wv=!0,panOnScroll:qv=!1,panOnScrollSpeed:Qv=.5,panOnScrollMode:Xv=Rr.Free,zoomOnDoubleClick:Kv=!0,panOnDrag:Yv=!0,onPaneClick:Gv,onPaneMouseEnter:Zv,onPaneMouseMove:Jv,onPaneMouseLeave:e1,onPaneScroll:t1,onPaneContextMenu:n1,paneClickDistance:r1=1,nodeClickDistance:s1=0,children:o1,onReconnect:i1,onReconnectStart:a1,onReconnectEnd:l1,onEdgeContextMenu:u1,onEdgeDoubleClick:c1,onEdgeMouseEnter:d1,onEdgeMouseMove:f1,onEdgeMouseLeave:m1,reconnectRadius:h1=10,onNodesChange:p1,onEdgesChange:g1,noDragClassName:x1="nodrag",noWheelClassName:y1="nowheel",noPanClassName:Lf="nopan",fitView:Ff,fitViewOptions:$f,connectOnClick:v1,attributionPosition:b1,proOptions:w1,defaultEdgeOptions:N1,elevateNodesOnSelect:j1=!0,elevateEdgesOnSelect:k1=!1,disableKeyboardA11y:Vf=!1,autoPanOnConnect:_1,autoPanOnNodeDrag:S1,autoPanSpeed:C1,connectionRadius:E1,isValidConnection:T1,onError:R1,style:M1,id:Hf,nodeDragThreshold:P1,connectionDragThreshold:I1,viewport:D1,onViewportChange:A1,width:O1,height:z1,colorMode:L1="light",debug:F1,onScroll:Oi,ariaLabelConfig:$1,zIndexMode:Bf="basic",...V1},H1){const eu=Hf||"1",B1=_C(L1),U1=T.useCallback(Uf=>{Uf.currentTarget.scrollTo({top:0,left:0,behavior:"instant"}),Oi==null||Oi(Uf)},[Oi]);return i.jsx("div",{"data-testid":"rf__wrapper",...V1,onScroll:U1,style:{...M1,...WE},ref:H1,className:De(["react-flow",s,B1]),id:Hf,role:"application",children:i.jsxs(UE,{nodes:e,edges:t,width:O1,height:z1,fitView:Ff,fitViewOptions:$f,minZoom:Kr,maxZoom:lo,nodeOrigin:oo,nodeExtent:Jl,zIndexMode:Bf,children:[i.jsx(HE,{onInit:c,onNodeClick:l,onEdgeClick:u,onNodeMouseEnter:h,onNodeMouseMove:g,onNodeMouseLeave:v,onNodeContextMenu:N,onNodeDoubleClick:k,nodeTypes:o,edgeTypes:a,connectionLineType:H,connectionLineStyle:q,connectionLineComponent:U,connectionLineContainerStyle:K,selectionKeyCode:Z,selectionOnDrag:W,selectionMode:ee,deleteKeyCode:Y,multiSelectionKeyCode:se,panActivationKeyCode:ie,zoomActivationKeyCode:re,onlyRenderVisibleElements:ve,defaultViewport:Ai,translateExtent:zf,minZoom:Kr,maxZoom:lo,preventScrolling:Hv,zoomOnScroll:Uv,zoomOnPinch:Wv,zoomOnDoubleClick:Kv,panOnScroll:qv,panOnScrollSpeed:Qv,panOnScrollMode:Xv,panOnDrag:Yv,onPaneClick:Gv,onPaneMouseEnter:Zv,onPaneMouseMove:Jv,onPaneMouseLeave:e1,onPaneScroll:t1,onPaneContextMenu:n1,paneClickDistance:r1,nodeClickDistance:s1,onSelectionContextMenu:z,onSelectionStart:E,onSelectionEnd:P,onReconnect:i1,onReconnectStart:a1,onReconnectEnd:l1,onEdgeContextMenu:u1,onEdgeDoubleClick:c1,onEdgeMouseEnter:d1,onEdgeMouseMove:f1,onEdgeMouseLeave:m1,reconnectRadius:h1,defaultMarkerColor:Bv,noDragClassName:x1,noWheelClassName:y1,noPanClassName:Lf,rfId:eu,disableKeyboardA11y:Vf,nodeExtent:Jl,viewport:D1,onViewportChange:A1}),i.jsx(kC,{nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:y,onConnectStart:x,onConnectEnd:w,onClickConnectStart:j,onClickConnectEnd:p,nodesDraggable:We,autoPanOnNodeFocus:_n,nodesConnectable:an,nodesFocusable:ar,edgesFocusable:io,edgesReconnectable:ao,elementsSelectable:Zl,elevateNodesOnSelect:j1,elevateEdgesOnSelect:k1,minZoom:Kr,maxZoom:lo,nodeExtent:Jl,onNodesChange:p1,onEdgesChange:g1,snapToGrid:ne,snapGrid:he,connectionMode:V,translateExtent:zf,connectOnClick:v1,defaultEdgeOptions:N1,fitView:Ff,fitViewOptions:$f,onNodesDelete:M,onEdgesDelete:I,onDelete:R,onNodeDragStart:b,onNodeDrag:_,onNodeDragStop:C,onSelectionDrag:L,onSelectionDragStart:S,onSelectionDragStop:A,onMove:d,onMoveStart:f,onMoveEnd:m,noPanClassName:Lf,nodeOrigin:oo,rfId:eu,autoPanOnConnect:_1,autoPanOnNodeDrag:S1,autoPanSpeed:C1,onError:R1,connectionRadius:E1,isValidConnection:T1,selectNodesOnDrag:me,nodeDragThreshold:P1,connectionDragThreshold:I1,onBeforeDelete:F,debug:F1,ariaLabelConfig:$1,zIndexMode:Bf}),i.jsx(bC,{onSelectionChange:O}),o1,i.jsx(pC,{proOptions:w1,position:b1}),i.jsx(hC,{rfId:eu,disableKeyboardA11y:Vf})]})})}var QE=Oy(qE);const XE=e=>{var t;return(t=e.domNode)==null?void 0:t.querySelector(".react-flow__edgelabel-renderer")};function KE({children:e}){const t=de(XE);return t?s0.createPortal(e,t):null}function YE({dimensions:e,lineWidth:t,variant:n,className:r}){return i.jsx("path",{strokeWidth:t,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`,className:De(["react-flow__background-pattern",n,r])})}function GE({radius:e,className:t}){return i.jsx("circle",{cx:e,cy:e,r:e,className:De(["react-flow__background-pattern","dots",t])})}var er;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(er||(er={}));const ZE={[er.Dots]:1,[er.Lines]:1,[er.Cross]:6},JE=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function av({id:e,variant:t=er.Dots,gap:n=20,size:r,lineWidth:s=1,offset:o=0,color:a,bgColor:l,style:u,className:c,patternClassName:d}){const f=T.useRef(null),{transform:m,patternId:y}=de(JE,je),x=r||ZE[t],w=t===er.Dots,j=t===er.Cross,p=Array.isArray(n)?n:[n,n],h=[p[0]*m[2]||1,p[1]*m[2]||1],g=x*m[2],v=Array.isArray(o)?o:[o,o],N=j?[g,g]:h,k=[v[0]*m[2]||1+N[0]/2,v[1]*m[2]||1+N[1]/2],b=`${y}${e||""}`;return i.jsxs("svg",{className:De(["react-flow__background",c]),style:{...u,...Wl,"--xy-background-color-props":l,"--xy-background-pattern-color-props":a},ref:f,"data-testid":"rf__background",children:[i.jsx("pattern",{id:b,x:m[0]%h[0],y:m[1]%h[1],width:h[0],height:h[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${k[0]},-${k[1]})`,children:w?i.jsx(GE,{radius:g/2,className:d}):i.jsx(YE,{dimensions:N,lineWidth:s,variant:t,className:d})}),i.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${b})`})]})}av.displayName="Background";const e4=T.memo(av);function t4(){return i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:i.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function n4(){return i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:i.jsx("path",{d:"M0 0h32v4.2H0z"})})}function r4(){return i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:i.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function s4(){return i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:i.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function o4(){return i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:i.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function ca({children:e,className:t,...n}){return i.jsx("button",{type:"button",className:De(["react-flow__controls-button",t]),...n,children:e})}const i4=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom,ariaLabelConfig:e.ariaLabelConfig});function lv({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:s,onZoomIn:o,onZoomOut:a,onFitView:l,onInteractiveChange:u,className:c,children:d,position:f="bottom-left",orientation:m="vertical","aria-label":y}){const x=ke(),{isInteractive:w,minZoomReached:j,maxZoomReached:p,ariaLabelConfig:h}=de(i4,je),{zoomIn:g,zoomOut:v,fitView:N}=eo(),k=()=>{g(),o==null||o()},b=()=>{v(),a==null||a()},_=()=>{N(s),l==null||l()},C=()=>{x.setState({nodesDraggable:!w,nodesConnectable:!w,elementsSelectable:!w}),u==null||u(!w)},M=m==="horizontal"?"horizontal":"vertical";return i.jsxs(Ul,{className:De(["react-flow__controls",M,c]),position:f,style:e,"data-testid":"rf__controls","aria-label":y??h["controls.ariaLabel"],children:[t&&i.jsxs(i.Fragment,{children:[i.jsx(ca,{onClick:k,className:"react-flow__controls-zoomin",title:h["controls.zoomIn.ariaLabel"],"aria-label":h["controls.zoomIn.ariaLabel"],disabled:p,children:i.jsx(t4,{})}),i.jsx(ca,{onClick:b,className:"react-flow__controls-zoomout",title:h["controls.zoomOut.ariaLabel"],"aria-label":h["controls.zoomOut.ariaLabel"],disabled:j,children:i.jsx(n4,{})})]}),n&&i.jsx(ca,{className:"react-flow__controls-fitview",onClick:_,title:h["controls.fitView.ariaLabel"],"aria-label":h["controls.fitView.ariaLabel"],children:i.jsx(r4,{})}),r&&i.jsx(ca,{className:"react-flow__controls-interactive",onClick:C,title:h["controls.interactive.ariaLabel"],"aria-label":h["controls.interactive.ariaLabel"],children:w?i.jsx(o4,{}):i.jsx(s4,{})}),d]})}lv.displayName="Controls";const a4=T.memo(lv);function l4({id:e,x:t,y:n,width:r,height:s,style:o,color:a,strokeColor:l,strokeWidth:u,className:c,borderRadius:d,shapeRendering:f,selected:m,onClick:y}){const{background:x,backgroundColor:w}=o||{},j=a||x||w;return i.jsx("rect",{className:De(["react-flow__minimap-node",{selected:m},c]),x:t,y:n,rx:d,ry:d,width:r,height:s,style:{fill:j,stroke:l,strokeWidth:u},shapeRendering:f,onClick:y?p=>y(p,e):void 0})}const u4=T.memo(l4),c4=e=>e.nodes.map(t=>t.id),Lu=e=>e instanceof Function?e:()=>e;function d4({nodeStrokeColor:e,nodeColor:t,nodeClassName:n="",nodeBorderRadius:r=5,nodeStrokeWidth:s,nodeComponent:o=u4,onClick:a}){const l=de(c4,je),u=Lu(t),c=Lu(e),d=Lu(n),f=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return i.jsx(i.Fragment,{children:l.map(m=>i.jsx(m4,{id:m,nodeColorFunc:u,nodeStrokeColorFunc:c,nodeClassNameFunc:d,nodeBorderRadius:r,nodeStrokeWidth:s,NodeComponent:o,onClick:a,shapeRendering:f},m))})}function f4({id:e,nodeColorFunc:t,nodeStrokeColorFunc:n,nodeClassNameFunc:r,nodeBorderRadius:s,nodeStrokeWidth:o,shapeRendering:a,NodeComponent:l,onClick:u}){const{node:c,x:d,y:f,width:m,height:y}=de(x=>{const{internals:w}=x.nodeLookup.get(e),j=w.userNode,{x:p,y:h}=w.positionAbsolute,{width:g,height:v}=kn(j);return{node:j,x:p,y:h,width:g,height:v}},je);return!c||c.hidden||!ay(c)?null:i.jsx(l,{x:d,y:f,width:m,height:y,style:c.style,selected:!!c.selected,className:r(c),color:t(c),borderRadius:s,strokeColor:n(c),strokeWidth:o,shapeRendering:a,onClick:u,id:c.id})}const m4=T.memo(f4);var h4=T.memo(d4);const p4=200,g4=150,x4=e=>!e.hidden,y4=e=>{const t={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:t,boundingRect:e.nodeLookup.size>0?iy(Ci(e.nodeLookup,{filter:x4}),t):t,rfId:e.rfId,panZoom:e.panZoom,translateExtent:e.translateExtent,flowWidth:e.width,flowHeight:e.height,ariaLabelConfig:e.ariaLabelConfig}},v4="react-flow__minimap-desc";function uv({style:e,className:t,nodeStrokeColor:n,nodeColor:r,nodeClassName:s="",nodeBorderRadius:o=5,nodeStrokeWidth:a,nodeComponent:l,bgColor:u,maskColor:c,maskStrokeColor:d,maskStrokeWidth:f,position:m="bottom-right",onClick:y,onNodeClick:x,pannable:w=!1,zoomable:j=!1,ariaLabel:p,inversePan:h,zoomStep:g=1,offsetScale:v=5}){const N=ke(),k=T.useRef(null),{boundingRect:b,viewBB:_,rfId:C,panZoom:M,translateExtent:I,flowWidth:R,flowHeight:O,ariaLabelConfig:S}=de(y4,je),L=(e==null?void 0:e.width)??p4,A=(e==null?void 0:e.height)??g4,z=b.width/L,E=b.height/A,P=Math.max(z,E),F=P*L,V=P*A,H=v*P,q=b.x-(F-b.width)/2-H,U=b.y-(V-b.height)/2-H,K=F+H*2,Y=V+H*2,Z=`${v4}-${C}`,W=T.useRef(0),ee=T.useRef();W.current=P,T.useEffect(()=>{if(k.current&&M)return ee.current=BS({domNode:k.current,panZoom:M,getTransform:()=>N.getState().transform,getViewScale:()=>W.current}),()=>{var ne;(ne=ee.current)==null||ne.destroy()}},[M]),T.useEffect(()=>{var ne;(ne=ee.current)==null||ne.update({translateExtent:I,width:R,height:O,inversePan:h,pannable:w,zoomStep:g,zoomable:j})},[w,j,h,g,I,R,O]);const ie=y?ne=>{var me;const[he,ve]=((me=ee.current)==null?void 0:me.pointer(ne))||[0,0];y(ne,{x:he,y:ve})}:void 0,se=x?T.useCallback((ne,he)=>{const ve=N.getState().nodeLookup.get(he).internals.userNode;x(ne,ve)},[]):void 0,re=p??S["minimap.ariaLabel"];return i.jsx(Ul,{position:m,style:{...e,"--xy-minimap-background-color-props":typeof u=="string"?u:void 0,"--xy-minimap-mask-background-color-props":typeof c=="string"?c:void 0,"--xy-minimap-mask-stroke-color-props":typeof d=="string"?d:void 0,"--xy-minimap-mask-stroke-width-props":typeof f=="number"?f*P:void 0,"--xy-minimap-node-background-color-props":typeof r=="string"?r:void 0,"--xy-minimap-node-stroke-color-props":typeof n=="string"?n:void 0,"--xy-minimap-node-stroke-width-props":typeof a=="number"?a:void 0},className:De(["react-flow__minimap",t]),"data-testid":"rf__minimap",children:i.jsxs("svg",{width:L,height:A,viewBox:`${q} ${U} ${K} ${Y}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":Z,ref:k,onClick:ie,children:[re&&i.jsx("title",{id:Z,children:re}),i.jsx(h4,{onClick:se,nodeColor:r,nodeStrokeColor:n,nodeBorderRadius:o,nodeClassName:s,nodeStrokeWidth:a,nodeComponent:l}),i.jsx("path",{className:"react-flow__minimap-mask",d:`M${q-H},${U-H}h${K+H*2}v${Y+H*2}h${-K-H*2}z
        M${_.x},${_.y}h${_.width}v${_.height}h${-_.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}uv.displayName="MiniMap";T.memo(uv);const b4=e=>t=>e?`${Math.max(1/t.transform[2],1)}`:void 0,w4={[qs.Line]:"right",[qs.Handle]:"bottom-right"};function N4({nodeId:e,position:t,variant:n=qs.Handle,className:r,style:s=void 0,children:o,color:a,minWidth:l=10,minHeight:u=10,maxWidth:c=Number.MAX_VALUE,maxHeight:d=Number.MAX_VALUE,keepAspectRatio:f=!1,resizeDirection:m,autoScale:y=!0,shouldResize:x,onResizeStart:w,onResize:j,onResizeEnd:p}){const h=$y(),g=typeof e=="string"?e:h,v=ke(),N=T.useRef(null),k=n===qs.Handle,b=de(T.useCallback(b4(k&&y),[k,y]),je),_=T.useRef(null),C=t??w4[n];T.useEffect(()=>{if(!(!N.current||!g))return _.current||(_.current=rC({domNode:N.current,nodeId:g,getStoreItems:()=>{const{nodeLookup:I,transform:R,snapGrid:O,snapToGrid:S,nodeOrigin:L,domNode:A}=v.getState();return{nodeLookup:I,transform:R,snapGrid:O,snapToGrid:S,nodeOrigin:L,paneDomNode:A}},onChange:(I,R)=>{const{triggerNodeChanges:O,nodeLookup:S,parentLookup:L,nodeOrigin:A}=v.getState(),z=[],E={x:I.x,y:I.y},P=S.get(g);if(P&&P.expandParent&&P.parentId){const F=P.origin??A,V=I.width??P.measured.width??0,H=I.height??P.measured.height??0,q={id:P.id,parentId:P.parentId,rect:{width:V,height:H,...ly({x:I.x??P.position.x,y:I.y??P.position.y},{width:V,height:H},P.parentId,S,F)}},U=Rf([q],S,L,A);z.push(...U),E.x=I.x?Math.max(F[0]*V,I.x):void 0,E.y=I.y?Math.max(F[1]*H,I.y):void 0}if(E.x!==void 0&&E.y!==void 0){const F={id:g,type:"position",position:{...E}};z.push(F)}if(I.width!==void 0&&I.height!==void 0){const V={id:g,type:"dimensions",resizing:!0,setAttributes:m?m==="horizontal"?"width":"height":!0,dimensions:{width:I.width,height:I.height}};z.push(V)}for(const F of R){const V={...F,type:"position"};z.push(V)}O(z)},onEnd:({width:I,height:R})=>{const O={id:g,type:"dimensions",resizing:!1,dimensions:{width:I,height:R}};v.getState().triggerNodeChanges([O])}})),_.current.update({controlPosition:C,boundaries:{minWidth:l,minHeight:u,maxWidth:c,maxHeight:d},keepAspectRatio:f,resizeDirection:m,onResizeStart:w,onResize:j,onResizeEnd:p,shouldResize:x}),()=>{var I;(I=_.current)==null||I.destroy()}},[C,l,u,c,d,f,w,j,p,x]);const M=C.split("-");return i.jsx("div",{className:De(["react-flow__resize-control","nodrag",...M,n,r]),ref:N,style:{...s,scale:b,...a&&{[k?"backgroundColor":"borderColor"]:a}},children:o})}T.memo(N4);const ce=Sj((e,t)=>({nodes:[],edges:[],executionResult:null,setExecutionResult:n=>e({executionResult:n}),setGraph:(n,r)=>e({nodes:n,edges:r}),onNodesChange:n=>{e({nodes:Dy(n,t().nodes)})},onEdgesChange:n=>{e({edges:Ay(n,t().edges)})},onConnect:n=>{e({edges:py(n,t().edges)})},addNode:(n,r,s={})=>{const o=pe.get(n);if(!o)return console.error(`Node type ${n} not found in registry`),"";const a=`${n}-${Date.now()}`,l={id:a,type:"custom",position:r,data:{definitionType:n,catalogType:n,...o.getDefaultConfig(),...s}};return e({nodes:[...t().nodes,l]}),a},updateNodeData:(n,r)=>{e({nodes:t().nodes.map(s=>s.id===n?{...s,data:{...s.data,...r}}:s)})},validateGraph:async()=>{const{nodes:n,edges:r}=t();if(n.length===0)return!1;for(const s of n){const o=pe.get(s.data.definitionType);if(o){const a=o.validate(s.data);if(!a.isValid)return console.warn(`Node ${s.id} validation failed: ${a.message}`),!1}}for(const s of n){const o=pe.get(s.data.definitionType);if(o&&o.inputs.length>0&&!r.some(l=>l.target===s.id))return console.warn(`Node ${s.id} (${o.label}) is disconnected.`),!1}return!0}}));/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var j4={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k4=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=(e,t)=>{const n=T.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:o=2,absoluteStrokeWidth:a,className:l="",children:u,...c},d)=>T.createElement("svg",{ref:d,...j4,width:s,height:s,stroke:r,strokeWidth:a?Number(o)*24/Number(s):o,className:["lucide",`lucide-${k4(e)}`,l].join(" "),...c},[...t.map(([f,m])=>T.createElement(f,m)),...Array.isArray(u)?u:[u]]));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ir=J("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cv=J("ArrowLeftRight",[["path",{d:"M8 3 4 7l4 4",key:"9rb6wj"}],["path",{d:"M4 7h16",key:"6tx8e3"}],["path",{d:"m16 21 4-4-4-4",key:"siv7j2"}],["path",{d:"M20 17H4",key:"h6l3hr"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _4=J("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dv=J("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fv=J("BrainCircuit",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M9 13a4.5 4.5 0 0 0 3-4",key:"10igwf"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M16 8V5a2 2 0 0 1 2-2",key:"u6izg6"}],["circle",{cx:"16",cy:"13",r:".5",key:"ry7gng"}],["circle",{cx:"18",cy:"3",r:".5",key:"1aiba7"}],["circle",{cx:"20",cy:"21",r:".5",key:"yhc1fs"}],["circle",{cx:"20",cy:"8",r:".5",key:"1e43v0"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S4=J("Bug",[["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1",key:"d7y7pr"}],["path",{d:"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6",key:"xs1cw7"}],["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M6.53 9C4.6 8.8 3 7.1 3 5",key:"32zzws"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"M3 21c0-2.1 1.7-3.9 3.8-4",key:"4p0ekp"}],["path",{d:"M20.97 5c0 2.1-1.6 3.8-3.5 4",key:"18gb23"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M17.2 17c2.1.1 3.8 1.9 3.8 4",key:"k3fwyw"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pf=J("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C4=J("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E4=J("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sn=J("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cd=J("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wr=J("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T4=J("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R4=J("CircleCheckBig",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M4=J("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P4=J("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I4=J("CopyMinus",[["line",{x1:"12",x2:"18",y1:"15",y2:"15",key:"1nscbv"}],["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D4=J("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A4=J("Eraser",[["path",{d:"m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21",key:"182aya"}],["path",{d:"M22 21H7",key:"t4ddhn"}],["path",{d:"m5 11 9 9",key:"1mo9qw"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O4=J("FileType2",[["path",{d:"M4 22h14a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v4",key:"1pf5j1"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M2 13v-1h6v1",key:"1dh9dg"}],["path",{d:"M5 12v6",key:"150t9c"}],["path",{d:"M4 18h2",key:"1xrofg"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z4=J("FilterX",[["path",{d:"M13.013 3H2l8 9.46V19l4 2v-8.54l.9-1.055",key:"1fi1da"}],["path",{d:"m22 3-5 5",key:"12jva0"}],["path",{d:"m17 3 5 5",key:"k36vhe"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L4=J("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F4=J("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $4=J("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V4=J("GitCompare",[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M13 6h3a2 2 0 0 1 2 2v7",key:"1yeb86"}],["path",{d:"M11 18H8a2 2 0 0 1-2-2V9",key:"19pyzm"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H4=J("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const to=J("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B4=J("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mv=J("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const da=J("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U4=J("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W4=J("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q4=J("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q4=J("PaintBucket",[["path",{d:"m19 11-8-8-8.6 8.6a2 2 0 0 0 0 2.8l5.2 5.2c.8.8 2 .8 2.8 0L19 11Z",key:"irua1i"}],["path",{d:"m5 2 5 5",key:"1lls2c"}],["path",{d:"M2 13h15",key:"1hkzvu"}],["path",{d:"M22 20a2 2 0 1 1-4 0c0-1.6 1.7-2.4 2-4 .3 1.6 2 2.4 2 4Z",key:"xk76lq"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X4=J("PanelsTopLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K4=J("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y4=J("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ri=J("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G4=J("Replace",[["path",{d:"M14 4c0-1.1.9-2 2-2",key:"1mvvbw"}],["path",{d:"M20 2c1.1 0 2 .9 2 2",key:"1mj6oe"}],["path",{d:"M22 8c0 1.1-.9 2-2 2",key:"v1wql3"}],["path",{d:"M16 10c-1.1 0-2-.9-2-2",key:"821ux0"}],["path",{d:"m3 7 3 3 3-3",key:"x25e72"}],["path",{d:"M6 10V5c0-1.7 1.3-3 3-3h1",key:"13af7h"}],["rect",{width:"8",height:"8",x:"2",y:"14",rx:"2",key:"17ihk4"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z4=J("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J4=J("Scaling",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M14 15H9v-5",key:"pi4jk9"}],["path",{d:"M16 3h5v5",key:"1806ms"}],["path",{d:"M21 3 9 15",key:"15kdhq"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e3=J("Scissors",[["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M8.12 8.12 12 12",key:"1alkpv"}],["path",{d:"M20 4 8.12 15.88",key:"xgtan2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M14.8 14.8 20 20",key:"ptml3r"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qr=J("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t3=J("Settings2",[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hv=J("Split",[["path",{d:"M16 3h5v5",key:"1806ms"}],["path",{d:"M8 3H3v5",key:"15dfkv"}],["path",{d:"M12 22v-8.3a4 4 0 0 0-1.172-2.872L3 3",key:"1qrqzj"}],["path",{d:"m15 9 6-6",key:"ko1vev"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pv=J("SquareFunction",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["path",{d:"M9 17c2 0 2.8-1 2.8-2.8V10c0-2 1-3.3 3.2-3",key:"m1af9g"}],["path",{d:"M9 11.2h5.7",key:"3zgcl2"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n3=J("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r3=J("TableProperties",[["path",{d:"M15 3v18",key:"14nvp0"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M21 9H3",key:"1338ky"}],["path",{d:"M21 15H3",key:"9uk58r"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s3=J("Table",[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qr=J("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o3=J("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i3=J("WandSparkles",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gl=J("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a3=J("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),l3=()=>{const e=pe.getAll(),t=ce(l=>l.addNode),[n,r]=T.useState(""),s=(l,u)=>{l.dataTransfer.setData("application/reactflow",u),l.dataTransfer.effectAllowed="move"},o=e.filter(l=>l.label.toLowerCase().includes(n.toLowerCase())||l.category.toLowerCase().includes(n.toLowerCase())),a=["Data Source","Preprocessing","Modeling","Evaluation","Utility"];return i.jsxs("aside",{className:"w-64 shrink-0 border-r bg-background flex flex-col h-full shadow-sm z-10",children:[i.jsxs("div",{className:"p-4 border-b space-y-3",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"font-semibold tracking-tight",children:"Components"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Drag and drop to canvas"})]}),i.jsxs("div",{className:"relative",children:[i.jsx(qr,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),i.jsx("input",{placeholder:"Search nodes...",className:"w-full pl-9 pr-3 py-2 text-sm border rounded-md bg-muted/50 focus:bg-background focus:outline-none focus:ring-1 focus:ring-primary transition-colors",value:n,onChange:l=>r(l.target.value)})]})]}),i.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-6 scrollbar-thin",children:a.map(l=>{const u=o.filter(c=>c.category===l);return u.length===0?null:i.jsxs("div",{children:[i.jsx("h3",{className:"text-[10px] font-bold text-muted-foreground mb-2 uppercase tracking-wider px-1",children:l}),i.jsx("div",{className:"space-y-2",children:u.map(c=>i.jsxs("div",{className:"group flex items-center p-3 border rounded-lg bg-card hover:border-primary/50 hover:shadow-sm cursor-grab active:cursor-grabbing transition-all",draggable:!0,onDragStart:d=>s(d,c.type),onClick:()=>t(c.type,{x:100,y:100}),children:[i.jsx("div",{className:"p-2 bg-primary/5 group-hover:bg-primary/10 rounded-md mr-3 transition-colors",children:c.icon&&i.jsx(c.icon,{className:"w-4 h-4 text-primary"})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("div",{className:"text-sm font-medium truncate",children:c.label}),i.jsx("div",{className:"text-xs text-muted-foreground truncate",children:c.description})]})]},c.type))})]},l)})})]})};function u3(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[r,s]of e)if(!Object.is(s,t.get(r)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}const{useRef:c3}=zt;function d3(e){const t=c3();return n=>{const r=e(n);return u3(t.current,r)?t.current:t.current=r}}const f3=T.memo(({id:e,data:t,selected:n})=>{const r=t.definitionType,s=pe.get(r),{deleteElements:o}=eo(),a=ce(c=>c.executionResult),l=a==null?void 0:a.node_results[e],u=c=>{c.stopPropagation(),o({nodes:[{id:e}]})};return s?i.jsxs("div",{className:`
      min-w-[200px] bg-card border-2 rounded-lg shadow-sm transition-all
      ${n?"border-primary ring-2 ring-primary/20":"border-border hover:border-primary/50"}
    `,children:[i.jsxs("div",{className:"flex items-center p-3 border-b bg-muted/30 rounded-t-lg relative group",children:[i.jsx("div",{className:"p-1.5 bg-primary/10 rounded mr-3",children:s.icon&&i.jsx(s.icon,{className:"w-4 h-4 text-primary"})}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"text-sm font-bold",children:s.label}),l&&i.jsx("div",{className:`flex items-center gap-1 px-1.5 py-0.5 rounded-full text-[10px] font-medium border ${l.status==="success"?"bg-green-50 text-green-700 border-green-200 dark:bg-green-900/30 dark:text-green-400 dark:border-green-900":"bg-red-50 text-red-700 border-red-200 dark:bg-red-900/30 dark:text-red-400 dark:border-red-900"}`,children:l.status==="success"?i.jsx(M4,{size:10}):i.jsx(P4,{size:10})})]}),i.jsx("div",{className:"text-[10px] text-muted-foreground uppercase tracking-wider",children:s.category})]}),i.jsx("button",{onClick:u,className:"p-1 rounded-md hover:bg-destructive/10 hover:text-destructive text-muted-foreground/50 transition-all opacity-0 group-hover:opacity-100 ml-2",title:"Remove Node",children:i.jsx(gl,{size:14})})]}),i.jsx("div",{className:"p-3",children:s.component?i.jsx(s.component,{data:t}):i.jsx("div",{className:"text-xs text-muted-foreground italic",children:"No configuration needed"})}),s.inputs.map((c,d)=>i.jsx(Qs,{type:"target",position:G.Left,id:c.id,className:"!w-3 !h-3 !bg-muted-foreground hover:!bg-primary transition-colors",style:{top:`${(d+1)*100/(s.inputs.length+1)}%`},children:i.jsx("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-[10px] text-muted-foreground pointer-events-none whitespace-nowrap",children:c.label})},`input-${c.id}`)),s.outputs.map((c,d)=>i.jsx(Qs,{type:"source",position:G.Right,id:c.id,className:"!w-3 !h-3 !bg-muted-foreground hover:!bg-primary transition-colors",style:{top:`${(d+1)*100/(s.outputs.length+1)}%`},children:i.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-[10px] text-muted-foreground pointer-events-none whitespace-nowrap",children:c.label})},`output-${c.id}`))]}):i.jsxs("div",{className:"p-4 border-2 border-destructive bg-destructive/10 rounded-md min-w-[150px]",children:[i.jsxs("div",{className:"flex items-center gap-2 text-destructive",children:[i.jsx(T4,{size:16}),i.jsx("span",{className:"text-sm font-bold",children:"Unknown Node"})]}),i.jsxs("div",{className:"text-xs mt-1",children:["Type: ",r]})]})}),m3=({id:e,sourceX:t,sourceY:n,targetX:r,targetY:s,sourcePosition:o,targetPosition:a,style:l={},markerEnd:u})=>{const{deleteElements:c}=eo(),[d,f,m]=hl({sourceX:t,sourceY:n,sourcePosition:o,targetX:r,targetY:s,targetPosition:a,borderRadius:24}),y=x=>{x.stopPropagation(),c({edges:[{id:e}]})};return i.jsxs(i.Fragment,{children:[i.jsx(Xs,{path:d,style:{strokeWidth:20,stroke:"transparent",cursor:"pointer"}}),i.jsx(Xs,{path:d,markerEnd:u,style:{...l,strokeWidth:2},className:"react-flow__edge-path"}),i.jsx(KE,{children:i.jsx("div",{style:{position:"absolute",transform:`translate(-50%, -50%) translate(${f}px,${m}px)`,fontSize:12,pointerEvents:"all"},className:"nodrag nopan",children:i.jsx("button",{className:"w-5 h-5 bg-background border border-border text-muted-foreground rounded-full flex items-center justify-center hover:bg-destructive hover:text-destructive-foreground transition-colors shadow-sm",onClick:y,title:"Remove Connection",children:i.jsx(gl,{size:10})})})})]})},h3={custom:f3},p3={custom:m3},g3=()=>{const e=T.useRef(null),{screenToFlowPosition:t}=eo(),{nodes:n,edges:r,onNodesChange:s,onEdgesChange:o,onConnect:a,addNode:l}=ce(d3(d=>({nodes:d.nodes,edges:d.edges,onNodesChange:d.onNodesChange,onEdgesChange:d.onEdgesChange,onConnect:d.onConnect,addNode:d.addNode}))),u=T.useCallback(d=>{d.preventDefault(),d.dataTransfer.dropEffect="move"},[]),c=T.useCallback(d=>{d.preventDefault();const f=d.dataTransfer.getData("application/reactflow");if(typeof f>"u"||!f)return;const m=t({x:d.clientX,y:d.clientY});l(f,m)},[t,l]);return i.jsx("div",{className:"w-full h-full outline-none",ref:e,tabIndex:0,children:i.jsxs(QE,{nodes:n,edges:r,onNodesChange:s,onEdgesChange:o,onConnect:a,nodeTypes:h3,onDragOver:u,onDrop:c,fitView:!0,proOptions:{hideAttribution:!0},defaultEdgeOptions:{type:"custom",style:{stroke:"url(#edge-gradient)",strokeWidth:3,strokeDasharray:"8 6",filter:"url(#glow)"},animated:!0},edgeTypes:p3,deleteKeyCode:["Backspace","Delete"],children:[i.jsx("svg",{style:{position:"absolute",top:0,left:0,width:0,height:0,pointerEvents:"none"},children:i.jsxs("defs",{children:[i.jsxs("linearGradient",{id:"edge-gradient",children:[i.jsx("stop",{offset:"0%",stopColor:"#38bdf8"}),i.jsx("stop",{offset:"50%",stopColor:"#6366f1"}),i.jsx("stop",{offset:"100%",stopColor:"#a855f7"})]}),i.jsxs("filter",{id:"glow",x:"-50%",y:"-50%",width:"200%",height:"200%",children:[i.jsx("feGaussianBlur",{stdDeviation:"3",result:"coloredBlur"}),i.jsxs("feMerge",{children:[i.jsx("feMergeNode",{in:"coloredBlur"}),i.jsx("feMergeNode",{in:"SourceGraphic"})]})]})]})}),i.jsx(e4,{}),i.jsx(a4,{position:"top-left"})]})})},x3=()=>i.jsx(iv,{children:i.jsx(g3,{})}),y3=()=>{const e=ce(f=>f.nodes),t=ce(f=>f.updateNodeData),n=ce(f=>f.onNodesChange),[r,s]=T.useState(!1),o=e.find(f=>f.selected);if(!o)return i.jsxs("aside",{className:"w-80 border-l bg-background p-8 flex flex-col items-center justify-center text-muted-foreground text-center shrink-0",children:[i.jsx("div",{className:"p-4 bg-muted/50 rounded-full mb-4",children:i.jsx(t3,{className:"w-8 h-8 opacity-50"})}),i.jsx("h3",{className:"font-medium mb-1",children:"No Node Selected"}),i.jsx("p",{className:"text-sm",children:"Select a node on the canvas to configure its properties."})]});const a=()=>{n([{id:o.id,type:"select",selected:!1}])},l=()=>{s(!r)},u=o.data.definitionType,c=pe.get(u);if(!c)return i.jsx("aside",{className:"w-80 border-l bg-background p-4 shrink-0",children:i.jsxs("div",{className:"text-destructive flex items-center gap-2",children:[i.jsx(gl,{className:"w-4 h-4"}),"Error: Node definition '",u,"' not found."]})});const d=c.settings;return i.jsxs("aside",{className:`
        border-l bg-background flex flex-col h-full shadow-xl z-20 transition-all duration-300 ease-in-out
        ${r?"absolute right-0 top-0 bottom-0 w-[calc(100%-16rem)]":"w-80 shrink-0"}
      `,children:[i.jsxs("div",{className:"p-4 border-b flex items-center justify-between bg-muted/10",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-primary/10 rounded-md",children:c.icon&&i.jsx(c.icon,{className:"w-4 h-4 text-primary"})}),i.jsxs("div",{children:[i.jsx("h2",{className:"font-semibold text-sm",children:c.label}),i.jsx("p",{className:"text-[10px] text-muted-foreground uppercase tracking-wider",children:c.category})]})]}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("button",{onClick:l,className:"p-1 hover:bg-muted rounded-md transition-colors text-muted-foreground hover:text-foreground",title:r?"Collapse":"Expand",children:r?i.jsx(W4,{className:"w-4 h-4"}):i.jsx(U4,{className:"w-4 h-4"})}),i.jsx("button",{onClick:a,className:"p-1 hover:bg-muted rounded-md transition-colors text-muted-foreground hover:text-foreground",title:"Close",children:i.jsx(gl,{className:"w-4 h-4"})})]})]}),i.jsx("div",{className:"flex-1 overflow-y-auto",children:d?i.jsx(d,{config:o.data,onChange:f=>t(o.id,f),nodeId:o.id}):i.jsx("div",{className:"p-8 text-center text-sm text-muted-foreground italic",children:"No configuration options available for this node."})}),i.jsxs("div",{className:"p-3 border-t bg-muted/5 text-[10px] text-muted-foreground font-mono flex justify-between",children:[i.jsxs("span",{children:["ID: ",o.id]}),i.jsx("span",{children:"v1.0"})]})]})};function gv(e,t){return function(){return e.apply(t,arguments)}}const{toString:v3}=Object.prototype,{getPrototypeOf:If}=Object,{iterator:ql,toStringTag:xv}=Symbol,Ql=(e=>t=>{const n=v3.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Ut=e=>(e=e.toLowerCase(),t=>Ql(t)===e),Xl=e=>t=>typeof t===e,{isArray:no}=Array,Ks=Xl("undefined");function Mi(e){return e!==null&&!Ks(e)&&e.constructor!==null&&!Ks(e.constructor)&&dt(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const yv=Ut("ArrayBuffer");function b3(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&yv(e.buffer),t}const w3=Xl("string"),dt=Xl("function"),vv=Xl("number"),Pi=e=>e!==null&&typeof e=="object",N3=e=>e===!0||e===!1,Ra=e=>{if(Ql(e)!=="object")return!1;const t=If(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(xv in e)&&!(ql in e)},j3=e=>{if(!Pi(e)||Mi(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},k3=Ut("Date"),_3=Ut("File"),S3=Ut("Blob"),C3=Ut("FileList"),E3=e=>Pi(e)&&dt(e.pipe),T3=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||dt(e.append)&&((t=Ql(e))==="formdata"||t==="object"&&dt(e.toString)&&e.toString()==="[object FormData]"))},R3=Ut("URLSearchParams"),[M3,P3,I3,D3]=["ReadableStream","Request","Response","Headers"].map(Ut),A3=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Ii(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let r,s;if(typeof e!="object"&&(e=[e]),no(e))for(r=0,s=e.length;r<s;r++)t.call(null,e[r],r,e);else{if(Mi(e))return;const o=n?Object.getOwnPropertyNames(e):Object.keys(e),a=o.length;let l;for(r=0;r<a;r++)l=o[r],t.call(null,e[l],l,e)}}function bv(e,t){if(Mi(e))return null;t=t.toLowerCase();const n=Object.keys(e);let r=n.length,s;for(;r-- >0;)if(s=n[r],t===s.toLowerCase())return s;return null}const xr=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,wv=e=>!Ks(e)&&e!==xr;function dd(){const{caseless:e,skipUndefined:t}=wv(this)&&this||{},n={},r=(s,o)=>{const a=e&&bv(n,o)||o;Ra(n[a])&&Ra(s)?n[a]=dd(n[a],s):Ra(s)?n[a]=dd({},s):no(s)?n[a]=s.slice():(!t||!Ks(s))&&(n[a]=s)};for(let s=0,o=arguments.length;s<o;s++)arguments[s]&&Ii(arguments[s],r);return n}const O3=(e,t,n,{allOwnKeys:r}={})=>(Ii(t,(s,o)=>{n&&dt(s)?e[o]=gv(s,n):e[o]=s},{allOwnKeys:r}),e),z3=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),L3=(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},F3=(e,t,n,r)=>{let s,o,a;const l={};if(t=t||{},e==null)return t;do{for(s=Object.getOwnPropertyNames(e),o=s.length;o-- >0;)a=s[o],(!r||r(a,e,t))&&!l[a]&&(t[a]=e[a],l[a]=!0);e=n!==!1&&If(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},$3=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return r!==-1&&r===n},V3=e=>{if(!e)return null;if(no(e))return e;let t=e.length;if(!vv(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},H3=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&If(Uint8Array)),B3=(e,t)=>{const r=(e&&e[ql]).call(e);let s;for(;(s=r.next())&&!s.done;){const o=s.value;t.call(e,o[0],o[1])}},U3=(e,t)=>{let n;const r=[];for(;(n=e.exec(t))!==null;)r.push(n);return r},W3=Ut("HTMLFormElement"),q3=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,s){return r.toUpperCase()+s}),gp=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),Q3=Ut("RegExp"),Nv=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};Ii(n,(s,o)=>{let a;(a=t(s,o,e))!==!1&&(r[o]=a||s)}),Object.defineProperties(e,r)},X3=e=>{Nv(e,(t,n)=>{if(dt(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=e[n];if(dt(r)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},K3=(e,t)=>{const n={},r=s=>{s.forEach(o=>{n[o]=!0})};return no(e)?r(e):r(String(e).split(t)),n},Y3=()=>{},G3=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function Z3(e){return!!(e&&dt(e.append)&&e[xv]==="FormData"&&e[ql])}const J3=e=>{const t=new Array(10),n=(r,s)=>{if(Pi(r)){if(t.indexOf(r)>=0)return;if(Mi(r))return r;if(!("toJSON"in r)){t[s]=r;const o=no(r)?[]:{};return Ii(r,(a,l)=>{const u=n(a,s+1);!Ks(u)&&(o[l]=u)}),t[s]=void 0,o}}return r};return n(e,0)},eT=Ut("AsyncFunction"),tT=e=>e&&(Pi(e)||dt(e))&&dt(e.then)&&dt(e.catch),jv=((e,t)=>e?setImmediate:t?((n,r)=>(xr.addEventListener("message",({source:s,data:o})=>{s===xr&&o===n&&r.length&&r.shift()()},!1),s=>{r.push(s),xr.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",dt(xr.postMessage)),nT=typeof queueMicrotask<"u"?queueMicrotask.bind(xr):typeof process<"u"&&process.nextTick||jv,rT=e=>e!=null&&dt(e[ql]),$={isArray:no,isArrayBuffer:yv,isBuffer:Mi,isFormData:T3,isArrayBufferView:b3,isString:w3,isNumber:vv,isBoolean:N3,isObject:Pi,isPlainObject:Ra,isEmptyObject:j3,isReadableStream:M3,isRequest:P3,isResponse:I3,isHeaders:D3,isUndefined:Ks,isDate:k3,isFile:_3,isBlob:S3,isRegExp:Q3,isFunction:dt,isStream:E3,isURLSearchParams:R3,isTypedArray:H3,isFileList:C3,forEach:Ii,merge:dd,extend:O3,trim:A3,stripBOM:z3,inherits:L3,toFlatObject:F3,kindOf:Ql,kindOfTest:Ut,endsWith:$3,toArray:V3,forEachEntry:B3,matchAll:U3,isHTMLForm:W3,hasOwnProperty:gp,hasOwnProp:gp,reduceDescriptors:Nv,freezeMethods:X3,toObjectSet:K3,toCamelCase:q3,noop:Y3,toFiniteNumber:G3,findKey:bv,global:xr,isContextDefined:wv,isSpecCompliantForm:Z3,toJSONObject:J3,isAsyncFn:eT,isThenable:tT,setImmediate:jv,asap:nT,isIterable:rT};function oe(e,t,n,r,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),s&&(this.response=s,this.status=s.status?s.status:null)}$.inherits(oe,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:$.toJSONObject(this.config),code:this.code,status:this.status}}});const kv=oe.prototype,_v={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{_v[e]={value:e}});Object.defineProperties(oe,_v);Object.defineProperty(kv,"isAxiosError",{value:!0});oe.from=(e,t,n,r,s,o)=>{const a=Object.create(kv);$.toFlatObject(e,a,function(d){return d!==Error.prototype},c=>c!=="isAxiosError");const l=e&&e.message?e.message:"Error",u=t==null&&e?e.code:t;return oe.call(a,l,u,n,r,s),e&&a.cause==null&&Object.defineProperty(a,"cause",{value:e,configurable:!0}),a.name=e&&e.name||"Error",o&&Object.assign(a,o),a};const sT=null;function fd(e){return $.isPlainObject(e)||$.isArray(e)}function Sv(e){return $.endsWith(e,"[]")?e.slice(0,-2):e}function xp(e,t,n){return e?e.concat(t).map(function(s,o){return s=Sv(s),!n&&o?"["+s+"]":s}).join(n?".":""):t}function oT(e){return $.isArray(e)&&!e.some(fd)}const iT=$.toFlatObject($,{},null,function(t){return/^is[A-Z]/.test(t)});function Kl(e,t,n){if(!$.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=$.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(w,j){return!$.isUndefined(j[w])});const r=n.metaTokens,s=n.visitor||d,o=n.dots,a=n.indexes,u=(n.Blob||typeof Blob<"u"&&Blob)&&$.isSpecCompliantForm(t);if(!$.isFunction(s))throw new TypeError("visitor must be a function");function c(x){if(x===null)return"";if($.isDate(x))return x.toISOString();if($.isBoolean(x))return x.toString();if(!u&&$.isBlob(x))throw new oe("Blob is not supported. Use a Buffer instead.");return $.isArrayBuffer(x)||$.isTypedArray(x)?u&&typeof Blob=="function"?new Blob([x]):Buffer.from(x):x}function d(x,w,j){let p=x;if(x&&!j&&typeof x=="object"){if($.endsWith(w,"{}"))w=r?w:w.slice(0,-2),x=JSON.stringify(x);else if($.isArray(x)&&oT(x)||($.isFileList(x)||$.endsWith(w,"[]"))&&(p=$.toArray(x)))return w=Sv(w),p.forEach(function(g,v){!($.isUndefined(g)||g===null)&&t.append(a===!0?xp([w],v,o):a===null?w:w+"[]",c(g))}),!1}return fd(x)?!0:(t.append(xp(j,w,o),c(x)),!1)}const f=[],m=Object.assign(iT,{defaultVisitor:d,convertValue:c,isVisitable:fd});function y(x,w){if(!$.isUndefined(x)){if(f.indexOf(x)!==-1)throw Error("Circular reference detected in "+w.join("."));f.push(x),$.forEach(x,function(p,h){(!($.isUndefined(p)||p===null)&&s.call(t,p,$.isString(h)?h.trim():h,w,m))===!0&&y(p,w?w.concat(h):[h])}),f.pop()}}if(!$.isObject(e))throw new TypeError("data must be an object");return y(e),t}function yp(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(r){return t[r]})}function Df(e,t){this._pairs=[],e&&Kl(e,this,t)}const Cv=Df.prototype;Cv.append=function(t,n){this._pairs.push([t,n])};Cv.toString=function(t){const n=t?function(r){return t.call(this,r,yp)}:yp;return this._pairs.map(function(s){return n(s[0])+"="+n(s[1])},"").join("&")};function aT(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function Ev(e,t,n){if(!t)return e;const r=n&&n.encode||aT;$.isFunction(n)&&(n={serialize:n});const s=n&&n.serialize;let o;if(s?o=s(t,n):o=$.isURLSearchParams(t)?t.toString():new Df(t,n).toString(r),o){const a=e.indexOf("#");a!==-1&&(e=e.slice(0,a)),e+=(e.indexOf("?")===-1?"?":"&")+o}return e}class vp{constructor(){this.handlers=[]}use(t,n,r){return this.handlers.push({fulfilled:t,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){$.forEach(this.handlers,function(r){r!==null&&t(r)})}}const Tv={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},lT=typeof URLSearchParams<"u"?URLSearchParams:Df,uT=typeof FormData<"u"?FormData:null,cT=typeof Blob<"u"?Blob:null,dT={isBrowser:!0,classes:{URLSearchParams:lT,FormData:uT,Blob:cT},protocols:["http","https","file","blob","url","data"]},Af=typeof window<"u"&&typeof document<"u",md=typeof navigator=="object"&&navigator||void 0,fT=Af&&(!md||["ReactNative","NativeScript","NS"].indexOf(md.product)<0),mT=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",hT=Af&&window.location.href||"http://localhost",pT=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Af,hasStandardBrowserEnv:fT,hasStandardBrowserWebWorkerEnv:mT,navigator:md,origin:hT},Symbol.toStringTag,{value:"Module"})),Ke={...pT,...dT};function gT(e,t){return Kl(e,new Ke.classes.URLSearchParams,{visitor:function(n,r,s,o){return Ke.isNode&&$.isBuffer(n)?(this.append(r,n.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)},...t})}function xT(e){return $.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function yT(e){const t={},n=Object.keys(e);let r;const s=n.length;let o;for(r=0;r<s;r++)o=n[r],t[o]=e[o];return t}function Rv(e){function t(n,r,s,o){let a=n[o++];if(a==="__proto__")return!0;const l=Number.isFinite(+a),u=o>=n.length;return a=!a&&$.isArray(s)?s.length:a,u?($.hasOwnProp(s,a)?s[a]=[s[a],r]:s[a]=r,!l):((!s[a]||!$.isObject(s[a]))&&(s[a]=[]),t(n,r,s[a],o)&&$.isArray(s[a])&&(s[a]=yT(s[a])),!l)}if($.isFormData(e)&&$.isFunction(e.entries)){const n={};return $.forEachEntry(e,(r,s)=>{t(xT(r),s,n,0)}),n}return null}function vT(e,t,n){if($.isString(e))try{return(t||JSON.parse)(e),$.trim(e)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(e)}const Di={transitional:Tv,adapter:["xhr","http","fetch"],transformRequest:[function(t,n){const r=n.getContentType()||"",s=r.indexOf("application/json")>-1,o=$.isObject(t);if(o&&$.isHTMLForm(t)&&(t=new FormData(t)),$.isFormData(t))return s?JSON.stringify(Rv(t)):t;if($.isArrayBuffer(t)||$.isBuffer(t)||$.isStream(t)||$.isFile(t)||$.isBlob(t)||$.isReadableStream(t))return t;if($.isArrayBufferView(t))return t.buffer;if($.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let l;if(o){if(r.indexOf("application/x-www-form-urlencoded")>-1)return gT(t,this.formSerializer).toString();if((l=$.isFileList(t))||r.indexOf("multipart/form-data")>-1){const u=this.env&&this.env.FormData;return Kl(l?{"files[]":t}:t,u&&new u,this.formSerializer)}}return o||s?(n.setContentType("application/json",!1),vT(t)):t}],transformResponse:[function(t){const n=this.transitional||Di.transitional,r=n&&n.forcedJSONParsing,s=this.responseType==="json";if($.isResponse(t)||$.isReadableStream(t))return t;if(t&&$.isString(t)&&(r&&!this.responseType||s)){const a=!(n&&n.silentJSONParsing)&&s;try{return JSON.parse(t,this.parseReviver)}catch(l){if(a)throw l.name==="SyntaxError"?oe.from(l,oe.ERR_BAD_RESPONSE,this,null,this.response):l}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ke.classes.FormData,Blob:Ke.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};$.forEach(["delete","get","head","post","put","patch"],e=>{Di.headers[e]={}});const bT=$.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),wT=e=>{const t={};let n,r,s;return e&&e.split(`
`).forEach(function(a){s=a.indexOf(":"),n=a.substring(0,s).trim().toLowerCase(),r=a.substring(s+1).trim(),!(!n||t[n]&&bT[n])&&(n==="set-cookie"?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)}),t},bp=Symbol("internals");function bo(e){return e&&String(e).trim().toLowerCase()}function Ma(e){return e===!1||e==null?e:$.isArray(e)?e.map(Ma):String(e)}function NT(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}const jT=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Fu(e,t,n,r,s){if($.isFunction(r))return r.call(this,t,n);if(s&&(t=n),!!$.isString(t)){if($.isString(r))return t.indexOf(r)!==-1;if($.isRegExp(r))return r.test(t)}}function kT(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,r)=>n.toUpperCase()+r)}function _T(e,t){const n=$.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+n,{value:function(s,o,a){return this[r].call(this,t,s,o,a)},configurable:!0})})}let ft=class{constructor(t){t&&this.set(t)}set(t,n,r){const s=this;function o(l,u,c){const d=bo(u);if(!d)throw new Error("header name must be a non-empty string");const f=$.findKey(s,d);(!f||s[f]===void 0||c===!0||c===void 0&&s[f]!==!1)&&(s[f||u]=Ma(l))}const a=(l,u)=>$.forEach(l,(c,d)=>o(c,d,u));if($.isPlainObject(t)||t instanceof this.constructor)a(t,n);else if($.isString(t)&&(t=t.trim())&&!jT(t))a(wT(t),n);else if($.isObject(t)&&$.isIterable(t)){let l={},u,c;for(const d of t){if(!$.isArray(d))throw TypeError("Object iterator must return a key-value pair");l[c=d[0]]=(u=l[c])?$.isArray(u)?[...u,d[1]]:[u,d[1]]:d[1]}a(l,n)}else t!=null&&o(n,t,r);return this}get(t,n){if(t=bo(t),t){const r=$.findKey(this,t);if(r){const s=this[r];if(!n)return s;if(n===!0)return NT(s);if($.isFunction(n))return n.call(this,s,r);if($.isRegExp(n))return n.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=bo(t),t){const r=$.findKey(this,t);return!!(r&&this[r]!==void 0&&(!n||Fu(this,this[r],r,n)))}return!1}delete(t,n){const r=this;let s=!1;function o(a){if(a=bo(a),a){const l=$.findKey(r,a);l&&(!n||Fu(r,r[l],l,n))&&(delete r[l],s=!0)}}return $.isArray(t)?t.forEach(o):o(t),s}clear(t){const n=Object.keys(this);let r=n.length,s=!1;for(;r--;){const o=n[r];(!t||Fu(this,this[o],o,t,!0))&&(delete this[o],s=!0)}return s}normalize(t){const n=this,r={};return $.forEach(this,(s,o)=>{const a=$.findKey(r,o);if(a){n[a]=Ma(s),delete n[o];return}const l=t?kT(o):String(o).trim();l!==o&&delete n[o],n[l]=Ma(s),r[l]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return $.forEach(this,(r,s)=>{r!=null&&r!==!1&&(n[s]=t&&$.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const r=new this(t);return n.forEach(s=>r.set(s)),r}static accessor(t){const r=(this[bp]=this[bp]={accessors:{}}).accessors,s=this.prototype;function o(a){const l=bo(a);r[l]||(_T(s,a),r[l]=!0)}return $.isArray(t)?t.forEach(o):o(t),this}};ft.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);$.reduceDescriptors(ft.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(r){this[n]=r}}});$.freezeMethods(ft);function $u(e,t){const n=this||Di,r=t||n,s=ft.from(r.headers);let o=r.data;return $.forEach(e,function(l){o=l.call(n,o,s.normalize(),t?t.status:void 0)}),s.normalize(),o}function Mv(e){return!!(e&&e.__CANCEL__)}function ro(e,t,n){oe.call(this,e??"canceled",oe.ERR_CANCELED,t,n),this.name="CanceledError"}$.inherits(ro,oe,{__CANCEL__:!0});function Pv(e,t,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?e(n):t(new oe("Request failed with status code "+n.status,[oe.ERR_BAD_REQUEST,oe.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function ST(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function CT(e,t){e=e||10;const n=new Array(e),r=new Array(e);let s=0,o=0,a;return t=t!==void 0?t:1e3,function(u){const c=Date.now(),d=r[o];a||(a=c),n[s]=u,r[s]=c;let f=o,m=0;for(;f!==s;)m+=n[f++],f=f%e;if(s=(s+1)%e,s===o&&(o=(o+1)%e),c-a<t)return;const y=d&&c-d;return y?Math.round(m*1e3/y):void 0}}function ET(e,t){let n=0,r=1e3/t,s,o;const a=(c,d=Date.now())=>{n=d,s=null,o&&(clearTimeout(o),o=null),e(...c)};return[(...c)=>{const d=Date.now(),f=d-n;f>=r?a(c,d):(s=c,o||(o=setTimeout(()=>{o=null,a(s)},r-f)))},()=>s&&a(s)]}const xl=(e,t,n=3)=>{let r=0;const s=CT(50,250);return ET(o=>{const a=o.loaded,l=o.lengthComputable?o.total:void 0,u=a-r,c=s(u),d=a<=l;r=a;const f={loaded:a,total:l,progress:l?a/l:void 0,bytes:u,rate:c||void 0,estimated:c&&l&&d?(l-a)/c:void 0,event:o,lengthComputable:l!=null,[t?"download":"upload"]:!0};e(f)},n)},wp=(e,t)=>{const n=e!=null;return[r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]},Np=e=>(...t)=>$.asap(()=>e(...t)),TT=Ke.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,Ke.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(Ke.origin),Ke.navigator&&/(msie|trident)/i.test(Ke.navigator.userAgent)):()=>!0,RT=Ke.hasStandardBrowserEnv?{write(e,t,n,r,s,o,a){if(typeof document>"u")return;const l=[`${e}=${encodeURIComponent(t)}`];$.isNumber(n)&&l.push(`expires=${new Date(n).toUTCString()}`),$.isString(r)&&l.push(`path=${r}`),$.isString(s)&&l.push(`domain=${s}`),o===!0&&l.push("secure"),$.isString(a)&&l.push(`SameSite=${a}`),document.cookie=l.join("; ")},read(e){if(typeof document>"u")return null;const t=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function MT(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function PT(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function Iv(e,t,n){let r=!MT(t);return e&&(r||n==!1)?PT(e,t):t}const jp=e=>e instanceof ft?{...e}:e;function Hr(e,t){t=t||{};const n={};function r(c,d,f,m){return $.isPlainObject(c)&&$.isPlainObject(d)?$.merge.call({caseless:m},c,d):$.isPlainObject(d)?$.merge({},d):$.isArray(d)?d.slice():d}function s(c,d,f,m){if($.isUndefined(d)){if(!$.isUndefined(c))return r(void 0,c,f,m)}else return r(c,d,f,m)}function o(c,d){if(!$.isUndefined(d))return r(void 0,d)}function a(c,d){if($.isUndefined(d)){if(!$.isUndefined(c))return r(void 0,c)}else return r(void 0,d)}function l(c,d,f){if(f in t)return r(c,d);if(f in e)return r(void 0,c)}const u={url:o,method:o,data:o,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:l,headers:(c,d,f)=>s(jp(c),jp(d),f,!0)};return $.forEach(Object.keys({...e,...t}),function(d){const f=u[d]||s,m=f(e[d],t[d],d);$.isUndefined(m)&&f!==l||(n[d]=m)}),n}const Dv=e=>{const t=Hr({},e);let{data:n,withXSRFToken:r,xsrfHeaderName:s,xsrfCookieName:o,headers:a,auth:l}=t;if(t.headers=a=ft.from(a),t.url=Ev(Iv(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),l&&a.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),$.isFormData(n)){if(Ke.hasStandardBrowserEnv||Ke.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if($.isFunction(n.getHeaders)){const u=n.getHeaders(),c=["content-type","content-length"];Object.entries(u).forEach(([d,f])=>{c.includes(d.toLowerCase())&&a.set(d,f)})}}if(Ke.hasStandardBrowserEnv&&(r&&$.isFunction(r)&&(r=r(t)),r||r!==!1&&TT(t.url))){const u=s&&o&&RT.read(o);u&&a.set(s,u)}return t},IT=typeof XMLHttpRequest<"u",DT=IT&&function(e){return new Promise(function(n,r){const s=Dv(e);let o=s.data;const a=ft.from(s.headers).normalize();let{responseType:l,onUploadProgress:u,onDownloadProgress:c}=s,d,f,m,y,x;function w(){y&&y(),x&&x(),s.cancelToken&&s.cancelToken.unsubscribe(d),s.signal&&s.signal.removeEventListener("abort",d)}let j=new XMLHttpRequest;j.open(s.method.toUpperCase(),s.url,!0),j.timeout=s.timeout;function p(){if(!j)return;const g=ft.from("getAllResponseHeaders"in j&&j.getAllResponseHeaders()),N={data:!l||l==="text"||l==="json"?j.responseText:j.response,status:j.status,statusText:j.statusText,headers:g,config:e,request:j};Pv(function(b){n(b),w()},function(b){r(b),w()},N),j=null}"onloadend"in j?j.onloadend=p:j.onreadystatechange=function(){!j||j.readyState!==4||j.status===0&&!(j.responseURL&&j.responseURL.indexOf("file:")===0)||setTimeout(p)},j.onabort=function(){j&&(r(new oe("Request aborted",oe.ECONNABORTED,e,j)),j=null)},j.onerror=function(v){const N=v&&v.message?v.message:"Network Error",k=new oe(N,oe.ERR_NETWORK,e,j);k.event=v||null,r(k),j=null},j.ontimeout=function(){let v=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const N=s.transitional||Tv;s.timeoutErrorMessage&&(v=s.timeoutErrorMessage),r(new oe(v,N.clarifyTimeoutError?oe.ETIMEDOUT:oe.ECONNABORTED,e,j)),j=null},o===void 0&&a.setContentType(null),"setRequestHeader"in j&&$.forEach(a.toJSON(),function(v,N){j.setRequestHeader(N,v)}),$.isUndefined(s.withCredentials)||(j.withCredentials=!!s.withCredentials),l&&l!=="json"&&(j.responseType=s.responseType),c&&([m,x]=xl(c,!0),j.addEventListener("progress",m)),u&&j.upload&&([f,y]=xl(u),j.upload.addEventListener("progress",f),j.upload.addEventListener("loadend",y)),(s.cancelToken||s.signal)&&(d=g=>{j&&(r(!g||g.type?new ro(null,e,j):g),j.abort(),j=null)},s.cancelToken&&s.cancelToken.subscribe(d),s.signal&&(s.signal.aborted?d():s.signal.addEventListener("abort",d)));const h=ST(s.url);if(h&&Ke.protocols.indexOf(h)===-1){r(new oe("Unsupported protocol "+h+":",oe.ERR_BAD_REQUEST,e));return}j.send(o||null)})},AT=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let r=new AbortController,s;const o=function(c){if(!s){s=!0,l();const d=c instanceof Error?c:this.reason;r.abort(d instanceof oe?d:new ro(d instanceof Error?d.message:d))}};let a=t&&setTimeout(()=>{a=null,o(new oe(`timeout ${t} of ms exceeded`,oe.ETIMEDOUT))},t);const l=()=>{e&&(a&&clearTimeout(a),a=null,e.forEach(c=>{c.unsubscribe?c.unsubscribe(o):c.removeEventListener("abort",o)}),e=null)};e.forEach(c=>c.addEventListener("abort",o));const{signal:u}=r;return u.unsubscribe=()=>$.asap(l),u}},OT=function*(e,t){let n=e.byteLength;if(n<t){yield e;return}let r=0,s;for(;r<n;)s=r+t,yield e.slice(r,s),r=s},zT=async function*(e,t){for await(const n of LT(e))yield*OT(n,t)},LT=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:n,value:r}=await t.read();if(n)break;yield r}}finally{await t.cancel()}},kp=(e,t,n,r)=>{const s=zT(e,t);let o=0,a,l=u=>{a||(a=!0,r&&r(u))};return new ReadableStream({async pull(u){try{const{done:c,value:d}=await s.next();if(c){l(),u.close();return}let f=d.byteLength;if(n){let m=o+=f;n(m)}u.enqueue(new Uint8Array(d))}catch(c){throw l(c),c}},cancel(u){return l(u),s.return()}},{highWaterMark:2})},_p=64*1024,{isFunction:fa}=$,FT=(({Request:e,Response:t})=>({Request:e,Response:t}))($.global),{ReadableStream:Sp,TextEncoder:Cp}=$.global,Ep=(e,...t)=>{try{return!!e(...t)}catch{return!1}},$T=e=>{e=$.merge.call({skipUndefined:!0},FT,e);const{fetch:t,Request:n,Response:r}=e,s=t?fa(t):typeof fetch=="function",o=fa(n),a=fa(r);if(!s)return!1;const l=s&&fa(Sp),u=s&&(typeof Cp=="function"?(x=>w=>x.encode(w))(new Cp):async x=>new Uint8Array(await new n(x).arrayBuffer())),c=o&&l&&Ep(()=>{let x=!1;const w=new n(Ke.origin,{body:new Sp,method:"POST",get duplex(){return x=!0,"half"}}).headers.has("Content-Type");return x&&!w}),d=a&&l&&Ep(()=>$.isReadableStream(new r("").body)),f={stream:d&&(x=>x.body)};s&&["text","arrayBuffer","blob","formData","stream"].forEach(x=>{!f[x]&&(f[x]=(w,j)=>{let p=w&&w[x];if(p)return p.call(w);throw new oe(`Response type '${x}' is not supported`,oe.ERR_NOT_SUPPORT,j)})});const m=async x=>{if(x==null)return 0;if($.isBlob(x))return x.size;if($.isSpecCompliantForm(x))return(await new n(Ke.origin,{method:"POST",body:x}).arrayBuffer()).byteLength;if($.isArrayBufferView(x)||$.isArrayBuffer(x))return x.byteLength;if($.isURLSearchParams(x)&&(x=x+""),$.isString(x))return(await u(x)).byteLength},y=async(x,w)=>{const j=$.toFiniteNumber(x.getContentLength());return j??m(w)};return async x=>{let{url:w,method:j,data:p,signal:h,cancelToken:g,timeout:v,onDownloadProgress:N,onUploadProgress:k,responseType:b,headers:_,withCredentials:C="same-origin",fetchOptions:M}=Dv(x),I=t||fetch;b=b?(b+"").toLowerCase():"text";let R=AT([h,g&&g.toAbortSignal()],v),O=null;const S=R&&R.unsubscribe&&(()=>{R.unsubscribe()});let L;try{if(k&&c&&j!=="get"&&j!=="head"&&(L=await y(_,p))!==0){let V=new n(w,{method:"POST",body:p,duplex:"half"}),H;if($.isFormData(p)&&(H=V.headers.get("content-type"))&&_.setContentType(H),V.body){const[q,U]=wp(L,xl(Np(k)));p=kp(V.body,_p,q,U)}}$.isString(C)||(C=C?"include":"omit");const A=o&&"credentials"in n.prototype,z={...M,signal:R,method:j.toUpperCase(),headers:_.normalize().toJSON(),body:p,duplex:"half",credentials:A?C:void 0};O=o&&new n(w,z);let E=await(o?I(O,M):I(w,z));const P=d&&(b==="stream"||b==="response");if(d&&(N||P&&S)){const V={};["status","statusText","headers"].forEach(K=>{V[K]=E[K]});const H=$.toFiniteNumber(E.headers.get("content-length")),[q,U]=N&&wp(H,xl(Np(N),!0))||[];E=new r(kp(E.body,_p,q,()=>{U&&U(),S&&S()}),V)}b=b||"text";let F=await f[$.findKey(f,b)||"text"](E,x);return!P&&S&&S(),await new Promise((V,H)=>{Pv(V,H,{data:F,headers:ft.from(E.headers),status:E.status,statusText:E.statusText,config:x,request:O})})}catch(A){throw S&&S(),A&&A.name==="TypeError"&&/Load failed|fetch/i.test(A.message)?Object.assign(new oe("Network Error",oe.ERR_NETWORK,x,O),{cause:A.cause||A}):oe.from(A,A&&A.code,x,O)}}},VT=new Map,Av=e=>{let t=e&&e.env||{};const{fetch:n,Request:r,Response:s}=t,o=[r,s,n];let a=o.length,l=a,u,c,d=VT;for(;l--;)u=o[l],c=d.get(u),c===void 0&&d.set(u,c=l?new Map:$T(t)),d=c;return c};Av();const Of={http:sT,xhr:DT,fetch:{get:Av}};$.forEach(Of,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const Tp=e=>`- ${e}`,HT=e=>$.isFunction(e)||e===null||e===!1;function BT(e,t){e=$.isArray(e)?e:[e];const{length:n}=e;let r,s;const o={};for(let a=0;a<n;a++){r=e[a];let l;if(s=r,!HT(r)&&(s=Of[(l=String(r)).toLowerCase()],s===void 0))throw new oe(`Unknown adapter '${l}'`);if(s&&($.isFunction(s)||(s=s.get(t))))break;o[l||"#"+a]=s}if(!s){const a=Object.entries(o).map(([u,c])=>`adapter ${u} `+(c===!1?"is not supported by the environment":"is not available in the build"));let l=n?a.length>1?`since :
`+a.map(Tp).join(`
`):" "+Tp(a[0]):"as no adapter specified";throw new oe("There is no suitable adapter to dispatch the request "+l,"ERR_NOT_SUPPORT")}return s}const Ov={getAdapter:BT,adapters:Of};function Vu(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new ro(null,e)}function Rp(e){return Vu(e),e.headers=ft.from(e.headers),e.data=$u.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),Ov.getAdapter(e.adapter||Di.adapter,e)(e).then(function(r){return Vu(e),r.data=$u.call(e,e.transformResponse,r),r.headers=ft.from(r.headers),r},function(r){return Mv(r)||(Vu(e),r&&r.response&&(r.response.data=$u.call(e,e.transformResponse,r.response),r.response.headers=ft.from(r.response.headers))),Promise.reject(r)})}const zv="1.13.2",Yl={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Yl[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});const Mp={};Yl.transitional=function(t,n,r){function s(o,a){return"[Axios v"+zv+"] Transitional option '"+o+"'"+a+(r?". "+r:"")}return(o,a,l)=>{if(t===!1)throw new oe(s(a," has been removed"+(n?" in "+n:"")),oe.ERR_DEPRECATED);return n&&!Mp[a]&&(Mp[a]=!0,console.warn(s(a," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(o,a,l):!0}};Yl.spelling=function(t){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${t}`),!0)};function UT(e,t,n){if(typeof e!="object")throw new oe("options must be an object",oe.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let s=r.length;for(;s-- >0;){const o=r[s],a=t[o];if(a){const l=e[o],u=l===void 0||a(l,o,e);if(u!==!0)throw new oe("option "+o+" must be "+u,oe.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new oe("Unknown option "+o,oe.ERR_BAD_OPTION)}}const Pa={assertOptions:UT,validators:Yl},qt=Pa.validators;let Mr=class{constructor(t){this.defaults=t||{},this.interceptors={request:new vp,response:new vp}}async request(t,n){try{return await this._request(t,n)}catch(r){if(r instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const o=s.stack?s.stack.replace(/^.+\n/,""):"";try{r.stack?o&&!String(r.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+o):r.stack=o}catch{}}throw r}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=Hr(this.defaults,n);const{transitional:r,paramsSerializer:s,headers:o}=n;r!==void 0&&Pa.assertOptions(r,{silentJSONParsing:qt.transitional(qt.boolean),forcedJSONParsing:qt.transitional(qt.boolean),clarifyTimeoutError:qt.transitional(qt.boolean)},!1),s!=null&&($.isFunction(s)?n.paramsSerializer={serialize:s}:Pa.assertOptions(s,{encode:qt.function,serialize:qt.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),Pa.assertOptions(n,{baseUrl:qt.spelling("baseURL"),withXsrfToken:qt.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let a=o&&$.merge(o.common,o[n.method]);o&&$.forEach(["delete","get","head","post","put","patch","common"],x=>{delete o[x]}),n.headers=ft.concat(a,o);const l=[];let u=!0;this.interceptors.request.forEach(function(w){typeof w.runWhen=="function"&&w.runWhen(n)===!1||(u=u&&w.synchronous,l.unshift(w.fulfilled,w.rejected))});const c=[];this.interceptors.response.forEach(function(w){c.push(w.fulfilled,w.rejected)});let d,f=0,m;if(!u){const x=[Rp.bind(this),void 0];for(x.unshift(...l),x.push(...c),m=x.length,d=Promise.resolve(n);f<m;)d=d.then(x[f++],x[f++]);return d}m=l.length;let y=n;for(;f<m;){const x=l[f++],w=l[f++];try{y=x(y)}catch(j){w.call(this,j);break}}try{d=Rp.call(this,y)}catch(x){return Promise.reject(x)}for(f=0,m=c.length;f<m;)d=d.then(c[f++],c[f++]);return d}getUri(t){t=Hr(this.defaults,t);const n=Iv(t.baseURL,t.url,t.allowAbsoluteUrls);return Ev(n,t.params,t.paramsSerializer)}};$.forEach(["delete","get","head","options"],function(t){Mr.prototype[t]=function(n,r){return this.request(Hr(r||{},{method:t,url:n,data:(r||{}).data}))}});$.forEach(["post","put","patch"],function(t){function n(r){return function(o,a,l){return this.request(Hr(l||{},{method:t,headers:r?{"Content-Type":"multipart/form-data"}:{},url:o,data:a}))}}Mr.prototype[t]=n(),Mr.prototype[t+"Form"]=n(!0)});let WT=class Lv{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(o){n=o});const r=this;this.promise.then(s=>{if(!r._listeners)return;let o=r._listeners.length;for(;o-- >0;)r._listeners[o](s);r._listeners=null}),this.promise.then=s=>{let o;const a=new Promise(l=>{r.subscribe(l),o=l}).then(s);return a.cancel=function(){r.unsubscribe(o)},a},t(function(o,a,l){r.reason||(r.reason=new ro(o,a,l),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const t=new AbortController,n=r=>{t.abort(r)};return this.subscribe(n),t.signal.unsubscribe=()=>this.unsubscribe(n),t.signal}static source(){let t;return{token:new Lv(function(s){t=s}),cancel:t}}};function qT(e){return function(n){return e.apply(null,n)}}function QT(e){return $.isObject(e)&&e.isAxiosError===!0}const hd={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(hd).forEach(([e,t])=>{hd[t]=e});function Fv(e){const t=new Mr(e),n=gv(Mr.prototype.request,t);return $.extend(n,Mr.prototype,t,{allOwnKeys:!0}),$.extend(n,t,null,{allOwnKeys:!0}),n.create=function(s){return Fv(Hr(e,s))},n}const Pe=Fv(Di);Pe.Axios=Mr;Pe.CanceledError=ro;Pe.CancelToken=WT;Pe.isCancel=Mv;Pe.VERSION=zv;Pe.toFormData=Kl;Pe.AxiosError=oe;Pe.Cancel=Pe.CanceledError;Pe.all=function(t){return Promise.all(t)};Pe.spread=qT;Pe.isAxiosError=QT;Pe.mergeConfig=Hr;Pe.AxiosHeaders=ft;Pe.formToJSON=e=>Rv($.isHTMLForm(e)?new FormData(e):e);Pe.getAdapter=Ov.getAdapter;Pe.HttpStatusCode=hd;Pe.default=Pe;const{Axios:NM,AxiosError:jM,CanceledError:kM,isCancel:_M,CancelToken:SM,VERSION:CM,all:EM,Cancel:TM,isAxiosError:RM,spread:MM,toFormData:PM,AxiosHeaders:IM,HttpStatusCode:DM,formToJSON:AM,getAdapter:OM,mergeConfig:zM}=Pe,XT="/api",Gl=Pe.create({baseURL:XT,headers:{"Content-Type":"application/json"}}),KT=async e=>(await Gl.post("/pipeline/preview",e)).data,YT=async e=>(await Gl.get(`/pipeline/datasets/${e}/schema`)).data,Pp=async(e,t)=>(await Gl.post(`/pipeline/save/${e}`,t)).data,GT=async e=>{const t=await Gl.get(`/pipeline/load/${e}`);return t.data?t.data:null},ZT=async e=>(console.warn("submitTrainingJob is not yet implemented in V2",e),{job_id:"mock_job_id"}),JT=()=>{const e=ce(h=>h.nodes),t=ce(h=>h.edges),n=ce(h=>h.setExecutionResult),r=ce(h=>h.setGraph),[s,o]=T.useState(!1),[a,l]=T.useState(!1),[u,c]=T.useState(!1),[d,f]=T.useState(!1),m=()=>({nodes:e.map(h=>({id:h.id,type:h.type,position:h.position,data:{...h.data,catalogType:h.data.catalogType||h.data.definitionType}})),edges:t.map(h=>({id:h.id,source:h.source,target:h.target,sourceHandle:h.sourceHandle,targetHandle:h.targetHandle,type:h.type,data:h.data}))}),y=h=>{const g=[],v=new Set,N=[],k=e.find(b=>b.data.definitionType==="dataset_node");for(k&&N.push(k.id);N.length>0;){const b=N.shift();if(v.has(b))continue;v.add(b);const _=e.find(S=>S.id===b);if(!_)continue;let C="unknown",M={};const R=t.filter(S=>S.target===b).map(S=>S.source);if(_.data.definitionType==="dataset_node")C="data_loader",M={dataset_id:_.data.datasetId};else if(_.data.definitionType==="imputation_node"){const S=_.data.method||"simple";S==="knn"?(C="KNNImputer",M={columns:_.data.columns,n_neighbors:_.data.n_neighbors,weights:_.data.weights}):S==="iterative"?(C="IterativeImputer",M={columns:_.data.columns,max_iter:_.data.max_iter,estimator:_.data.estimator,random_state:0}):(C="SimpleImputer",M={columns:_.data.columns,strategy:_.data.strategy,fill_value:_.data.fill_value})}else if(_.data.definitionType==="simple_imputer")C="SimpleImputer",M=_.data||{};else if(_.data.definitionType==="drop_missing_columns"||_.data.definitionType==="DropMissingColumns")C="DropMissingColumns",M={columns:_.data.columns||[],missing_threshold:_.data.missing_threshold};else if(_.data.definitionType==="drop_missing_rows"||_.data.definitionType==="DropMissingRows")C="DropMissingRows",M={missing_threshold:_.data.missing_threshold,drop_if_any_missing:_.data.drop_if_any_missing};else if(_.data.definitionType==="deduplicate"||_.data.definitionType==="Deduplicate")C="Deduplicate",M={subset:_.data.subset,keep:_.data.keep};else if(_.data.definitionType==="casting"||_.data.definitionType==="Casting")C="Casting",M={column_types:_.data.column_types};else if(_.data.definitionType==="MissingIndicator"||_.data.definitionType==="missing_indicator")C="MissingIndicator",M={columns:_.data.columns,flag_suffix:_.data.flag_suffix};else if(_.data.definitionType==="scale_numeric_features"){const S=_.data||{},L=S.method||"standard";L==="minmax"?C="MinMaxScaler":L==="maxabs"?C="MaxAbsScaler":L==="robust"?C="RobustScaler":C="StandardScaler",M=S}else if(_.data.definitionType==="encoding"){const S=_.data.method;S==="onehot"?C="OneHotEncoder":S==="dummy"?(C="DummyEncoder",M={..._.data,drop_first:!0}):S==="label"?C="LabelEncoder":S==="ordinal"?C="OrdinalEncoder":S==="target"?C="TargetEncoder":S==="hash"?C="HashEncoder":C="OneHotEncoder",C!=="DummyEncoder"&&(M=_.data)}else if(_.data.definitionType==="TrainTestSplitter")C="TrainTestSplitter",M=_.data||{};else if(_.data.definitionType==="label_encoding")C="LabelEncoder",M=_.data||{};else if(_.data.definitionType==="feature_target_split")C="feature_target_split",M=_.data||{};else if(_.data.definitionType==="train_model_draft"){C="model_training";let S=_.data.modelType;S==="random_forest"&&(S="random_forest_classifier"),M={target_column:_.data.targetColumn,algorithm:S,hyperparameters:_.data.hyperparameters}}else if(_.data.definitionType==="feature_selection")C="feature_selection",M=_.data||{};else if(_.data.definitionType==="outlier"){const S=_.data.method||"iqr";S==="iqr"?C="IQR":S==="zscore"?C="ZScore":S==="winsorize"?C="Winsorize":S==="elliptic_envelope"?C="EllipticEnvelope":C="IQR",M=_.data}else if(_.data.definitionType==="TransformationNode"){C="GeneralTransformation";const S=_.data.transformations||[],L=[];for(const A of S)if(A.columns&&Array.isArray(A.columns))for(const z of A.columns)L.push({column:z,method:A.method,...A.params});M={transformations:L}}else if(_.data.definitionType==="BinningNode")C="GeneralBinning",M={columns:_.data.columns,strategy:_.data.strategy,n_bins:_.data.n_bins,label_format:_.data.label_format,output_suffix:_.data.output_suffix,drop_original:_.data.drop_original,custom_bins:_.data.custom_bins,custom_labels:_.data.custom_labels};else if(_.data.definitionType==="ResamplingNode")(_.data.type||"oversampling")==="oversampling"?C="Oversampling":C="Undersampling",M=_.data;else if(_.data.definitionType==="FeatureGenerationNode")C="FeatureMath",M={operations:_.data.operations};else if(_.data.definitionType==="TextCleaning")C="TextCleaning",M=_.data;else if(_.data.definitionType==="ValueReplacement")C="ValueReplacement",M=_.data;else if(_.data.definitionType==="AliasReplacement")C="AliasReplacement",M=_.data;else if(_.data.definitionType==="InvalidValueReplacement")C="InvalidValueReplacement",M=_.data;else throw console.error(`Unknown node type: ${_.data.definitionType}`),new Error(`Unknown node type: ${_.data.definitionType}. Pipeline execution stopped.`);g.push({node_id:_.id,step_type:C,params:M,inputs:R}),t.filter(S=>S.source===b).forEach(S=>N.push(S.target))}return{pipeline_id:`preview_${Date.now()}`,nodes:g,metadata:{dataset_source_id:h}}},x=async()=>{const h=e.find(v=>v.data.definitionType==="dataset_node"),g=h==null?void 0:h.data.datasetId;if(!g){alert("No dataset node found! Cannot save pipeline without a dataset context.");return}l(!0);try{await Pp(g,{name:"My Pipeline",description:"Saved from V2 Canvas",graph:m()}),alert("Pipeline saved successfully!")}catch(v){console.error("Save failed:",v),alert("Failed to save pipeline.")}finally{l(!1)}},w=async()=>{const h=e.find(v=>v.data.definitionType==="dataset_node"),g=h==null?void 0:h.data.datasetId;if(!g){alert("No dataset node found! Cannot load pipeline without a dataset context.");return}if(confirm("Loading a pipeline will overwrite your current work. Continue?")){c(!0);try{const v=await GT(g);v&&v.graph?(r(v.graph.nodes,v.graph.edges),alert("Pipeline loaded successfully!")):alert("No saved pipeline found for this dataset.")}catch(v){console.error("Load failed:",v),alert("Failed to load pipeline.")}finally{c(!1)}}},j=async()=>{const h=e.find(v=>v.data.definitionType==="dataset_node"),g=h==null?void 0:h.data.datasetId;if(!g){alert("No dataset node found!");return}o(!0),n(null);try{const v=y(g),N=await KT(v);n(N)}catch(v){console.error("Pipeline failed:",v),alert("Pipeline execution failed. Check console for details.")}finally{o(!1)}},p=async()=>{const h=e.find(N=>N.data.definitionType==="dataset_node"),g=h==null?void 0:h.data.datasetId,v=e.find(N=>N.data.definitionType==="train_model_draft");if(!g){alert("No dataset node found!");return}if(!v){alert('No training node found! Add a "Model Training" node to train a model.');return}f(!0);try{const N=await Pp(g,{name:"Training Pipeline",description:"Auto-saved before training",graph:m()});await ZT({dataset_source_id:g,pipeline_id:N.id.toString(),node_id:v.id,model_types:[v.data.modelType],hyperparameters:v.data.hyperparameters,graph:m(),run_training:!0}),alert("Training job submitted successfully! Check the jobs dashboard.")}catch(N){console.error("Training failed:",N),alert("Failed to submit training job.")}finally{f(!1)}};return i.jsxs("div",{className:"absolute top-4 right-4 z-10 flex gap-2",children:[i.jsxs("button",{onClick:w,disabled:u||s||d,className:"flex items-center gap-2 px-4 py-2 bg-background border rounded-md shadow-sm hover:bg-accent transition-colors disabled:opacity-50",children:[u?i.jsx(da,{className:"w-4 h-4 animate-spin"}):i.jsx($4,{className:"w-4 h-4"}),i.jsx("span",{className:"text-sm font-medium",children:u?"Loading...":"Load"})]}),i.jsxs("button",{onClick:x,disabled:a||s||d,className:"flex items-center gap-2 px-4 py-2 bg-background border rounded-md shadow-sm hover:bg-accent transition-colors disabled:opacity-50",children:[a?i.jsx(da,{className:"w-4 h-4 animate-spin"}):i.jsx(Z4,{className:"w-4 h-4"}),i.jsx("span",{className:"text-sm font-medium",children:a?"Saving...":"Save"})]}),i.jsxs("button",{onClick:j,disabled:s||d,className:"flex items-center gap-2 px-4 py-2 text-white rounded-md shadow-sm transition-all disabled:opacity-50",style:{background:"var(--main-gradient)"},children:[s?i.jsx(da,{className:"w-4 h-4 animate-spin"}):i.jsx(Y4,{className:"w-4 h-4"}),i.jsx("span",{className:"text-sm font-medium",children:s?"Running...":"Run Preview"})]}),i.jsxs("button",{onClick:p,disabled:s||d,className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-md shadow-sm hover:bg-green-700 transition-colors disabled:opacity-50",children:[d?i.jsx(da,{className:"w-4 h-4 animate-spin"}):i.jsx(fv,{className:"w-4 h-4"}),i.jsx("span",{className:"text-sm font-medium",children:d?"Submitting...":"Train Model"})]})]})},eR=()=>{const e=ce(m=>m.executionResult),[t,n]=T.useState(!0),[r,s]=T.useState(null),o=T.useMemo(()=>e!=null&&e.preview_data?Array.isArray(e.preview_data)?{Result:e.preview_data}:typeof e.preview_data=="object"?e.preview_data:{}:{},[e]),a=Object.keys(o);if(zt.useEffect(()=>{a.length>0&&(!r||!a.includes(r))&&(a.includes("train")?s("train"):a.includes("X")?s("X"):s(a[0]))},[a,r]),!e)return null;const l=r&&o[r]?o[r]:[],u=l.length>0?Object.keys(l[0]):[],c=e.node_results?Object.keys(e.node_results):[],d=Object.keys(e.node_results||{}).find(m=>e.node_results[m].status==="failed"),f=d?e.node_results[d].error:null;return i.jsxs("div",{className:`absolute bottom-0 left-0 right-0 bg-background border-t shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.1)] transition-all duration-300 z-20 flex flex-col ${t?"h-96":"h-10"}`,children:[i.jsxs("div",{className:"flex items-center justify-between px-4 py-2 bg-muted/10 cursor-pointer hover:bg-muted/20 border-b select-none",onClick:()=>n(!t),children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(s3,{className:"w-4 h-4 text-primary"}),i.jsx("span",{className:"font-semibold text-sm",children:"Preview Results"}),i.jsxs("span",{className:"text-xs text-muted-foreground ml-2",children:[l.length," rows shown"]}),e.status==="failed"&&i.jsx("span",{className:"text-xs text-red-600 font-bold ml-2",children:"(Failed)"})]}),i.jsx("button",{className:"p-1 hover:bg-muted rounded",children:t?i.jsx(sn,{className:"w-4 h-4"}):i.jsx(Wr,{className:"w-4 h-4"})})]}),t&&i.jsxs("div",{className:"flex-1 overflow-hidden flex flex-col",children:[e.status==="failed"&&i.jsxs("div",{className:"p-4 bg-red-50 border-b text-red-800 text-sm overflow-auto max-h-32",children:[i.jsx("div",{className:"font-bold mb-1",children:"Pipeline Execution Failed"}),i.jsx("div",{className:"font-mono text-xs whitespace-pre-wrap",children:f||"Unknown error occurred during execution."})]}),a.length>1&&i.jsxs("div",{className:"flex items-center gap-1 px-2 pt-2 border-b bg-muted/5",children:[i.jsx(B4,{className:"w-3 h-3 text-muted-foreground mr-1"}),a.map(m=>i.jsx("button",{onClick:()=>s(m),className:`px-3 py-1 text-xs font-medium rounded-t-md border-t border-l border-r transition-colors ${r===m?"bg-background text-primary border-b-background translate-y-[1px]":"bg-muted/30 text-muted-foreground hover:bg-muted/50 border-transparent"}`,children:m},m))]}),c.length>0&&e.status!=="failed"&&i.jsx("div",{className:"p-2 bg-blue-50 dark:bg-blue-950/20 border-b dark:border-blue-900/30 flex gap-2 overflow-x-auto",children:c.map((m,y)=>i.jsx("div",{className:"text-xs text-blue-800 dark:text-blue-200 bg-blue-100 dark:bg-blue-900/40 px-2 py-1 rounded border border-blue-200 dark:border-blue-800 whitespace-nowrap",children:m},y))}),i.jsxs("div",{className:"flex-1 overflow-auto",children:[i.jsxs("table",{className:"w-full text-sm text-left border-collapse",children:[i.jsx("thead",{className:"text-xs text-muted-foreground uppercase bg-muted sticky top-0 z-10 shadow-sm",children:i.jsx("tr",{children:u.map(m=>i.jsx("th",{className:"px-4 py-2 font-medium border-b whitespace-nowrap",children:m},m))})}),i.jsx("tbody",{children:l.map((m,y)=>i.jsx("tr",{className:"border-b hover:bg-muted/10",children:u.map(x=>i.jsx("td",{className:"px-4 py-2 whitespace-nowrap font-mono text-xs",children:m[x]!==null?String(m[x]):i.jsx("span",{className:"text-muted-foreground italic",children:"null"})},`${y}-${x}`))},y))})]}),l.length===0&&i.jsxs("div",{className:"flex items-center justify-center h-32 text-muted-foreground text-sm",children:["No preview data available ",r?`for ${r}`:""]})]})]})]})},tR=()=>{const[e,t]=T.useState(!1);T.useEffect(()=>{document.documentElement.classList.contains("dark")?t(!0):window.matchMedia("(prefers-color-scheme: dark)").matches&&(document.documentElement.classList.add("dark"),t(!0))},[]);const n=()=>{const r=!e;t(r),r?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")};return i.jsxs("div",{className:"h-14 border-b bg-card px-4 flex items-center justify-between shrink-0",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"p-1.5 bg-primary/10 rounded-md",children:i.jsx(X4,{className:"w-5 h-5 text-primary"})}),i.jsx("h1",{className:"font-bold text-lg tracking-tight bg-gradient-to-r from-blue-500 to-purple-600 bg-clip-text text-transparent",children:"Skyulf ML Canvas"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("a",{href:"/ml-workflow-v1",className:"text-sm text-muted-foreground hover:text-primary transition-colors mr-2",target:"_blank",rel:"noopener noreferrer",children:"Switch to Legacy V1"}),i.jsx("button",{onClick:n,className:"p-2 hover:bg-accent rounded-md transition-colors text-muted-foreground hover:text-foreground",title:"Toggle Theme",children:e?i.jsx(q4,{className:"w-5 h-5"}):i.jsx(n3,{className:"w-5 h-5"})})]})]})},nR=()=>i.jsxs("div",{className:"flex h-screen w-full bg-background overflow-hidden flex-col",children:[i.jsx(tR,{}),i.jsxs("div",{className:"flex flex-1 overflow-hidden relative",children:[i.jsx(l3,{}),i.jsxs("main",{className:"flex-1 h-full relative flex flex-col transition-all duration-300 ease-in-out",children:[i.jsx(JT,{}),i.jsxs("div",{className:"flex-1 relative",children:[i.jsx(x3,{}),i.jsx(eR,{})]})]}),i.jsx(y3,{})]})]});function rR(){const e=ce(t=>t.addNode);return T.useEffect(()=>{const n=new URLSearchParams(window.location.search).get("source_id");n&&setTimeout(()=>{e("dataset_node",{x:100,y:100},{datasetId:n})},100)},[]),T.useEffect(()=>{},[]),i.jsx(nR,{})}const sR=({config:e,onChange:t})=>i.jsxs("div",{className:"p-4 space-y-2",children:[i.jsx("label",{className:"block text-sm font-medium",children:"Debug Message"}),i.jsx("input",{type:"text",className:"w-full p-2 border rounded",value:e.message,onChange:n=>t({...e,message:n.target.value})})]}),oR={type:"debug_node",label:"Debug Node",category:"Utility",description:"A simple node for testing the registry.",icon:S4,inputs:[{id:"in",label:"Input",type:"any"}],outputs:[{id:"out",label:"Output",type:"any"}],component:({data:e})=>i.jsxs("div",{className:"text-xs",children:["Msg: ",i.jsx("span",{className:"font-mono",children:e.message||"..."})]}),settings:sR,validate:e=>({isValid:e.message.length>0,message:e.message.length===0?"Message is required":void 0}),getDefaultConfig:()=>({message:"Hello World"})},Ip="/data/api",$v={getAll:async()=>{const e=await fetch(`${Ip}/sources`);if(!e.ok)throw new Error("Failed to fetch datasets");return(await e.json()).sources||[]},getById:async e=>{const t=await fetch(`${Ip}/sources/${e}`);if(!t.ok)throw new Error("Failed to fetch dataset");return t.json()}},Re=e=>tj({queryKey:["dataset-schema",e],queryFn:()=>YT(e),enabled:!!e,staleTime:1e3*60*5}),iR=({config:e,onChange:t})=>{const[n,r]=T.useState([]),[s,o]=T.useState(!1),{data:a,isLoading:l}=Re(e.datasetId);T.useEffect(()=>{o(!0),$v.getAll().then(r).catch(console.error).finally(()=>o(!1))},[]);const u=c=>{const d=c.target.value,f=n.find(m=>String(m.id)===d);t({...e,datasetId:d,datasetName:f==null?void 0:f.name})};return i.jsxs("div",{className:"p-4 space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"block text-sm font-medium",children:"Select Dataset"}),s?i.jsx("div",{className:"text-xs text-muted-foreground",children:"Loading datasets..."}):i.jsxs("select",{className:"w-full p-2 border rounded bg-background focus:ring-1 focus:ring-primary outline-none",value:e.datasetId||"",onChange:u,children:[i.jsx("option",{value:"",children:"-- Select --"}),n.map(c=>i.jsx("option",{value:c.id,children:c.name},c.id))]})]}),e.datasetId&&i.jsxs("div",{className:"space-y-2 pt-2 border-t",children:[i.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium text-muted-foreground",children:[i.jsx(r3,{size:14}),i.jsx("span",{children:"Dataset Schema"})]}),l?i.jsx("div",{className:"text-xs text-muted-foreground animate-pulse",children:"Loading schema..."}):a?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"border rounded-md bg-muted/10 max-h-60 overflow-y-auto",children:i.jsxs("table",{className:"w-full text-xs text-left",children:[i.jsx("thead",{className:"bg-muted/20 sticky top-0",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 font-medium border-b",children:"Column"}),i.jsx("th",{className:"p-2 font-medium border-b",children:"Type"}),i.jsx("th",{className:"p-2 font-medium border-b text-right",children:"Missing"}),i.jsx("th",{className:"p-2 font-medium border-b text-right",children:"Unique"})]})}),i.jsx("tbody",{children:Object.values(a.columns).map(c=>i.jsxs("tr",{className:"border-b last:border-0 hover:bg-muted/20",children:[i.jsx("td",{className:"p-2 font-mono font-medium",children:c.name}),i.jsx("td",{className:"p-2 text-muted-foreground",children:c.dtype}),i.jsx("td",{className:"p-2 text-right text-muted-foreground",children:c.missing_count}),i.jsx("td",{className:"p-2 text-right text-muted-foreground",children:c.unique_count})]},c.name))})]})}),i.jsx("p",{className:"text-[10px] text-muted-foreground mt-1 text-center italic",children:"Expand node to see full details"})]}):i.jsx("div",{className:"text-xs text-muted-foreground italic",children:"No schema available."})]})]})},aR=({data:e})=>{const[t,n]=T.useState(void 0);T.useEffect(()=>{e.datasetId&&!e.datasetName&&t===void 0&&$v.getById(e.datasetId).then(s=>n(s.name)).catch(()=>n(e.datasetId))},[e.datasetId,e.datasetName,t]);const r=e.datasetName||t||e.datasetId;return i.jsx("div",{className:"text-xs",children:e.datasetId?i.jsx("div",{className:"font-medium truncate max-w-[150px]",title:r,children:r||"Loading..."}):i.jsx("div",{className:"text-muted-foreground italic",children:"Select a dataset"})})},lR={type:"dataset_node",label:"Dataset",category:"Data Source",description:"Load a dataset from the registry.",icon:D4,inputs:[],outputs:[{id:"data",label:"Data",type:"dataset"}],settings:iR,component:aR,validate:e=>({isValid:!!e.datasetId,message:e.datasetId?void 0:"Dataset is required"}),getDefaultConfig:()=>({datasetId:""})},Vv=(e,t,n,r=new Set)=>{var o;if(r.has(e.id))return;if(r.add(e.id),(o=e.data)!=null&&o.datasetId)return e.data.datasetId;const s=Js(e,t,n);for(const a of s){const l=Vv(a,t,n,r);if(l)return l}},Ae=e=>{const t=ce(o=>o.nodes),n=ce(o=>o.edges),r=t.find(o=>o.id===e);return r?Js(r,t,n).map(o=>{const a=Vv(o,t,n);return a&&!o.data.datasetId?{...o.data,datasetId:a}:o.data}):[]},so=(e,t={})=>{var o;const r=(o=Ae(e).find(a=>a.datasetId))==null?void 0:o.datasetId,s=ce(a=>a.executionResult);return T.useMemo(()=>!r||!(s!=null&&s.recommendations)?[]:s.recommendations.filter(a=>{var l,u;if(t.types||t.suggestedNodeTypes){const c=(l=t.types)==null?void 0:l.includes(a.type),d=(u=t.suggestedNodeTypes)==null?void 0:u.includes(a.suggested_node_type);if(!c&&!d)return!1}return!(t.scope==="column"&&(!a.target_columns||a.target_columns.length===0))}),[s,r,t.types,t.suggestedNodeTypes,t.scope])},Xr=({recommendations:e,onApply:t,className:n=""})=>!e||e.length===0?null:i.jsxs("div",{className:`bg-blue-50 border border-blue-100 rounded-md p-3 ${n}`,children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2 text-blue-800 font-medium text-sm",children:[i.jsx(mv,{className:"w-4 h-4"}),i.jsx("span",{children:"Recommendations"})]}),i.jsx("div",{className:"space-y-2",children:e.map(r=>i.jsx("div",{className:"bg-white border border-blue-100 rounded p-2 text-sm shadow-sm hover:shadow-md transition-shadow",children:i.jsxs("div",{className:"flex justify-between items-start gap-2",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"text-gray-800 font-medium text-xs mb-1",children:r.type.replace("_"," ").toUpperCase()}),i.jsx("p",{className:"text-gray-600 text-xs leading-relaxed",children:r.description}),r.reasoning&&i.jsxs("p",{className:"text-gray-400 text-[10px] mt-1 italic",children:["Why: ",r.reasoning]})]}),t&&i.jsx("button",{onClick:()=>t(r),className:"text-blue-600 hover:text-blue-800 p-1 rounded hover:bg-blue-50",title:"Apply Recommendation",children:i.jsx(R4,{className:"w-5 h-5"})})]})},r.rule_id))})]}),uR=({config:e,onChange:t,nodeId:n})=>{var N;const s=(N=Ae(n||"").find(k=>k.datasetId))==null?void 0:N.datasetId,{data:o,isLoading:a}=Re(s),l=o?Object.values(o.columns).map(k=>k.name):[],u=ce(k=>k.executionResult),c=n?u==null?void 0:u.node_results[n]:null,d=c==null?void 0:c.metrics,f=T.useRef(null),[m,y]=T.useState(!1);T.useEffect(()=>{if(!f.current)return;const k=new ResizeObserver(b=>{for(const _ of b)y(_.contentRect.width>450)});return k.observe(f.current),()=>k.disconnect()},[]);const x=so(n||"",{types:["cleaning","feature_selection"],suggestedNodeTypes:["DropMissingColumns"],scope:"column"}),w=k=>{if(k.target_columns&&k.target_columns.length>0){const b=Array.from(new Set([...e.columns,...k.target_columns]));t({...e,columns:b})}},[j,p]=T.useState(""),h=T.useMemo(()=>l.filter(k=>k.toLowerCase().includes(j.toLowerCase())),[l,j]),g=()=>{t({...e,columns:h})},v=()=>{const k=e.columns.filter(b=>!h.includes(b));t({...e,columns:k})};return i.jsxs("div",{ref:f,className:`flex flex-col h-full w-full bg-background ${m?"overflow-hidden":"overflow-y-auto"}`,children:[i.jsxs("div",{className:"shrink-0 p-4 pb-0 space-y-2",children:[!s&&i.jsx("div",{className:"p-2 bg-yellow-50 text-yellow-800 text-xs rounded border border-yellow-200",children:"Connect a dataset node to see available columns."}),a&&!!s&&i.jsx("div",{className:"text-xs text-muted-foreground animate-pulse",children:"Loading schema..."})]}),i.jsxs("div",{className:`flex-1 min-h-0 p-4 gap-4 ${m?"grid grid-cols-2":"flex flex-col"}`,children:[i.jsxs("div",{className:`space-y-4 ${m?"overflow-y-auto pr-2":"shrink-0"}`,children:[x.length>0&&i.jsx("div",{className:"shrink-0",children:i.jsx(Xr,{recommendations:x,onApply:w})}),i.jsxs("div",{className:"space-y-3 p-3 border rounded-md bg-muted/5",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"space-y-0.5",children:[i.jsx("label",{className:"text-sm font-medium text-foreground",children:"Missing Value Threshold"}),i.jsxs("p",{className:"text-[10px] text-muted-foreground",children:["Drop columns with >",e.missing_threshold??0,"% missing values"]})]}),i.jsxs("span",{className:"text-sm font-mono font-bold text-primary bg-primary/10 px-2 py-1 rounded",children:[e.missing_threshold??0,"%"]})]}),i.jsx("input",{type:"range",min:"0",max:"100",step:"5",value:e.missing_threshold??0,onChange:k=>t({...e,missing_threshold:parseInt(k.target.value)}),className:"w-full h-2 bg-secondary rounded-lg appearance-none cursor-pointer accent-primary"})]}),d&&d.dropped_columns_count!==void 0&&i.jsxs("div",{className:"p-3 bg-muted/30 rounded-md border border-border",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2 text-sm font-semibold text-primary",children:[i.jsx(ir,{size:14}),i.jsx("span",{children:"Last Run Results"})]}),i.jsxs("div",{className:"space-y-1 text-xs",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Columns Dropped:"}),i.jsx("span",{className:"font-medium text-destructive",children:d.dropped_columns_count})]}),d.dropped_columns&&Array.isArray(d.dropped_columns)&&d.dropped_columns.length>0&&i.jsxs("div",{className:"pt-1 border-t mt-1",children:[i.jsx("span",{className:"text-muted-foreground block mb-1",children:"Dropped Names:"}),i.jsx("div",{className:"flex flex-wrap gap-1",children:d.dropped_columns.map(k=>i.jsx("span",{className:"px-1.5 py-0.5 bg-background border rounded text-[10px] font-mono",children:k},k))})]})]})]})]}),i.jsxs("div",{className:`flex flex-col border rounded-md bg-background shadow-sm overflow-hidden ${m?"min-h-0 flex-1":"h-96 shrink-0"}`,children:[i.jsxs("div",{className:"p-3 border-b bg-muted/5 space-y-3 shrink-0",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("label",{className:"text-sm font-medium",children:"Explicitly Drop Columns"}),i.jsxs("span",{className:"text-xs text-muted-foreground",children:[e.columns.length," selected"]})]}),i.jsx("div",{className:"relative group",children:i.jsx("input",{type:"text",placeholder:"Search columns...",className:"block w-full pl-9 pr-3 py-1.5 text-sm bg-background border rounded-md shadow-sm focus:ring-1 focus:ring-primary focus:border-primary transition-all outline-none",value:j,onChange:k=>p(k.target.value)})}),i.jsxs("div",{className:"flex gap-2 text-xs justify-end",children:[i.jsx("button",{onClick:g,className:"text-primary hover:text-primary/80 font-medium transition-colors",children:"Select All"}),i.jsx("span",{className:"text-border",children:"|"}),i.jsx("button",{onClick:v,className:"text-primary hover:text-primary/80 font-medium transition-colors",children:"Deselect All"})]})]}),i.jsx("div",{className:"flex-1 overflow-y-auto p-1",children:l.length>0?h.length>0?i.jsx("div",{className:"space-y-0.5",children:h.map(k=>i.jsxs("label",{className:"flex items-center gap-2 text-sm hover:bg-accent/50 p-2 rounded cursor-pointer transition-colors select-none",children:[i.jsx("input",{type:"checkbox",checked:e.columns.includes(k),onChange:b=>{const _=b.target.checked?[...e.columns,k]:e.columns.filter(C=>C!==k);t({...e,columns:_})},className:"rounded border-gray-300 text-primary focus:ring-primary w-4 h-4"}),i.jsx("span",{className:"truncate font-mono text-xs",title:k,children:k})]},k))}):i.jsxs("div",{className:"text-xs text-muted-foreground text-center py-8",children:['No columns match "',j,'"']}):i.jsx("div",{className:"text-xs text-muted-foreground italic p-8 text-center",children:"No columns available"})})]})]})]})},cR={type:"drop_missing_columns",label:"Drop Columns",category:"Preprocessing",description:"Remove specific columns or those with high missing values.",icon:Qr,inputs:[{id:"in",label:"Data",type:"dataset"}],outputs:[{id:"out",label:"Data",type:"dataset"}],settings:uR,validate:e=>({isValid:e.columns.length>0||e.missing_threshold!==void 0&&e.missing_threshold>0,message:e.columns.length===0&&(!e.missing_threshold||e.missing_threshold===0)?"Select columns or set a threshold":void 0}),getDefaultConfig:()=>({columns:[],missing_threshold:0})},dR=({config:e,onChange:t,nodeId:n})=>{var k;const s=(k=Ae(n||"").find(b=>b.datasetId))==null?void 0:k.datasetId,{data:o,isLoading:a}=Re(s),l=o?Object.values(o.columns).map(b=>b.name):[],u=ce(b=>b.executionResult),c=n?u==null?void 0:u.node_results[n]:null,d=c==null?void 0:c.metrics,f=T.useRef(null),[m,y]=T.useState(!1);T.useEffect(()=>{if(!f.current)return;const b=new ResizeObserver(_=>{for(const C of _)y(C.contentRect.width>450)});return b.observe(f.current),()=>b.disconnect()},[]);const x=so(n||"",{types:["imputation"],suggestedNodeTypes:["SimpleImputer","KNNImputer","IterativeImputer"],scope:"column"}),w=b=>{if(b.target_columns&&b.target_columns.length>0){const _=Array.from(new Set([...e.columns,...b.target_columns]));t({...e,columns:_})}},[j,p]=T.useState(""),h=T.useMemo(()=>l.filter(b=>b.toLowerCase().includes(j.toLowerCase())),[l,j]),g=()=>{t({...e,columns:h})},v=()=>{const b=e.columns.filter(_=>!h.includes(_));t({...e,columns:b})},N=()=>d?i.jsxs("div",{className:"mt-4 p-3 bg-muted/50 rounded border text-xs",children:[i.jsx("div",{className:"font-medium text-muted-foreground mb-2",children:"Execution Feedback"}),d.fill_values&&i.jsxs("div",{className:"space-y-1",children:[i.jsx("span",{className:"text-muted-foreground block mb-1 font-medium",children:"Imputed Values:"}),i.jsx("div",{className:"grid grid-cols-2 gap-x-4 gap-y-1 max-h-32 overflow-y-auto",children:Object.entries(d.fill_values).map(([b,_])=>i.jsxs("div",{className:"flex justify-between text-[10px]",children:[i.jsxs("span",{className:"truncate max-w-[100px]",title:b,children:[b,":"]}),i.jsx("span",{className:"font-mono",children:typeof _=="number"?_.toFixed(4):String(_)})]},b))})]}),d.missing_counts&&i.jsxs("div",{className:"space-y-1 mt-2",children:[i.jsx("span",{className:"text-muted-foreground block mb-1 font-medium",children:"Missing Values Filled:"}),i.jsx("div",{className:"grid grid-cols-2 gap-x-4 gap-y-1 max-h-32 overflow-y-auto",children:Object.entries(d.missing_counts).map(([b,_])=>i.jsxs("div",{className:"flex justify-between text-[10px]",children:[i.jsxs("span",{className:"truncate max-w-[100px]",title:b,children:[b,":"]}),i.jsx("span",{className:"font-mono",children:String(_)})]},b))}),d.total_missing!==void 0&&i.jsxs("div",{className:"text-[10px] text-muted-foreground mt-1 pt-1 border-t",children:["Total Filled: ",i.jsx("span",{className:"font-mono font-medium",children:d.total_missing})]})]}),!d.fill_values&&!d.missing_counts&&(c==null?void 0:c.status)==="success"&&i.jsx("div",{className:"text-green-600",children:"Imputation completed successfully."})]}):null;return i.jsxs("div",{ref:f,className:`flex flex-col h-full w-full bg-background ${m?"overflow-hidden":"overflow-y-auto"}`,children:[i.jsxs("div",{className:"shrink-0 p-4 pb-0 space-y-2",children:[!s&&i.jsx("div",{className:"p-2 bg-yellow-50 text-yellow-800 text-xs rounded border border-yellow-200",children:"Connect a dataset node to see available columns."}),a&&!!s&&i.jsx("div",{className:"text-xs text-muted-foreground animate-pulse",children:"Loading schema..."})]}),i.jsxs("div",{className:`flex-1 min-h-0 p-4 gap-4 ${m?"grid grid-cols-2":"flex flex-col"}`,children:[i.jsxs("div",{className:`space-y-4 ${m?"overflow-y-auto pr-2":"shrink-0"}`,children:[x.length>0&&i.jsx("div",{className:"shrink-0",children:i.jsx(Xr,{recommendations:x,onApply:w})}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Imputation Method"}),i.jsxs("select",{className:"w-full p-2 border rounded bg-background text-sm",value:e.method||"simple",onChange:b=>t({...e,method:b.target.value}),children:[i.jsx("option",{value:"simple",children:"Simple Imputer (Univariate)"}),i.jsx("option",{value:"knn",children:"KNN Imputer (Multivariate)"}),i.jsx("option",{value:"iterative",children:"Iterative Imputer (MICE)"})]})]}),(e.method==="simple"||!e.method)&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Strategy"}),i.jsxs("select",{className:"w-full p-2 border rounded bg-background text-sm",value:e.strategy,onChange:b=>t({...e,strategy:b.target.value}),children:[i.jsx("option",{value:"mean",children:"Mean (Average)"}),i.jsx("option",{value:"median",children:"Median (Middle Value)"}),i.jsx("option",{value:"most_frequent",children:"Most Frequent (Mode)"}),i.jsx("option",{value:"constant",children:"Constant Value"})]}),i.jsxs("p",{className:"text-[10px] text-muted-foreground mt-1",children:[e.strategy==="mean"&&"Replaces missing values with the mean of the column. (Numeric only)",e.strategy==="median"&&"Replaces missing values with the median. (Robust to outliers)",e.strategy==="most_frequent"&&"Replaces missing with the most common value. (Categorical/Numeric)",e.strategy==="constant"&&"Replaces missing values with a specific value."]})]}),e.strategy==="constant"&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Fill Value"}),i.jsx("input",{type:"text",className:"w-full p-2 border rounded bg-background text-sm",value:e.fill_value||"",onChange:b=>t({...e,fill_value:b.target.value}),placeholder:"Enter value..."})]})]}),e.method==="knn"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Number of Neighbors"}),i.jsx("input",{type:"number",min:"1",className:"w-full p-2 border rounded bg-background text-sm",value:e.n_neighbors||5,onChange:b=>t({...e,n_neighbors:parseInt(b.target.value)})})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Weights"}),i.jsxs("select",{className:"w-full p-2 border rounded bg-background text-sm",value:e.weights||"uniform",onChange:b=>t({...e,weights:b.target.value}),children:[i.jsx("option",{value:"uniform",children:"Uniform"}),i.jsx("option",{value:"distance",children:"Distance"})]}),i.jsx("p",{className:"text-[10px] text-muted-foreground mt-1",children:"Uniform: All points in each neighborhood are weighted equally. Distance: Weight points by the inverse of their distance."})]})]}),e.method==="iterative"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Max Iterations"}),i.jsx("input",{type:"number",min:"1",className:"w-full p-2 border rounded bg-background text-sm",value:e.max_iter||10,onChange:b=>t({...e,max_iter:parseInt(b.target.value)})})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Estimator"}),i.jsxs("select",{className:"w-full p-2 border rounded bg-background text-sm",value:e.estimator||"bayesian_ridge",onChange:b=>t({...e,estimator:b.target.value}),children:[i.jsx("option",{value:"bayesian_ridge",children:"Bayesian Ridge"}),i.jsx("option",{value:"decision_tree",children:"Decision Tree"}),i.jsx("option",{value:"extra_trees",children:"Extra Trees"}),i.jsx("option",{value:"knn",children:"KNN"})]}),i.jsx("p",{className:"text-[10px] text-muted-foreground mt-1",children:"The estimator to use for the imputation steps."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Random State"}),i.jsx("input",{type:"number",className:"w-full p-2 border rounded bg-background text-sm",value:e.random_state??0,onChange:b=>t({...e,random_state:parseInt(b.target.value)})})]})]}),m&&i.jsx(N,{})]}),i.jsxs("div",{className:`flex flex-col h-full min-h-[200px] border rounded-md overflow-hidden ${m?"":"shrink-0"}`,children:[i.jsxs("div",{className:"p-2 border-b bg-muted/30 flex flex-col gap-2",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("span",{className:"text-xs font-medium text-muted-foreground",children:["Target Columns (",e.columns.length,")"]}),i.jsxs("div",{className:"flex gap-1",children:[i.jsx("button",{onClick:g,className:"text-[10px] px-2 py-1 hover:bg-accent rounded",children:"All"}),i.jsx("button",{onClick:v,className:"text-[10px] px-2 py-1 hover:bg-accent rounded",children:"None"})]})]}),i.jsx("input",{type:"text",placeholder:"Search columns...",className:"w-full text-xs p-1.5 border rounded bg-background",value:j,onChange:b=>p(b.target.value)})]}),i.jsx("div",{className:"flex-1 overflow-y-auto p-2 space-y-1",children:h.length>0?h.map(b=>i.jsxs("label",{className:"flex items-center justify-between gap-2 text-sm hover:bg-accent/50 p-1.5 rounded cursor-pointer select-none",children:[i.jsxs("div",{className:"flex items-center gap-2 overflow-hidden",children:[i.jsx("input",{type:"checkbox",checked:e.columns.includes(b),onChange:_=>{const C=_.target.checked?[...e.columns,b]:e.columns.filter(M=>M!==b);t({...e,columns:C})},className:"rounded border-gray-300 text-primary focus:ring-primary shrink-0"}),i.jsx("span",{className:"truncate",title:b,children:b})]}),(d==null?void 0:d.missing_counts)&&d.missing_counts[b]!==void 0&&i.jsx("span",{className:"text-[10px] text-muted-foreground font-mono shrink-0 bg-muted px-1.5 py-0.5 rounded",title:`${d.missing_counts[b]} missing values filled`,children:d.missing_counts[b]})]},b)):i.jsx("div",{className:"p-4 text-center text-xs text-muted-foreground",children:l.length===0?"No columns available":"No matches found"})})]}),!m&&i.jsx(N,{})]})]})},fR={type:"imputation_node",label:"Imputation",category:"Preprocessing",description:"Fill missing values using Simple, KNN, or Iterative strategies.",icon:Q4,inputs:[{id:"in",label:"Data",type:"dataset"}],outputs:[{id:"out",label:"Cleaned Data",type:"dataset"}],settings:dR,validate:e=>e.columns.length===0?{isValid:!1,message:"Select at least one column"}:(e.method==="simple"||!e.method)&&e.strategy==="constant"&&(e.fill_value===void 0||e.fill_value==="")?{isValid:!1,message:"Fill value is required for Constant strategy"}:{isValid:!0},getDefaultConfig:()=>({columns:[],method:"simple",strategy:"mean",fill_value:0,n_neighbors:5,weights:"uniform",max_iter:10,estimator:"bayesian_ridge",random_state:0})},mR=({config:e,onChange:t,nodeId:n})=>{var g;const s=(g=Ae(n||"").find(v=>v.datasetId))==null?void 0:g.datasetId,{data:o,isLoading:a}=Re(s),l=ce(v=>v.executionResult),u=n?l==null?void 0:l.node_results[n]:null,c=T.useRef(null),[d,f]=T.useState(!1),[m,y]=T.useState("");T.useEffect(()=>{if(!c.current)return;const v=new ResizeObserver(N=>{for(const k of N)f(k.contentRect.width>450)});return v.observe(c.current),()=>v.disconnect()},[]);const x=o?Object.values(o.columns).filter(v=>["int","float","number"].some(N=>{var k;return(k=v.dtype)==null?void 0:k.toLowerCase().includes(N)})).map(v=>v.name):[],w=x.filter(v=>v.toLowerCase().includes(m.toLowerCase())),j=()=>{t({...e,columns:w})},p=()=>{const v=e.columns.filter(N=>!w.includes(N));t({...e,columns:v})},h=()=>{if(!u||!u.metrics)return null;const v=u.metrics,N=v.columns;if(!N)return null;const k=()=>{switch(e.method){case"standard":return"Target:   0,   1";case"minmax":return`Target: ${e.feature_range_min??0} to ${e.feature_range_max??1}`;case"robust":return"Target: Median  0, IQR  1";case"maxabs":return"Target: MaxAbs = 1";default:return""}};return i.jsxs("div",{className:"mt-4 p-3 bg-muted/50 rounded border text-xs space-y-2",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("div",{className:"font-medium text-muted-foreground",children:"Scaling Statistics"}),i.jsx("div",{className:"text-[10px] text-primary/80 bg-primary/5 px-1.5 py-0.5 rounded border border-primary/10",title:"Values close to these targets indicate successful scaling.",children:k()})]}),i.jsx("div",{className:"max-h-40 overflow-y-auto bg-background p-2 rounded border space-y-1",children:N.map((b,_)=>{var M,I,R,O,S,L,A;let C="";if(e.method==="standard"){const z=(M=v.mean)==null?void 0:M[_],E=(I=v.scale)==null?void 0:I[_];typeof z=="number"&&(C=`=${z.toFixed(2)}, =${typeof E=="number"?E.toFixed(2):"-"}`)}else if(e.method==="minmax"){const z=(R=v.data_min)==null?void 0:R[_],E=(O=v.data_max)==null?void 0:O[_];typeof z=="number"&&(C=`Min=${z.toFixed(2)}, Max=${typeof E=="number"?E.toFixed(2):"-"}`)}else if(e.method==="robust"){const z=(S=v.center)==null?void 0:S[_],E=(L=v.scale)==null?void 0:L[_];typeof z=="number"&&(C=`Med=${z.toFixed(2)}, IQR=${typeof E=="number"?E.toFixed(2):"-"}`)}else if(e.method==="maxabs"){const z=(A=v.max_abs)==null?void 0:A[_];typeof z=="number"&&(C=`MaxAbs=${z.toFixed(2)}`)}return i.jsxs("div",{className:"flex justify-between items-center border-b border-border/50 last:border-0 pb-1 last:pb-0",children:[i.jsx("span",{className:"truncate max-w-[100px] font-medium",title:b,children:b}),i.jsx("span",{className:"font-mono text-[10px] text-muted-foreground",children:C})]},b)})})]})};return i.jsxs("div",{ref:c,className:`flex flex-col h-full w-full bg-background ${d?"overflow-hidden":"overflow-y-auto"}`,children:[i.jsx("div",{className:"shrink-0 p-4 pb-0 space-y-2",children:!s&&i.jsx("div",{className:"p-2 bg-yellow-50 text-yellow-800 text-xs rounded border border-yellow-200",children:"Connect a dataset node to see available columns."})}),i.jsxs("div",{className:`flex-1 min-h-0 p-4 gap-4 ${d?"grid grid-cols-2":"flex flex-col"}`,children:[i.jsxs("div",{className:`space-y-4 ${d?"overflow-y-auto pr-2":"shrink-0"}`,children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Scaling Method"}),i.jsxs("select",{className:"w-full p-2 border rounded bg-background text-sm",value:e.method,onChange:v=>t({...e,method:v.target.value}),children:[i.jsx("option",{value:"standard",children:"Standard Scaler (Z-Score)"}),i.jsx("option",{value:"minmax",children:"MinMax Scaler (0-1)"}),i.jsx("option",{value:"maxabs",children:"MaxAbs Scaler"}),i.jsx("option",{value:"robust",children:"Robust Scaler (Outlier Safe)"})]}),i.jsxs("p",{className:"text-[10px] text-muted-foreground mt-1",children:[e.method==="standard"&&"Centers data around 0 with unit variance.",e.method==="minmax"&&"Scales data to a fixed range [0, 1].",e.method==="maxabs"&&"Scales data by its maximum absolute value.",e.method==="robust"&&"Scales data using statistics that are robust to outliers."]})]}),e.method==="standard"&&i.jsxs("div",{className:"space-y-2 border-t pt-2",children:[i.jsxs("label",{className:"flex items-center gap-2 text-sm cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:e.with_mean??!0,onChange:v=>t({...e,with_mean:v.target.checked}),className:"rounded border-gray-300 text-primary focus:ring-primary"}),i.jsx("span",{children:"Center Data (with_mean)"})]}),i.jsxs("label",{className:"flex items-center gap-2 text-sm cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:e.with_std??!0,onChange:v=>t({...e,with_std:v.target.checked}),className:"rounded border-gray-300 text-primary focus:ring-primary"}),i.jsx("span",{children:"Scale Variance (with_std)"})]})]}),e.method==="minmax"&&i.jsxs("div",{className:"space-y-2 border-t pt-2",children:[i.jsx("label",{className:"block text-sm font-medium",children:"Feature Range"}),i.jsxs("div",{className:"flex gap-2 items-center",children:[i.jsx("input",{type:"number",className:"w-full p-2 border rounded bg-background text-sm",placeholder:"Min (0)",value:e.feature_range_min??0,onChange:v=>t({...e,feature_range_min:parseFloat(v.target.value)})}),i.jsx("span",{className:"text-muted-foreground",children:"-"}),i.jsx("input",{type:"number",className:"w-full p-2 border rounded bg-background text-sm",placeholder:"Max (1)",value:e.feature_range_max??1,onChange:v=>t({...e,feature_range_max:parseFloat(v.target.value)})})]})]}),e.method==="robust"&&i.jsxs("div",{className:"space-y-2 border-t pt-2",children:[i.jsx("label",{className:"block text-sm font-medium",children:"Quantile Range"}),i.jsxs("div",{className:"flex gap-2 items-center",children:[i.jsx("input",{type:"number",className:"w-full p-2 border rounded bg-background text-sm",placeholder:"Min (25.0)",value:e.quantile_range_min??25,onChange:v=>t({...e,quantile_range_min:parseFloat(v.target.value)})}),i.jsx("span",{className:"text-muted-foreground",children:"-"}),i.jsx("input",{type:"number",className:"w-full p-2 border rounded bg-background text-sm",placeholder:"Max (75.0)",value:e.quantile_range_max??75,onChange:v=>t({...e,quantile_range_max:parseFloat(v.target.value)})})]}),i.jsxs("div",{className:"space-y-2 mt-2",children:[i.jsxs("label",{className:"flex items-center gap-2 text-sm cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:e.with_centering??!0,onChange:v=>t({...e,with_centering:v.target.checked}),className:"rounded border-gray-300 text-primary focus:ring-primary"}),i.jsx("span",{children:"Center Data (Median)"})]}),i.jsxs("label",{className:"flex items-center gap-2 text-sm cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:e.with_scaling??!0,onChange:v=>t({...e,with_scaling:v.target.checked}),className:"rounded border-gray-300 text-primary focus:ring-primary"}),i.jsx("span",{children:"Scale Data (IQR)"})]})]})]}),d&&i.jsx(h,{})]}),i.jsxs("div",{className:`flex flex-col h-full min-h-[200px] border rounded-md overflow-hidden ${d?"":"shrink-0"}`,children:[i.jsxs("div",{className:"p-2 border-b bg-muted/30 flex flex-col gap-2",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("span",{className:"text-xs font-medium text-muted-foreground",children:["Numeric Columns (",e.columns.length,")"]}),i.jsxs("div",{className:"flex gap-1",children:[i.jsx("button",{onClick:j,className:"text-[10px] px-2 py-1 hover:bg-accent rounded",children:"All"}),i.jsx("button",{onClick:p,className:"text-[10px] px-2 py-1 hover:bg-accent rounded",children:"None"})]})]}),i.jsx("input",{type:"text",placeholder:"Search columns...",className:"w-full text-xs p-1.5 border rounded bg-background",value:m,onChange:v=>y(v.target.value)})]}),i.jsx("div",{className:"flex-1 overflow-y-auto p-2 space-y-1",children:w.length>0?w.map(v=>i.jsxs("label",{className:"flex items-center gap-2 text-sm hover:bg-accent/50 p-1.5 rounded cursor-pointer select-none",children:[i.jsx("input",{type:"checkbox",checked:e.columns.includes(v),onChange:N=>{const k=N.target.checked?[...e.columns,v]:e.columns.filter(b=>b!==v);t({...e,columns:k})},className:"rounded border-gray-300 text-primary focus:ring-primary"}),i.jsx("span",{className:"truncate",title:v,children:v})]},v)):i.jsx("div",{className:"text-xs text-muted-foreground italic p-4 text-center",children:a?"Loading schema...":x.length===0?"No numeric columns found":"No matches found"})})]}),!d&&i.jsx(h,{})]})]})},hR={type:"scale_numeric_features",label:"Scaling",category:"Preprocessing",description:"Scale numeric features to a standard range.",icon:J4,inputs:[{id:"in",label:"Data",type:"dataset"}],outputs:[{id:"out",label:"Scaled Data",type:"dataset"}],settings:mR,validate:e=>({isValid:e.columns.length>0,message:e.columns.length===0?"Select at least one column":void 0}),getDefaultConfig:()=>({columns:[],method:"standard"})},pR=({config:e,onChange:t,nodeId:n})=>{var f,m;const[r,s]=T.useState(!0),o=Ae(n||""),a=(f=o.find(y=>y.datasetId))==null?void 0:f.datasetId,l=(m=o.find(y=>y.target_column))==null?void 0:m.target_column;zt.useEffect(()=>{const y={};a&&e.datasetId!==a&&(y.datasetId=a),l&&e.targetColumn!==l&&(y.targetColumn=l),Object.keys(y).length>0&&t({...e,...y})},[a,l,e.datasetId,e.targetColumn,t]);const{data:u,isLoading:c}=Re(a||e.datasetId),d=u?Object.values(u.columns).map(y=>y.name):[];return i.jsxs("div",{className:"p-4 space-y-4",children:[i.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-md border border-blue-100 dark:border-blue-800 overflow-hidden",children:[i.jsxs("button",{onClick:()=>s(!r),className:"w-full flex items-center gap-2 p-3 text-left hover:bg-blue-100/50 dark:hover:bg-blue-900/30 transition-colors",children:[i.jsx(to,{className:"text-blue-600 dark:text-blue-400 shrink-0",size:16}),i.jsx("span",{className:"text-xs font-semibold text-blue-800 dark:text-blue-200 flex-1",children:"About Model Training"}),r?i.jsx(Wr,{size:14,className:"text-blue-600 dark:text-blue-400"}):i.jsx(sn,{size:14,className:"text-blue-600 dark:text-blue-400"})]}),r&&i.jsx("div",{className:"px-3 pb-3 text-xs text-blue-800 dark:text-blue-200 pl-9",children:i.jsx("p",{children:"Train a machine learning model on your data. Select a target column and a model algorithm."})})]}),!a&&!e.datasetId&&i.jsx("div",{className:"p-2 bg-yellow-50 text-yellow-800 text-xs rounded border border-yellow-200",children:"Connect a dataset node to see available columns."}),c&&i.jsx("div",{className:"text-xs text-muted-foreground animate-pulse",children:"Loading schema..."}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Target Column"}),i.jsxs("select",{className:"w-full p-2 border rounded bg-background text-sm",value:e.targetColumn??"",onChange:y=>t({...e,targetColumn:y.target.value}),disabled:!!l,children:[i.jsx("option",{value:"",children:"-- Select Target --"}),d.map(y=>i.jsx("option",{value:y,children:y},y))]}),l&&i.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Target column inherited from upstream split."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Model Type"}),i.jsxs("select",{className:"w-full p-2 border rounded bg-background text-sm",value:e.modelType,onChange:y=>t({...e,modelType:y.target.value}),children:[i.jsxs("optgroup",{label:"Classification",children:[i.jsx("option",{value:"random_forest_classifier",children:"Random Forest Classifier"}),i.jsx("option",{value:"logistic_regression",children:"Logistic Regression"})]}),i.jsxs("optgroup",{label:"Regression",children:[i.jsx("option",{value:"random_forest_regressor",children:"Random Forest Regressor"}),i.jsx("option",{value:"ridge_regression",children:"Ridge Regression"})]})]})]}),(e.modelType==="random_forest_classifier"||e.modelType==="random_forest_regressor")&&i.jsxs("div",{className:"space-y-2 border-t pt-2",children:[i.jsx("h4",{className:"text-xs font-semibold text-muted-foreground",children:"Hyperparameters"}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs mb-1",children:"N Estimators"}),i.jsx("input",{type:"number",className:"w-full p-1.5 border rounded bg-background text-xs",value:e.hyperparameters.n_estimators??100,onChange:y=>t({...e,hyperparameters:{...e.hyperparameters,n_estimators:parseInt(y.target.value)||100}})})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs mb-1",children:"Max Depth"}),i.jsx("input",{type:"number",className:"w-full p-1.5 border rounded bg-background text-xs",placeholder:"None (Unlimited)",value:e.hyperparameters.max_depth??"",onChange:y=>t({...e,hyperparameters:{...e.hyperparameters,max_depth:y.target.value?parseInt(y.target.value):void 0}})})]})]}),e.modelType==="logistic_regression"&&i.jsxs("div",{className:"space-y-2 border-t pt-2",children:[i.jsx("h4",{className:"text-xs font-semibold text-muted-foreground",children:"Hyperparameters"}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs mb-1",children:"C (Inverse Regularization)"}),i.jsx("input",{type:"number",step:"0.1",className:"w-full p-1.5 border rounded bg-background text-xs",value:e.hyperparameters.C??1,onChange:y=>t({...e,hyperparameters:{...e.hyperparameters,C:parseFloat(y.target.value)||1}})})]})]}),e.modelType==="ridge_regression"&&i.jsxs("div",{className:"space-y-2 border-t pt-2",children:[i.jsx("h4",{className:"text-xs font-semibold text-muted-foreground",children:"Hyperparameters"}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs mb-1",children:"Alpha (Regularization Strength)"}),i.jsx("input",{type:"number",step:"0.1",className:"w-full p-1.5 border rounded bg-background text-xs",value:e.hyperparameters.alpha??1,onChange:y=>t({...e,hyperparameters:{...e.hyperparameters,alpha:parseFloat(y.target.value)||1}})})]})]})]})},gR={type:"train_model_draft",label:"Model Training",category:"Modeling",description:"Train a machine learning model.",icon:fv,inputs:[{id:"train",label:"Training Data",type:"dataset"}],outputs:[{id:"model",label:"Trained Model",type:"model"}],settings:pR,validate:e=>e.targetColumn?{isValid:!0}:{isValid:!1,message:"Target column is required."},getDefaultConfig:()=>({targetColumn:"",modelType:"random_forest_classifier",hyperparameters:{n_estimators:100}})},xR=({config:e,onChange:t})=>{const n=["train","validation","test"],r=["accuracy","precision","recall","f1","roc_auc","mse","rmse","r2"],s=a=>{const l=e.splits.includes(a)?e.splits.filter(u=>u!==a):[...e.splits,a];t({...e,splits:l})},o=a=>{const l=e.metrics.includes(a)?e.metrics.filter(u=>u!==a):[...e.metrics,a];t({...e,metrics:l})};return i.jsxs("div",{className:"p-4 space-y-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Evaluation Splits"}),i.jsx("div",{className:"space-y-2",children:n.map(a=>i.jsxs("label",{className:"flex items-center gap-2 text-sm cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:e.splits.includes(a),onChange:()=>s(a),className:"rounded border-gray-300 text-primary focus:ring-primary"}),i.jsxs("span",{className:"capitalize",children:[a," Set"]})]},a))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Metrics to Track"}),i.jsx("div",{className:"grid grid-cols-2 gap-2",children:r.map(a=>i.jsxs("label",{className:"flex items-center gap-2 text-sm cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:e.metrics.includes(a),onChange:()=>o(a),className:"rounded border-gray-300 text-primary focus:ring-primary"}),i.jsx("span",{className:"uppercase",children:a.replace("_"," ")})]},a))})]})]})},yR={type:"model_evaluation",label:"Model Evaluation",category:"Evaluation",description:"Evaluate model performance on specific splits.",icon:dv,inputs:[{id:"model",label:"Trained Model",type:"model"}],outputs:[{id:"report",label:"Evaluation Report",type:"report"}],settings:xR,validate:e=>({isValid:e.splits.length>0,message:e.splits.length===0?"Select at least one split to evaluate":void 0}),getDefaultConfig:()=>({splits:["validation"],metrics:["accuracy","f1"]})},vR=({config:e,onChange:t,nodeId:n})=>{var v;const r=Ae(n||""),s=ce(N=>N.nodes),o=ce(N=>N.edges),a=ce(N=>N.executionResult),u=(N=>{var _;const k=new Set,b=[N];for(;b.length>0;){const C=b.shift();if(k.has(C))continue;k.add(C);const M=s.find(R=>R.id===C);if(!M)continue;if(C!==N&&((_=M.data)!=null&&_.datasetId))return M.data.datasetId;const I=Js(M,s,o);for(const R of I)b.push(R.id)}})(n||""),c=(v=r.find(N=>N.target_column))==null?void 0:v.target_column;T.useEffect(()=>{const N={};u&&e.datasetId!==u&&(N.datasetId=u),c&&e.target_column!==c&&(N.target_column=c),Object.keys(N).length>0&&t({...e,...N})},[u,c,e.datasetId,e.target_column,t]);const{data:d,isLoading:f}=Re(u||e.datasetId),m=d?Object.values(d.columns).map(N=>N.name):[],y=T.useRef(null),[x,w]=T.useState(!1);T.useEffect(()=>{if(!y.current)return;const N=new ResizeObserver(k=>{for(const b of k)w(b.contentRect.width>450)});return N.observe(y.current),()=>N.disconnect()},[]);const j=()=>{const N=e.problem_type||"auto";return N==="classification"?[{value:"f_classif",label:"ANOVA F-value"},{value:"mutual_info_classif",label:"Mutual Information"},{value:"chi2",label:"Chi-squared"}]:N==="regression"?[{value:"f_regression",label:"F-value"},{value:"mutual_info_regression",label:"Mutual Information"},{value:"r_regression",label:"Pearson Correlation"}]:[{value:"f_classif",label:"ANOVA F-value (Classif)"},{value:"f_regression",label:"F-value (Reg)"},{value:"mutual_info_classif",label:"Mutual Info (Classif)"},{value:"mutual_info_regression",label:"Mutual Info (Reg)"}]},p=["select_k_best","select_percentile","select_fpr","select_fdr","select_fwe","generic_univariate_select"].includes(e.method),h=["select_from_model","rfe"].includes(e.method),g=()=>{const N=a==null?void 0:a.node_results[n||""];if(!N)return null;const k=N.metrics||{},b=k.dropped_columns,_=k.feature_scores,C=k.p_values,M=k.feature_importances,I=k.variances,R=k.ranking;return i.jsxs("div",{className:"mt-4 p-3 bg-muted/50 rounded border text-xs space-y-3",children:[i.jsx("div",{className:"font-medium text-muted-foreground",children:"Execution Feedback"}),N.error&&i.jsx("div",{className:"p-2 bg-destructive/10 text-destructive rounded border border-destructive/20",children:N.error}),b&&b.length>0?i.jsxs("div",{children:[i.jsx("div",{className:"font-medium text-muted-foreground mb-1 flex justify-between items-center",children:i.jsxs("span",{children:["Dropped Columns (",b.length,")"]})}),i.jsx("div",{className:"max-h-40 overflow-y-auto bg-background p-2 rounded border space-y-1",children:b.map(O=>{const S=_==null?void 0:_[O],L=C==null?void 0:C[O],A=M==null?void 0:M[O],z=I==null?void 0:I[O],E=R==null?void 0:R[O];return i.jsxs("div",{className:"flex justify-between items-center border-b border-border/50 last:border-0 pb-1 last:pb-0",children:[i.jsx("span",{className:"truncate max-w-[120px] font-medium text-destructive",title:O,children:O}),i.jsxs("div",{className:"flex flex-col items-end text-[10px] text-muted-foreground",children:[S!==void 0&&i.jsxs("span",{children:["Score: ",S.toFixed(4)]}),L!==void 0&&i.jsxs("span",{children:["p-val: ",L.toExponential(2)]}),A!==void 0&&i.jsxs("span",{children:["Imp: ",A.toFixed(4)]}),z!==void 0&&i.jsxs("span",{children:["Var: ",z.toFixed(4)]}),E!==void 0&&i.jsxs("span",{children:["Rank: ",E]})]})]},O)})})]}):N.status==="success"&&i.jsxs("div",{className:"text-green-600 text-[10px] space-y-1",children:[i.jsx("div",{children:"No columns were dropped."}),e.method==="variance_threshold"&&i.jsxs("div",{className:"text-muted-foreground italic",children:["All features have variance > ",e.threshold??0,". Try increasing the threshold."]}),e.method==="select_k_best"&&i.jsxs("div",{className:"text-muted-foreground italic",children:["K (",e.k??10,") is likely larger than or equal to the number of features. Try reducing K."]}),e.method==="correlation_threshold"&&i.jsxs("div",{className:"text-muted-foreground italic",children:["No feature pairs found with correlation > ",e.threshold??.95,"."]})]}),(_||M)&&i.jsxs("div",{children:[i.jsx("div",{className:"font-medium text-muted-foreground mb-1",children:"Top 5 Features"}),i.jsx("div",{className:"max-h-32 overflow-y-auto bg-background p-2 rounded border space-y-1",children:Object.entries(_||M||{}).sort(([,O],[,S])=>S-O).slice(0,5).map(([O,S])=>i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"truncate max-w-[120px]",title:O,children:O}),i.jsx("span",{className:"font-mono text-[10px]",children:S.toFixed(4)})]},O))})]})]})};return i.jsxs("div",{ref:y,className:`flex flex-col h-full w-full bg-background ${x?"overflow-hidden":"overflow-y-auto"}`,children:[i.jsxs("div",{className:"shrink-0 p-4 pb-0 space-y-2",children:[!u&&i.jsx("div",{className:"p-2 bg-yellow-50 text-yellow-800 text-xs rounded border border-yellow-200",children:"Connect a dataset node to configure."}),f&&!!u&&i.jsx("div",{className:"text-xs text-muted-foreground animate-pulse",children:"Loading schema..."})]}),i.jsxs("div",{className:`flex-1 min-h-0 p-4 gap-4 ${x?"grid grid-cols-2":"flex flex-col"}`,children:[i.jsxs("div",{className:`space-y-4 ${x?"overflow-y-auto pr-2":"shrink-0"}`,children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Selection Method"}),i.jsxs("select",{className:"w-full p-2 border rounded bg-background text-sm",value:e.method,onChange:N=>t({...e,method:N.target.value}),children:[i.jsxs("optgroup",{label:"Simple",children:[i.jsx("option",{value:"variance_threshold",children:"Variance Threshold"}),i.jsx("option",{value:"correlation_threshold",children:"Correlation Threshold"})]}),i.jsxs("optgroup",{label:"Univariate",children:[i.jsx("option",{value:"select_k_best",children:"Select K Best"}),i.jsx("option",{value:"select_percentile",children:"Select Percentile"}),i.jsx("option",{value:"select_fpr",children:"False Positive Rate (FPR)"}),i.jsx("option",{value:"select_fdr",children:"False Discovery Rate (FDR)"}),i.jsx("option",{value:"select_fwe",children:"Family-wise Error (FWE)"}),i.jsx("option",{value:"generic_univariate_select",children:"Generic Univariate"})]}),i.jsxs("optgroup",{label:"Model Based",children:[i.jsx("option",{value:"select_from_model",children:"Select From Model"}),i.jsx("option",{value:"rfe",children:"Recursive Feature Elimination (RFE)"})]})]})]}),e.method!=="variance_threshold"&&e.method!=="correlation_threshold"&&i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Target Column"}),c?i.jsxs("div",{className:"p-2 bg-muted rounded text-sm text-muted-foreground border",children:[c," ",i.jsx("span",{className:"text-xs italic",children:"(Auto-detected)"})]}):i.jsxs("select",{className:"w-full p-2 border rounded bg-background text-sm",value:e.target_column??"",onChange:N=>t({...e,target_column:N.target.value}),children:[i.jsx("option",{value:"",children:"Select Target..."}),m.map(N=>i.jsx("option",{value:N,children:N},N))]}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Required for supervised selection methods."})]}),(p||h)&&i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Problem Type"}),i.jsxs("select",{className:"w-full p-2 border rounded bg-background text-sm",value:e.problem_type??"auto",onChange:N=>t({...e,problem_type:N.target.value}),children:[i.jsx("option",{value:"auto",children:"Auto-detect"}),i.jsx("option",{value:"classification",children:"Classification"}),i.jsx("option",{value:"regression",children:"Regression"})]})]}),x&&i.jsx(g,{})]}),i.jsxs("div",{className:`space-y-4 ${x?"overflow-y-auto pl-2 border-l":"shrink-0 border-t pt-4"}`,children:[i.jsx("h4",{className:"text-xs font-semibold uppercase text-muted-foreground mb-2",children:"Parameters"}),e.method==="variance_threshold"&&i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Threshold"}),i.jsx("input",{type:"number",step:"0.01",className:"w-full p-2 border rounded bg-background text-sm",value:e.threshold??0,onChange:N=>t({...e,threshold:parseFloat(N.target.value)})}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Features with variance lower than this will be removed."})]}),e.method==="correlation_threshold"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Threshold"}),i.jsx("input",{type:"number",step:"0.01",max:"1",min:"0",className:"w-full p-2 border rounded bg-background text-sm",value:e.threshold??.95,onChange:N=>t({...e,threshold:parseFloat(N.target.value)})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Method"}),i.jsxs("select",{className:"w-full p-2 border rounded bg-background text-sm",value:e.correlation_method??"pearson",onChange:N=>t({...e,correlation_method:N.target.value}),children:[i.jsx("option",{value:"pearson",children:"Pearson"}),i.jsx("option",{value:"spearman",children:"Spearman"}),i.jsx("option",{value:"kendall",children:"Kendall"})]})]})]}),p&&i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Scoring Function"}),i.jsxs("select",{className:"w-full p-2 border rounded bg-background text-sm",value:e.score_func??"",onChange:N=>t({...e,score_func:N.target.value}),children:[i.jsx("option",{value:"",children:"Auto (Default)"}),j().map(N=>i.jsx("option",{value:N.value,children:N.label},N.value))]})]}),(e.method==="select_k_best"||e.method==="rfe")&&i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"K (Number of Features)"}),i.jsx("input",{type:"number",className:"w-full p-2 border rounded bg-background text-sm",value:e.k??10,onChange:N=>t({...e,k:parseInt(N.target.value)})})]}),e.method==="select_percentile"&&i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Percentile"}),i.jsx("input",{type:"number",className:"w-full p-2 border rounded bg-background text-sm",value:e.percentile??10,onChange:N=>t({...e,percentile:parseInt(N.target.value)})})]}),["select_fpr","select_fdr","select_fwe"].includes(e.method)&&i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Alpha (Significance)"}),i.jsx("input",{type:"number",step:"0.001",className:"w-full p-2 border rounded bg-background text-sm",value:e.alpha??.05,onChange:N=>t({...e,alpha:parseFloat(N.target.value)})})]}),e.method==="generic_univariate_select"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Mode"}),i.jsxs("select",{className:"w-full p-2 border rounded bg-background text-sm",value:e.mode??"k_best",onChange:N=>t({...e,mode:N.target.value}),children:[i.jsx("option",{value:"k_best",children:"K Best"}),i.jsx("option",{value:"percentile",children:"Percentile"}),i.jsx("option",{value:"fpr",children:"FPR"}),i.jsx("option",{value:"fdr",children:"FDR"}),i.jsx("option",{value:"fwe",children:"FWE"})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Parameter"}),i.jsx("input",{type:"number",step:"0.001",className:"w-full p-2 border rounded bg-background text-sm",value:e.param??1e-5,onChange:N=>t({...e,param:parseFloat(N.target.value)})}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Value for the selected mode (e.g., k, percentile, or alpha)."})]})]}),h&&i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Estimator"}),i.jsxs("select",{className:"w-full p-2 border rounded bg-background text-sm",value:e.estimator??"auto",onChange:N=>t({...e,estimator:N.target.value}),children:[i.jsx("option",{value:"auto",children:"Auto"}),i.jsx("option",{value:"RandomForest",children:"Random Forest"}),i.jsx("option",{value:"LogisticRegression",children:"Logistic Regression"}),i.jsx("option",{value:"LinearRegression",children:"Linear Regression"})]})]}),e.method==="select_from_model"&&i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Threshold"}),i.jsx("input",{type:"text",className:"w-full p-2 border rounded bg-background text-sm",placeholder:"e.g., median, mean, 1.25*mean",value:e.threshold??"median",onChange:N=>t({...e,threshold:N.target.value})}),i.jsx("p",{className:"text-xs text-muted-foreground",children:'String (e.g. "median") or float.'})]}),e.method==="rfe"&&i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Step"}),i.jsx("input",{type:"number",min:"1",className:"w-full p-2 border rounded bg-background text-sm",value:e.step??1,onChange:N=>t({...e,step:parseInt(N.target.value)})}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Features to remove at each iteration."})]}),i.jsxs("div",{className:"flex items-center space-x-2 pt-2 border-t",children:[i.jsx("input",{type:"checkbox",id:"drop_columns",className:"rounded border-gray-300",checked:e.drop_columns!==!1,onChange:N=>t({...e,drop_columns:N.target.checked})}),i.jsx("label",{htmlFor:"drop_columns",className:"text-sm font-medium",children:"Drop Columns"})]}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"If unchecked, columns will be identified but not removed from the dataset."}),!x&&i.jsx(g,{})]})]})]})},bR={type:"feature_selection",label:"Feature Selection",category:"Preprocessing",description:"Select the most important features.",icon:L4,inputs:[{id:"in",label:"Data",type:"dataset"}],outputs:[{id:"out",label:"Selected",type:"dataset"}],settings:vR,validate:e=>e.method!=="variance_threshold"&&!e.target_column?{isValid:!1,message:"Target column is required for this method."}:{isValid:!0},getDefaultConfig:()=>({method:"select_k_best",k:10})},wR=({config:e,onChange:t,nodeId:n})=>{var p;const r=Ae(n||""),s=ce(h=>h.nodes),o=ce(h=>h.edges),l=(h=>{var N;const g=new Set,v=[h];for(;v.length>0;){const k=v.shift();if(g.has(k))continue;g.add(k);const b=s.find(C=>C.id===k);if(!b)continue;if(k!==h&&((N=b.data)!=null&&N.datasetId))return b.data.datasetId;const _=Js(b,s,o);for(const C of _)v.push(C.id)}})(n||""),u=(p=r.find(h=>h.target_column))==null?void 0:p.target_column;zt.useEffect(()=>{const h={};l&&e.datasetId!==l&&(h.datasetId=l),u&&e.target_column!==u&&(h.target_column=u),Object.keys(h).length>0&&t({...e,...h})},[l,u,e.datasetId,e.target_column,t]);const{data:c,isLoading:d}=Re(l||e.datasetId),f=c?Object.values(c.columns).map(h=>h.name):[],m=e.validation_size||0,y=1-e.test_size-m,x=zt.useRef(null),[w,j]=zt.useState(!1);return zt.useEffect(()=>{if(!x.current)return;const h=new ResizeObserver(g=>{for(const v of g)j(v.contentRect.width>450)});return h.observe(x.current),()=>h.disconnect()},[]),i.jsxs("div",{ref:x,className:`flex flex-col h-full w-full bg-background ${w?"overflow-hidden":"overflow-y-auto"}`,children:[i.jsxs("div",{className:"shrink-0 p-4 pb-0 space-y-2",children:[!l&&!e.datasetId&&i.jsx("div",{className:"p-2 bg-yellow-50 text-yellow-800 text-xs rounded border border-yellow-200",children:"Connect a dataset node to see available columns."}),d&&i.jsx("div",{className:"text-xs text-muted-foreground animate-pulse",children:"Loading schema..."})]}),i.jsxs("div",{className:`flex-1 min-h-0 p-4 gap-4 ${w?"grid grid-cols-2":"flex flex-col"}`,children:[i.jsxs("div",{className:`space-y-4 ${w?"overflow-y-auto pr-2":"shrink-0"}`,children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Test Size (0.0 - 1.0)"}),i.jsx("input",{type:"number",step:"0.05",min:"0.05",max:"0.95",className:"w-full p-2 border rounded bg-background text-sm",value:e.test_size,onChange:h=>t({...e,test_size:parseFloat(h.target.value)})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Validation Size (0.0 - 1.0)"}),i.jsx("input",{type:"number",step:"0.05",min:"0.00",max:"0.95",className:"w-full p-2 border rounded bg-background text-sm",value:m,onChange:h=>t({...e,validation_size:parseFloat(h.target.value)})}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:[Math.round(y*100),"% Training, ",Math.round(m*100),"% Validation, ",Math.round(e.test_size*100),"% Testing"]}),y<=0&&i.jsx("p",{className:"text-xs text-red-500 font-medium",children:"Error: Total split size exceeds 100%"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Random State"}),i.jsx("input",{type:"number",className:"w-full p-2 border rounded bg-background text-sm",value:e.random_state,onChange:h=>t({...e,random_state:parseInt(h.target.value)})})]})]}),i.jsxs("div",{className:`space-y-4 ${w?"overflow-y-auto pl-2 border-l":"shrink-0 pt-4 border-t"}`,children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("input",{type:"checkbox",id:"shuffle",checked:e.shuffle,onChange:h=>t({...e,shuffle:h.target.checked})}),i.jsx("label",{htmlFor:"shuffle",className:"text-sm font-medium",children:"Shuffle Data"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("input",{type:"checkbox",id:"stratify",checked:e.stratify,onChange:h=>t({...e,stratify:h.target.checked})}),i.jsx("label",{htmlFor:"stratify",className:"text-sm font-medium",children:"Stratify by Target"})]}),i.jsxs("div",{className:"space-y-2 pl-6 border-l-2 border-muted",children:[i.jsx("label",{className:"text-sm font-medium",children:"Target Column"}),i.jsxs("select",{className:"w-full p-2 border rounded bg-background text-sm",value:e.target_column??"",onChange:h=>t({...e,target_column:h.target.value}),disabled:!e.stratify,children:[i.jsx("option",{value:"",children:"-- Select Target --"}),f.map(h=>i.jsx("option",{value:h,children:h},h))]}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Required for stratification. If input is already separated (X, y), this is ignored."})]})]})]})]})},NR={type:"TrainTestSplitter",label:"Train-Test Split",category:"Preprocessing",description:"Split data into training and testing sets.",icon:hv,inputs:[{id:"in",label:"Data",type:"dataset"}],outputs:[{id:"train",label:"Train",type:"dataset"},{id:"validation",label:"Validation",type:"dataset"},{id:"test",label:"Test",type:"dataset"}],settings:wR,validate:e=>{if(e.test_size<=0||e.test_size>=1)return{isValid:!1,message:"Test size must be between 0 and 1."};const t=e.validation_size||0;return t<0||t>=1?{isValid:!1,message:"Validation size must be between 0 and 1."}:e.test_size+t>=1?{isValid:!1,message:"Sum of Test and Validation sizes must be less than 1."}:{isValid:!0}},getDefaultConfig:()=>({test_size:.2,validation_size:0,random_state:42,stratify:!1,shuffle:!0})},jR=({config:e,onChange:t,nodeId:n})=>{const r=ce(c=>c.nodes),s=ce(c=>c.edges),a=(c=>{var m;const d=new Set,f=[c];for(;f.length>0;){const y=f.shift();if(d.has(y))continue;d.add(y);const x=r.find(j=>j.id===y);if(!x)continue;if(y!==c&&((m=x.data)!=null&&m.datasetId))return x.data.datasetId;const w=Js(x,r,s);for(const j of w)f.push(j.id)}})(n||"");zt.useEffect(()=>{a&&e.datasetId!==a&&t({...e,datasetId:a})},[a,e.datasetId,t]);const{data:l}=Re(a||e.datasetId),u=l?Object.values(l.columns).map(c=>c.name):[];return i.jsx("div",{className:"p-4 space-y-4",children:i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Target Column"}),i.jsxs("select",{className:"w-full p-2 border rounded bg-background text-sm",value:e.target_column,onChange:c=>t({...e,target_column:c.target.value}),children:[i.jsx("option",{value:"",children:"-- Select Target --"}),u.map(c=>i.jsx("option",{value:c,children:c},c))]}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"This column will be separated as the target (y), and all other columns will be features (X)."})]})})},kR={type:"feature_target_split",label:"Feature-Target Split",category:"Preprocessing",description:"Separate features (X) from target (y).",icon:hv,inputs:[{id:"in",label:"Data",type:"dataset"}],outputs:[{id:"X",label:"Features (X)",type:"dataset"},{id:"y",label:"Target (y)",type:"dataset"}],settings:jR,validate:e=>e.target_column?{isValid:!0}:{isValid:!1,message:"Target column is required."},getDefaultConfig:()=>({target_column:""})},_R=({config:e,onChange:t,nodeId:n})=>{var c;const s=(c=Ae(n||"").find(d=>d.datasetId))==null?void 0:c.datasetId,{isLoading:o}=Re(s),a=ce(d=>d.executionResult),l=n?a==null?void 0:a.node_results[n]:null,u=l==null?void 0:l.metrics;return i.jsxs("div",{className:"p-4 space-y-4",children:[!s&&i.jsx("div",{className:"p-2 bg-yellow-50 text-yellow-800 text-xs rounded border border-yellow-200",children:"Connect a dataset node to see available columns."}),o&&!!s&&i.jsx("div",{className:"text-xs text-muted-foreground animate-pulse",children:"Loading schema..."}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium",children:[i.jsx("input",{type:"checkbox",checked:e.drop_if_any_missing,onChange:d=>t({...e,drop_if_any_missing:d.target.checked}),className:"rounded border-gray-300"}),"Drop rows with ANY missing values"]}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"If checked, any row containing at least one missing value will be removed."})]}),i.jsxs("div",{className:`space-y-2 ${e.drop_if_any_missing?"opacity-50 pointer-events-none":""}`,children:[i.jsx("label",{className:"block text-sm font-medium",children:"Missing Value Threshold (%)"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("input",{type:"range",min:"0",max:"100",value:e.missing_threshold||0,onChange:d=>t({...e,missing_threshold:parseInt(d.target.value)}),className:"flex-1"}),i.jsxs("span",{className:"text-sm w-12 text-right",children:[e.missing_threshold||0,"%"]})]}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Drop rows that have more than this percentage of missing values."})]}),u&&u.DropMissingRows_rows_removed!==void 0&&i.jsxs("div",{className:"mt-4 p-3 bg-muted/30 rounded-md border border-border",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2 text-sm font-semibold text-primary",children:[i.jsx(ir,{size:14}),i.jsx("span",{children:"Last Run Results"})]}),i.jsxs("div",{className:"space-y-1 text-xs",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Rows Removed:"}),i.jsx("span",{className:"font-medium text-destructive",children:u.DropMissingRows_rows_removed})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Rows Remaining:"}),i.jsx("span",{className:"font-medium",children:u.DropMissingRows_rows_remaining})]}),i.jsxs("div",{className:"flex justify-between pt-1 border-t",children:[i.jsx("span",{className:"text-muted-foreground",children:"Total Rows:"}),i.jsx("span",{className:"font-medium",children:u.DropMissingRows_rows_total})]})]})]})]})},SR={type:"drop_missing_rows",label:"Drop Rows",category:"Preprocessing",description:"Drop rows based on missing values.",icon:z4,inputs:[{id:"in",label:"Data",type:"dataset"}],outputs:[{id:"out",label:"Cleaned Data",type:"dataset"}],settings:_R,validate:e=>({isValid:!0}),getDefaultConfig:()=>({drop_if_any_missing:!1,missing_threshold:50})},CR=({config:e,onChange:t,nodeId:n})=>{var j;const s=(j=Ae(n||"").find(p=>p.datasetId))==null?void 0:j.datasetId,{data:o,isLoading:a}=Re(s),l=o?Object.values(o.columns).map(p=>p.name):[],u=ce(p=>p.executionResult),c=n?u==null?void 0:u.node_results[n]:null,d=c==null?void 0:c.metrics,[f,m]=T.useState(""),y=T.useMemo(()=>l.filter(p=>p.toLowerCase().includes(f.toLowerCase())),[l,f]),x=()=>{t({...e,subset:y})},w=()=>{const p=e.subset.filter(h=>!y.includes(h));t({...e,subset:p})};return i.jsxs("div",{className:"p-4 space-y-4",children:[!s&&i.jsx("div",{className:"p-2 bg-yellow-50 text-yellow-800 text-xs rounded border border-yellow-200",children:"Connect a dataset node to see available columns."}),a&&!!s&&i.jsx("div",{className:"text-xs text-muted-foreground animate-pulse",children:"Loading schema..."}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Keep Strategy"}),i.jsxs("select",{className:"w-full p-2 border rounded bg-background focus:ring-1 focus:ring-primary outline-none",value:e.keep,onChange:p=>t({...e,keep:p.target.value}),children:[i.jsx("option",{value:"first",children:"Keep First Occurrence"}),i.jsx("option",{value:"last",children:"Keep Last Occurrence"}),i.jsx("option",{value:"none",children:"Drop All Duplicates"})]}),i.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Determines which duplicates (if any) to keep."})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("label",{className:"block text-sm font-medium",children:"Subset Columns (Optional)"}),i.jsxs("span",{className:"text-xs text-muted-foreground",children:[e.subset.length," selected"]})]}),i.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Only consider these columns for identifying duplicates. If empty, all columns are used."}),i.jsxs("div",{className:"space-y-2 mb-2",children:[i.jsx("input",{type:"text",placeholder:"Search columns...",className:"block w-full px-3 py-1.5 text-sm bg-background border rounded-md shadow-sm focus:ring-1 focus:ring-primary outline-none",value:f,onChange:p=>m(p.target.value)}),i.jsxs("div",{className:"flex gap-2 text-xs justify-end",children:[i.jsx("button",{onClick:x,className:"text-primary hover:text-primary/80 font-medium transition-colors",children:"Select All"}),i.jsx("span",{className:"text-border",children:"|"}),i.jsx("button",{onClick:w,className:"text-primary hover:text-primary/80 font-medium transition-colors",children:"Deselect All"})]})]}),l.length>0?i.jsxs("div",{className:"space-y-1 max-h-40 overflow-y-auto border rounded p-2 bg-background",children:[y.map(p=>i.jsxs("label",{className:"flex items-center gap-2 text-sm hover:bg-accent/50 p-1 rounded cursor-pointer",children:[i.jsx("input",{type:"checkbox",className:"rounded border-gray-300 text-primary focus:ring-primary",checked:e.subset.includes(p),onChange:h=>{const g=h.target.checked?[...e.subset,p]:e.subset.filter(v=>v!==p);t({...e,subset:g})}}),p]},p)),y.length===0&&i.jsxs("div",{className:"text-xs text-muted-foreground text-center py-2",children:['No columns match "',f,'"']})]}):i.jsx("div",{className:"text-xs text-muted-foreground italic border rounded p-4 text-center",children:"No columns available"})]}),d&&d.Deduplicate_rows_removed!==void 0&&i.jsxs("div",{className:"mt-4 p-3 bg-muted/30 rounded-md border border-border",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2 text-sm font-semibold text-primary",children:[i.jsx(ir,{size:14}),i.jsx("span",{children:"Last Run Results"})]}),i.jsxs("div",{className:"space-y-1 text-xs",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Duplicates Removed:"}),i.jsx("span",{className:"font-medium text-destructive",children:d.Deduplicate_rows_removed})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Rows Remaining:"}),i.jsx("span",{className:"font-medium",children:d.Deduplicate_rows_remaining})]}),i.jsxs("div",{className:"flex justify-between pt-1 border-t",children:[i.jsx("span",{className:"text-muted-foreground",children:"Total Rows:"}),i.jsx("span",{className:"font-medium",children:d.Deduplicate_rows_total})]})]})]})]})},ER={type:"deduplicate",label:"Deduplicate",category:"Preprocessing",description:"Remove duplicate rows.",icon:I4,inputs:[{id:"in",label:"Data",type:"dataset"}],outputs:[{id:"out",label:"Unique Data",type:"dataset"}],settings:CR,validate:e=>({isValid:!0}),getDefaultConfig:()=>({subset:[],keep:"first"})},TR=[{value:"float",label:"Float (Decimal)"},{value:"int",label:"Integer"},{value:"string",label:"String (Text)"},{value:"category",label:"Category"},{value:"bool",label:"Boolean"},{value:"datetime",label:"Datetime"}],RR=({config:e,onChange:t,nodeId:n})=>{var h;const s=(h=Ae(n||"").find(g=>g.datasetId))==null?void 0:h.datasetId,{data:o,isLoading:a}=Re(s),l=o?Object.values(o.columns).map(g=>g.name):[],u=ce(g=>g.executionResult),c=n?u==null?void 0:u.node_results[n]:null,d=c==null?void 0:c.metrics,f=T.useRef(null),[m,y]=T.useState(!1);T.useEffect(()=>{if(!f.current)return;const g=new ResizeObserver(v=>{for(const N of v)y(N.contentRect.width>450)});return g.observe(f.current),()=>g.disconnect()},[]);const x=()=>{if(l.length===0)return;const g=l.find(v=>!e.column_types[v])||l[0];t({...e,column_types:{...e.column_types,[g]:"float"}})},w=g=>{const v={...e.column_types};delete v[g],t({...e,column_types:v})},j=(g,v)=>{if(g===v)return;const N=e.column_types[g],k={...e.column_types};delete k[g],k[v]=N,t({...e,column_types:k})},p=(g,v)=>{t({...e,column_types:{...e.column_types,[g]:v}})};return i.jsxs("div",{ref:f,className:"p-4 space-y-4 h-full overflow-y-auto",children:[!s&&i.jsx("div",{className:"p-2 bg-yellow-50 text-yellow-800 text-xs rounded border border-yellow-200",children:"Connect a dataset node to see available columns."}),a&&!!s&&i.jsx("div",{className:"text-xs text-muted-foreground animate-pulse",children:"Loading schema..."}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("label",{className:"text-sm font-medium",children:"Casting Rules"}),i.jsx("button",{onClick:x,disabled:!s||l.length===0,className:"p-1.5 bg-primary text-primary-foreground rounded hover:bg-primary/90 disabled:opacity-50 transition-colors",title:"Add Casting Rule",children:i.jsx(Ri,{className:"w-4 h-4"})})]}),i.jsxs("div",{className:`space-y-2 ${m?"grid grid-cols-2 gap-2 space-y-0":""}`,children:[Object.entries(e.column_types).map(([g,v])=>i.jsxs("div",{className:"flex items-center gap-2 p-2 border rounded bg-muted/10 group",children:[i.jsxs("div",{className:"flex-1 space-y-2 min-w-0",children:[i.jsx("select",{className:"w-full p-1.5 text-sm border rounded bg-background focus:ring-1 focus:ring-primary outline-none",value:g,onChange:N=>j(g,N.target.value),children:l.map(N=>i.jsx("option",{value:N,disabled:N!==g&&!!e.column_types[N],children:N},N))}),i.jsx("select",{className:"w-full p-1.5 text-sm border rounded bg-background focus:ring-1 focus:ring-primary outline-none",value:v,onChange:N=>p(g,N.target.value),children:TR.map(N=>i.jsx("option",{value:N.value,children:N.label},N.value))})]}),i.jsx("button",{onClick:()=>w(g),className:"p-1.5 text-muted-foreground hover:text-destructive hover:bg-destructive/10 rounded transition-colors",title:"Remove Rule",children:i.jsx(Qr,{className:"w-4 h-4"})})]},g)),Object.keys(e.column_types).length===0&&i.jsx("div",{className:`text-xs text-muted-foreground italic border border-dashed rounded p-8 text-center ${m?"col-span-2":""}`,children:"No casting rules defined. Click + to add one."})]})]}),d&&(d.cast_errors!==void 0||d.casted_columns_count!==void 0)&&i.jsxs("div",{className:"mt-4 p-3 bg-muted/30 rounded-md border border-border",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2 text-sm font-semibold text-primary",children:[i.jsx(ir,{size:14}),i.jsx("span",{children:"Last Run Results"})]}),i.jsxs("div",{className:"space-y-1 text-xs",children:[d.casted_columns_count!==void 0&&i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Columns Casted:"}),i.jsx("span",{className:"font-medium",children:d.casted_columns_count})]}),d.cast_errors!==void 0&&i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Errors Encountered:"}),i.jsx("span",{className:"font-medium text-destructive",children:d.cast_errors})]})]})]})]})},MR={type:"casting",label:"Cast Types",category:"Preprocessing",description:"Cast columns to specific data types.",icon:O4,inputs:[{id:"in",label:"Data",type:"dataset"}],outputs:[{id:"out",label:"Casted Data",type:"dataset"}],settings:RR,validate:e=>({isValid:!0}),getDefaultConfig:()=>({column_types:{}})},PR=({config:e,onChange:t,nodeId:n})=>{var j;const s=(j=Ae(n||"").find(p=>p.datasetId))==null?void 0:j.datasetId,{data:o,isLoading:a}=Re(s),l=o?Object.values(o.columns).map(p=>p.name):[],u=ce(p=>p.executionResult),c=n?u==null?void 0:u.node_results[n]:null,d=c==null?void 0:c.metrics,[f,m]=T.useState(""),y=T.useMemo(()=>l.filter(p=>p.toLowerCase().includes(f.toLowerCase())),[l,f]),x=()=>{t({...e,columns:y})},w=()=>{const p=e.columns.filter(h=>!y.includes(h));t({...e,columns:p})};return i.jsxs("div",{className:"p-4 space-y-4",children:[!s&&i.jsx("div",{className:"p-2 bg-yellow-50 text-yellow-800 text-xs rounded border border-yellow-200",children:"Connect a dataset node to see available columns."}),a&&!!s&&i.jsx("div",{className:"text-xs text-muted-foreground animate-pulse",children:"Loading schema..."}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Indicator Suffix"}),i.jsx("input",{type:"text",className:"w-full p-2 border rounded bg-background focus:ring-1 focus:ring-primary outline-none",value:e.flag_suffix,onChange:p=>t({...e,flag_suffix:p.target.value}),placeholder:"_was_missing"}),i.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:'Suffix added to the new indicator columns (e.g., "Age_was_missing").'})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("label",{className:"block text-sm font-medium",children:"Target Columns (Optional)"}),i.jsxs("span",{className:"text-xs text-muted-foreground",children:[e.columns.length," selected"]})]}),i.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Create indicators for these columns. If empty, all columns with missing values are used."}),i.jsxs("div",{className:"space-y-2 mb-2",children:[i.jsx("input",{type:"text",placeholder:"Search columns...",className:"block w-full px-3 py-1.5 text-sm bg-background border rounded-md shadow-sm focus:ring-1 focus:ring-primary outline-none",value:f,onChange:p=>m(p.target.value)}),i.jsxs("div",{className:"flex gap-2 text-xs justify-end",children:[i.jsx("button",{onClick:x,className:"text-primary hover:text-primary/80 font-medium transition-colors",children:"Select All"}),i.jsx("span",{className:"text-border",children:"|"}),i.jsx("button",{onClick:w,className:"text-primary hover:text-primary/80 font-medium transition-colors",children:"Deselect All"})]})]}),l.length>0?i.jsxs("div",{className:"space-y-1 max-h-40 overflow-y-auto border rounded p-2 bg-background",children:[y.map(p=>i.jsxs("label",{className:"flex items-center gap-2 text-sm hover:bg-accent/50 p-1 rounded cursor-pointer",children:[i.jsx("input",{type:"checkbox",className:"rounded border-gray-300 text-primary focus:ring-primary",checked:e.columns.includes(p),onChange:h=>{const g=h.target.checked?[...e.columns,p]:e.columns.filter(v=>v!==p);t({...e,columns:g})}}),p]},p)),y.length===0&&i.jsxs("div",{className:"text-xs text-muted-foreground text-center py-2",children:['No columns match "',f,'"']})]}):i.jsx("div",{className:"text-xs text-muted-foreground italic border rounded p-4 text-center",children:"No columns available"})]}),d&&d.missing_indicators_created!==void 0&&i.jsxs("div",{className:"mt-4 p-3 bg-muted/30 rounded-md border border-border",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2 text-sm font-semibold text-primary",children:[i.jsx(ir,{size:14}),i.jsx("span",{children:"Last Run Results"})]}),i.jsxs("div",{className:"space-y-1 text-xs",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Indicators Created:"}),i.jsx("span",{className:"font-medium text-primary",children:d.missing_indicators_created})]}),d.missing_indicators_columns&&Array.isArray(d.missing_indicators_columns)&&d.missing_indicators_columns.length>0&&i.jsxs("div",{className:"pt-1 border-t mt-1",children:[i.jsx("span",{className:"text-muted-foreground block mb-1",children:"New Columns:"}),i.jsx("div",{className:"flex flex-wrap gap-1",children:d.missing_indicators_columns.map(p=>i.jsx("span",{className:"px-1.5 py-0.5 bg-background border rounded text-[10px] font-mono",children:p},p))})]})]})]})]})},IR={type:"MissingIndicator",label:"Missing Indicator",category:"Preprocessing",description:"Create binary indicators for missing values.",icon:F4,inputs:[{id:"in",label:"Data",type:"dataset"}],outputs:[{id:"out",label:"Augmented Data",type:"dataset"}],settings:PR,validate:e=>({isValid:!0}),getDefaultConfig:()=>({columns:[],flag_suffix:"_was_missing"})},DR=({config:e,onChange:t,nodeId:n})=>{var N;const s=(N=Ae(n||"").find(k=>k.datasetId))==null?void 0:N.datasetId,{data:o,isLoading:a}=Re(s),[l,u]=T.useState(""),c=T.useRef(null),[d,f]=T.useState(!1),m=ce(k=>k.executionResult),y=n?m==null?void 0:m.node_results[n]:null,x=y==null?void 0:y.metrics,j=((m==null?void 0:m.recommendations)||[]).filter(k=>k.suggested_node_type==="encoding"||k.type.includes("encoding")||k.type.includes("cardinality"));T.useEffect(()=>{if(!c.current)return;const k=new ResizeObserver(b=>{for(const _ of b)f(_.contentRect.width>400)});return k.observe(c.current),()=>k.disconnect()},[]);const p=o?Object.values(o.columns).filter(k=>["object","string","category","bool"].some(b=>{var _;return(_=k.dtype)==null?void 0:_.toLowerCase().includes(b)})).map(k=>k.name):[],h=p.filter(k=>k.toLowerCase().includes(l.toLowerCase())),g=()=>{t({...e,columns:[...p]})},v=()=>{t({...e,columns:[]})};return i.jsxs("div",{ref:c,className:"p-4 space-y-4",children:[!s&&i.jsx("div",{className:"p-2 bg-yellow-50 text-yellow-800 text-xs rounded border border-yellow-200",children:"Connect a dataset node to see available columns."}),a&&!!s&&i.jsx("div",{className:"text-xs text-muted-foreground animate-pulse",children:"Loading schema..."}),i.jsxs("div",{className:`grid gap-4 ${d?"grid-cols-2":"grid-cols-1"}`,children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"block text-sm font-medium",children:"Encoding Method"}),i.jsxs("select",{className:"w-full p-2 border rounded bg-background focus:ring-1 focus:ring-primary outline-none",value:e.method,onChange:k=>t({...e,method:k.target.value}),children:[i.jsx("option",{value:"onehot",children:"One-Hot Encoding"}),i.jsx("option",{value:"dummy",children:"Dummy Encoding"}),i.jsx("option",{value:"label",children:"Label Encoding"}),i.jsx("option",{value:"ordinal",children:"Ordinal Encoding"}),i.jsx("option",{value:"target",children:"Target Encoding"}),i.jsx("option",{value:"hash",children:"Hash Encoding"})]}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:[e.method==="onehot"&&"Creates binary columns for each category.",e.method==="dummy"&&"Like One-Hot but drops first category to avoid collinearity.",e.method==="label"&&"Assigns a unique integer to each category.",e.method==="ordinal"&&"Encodes categories as ordered integers.",e.method==="target"&&"Encodes categories based on target mean.",e.method==="hash"&&"Maps categories to a fixed number of features."]})]}),i.jsxs("div",{className:"space-y-2",children:[(e.method==="onehot"||e.method==="dummy")&&i.jsxs("div",{className:"space-y-2 p-3 bg-muted/20 rounded border h-full",children:[i.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[i.jsx("input",{type:"checkbox",checked:e.method==="dummy"?!0:e.drop_first||!1,disabled:e.method==="dummy",onChange:k=>t({...e,drop_first:k.target.checked}),className:"rounded border-gray-300"}),"Drop First Category"]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"block text-xs font-medium",children:"Handle Unknown"}),i.jsxs("select",{className:"w-full p-1 text-sm border rounded",value:e.handle_unknown||"ignore",onChange:k=>t({...e,handle_unknown:k.target.value}),title:"How to handle categories seen in test data but not in training data.",children:[i.jsx("option",{value:"ignore",children:"Ignore (Zeros)"}),i.jsx("option",{value:"error",children:"Raise Error"})]}),i.jsx("p",{className:"text-[10px] text-muted-foreground",children:'"Ignore" produces all-zeros for unknown categories.'})]})]}),e.method==="target"&&i.jsxs("div",{className:"space-y-2 p-3 bg-muted/20 rounded border h-full",children:[i.jsx("label",{className:"block text-sm font-medium",children:"Target Column"}),i.jsxs("select",{className:"w-full p-2 border rounded bg-background text-sm",value:e.target_column||"",onChange:k=>t({...e,target_column:k.target.value}),children:[i.jsx("option",{value:"",children:"Select a target column..."}),o&&Object.values(o.columns).map(k=>i.jsxs("option",{value:k.name,children:[k.name," (",k.dtype,")"]},k.name))]}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"The column to use for calculating target statistics."})]}),e.method==="hash"&&i.jsxs("div",{className:"space-y-2 p-3 bg-muted/20 rounded border h-full",children:[i.jsx("label",{className:"block text-sm font-medium",children:"Number of Features"}),i.jsx("input",{type:"number",min:"1",className:"w-full p-2 border rounded",value:e.n_features||8,onChange:k=>t({...e,n_features:parseInt(k.target.value)})})]}),e.method==="ordinal"&&i.jsxs("div",{className:"space-y-2 p-3 bg-muted/20 rounded border h-full",children:[i.jsx("label",{className:"block text-sm font-medium",children:"Unknown Value"}),i.jsx("input",{type:"number",className:"w-full p-2 border rounded",value:e.unknown_value??-1,onChange:k=>t({...e,unknown_value:parseInt(k.target.value)}),title:"Integer to assign for unknown categories."}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Value assigned to unknown categories (default: -1)."})]}),e.method==="label"&&i.jsxs("div",{className:"space-y-2 p-3 bg-muted/20 rounded border h-full",children:[i.jsx("label",{className:"block text-sm font-medium",children:"Missing/Unknown Code"}),i.jsx("input",{type:"number",className:"w-full p-2 border rounded",value:e.missing_code??-1,onChange:k=>t({...e,missing_code:parseInt(k.target.value)}),title:"Integer to assign for missing or unknown categories."}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Value assigned to missing/unknown categories (default: -1)."})]})]})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("label",{className:"block text-sm font-medium",children:"Columns to Encode"}),i.jsxs("span",{className:"text-xs text-muted-foreground",children:[e.columns.length," selected"]})]}),i.jsxs("div",{className:"space-y-2 mb-2",children:[i.jsx("input",{type:"text",placeholder:"Search columns...",className:"block w-full px-3 py-1.5 text-sm bg-background border rounded-md shadow-sm focus:ring-1 focus:ring-primary outline-none",value:l,onChange:k=>u(k.target.value)}),i.jsxs("div",{className:"flex gap-2 text-xs justify-end",children:[i.jsx("button",{onClick:g,className:"text-primary hover:text-primary/80 font-medium transition-colors",children:"Select All"}),i.jsx("span",{className:"text-border",children:"|"}),i.jsx("button",{onClick:v,className:"text-primary hover:text-primary/80 font-medium transition-colors",children:"Deselect All"})]})]}),p.length>0?i.jsxs("div",{className:"space-y-1 max-h-40 overflow-y-auto border rounded p-2 bg-background",children:[h.map(k=>i.jsxs("label",{className:"flex items-center gap-2 text-sm hover:bg-accent/50 p-1 rounded cursor-pointer",children:[i.jsx("input",{type:"checkbox",className:"rounded border-gray-300 text-primary focus:ring-primary",checked:e.columns.includes(k),onChange:b=>{const _=b.target.checked?[...e.columns,k]:e.columns.filter(C=>C!==k);t({...e,columns:_})}}),k]},k)),h.length===0&&i.jsxs("div",{className:"text-xs text-muted-foreground text-center py-2",children:['No columns match "',l,'"']})]}):i.jsx("div",{className:"text-xs text-muted-foreground italic border rounded p-4 text-center",children:"No categorical columns found"})]}),j.length>0&&i.jsx(Xr,{recommendations:j}),x&&i.jsxs("div",{className:"mt-4 p-3 bg-muted/30 rounded-md border border-border",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2 text-sm font-semibold text-primary",children:[i.jsx(ir,{size:14}),i.jsx("span",{children:"Last Run Results"})]}),i.jsxs("div",{className:"space-y-1 text-xs",children:[x.encoded_columns_count!==void 0&&i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Columns Encoded:"}),i.jsx("span",{className:"font-medium",children:x.encoded_columns_count})]}),x.new_features_count!==void 0&&i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"New Features Created:"}),i.jsx("span",{className:"font-medium text-primary",children:x.new_features_count})]}),x.categories_count&&i.jsxs("div",{className:"mt-2 border-t pt-2",children:[i.jsx("span",{className:"text-muted-foreground block mb-1 font-medium",children:"Categories Found:"}),i.jsx("div",{className:"grid grid-cols-2 gap-x-4 gap-y-1",children:Object.entries(x.categories_count).map(([k,b])=>i.jsxs("div",{className:"flex justify-between text-[10px]",children:[i.jsxs("span",{className:"truncate max-w-[100px]",title:k,children:[k,":"]}),i.jsx("span",{className:"font-mono",children:b})]},k))})]}),x.classes_count&&i.jsxs("div",{className:"mt-2 border-t pt-2",children:[i.jsx("span",{className:"text-muted-foreground block mb-1 font-medium",children:"Classes Found:"}),i.jsx("div",{className:"grid grid-cols-2 gap-x-4 gap-y-1",children:Object.entries(x.classes_count).map(([k,b])=>i.jsxs("div",{className:"flex justify-between text-[10px]",children:[i.jsxs("span",{className:"truncate max-w-[100px]",title:k,children:[k,":"]}),i.jsx("span",{className:"font-mono",children:b})]},k))})]})]})]})]})},AR={type:"encoding",label:"Encoding",category:"Preprocessing",description:"Encode categorical variables.",icon:H4,inputs:[{id:"in",label:"Data",type:"dataset"}],outputs:[{id:"out",label:"Encoded Data",type:"dataset"}],settings:DR,validate:e=>e.columns.length===0?{isValid:!1,error:"Select at least one column"}:{isValid:!0},getDefaultConfig:()=>({method:"onehot",columns:[],drop_first:!1,handle_unknown:"ignore",n_features:8,unknown_value:-1,missing_code:-1})},OR=({config:e,onChange:t,nodeId:n})=>{const r=ce(b=>b.nodes),s=ce(b=>b.edges),a=(b=>{var M;const _=new Set,C=[b];for(;C.length>0;){const I=C.shift();if(_.has(I))continue;_.add(I);const R=r.find(S=>S.id===I);if(!R)continue;if(I!==b&&((M=R.data)!=null&&M.datasetId))return R.data.datasetId;const O=Js(R,r,s);for(const S of O)C.push(S.id)}})(n||""),{data:l,isLoading:u}=Re(a),c=so(n||"",{types:["outlier_removal","cleaning"],suggestedNodeTypes:["OutlierRemoval","outlier"],scope:"column"}),d=ce(b=>b.executionResult),f=n?d==null?void 0:d.node_results[n]:null,m=T.useRef(null),[y,x]=T.useState(!1),[w,j]=T.useState("");T.useEffect(()=>{if(!m.current)return;const b=new ResizeObserver(_=>{for(const C of _)x(C.contentRect.width>450)});return b.observe(m.current),()=>b.disconnect()},[]);const p=l?Object.values(l.columns).filter(b=>["int","float","number"].some(_=>{var C;return(C=b.dtype)==null?void 0:C.toLowerCase().includes(_)})).map(b=>b.name):[],h=p.filter(b=>b.toLowerCase().includes(w.toLowerCase())),g=()=>{t({...e,columns:h})},v=()=>{const b=e.columns.filter(_=>!h.includes(_));t({...e,columns:b})},N=()=>{if(!f||!f.metrics)return null;const b=f.metrics,_=b.rows_removed,C=b.rows_remaining,M=b.rows_total??(_??0)+(C??0),I=b.bounds,R=b.stats,O=b.contamination,S=b.warnings,L=b.values_clipped;if(_===void 0&&!I&&!R&&O===void 0&&!S&&L===void 0)return null;const A=()=>{switch(e.method){case"iqr":return"Removes statistical outliers (IQR)";case"zscore":return"Removes deviations > 3";case"winsorize":return"Clips extreme values";case"elliptic_envelope":return"Detects multivariate anomalies";default:return""}};return i.jsxs("div",{className:"mt-4 p-3 bg-muted/50 rounded border text-xs space-y-3",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("div",{className:"font-medium text-muted-foreground",children:"Execution Feedback"}),i.jsx("div",{className:"text-[10px] text-primary/80 bg-primary/5 px-1.5 py-0.5 rounded border border-primary/10",title:"Goal of the selected method",children:A()})]}),S&&S.length>0&&i.jsxs("div",{className:"p-2 bg-yellow-50 text-yellow-800 rounded border border-yellow-200",children:[i.jsx("div",{className:"font-medium mb-1",children:"Warnings"}),i.jsx("ul",{className:"list-disc list-inside space-y-0.5",children:S.map((z,E)=>i.jsx("li",{className:"truncate",title:z,children:z},E))})]}),e.method==="winsorize"?i.jsxs("div",{className:"flex justify-between items-center p-2 bg-background rounded border",children:[i.jsx("span",{className:"text-muted-foreground",children:"Values Clipped"}),i.jsxs("div",{className:"text-right",children:[i.jsx("span",{className:"font-mono font-medium text-blue-600",children:L??0}),i.jsx("span",{className:"text-[10px] text-muted-foreground block",children:"(Replaced with bounds)"})]})]}):(_!==void 0||M!==void 0)&&i.jsxs("div",{className:"flex justify-between items-center p-2 bg-background rounded border",children:[i.jsx("span",{className:"text-muted-foreground",children:"Rows Removed"}),i.jsxs("div",{className:"text-right",children:[i.jsxs("div",{className:"flex items-center justify-end gap-1",children:[i.jsx("span",{className:"font-mono font-medium text-destructive",children:_??0}),M>0&&i.jsxs("span",{className:"text-[10px] text-muted-foreground",children:["(",((_??0)/M*100).toFixed(1),"%)"]})]}),C!==void 0&&i.jsxs("span",{className:"text-[10px] text-muted-foreground block",children:[C," remaining"]})]})]}),O!==void 0&&i.jsxs("div",{className:"flex justify-between items-center p-2 bg-background rounded border",children:[i.jsx("span",{className:"text-muted-foreground",children:"Contamination"}),i.jsxs("span",{className:"font-mono font-medium",children:[(O*100).toFixed(1),"%"]})]}),I&&i.jsxs("div",{children:[i.jsx("div",{className:"font-medium text-muted-foreground mb-1",children:"Calculated Bounds"}),i.jsx("div",{className:"max-h-32 overflow-y-auto bg-background p-2 rounded border space-y-1",children:Object.entries(I).map(([z,E])=>i.jsxs("div",{className:"flex justify-between items-center border-b border-border/50 last:border-0 pb-1 last:pb-0",children:[i.jsx("span",{className:"truncate max-w-[100px] font-medium",title:z,children:z}),i.jsxs("span",{className:"font-mono text-[10px] text-muted-foreground",children:["[",E.lower.toFixed(2),", ",E.upper.toFixed(2),"]"]})]},z))})]}),R&&i.jsxs("div",{children:[i.jsx("div",{className:"font-medium text-muted-foreground mb-1",children:"Z-Score Stats"}),i.jsx("div",{className:"max-h-32 overflow-y-auto bg-background p-2 rounded border space-y-1",children:Object.entries(R).map(([z,E])=>i.jsxs("div",{className:"flex justify-between items-center border-b border-border/50 last:border-0 pb-1 last:pb-0",children:[i.jsx("span",{className:"truncate max-w-[100px] font-medium",title:z,children:z}),i.jsxs("span",{className:"font-mono text-[10px] text-muted-foreground",children:["=",E.mean.toFixed(2),", =",E.std.toFixed(2)]})]},z))})]})]})},k=()=>{const b=[];if(f&&f.metrics){const C=f.metrics,M=C.rows_removed,R=C.rows_total??C[`${e.method==="elliptic_envelope"?"EllipticEnvelope":e.method==="zscore"?"ZScore":e.method==="winsorize"?"Winsorize":"IQR"}_rows_total`];if(M!==void 0&&R!==void 0&&R>0){const O=M/R;O>.2?b.push({rule_id:"high_data_loss",type:"warning",description:"High data loss (>20%).",reasoning:"Consider relaxing parameters (e.g., higher IQR multiplier or Z-Score threshold) or using Winsorization to clip values instead of removing rows.",suggested_node_type:"OutlierRemoval",suggested_params:{},confidence:1,target_columns:[]}):O===0&&e.method!=="winsorize"&&b.push({rule_id:"no_outliers",type:"info",description:"No outliers detected.",reasoning:"If you suspect outliers, try tightening the parameters (e.g., lower IQR multiplier).",suggested_node_type:"OutlierRemoval",suggested_params:{},confidence:1,target_columns:[]})}e.method==="elliptic_envelope"&&b.push({rule_id:"elliptic_stochastic",type:"info",description:"Stochastic Method",reasoning:"Elliptic Envelope is stochastic. Results may vary slightly between runs.",suggested_node_type:"OutlierRemoval",suggested_params:{},confidence:1,target_columns:[]})}const _=[...c,...b];return _.length===0?null:i.jsx("div",{className:"mt-4",children:i.jsx(Xr,{recommendations:_})})};return i.jsxs("div",{ref:m,className:`flex flex-col h-full w-full bg-background ${y?"overflow-hidden":"overflow-y-auto"}`,children:[i.jsx("div",{className:"shrink-0 p-4 pb-0 space-y-2",children:!a&&i.jsx("div",{className:"p-2 bg-yellow-50 text-yellow-800 text-xs rounded border border-yellow-200",children:"Connect a dataset node to see available columns."})}),i.jsxs("div",{className:`flex-1 min-h-0 p-4 gap-4 ${y?"grid grid-cols-2":"flex flex-col"}`,children:[i.jsxs("div",{className:`space-y-4 ${y?"overflow-y-auto pr-2":"shrink-0"}`,children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Method"}),i.jsxs("select",{className:"w-full p-2 border rounded bg-background text-sm",value:e.method,onChange:b=>t({...e,method:b.target.value}),children:[i.jsx("option",{value:"iqr",children:"IQR (Interquartile Range)"}),i.jsx("option",{value:"zscore",children:"Z-Score (Standard Deviation)"}),i.jsx("option",{value:"winsorize",children:"Winsorize (Clip Values)"}),i.jsx("option",{value:"elliptic_envelope",children:"Elliptic Envelope (Multivariate)"})]}),i.jsxs("p",{className:"text-[10px] text-muted-foreground mt-1",children:[e.method==="iqr"&&"Removes rows with values outside Q1/Q3  multiplier * IQR.",e.method==="zscore"&&"Removes rows with values more than N standard deviations from mean.",e.method==="winsorize"&&"Clips values to specified percentiles instead of removing rows.",e.method==="elliptic_envelope"&&"Fits a robust covariance estimate to detect outliers."]})]}),e.method==="iqr"&&i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"block text-sm font-medium",children:"Multiplier"}),i.jsx("input",{type:"number",step:"0.1",className:"w-full p-2 border rounded bg-background text-sm",value:e.multiplier??1.5,onChange:b=>t({...e,multiplier:parseFloat(b.target.value)})}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Usually 1.5 for outliers, 3.0 for extreme outliers."})]}),e.method==="zscore"&&i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"block text-sm font-medium",children:"Threshold (Sigma)"}),i.jsx("input",{type:"number",step:"0.1",className:"w-full p-2 border rounded bg-background text-sm",value:e.threshold??3,onChange:b=>t({...e,threshold:parseFloat(b.target.value)})}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Number of standard deviations to tolerate."})]}),e.method==="winsorize"&&i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"block text-sm font-medium",children:"Percentiles"}),i.jsxs("div",{className:"flex gap-2 items-center",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("label",{className:"text-[10px] text-muted-foreground",children:"Lower"}),i.jsx("input",{type:"number",className:"w-full p-2 border rounded bg-background text-sm",value:e.lower_percentile??5,onChange:b=>t({...e,lower_percentile:parseFloat(b.target.value)})})]}),i.jsxs("div",{className:"flex-1",children:[i.jsx("label",{className:"text-[10px] text-muted-foreground",children:"Upper"}),i.jsx("input",{type:"number",className:"w-full p-2 border rounded bg-background text-sm",value:e.upper_percentile??95,onChange:b=>t({...e,upper_percentile:parseFloat(b.target.value)})})]})]})]}),e.method==="elliptic_envelope"&&i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"block text-sm font-medium",children:"Contamination"}),i.jsx("input",{type:"number",step:"0.01",min:"0",max:"0.5",className:"w-full p-2 border rounded bg-background text-sm",value:e.contamination??.01,onChange:b=>t({...e,contamination:parseFloat(b.target.value)})}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Expected proportion of outliers in the dataset."})]}),y&&i.jsxs(i.Fragment,{children:[i.jsx(N,{}),i.jsx(k,{})]})]}),i.jsxs("div",{className:`flex flex-col h-full min-h-[200px] border rounded-md overflow-hidden ${y?"":"shrink-0"}`,children:[i.jsxs("div",{className:"p-2 border-b bg-muted/30 flex flex-col gap-2",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("span",{className:"text-xs font-medium text-muted-foreground",children:["Numeric Columns (",e.columns.length,")"]}),i.jsxs("div",{className:"flex gap-1",children:[i.jsx("button",{onClick:g,className:"text-[10px] px-2 py-1 hover:bg-accent rounded",children:"All"}),i.jsx("button",{onClick:v,className:"text-[10px] px-2 py-1 hover:bg-accent rounded",children:"None"})]})]}),i.jsx("input",{type:"text",placeholder:"Search columns...",className:"w-full text-xs p-1.5 border rounded bg-background",value:w,onChange:b=>j(b.target.value)})]}),i.jsx("div",{className:"flex-1 overflow-y-auto p-2 space-y-1",children:h.length>0?h.map(b=>i.jsxs("label",{className:"flex items-center gap-2 text-sm hover:bg-accent/50 p-1.5 rounded cursor-pointer select-none",children:[i.jsx("input",{type:"checkbox",checked:e.columns.includes(b),onChange:_=>{const C=_.target.checked?[...e.columns,b]:e.columns.filter(M=>M!==b);t({...e,columns:C})},className:"rounded border-gray-300 text-primary focus:ring-primary"}),i.jsx("span",{className:"truncate",title:b,children:b})]},b)):i.jsx("div",{className:"text-xs text-muted-foreground italic p-4 text-center",children:u?"Loading schema...":p.length===0?"No numeric columns found":"No matches found"})})]}),!y&&i.jsxs(i.Fragment,{children:[i.jsx(N,{}),i.jsx(k,{})]})]})]})},zR={type:"outlier",label:"Outlier Removal",category:"Preprocessing",description:"Detect and remove or clip outliers.",icon:e3,inputs:[{id:"in",type:"dataset",label:"Dataset"}],outputs:[{id:"out",type:"dataset",label:"Cleaned"}],settings:OR,validate:e=>!e.columns||e.columns.length===0?{isValid:!1,message:"Select at least one column."}:{isValid:!0},getDefaultConfig:()=>({method:"iqr",columns:[],multiplier:1.5,threshold:3,lower_percentile:5,upper_percentile:95,contamination:.01})},Hu={power:{label:"Power Transforms",methods:[{value:"yeo-johnson",label:"Yeo-Johnson"},{value:"box-cox",label:"Box-Cox (>0 only)"}]},simple:{label:"Simple Math",methods:[{value:"log",label:"Log (log1p)"},{value:"square_root",label:"Square Root"},{value:"cube_root",label:"Cube Root"},{value:"reciprocal",label:"Reciprocal (1/x)"},{value:"square",label:"Square (x)"},{value:"exponential",label:"Exponential (e)"}]}},LR=e=>["yeo-johnson","box-cox"].includes(e)?"power":"simple",FR=({allColumns:e,selectedColumns:t,onChange:n})=>{const[r,s]=T.useState(""),o=T.useMemo(()=>e.filter(c=>c.toLowerCase().includes(r.toLowerCase())),[e,r]),a=()=>{const c=Array.from(new Set([...t,...o]));n(c)},l=()=>{const c=t.filter(d=>!o.includes(d));n(c)},u=c=>{t.includes(c)?n(t.filter(d=>d!==c)):n([...t,c])};return i.jsxs("div",{className:"space-y-2 border rounded p-2 bg-background",children:[i.jsx("div",{className:"flex gap-2 items-center",children:i.jsxs("div",{className:"relative flex-1",children:[i.jsx(qr,{className:"absolute left-2 top-1.5 w-3 h-3 text-muted-foreground"}),i.jsx("input",{className:"w-full pl-7 pr-2 py-1 text-xs border rounded bg-background",placeholder:"Search columns...",value:r,onChange:c=>s(c.target.value)})]})}),i.jsxs("div",{className:"flex gap-2 text-xs border-b pb-2",children:[i.jsx("button",{onClick:a,className:"text-primary hover:underline font-medium",children:"Select All"}),i.jsx("span",{className:"text-muted-foreground",children:"|"}),i.jsx("button",{onClick:l,className:"text-muted-foreground hover:underline",children:"None"}),i.jsxs("span",{className:"ml-auto text-muted-foreground",children:[t.length," selected"]})]}),i.jsx("div",{className:"max-h-32 overflow-y-auto space-y-1 pt-1",children:o.length===0?i.jsxs("div",{className:"text-xs text-muted-foreground p-2 text-center",children:['No columns match "',r,'"']}):o.map(c=>i.jsxs("label",{className:"flex items-center gap-2 text-xs cursor-pointer hover:bg-accent/50 p-1 rounded",children:[i.jsx("input",{type:"checkbox",checked:t.includes(c),onChange:()=>u(c),className:"rounded border-gray-300 text-primary focus:ring-primary"}),i.jsx("span",{className:"truncate",title:c,children:c})]},c))})]})},$R=({config:e,onChange:t,nodeId:n})=>{var v;const r=T.useMemo(()=>e||{transformations:[]},[e]),s=T.useMemo(()=>Array.isArray(r.transformations)?r.transformations:[],[r.transformations]),[o,a]=T.useState([]),l=T.useRef(null),[u,c]=T.useState(!1);T.useEffect(()=>{if(!l.current)return;const N=new ResizeObserver(k=>{for(const b of k)c(b.contentRect.width>450)});return N.observe(l.current),()=>N.disconnect()},[]);const f=(v=Ae(n||"").find(N=>N.datasetId))==null?void 0:v.datasetId,{data:m}=Re(f),y=T.useMemo(()=>m!=null&&m.columns?Object.values(m.columns).filter(N=>["int","float","number"].some(k=>{var b;return(b=N.dtype)==null?void 0:b.toLowerCase().includes(k)})).map(N=>N.name):[],[m]),x=()=>{const N=s.length;a(k=>[...k,N]),t({transformations:[...s,{columns:[],method:"log",params:{}}]})},w=(N,k)=>{const b=[...s];b[N]={...b[N],...k},t({transformations:b})},j=N=>{const k=[...s];k.splice(N,1),t({transformations:k}),a(b=>b.filter(_=>_!==N).map(_=>_>N?_-1:_))},p=N=>{a(k=>k.includes(N)?k.filter(b=>b!==N):[...k,N])},h=(N,k)=>{const b=Hu[k].methods[0].value;w(N,{method:b})},g=so(n||"",{types:["transformation","preprocessing"],suggestedNodeTypes:["TransformationNode"],scope:"column"});return i.jsxs("div",{ref:l,className:"p-4 space-y-6 h-full overflow-y-auto",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("label",{className:"text-sm font-medium",children:"Transformation Rules"}),i.jsxs("button",{onClick:x,className:"flex items-center gap-1 text-xs bg-primary text-primary-foreground px-2 py-1 rounded hover:bg-primary/90",children:[i.jsx(Ri,{size:12})," Add Rule"]})]}),i.jsxs("div",{className:"space-y-4",children:[s.map((N,k)=>{var M,I,R;const b=LR(N.method),_=o.includes(k),C=((M=Hu[b].methods.find(O=>O.value===N.method))==null?void 0:M.label)||N.method;return i.jsxs("div",{className:"border rounded bg-card shadow-sm overflow-hidden",children:[i.jsxs("div",{className:"flex items-center justify-between p-3 cursor-pointer hover:bg-accent/50 transition-colors",onClick:()=>p(k),children:[i.jsxs("div",{className:"flex items-center gap-2 overflow-hidden",children:[_?i.jsx(sn,{size:16,className:"text-muted-foreground flex-shrink-0"}):i.jsx(cd,{size:16,className:"text-muted-foreground flex-shrink-0"}),i.jsxs("div",{className:"flex flex-col overflow-hidden",children:[i.jsx("span",{className:"text-sm font-medium truncate",children:C}),i.jsx("span",{className:"text-xs text-muted-foreground truncate",children:N.columns.length===0?"No columns selected":`${N.columns.length} columns`})]})]}),i.jsx("button",{onClick:O=>{O.stopPropagation(),j(k)},className:"text-destructive hover:bg-destructive/10 p-1.5 rounded flex-shrink-0",title:"Remove rule",children:i.jsx(Qr,{size:14})})]}),_&&i.jsxs("div",{className:`p-3 border-t bg-accent/5 animate-in slide-in-from-top-2 duration-200 ${u?"grid grid-cols-2 gap-4":"space-y-3"}`,children:[i.jsxs("div",{className:"flex flex-col gap-3",children:[i.jsxs("div",{className:"flex flex-col gap-2",children:[i.jsx("label",{className:"text-xs font-medium text-muted-foreground",children:"Method"}),i.jsxs("select",{className:"w-full p-1.5 border rounded text-xs bg-background font-medium",value:b,onChange:O=>h(k,O.target.value),onClick:O=>O.stopPropagation(),children:[i.jsx("option",{value:"simple",children:"Simple Math"}),i.jsx("option",{value:"power",children:"Power Transform"})]}),i.jsx("select",{className:"w-full p-1.5 border rounded text-xs bg-background",value:N.method,onChange:O=>w(k,{method:O.target.value}),onClick:O=>O.stopPropagation(),children:Hu[b].methods.map(O=>i.jsx("option",{value:O.value,children:O.label},O.value))})]}),(N.method==="yeo-johnson"||N.method==="box-cox")&&i.jsxs("div",{className:"flex items-center gap-2 pt-1",onClick:O=>O.stopPropagation(),children:[i.jsx("input",{type:"checkbox",id:`std-${k}`,checked:((I=N.params)==null?void 0:I.standardize)!==!1,onChange:O=>w(k,{params:{...N.params,standardize:O.target.checked}})}),i.jsx("label",{htmlFor:`std-${k}`,className:"text-xs text-muted-foreground",children:"Standardize result"})]}),N.method==="exponential"&&i.jsxs("div",{className:"flex flex-col gap-1 pt-1",onClick:O=>O.stopPropagation(),children:[i.jsx("label",{className:"text-xs text-muted-foreground",children:"Clip Threshold:"}),i.jsx("input",{type:"number",className:"w-full p-1 border rounded text-xs",value:((R=N.params)==null?void 0:R.clip_threshold)||700,onChange:O=>w(k,{params:{...N.params,clip_threshold:parseFloat(O.target.value)}})})]})]}),i.jsxs("div",{className:"space-y-1 min-w-0",onClick:O=>O.stopPropagation(),children:[i.jsx("label",{className:"text-xs font-medium text-muted-foreground",children:"Target Columns"}),i.jsx(FR,{allColumns:y,selectedColumns:N.columns||[],onChange:O=>w(k,{columns:O})})]})]})]},k)}),s.length===0&&i.jsxs("div",{className:"text-xs text-muted-foreground text-center py-8 border border-dashed rounded bg-muted/20",children:["No transformation rules defined.",i.jsx("br",{}),'Click "Add Rule" to start.']})]}),i.jsx(Xr,{recommendations:g||[],onApply:N=>{var C,M;const k=N,b=((C=k.suggested_params)==null?void 0:C.method)||((M=k.params)==null?void 0:M.method)||"log",_=k.target_columns||[];if(_.length>0){const I=s.length;a(R=>[...R,I]),t({transformations:[...s,{columns:_,method:b,params:{}}]})}}})]})},VR={type:"TransformationNode",label:"Transformation",description:"Apply mathematical transformations to features.",icon:pv,category:"Preprocessing",inputs:[{id:"in",type:"dataset",label:"Dataset"}],outputs:[{id:"out",type:"dataset",label:"Transformed"}],validate:e=>{if(!(e!=null&&e.transformations)||e.transformations.length===0)return{isValid:!1,message:"Add at least one transformation rule."};for(const t of e.transformations)if(!t.columns||t.columns.length===0)return{isValid:!1,message:"Each rule must have at least one column selected."};return{isValid:!0}},settings:$R,getDefaultConfig:()=>({transformations:[]})},HR=({value:e,onChange:t})=>{const[n,r]=T.useState((e==null?void 0:e.join(", "))||""),s=T.useRef(e);T.useEffect(()=>{JSON.stringify(e)!==JSON.stringify(s.current)&&(r((e==null?void 0:e.join(", "))||""),s.current=e)},[e]);const o=()=>{const a=n.split(",").map(l=>parseFloat(l.trim())).filter(l=>!isNaN(l)).sort((l,u)=>l-u);t(a)};return i.jsx("input",{type:"text",className:"w-full p-1 text-xs border rounded bg-background text-foreground",placeholder:"0, 10, 20, 100...",value:n,onChange:a=>r(a.target.value),onBlur:o})},BR=({config:e,onChange:t,nodeId:n})=>{var p;const s=(p=Ae(n||"").find(h=>h.datasetId))==null?void 0:p.datasetId,{data:o,isLoading:a}=Re(s),l=T.useRef(null),[u,c]=T.useState(!1),[d,f]=T.useState("");T.useEffect(()=>{if(!l.current)return;const h=new ResizeObserver(g=>{for(const v of g)c(v.contentRect.width>450)});return h.observe(l.current),()=>h.disconnect()},[]);const m=o?Object.values(o.columns).filter(h=>["int","float","number"].some(g=>{var v;return(v=h.dtype)==null?void 0:v.toLowerCase().includes(g)})).map(h=>h.name):[],y=m.filter(h=>h.toLowerCase().includes(d.toLowerCase())),x=()=>{t({...e,columns:y})},w=()=>{const h=e.columns.filter(g=>!y.includes(g));t({...e,columns:h})},j=h=>{e.columns.includes(h)?t({...e,columns:e.columns.filter(g=>g!==h)}):t({...e,columns:[...e.columns,h]})};return i.jsxs("div",{ref:l,className:"p-4 space-y-4 h-full overflow-y-auto",children:[!s&&i.jsx("div",{className:"p-2 bg-yellow-50 text-yellow-800 text-xs rounded border border-yellow-200",children:"Connect a dataset node to see available columns."}),i.jsxs("div",{className:`grid gap-4 ${u?"grid-cols-2":"grid-cols-1"}`,children:[i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"block text-sm font-medium",children:"Binning Strategy"}),i.jsxs("select",{className:"w-full p-2 border rounded bg-background focus:ring-1 focus:ring-primary outline-none",value:e.strategy,onChange:h=>t({...e,strategy:h.target.value}),children:[i.jsx("option",{value:"equal_width",children:"Equal Width (Uniform)"}),i.jsx("option",{value:"equal_frequency",children:"Equal Frequency (Quantile)"}),i.jsx("option",{value:"kmeans",children:"K-Means Clustering"}),i.jsx("option",{value:"custom",children:"Custom Edges"})]}),i.jsxs("p",{className:"text-[10px] text-muted-foreground",children:[e.strategy==="equal_width"&&"Bins have equal width ranges.",e.strategy==="equal_frequency"&&"Bins have equal number of records.",e.strategy==="kmeans"&&"Bins based on K-Means clustering centers.",e.strategy==="custom"&&"Define specific bin edges for each column."]})]}),e.strategy!=="custom"&&i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"block text-sm font-medium",children:"Number of Bins"}),i.jsx("input",{type:"number",min:2,max:100,className:"w-full p-2 border rounded bg-background focus:ring-1 focus:ring-primary outline-none",value:e.n_bins,onChange:h=>t({...e,n_bins:parseInt(h.target.value)||5})})]}),e.strategy==="custom"&&i.jsxs("div",{className:"space-y-2 border rounded p-2 bg-muted/10",children:[i.jsx("label",{className:"block text-xs font-medium",children:"Custom Edges"}),e.columns.length===0?i.jsx("div",{className:"text-xs text-muted-foreground",children:"Select columns first."}):i.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:e.columns.map(h=>{var g;return i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"text-[10px] font-medium",children:h}),i.jsx(HR,{value:(g=e.custom_bins)==null?void 0:g[h],onChange:v=>t({...e,custom_bins:{...e.custom_bins,[h]:v}})})]},h)})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"block text-sm font-medium",children:"Label Format"}),i.jsxs("select",{className:"w-full p-2 border rounded bg-background focus:ring-1 focus:ring-primary outline-none",value:e.label_format,onChange:h=>t({...e,label_format:h.target.value}),children:[i.jsx("option",{value:"ordinal",children:"Ordinal (0, 1, 2...)"}),i.jsx("option",{value:"range",children:"Range Intervals ([0-10], [10-20]...)"}),i.jsx("option",{value:"bin_index",children:"Bin Index"})]})]}),e.label_format==="range"&&i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"block text-sm font-medium",children:"Precision (Decimals)"}),i.jsx("input",{type:"number",min:0,max:10,className:"w-full p-2 border rounded bg-background focus:ring-1 focus:ring-primary outline-none",value:e.precision??3,onChange:h=>t({...e,precision:parseInt(h.target.value)||0})}),i.jsx("p",{className:"text-[10px] text-muted-foreground",children:"Number of decimal places to show in interval labels (e.g. 2 gives [0.00, 10.00])."})]}),i.jsxs("div",{className:"space-y-2 pt-2 border-t",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("input",{type:"checkbox",id:"drop_original",checked:e.drop_original,onChange:h=>t({...e,drop_original:h.target.checked}),className:"rounded border-gray-300 text-primary focus:ring-primary"}),i.jsx("label",{htmlFor:"drop_original",className:"text-sm",children:"Drop Original Columns"})]}),!e.drop_original&&i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"text-xs font-medium text-muted-foreground",children:"Output Suffix"}),i.jsx("input",{type:"text",className:"w-full p-1.5 border rounded text-xs",placeholder:"_binned",value:e.output_suffix||"",onChange:h=>t({...e,output_suffix:h.target.value})})]})]})]}),i.jsxs("div",{className:"space-y-2 flex flex-col h-full min-h-[200px]",children:[i.jsx("label",{className:"block text-sm font-medium",children:"Target Columns"}),i.jsx("div",{className:"flex gap-2",children:i.jsx("input",{className:"w-full px-2 py-1 text-xs border rounded bg-background text-foreground",placeholder:"Search columns...",value:d,onChange:h=>f(h.target.value)})}),i.jsxs("div",{className:"flex gap-2 text-xs border-b pb-1",children:[i.jsx("button",{onClick:x,className:"text-primary hover:underline",children:"Select All"}),i.jsx("span",{className:"text-muted-foreground",children:"|"}),i.jsx("button",{onClick:w,className:"text-muted-foreground hover:underline",children:"None"}),i.jsxs("span",{className:"ml-auto text-muted-foreground",children:[e.columns.length," selected"]})]}),i.jsx("div",{className:"flex-1 border rounded bg-background overflow-y-auto p-2 max-h-[300px]",children:a?i.jsx("div",{className:"text-xs text-muted-foreground p-2",children:"Loading columns..."}):y.length===0?i.jsx("div",{className:"text-xs text-muted-foreground p-2 text-center",children:m.length===0?"No numeric columns found.":`No columns match "${d}"`}):i.jsx("div",{className:"space-y-1",children:y.map(h=>i.jsxs("label",{className:"flex items-center gap-2 text-xs cursor-pointer hover:bg-accent/50 p-1 rounded",children:[i.jsx("input",{type:"checkbox",checked:e.columns.includes(h),onChange:()=>j(h),className:"rounded border-gray-300 text-primary focus:ring-primary"}),i.jsx("span",{className:"truncate",title:h,children:h})]},h))})})]})]})]})},UR={type:"BinningNode",label:"Binning / Discretization",description:"Convert continuous variables into discrete bins.",icon:dv,category:"Preprocessing",inputs:[{id:"in",type:"dataset",label:"Dataset"}],outputs:[{id:"out",type:"dataset",label:"Binned"}],validate:e=>!e.columns||e.columns.length===0?{isValid:!1,message:"Select at least one column to bin."}:e.n_bins<2?{isValid:!1,message:"Number of bins must be at least 2."}:{isValid:!0},settings:BR,getDefaultConfig:()=>({columns:[],strategy:"equal_width",n_bins:5,label_format:"ordinal",output_suffix:"_binned",drop_original:!1})},WR=({nodeId:e})=>{const t=ce(s=>s.executionResult),n=e?t==null?void 0:t.node_results[e]:null;if(!n)return null;const r=s=>s?i.jsx("div",{className:"space-y-1",children:Object.entries(s).map(([o,a])=>typeof a=="object"&&a!==null?i.jsxs("div",{className:"mt-1",children:[i.jsxs("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:[o.replace(/_/g," "),":"]}),i.jsx("div",{className:"pl-2 border-l-2 border-gray-200 dark:border-gray-700 ml-1",children:r(a)})]},o):i.jsxs("div",{className:"flex justify-between text-[10px]",children:[i.jsxs("span",{className:"text-gray-600 dark:text-gray-400 capitalize",children:[o.replace(/_/g," "),":"]}),i.jsx("span",{className:"font-mono text-gray-900 dark:text-gray-100",children:String(a)})]},o))}):null;return i.jsxs("div",{className:"mt-6 p-4 border rounded-md bg-gray-50 dark:bg-gray-800 dark:border-gray-700",children:[i.jsx("h4",{className:"text-sm font-medium mb-2 text-gray-900 dark:text-gray-100",children:"Last Run Results"}),i.jsxs("div",{className:"text-xs space-y-1 text-gray-600 dark:text-gray-300",children:[n.metrics&&i.jsx("div",{className:"mt-2",children:r(n.metrics)}),n.error&&i.jsxs("div",{className:"mt-2 text-red-500 break-words",children:["Error: ",n.error]}),!n.metrics&&!n.error&&i.jsx("div",{className:"italic text-gray-500",children:"No metrics available"})]})]})},qR=({config:e,onChange:t,nodeId:n})=>{var w,j;const r=T.useRef(null),[s,o]=T.useState(!1),[a,l]=T.useState(!0),u=Ae(n||""),c=(w=u.find(p=>p.datasetId))==null?void 0:w.datasetId,{data:d}=Re(c),f=(j=u.find(p=>{var h;return(h=p.config)==null?void 0:h.target_column}))==null?void 0:j.config.target_column;T.useEffect(()=>{if(!e.target_column){if(f)t({...e,target_column:f});else if(d!=null&&d.columns){const p=Object.values(d.columns).find(h=>h.name.toLowerCase()==="target"||h.name.toLowerCase()==="class"||h.column_type==="target");p&&t({...e,target_column:p.name})}}},[d,f,e.target_column]),T.useEffect(()=>{if(!r.current)return;const p=new ResizeObserver(h=>{for(const g of h)o(g.contentRect.width>400)});return p.observe(r.current),()=>p.disconnect()},[]);const m=so(n||"",{types:["resampling"],suggestedNodeTypes:["ResamplingNode"]}),y=p=>{p.suggested_params&&t({...e,...p.suggested_params})},x=(p,h)=>{const g={...e,[p]:h};p==="type"&&(h==="oversampling"?g.method="smote":g.method="random_under_sampling"),t(g)};return i.jsx("div",{ref:r,className:`flex flex-col h-full w-full bg-white dark:bg-gray-900 ${s?"overflow-hidden":"overflow-y-auto"}`,children:i.jsxs("div",{className:`flex-1 min-h-0 p-4 gap-4 ${s?"grid grid-cols-2":"flex flex-col"}`,children:[i.jsxs("div",{className:`space-y-4 ${s?"overflow-y-auto pr-2":"shrink-0"}`,children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Resampling Type"}),i.jsxs("select",{className:"w-full rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 p-2 text-sm text-gray-900 dark:text-gray-100 focus:border-blue-500 focus:ring-1 focus:ring-blue-500",value:e.type,onChange:p=>x("type",p.target.value),children:[i.jsx("option",{value:"oversampling",children:"Oversampling (Minority)"}),i.jsx("option",{value:"undersampling",children:"Undersampling (Majority)"})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Method"}),i.jsx("select",{className:"w-full rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 p-2 text-sm text-gray-900 dark:text-gray-100 focus:border-blue-500 focus:ring-1 focus:ring-blue-500",value:e.method,onChange:p=>x("method",p.target.value),children:e.type==="oversampling"?i.jsxs(i.Fragment,{children:[i.jsx("option",{value:"smote",children:"SMOTE"}),i.jsx("option",{value:"adasyn",children:"ADASYN"}),i.jsx("option",{value:"borderline_smote",children:"Borderline SMOTE"}),i.jsx("option",{value:"svm_smote",children:"SVM SMOTE"}),i.jsx("option",{value:"kmeans_smote",children:"KMeans SMOTE"}),i.jsx("option",{value:"smote_tomek",children:"SMOTE + Tomek"})]}):i.jsxs(i.Fragment,{children:[i.jsx("option",{value:"random_under_sampling",children:"Random Under Sampling"}),i.jsx("option",{value:"nearmiss",children:"NearMiss"}),i.jsx("option",{value:"tomek_links",children:"Tomek Links"}),i.jsx("option",{value:"edited_nearest_neighbours",children:"Edited Nearest Neighbours"})]})}),i.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:e.type==="oversampling"?"Generate synthetic samples for the minority class.":"Remove samples from the majority class."})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Target Column"}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:"text",className:"w-full rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 p-2 text-sm text-gray-900 dark:text-gray-100 focus:border-blue-500 focus:ring-1 focus:ring-blue-500",placeholder:"e.g., target",value:e.target_column,onChange:p=>x("target_column",p.target.value),list:"target-column-suggestions"}),(d==null?void 0:d.columns)&&i.jsx("datalist",{id:"target-column-suggestions",children:Object.values(d.columns).map(p=>i.jsx("option",{value:p.name},p.name))})]}),i.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:f?"Auto-detected from upstream node.":"The column containing the class labels."})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Sampling Strategy"}),i.jsxs("select",{className:"w-full rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 p-2 text-sm text-gray-900 dark:text-gray-100 focus:border-blue-500 focus:ring-1 focus:ring-blue-500",value:e.sampling_strategy,onChange:p=>x("sampling_strategy",p.target.value),children:[i.jsx("option",{value:"auto",children:"Auto (Resample all classes but majority)"}),i.jsx("option",{value:"minority",children:"Minority (Resample only minority class)"}),i.jsx("option",{value:"not minority",children:"Not Minority (Resample all but minority)"}),i.jsx("option",{value:"not majority",children:"Not Majority (Resample all but majority)"}),i.jsx("option",{value:"all",children:"All (Resample all classes)"})]}),i.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Defines which classes to resample."})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Random State"}),i.jsx("input",{type:"number",className:"w-full rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 p-2 text-sm text-gray-900 dark:text-gray-100 focus:border-blue-500 focus:ring-1 focus:ring-blue-500",value:e.random_state,onChange:p=>x("random_state",parseInt(p.target.value))})]})]}),i.jsxs("div",{className:`space-y-4 ${s?"overflow-y-auto pl-2 border-l border-gray-100 dark:border-gray-700":"shrink-0 pt-4 border-t border-gray-100 dark:border-gray-700"}`,children:[e.type==="oversampling"&&i.jsxs(i.Fragment,{children:[["smote","adasyn","borderline_smote","svm_smote","kmeans_smote"].includes(e.method)&&i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"k Neighbors"}),i.jsx("input",{type:"number",className:"w-full rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 p-2 text-sm text-gray-900 dark:text-gray-100 focus:border-blue-500 focus:ring-1 focus:ring-blue-500",value:e.k_neighbors??5,onChange:p=>x("k_neighbors",parseInt(p.target.value))})]}),["borderline_smote","svm_smote"].includes(e.method)&&i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"m Neighbors"}),i.jsx("input",{type:"number",className:"w-full rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 p-2 text-sm text-gray-900 dark:text-gray-100 focus:border-blue-500 focus:ring-1 focus:ring-blue-500",value:e.m_neighbors??10,onChange:p=>x("m_neighbors",parseInt(p.target.value))})]}),e.method==="borderline_smote"&&i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Kind"}),i.jsxs("select",{className:"w-full rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 p-2 text-sm text-gray-900 dark:text-gray-100 focus:border-blue-500 focus:ring-1 focus:ring-blue-500",value:e.kind??"borderline-1",onChange:p=>x("kind",p.target.value),children:[i.jsx("option",{value:"borderline-1",children:"Borderline-1"}),i.jsx("option",{value:"borderline-2",children:"Borderline-2"})]})]}),e.method==="svm_smote"&&i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Out Step"}),i.jsx("input",{type:"number",step:"0.1",className:"w-full rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 p-2 text-sm text-gray-900 dark:text-gray-100 focus:border-blue-500 focus:ring-1 focus:ring-blue-500",value:e.out_step??.5,onChange:p=>x("out_step",parseFloat(p.target.value))})]}),e.method==="kmeans_smote"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Cluster Balance Threshold"}),i.jsx("input",{type:"number",step:"0.1",className:"w-full rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 p-2 text-sm text-gray-900 dark:text-gray-100 focus:border-blue-500 focus:ring-1 focus:ring-blue-500",value:e.cluster_balance_threshold??.1,onChange:p=>x("cluster_balance_threshold",parseFloat(p.target.value))})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Density Exponent"}),i.jsx("input",{type:"text",className:"w-full rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 p-2 text-sm text-gray-900 dark:text-gray-100 focus:border-blue-500 focus:ring-1 focus:ring-blue-500",value:e.density_exponent??"auto",onChange:p=>x("density_exponent",p.target.value)})]})]})]}),e.type==="undersampling"&&e.method==="random_under_sampling"&&i.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-md bg-gray-50 dark:bg-gray-800 dark:border-gray-700",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 block",children:"Replacement"}),i.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Sample with replacement"})]}),i.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded border-gray-300 dark:border-gray-600 text-blue-600 focus:ring-blue-500",checked:e.replacement??!1,onChange:p=>x("replacement",p.target.checked)})]}),e.type==="undersampling"&&e.method==="nearmiss"&&i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Version"}),i.jsxs("select",{className:"w-full rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 p-2 text-sm text-gray-900 dark:text-gray-100 focus:border-blue-500 focus:ring-1 focus:ring-blue-500",value:e.version??1,onChange:p=>x("version",parseInt(p.target.value)),children:[i.jsx("option",{value:"1",children:"1"}),i.jsx("option",{value:"2",children:"2"}),i.jsx("option",{value:"3",children:"3"})]})]}),e.type==="undersampling"&&e.method==="edited_nearest_neighbours"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"n Neighbors"}),i.jsx("input",{type:"number",className:"w-full rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 p-2 text-sm text-gray-900 dark:text-gray-100 focus:border-blue-500 focus:ring-1 focus:ring-blue-500",value:e.n_neighbors??3,onChange:p=>x("n_neighbors",parseInt(p.target.value))})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Selection Kind"}),i.jsxs("select",{className:"w-full rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 p-2 text-sm text-gray-900 dark:text-gray-100 focus:border-blue-500 focus:ring-1 focus:ring-blue-500",value:e.kind_sel??"all",onChange:p=>x("kind_sel",p.target.value),children:[i.jsx("option",{value:"all",children:"All"}),i.jsx("option",{value:"mode",children:"Mode"})]})]})]}),m.length>0&&i.jsxs("div",{className:"mt-0 border rounded-md overflow-hidden border-gray-200 dark:border-gray-700",children:[i.jsxs("button",{className:"w-full flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",onClick:()=>l(!a),children:[i.jsxs("span",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:["Recommendations (",m.length,")"]}),a?i.jsx(Wr,{size:16}):i.jsx(sn,{size:16})]}),a&&i.jsx("div",{className:"p-3 bg-white dark:bg-gray-900 border-t border-gray-200 dark:border-gray-700",children:i.jsx(Xr,{recommendations:m,onApply:y})})]}),n&&i.jsx(WR,{nodeId:n})]})]})})},QR=e=>e.target_column?e.type==="oversampling"&&["smote","adasyn","borderline_smote","svm_smote","kmeans_smote"].includes(e.method)&&(e.k_neighbors??5)<1?{isValid:!1,message:"k_neighbors must be at least 1."}:{isValid:!0}:{isValid:!1,message:"Target column is required for resampling."},XR={type:"ResamplingNode",label:"Resampling",category:"Preprocessing",description:"Balance dataset classes using oversampling or undersampling techniques.",icon:ir,inputs:[{id:"in",label:"Data",type:"dataset"}],outputs:[{id:"out",label:"Balanced Data",type:"dataset"}],settings:qR,validate:QR,getDefaultConfig:()=>({type:"oversampling",method:"smote",target_column:"",sampling_strategy:"auto",random_state:42,k_neighbors:5,replacement:!1,version:1,n_neighbors:3,kind_sel:"all"})},KR=[{value:"arithmetic",label:"Arithmetic",icon:Pf},{value:"datetime_extract",label:"Date Extraction",icon:C4},{value:"ratio",label:"Ratio",icon:K4},{value:"similarity",label:"Similarity",icon:V4},{value:"polynomial",label:"Polynomial",icon:a3},{value:"group_agg",label:"Group Agg",icon:pv}],YR=["add","subtract","multiply","divide"],GR=["year","month","day","weekday","hour","quarter","is_weekend"],ZR=["ratio","token_sort_ratio","token_set_ratio"],JR=["mean","sum","count","min","max","std","median"],Qt=({columns:e,selected:t,onChange:n,label:r,single:s})=>{const[o,a]=T.useState(""),l=e.filter(c=>c.toLowerCase().includes(o.toLowerCase())),u=c=>{s?n([c]):t.includes(c)?n(t.filter(d=>d!==c)):n([...t,c])};return i.jsxs("div",{className:"space-y-1.5",children:[r&&i.jsx("label",{className:"text-xs font-medium text-muted-foreground",children:r}),i.jsxs("div",{className:"border rounded bg-background overflow-hidden flex flex-col",children:[i.jsxs("div",{className:"flex items-center px-2 py-1.5 border-b bg-muted/20",children:[i.jsx(qr,{size:12,className:"text-muted-foreground mr-1.5"}),i.jsx("input",{className:"flex-1 bg-transparent text-xs outline-none placeholder:text-muted-foreground/70",placeholder:"Search columns...",value:o,onChange:c=>a(c.target.value)})]}),i.jsx("div",{className:"max-h-32 overflow-y-auto p-1 space-y-0.5",children:l.length>0?l.map(c=>{const d=t.includes(c);return i.jsxs("div",{onClick:()=>u(c),className:`
                    flex items-center gap-2 px-2 py-1.5 rounded text-xs cursor-pointer transition-colors
                    ${d?"bg-primary/10 text-primary font-medium":"hover:bg-accent text-foreground"}
                  `,children:[i.jsx("div",{className:`
                    w-3 h-3 rounded border flex items-center justify-center
                    ${d?"border-primary bg-primary text-primary-foreground":"border-muted-foreground/40"}
                  `,children:d&&i.jsx(E4,{size:8,strokeWidth:4})}),i.jsx("span",{className:"truncate",children:c})]},c)}):i.jsx("div",{className:"p-2 text-xs text-muted-foreground text-center italic",children:"No columns found"})})]})]})},eM=({config:e,onChange:t,nodeId:n})=>{var k;const s=(k=Ae(n||"").find(b=>b.datasetId))==null?void 0:k.datasetId,{data:o}=Re(s),a=ce(b=>b.executionResult),l=n?a==null?void 0:a.node_results[n]:null,u=l==null?void 0:l.metrics,[c,d]=T.useState(!1),f=o?Object.values(o.columns).map(b=>b.name):[],m=o?Object.values(o.columns).filter(b=>["int","float","number"].some(_=>{var C;return(C=b.dtype)==null?void 0:C.toLowerCase().includes(_)})).map(b=>b.name):[],y=o?Object.values(o.columns).filter(b=>["date","time"].some(_=>{var C;return(C=b.dtype)==null?void 0:C.toLowerCase().includes(_)})).map(b=>b.name):[],x=o?Object.values(o.columns).filter(b=>["string","object","text"].some(_=>{var C;return(C=b.dtype)==null?void 0:C.toLowerCase().includes(_)})).map(b=>b.name):[],w=so(n||"",{types:["feature_generation"],suggestedNodeTypes:["FeatureGenerationNode"],scope:"column"}),j=b=>{console.log("Applying recommendation:",b)},p=b=>{const _={operation_type:b,method:b==="arithmetic"?"add":b==="similarity"?"ratio":b==="group_agg"?"mean":b==="polynomial"?"poly":"year",input_columns:[],output_column:"",datetime_features:b==="datetime_extract"?["year"]:void 0,degree:b==="polynomial"?2:void 0,interaction_only:b==="polynomial"?!1:void 0,isExpanded:!0};t({operations:[...e.operations||[],_]})},h=(b,_)=>{const C=[...e.operations||[]];C[b]={...C[b],..._},t({operations:C})},g=(b,_)=>{_.stopPropagation();const C=[...e.operations||[]];C.splice(b,1),t({operations:C})},v=b=>{const _=[...e.operations||[]];_[b]={..._[b],isExpanded:!_[b].isExpanded},t({operations:_})},N=(b,_)=>`${b.operation_type}_${_}`;return i.jsxs("div",{className:"flex h-full",children:[i.jsxs("div",{className:"w-20 border-r bg-muted/10 flex flex-col items-center py-4 gap-2 overflow-y-auto shrink-0",children:[i.jsx("span",{className:"text-[10px] font-bold text-muted-foreground mb-2 uppercase tracking-wider",children:"Add"}),KR.map(b=>i.jsxs("button",{onClick:()=>p(b.value),className:"flex flex-col items-center justify-center gap-1 p-1.5 rounded-md border bg-card hover:bg-accent hover:border-primary/50 transition-all group w-16 h-14 shadow-sm",title:b.label,children:[i.jsx(b.icon,{size:18,className:"text-muted-foreground group-hover:text-primary"}),i.jsx("span",{className:"text-[9px] font-medium text-muted-foreground group-hover:text-foreground text-center leading-tight line-clamp-2",children:b.label.replace(" ",`
`)})]},b.value))]}),i.jsxs("div",{className:"flex-1 flex flex-col min-w-0 bg-background",children:[w.length>0&&i.jsxs("div",{className:"border-b bg-muted/10",children:[i.jsxs("button",{onClick:()=>d(!c),className:"w-full flex items-center justify-between px-4 py-2 text-xs font-medium text-muted-foreground hover:text-primary hover:bg-muted/20 transition-colors",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(mv,{size:14,className:w.length>0?"text-yellow-500":""}),i.jsxs("span",{children:["Recommendations (",w.length,")"]})]}),c?i.jsx(sn,{size:14}):i.jsx(cd,{size:14})]}),c&&i.jsx("div",{className:"p-4 bg-muted/5 border-t",children:i.jsx(Xr,{recommendations:w,onApply:j,className:"mb-0"})})]}),i.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 min-h-0",children:[(e.operations||[]).map((b,_)=>{var C,M,I;return i.jsxs("div",{className:"border rounded-lg bg-card shadow-sm overflow-hidden",children:[i.jsxs("div",{className:"flex items-center justify-between px-3 py-2 bg-muted/30 border-b cursor-pointer hover:bg-muted/50 transition-colors",onClick:()=>v(_),children:[i.jsxs("div",{className:"flex items-center gap-2",children:[b.isExpanded?i.jsx(sn,{size:14,className:"text-muted-foreground"}):i.jsx(cd,{size:14,className:"text-muted-foreground"}),i.jsx("span",{className:"text-[10px] font-bold uppercase tracking-wider text-primary bg-primary/10 px-1.5 py-0.5 rounded",children:b.operation_type==="datetime_extract"?"Date":b.operation_type.replace("_"," ")}),["arithmetic","similarity","group_agg"].includes(b.operation_type)&&i.jsx("select",{className:"text-sm border-none bg-transparent font-semibold focus:ring-0 cursor-pointer hover:text-primary",value:b.method,onClick:R=>R.stopPropagation(),onChange:R=>h(_,{method:R.target.value}),children:(b.operation_type==="arithmetic"?YR:b.operation_type==="similarity"?ZR:b.operation_type==="group_agg"?JR:[]).map(R=>i.jsx("option",{value:R,children:R.replace("_"," ")},R))})]}),i.jsx("button",{onClick:R=>g(_,R),className:"text-muted-foreground hover:text-destructive transition-colors p-1 rounded-full hover:bg-destructive/10",children:i.jsx(Qr,{size:14})})]}),b.isExpanded&&i.jsxs("div",{className:"p-3 space-y-4",children:[b.operation_type==="arithmetic"&&i.jsxs("div",{className:"flex flex-col gap-3",children:[i.jsx("div",{className:"text-[10px] text-muted-foreground bg-muted/20 p-1.5 rounded border border-muted/20",children:b.method==="divide"?"Performs row-by-row division (Col A / Col B) for each record.":"Performs row-by-row arithmetic between two columns."}),i.jsx(Qt,{label:"Column A (Left Operand)",columns:m,selected:b.input_columns.slice(0,1),onChange:R=>h(_,{input_columns:R}),single:!0}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"h-px bg-border flex-1"}),i.jsx("span",{className:"text-lg font-bold text-muted-foreground bg-muted/20 w-8 h-8 rounded flex items-center justify-center",children:b.method==="add"?"+":b.method==="subtract"?"-":b.method==="multiply"?"":""}),i.jsx("div",{className:"h-px bg-border flex-1"})]}),i.jsx(Qt,{label:"Column B (Right Operand)",columns:m,selected:((C=b.secondary_columns)==null?void 0:C.slice(0,1))||[],onChange:R=>h(_,{secondary_columns:R}),single:!0})]}),b.operation_type==="ratio"&&i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"text-[10px] text-muted-foreground bg-muted/20 p-1.5 rounded border border-muted/20",children:["Calculates aggregate ratio: ",i.jsx("strong",{children:"Sum(Numerator) / Sum(Denominator)"}),"."]}),i.jsx(Qt,{label:"Numerator (Sum)",columns:m,selected:b.input_columns,onChange:R=>h(_,{input_columns:R})}),i.jsxs("div",{className:"relative flex items-center justify-center",children:[i.jsx("div",{className:"absolute inset-0 flex items-center",children:i.jsx("div",{className:"w-full border-t border-dashed"})}),i.jsx("span",{className:"relative bg-card px-2 text-xs text-muted-foreground font-medium",children:"Divided By"})]}),i.jsx(Qt,{label:"Denominator (Sum)",columns:m,selected:b.secondary_columns||[],onChange:R=>h(_,{secondary_columns:R})})]}),b.operation_type==="similarity"&&i.jsxs("div",{className:"flex flex-col gap-3",children:[i.jsxs("div",{className:"text-[10px] text-muted-foreground bg-muted/20 p-1.5 rounded border border-muted/20 space-y-1",children:[i.jsx("p",{children:"Calculates string similarity score (0-100) between two text columns."}),i.jsxs("ul",{className:"list-disc pl-3 space-y-0.5 opacity-80",children:[i.jsxs("li",{children:[i.jsx("strong",{children:"Ratio:"}),' Strict character matching (Levenshtein). "apple banana" != "banana apple".']}),i.jsxs("li",{children:[i.jsx("strong",{children:"Token Sort:"}),' Sorts words alphabetically then compares. "apple banana" == "banana apple".']}),i.jsxs("li",{children:[i.jsx("strong",{children:"Token Set:"})," Compares intersection of words. Handles duplicates/subsets well."]})]})]}),i.jsx(Qt,{label:"String A",columns:x,selected:b.input_columns.slice(0,1),onChange:R=>h(_,{input_columns:R}),single:!0}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"h-px bg-border flex-1"}),i.jsx("span",{className:"text-xs font-bold text-muted-foreground bg-muted/20 px-2 py-1 rounded",children:"vs"}),i.jsx("div",{className:"h-px bg-border flex-1"})]}),i.jsx(Qt,{label:"String B",columns:x,selected:((M=b.secondary_columns)==null?void 0:M.slice(0,1))||[],onChange:R=>h(_,{secondary_columns:R}),single:!0})]}),b.operation_type==="polynomial"&&i.jsxs("div",{className:"space-y-3",children:[i.jsx("div",{className:"text-[10px] text-muted-foreground bg-muted/20 p-1.5 rounded border border-muted/20",children:"Generates polynomial and interaction features (e.g., A, AB)."}),i.jsx(Qt,{label:"Input Columns",columns:m,selected:b.input_columns,onChange:R=>h(_,{input_columns:R})}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"text-xs font-medium text-muted-foreground",children:"Degree"}),i.jsx("input",{type:"number",min:"2",max:"5",className:"w-full text-xs border rounded p-1.5",value:b.degree||2,onChange:R=>h(_,{degree:parseInt(R.target.value)})})]}),i.jsx("div",{className:"space-y-1 pt-5",children:i.jsxs("label",{className:"flex items-center gap-2 text-xs cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:b.interaction_only||!1,onChange:R=>h(_,{interaction_only:R.target.checked})}),"Interaction Only"]})})]})]}),b.operation_type==="group_agg"&&i.jsxs("div",{className:"space-y-3",children:[i.jsx("div",{className:"text-[10px] text-muted-foreground bg-muted/20 p-1.5 rounded border border-muted/20",children:"Calculates aggregate statistics (e.g., Mean Salary) grouped by a categorical column (e.g., Department) and assigns it back to each row."}),i.jsx(Qt,{label:"Group By (Categorical)",columns:x.length>0?x:f,selected:b.input_columns.slice(0,1),onChange:R=>h(_,{input_columns:R}),single:!0}),i.jsxs("div",{className:"relative flex items-center justify-center",children:[i.jsx("div",{className:"absolute inset-0 flex items-center",children:i.jsx("div",{className:"w-full border-t border-dashed"})}),i.jsx("span",{className:"relative bg-card px-2 text-xs text-muted-foreground font-medium",children:"Target Column"})]}),i.jsx(Qt,{label:"Target (Numeric)",columns:m,selected:((I=b.secondary_columns)==null?void 0:I.slice(0,1))||[],onChange:R=>h(_,{secondary_columns:R}),single:!0})]}),b.operation_type==="datetime_extract"&&i.jsxs("div",{className:"space-y-3",children:[i.jsx(Qt,{label:"Date Column",columns:y.length>0?y:f,selected:b.input_columns.slice(0,1),onChange:R=>h(_,{input_columns:R}),single:!0}),i.jsxs("div",{className:"space-y-1.5",children:[i.jsx("label",{className:"text-xs font-medium text-muted-foreground",children:"Features to Extract"}),i.jsx("div",{className:"grid grid-cols-2 gap-2",children:GR.map(R=>i.jsxs("label",{className:"flex items-center gap-2 text-xs p-1.5 border rounded hover:bg-accent cursor-pointer transition-colors",children:[i.jsx("input",{type:"checkbox",className:"rounded border-muted-foreground/40 text-primary focus:ring-0",checked:(b.datetime_features||[]).includes(R),onChange:O=>{const S=b.datetime_features||[],L=O.target.checked?[...S,R]:S.filter(A=>A!==R);h(_,{datetime_features:L})}}),i.jsx("span",{className:"capitalize",children:R.replace("_"," ")})]},R))})]})]}),i.jsxs("div",{className:"pt-2",children:[i.jsx("label",{className:"text-[10px] font-medium text-muted-foreground uppercase tracking-wider mb-1 block",children:"Output Column Name"}),i.jsx("input",{type:"text",className:"w-full text-xs border rounded px-2 py-1.5 bg-background focus:border-primary focus:ring-1 focus:ring-primary outline-none transition-all",placeholder:N(b,_),value:b.output_column||"",onChange:R=>h(_,{output_column:R.target.value})})]})]})]},_)}),(!e.operations||e.operations.length===0)&&i.jsxs("div",{className:"flex flex-col items-center justify-center py-12 border-2 border-dashed rounded-lg bg-muted/5 text-muted-foreground",children:[i.jsx(Pf,{size:32,className:"mb-2 opacity-20"}),i.jsx("p",{className:"text-xs font-medium",children:"No operations added"}),i.jsx("p",{className:"text-[10px] opacity-70",children:"Select a type above to start"})]}),u&&i.jsxs("div",{className:"border rounded-lg bg-muted/10 p-4",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-3 text-sm font-semibold text-primary",children:[i.jsx(ir,{size:14}),i.jsx("span",{children:"Last Run Results"})]}),i.jsx("div",{className:"space-y-2 text-xs",children:u.generated_features&&u.generated_features.length>0?i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-muted-foreground",children:"New Features Created:"}),i.jsx("span",{className:"font-medium text-primary bg-primary/10 px-2 py-0.5 rounded-full",children:u.generated_features.length})]}),i.jsxs("div",{className:"pt-2",children:[i.jsx("span",{className:"text-[10px] text-muted-foreground uppercase tracking-wider font-semibold mb-1.5 block",children:"Generated Columns"}),i.jsx("div",{className:"flex flex-wrap gap-1.5",children:u.generated_features.map(b=>i.jsx("span",{className:"px-2 py-1 bg-background border rounded text-[10px] font-mono text-foreground shadow-sm",children:b},b))})]})]}):i.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground italic",children:[i.jsx(to,{size:12}),i.jsx("span",{children:"No features generated in last run."})]})})]})]})]})]})},tM={type:"FeatureGenerationNode",label:"Feature Generation",description:"Create new features via math, stats, or date extraction.",icon:Pf,category:"Preprocessing",inputs:[{id:"in",type:"dataset",label:"Dataset"}],outputs:[{id:"out",type:"dataset",label:"Enhanced"}],validate:e=>{var t,n,r;if(!e.operations||e.operations.length===0)return{isValid:!1,message:"Add at least one operation."};for(const s of e.operations){if(s.operation_type==="arithmetic"&&(s.input_columns.length===0||!((t=s.secondary_columns)!=null&&t.length)&&!((n=s.constants)!=null&&n.length)))return{isValid:!1,message:"Arithmetic requires two operands."};if(s.operation_type==="datetime_extract"&&s.input_columns.length===0)return{isValid:!1,message:"Select a date column."};if(s.operation_type==="polynomial"&&s.input_columns.length===0)return{isValid:!1,message:"Select input columns for polynomial features."};if(s.operation_type==="group_agg"&&(s.input_columns.length===0||!((r=s.secondary_columns)!=null&&r.length)))return{isValid:!1,message:"Select both Group By and Target columns."}}return{isValid:!0}},settings:eM,getDefaultConfig:()=>({operations:[]})},nM=({columns:e,selected:t,onChange:n})=>{const[r,s]=T.useState(""),o=e.filter(l=>l.toLowerCase().includes(r.toLowerCase())),a=l=>{t.includes(l)?n(t.filter(u=>u!==l)):n([...t,l])};return i.jsxs("div",{className:"border rounded bg-background overflow-hidden flex flex-col max-h-40",children:[i.jsxs("div",{className:"flex items-center px-2 py-1.5 border-b bg-muted/20",children:[i.jsx(qr,{size:12,className:"text-muted-foreground mr-1.5"}),i.jsx("input",{className:"flex-1 bg-transparent text-xs outline-none placeholder:text-muted-foreground/70",placeholder:"Search columns...",value:r,onChange:l=>s(l.target.value)})]}),i.jsx("div",{className:"overflow-y-auto p-1 space-y-0.5",children:o.length>0?o.map(l=>{const u=t.includes(l);return i.jsxs("div",{onClick:()=>a(l),className:`
                  flex items-center gap-2 px-2 py-1.5 rounded text-xs cursor-pointer transition-colors
                  ${u?"bg-blue-50 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300 font-medium":"hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-700 dark:text-gray-300"}
                `,children:[i.jsx("div",{className:`
                  w-3 h-3 rounded border flex items-center justify-center
                  ${u?"border-blue-500 bg-blue-500 text-white":"border-gray-400 dark:border-gray-600"}
                `,children:u&&i.jsx("div",{className:"w-1.5 h-1.5 bg-white rounded-full"})}),i.jsx("span",{className:"truncate",children:l})]},l)}):i.jsx("div",{className:"p-2 text-xs text-gray-500 text-center italic",children:"No columns found"})})]})},rM=({operation:e,onChange:t,onDelete:n})=>i.jsxs("div",{className:"p-3 border rounded-md bg-gray-50 dark:bg-gray-800/50 border-gray-200 dark:border-gray-700 space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("select",{className:"text-xs font-medium bg-transparent border-none focus:ring-0 p-0 text-gray-900 dark:text-gray-100",value:e.op,onChange:r=>{const s=r.target.value;let o="both";s==="case"&&(o="lower"),s==="remove_special"&&(o="keep_alphanumeric"),s==="regex"&&(o="custom"),t({...e,op:s,mode:o})},children:[i.jsx("option",{value:"trim",children:"Trim Whitespace"}),i.jsx("option",{value:"case",children:"Change Case"}),i.jsx("option",{value:"remove_special",children:"Remove Special Chars"}),i.jsx("option",{value:"regex",children:"Regex Replace"})]}),i.jsx("button",{onClick:n,className:"text-gray-400 hover:text-red-500 transition-colors",children:i.jsx(Qr,{size:14})})]}),i.jsxs("div",{className:"space-y-2",children:[e.op==="trim"&&i.jsxs("select",{className:"w-full text-xs rounded border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 p-1.5",value:e.mode,onChange:r=>t({...e,mode:r.target.value}),children:[i.jsx("option",{value:"both",children:"Both Ends"}),i.jsx("option",{value:"leading",children:"Leading Only"}),i.jsx("option",{value:"trailing",children:"Trailing Only"})]}),e.op==="case"&&i.jsxs("select",{className:"w-full text-xs rounded border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 p-1.5",value:e.mode,onChange:r=>t({...e,mode:r.target.value}),children:[i.jsx("option",{value:"lower",children:"Lower Case"}),i.jsx("option",{value:"upper",children:"Upper Case"}),i.jsx("option",{value:"title",children:"Title Case"}),i.jsx("option",{value:"sentence",children:"Sentence Case"})]}),e.op==="remove_special"&&i.jsxs("div",{className:"space-y-2",children:[i.jsxs("select",{className:"w-full text-xs rounded border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 p-1.5",value:e.mode,onChange:r=>t({...e,mode:r.target.value}),children:[i.jsx("option",{value:"keep_alphanumeric",children:"Keep Alphanumeric"}),i.jsx("option",{value:"keep_alphanumeric_space",children:"Keep Alphanumeric & Space"}),i.jsx("option",{value:"letters_only",children:"Letters Only"}),i.jsx("option",{value:"digits_only",children:"Digits Only"})]}),i.jsx("input",{type:"text",className:"w-full text-xs rounded border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 p-1.5",placeholder:"Replacement (optional)",value:e.replacement||"",onChange:r=>t({...e,replacement:r.target.value})})]}),e.op==="regex"&&i.jsxs("div",{className:"space-y-2",children:[i.jsxs("select",{className:"w-full text-xs rounded border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 p-1.5",value:e.mode,onChange:r=>t({...e,mode:r.target.value}),children:[i.jsx("option",{value:"custom",children:"Custom Pattern"}),i.jsx("option",{value:"collapse_whitespace",children:"Collapse Whitespace"}),i.jsx("option",{value:"extract_digits",children:"Extract Digits"}),i.jsx("option",{value:"normalize_slash_dates",children:"Normalize Dates (MM/DD/YYYY)"})]}),e.mode==="custom"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex gap-1",children:[i.jsx("input",{type:"text",className:"flex-1 min-w-0 text-xs rounded border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 p-1.5 font-mono",placeholder:"Regex Pattern",value:e.pattern||"",onChange:r=>t({...e,pattern:r.target.value})}),i.jsx("button",{className:"p-1.5 bg-gray-100 dark:bg-gray-700 rounded border border-gray-300 dark:border-gray-600 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600",title:"Generate regex from literal text",onClick:()=>{const r=prompt("Enter the exact text you want to match (it will be escaped):");if(r){const s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");t({...e,pattern:s})}},children:i.jsx(i3,{size:14})})]}),i.jsx("input",{type:"text",className:"w-full text-xs rounded border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 p-1.5",placeholder:"Replacement",value:e.repl||"",onChange:r=>t({...e,repl:r.target.value})})]})]})]})]}),sM=({config:e,onChange:t,nodeId:n})=>{var w;const r=T.useRef(null),[s,o]=T.useState(!1),[a,l]=T.useState(!0),c=(w=Ae(n||"").find(j=>j.datasetId))==null?void 0:w.datasetId,{data:d}=Re(c),f=d?Object.values(d.columns).filter(j=>j.dtype==="object"||j.dtype==="string"||j.dtype==="category").map(j=>j.name):[];T.useEffect(()=>{if(!r.current)return;const j=new ResizeObserver(p=>{for(const h of p)o(h.contentRect.width>400)});return j.observe(r.current),()=>j.disconnect()},[]);const m=()=>{t({...e,operations:[...e.operations,{op:"trim",mode:"both"}]})},y=(j,p)=>{const h=[...e.operations];h[j]=p,t({...e,operations:h})},x=j=>{const p=e.operations.filter((h,g)=>g!==j);t({...e,operations:p})};return i.jsx("div",{ref:r,className:`flex flex-col h-full w-full bg-white dark:bg-gray-900 ${s?"overflow-hidden":"overflow-y-auto"}`,children:i.jsxs("div",{className:`flex-1 min-h-0 p-4 gap-4 ${s?"grid grid-cols-2":"flex flex-col"}`,children:[i.jsx("div",{className:`space-y-4 ${s?"overflow-y-auto pr-2":"shrink-0"}`,children:i.jsxs("div",{children:[i.jsxs("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 block",children:["Target Columns (",e.columns.length,")"]}),i.jsx(nM,{columns:f,selected:e.columns,onChange:j=>t({...e,columns:j})}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Only text/categorical columns are shown."})]})}),i.jsxs("div",{className:`space-y-4 ${s?"overflow-y-auto pl-2 border-l border-gray-100 dark:border-gray-700":"shrink-0 pt-4 border-t border-gray-100 dark:border-gray-700"}`,children:[i.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-md border border-blue-100 dark:border-blue-800 overflow-hidden",children:[i.jsxs("button",{onClick:()=>l(!a),className:"w-full flex items-center gap-2 p-3 text-left hover:bg-blue-100/50 dark:hover:bg-blue-900/30 transition-colors",children:[i.jsx(to,{className:"text-blue-600 dark:text-blue-400 shrink-0",size:16}),i.jsx("span",{className:"text-xs font-semibold text-blue-800 dark:text-blue-200 flex-1",children:"About Text Cleaning"}),a?i.jsx(Wr,{size:14,className:"text-blue-600 dark:text-blue-400"}):i.jsx(sn,{size:14,className:"text-blue-600 dark:text-blue-400"})]}),a&&i.jsx("div",{className:"px-3 pb-3 text-xs text-blue-800 dark:text-blue-200 pl-9",children:i.jsx("p",{children:"Clean and standardize text columns by trimming whitespace, changing case, removing special characters, or applying custom regex patterns."})})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Cleaning Operations"}),i.jsxs("button",{onClick:m,className:"flex items-center gap-1 text-xs font-medium text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300",children:[i.jsx(Ri,{size:14}),"Add Step"]})]}),i.jsx("div",{className:"space-y-3",children:e.operations.length===0?i.jsxs("div",{className:"text-center p-6 border-2 border-dashed border-gray-200 dark:border-gray-700 rounded-lg",children:[i.jsx("p",{className:"text-xs text-gray-500",children:"No operations added."}),i.jsx("button",{onClick:m,className:"mt-2 text-xs text-blue-600 hover:underline",children:"Add your first cleaning step"})]}):e.operations.map((j,p)=>i.jsx(rM,{operation:j,onChange:h=>y(p,h),onDelete:()=>x(p)},p))})]})]})})},oM={type:"TextCleaning",label:"Text Cleaning",category:"Preprocessing",description:"Clean and standardize text columns.",icon:A4,inputs:[{id:"in",label:"Data",type:"dataset"}],outputs:[{id:"out",label:"Cleaned Data",type:"dataset"}],settings:sM,validate:e=>e.columns.length===0?{isValid:!1,message:"Select at least one column."}:e.operations.length===0?{isValid:!1,message:"Add at least one operation."}:{isValid:!0},getDefaultConfig:()=>({columns:[],operations:[{op:"trim",mode:"both"}]})},iM=({columns:e,selected:t,onChange:n})=>{const[r,s]=T.useState(""),o=e.filter(l=>l.toLowerCase().includes(r.toLowerCase())),a=l=>{t.includes(l)?n(t.filter(u=>u!==l)):n([...t,l])};return i.jsxs("div",{className:"border rounded bg-background overflow-hidden flex flex-col max-h-40",children:[i.jsxs("div",{className:"flex items-center px-2 py-1.5 border-b bg-muted/20",children:[i.jsx(qr,{size:12,className:"text-muted-foreground mr-1.5"}),i.jsx("input",{className:"flex-1 bg-transparent text-xs outline-none placeholder:text-muted-foreground/70",placeholder:"Search columns...",value:r,onChange:l=>s(l.target.value)})]}),i.jsx("div",{className:"overflow-y-auto p-1 space-y-0.5",children:o.length>0?o.map(l=>{const u=t.includes(l);return i.jsxs("div",{onClick:()=>a(l),className:`
                  flex items-center gap-2 px-2 py-1.5 rounded text-xs cursor-pointer transition-colors
                  ${u?"bg-blue-50 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300 font-medium":"hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-700 dark:text-gray-300"}
                `,children:[i.jsx("div",{className:`
                  w-3 h-3 rounded border flex items-center justify-center
                  ${u?"border-blue-500 bg-blue-500 text-white":"border-gray-400 dark:border-gray-600"}
                `,children:u&&i.jsx("div",{className:"w-1.5 h-1.5 bg-white rounded-full"})}),i.jsx("span",{className:"truncate",children:l})]},l)}):i.jsx("div",{className:"p-2 text-xs text-gray-500 text-center italic",children:"No columns found"})})]})},Dp=({value:e,type:t,onChange:n,placeholder:r})=>{const s=a=>{let l=e;a==="number"&&(l=Number(e)||0),a==="boolean"&&(l=!!e),a==="string"&&(l=String(e)),a==="null"&&(l=null),a==="nan"&&(l="NaN"),n(l,a)},o=a=>{let l=a.target.value;t==="number"&&(l=parseFloat(l)),n(l,t)};return i.jsxs("div",{className:"flex gap-1",children:[i.jsxs("select",{className:"w-20 text-[10px] rounded border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-800 px-1",value:t,onChange:a=>s(a.target.value),children:[i.jsx("option",{value:"string",children:"Text"}),i.jsx("option",{value:"number",children:"Num"}),i.jsx("option",{value:"boolean",children:"Bool"}),i.jsx("option",{value:"null",children:"Null"})]}),t==="string"&&i.jsx("input",{type:"text",className:"flex-1 min-w-0 text-xs rounded border border-gray-300 dark:border-gray-600 px-2 py-1",value:e||"",onChange:o,placeholder:r}),t==="number"&&i.jsx("input",{type:"number",className:"flex-1 min-w-0 text-xs rounded border border-gray-300 dark:border-gray-600 px-2 py-1",value:e,onChange:o,placeholder:r}),t==="boolean"&&i.jsxs("select",{className:"flex-1 min-w-0 text-xs rounded border border-gray-300 dark:border-gray-600 px-2 py-1",value:String(e),onChange:a=>n(a.target.value==="true","boolean"),children:[i.jsx("option",{value:"true",children:"True"}),i.jsx("option",{value:"false",children:"False"})]}),(t==="null"||t==="nan")&&i.jsx("div",{className:"flex-1 min-w-0 text-xs rounded border border-gray-300 dark:border-gray-600 px-2 py-1 bg-gray-100 dark:bg-gray-800 text-gray-500 italic flex items-center",children:t==="null"?"None / Null":"NaN"})]})},aM=({item:e,onChange:t,onDelete:n})=>i.jsxs("div",{className:"p-2 border rounded-md bg-gray-50 dark:bg-gray-800/50 border-gray-200 dark:border-gray-700 flex flex-col gap-2",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("div",{className:"text-[10px] text-gray-500 uppercase font-semibold tracking-wider",children:"Find"}),i.jsx("button",{onClick:n,className:"text-gray-400 hover:text-red-500 transition-colors p-1",children:i.jsx(Qr,{size:14})})]}),i.jsx(Dp,{value:e.old,type:e.oldType,onChange:(r,s)=>t({...e,old:r,oldType:s}),placeholder:"Value to find"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"text-gray-400",children:i.jsx(_4,{size:14,className:"rotate-90"})}),i.jsx("div",{className:"text-[10px] text-gray-500 uppercase font-semibold tracking-wider",children:"Replace With"})]}),i.jsx(Dp,{value:e.new,type:e.newType,onChange:(r,s)=>t({...e,new:r,newType:s}),placeholder:"New value"})]}),lM=({config:e,onChange:t,nodeId:n})=>{var w;const r=T.useRef(null),[s,o]=T.useState(!1),[a,l]=T.useState(!0),c=(w=Ae(n||"").find(j=>j.datasetId))==null?void 0:w.datasetId,{data:d}=Re(c),f=d?Object.values(d.columns).map(j=>j.name):[];T.useEffect(()=>{if(!r.current)return;const j=new ResizeObserver(p=>{for(const h of p)o(h.contentRect.width>400)});return j.observe(r.current),()=>j.disconnect()},[]);const m=()=>{t({...e,replacements:[...e.replacements,{old:"",new:"",oldType:"string",newType:"string"}]})},y=(j,p)=>{const h=[...e.replacements];h[j]=p,t({...e,replacements:h})},x=j=>{const p=e.replacements.filter((h,g)=>g!==j);t({...e,replacements:p})};return i.jsx("div",{ref:r,className:`flex flex-col h-full w-full bg-white dark:bg-gray-900 ${s?"overflow-hidden":"overflow-y-auto"}`,children:i.jsxs("div",{className:`flex-1 min-h-0 p-4 gap-4 ${s?"grid grid-cols-2":"flex flex-col"}`,children:[i.jsx("div",{className:`space-y-4 ${s?"overflow-y-auto pr-2":"shrink-0"}`,children:i.jsxs("div",{children:[i.jsxs("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 block",children:["Target Columns (",e.columns.length,")"]}),i.jsx(iM,{columns:f,selected:e.columns,onChange:j=>t({...e,columns:j})})]})}),i.jsxs("div",{className:`space-y-4 ${s?"overflow-y-auto pl-2 border-l border-gray-100 dark:border-gray-700":"shrink-0 pt-4 border-t border-gray-100 dark:border-gray-700"}`,children:[i.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-md border border-blue-100 dark:border-blue-800 overflow-hidden",children:[i.jsxs("button",{onClick:()=>l(!a),className:"w-full flex items-center gap-2 p-3 text-left hover:bg-blue-100/50 dark:hover:bg-blue-900/30 transition-colors",children:[i.jsx(to,{className:"text-blue-600 dark:text-blue-400 shrink-0",size:16}),i.jsx("span",{className:"text-xs font-semibold text-blue-800 dark:text-blue-200 flex-1",children:"About Value Replacement"}),a?i.jsx(Wr,{size:14,className:"text-blue-600 dark:text-blue-400"}):i.jsx(sn,{size:14,className:"text-blue-600 dark:text-blue-400"})]}),a&&i.jsx("div",{className:"px-3 pb-3 text-xs text-blue-800 dark:text-blue-200 pl-9",children:i.jsx("p",{children:'Replace specific values with new ones. Useful for fixing typos, recoding categories (e.g., "Yes" to 1), or handling specific placeholders.'})})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Value Mappings"}),i.jsxs("button",{onClick:m,className:"flex items-center gap-1 text-xs font-medium text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300",children:[i.jsx(Ri,{size:14}),"Add Mapping"]})]}),i.jsx("div",{className:"space-y-3",children:e.replacements.length===0?i.jsxs("div",{className:"text-center p-6 border-2 border-dashed border-gray-200 dark:border-gray-700 rounded-lg",children:[i.jsx("p",{className:"text-xs text-gray-500",children:"No replacements defined."}),i.jsx("button",{onClick:m,className:"mt-2 text-xs text-blue-600 hover:underline",children:"Add your first replacement"})]}):e.replacements.map((j,p)=>i.jsx(aM,{item:j,onChange:h=>y(p,h),onDelete:()=>x(p)},p))})]})]})})},uM={type:"ValueReplacement",label:"Value Replacement",category:"Preprocessing",description:"Replace specific values in columns.",icon:G4,inputs:[{id:"in",label:"Data",type:"dataset"}],outputs:[{id:"out",label:"Processed Data",type:"dataset"}],settings:lM,validate:e=>e.columns.length===0?{isValid:!1,message:"Select at least one column."}:e.replacements.length===0?{isValid:!1,message:"Add at least one replacement."}:{isValid:!0},getDefaultConfig:()=>({columns:[],replacements:[{old:"",new:"",oldType:"string",newType:"string"}]})},cM=({columns:e,selected:t,onChange:n})=>{const[r,s]=T.useState(""),o=e.filter(l=>l.toLowerCase().includes(r.toLowerCase())),a=l=>{t.includes(l)?n(t.filter(u=>u!==l)):n([...t,l])};return i.jsxs("div",{className:"border rounded bg-background overflow-hidden flex flex-col max-h-40",children:[i.jsxs("div",{className:"flex items-center px-2 py-1.5 border-b bg-muted/20",children:[i.jsx(qr,{size:12,className:"text-muted-foreground mr-1.5"}),i.jsx("input",{className:"flex-1 bg-transparent text-xs outline-none placeholder:text-muted-foreground/70",placeholder:"Search columns...",value:r,onChange:l=>s(l.target.value)})]}),i.jsx("div",{className:"overflow-y-auto p-1 space-y-0.5",children:o.length>0?o.map(l=>{const u=t.includes(l);return i.jsxs("div",{onClick:()=>a(l),className:`
                  flex items-center gap-2 px-2 py-1.5 rounded text-xs cursor-pointer transition-colors
                  ${u?"bg-blue-50 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300 font-medium":"hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-700 dark:text-gray-300"}
                `,children:[i.jsx("div",{className:`
                  w-3 h-3 rounded border flex items-center justify-center
                  ${u?"border-blue-500 bg-blue-500 text-white":"border-gray-400 dark:border-gray-600"}
                `,children:u&&i.jsx("div",{className:"w-1.5 h-1.5 bg-white rounded-full"})}),i.jsx("span",{className:"truncate",children:l})]},l)}):i.jsx("div",{className:"p-2 text-xs text-gray-500 text-center italic",children:"No columns found"})})]})},dM=({pairs:e,onChange:t})=>{const[n,r]=T.useState(""),[s,o]=T.useState(""),a=()=>{n&&s&&(t({...e,[n]:s}),r(""),o(""))},l=u=>{const c={...e};delete c[u],t(c)};return i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex gap-2 items-end",children:[i.jsxs("div",{className:"flex-1 space-y-1",children:[i.jsx("label",{className:"text-[10px] text-gray-500 uppercase font-semibold",children:"Alias (Old)"}),i.jsx("input",{className:"w-full text-xs rounded border border-gray-300 dark:border-gray-600 px-2 py-1.5",placeholder:"e.g. NY",value:n,onChange:u=>r(u.target.value)})]}),i.jsxs("div",{className:"flex-1 space-y-1",children:[i.jsx("label",{className:"text-[10px] text-gray-500 uppercase font-semibold",children:"Canonical (New)"}),i.jsx("input",{className:"w-full text-xs rounded border border-gray-300 dark:border-gray-600 px-2 py-1.5",placeholder:"e.g. New York",value:s,onChange:u=>o(u.target.value),onKeyDown:u=>u.key==="Enter"&&a()})]}),i.jsx("button",{onClick:a,disabled:!n||!s,className:"p-1.5 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:i.jsx(Ri,{size:16})})]}),i.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto border rounded-md p-2 bg-gray-50 dark:bg-gray-800/50",children:Object.entries(e).length===0?i.jsx("div",{className:"text-center text-xs text-gray-500 py-2",children:"No custom aliases defined."}):Object.entries(e).map(([u,c])=>i.jsxs("div",{className:"flex items-center justify-between bg-white dark:bg-gray-800 p-2 rounded border border-gray-200 dark:border-gray-700 text-xs",children:[i.jsxs("div",{className:"flex items-center gap-2 overflow-hidden",children:[i.jsx("span",{className:"font-medium text-red-600 truncate max-w-[80px]",children:u}),i.jsx(cv,{size:12,className:"text-gray-400 shrink-0"}),i.jsx("span",{className:"font-medium text-green-600 truncate max-w-[80px]",children:c})]}),i.jsx("button",{onClick:()=>l(u),className:"text-gray-400 hover:text-red-500",children:i.jsx(Qr,{size:14})})]},u))})]})},fM=({config:e,onChange:t,nodeId:n})=>{var m;const r=T.useRef(null),[s,o]=T.useState(!1),[a,l]=T.useState(!0),c=(m=Ae(n||"").find(y=>y.datasetId))==null?void 0:m.datasetId,{data:d}=Re(c),f=d?Object.values(d.columns).filter(y=>y.dtype==="object"||y.dtype==="string"||y.dtype==="category").map(y=>y.name):[];return T.useEffect(()=>{if(!r.current)return;const y=new ResizeObserver(x=>{for(const w of x)o(w.contentRect.width>400)});return y.observe(r.current),()=>y.disconnect()},[]),i.jsx("div",{ref:r,className:`flex flex-col h-full w-full bg-white dark:bg-gray-900 ${s?"overflow-hidden":"overflow-y-auto"}`,children:i.jsxs("div",{className:`flex-1 min-h-0 p-4 gap-4 ${s?"grid grid-cols-2":"flex flex-col"}`,children:[i.jsx("div",{className:`space-y-4 ${s?"overflow-y-auto pr-2":"shrink-0"}`,children:i.jsxs("div",{children:[i.jsxs("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 block",children:["Target Columns (",e.columns.length,")"]}),i.jsx(cM,{columns:f,selected:e.columns,onChange:y=>t({...e,columns:y})}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Only text/categorical columns are shown."})]})}),i.jsxs("div",{className:`space-y-4 ${s?"overflow-y-auto pl-2 border-l border-gray-100 dark:border-gray-700":"shrink-0 pt-4 border-t border-gray-100 dark:border-gray-700"}`,children:[i.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-md border border-blue-100 dark:border-blue-800 overflow-hidden",children:[i.jsxs("button",{onClick:()=>l(!a),className:"w-full flex items-center gap-2 p-3 text-left hover:bg-blue-100/50 dark:hover:bg-blue-900/30 transition-colors",children:[i.jsx(to,{className:"text-blue-600 dark:text-blue-400 shrink-0",size:16}),i.jsx("span",{className:"text-xs font-semibold text-blue-800 dark:text-blue-200 flex-1",children:"About Alias Replacement"}),a?i.jsx(Wr,{size:14,className:"text-blue-600 dark:text-blue-400"}):i.jsx(sn,{size:14,className:"text-blue-600 dark:text-blue-400"})]}),a&&i.jsx("div",{className:"px-3 pb-3 text-xs text-blue-800 dark:text-blue-200 pl-9",children:i.jsx("p",{children:"Standardize data by mapping multiple variations (aliases) to a single canonical value. Useful for country codes, boolean strings, or custom synonyms."})})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 block",children:"Replacement Mode"}),i.jsxs("select",{className:"w-full text-xs rounded border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 p-2",value:e.mode,onChange:y=>t({...e,mode:y.target.value}),children:[i.jsx("option",{value:"custom",children:"Custom Mapping"}),i.jsx("option",{value:"canonicalize_country_codes",children:"Canonicalize Country Codes"}),i.jsx("option",{value:"normalize_boolean",children:"Normalize Booleans (yes/no -> True/False)"}),i.jsx("option",{value:"punctuation",children:"Remove Punctuation"})]}),i.jsxs("p",{className:"text-[10px] text-gray-500 mt-1",children:[e.mode==="custom"&&"Define your own alias mappings below.",e.mode==="canonicalize_country_codes"&&"Standardizes country codes (e.g. 'USA', 'U.S.A.' -> 'US').",e.mode==="normalize_boolean"&&"Converts 'yes', 'y', '1' to True and 'no', 'n', '0' to False.",e.mode==="punctuation"&&"Removes common punctuation characters from text."]})]}),e.mode==="custom"&&i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 block",children:"Custom Aliases"}),i.jsx(dM,{pairs:e.custom_pairs,onChange:y=>t({...e,custom_pairs:y})})]})]})]})})},mM={type:"AliasReplacement",label:"Alias Replacement",category:"Preprocessing",description:"Standardize values by mapping aliases to canonical forms.",icon:cv,inputs:[{id:"in",label:"Data",type:"dataset"}],outputs:[{id:"out",label:"Standardized Data",type:"dataset"}],settings:fM,validate:e=>e.columns.length===0?{isValid:!1,message:"Select at least one column."}:e.mode==="custom"&&Object.keys(e.custom_pairs).length===0?{isValid:!1,message:"Add at least one alias pair for custom mode."}:{isValid:!0},getDefaultConfig:()=>({columns:[],mode:"custom",custom_pairs:{}})},hM=({columns:e,selected:t,onChange:n})=>{const[r,s]=T.useState(""),o=e.filter(l=>l.toLowerCase().includes(r.toLowerCase())),a=l=>{t.includes(l)?n(t.filter(u=>u!==l)):n([...t,l])};return i.jsxs("div",{className:"border rounded bg-background overflow-hidden flex flex-col max-h-40",children:[i.jsxs("div",{className:"flex items-center px-2 py-1.5 border-b bg-muted/20",children:[i.jsx(qr,{size:12,className:"text-muted-foreground mr-1.5"}),i.jsx("input",{className:"flex-1 bg-transparent text-xs outline-none placeholder:text-muted-foreground/70",placeholder:"Search columns...",value:r,onChange:l=>s(l.target.value)})]}),i.jsx("div",{className:"overflow-y-auto p-1 space-y-0.5",children:o.length>0?o.map(l=>{const u=t.includes(l);return i.jsxs("div",{onClick:()=>a(l),className:`
                  flex items-center gap-2 px-2 py-1.5 rounded text-xs cursor-pointer transition-colors
                  ${u?"bg-blue-50 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300 font-medium":"hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-700 dark:text-gray-300"}
                `,children:[i.jsx("div",{className:`
                  w-3 h-3 rounded border flex items-center justify-center
                  ${u?"border-blue-500 bg-blue-500 text-white":"border-gray-400 dark:border-gray-600"}
                `,children:u&&i.jsx("div",{className:"w-1.5 h-1.5 bg-white rounded-full"})}),i.jsx("span",{className:"truncate",children:l})]},l)}):i.jsx("div",{className:"p-2 text-xs text-gray-500 text-center italic",children:"No columns found"})})]})},pM=({config:e,onChange:t,nodeId:n})=>{var m;const r=T.useRef(null),[s,o]=T.useState(!1),[a,l]=T.useState(!0),c=(m=Ae(n||"").find(y=>y.datasetId))==null?void 0:m.datasetId,{data:d}=Re(c),f=d?Object.values(d.columns).filter(y=>["int","float","number"].some(x=>{var w;return(w=y.dtype)==null?void 0:w.toLowerCase().includes(x)})).map(y=>y.name):[];return T.useEffect(()=>{if(!r.current)return;const y=new ResizeObserver(x=>{for(const w of x)o(w.contentRect.width>400)});return y.observe(r.current),()=>y.disconnect()},[]),i.jsx("div",{ref:r,className:`flex flex-col h-full w-full bg-white dark:bg-gray-900 ${s?"overflow-hidden":"overflow-y-auto"}`,children:i.jsxs("div",{className:`flex-1 min-h-0 p-4 gap-4 ${s?"grid grid-cols-2":"flex flex-col"}`,children:[i.jsx("div",{className:`space-y-4 ${s?"overflow-y-auto pr-2":"shrink-0"}`,children:i.jsxs("div",{children:[i.jsxs("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 block",children:["Target Columns (",e.columns.length,")"]}),i.jsx(hM,{columns:f,selected:e.columns,onChange:y=>t({...e,columns:y})}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Only numeric columns are shown."})]})}),i.jsxs("div",{className:`space-y-4 ${s?"overflow-y-auto pl-2 border-l border-gray-100 dark:border-gray-700":"shrink-0 pt-4 border-t border-gray-100 dark:border-gray-700"}`,children:[i.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-md border border-blue-100 dark:border-blue-800 overflow-hidden",children:[i.jsxs("button",{onClick:()=>l(!a),className:"w-full flex items-center gap-2 p-3 text-left hover:bg-blue-100/50 dark:hover:bg-blue-900/30 transition-colors",children:[i.jsx(to,{className:"text-blue-600 dark:text-blue-400 shrink-0",size:16}),i.jsx("span",{className:"text-xs font-semibold text-blue-800 dark:text-blue-200 flex-1",children:"About Invalid Value Replacement"}),a?i.jsx(Wr,{size:14,className:"text-blue-600 dark:text-blue-400"}):i.jsx(sn,{size:14,className:"text-blue-600 dark:text-blue-400"})]}),a&&i.jsx("div",{className:"px-3 pb-3 text-xs text-blue-800 dark:text-blue-200 pl-9",children:i.jsx("p",{children:"Use this node to handle data quality issues by replacing invalid numeric values (like negative ages or out-of-bounds sensor readings) with NaN (Missing)."})})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 block",children:"Replacement Mode"}),i.jsxs("select",{className:"w-full text-xs rounded border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 p-2",value:e.mode,onChange:y=>t({...e,mode:y.target.value}),children:[i.jsx("option",{value:"negative_to_nan",children:"Negative to NaN"}),i.jsx("option",{value:"zero_to_nan",children:"Zero to NaN"}),i.jsx("option",{value:"percentage_bounds",children:"Percentage Bounds (0-100)"}),i.jsx("option",{value:"age_bounds",children:"Age Bounds (0-120)"}),i.jsx("option",{value:"custom_range",children:"Custom Range"})]}),i.jsxs("p",{className:"text-[10px] text-gray-500 mt-1",children:[e.mode==="negative_to_nan"&&"Replaces all negative values (< 0) with NaN.",e.mode==="zero_to_nan"&&"Replaces all zero values (== 0) with NaN.",e.mode==="percentage_bounds"&&"Replaces values outside 0-100 range with NaN.",e.mode==="age_bounds"&&"Replaces values outside 0-120 range with NaN.",e.mode==="custom_range"&&"Replaces values outside the specified Min/Max range with NaN."]})]}),(e.mode==="custom_range"||e.mode==="percentage_bounds"||e.mode==="age_bounds")&&i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-[10px] text-gray-500 uppercase font-semibold",children:"Min Value"}),i.jsx("input",{type:"number",className:"w-full text-xs rounded border border-gray-300 dark:border-gray-600 px-2 py-1.5",placeholder:e.mode==="percentage_bounds"?"0":"Min",value:e.min_value??"",onChange:y=>t({...e,min_value:y.target.value?parseFloat(y.target.value):void 0})})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-[10px] text-gray-500 uppercase font-semibold",children:"Max Value"}),i.jsx("input",{type:"number",className:"w-full text-xs rounded border border-gray-300 dark:border-gray-600 px-2 py-1.5",placeholder:e.mode==="percentage_bounds"?"100":"Max",value:e.max_value??"",onChange:y=>t({...e,max_value:y.target.value?parseFloat(y.target.value):void 0})})]}),i.jsx("p",{className:"col-span-2 text-[10px] text-gray-500",children:"Values outside this range will be replaced with NaN."})]})]})]})})},gM={type:"InvalidValueReplacement",label:"Invalid Value Replacement",category:"Preprocessing",description:"Replace invalid or out-of-range values with NaN.",icon:o3,inputs:[{id:"in",label:"Data",type:"dataset"}],outputs:[{id:"out",label:"Cleaned Data",type:"dataset"}],settings:pM,validate:e=>e.columns.length===0?{isValid:!1,message:"Select at least one column."}:e.mode==="custom_range"&&e.min_value===void 0&&e.max_value===void 0?{isValid:!1,message:"Specify at least a min or max value for custom range."}:{isValid:!0},getDefaultConfig:()=>({columns:[],mode:"negative_to_nan"})},xM=()=>{pe.register(oR),pe.register(lR),pe.register(cR),pe.register(fR),pe.register(hR),pe.register(zR),pe.register(VR),pe.register(UR),pe.register(XR),pe.register(tM),pe.register(oM),pe.register(uM),pe.register(mM),pe.register(gM),pe.register(AR),pe.register(bR),pe.register(NR),pe.register(kR),pe.register(SR),pe.register(ER),pe.register(MR),pe.register(IR),pe.register(gR),pe.register(yR),console.log("[Registry] Initialization complete. Total nodes:",pe.getAll().length)};xM();const yM=new VN;Bu.createRoot(document.getElementById("root")).render(i.jsx(zt.StrictMode,{children:i.jsx(BN,{client:yM,children:i.jsx(rR,{})})}));
