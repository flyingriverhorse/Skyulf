var s1=Object.defineProperty;var em=e=>{throw TypeError(e)};var a1=(e,t,n)=>t in e?s1(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var ic=(e,t,n)=>a1(e,typeof t!="symbol"?t+"":t,n),lc=(e,t,n)=>t.has(e)||em("Cannot "+n);var D=(e,t,n)=>(lc(e,t,"read from private field"),n?n.call(e):t.get(e)),te=(e,t,n)=>t.has(e)?em("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),Q=(e,t,n,r)=>(lc(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),ce=(e,t,n)=>(lc(e,t,"access private method"),n);var Uo=(e,t,n,r)=>({set _(s){Q(e,t,s,n)},get _(){return D(e,t,r)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();function eg(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var tg={exports:{}},jl={},ng={exports:{}},le={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jo=Symbol.for("react.element"),o1=Symbol.for("react.portal"),i1=Symbol.for("react.fragment"),l1=Symbol.for("react.strict_mode"),c1=Symbol.for("react.profiler"),u1=Symbol.for("react.provider"),d1=Symbol.for("react.context"),f1=Symbol.for("react.forward_ref"),m1=Symbol.for("react.suspense"),h1=Symbol.for("react.memo"),p1=Symbol.for("react.lazy"),tm=Symbol.iterator;function g1(e){return e===null||typeof e!="object"?null:(e=tm&&e[tm]||e["@@iterator"],typeof e=="function"?e:null)}var rg={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},sg=Object.assign,ag={};function ea(e,t,n){this.props=e,this.context=t,this.refs=ag,this.updater=n||rg}ea.prototype.isReactComponent={};ea.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};ea.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function og(){}og.prototype=ea.prototype;function wd(e,t,n){this.props=e,this.context=t,this.refs=ag,this.updater=n||rg}var Nd=wd.prototype=new og;Nd.constructor=wd;sg(Nd,ea.prototype);Nd.isPureReactComponent=!0;var nm=Array.isArray,ig=Object.prototype.hasOwnProperty,jd={current:null},lg={key:!0,ref:!0,__self:!0,__source:!0};function cg(e,t,n){var r,s={},o=null,i=null;if(t!=null)for(r in t.ref!==void 0&&(i=t.ref),t.key!==void 0&&(o=""+t.key),t)ig.call(t,r)&&!lg.hasOwnProperty(r)&&(s[r]=t[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:jo,type:e,key:o,ref:i,props:s,_owner:jd.current}}function x1(e,t){return{$$typeof:jo,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function kd(e){return typeof e=="object"&&e!==null&&e.$$typeof===jo}function y1(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var rm=/\/+/g;function cc(e,t){return typeof e=="object"&&e!==null&&e.key!=null?y1(""+e.key):t.toString(36)}function vi(e,t,n,r,s){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var i=!1;if(e===null)i=!0;else switch(o){case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case jo:case o1:i=!0}}if(i)return i=e,s=s(i),e=r===""?"."+cc(i,0):r,nm(s)?(n="",e!=null&&(n=e.replace(rm,"$&/")+"/"),vi(s,t,n,"",function(u){return u})):s!=null&&(kd(s)&&(s=x1(s,n+(!s.key||i&&i.key===s.key?"":(""+s.key).replace(rm,"$&/")+"/")+e)),t.push(s)),1;if(i=0,r=r===""?".":r+":",nm(e))for(var l=0;l<e.length;l++){o=e[l];var c=r+cc(o,l);i+=vi(o,t,n,c,s)}else if(c=g1(e),typeof c=="function")for(e=c.call(e),l=0;!(o=e.next()).done;)o=o.value,c=r+cc(o,l++),i+=vi(o,t,n,c,s);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return i}function Wo(e,t,n){if(e==null)return e;var r=[],s=0;return vi(e,r,"","",function(o){return t.call(n,o,s++)}),r}function v1(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var tt={current:null},bi={transition:null},b1={ReactCurrentDispatcher:tt,ReactCurrentBatchConfig:bi,ReactCurrentOwner:jd};function ug(){throw Error("act(...) is not supported in production builds of React.")}le.Children={map:Wo,forEach:function(e,t,n){Wo(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Wo(e,function(){t++}),t},toArray:function(e){return Wo(e,function(t){return t})||[]},only:function(e){if(!kd(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};le.Component=ea;le.Fragment=i1;le.Profiler=c1;le.PureComponent=wd;le.StrictMode=l1;le.Suspense=m1;le.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=b1;le.act=ug;le.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=sg({},e.props),s=e.key,o=e.ref,i=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,i=jd.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)ig.call(t,c)&&!lg.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:jo,type:e.type,key:s,ref:o,props:r,_owner:i}};le.createContext=function(e){return e={$$typeof:d1,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:u1,_context:e},e.Consumer=e};le.createElement=cg;le.createFactory=function(e){var t=cg.bind(null,e);return t.type=e,t};le.createRef=function(){return{current:null}};le.forwardRef=function(e){return{$$typeof:f1,render:e}};le.isValidElement=kd;le.lazy=function(e){return{$$typeof:p1,_payload:{_status:-1,_result:e},_init:v1}};le.memo=function(e,t){return{$$typeof:h1,type:e,compare:t===void 0?null:t}};le.startTransition=function(e){var t=bi.transition;bi.transition={};try{e()}finally{bi.transition=t}};le.unstable_act=ug;le.useCallback=function(e,t){return tt.current.useCallback(e,t)};le.useContext=function(e){return tt.current.useContext(e)};le.useDebugValue=function(){};le.useDeferredValue=function(e){return tt.current.useDeferredValue(e)};le.useEffect=function(e,t){return tt.current.useEffect(e,t)};le.useId=function(){return tt.current.useId()};le.useImperativeHandle=function(e,t,n){return tt.current.useImperativeHandle(e,t,n)};le.useInsertionEffect=function(e,t){return tt.current.useInsertionEffect(e,t)};le.useLayoutEffect=function(e,t){return tt.current.useLayoutEffect(e,t)};le.useMemo=function(e,t){return tt.current.useMemo(e,t)};le.useReducer=function(e,t,n){return tt.current.useReducer(e,t,n)};le.useRef=function(e){return tt.current.useRef(e)};le.useState=function(e){return tt.current.useState(e)};le.useSyncExternalStore=function(e,t,n){return tt.current.useSyncExternalStore(e,t,n)};le.useTransition=function(){return tt.current.useTransition()};le.version="18.3.1";ng.exports=le;var S=ng.exports;const nn=eg(S);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var w1=S,N1=Symbol.for("react.element"),j1=Symbol.for("react.fragment"),k1=Object.prototype.hasOwnProperty,_1=w1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,S1={key:!0,ref:!0,__self:!0,__source:!0};function dg(e,t,n){var r,s={},o=null,i=null;n!==void 0&&(o=""+n),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(i=t.ref);for(r in t)k1.call(t,r)&&!S1.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:N1,type:e,key:o,ref:i,props:s,_owner:_1.current}}jl.Fragment=j1;jl.jsx=dg;jl.jsxs=dg;tg.exports=jl;var a=tg.exports,Xc={},fg={exports:{}},bt={},mg={exports:{}},hg={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(R,I){var F=R.length;R.push(I);e:for(;0<F;){var V=F-1>>>1,H=R[V];if(0<s(H,I))R[V]=I,R[F]=H,F=V;else break e}}function n(R){return R.length===0?null:R[0]}function r(R){if(R.length===0)return null;var I=R[0],F=R.pop();if(F!==I){R[0]=F;e:for(var V=0,H=R.length,q=H>>>1;V<q;){var U=2*(V+1)-1,Y=R[U],G=U+1,Z=R[G];if(0>s(Y,F))G<H&&0>s(Z,Y)?(R[V]=Z,R[G]=F,V=G):(R[V]=Y,R[U]=F,V=U);else if(G<H&&0>s(Z,F))R[V]=Z,R[G]=F,V=G;else break e}}return I}function s(R,I){var F=R.sortIndex-I.sortIndex;return F!==0?F:R.id-I.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var i=Date,l=i.now();e.unstable_now=function(){return i.now()-l}}var c=[],u=[],d=1,f=null,m=3,y=!1,p=!1,w=!1,N=typeof setTimeout=="function"?setTimeout:null,h=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(R){for(var I=n(u);I!==null;){if(I.callback===null)r(u);else if(I.startTime<=R)r(u),I.sortIndex=I.expirationTime,t(c,I);else break;I=n(u)}}function b(R){if(w=!1,x(R),!p)if(n(c)!==null)p=!0,A(j);else{var I=n(u);I!==null&&L(b,I.startTime-R)}}function j(R,I){p=!1,w&&(w=!1,h(_),_=-1),y=!0;var F=m;try{for(x(I),f=n(c);f!==null&&(!(f.expirationTime>I)||R&&!T());){var V=f.callback;if(typeof V=="function"){f.callback=null,m=f.priorityLevel;var H=V(f.expirationTime<=I);I=e.unstable_now(),typeof H=="function"?f.callback=H:f===n(c)&&r(c),x(I)}else r(c);f=n(c)}if(f!==null)var q=!0;else{var U=n(u);U!==null&&L(b,U.startTime-I),q=!1}return q}finally{f=null,m=F,y=!1}}var k=!1,v=null,_=-1,M=5,P=-1;function T(){return!(e.unstable_now()-P<M)}function C(){if(v!==null){var R=e.unstable_now();P=R;var I=!0;try{I=v(!0,R)}finally{I?O():(k=!1,v=null)}}else k=!1}var O;if(typeof g=="function")O=function(){g(C)};else if(typeof MessageChannel<"u"){var E=new MessageChannel,z=E.port2;E.port1.onmessage=C,O=function(){z.postMessage(null)}}else O=function(){N(C,0)};function A(R){v=R,k||(k=!0,O())}function L(R,I){_=N(function(){R(e.unstable_now())},I)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(R){R.callback=null},e.unstable_continueExecution=function(){p||y||(p=!0,A(j))},e.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<R?Math.floor(1e3/R):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(R){switch(m){case 1:case 2:case 3:var I=3;break;default:I=m}var F=m;m=I;try{return R()}finally{m=F}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(R,I){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var F=m;m=R;try{return I()}finally{m=F}},e.unstable_scheduleCallback=function(R,I,F){var V=e.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?V+F:V):F=V,R){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=F+H,R={id:d++,callback:I,priorityLevel:R,startTime:F,expirationTime:H,sortIndex:-1},F>V?(R.sortIndex=F,t(u,R),n(c)===null&&R===n(u)&&(w?(h(_),_=-1):w=!0,L(b,F-V))):(R.sortIndex=H,t(c,R),p||y||(p=!0,A(j))),R},e.unstable_shouldYield=T,e.unstable_wrapCallback=function(R){var I=m;return function(){var F=m;m=I;try{return R.apply(this,arguments)}finally{m=F}}}})(hg);mg.exports=hg;var C1=mg.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var E1=S,xt=C1;function B(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var pg=new Set,Ha={};function Kr(e,t){Os(e,t),Os(e+"Capture",t)}function Os(e,t){for(Ha[e]=t,e=0;e<t.length;e++)pg.add(t[e])}var wn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Yc=Object.prototype.hasOwnProperty,R1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,sm={},am={};function T1(e){return Yc.call(am,e)?!0:Yc.call(sm,e)?!1:R1.test(e)?am[e]=!0:(sm[e]=!0,!1)}function M1(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function P1(e,t,n,r){if(t===null||typeof t>"u"||M1(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function nt(e,t,n,r,s,o,i){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=i}var Ue={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ue[e]=new nt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ue[t]=new nt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ue[e]=new nt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ue[e]=new nt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ue[e]=new nt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ue[e]=new nt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ue[e]=new nt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ue[e]=new nt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ue[e]=new nt(e,5,!1,e.toLowerCase(),null,!1,!1)});var _d=/[\-:]([a-z])/g;function Sd(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(_d,Sd);Ue[t]=new nt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(_d,Sd);Ue[t]=new nt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(_d,Sd);Ue[t]=new nt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ue[e]=new nt(e,1,!1,e.toLowerCase(),null,!1,!1)});Ue.xlinkHref=new nt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ue[e]=new nt(e,1,!1,e.toLowerCase(),null,!0,!0)});function Cd(e,t,n,r){var s=Ue.hasOwnProperty(t)?Ue[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(P1(t,n,s,r)&&(n=null),r||s===null?T1(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Sn=E1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,qo=Symbol.for("react.element"),ns=Symbol.for("react.portal"),rs=Symbol.for("react.fragment"),Ed=Symbol.for("react.strict_mode"),Gc=Symbol.for("react.profiler"),gg=Symbol.for("react.provider"),xg=Symbol.for("react.context"),Rd=Symbol.for("react.forward_ref"),Jc=Symbol.for("react.suspense"),Zc=Symbol.for("react.suspense_list"),Td=Symbol.for("react.memo"),In=Symbol.for("react.lazy"),yg=Symbol.for("react.offscreen"),om=Symbol.iterator;function ma(e){return e===null||typeof e!="object"?null:(e=om&&e[om]||e["@@iterator"],typeof e=="function"?e:null)}var Ce=Object.assign,uc;function ka(e){if(uc===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);uc=t&&t[1]||""}return`
`+uc+e}var dc=!1;function fc(e,t){if(!e||dc)return"";dc=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),o=r.stack.split(`
`),i=s.length-1,l=o.length-1;1<=i&&0<=l&&s[i]!==o[l];)l--;for(;1<=i&&0<=l;i--,l--)if(s[i]!==o[l]){if(i!==1||l!==1)do if(i--,l--,0>l||s[i]!==o[l]){var c=`
`+s[i].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=i&&0<=l);break}}}finally{dc=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?ka(e):""}function I1(e){switch(e.tag){case 5:return ka(e.type);case 16:return ka("Lazy");case 13:return ka("Suspense");case 19:return ka("SuspenseList");case 0:case 2:case 15:return e=fc(e.type,!1),e;case 11:return e=fc(e.type.render,!1),e;case 1:return e=fc(e.type,!0),e;default:return""}}function eu(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case rs:return"Fragment";case ns:return"Portal";case Gc:return"Profiler";case Ed:return"StrictMode";case Jc:return"Suspense";case Zc:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case xg:return(e.displayName||"Context")+".Consumer";case gg:return(e._context.displayName||"Context")+".Provider";case Rd:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Td:return t=e.displayName||null,t!==null?t:eu(e.type)||"Memo";case In:t=e._payload,e=e._init;try{return eu(e(t))}catch{}}return null}function D1(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return eu(t);case 8:return t===Ed?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function sr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function vg(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function A1(e){var t=vg(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(i){r=""+i,o.call(this,i)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(i){r=""+i},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Qo(e){e._valueTracker||(e._valueTracker=A1(e))}function bg(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=vg(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Fi(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function tu(e,t){var n=t.checked;return Ce({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function im(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=sr(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function wg(e,t){t=t.checked,t!=null&&Cd(e,"checked",t,!1)}function nu(e,t){wg(e,t);var n=sr(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?ru(e,t.type,n):t.hasOwnProperty("defaultValue")&&ru(e,t.type,sr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function lm(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function ru(e,t,n){(t!=="number"||Fi(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var _a=Array.isArray;function gs(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+sr(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function su(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(B(91));return Ce({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function cm(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(B(92));if(_a(n)){if(1<n.length)throw Error(B(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:sr(n)}}function Ng(e,t){var n=sr(t.value),r=sr(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function um(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function jg(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function au(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?jg(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ko,kg=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Ko=Ko||document.createElement("div"),Ko.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ko.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Ba(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Ma={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},O1=["Webkit","ms","Moz","O"];Object.keys(Ma).forEach(function(e){O1.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Ma[t]=Ma[e]})});function _g(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Ma.hasOwnProperty(e)&&Ma[e]?(""+t).trim():t+"px"}function Sg(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=_g(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var L1=Ce({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ou(e,t){if(t){if(L1[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(B(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(B(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(B(61))}if(t.style!=null&&typeof t.style!="object")throw Error(B(62))}}function iu(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var lu=null;function Md(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var cu=null,xs=null,ys=null;function dm(e){if(e=So(e)){if(typeof cu!="function")throw Error(B(280));var t=e.stateNode;t&&(t=El(t),cu(e.stateNode,e.type,t))}}function Cg(e){xs?ys?ys.push(e):ys=[e]:xs=e}function Eg(){if(xs){var e=xs,t=ys;if(ys=xs=null,dm(e),t)for(e=0;e<t.length;e++)dm(t[e])}}function Rg(e,t){return e(t)}function Tg(){}var mc=!1;function Mg(e,t,n){if(mc)return e(t,n);mc=!0;try{return Rg(e,t,n)}finally{mc=!1,(xs!==null||ys!==null)&&(Tg(),Eg())}}function Ua(e,t){var n=e.stateNode;if(n===null)return null;var r=El(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(B(231,t,typeof n));return n}var uu=!1;if(wn)try{var ha={};Object.defineProperty(ha,"passive",{get:function(){uu=!0}}),window.addEventListener("test",ha,ha),window.removeEventListener("test",ha,ha)}catch{uu=!1}function z1(e,t,n,r,s,o,i,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(d){this.onError(d)}}var Pa=!1,$i=null,Vi=!1,du=null,F1={onError:function(e){Pa=!0,$i=e}};function $1(e,t,n,r,s,o,i,l,c){Pa=!1,$i=null,z1.apply(F1,arguments)}function V1(e,t,n,r,s,o,i,l,c){if($1.apply(this,arguments),Pa){if(Pa){var u=$i;Pa=!1,$i=null}else throw Error(B(198));Vi||(Vi=!0,du=u)}}function Xr(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Pg(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function fm(e){if(Xr(e)!==e)throw Error(B(188))}function H1(e){var t=e.alternate;if(!t){if(t=Xr(e),t===null)throw Error(B(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var o=s.alternate;if(o===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===n)return fm(s),e;if(o===r)return fm(s),t;o=o.sibling}throw Error(B(188))}if(n.return!==r.return)n=s,r=o;else{for(var i=!1,l=s.child;l;){if(l===n){i=!0,n=s,r=o;break}if(l===r){i=!0,r=s,n=o;break}l=l.sibling}if(!i){for(l=o.child;l;){if(l===n){i=!0,n=o,r=s;break}if(l===r){i=!0,r=o,n=s;break}l=l.sibling}if(!i)throw Error(B(189))}}if(n.alternate!==r)throw Error(B(190))}if(n.tag!==3)throw Error(B(188));return n.stateNode.current===n?e:t}function Ig(e){return e=H1(e),e!==null?Dg(e):null}function Dg(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Dg(e);if(t!==null)return t;e=e.sibling}return null}var Ag=xt.unstable_scheduleCallback,mm=xt.unstable_cancelCallback,B1=xt.unstable_shouldYield,U1=xt.unstable_requestPaint,Me=xt.unstable_now,W1=xt.unstable_getCurrentPriorityLevel,Pd=xt.unstable_ImmediatePriority,Og=xt.unstable_UserBlockingPriority,Hi=xt.unstable_NormalPriority,q1=xt.unstable_LowPriority,Lg=xt.unstable_IdlePriority,kl=null,rn=null;function Q1(e){if(rn&&typeof rn.onCommitFiberRoot=="function")try{rn.onCommitFiberRoot(kl,e,void 0,(e.current.flags&128)===128)}catch{}}var Vt=Math.clz32?Math.clz32:Y1,K1=Math.log,X1=Math.LN2;function Y1(e){return e>>>=0,e===0?32:31-(K1(e)/X1|0)|0}var Xo=64,Yo=4194304;function Sa(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Bi(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,o=e.pingedLanes,i=n&268435455;if(i!==0){var l=i&~s;l!==0?r=Sa(l):(o&=i,o!==0&&(r=Sa(o)))}else i=n&~s,i!==0?r=Sa(i):o!==0&&(r=Sa(o));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,o=t&-t,s>=o||s===16&&(o&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Vt(t),s=1<<n,r|=e[n],t&=~s;return r}function G1(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function J1(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,o=e.pendingLanes;0<o;){var i=31-Vt(o),l=1<<i,c=s[i];c===-1?(!(l&n)||l&r)&&(s[i]=G1(l,t)):c<=t&&(e.expiredLanes|=l),o&=~l}}function fu(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function zg(){var e=Xo;return Xo<<=1,!(Xo&4194240)&&(Xo=64),e}function hc(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function ko(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Vt(t),e[t]=n}function Z1(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-Vt(n),o=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~o}}function Id(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Vt(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var xe=0;function Fg(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var $g,Dd,Vg,Hg,Bg,mu=!1,Go=[],Kn=null,Xn=null,Yn=null,Wa=new Map,qa=new Map,An=[],ew="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function hm(e,t){switch(e){case"focusin":case"focusout":Kn=null;break;case"dragenter":case"dragleave":Xn=null;break;case"mouseover":case"mouseout":Yn=null;break;case"pointerover":case"pointerout":Wa.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":qa.delete(t.pointerId)}}function pa(e,t,n,r,s,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[s]},t!==null&&(t=So(t),t!==null&&Dd(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function tw(e,t,n,r,s){switch(t){case"focusin":return Kn=pa(Kn,e,t,n,r,s),!0;case"dragenter":return Xn=pa(Xn,e,t,n,r,s),!0;case"mouseover":return Yn=pa(Yn,e,t,n,r,s),!0;case"pointerover":var o=s.pointerId;return Wa.set(o,pa(Wa.get(o)||null,e,t,n,r,s)),!0;case"gotpointercapture":return o=s.pointerId,qa.set(o,pa(qa.get(o)||null,e,t,n,r,s)),!0}return!1}function Ug(e){var t=gr(e.target);if(t!==null){var n=Xr(t);if(n!==null){if(t=n.tag,t===13){if(t=Pg(n),t!==null){e.blockedOn=t,Bg(e.priority,function(){Vg(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function wi(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=hu(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);lu=r,n.target.dispatchEvent(r),lu=null}else return t=So(n),t!==null&&Dd(t),e.blockedOn=n,!1;t.shift()}return!0}function pm(e,t,n){wi(e)&&n.delete(t)}function nw(){mu=!1,Kn!==null&&wi(Kn)&&(Kn=null),Xn!==null&&wi(Xn)&&(Xn=null),Yn!==null&&wi(Yn)&&(Yn=null),Wa.forEach(pm),qa.forEach(pm)}function ga(e,t){e.blockedOn===t&&(e.blockedOn=null,mu||(mu=!0,xt.unstable_scheduleCallback(xt.unstable_NormalPriority,nw)))}function Qa(e){function t(s){return ga(s,e)}if(0<Go.length){ga(Go[0],e);for(var n=1;n<Go.length;n++){var r=Go[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Kn!==null&&ga(Kn,e),Xn!==null&&ga(Xn,e),Yn!==null&&ga(Yn,e),Wa.forEach(t),qa.forEach(t),n=0;n<An.length;n++)r=An[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<An.length&&(n=An[0],n.blockedOn===null);)Ug(n),n.blockedOn===null&&An.shift()}var vs=Sn.ReactCurrentBatchConfig,Ui=!0;function rw(e,t,n,r){var s=xe,o=vs.transition;vs.transition=null;try{xe=1,Ad(e,t,n,r)}finally{xe=s,vs.transition=o}}function sw(e,t,n,r){var s=xe,o=vs.transition;vs.transition=null;try{xe=4,Ad(e,t,n,r)}finally{xe=s,vs.transition=o}}function Ad(e,t,n,r){if(Ui){var s=hu(e,t,n,r);if(s===null)kc(e,t,r,Wi,n),hm(e,r);else if(tw(s,e,t,n,r))r.stopPropagation();else if(hm(e,r),t&4&&-1<ew.indexOf(e)){for(;s!==null;){var o=So(s);if(o!==null&&$g(o),o=hu(e,t,n,r),o===null&&kc(e,t,r,Wi,n),o===s)break;s=o}s!==null&&r.stopPropagation()}else kc(e,t,r,null,n)}}var Wi=null;function hu(e,t,n,r){if(Wi=null,e=Md(r),e=gr(e),e!==null)if(t=Xr(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Pg(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Wi=e,null}function Wg(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(W1()){case Pd:return 1;case Og:return 4;case Hi:case q1:return 16;case Lg:return 536870912;default:return 16}default:return 16}}var qn=null,Od=null,Ni=null;function qg(){if(Ni)return Ni;var e,t=Od,n=t.length,r,s="value"in qn?qn.value:qn.textContent,o=s.length;for(e=0;e<n&&t[e]===s[e];e++);var i=n-e;for(r=1;r<=i&&t[n-r]===s[o-r];r++);return Ni=s.slice(e,1<r?1-r:void 0)}function ji(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Jo(){return!0}function gm(){return!1}function wt(e){function t(n,r,s,o,i){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=o,this.target=i,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(o):o[l]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Jo:gm,this.isPropagationStopped=gm,this}return Ce(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Jo)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Jo)},persist:function(){},isPersistent:Jo}),t}var ta={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ld=wt(ta),_o=Ce({},ta,{view:0,detail:0}),aw=wt(_o),pc,gc,xa,_l=Ce({},_o,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==xa&&(xa&&e.type==="mousemove"?(pc=e.screenX-xa.screenX,gc=e.screenY-xa.screenY):gc=pc=0,xa=e),pc)},movementY:function(e){return"movementY"in e?e.movementY:gc}}),xm=wt(_l),ow=Ce({},_l,{dataTransfer:0}),iw=wt(ow),lw=Ce({},_o,{relatedTarget:0}),xc=wt(lw),cw=Ce({},ta,{animationName:0,elapsedTime:0,pseudoElement:0}),uw=wt(cw),dw=Ce({},ta,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),fw=wt(dw),mw=Ce({},ta,{data:0}),ym=wt(mw),hw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},pw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},gw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xw(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=gw[e])?!!t[e]:!1}function zd(){return xw}var yw=Ce({},_o,{key:function(e){if(e.key){var t=hw[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ji(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?pw[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(e){return e.type==="keypress"?ji(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ji(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),vw=wt(yw),bw=Ce({},_l,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),vm=wt(bw),ww=Ce({},_o,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Nw=wt(ww),jw=Ce({},ta,{propertyName:0,elapsedTime:0,pseudoElement:0}),kw=wt(jw),_w=Ce({},_l,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Sw=wt(_w),Cw=[9,13,27,32],Fd=wn&&"CompositionEvent"in window,Ia=null;wn&&"documentMode"in document&&(Ia=document.documentMode);var Ew=wn&&"TextEvent"in window&&!Ia,Qg=wn&&(!Fd||Ia&&8<Ia&&11>=Ia),bm=" ",wm=!1;function Kg(e,t){switch(e){case"keyup":return Cw.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Xg(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ss=!1;function Rw(e,t){switch(e){case"compositionend":return Xg(t);case"keypress":return t.which!==32?null:(wm=!0,bm);case"textInput":return e=t.data,e===bm&&wm?null:e;default:return null}}function Tw(e,t){if(ss)return e==="compositionend"||!Fd&&Kg(e,t)?(e=qg(),Ni=Od=qn=null,ss=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Qg&&t.locale!=="ko"?null:t.data;default:return null}}var Mw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Nm(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Mw[e.type]:t==="textarea"}function Yg(e,t,n,r){Cg(r),t=qi(t,"onChange"),0<t.length&&(n=new Ld("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Da=null,Ka=null;function Pw(e){i0(e,0)}function Sl(e){var t=is(e);if(bg(t))return e}function Iw(e,t){if(e==="change")return t}var Gg=!1;if(wn){var yc;if(wn){var vc="oninput"in document;if(!vc){var jm=document.createElement("div");jm.setAttribute("oninput","return;"),vc=typeof jm.oninput=="function"}yc=vc}else yc=!1;Gg=yc&&(!document.documentMode||9<document.documentMode)}function km(){Da&&(Da.detachEvent("onpropertychange",Jg),Ka=Da=null)}function Jg(e){if(e.propertyName==="value"&&Sl(Ka)){var t=[];Yg(t,Ka,e,Md(e)),Mg(Pw,t)}}function Dw(e,t,n){e==="focusin"?(km(),Da=t,Ka=n,Da.attachEvent("onpropertychange",Jg)):e==="focusout"&&km()}function Aw(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Sl(Ka)}function Ow(e,t){if(e==="click")return Sl(t)}function Lw(e,t){if(e==="input"||e==="change")return Sl(t)}function zw(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Bt=typeof Object.is=="function"?Object.is:zw;function Xa(e,t){if(Bt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Yc.call(t,s)||!Bt(e[s],t[s]))return!1}return!0}function _m(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Sm(e,t){var n=_m(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=_m(n)}}function Zg(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Zg(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function e0(){for(var e=window,t=Fi();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Fi(e.document)}return t}function $d(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Fw(e){var t=e0(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Zg(n.ownerDocument.documentElement,n)){if(r!==null&&$d(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,o=Math.min(r.start,s);r=r.end===void 0?o:Math.min(r.end,s),!e.extend&&o>r&&(s=r,r=o,o=s),s=Sm(n,o);var i=Sm(n,r);s&&i&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var $w=wn&&"documentMode"in document&&11>=document.documentMode,as=null,pu=null,Aa=null,gu=!1;function Cm(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;gu||as==null||as!==Fi(r)||(r=as,"selectionStart"in r&&$d(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Aa&&Xa(Aa,r)||(Aa=r,r=qi(pu,"onSelect"),0<r.length&&(t=new Ld("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=as)))}function Zo(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var os={animationend:Zo("Animation","AnimationEnd"),animationiteration:Zo("Animation","AnimationIteration"),animationstart:Zo("Animation","AnimationStart"),transitionend:Zo("Transition","TransitionEnd")},bc={},t0={};wn&&(t0=document.createElement("div").style,"AnimationEvent"in window||(delete os.animationend.animation,delete os.animationiteration.animation,delete os.animationstart.animation),"TransitionEvent"in window||delete os.transitionend.transition);function Cl(e){if(bc[e])return bc[e];if(!os[e])return e;var t=os[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in t0)return bc[e]=t[n];return e}var n0=Cl("animationend"),r0=Cl("animationiteration"),s0=Cl("animationstart"),a0=Cl("transitionend"),o0=new Map,Em="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ir(e,t){o0.set(e,t),Kr(t,[e])}for(var wc=0;wc<Em.length;wc++){var Nc=Em[wc],Vw=Nc.toLowerCase(),Hw=Nc[0].toUpperCase()+Nc.slice(1);ir(Vw,"on"+Hw)}ir(n0,"onAnimationEnd");ir(r0,"onAnimationIteration");ir(s0,"onAnimationStart");ir("dblclick","onDoubleClick");ir("focusin","onFocus");ir("focusout","onBlur");ir(a0,"onTransitionEnd");Os("onMouseEnter",["mouseout","mouseover"]);Os("onMouseLeave",["mouseout","mouseover"]);Os("onPointerEnter",["pointerout","pointerover"]);Os("onPointerLeave",["pointerout","pointerover"]);Kr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Kr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Kr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Kr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Kr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Kr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ca="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Bw=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ca));function Rm(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,V1(r,t,void 0,e),e.currentTarget=null}function i0(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var i=r.length-1;0<=i;i--){var l=r[i],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==o&&s.isPropagationStopped())break e;Rm(s,l,u),o=c}else for(i=0;i<r.length;i++){if(l=r[i],c=l.instance,u=l.currentTarget,l=l.listener,c!==o&&s.isPropagationStopped())break e;Rm(s,l,u),o=c}}}if(Vi)throw e=du,Vi=!1,du=null,e}function be(e,t){var n=t[wu];n===void 0&&(n=t[wu]=new Set);var r=e+"__bubble";n.has(r)||(l0(t,e,2,!1),n.add(r))}function jc(e,t,n){var r=0;t&&(r|=4),l0(n,e,r,t)}var ei="_reactListening"+Math.random().toString(36).slice(2);function Ya(e){if(!e[ei]){e[ei]=!0,pg.forEach(function(n){n!=="selectionchange"&&(Bw.has(n)||jc(n,!1,e),jc(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ei]||(t[ei]=!0,jc("selectionchange",!1,t))}}function l0(e,t,n,r){switch(Wg(t)){case 1:var s=rw;break;case 4:s=sw;break;default:s=Ad}n=s.bind(null,t,n,e),s=void 0,!uu||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function kc(e,t,n,r,s){var o=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var i=r.tag;if(i===3||i===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(i===4)for(i=r.return;i!==null;){var c=i.tag;if((c===3||c===4)&&(c=i.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;i=i.return}for(;l!==null;){if(i=gr(l),i===null)return;if(c=i.tag,c===5||c===6){r=o=i;continue e}l=l.parentNode}}r=r.return}Mg(function(){var u=o,d=Md(n),f=[];e:{var m=o0.get(e);if(m!==void 0){var y=Ld,p=e;switch(e){case"keypress":if(ji(n)===0)break e;case"keydown":case"keyup":y=vw;break;case"focusin":p="focus",y=xc;break;case"focusout":p="blur",y=xc;break;case"beforeblur":case"afterblur":y=xc;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=xm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=iw;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=Nw;break;case n0:case r0:case s0:y=uw;break;case a0:y=kw;break;case"scroll":y=aw;break;case"wheel":y=Sw;break;case"copy":case"cut":case"paste":y=fw;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=vm}var w=(t&4)!==0,N=!w&&e==="scroll",h=w?m!==null?m+"Capture":null:m;w=[];for(var g=u,x;g!==null;){x=g;var b=x.stateNode;if(x.tag===5&&b!==null&&(x=b,h!==null&&(b=Ua(g,h),b!=null&&w.push(Ga(g,b,x)))),N)break;g=g.return}0<w.length&&(m=new y(m,p,null,n,d),f.push({event:m,listeners:w}))}}if(!(t&7)){e:{if(m=e==="mouseover"||e==="pointerover",y=e==="mouseout"||e==="pointerout",m&&n!==lu&&(p=n.relatedTarget||n.fromElement)&&(gr(p)||p[Nn]))break e;if((y||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,y?(p=n.relatedTarget||n.toElement,y=u,p=p?gr(p):null,p!==null&&(N=Xr(p),p!==N||p.tag!==5&&p.tag!==6)&&(p=null)):(y=null,p=u),y!==p)){if(w=xm,b="onMouseLeave",h="onMouseEnter",g="mouse",(e==="pointerout"||e==="pointerover")&&(w=vm,b="onPointerLeave",h="onPointerEnter",g="pointer"),N=y==null?m:is(y),x=p==null?m:is(p),m=new w(b,g+"leave",y,n,d),m.target=N,m.relatedTarget=x,b=null,gr(d)===u&&(w=new w(h,g+"enter",p,n,d),w.target=x,w.relatedTarget=N,b=w),N=b,y&&p)t:{for(w=y,h=p,g=0,x=w;x;x=es(x))g++;for(x=0,b=h;b;b=es(b))x++;for(;0<g-x;)w=es(w),g--;for(;0<x-g;)h=es(h),x--;for(;g--;){if(w===h||h!==null&&w===h.alternate)break t;w=es(w),h=es(h)}w=null}else w=null;y!==null&&Tm(f,m,y,w,!1),p!==null&&N!==null&&Tm(f,N,p,w,!0)}}e:{if(m=u?is(u):window,y=m.nodeName&&m.nodeName.toLowerCase(),y==="select"||y==="input"&&m.type==="file")var j=Iw;else if(Nm(m))if(Gg)j=Lw;else{j=Aw;var k=Dw}else(y=m.nodeName)&&y.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(j=Ow);if(j&&(j=j(e,u))){Yg(f,j,n,d);break e}k&&k(e,m,u),e==="focusout"&&(k=m._wrapperState)&&k.controlled&&m.type==="number"&&ru(m,"number",m.value)}switch(k=u?is(u):window,e){case"focusin":(Nm(k)||k.contentEditable==="true")&&(as=k,pu=u,Aa=null);break;case"focusout":Aa=pu=as=null;break;case"mousedown":gu=!0;break;case"contextmenu":case"mouseup":case"dragend":gu=!1,Cm(f,n,d);break;case"selectionchange":if($w)break;case"keydown":case"keyup":Cm(f,n,d)}var v;if(Fd)e:{switch(e){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else ss?Kg(e,n)&&(_="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(_="onCompositionStart");_&&(Qg&&n.locale!=="ko"&&(ss||_!=="onCompositionStart"?_==="onCompositionEnd"&&ss&&(v=qg()):(qn=d,Od="value"in qn?qn.value:qn.textContent,ss=!0)),k=qi(u,_),0<k.length&&(_=new ym(_,e,null,n,d),f.push({event:_,listeners:k}),v?_.data=v:(v=Xg(n),v!==null&&(_.data=v)))),(v=Ew?Rw(e,n):Tw(e,n))&&(u=qi(u,"onBeforeInput"),0<u.length&&(d=new ym("onBeforeInput","beforeinput",null,n,d),f.push({event:d,listeners:u}),d.data=v))}i0(f,t)})}function Ga(e,t,n){return{instance:e,listener:t,currentTarget:n}}function qi(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,o=s.stateNode;s.tag===5&&o!==null&&(s=o,o=Ua(e,n),o!=null&&r.unshift(Ga(e,o,s)),o=Ua(e,t),o!=null&&r.push(Ga(e,o,s))),e=e.return}return r}function es(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Tm(e,t,n,r,s){for(var o=t._reactName,i=[];n!==null&&n!==r;){var l=n,c=l.alternate,u=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&u!==null&&(l=u,s?(c=Ua(n,o),c!=null&&i.unshift(Ga(n,c,l))):s||(c=Ua(n,o),c!=null&&i.push(Ga(n,c,l)))),n=n.return}i.length!==0&&e.push({event:t,listeners:i})}var Uw=/\r\n?/g,Ww=/\u0000|\uFFFD/g;function Mm(e){return(typeof e=="string"?e:""+e).replace(Uw,`
`).replace(Ww,"")}function ti(e,t,n){if(t=Mm(t),Mm(e)!==t&&n)throw Error(B(425))}function Qi(){}var xu=null,yu=null;function vu(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var bu=typeof setTimeout=="function"?setTimeout:void 0,qw=typeof clearTimeout=="function"?clearTimeout:void 0,Pm=typeof Promise=="function"?Promise:void 0,Qw=typeof queueMicrotask=="function"?queueMicrotask:typeof Pm<"u"?function(e){return Pm.resolve(null).then(e).catch(Kw)}:bu;function Kw(e){setTimeout(function(){throw e})}function _c(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),Qa(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Qa(t)}function Gn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Im(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var na=Math.random().toString(36).slice(2),tn="__reactFiber$"+na,Ja="__reactProps$"+na,Nn="__reactContainer$"+na,wu="__reactEvents$"+na,Xw="__reactListeners$"+na,Yw="__reactHandles$"+na;function gr(e){var t=e[tn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Nn]||n[tn]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Im(e);e!==null;){if(n=e[tn])return n;e=Im(e)}return t}e=n,n=e.parentNode}return null}function So(e){return e=e[tn]||e[Nn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function is(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(B(33))}function El(e){return e[Ja]||null}var Nu=[],ls=-1;function lr(e){return{current:e}}function we(e){0>ls||(e.current=Nu[ls],Nu[ls]=null,ls--)}function ye(e,t){ls++,Nu[ls]=e.current,e.current=t}var ar={},Ye=lr(ar),lt=lr(!1),Lr=ar;function Ls(e,t){var n=e.type.contextTypes;if(!n)return ar;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},o;for(o in n)s[o]=t[o];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function ct(e){return e=e.childContextTypes,e!=null}function Ki(){we(lt),we(Ye)}function Dm(e,t,n){if(Ye.current!==ar)throw Error(B(168));ye(Ye,t),ye(lt,n)}function c0(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(B(108,D1(e)||"Unknown",s));return Ce({},n,r)}function Xi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ar,Lr=Ye.current,ye(Ye,e),ye(lt,lt.current),!0}function Am(e,t,n){var r=e.stateNode;if(!r)throw Error(B(169));n?(e=c0(e,t,Lr),r.__reactInternalMemoizedMergedChildContext=e,we(lt),we(Ye),ye(Ye,e)):we(lt),ye(lt,n)}var hn=null,Rl=!1,Sc=!1;function u0(e){hn===null?hn=[e]:hn.push(e)}function Gw(e){Rl=!0,u0(e)}function cr(){if(!Sc&&hn!==null){Sc=!0;var e=0,t=xe;try{var n=hn;for(xe=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}hn=null,Rl=!1}catch(s){throw hn!==null&&(hn=hn.slice(e+1)),Ag(Pd,cr),s}finally{xe=t,Sc=!1}}return null}var cs=[],us=0,Yi=null,Gi=0,_t=[],St=0,zr=null,xn=1,yn="";function fr(e,t){cs[us++]=Gi,cs[us++]=Yi,Yi=e,Gi=t}function d0(e,t,n){_t[St++]=xn,_t[St++]=yn,_t[St++]=zr,zr=e;var r=xn;e=yn;var s=32-Vt(r)-1;r&=~(1<<s),n+=1;var o=32-Vt(t)+s;if(30<o){var i=s-s%5;o=(r&(1<<i)-1).toString(32),r>>=i,s-=i,xn=1<<32-Vt(t)+s|n<<s|r,yn=o+e}else xn=1<<o|n<<s|r,yn=e}function Vd(e){e.return!==null&&(fr(e,1),d0(e,1,0))}function Hd(e){for(;e===Yi;)Yi=cs[--us],cs[us]=null,Gi=cs[--us],cs[us]=null;for(;e===zr;)zr=_t[--St],_t[St]=null,yn=_t[--St],_t[St]=null,xn=_t[--St],_t[St]=null}var gt=null,pt=null,Ne=!1,Lt=null;function f0(e,t){var n=Ct(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Om(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,gt=e,pt=Gn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,gt=e,pt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=zr!==null?{id:xn,overflow:yn}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Ct(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,gt=e,pt=null,!0):!1;default:return!1}}function ju(e){return(e.mode&1)!==0&&(e.flags&128)===0}function ku(e){if(Ne){var t=pt;if(t){var n=t;if(!Om(e,t)){if(ju(e))throw Error(B(418));t=Gn(n.nextSibling);var r=gt;t&&Om(e,t)?f0(r,n):(e.flags=e.flags&-4097|2,Ne=!1,gt=e)}}else{if(ju(e))throw Error(B(418));e.flags=e.flags&-4097|2,Ne=!1,gt=e}}}function Lm(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;gt=e}function ni(e){if(e!==gt)return!1;if(!Ne)return Lm(e),Ne=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!vu(e.type,e.memoizedProps)),t&&(t=pt)){if(ju(e))throw m0(),Error(B(418));for(;t;)f0(e,t),t=Gn(t.nextSibling)}if(Lm(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(B(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){pt=Gn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}pt=null}}else pt=gt?Gn(e.stateNode.nextSibling):null;return!0}function m0(){for(var e=pt;e;)e=Gn(e.nextSibling)}function zs(){pt=gt=null,Ne=!1}function Bd(e){Lt===null?Lt=[e]:Lt.push(e)}var Jw=Sn.ReactCurrentBatchConfig;function ya(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(B(309));var r=n.stateNode}if(!r)throw Error(B(147,e));var s=r,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(i){var l=s.refs;i===null?delete l[o]:l[o]=i},t._stringRef=o,t)}if(typeof e!="string")throw Error(B(284));if(!n._owner)throw Error(B(290,e))}return e}function ri(e,t){throw e=Object.prototype.toString.call(t),Error(B(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function zm(e){var t=e._init;return t(e._payload)}function h0(e){function t(h,g){if(e){var x=h.deletions;x===null?(h.deletions=[g],h.flags|=16):x.push(g)}}function n(h,g){if(!e)return null;for(;g!==null;)t(h,g),g=g.sibling;return null}function r(h,g){for(h=new Map;g!==null;)g.key!==null?h.set(g.key,g):h.set(g.index,g),g=g.sibling;return h}function s(h,g){return h=tr(h,g),h.index=0,h.sibling=null,h}function o(h,g,x){return h.index=x,e?(x=h.alternate,x!==null?(x=x.index,x<g?(h.flags|=2,g):x):(h.flags|=2,g)):(h.flags|=1048576,g)}function i(h){return e&&h.alternate===null&&(h.flags|=2),h}function l(h,g,x,b){return g===null||g.tag!==6?(g=Ic(x,h.mode,b),g.return=h,g):(g=s(g,x),g.return=h,g)}function c(h,g,x,b){var j=x.type;return j===rs?d(h,g,x.props.children,b,x.key):g!==null&&(g.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===In&&zm(j)===g.type)?(b=s(g,x.props),b.ref=ya(h,g,x),b.return=h,b):(b=Ti(x.type,x.key,x.props,null,h.mode,b),b.ref=ya(h,g,x),b.return=h,b)}function u(h,g,x,b){return g===null||g.tag!==4||g.stateNode.containerInfo!==x.containerInfo||g.stateNode.implementation!==x.implementation?(g=Dc(x,h.mode,b),g.return=h,g):(g=s(g,x.children||[]),g.return=h,g)}function d(h,g,x,b,j){return g===null||g.tag!==7?(g=Pr(x,h.mode,b,j),g.return=h,g):(g=s(g,x),g.return=h,g)}function f(h,g,x){if(typeof g=="string"&&g!==""||typeof g=="number")return g=Ic(""+g,h.mode,x),g.return=h,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case qo:return x=Ti(g.type,g.key,g.props,null,h.mode,x),x.ref=ya(h,null,g),x.return=h,x;case ns:return g=Dc(g,h.mode,x),g.return=h,g;case In:var b=g._init;return f(h,b(g._payload),x)}if(_a(g)||ma(g))return g=Pr(g,h.mode,x,null),g.return=h,g;ri(h,g)}return null}function m(h,g,x,b){var j=g!==null?g.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return j!==null?null:l(h,g,""+x,b);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case qo:return x.key===j?c(h,g,x,b):null;case ns:return x.key===j?u(h,g,x,b):null;case In:return j=x._init,m(h,g,j(x._payload),b)}if(_a(x)||ma(x))return j!==null?null:d(h,g,x,b,null);ri(h,x)}return null}function y(h,g,x,b,j){if(typeof b=="string"&&b!==""||typeof b=="number")return h=h.get(x)||null,l(g,h,""+b,j);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case qo:return h=h.get(b.key===null?x:b.key)||null,c(g,h,b,j);case ns:return h=h.get(b.key===null?x:b.key)||null,u(g,h,b,j);case In:var k=b._init;return y(h,g,x,k(b._payload),j)}if(_a(b)||ma(b))return h=h.get(x)||null,d(g,h,b,j,null);ri(g,b)}return null}function p(h,g,x,b){for(var j=null,k=null,v=g,_=g=0,M=null;v!==null&&_<x.length;_++){v.index>_?(M=v,v=null):M=v.sibling;var P=m(h,v,x[_],b);if(P===null){v===null&&(v=M);break}e&&v&&P.alternate===null&&t(h,v),g=o(P,g,_),k===null?j=P:k.sibling=P,k=P,v=M}if(_===x.length)return n(h,v),Ne&&fr(h,_),j;if(v===null){for(;_<x.length;_++)v=f(h,x[_],b),v!==null&&(g=o(v,g,_),k===null?j=v:k.sibling=v,k=v);return Ne&&fr(h,_),j}for(v=r(h,v);_<x.length;_++)M=y(v,h,_,x[_],b),M!==null&&(e&&M.alternate!==null&&v.delete(M.key===null?_:M.key),g=o(M,g,_),k===null?j=M:k.sibling=M,k=M);return e&&v.forEach(function(T){return t(h,T)}),Ne&&fr(h,_),j}function w(h,g,x,b){var j=ma(x);if(typeof j!="function")throw Error(B(150));if(x=j.call(x),x==null)throw Error(B(151));for(var k=j=null,v=g,_=g=0,M=null,P=x.next();v!==null&&!P.done;_++,P=x.next()){v.index>_?(M=v,v=null):M=v.sibling;var T=m(h,v,P.value,b);if(T===null){v===null&&(v=M);break}e&&v&&T.alternate===null&&t(h,v),g=o(T,g,_),k===null?j=T:k.sibling=T,k=T,v=M}if(P.done)return n(h,v),Ne&&fr(h,_),j;if(v===null){for(;!P.done;_++,P=x.next())P=f(h,P.value,b),P!==null&&(g=o(P,g,_),k===null?j=P:k.sibling=P,k=P);return Ne&&fr(h,_),j}for(v=r(h,v);!P.done;_++,P=x.next())P=y(v,h,_,P.value,b),P!==null&&(e&&P.alternate!==null&&v.delete(P.key===null?_:P.key),g=o(P,g,_),k===null?j=P:k.sibling=P,k=P);return e&&v.forEach(function(C){return t(h,C)}),Ne&&fr(h,_),j}function N(h,g,x,b){if(typeof x=="object"&&x!==null&&x.type===rs&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case qo:e:{for(var j=x.key,k=g;k!==null;){if(k.key===j){if(j=x.type,j===rs){if(k.tag===7){n(h,k.sibling),g=s(k,x.props.children),g.return=h,h=g;break e}}else if(k.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===In&&zm(j)===k.type){n(h,k.sibling),g=s(k,x.props),g.ref=ya(h,k,x),g.return=h,h=g;break e}n(h,k);break}else t(h,k);k=k.sibling}x.type===rs?(g=Pr(x.props.children,h.mode,b,x.key),g.return=h,h=g):(b=Ti(x.type,x.key,x.props,null,h.mode,b),b.ref=ya(h,g,x),b.return=h,h=b)}return i(h);case ns:e:{for(k=x.key;g!==null;){if(g.key===k)if(g.tag===4&&g.stateNode.containerInfo===x.containerInfo&&g.stateNode.implementation===x.implementation){n(h,g.sibling),g=s(g,x.children||[]),g.return=h,h=g;break e}else{n(h,g);break}else t(h,g);g=g.sibling}g=Dc(x,h.mode,b),g.return=h,h=g}return i(h);case In:return k=x._init,N(h,g,k(x._payload),b)}if(_a(x))return p(h,g,x,b);if(ma(x))return w(h,g,x,b);ri(h,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,g!==null&&g.tag===6?(n(h,g.sibling),g=s(g,x),g.return=h,h=g):(n(h,g),g=Ic(x,h.mode,b),g.return=h,h=g),i(h)):n(h,g)}return N}var Fs=h0(!0),p0=h0(!1),Ji=lr(null),Zi=null,ds=null,Ud=null;function Wd(){Ud=ds=Zi=null}function qd(e){var t=Ji.current;we(Ji),e._currentValue=t}function _u(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function bs(e,t){Zi=e,Ud=ds=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(ot=!0),e.firstContext=null)}function Rt(e){var t=e._currentValue;if(Ud!==e)if(e={context:e,memoizedValue:t,next:null},ds===null){if(Zi===null)throw Error(B(308));ds=e,Zi.dependencies={lanes:0,firstContext:e}}else ds=ds.next=e;return t}var xr=null;function Qd(e){xr===null?xr=[e]:xr.push(e)}function g0(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,Qd(t)):(n.next=s.next,s.next=n),t.interleaved=n,jn(e,r)}function jn(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Dn=!1;function Kd(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function x0(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function bn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Jn(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,fe&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,jn(e,n)}return s=r.interleaved,s===null?(t.next=t,Qd(r)):(t.next=s.next,s.next=t),r.interleaved=t,jn(e,n)}function ki(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Id(e,n)}}function Fm(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?s=o=i:o=o.next=i,n=n.next}while(n!==null);o===null?s=o=t:o=o.next=t}else s=o=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:o,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function el(e,t,n,r){var s=e.updateQueue;Dn=!1;var o=s.firstBaseUpdate,i=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,i===null?o=u:i.next=u,i=c;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==i&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(o!==null){var f=s.baseState;i=0,d=u=c=null,l=o;do{var m=l.lane,y=l.eventTime;if((r&m)===m){d!==null&&(d=d.next={eventTime:y,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var p=e,w=l;switch(m=t,y=n,w.tag){case 1:if(p=w.payload,typeof p=="function"){f=p.call(y,f,m);break e}f=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=w.payload,m=typeof p=="function"?p.call(y,f,m):p,m==null)break e;f=Ce({},f,m);break e;case 2:Dn=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,m=s.effects,m===null?s.effects=[l]:m.push(l))}else y={eventTime:y,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=y,c=f):d=d.next=y,i|=m;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;m=l,l=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(d===null&&(c=f),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=d,t=s.shared.interleaved,t!==null){s=t;do i|=s.lane,s=s.next;while(s!==t)}else o===null&&(s.shared.lanes=0);$r|=i,e.lanes=i,e.memoizedState=f}}function $m(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(B(191,s));s.call(r)}}}var Co={},sn=lr(Co),Za=lr(Co),eo=lr(Co);function yr(e){if(e===Co)throw Error(B(174));return e}function Xd(e,t){switch(ye(eo,t),ye(Za,e),ye(sn,Co),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:au(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=au(t,e)}we(sn),ye(sn,t)}function $s(){we(sn),we(Za),we(eo)}function y0(e){yr(eo.current);var t=yr(sn.current),n=au(t,e.type);t!==n&&(ye(Za,e),ye(sn,n))}function Yd(e){Za.current===e&&(we(sn),we(Za))}var _e=lr(0);function tl(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Cc=[];function Gd(){for(var e=0;e<Cc.length;e++)Cc[e]._workInProgressVersionPrimary=null;Cc.length=0}var _i=Sn.ReactCurrentDispatcher,Ec=Sn.ReactCurrentBatchConfig,Fr=0,Se=null,Oe=null,Fe=null,nl=!1,Oa=!1,to=0,Zw=0;function qe(){throw Error(B(321))}function Jd(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Bt(e[n],t[n]))return!1;return!0}function Zd(e,t,n,r,s,o){if(Fr=o,Se=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,_i.current=e===null||e.memoizedState===null?rN:sN,e=n(r,s),Oa){o=0;do{if(Oa=!1,to=0,25<=o)throw Error(B(301));o+=1,Fe=Oe=null,t.updateQueue=null,_i.current=aN,e=n(r,s)}while(Oa)}if(_i.current=rl,t=Oe!==null&&Oe.next!==null,Fr=0,Fe=Oe=Se=null,nl=!1,t)throw Error(B(300));return e}function ef(){var e=to!==0;return to=0,e}function Yt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Fe===null?Se.memoizedState=Fe=e:Fe=Fe.next=e,Fe}function Tt(){if(Oe===null){var e=Se.alternate;e=e!==null?e.memoizedState:null}else e=Oe.next;var t=Fe===null?Se.memoizedState:Fe.next;if(t!==null)Fe=t,Oe=e;else{if(e===null)throw Error(B(310));Oe=e,e={memoizedState:Oe.memoizedState,baseState:Oe.baseState,baseQueue:Oe.baseQueue,queue:Oe.queue,next:null},Fe===null?Se.memoizedState=Fe=e:Fe=Fe.next=e}return Fe}function no(e,t){return typeof t=="function"?t(e):t}function Rc(e){var t=Tt(),n=t.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=e;var r=Oe,s=r.baseQueue,o=n.pending;if(o!==null){if(s!==null){var i=s.next;s.next=o.next,o.next=i}r.baseQueue=s=o,n.pending=null}if(s!==null){o=s.next,r=r.baseState;var l=i=null,c=null,u=o;do{var d=u.lane;if((Fr&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=f,i=r):c=c.next=f,Se.lanes|=d,$r|=d}u=u.next}while(u!==null&&u!==o);c===null?i=r:c.next=l,Bt(r,t.memoizedState)||(ot=!0),t.memoizedState=r,t.baseState=i,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do o=s.lane,Se.lanes|=o,$r|=o,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Tc(e){var t=Tt(),n=t.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,o=t.memoizedState;if(s!==null){n.pending=null;var i=s=s.next;do o=e(o,i.action),i=i.next;while(i!==s);Bt(o,t.memoizedState)||(ot=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function v0(){}function b0(e,t){var n=Se,r=Tt(),s=t(),o=!Bt(r.memoizedState,s);if(o&&(r.memoizedState=s,ot=!0),r=r.queue,tf(j0.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||Fe!==null&&Fe.memoizedState.tag&1){if(n.flags|=2048,ro(9,N0.bind(null,n,r,s,t),void 0,null),$e===null)throw Error(B(349));Fr&30||w0(n,t,s)}return s}function w0(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Se.updateQueue,t===null?(t={lastEffect:null,stores:null},Se.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function N0(e,t,n,r){t.value=n,t.getSnapshot=r,k0(t)&&_0(e)}function j0(e,t,n){return n(function(){k0(t)&&_0(e)})}function k0(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Bt(e,n)}catch{return!0}}function _0(e){var t=jn(e,1);t!==null&&Ht(t,e,1,-1)}function Vm(e){var t=Yt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:no,lastRenderedState:e},t.queue=e,e=e.dispatch=nN.bind(null,Se,e),[t.memoizedState,e]}function ro(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Se.updateQueue,t===null?(t={lastEffect:null,stores:null},Se.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function S0(){return Tt().memoizedState}function Si(e,t,n,r){var s=Yt();Se.flags|=e,s.memoizedState=ro(1|t,n,void 0,r===void 0?null:r)}function Tl(e,t,n,r){var s=Tt();r=r===void 0?null:r;var o=void 0;if(Oe!==null){var i=Oe.memoizedState;if(o=i.destroy,r!==null&&Jd(r,i.deps)){s.memoizedState=ro(t,n,o,r);return}}Se.flags|=e,s.memoizedState=ro(1|t,n,o,r)}function Hm(e,t){return Si(8390656,8,e,t)}function tf(e,t){return Tl(2048,8,e,t)}function C0(e,t){return Tl(4,2,e,t)}function E0(e,t){return Tl(4,4,e,t)}function R0(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function T0(e,t,n){return n=n!=null?n.concat([e]):null,Tl(4,4,R0.bind(null,t,e),n)}function nf(){}function M0(e,t){var n=Tt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Jd(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function P0(e,t){var n=Tt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Jd(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function I0(e,t,n){return Fr&21?(Bt(n,t)||(n=zg(),Se.lanes|=n,$r|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,ot=!0),e.memoizedState=n)}function eN(e,t){var n=xe;xe=n!==0&&4>n?n:4,e(!0);var r=Ec.transition;Ec.transition={};try{e(!1),t()}finally{xe=n,Ec.transition=r}}function D0(){return Tt().memoizedState}function tN(e,t,n){var r=er(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},A0(e))O0(t,n);else if(n=g0(e,t,n,r),n!==null){var s=et();Ht(n,e,r,s),L0(n,t,r)}}function nN(e,t,n){var r=er(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(A0(e))O0(t,s);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var i=t.lastRenderedState,l=o(i,n);if(s.hasEagerState=!0,s.eagerState=l,Bt(l,i)){var c=t.interleaved;c===null?(s.next=s,Qd(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}n=g0(e,t,s,r),n!==null&&(s=et(),Ht(n,e,r,s),L0(n,t,r))}}function A0(e){var t=e.alternate;return e===Se||t!==null&&t===Se}function O0(e,t){Oa=nl=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function L0(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Id(e,n)}}var rl={readContext:Rt,useCallback:qe,useContext:qe,useEffect:qe,useImperativeHandle:qe,useInsertionEffect:qe,useLayoutEffect:qe,useMemo:qe,useReducer:qe,useRef:qe,useState:qe,useDebugValue:qe,useDeferredValue:qe,useTransition:qe,useMutableSource:qe,useSyncExternalStore:qe,useId:qe,unstable_isNewReconciler:!1},rN={readContext:Rt,useCallback:function(e,t){return Yt().memoizedState=[e,t===void 0?null:t],e},useContext:Rt,useEffect:Hm,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Si(4194308,4,R0.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Si(4194308,4,e,t)},useInsertionEffect:function(e,t){return Si(4,2,e,t)},useMemo:function(e,t){var n=Yt();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Yt();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=tN.bind(null,Se,e),[r.memoizedState,e]},useRef:function(e){var t=Yt();return e={current:e},t.memoizedState=e},useState:Vm,useDebugValue:nf,useDeferredValue:function(e){return Yt().memoizedState=e},useTransition:function(){var e=Vm(!1),t=e[0];return e=eN.bind(null,e[1]),Yt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Se,s=Yt();if(Ne){if(n===void 0)throw Error(B(407));n=n()}else{if(n=t(),$e===null)throw Error(B(349));Fr&30||w0(r,t,n)}s.memoizedState=n;var o={value:n,getSnapshot:t};return s.queue=o,Hm(j0.bind(null,r,o,e),[e]),r.flags|=2048,ro(9,N0.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Yt(),t=$e.identifierPrefix;if(Ne){var n=yn,r=xn;n=(r&~(1<<32-Vt(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=to++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=Zw++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},sN={readContext:Rt,useCallback:M0,useContext:Rt,useEffect:tf,useImperativeHandle:T0,useInsertionEffect:C0,useLayoutEffect:E0,useMemo:P0,useReducer:Rc,useRef:S0,useState:function(){return Rc(no)},useDebugValue:nf,useDeferredValue:function(e){var t=Tt();return I0(t,Oe.memoizedState,e)},useTransition:function(){var e=Rc(no)[0],t=Tt().memoizedState;return[e,t]},useMutableSource:v0,useSyncExternalStore:b0,useId:D0,unstable_isNewReconciler:!1},aN={readContext:Rt,useCallback:M0,useContext:Rt,useEffect:tf,useImperativeHandle:T0,useInsertionEffect:C0,useLayoutEffect:E0,useMemo:P0,useReducer:Tc,useRef:S0,useState:function(){return Tc(no)},useDebugValue:nf,useDeferredValue:function(e){var t=Tt();return Oe===null?t.memoizedState=e:I0(t,Oe.memoizedState,e)},useTransition:function(){var e=Tc(no)[0],t=Tt().memoizedState;return[e,t]},useMutableSource:v0,useSyncExternalStore:b0,useId:D0,unstable_isNewReconciler:!1};function Pt(e,t){if(e&&e.defaultProps){t=Ce({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Su(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Ce({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Ml={isMounted:function(e){return(e=e._reactInternals)?Xr(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=et(),s=er(e),o=bn(r,s);o.payload=t,n!=null&&(o.callback=n),t=Jn(e,o,s),t!==null&&(Ht(t,e,s,r),ki(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=et(),s=er(e),o=bn(r,s);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=Jn(e,o,s),t!==null&&(Ht(t,e,s,r),ki(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=et(),r=er(e),s=bn(n,r);s.tag=2,t!=null&&(s.callback=t),t=Jn(e,s,r),t!==null&&(Ht(t,e,r,n),ki(t,e,r))}};function Bm(e,t,n,r,s,o,i){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,o,i):t.prototype&&t.prototype.isPureReactComponent?!Xa(n,r)||!Xa(s,o):!0}function z0(e,t,n){var r=!1,s=ar,o=t.contextType;return typeof o=="object"&&o!==null?o=Rt(o):(s=ct(t)?Lr:Ye.current,r=t.contextTypes,o=(r=r!=null)?Ls(e,s):ar),t=new t(n,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Ml,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=o),t}function Um(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Ml.enqueueReplaceState(t,t.state,null)}function Cu(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},Kd(e);var o=t.contextType;typeof o=="object"&&o!==null?s.context=Rt(o):(o=ct(t)?Lr:Ye.current,s.context=Ls(e,o)),s.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(Su(e,t,o,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&Ml.enqueueReplaceState(s,s.state,null),el(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Vs(e,t){try{var n="",r=t;do n+=I1(r),r=r.return;while(r);var s=n}catch(o){s=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:s,digest:null}}function Mc(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Eu(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var oN=typeof WeakMap=="function"?WeakMap:Map;function F0(e,t,n){n=bn(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){al||(al=!0,zu=r),Eu(e,t)},n}function $0(e,t,n){n=bn(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){Eu(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){Eu(e,t),typeof r!="function"&&(Zn===null?Zn=new Set([this]):Zn.add(this));var i=t.stack;this.componentDidCatch(t.value,{componentStack:i!==null?i:""})}),n}function Wm(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new oN;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=bN.bind(null,e,t,n),t.then(e,e))}function qm(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Qm(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=bn(-1,1),t.tag=2,Jn(n,t,1))),n.lanes|=1),e)}var iN=Sn.ReactCurrentOwner,ot=!1;function Ze(e,t,n,r){t.child=e===null?p0(t,null,n,r):Fs(t,e.child,n,r)}function Km(e,t,n,r,s){n=n.render;var o=t.ref;return bs(t,s),r=Zd(e,t,n,r,o,s),n=ef(),e!==null&&!ot?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,kn(e,t,s)):(Ne&&n&&Vd(t),t.flags|=1,Ze(e,t,r,s),t.child)}function Xm(e,t,n,r,s){if(e===null){var o=n.type;return typeof o=="function"&&!df(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=o,V0(e,t,o,r,s)):(e=Ti(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&s)){var i=o.memoizedProps;if(n=n.compare,n=n!==null?n:Xa,n(i,r)&&e.ref===t.ref)return kn(e,t,s)}return t.flags|=1,e=tr(o,r),e.ref=t.ref,e.return=t,t.child=e}function V0(e,t,n,r,s){if(e!==null){var o=e.memoizedProps;if(Xa(o,r)&&e.ref===t.ref)if(ot=!1,t.pendingProps=r=o,(e.lanes&s)!==0)e.flags&131072&&(ot=!0);else return t.lanes=e.lanes,kn(e,t,s)}return Ru(e,t,n,r,s)}function H0(e,t,n){var r=t.pendingProps,s=r.children,o=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ye(ms,mt),mt|=n;else{if(!(n&1073741824))return e=o!==null?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ye(ms,mt),mt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,ye(ms,mt),mt|=r}else o!==null?(r=o.baseLanes|n,t.memoizedState=null):r=n,ye(ms,mt),mt|=r;return Ze(e,t,s,n),t.child}function B0(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ru(e,t,n,r,s){var o=ct(n)?Lr:Ye.current;return o=Ls(t,o),bs(t,s),n=Zd(e,t,n,r,o,s),r=ef(),e!==null&&!ot?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,kn(e,t,s)):(Ne&&r&&Vd(t),t.flags|=1,Ze(e,t,n,s),t.child)}function Ym(e,t,n,r,s){if(ct(n)){var o=!0;Xi(t)}else o=!1;if(bs(t,s),t.stateNode===null)Ci(e,t),z0(t,n,r),Cu(t,n,r,s),r=!0;else if(e===null){var i=t.stateNode,l=t.memoizedProps;i.props=l;var c=i.context,u=n.contextType;typeof u=="object"&&u!==null?u=Rt(u):(u=ct(n)?Lr:Ye.current,u=Ls(t,u));var d=n.getDerivedStateFromProps,f=typeof d=="function"||typeof i.getSnapshotBeforeUpdate=="function";f||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l!==r||c!==u)&&Um(t,i,r,u),Dn=!1;var m=t.memoizedState;i.state=m,el(t,r,i,s),c=t.memoizedState,l!==r||m!==c||lt.current||Dn?(typeof d=="function"&&(Su(t,n,d,r),c=t.memoizedState),(l=Dn||Bm(t,n,l,r,m,c,u))?(f||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(t.flags|=4194308)):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),i.props=r,i.state=c,i.context=u,r=l):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{i=t.stateNode,x0(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:Pt(t.type,l),i.props=u,f=t.pendingProps,m=i.context,c=n.contextType,typeof c=="object"&&c!==null?c=Rt(c):(c=ct(n)?Lr:Ye.current,c=Ls(t,c));var y=n.getDerivedStateFromProps;(d=typeof y=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l!==f||m!==c)&&Um(t,i,r,c),Dn=!1,m=t.memoizedState,i.state=m,el(t,r,i,s);var p=t.memoizedState;l!==f||m!==p||lt.current||Dn?(typeof y=="function"&&(Su(t,n,y,r),p=t.memoizedState),(u=Dn||Bm(t,n,u,r,m,p,c)||!1)?(d||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(r,p,c),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(r,p,c)),typeof i.componentDidUpdate=="function"&&(t.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof i.componentDidUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),i.props=r,i.state=p,i.context=c,r=u):(typeof i.componentDidUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),r=!1)}return Tu(e,t,n,r,o,s)}function Tu(e,t,n,r,s,o){B0(e,t);var i=(t.flags&128)!==0;if(!r&&!i)return s&&Am(t,n,!1),kn(e,t,o);r=t.stateNode,iN.current=t;var l=i&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&i?(t.child=Fs(t,e.child,null,o),t.child=Fs(t,null,l,o)):Ze(e,t,l,o),t.memoizedState=r.state,s&&Am(t,n,!0),t.child}function U0(e){var t=e.stateNode;t.pendingContext?Dm(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Dm(e,t.context,!1),Xd(e,t.containerInfo)}function Gm(e,t,n,r,s){return zs(),Bd(s),t.flags|=256,Ze(e,t,n,r),t.child}var Mu={dehydrated:null,treeContext:null,retryLane:0};function Pu(e){return{baseLanes:e,cachePool:null,transitions:null}}function W0(e,t,n){var r=t.pendingProps,s=_e.current,o=!1,i=(t.flags&128)!==0,l;if((l=i)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),ye(_e,s&1),e===null)return ku(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(i=r.children,e=r.fallback,o?(r=t.mode,o=t.child,i={mode:"hidden",children:i},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=i):o=Dl(i,r,0,null),e=Pr(e,r,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Pu(n),t.memoizedState=Mu,e):rf(t,i));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return lN(e,t,i,r,l,s,n);if(o){o=r.fallback,i=t.mode,s=e.child,l=s.sibling;var c={mode:"hidden",children:r.children};return!(i&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=tr(s,c),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?o=tr(l,o):(o=Pr(o,i,n,null),o.flags|=2),o.return=t,r.return=t,r.sibling=o,t.child=r,r=o,o=t.child,i=e.child.memoizedState,i=i===null?Pu(n):{baseLanes:i.baseLanes|n,cachePool:null,transitions:i.transitions},o.memoizedState=i,o.childLanes=e.childLanes&~n,t.memoizedState=Mu,r}return o=e.child,e=o.sibling,r=tr(o,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function rf(e,t){return t=Dl({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function si(e,t,n,r){return r!==null&&Bd(r),Fs(t,e.child,null,n),e=rf(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function lN(e,t,n,r,s,o,i){if(n)return t.flags&256?(t.flags&=-257,r=Mc(Error(B(422))),si(e,t,i,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=r.fallback,s=t.mode,r=Dl({mode:"visible",children:r.children},s,0,null),o=Pr(o,s,i,null),o.flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,t.mode&1&&Fs(t,e.child,null,i),t.child.memoizedState=Pu(i),t.memoizedState=Mu,o);if(!(t.mode&1))return si(e,t,i,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,o=Error(B(419)),r=Mc(o,r,void 0),si(e,t,i,r)}if(l=(i&e.childLanes)!==0,ot||l){if(r=$e,r!==null){switch(i&-i){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|i)?0:s,s!==0&&s!==o.retryLane&&(o.retryLane=s,jn(e,s),Ht(r,e,s,-1))}return uf(),r=Mc(Error(B(421))),si(e,t,i,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=wN.bind(null,e),s._reactRetry=t,null):(e=o.treeContext,pt=Gn(s.nextSibling),gt=t,Ne=!0,Lt=null,e!==null&&(_t[St++]=xn,_t[St++]=yn,_t[St++]=zr,xn=e.id,yn=e.overflow,zr=t),t=rf(t,r.children),t.flags|=4096,t)}function Jm(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),_u(e.return,t,n)}function Pc(e,t,n,r,s){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=s)}function q0(e,t,n){var r=t.pendingProps,s=r.revealOrder,o=r.tail;if(Ze(e,t,r.children,n),r=_e.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Jm(e,n,t);else if(e.tag===19)Jm(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ye(_e,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&tl(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Pc(t,!1,s,n,o);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&tl(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Pc(t,!0,n,null,o);break;case"together":Pc(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ci(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function kn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),$r|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(B(153));if(t.child!==null){for(e=t.child,n=tr(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=tr(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function cN(e,t,n){switch(t.tag){case 3:U0(t),zs();break;case 5:y0(t);break;case 1:ct(t.type)&&Xi(t);break;case 4:Xd(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;ye(Ji,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(ye(_e,_e.current&1),t.flags|=128,null):n&t.child.childLanes?W0(e,t,n):(ye(_e,_e.current&1),e=kn(e,t,n),e!==null?e.sibling:null);ye(_e,_e.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return q0(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ye(_e,_e.current),r)break;return null;case 22:case 23:return t.lanes=0,H0(e,t,n)}return kn(e,t,n)}var Q0,Iu,K0,X0;Q0=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Iu=function(){};K0=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,yr(sn.current);var o=null;switch(n){case"input":s=tu(e,s),r=tu(e,r),o=[];break;case"select":s=Ce({},s,{value:void 0}),r=Ce({},r,{value:void 0}),o=[];break;case"textarea":s=su(e,s),r=su(e,r),o=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Qi)}ou(n,r);var i;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(i in l)l.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Ha.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var c=r[u];if(l=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(i in l)!l.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in c)c.hasOwnProperty(i)&&l[i]!==c[i]&&(n||(n={}),n[i]=c[i])}else n||(o||(o=[]),o.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(o=o||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(o=o||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Ha.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&be("scroll",e),o||l===c||(o=[])):(o=o||[]).push(u,c))}n&&(o=o||[]).push("style",n);var u=o;(t.updateQueue=u)&&(t.flags|=4)}};X0=function(e,t,n,r){n!==r&&(t.flags|=4)};function va(e,t){if(!Ne)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Qe(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function uN(e,t,n){var r=t.pendingProps;switch(Hd(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qe(t),null;case 1:return ct(t.type)&&Ki(),Qe(t),null;case 3:return r=t.stateNode,$s(),we(lt),we(Ye),Gd(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(ni(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Lt!==null&&(Vu(Lt),Lt=null))),Iu(e,t),Qe(t),null;case 5:Yd(t);var s=yr(eo.current);if(n=t.type,e!==null&&t.stateNode!=null)K0(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(B(166));return Qe(t),null}if(e=yr(sn.current),ni(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[tn]=t,r[Ja]=o,e=(t.mode&1)!==0,n){case"dialog":be("cancel",r),be("close",r);break;case"iframe":case"object":case"embed":be("load",r);break;case"video":case"audio":for(s=0;s<Ca.length;s++)be(Ca[s],r);break;case"source":be("error",r);break;case"img":case"image":case"link":be("error",r),be("load",r);break;case"details":be("toggle",r);break;case"input":im(r,o),be("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},be("invalid",r);break;case"textarea":cm(r,o),be("invalid",r)}ou(n,o),s=null;for(var i in o)if(o.hasOwnProperty(i)){var l=o[i];i==="children"?typeof l=="string"?r.textContent!==l&&(o.suppressHydrationWarning!==!0&&ti(r.textContent,l,e),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(o.suppressHydrationWarning!==!0&&ti(r.textContent,l,e),s=["children",""+l]):Ha.hasOwnProperty(i)&&l!=null&&i==="onScroll"&&be("scroll",r)}switch(n){case"input":Qo(r),lm(r,o,!0);break;case"textarea":Qo(r),um(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=Qi)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{i=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=jg(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=i.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=i.createElement(n,{is:r.is}):(e=i.createElement(n),n==="select"&&(i=e,r.multiple?i.multiple=!0:r.size&&(i.size=r.size))):e=i.createElementNS(e,n),e[tn]=t,e[Ja]=r,Q0(e,t,!1,!1),t.stateNode=e;e:{switch(i=iu(n,r),n){case"dialog":be("cancel",e),be("close",e),s=r;break;case"iframe":case"object":case"embed":be("load",e),s=r;break;case"video":case"audio":for(s=0;s<Ca.length;s++)be(Ca[s],e);s=r;break;case"source":be("error",e),s=r;break;case"img":case"image":case"link":be("error",e),be("load",e),s=r;break;case"details":be("toggle",e),s=r;break;case"input":im(e,r),s=tu(e,r),be("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=Ce({},r,{value:void 0}),be("invalid",e);break;case"textarea":cm(e,r),s=su(e,r),be("invalid",e);break;default:s=r}ou(n,s),l=s;for(o in l)if(l.hasOwnProperty(o)){var c=l[o];o==="style"?Sg(e,c):o==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&kg(e,c)):o==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Ba(e,c):typeof c=="number"&&Ba(e,""+c):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Ha.hasOwnProperty(o)?c!=null&&o==="onScroll"&&be("scroll",e):c!=null&&Cd(e,o,c,i))}switch(n){case"input":Qo(e),lm(e,r,!1);break;case"textarea":Qo(e),um(e);break;case"option":r.value!=null&&e.setAttribute("value",""+sr(r.value));break;case"select":e.multiple=!!r.multiple,o=r.value,o!=null?gs(e,!!r.multiple,o,!1):r.defaultValue!=null&&gs(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Qi)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Qe(t),null;case 6:if(e&&t.stateNode!=null)X0(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(B(166));if(n=yr(eo.current),yr(sn.current),ni(t)){if(r=t.stateNode,n=t.memoizedProps,r[tn]=t,(o=r.nodeValue!==n)&&(e=gt,e!==null))switch(e.tag){case 3:ti(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&ti(r.nodeValue,n,(e.mode&1)!==0)}o&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[tn]=t,t.stateNode=r}return Qe(t),null;case 13:if(we(_e),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ne&&pt!==null&&t.mode&1&&!(t.flags&128))m0(),zs(),t.flags|=98560,o=!1;else if(o=ni(t),r!==null&&r.dehydrated!==null){if(e===null){if(!o)throw Error(B(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(B(317));o[tn]=t}else zs(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Qe(t),o=!1}else Lt!==null&&(Vu(Lt),Lt=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||_e.current&1?Le===0&&(Le=3):uf())),t.updateQueue!==null&&(t.flags|=4),Qe(t),null);case 4:return $s(),Iu(e,t),e===null&&Ya(t.stateNode.containerInfo),Qe(t),null;case 10:return qd(t.type._context),Qe(t),null;case 17:return ct(t.type)&&Ki(),Qe(t),null;case 19:if(we(_e),o=t.memoizedState,o===null)return Qe(t),null;if(r=(t.flags&128)!==0,i=o.rendering,i===null)if(r)va(o,!1);else{if(Le!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(i=tl(e),i!==null){for(t.flags|=128,va(o,!1),r=i.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)o=n,e=r,o.flags&=14680066,i=o.alternate,i===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=i.childLanes,o.lanes=i.lanes,o.child=i.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=i.memoizedProps,o.memoizedState=i.memoizedState,o.updateQueue=i.updateQueue,o.type=i.type,e=i.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ye(_e,_e.current&1|2),t.child}e=e.sibling}o.tail!==null&&Me()>Hs&&(t.flags|=128,r=!0,va(o,!1),t.lanes=4194304)}else{if(!r)if(e=tl(i),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),va(o,!0),o.tail===null&&o.tailMode==="hidden"&&!i.alternate&&!Ne)return Qe(t),null}else 2*Me()-o.renderingStartTime>Hs&&n!==1073741824&&(t.flags|=128,r=!0,va(o,!1),t.lanes=4194304);o.isBackwards?(i.sibling=t.child,t.child=i):(n=o.last,n!==null?n.sibling=i:t.child=i,o.last=i)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Me(),t.sibling=null,n=_e.current,ye(_e,r?n&1|2:n&1),t):(Qe(t),null);case 22:case 23:return cf(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?mt&1073741824&&(Qe(t),t.subtreeFlags&6&&(t.flags|=8192)):Qe(t),null;case 24:return null;case 25:return null}throw Error(B(156,t.tag))}function dN(e,t){switch(Hd(t),t.tag){case 1:return ct(t.type)&&Ki(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return $s(),we(lt),we(Ye),Gd(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Yd(t),null;case 13:if(we(_e),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(B(340));zs()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return we(_e),null;case 4:return $s(),null;case 10:return qd(t.type._context),null;case 22:case 23:return cf(),null;case 24:return null;default:return null}}var ai=!1,Ke=!1,fN=typeof WeakSet=="function"?WeakSet:Set,K=null;function fs(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Te(e,t,r)}else n.current=null}function Du(e,t,n){try{n()}catch(r){Te(e,t,r)}}var Zm=!1;function mN(e,t){if(xu=Ui,e=e0(),$d(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var i=0,l=-1,c=-1,u=0,d=0,f=e,m=null;t:for(;;){for(var y;f!==n||s!==0&&f.nodeType!==3||(l=i+s),f!==o||r!==0&&f.nodeType!==3||(c=i+r),f.nodeType===3&&(i+=f.nodeValue.length),(y=f.firstChild)!==null;)m=f,f=y;for(;;){if(f===e)break t;if(m===n&&++u===s&&(l=i),m===o&&++d===r&&(c=i),(y=f.nextSibling)!==null)break;f=m,m=f.parentNode}f=y}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(yu={focusedElem:e,selectionRange:n},Ui=!1,K=t;K!==null;)if(t=K,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,K=e;else for(;K!==null;){t=K;try{var p=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var w=p.memoizedProps,N=p.memoizedState,h=t.stateNode,g=h.getSnapshotBeforeUpdate(t.elementType===t.type?w:Pt(t.type,w),N);h.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var x=t.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(B(163))}}catch(b){Te(t,t.return,b)}if(e=t.sibling,e!==null){e.return=t.return,K=e;break}K=t.return}return p=Zm,Zm=!1,p}function La(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var o=s.destroy;s.destroy=void 0,o!==void 0&&Du(t,n,o)}s=s.next}while(s!==r)}}function Pl(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Au(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Y0(e){var t=e.alternate;t!==null&&(e.alternate=null,Y0(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[tn],delete t[Ja],delete t[wu],delete t[Xw],delete t[Yw])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function G0(e){return e.tag===5||e.tag===3||e.tag===4}function eh(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||G0(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Ou(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Qi));else if(r!==4&&(e=e.child,e!==null))for(Ou(e,t,n),e=e.sibling;e!==null;)Ou(e,t,n),e=e.sibling}function Lu(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Lu(e,t,n),e=e.sibling;e!==null;)Lu(e,t,n),e=e.sibling}var Ve=null,At=!1;function Rn(e,t,n){for(n=n.child;n!==null;)J0(e,t,n),n=n.sibling}function J0(e,t,n){if(rn&&typeof rn.onCommitFiberUnmount=="function")try{rn.onCommitFiberUnmount(kl,n)}catch{}switch(n.tag){case 5:Ke||fs(n,t);case 6:var r=Ve,s=At;Ve=null,Rn(e,t,n),Ve=r,At=s,Ve!==null&&(At?(e=Ve,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Ve.removeChild(n.stateNode));break;case 18:Ve!==null&&(At?(e=Ve,n=n.stateNode,e.nodeType===8?_c(e.parentNode,n):e.nodeType===1&&_c(e,n),Qa(e)):_c(Ve,n.stateNode));break;case 4:r=Ve,s=At,Ve=n.stateNode.containerInfo,At=!0,Rn(e,t,n),Ve=r,At=s;break;case 0:case 11:case 14:case 15:if(!Ke&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var o=s,i=o.destroy;o=o.tag,i!==void 0&&(o&2||o&4)&&Du(n,t,i),s=s.next}while(s!==r)}Rn(e,t,n);break;case 1:if(!Ke&&(fs(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Te(n,t,l)}Rn(e,t,n);break;case 21:Rn(e,t,n);break;case 22:n.mode&1?(Ke=(r=Ke)||n.memoizedState!==null,Rn(e,t,n),Ke=r):Rn(e,t,n);break;default:Rn(e,t,n)}}function th(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new fN),t.forEach(function(r){var s=NN.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Mt(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var o=e,i=t,l=i;e:for(;l!==null;){switch(l.tag){case 5:Ve=l.stateNode,At=!1;break e;case 3:Ve=l.stateNode.containerInfo,At=!0;break e;case 4:Ve=l.stateNode.containerInfo,At=!0;break e}l=l.return}if(Ve===null)throw Error(B(160));J0(o,i,s),Ve=null,At=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){Te(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Z0(t,e),t=t.sibling}function Z0(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Mt(t,e),Qt(e),r&4){try{La(3,e,e.return),Pl(3,e)}catch(w){Te(e,e.return,w)}try{La(5,e,e.return)}catch(w){Te(e,e.return,w)}}break;case 1:Mt(t,e),Qt(e),r&512&&n!==null&&fs(n,n.return);break;case 5:if(Mt(t,e),Qt(e),r&512&&n!==null&&fs(n,n.return),e.flags&32){var s=e.stateNode;try{Ba(s,"")}catch(w){Te(e,e.return,w)}}if(r&4&&(s=e.stateNode,s!=null)){var o=e.memoizedProps,i=n!==null?n.memoizedProps:o,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&o.type==="radio"&&o.name!=null&&wg(s,o),iu(l,i);var u=iu(l,o);for(i=0;i<c.length;i+=2){var d=c[i],f=c[i+1];d==="style"?Sg(s,f):d==="dangerouslySetInnerHTML"?kg(s,f):d==="children"?Ba(s,f):Cd(s,d,f,u)}switch(l){case"input":nu(s,o);break;case"textarea":Ng(s,o);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!o.multiple;var y=o.value;y!=null?gs(s,!!o.multiple,y,!1):m!==!!o.multiple&&(o.defaultValue!=null?gs(s,!!o.multiple,o.defaultValue,!0):gs(s,!!o.multiple,o.multiple?[]:"",!1))}s[Ja]=o}catch(w){Te(e,e.return,w)}}break;case 6:if(Mt(t,e),Qt(e),r&4){if(e.stateNode===null)throw Error(B(162));s=e.stateNode,o=e.memoizedProps;try{s.nodeValue=o}catch(w){Te(e,e.return,w)}}break;case 3:if(Mt(t,e),Qt(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Qa(t.containerInfo)}catch(w){Te(e,e.return,w)}break;case 4:Mt(t,e),Qt(e);break;case 13:Mt(t,e),Qt(e),s=e.child,s.flags&8192&&(o=s.memoizedState!==null,s.stateNode.isHidden=o,!o||s.alternate!==null&&s.alternate.memoizedState!==null||(of=Me())),r&4&&th(e);break;case 22:if(d=n!==null&&n.memoizedState!==null,e.mode&1?(Ke=(u=Ke)||d,Mt(t,e),Ke=u):Mt(t,e),Qt(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(K=e,d=e.child;d!==null;){for(f=K=d;K!==null;){switch(m=K,y=m.child,m.tag){case 0:case 11:case 14:case 15:La(4,m,m.return);break;case 1:fs(m,m.return);var p=m.stateNode;if(typeof p.componentWillUnmount=="function"){r=m,n=m.return;try{t=r,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(w){Te(r,n,w)}}break;case 5:fs(m,m.return);break;case 22:if(m.memoizedState!==null){rh(f);continue}}y!==null?(y.return=m,K=y):rh(f)}d=d.sibling}e:for(d=null,f=e;;){if(f.tag===5){if(d===null){d=f;try{s=f.stateNode,u?(o=s.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(l=f.stateNode,c=f.memoizedProps.style,i=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=_g("display",i))}catch(w){Te(e,e.return,w)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(w){Te(e,e.return,w)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Mt(t,e),Qt(e),r&4&&th(e);break;case 21:break;default:Mt(t,e),Qt(e)}}function Qt(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(G0(n)){var r=n;break e}n=n.return}throw Error(B(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Ba(s,""),r.flags&=-33);var o=eh(e);Lu(e,o,s);break;case 3:case 4:var i=r.stateNode.containerInfo,l=eh(e);Ou(e,l,i);break;default:throw Error(B(161))}}catch(c){Te(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function hN(e,t,n){K=e,ex(e)}function ex(e,t,n){for(var r=(e.mode&1)!==0;K!==null;){var s=K,o=s.child;if(s.tag===22&&r){var i=s.memoizedState!==null||ai;if(!i){var l=s.alternate,c=l!==null&&l.memoizedState!==null||Ke;l=ai;var u=Ke;if(ai=i,(Ke=c)&&!u)for(K=s;K!==null;)i=K,c=i.child,i.tag===22&&i.memoizedState!==null?sh(s):c!==null?(c.return=i,K=c):sh(s);for(;o!==null;)K=o,ex(o),o=o.sibling;K=s,ai=l,Ke=u}nh(e)}else s.subtreeFlags&8772&&o!==null?(o.return=s,K=o):nh(e)}}function nh(e){for(;K!==null;){var t=K;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Ke||Pl(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Ke)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:Pt(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&$m(t,o,r);break;case 3:var i=t.updateQueue;if(i!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}$m(t,i,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&Qa(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(B(163))}Ke||t.flags&512&&Au(t)}catch(m){Te(t,t.return,m)}}if(t===e){K=null;break}if(n=t.sibling,n!==null){n.return=t.return,K=n;break}K=t.return}}function rh(e){for(;K!==null;){var t=K;if(t===e){K=null;break}var n=t.sibling;if(n!==null){n.return=t.return,K=n;break}K=t.return}}function sh(e){for(;K!==null;){var t=K;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Pl(4,t)}catch(c){Te(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(c){Te(t,s,c)}}var o=t.return;try{Au(t)}catch(c){Te(t,o,c)}break;case 5:var i=t.return;try{Au(t)}catch(c){Te(t,i,c)}}}catch(c){Te(t,t.return,c)}if(t===e){K=null;break}var l=t.sibling;if(l!==null){l.return=t.return,K=l;break}K=t.return}}var pN=Math.ceil,sl=Sn.ReactCurrentDispatcher,sf=Sn.ReactCurrentOwner,Et=Sn.ReactCurrentBatchConfig,fe=0,$e=null,De=null,Be=0,mt=0,ms=lr(0),Le=0,so=null,$r=0,Il=0,af=0,za=null,at=null,of=0,Hs=1/0,mn=null,al=!1,zu=null,Zn=null,oi=!1,Qn=null,ol=0,Fa=0,Fu=null,Ei=-1,Ri=0;function et(){return fe&6?Me():Ei!==-1?Ei:Ei=Me()}function er(e){return e.mode&1?fe&2&&Be!==0?Be&-Be:Jw.transition!==null?(Ri===0&&(Ri=zg()),Ri):(e=xe,e!==0||(e=window.event,e=e===void 0?16:Wg(e.type)),e):1}function Ht(e,t,n,r){if(50<Fa)throw Fa=0,Fu=null,Error(B(185));ko(e,n,r),(!(fe&2)||e!==$e)&&(e===$e&&(!(fe&2)&&(Il|=n),Le===4&&On(e,Be)),ut(e,r),n===1&&fe===0&&!(t.mode&1)&&(Hs=Me()+500,Rl&&cr()))}function ut(e,t){var n=e.callbackNode;J1(e,t);var r=Bi(e,e===$e?Be:0);if(r===0)n!==null&&mm(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&mm(n),t===1)e.tag===0?Gw(ah.bind(null,e)):u0(ah.bind(null,e)),Qw(function(){!(fe&6)&&cr()}),n=null;else{switch(Fg(r)){case 1:n=Pd;break;case 4:n=Og;break;case 16:n=Hi;break;case 536870912:n=Lg;break;default:n=Hi}n=lx(n,tx.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function tx(e,t){if(Ei=-1,Ri=0,fe&6)throw Error(B(327));var n=e.callbackNode;if(ws()&&e.callbackNode!==n)return null;var r=Bi(e,e===$e?Be:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=il(e,r);else{t=r;var s=fe;fe|=2;var o=rx();($e!==e||Be!==t)&&(mn=null,Hs=Me()+500,Mr(e,t));do try{yN();break}catch(l){nx(e,l)}while(!0);Wd(),sl.current=o,fe=s,De!==null?t=0:($e=null,Be=0,t=Le)}if(t!==0){if(t===2&&(s=fu(e),s!==0&&(r=s,t=$u(e,s))),t===1)throw n=so,Mr(e,0),On(e,r),ut(e,Me()),n;if(t===6)On(e,r);else{if(s=e.current.alternate,!(r&30)&&!gN(s)&&(t=il(e,r),t===2&&(o=fu(e),o!==0&&(r=o,t=$u(e,o))),t===1))throw n=so,Mr(e,0),On(e,r),ut(e,Me()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(B(345));case 2:mr(e,at,mn);break;case 3:if(On(e,r),(r&130023424)===r&&(t=of+500-Me(),10<t)){if(Bi(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){et(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=bu(mr.bind(null,e,at,mn),t);break}mr(e,at,mn);break;case 4:if(On(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var i=31-Vt(r);o=1<<i,i=t[i],i>s&&(s=i),r&=~o}if(r=s,r=Me()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*pN(r/1960))-r,10<r){e.timeoutHandle=bu(mr.bind(null,e,at,mn),r);break}mr(e,at,mn);break;case 5:mr(e,at,mn);break;default:throw Error(B(329))}}}return ut(e,Me()),e.callbackNode===n?tx.bind(null,e):null}function $u(e,t){var n=za;return e.current.memoizedState.isDehydrated&&(Mr(e,t).flags|=256),e=il(e,t),e!==2&&(t=at,at=n,t!==null&&Vu(t)),e}function Vu(e){at===null?at=e:at.push.apply(at,e)}function gN(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],o=s.getSnapshot;s=s.value;try{if(!Bt(o(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function On(e,t){for(t&=~af,t&=~Il,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Vt(t),r=1<<n;e[n]=-1,t&=~r}}function ah(e){if(fe&6)throw Error(B(327));ws();var t=Bi(e,0);if(!(t&1))return ut(e,Me()),null;var n=il(e,t);if(e.tag!==0&&n===2){var r=fu(e);r!==0&&(t=r,n=$u(e,r))}if(n===1)throw n=so,Mr(e,0),On(e,t),ut(e,Me()),n;if(n===6)throw Error(B(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,mr(e,at,mn),ut(e,Me()),null}function lf(e,t){var n=fe;fe|=1;try{return e(t)}finally{fe=n,fe===0&&(Hs=Me()+500,Rl&&cr())}}function Vr(e){Qn!==null&&Qn.tag===0&&!(fe&6)&&ws();var t=fe;fe|=1;var n=Et.transition,r=xe;try{if(Et.transition=null,xe=1,e)return e()}finally{xe=r,Et.transition=n,fe=t,!(fe&6)&&cr()}}function cf(){mt=ms.current,we(ms)}function Mr(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,qw(n)),De!==null)for(n=De.return;n!==null;){var r=n;switch(Hd(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ki();break;case 3:$s(),we(lt),we(Ye),Gd();break;case 5:Yd(r);break;case 4:$s();break;case 13:we(_e);break;case 19:we(_e);break;case 10:qd(r.type._context);break;case 22:case 23:cf()}n=n.return}if($e=e,De=e=tr(e.current,null),Be=mt=t,Le=0,so=null,af=Il=$r=0,at=za=null,xr!==null){for(t=0;t<xr.length;t++)if(n=xr[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,o=n.pending;if(o!==null){var i=o.next;o.next=s,r.next=i}n.pending=r}xr=null}return e}function nx(e,t){do{var n=De;try{if(Wd(),_i.current=rl,nl){for(var r=Se.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}nl=!1}if(Fr=0,Fe=Oe=Se=null,Oa=!1,to=0,sf.current=null,n===null||n.return===null){Le=1,so=t,De=null;break}e:{var o=e,i=n.return,l=n,c=t;if(t=Be,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var m=d.alternate;m?(d.updateQueue=m.updateQueue,d.memoizedState=m.memoizedState,d.lanes=m.lanes):(d.updateQueue=null,d.memoizedState=null)}var y=qm(i);if(y!==null){y.flags&=-257,Qm(y,i,l,o,t),y.mode&1&&Wm(o,u,t),t=y,c=u;var p=t.updateQueue;if(p===null){var w=new Set;w.add(c),t.updateQueue=w}else p.add(c);break e}else{if(!(t&1)){Wm(o,u,t),uf();break e}c=Error(B(426))}}else if(Ne&&l.mode&1){var N=qm(i);if(N!==null){!(N.flags&65536)&&(N.flags|=256),Qm(N,i,l,o,t),Bd(Vs(c,l));break e}}o=c=Vs(c,l),Le!==4&&(Le=2),za===null?za=[o]:za.push(o),o=i;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var h=F0(o,c,t);Fm(o,h);break e;case 1:l=c;var g=o.type,x=o.stateNode;if(!(o.flags&128)&&(typeof g.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(Zn===null||!Zn.has(x)))){o.flags|=65536,t&=-t,o.lanes|=t;var b=$0(o,l,t);Fm(o,b);break e}}o=o.return}while(o!==null)}ax(n)}catch(j){t=j,De===n&&n!==null&&(De=n=n.return);continue}break}while(!0)}function rx(){var e=sl.current;return sl.current=rl,e===null?rl:e}function uf(){(Le===0||Le===3||Le===2)&&(Le=4),$e===null||!($r&268435455)&&!(Il&268435455)||On($e,Be)}function il(e,t){var n=fe;fe|=2;var r=rx();($e!==e||Be!==t)&&(mn=null,Mr(e,t));do try{xN();break}catch(s){nx(e,s)}while(!0);if(Wd(),fe=n,sl.current=r,De!==null)throw Error(B(261));return $e=null,Be=0,Le}function xN(){for(;De!==null;)sx(De)}function yN(){for(;De!==null&&!B1();)sx(De)}function sx(e){var t=ix(e.alternate,e,mt);e.memoizedProps=e.pendingProps,t===null?ax(e):De=t,sf.current=null}function ax(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=dN(n,t),n!==null){n.flags&=32767,De=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Le=6,De=null;return}}else if(n=uN(n,t,mt),n!==null){De=n;return}if(t=t.sibling,t!==null){De=t;return}De=t=e}while(t!==null);Le===0&&(Le=5)}function mr(e,t,n){var r=xe,s=Et.transition;try{Et.transition=null,xe=1,vN(e,t,n,r)}finally{Et.transition=s,xe=r}return null}function vN(e,t,n,r){do ws();while(Qn!==null);if(fe&6)throw Error(B(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(B(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(Z1(e,o),e===$e&&(De=$e=null,Be=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||oi||(oi=!0,lx(Hi,function(){return ws(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Et.transition,Et.transition=null;var i=xe;xe=1;var l=fe;fe|=4,sf.current=null,mN(e,n),Z0(n,e),Fw(yu),Ui=!!xu,yu=xu=null,e.current=n,hN(n),U1(),fe=l,xe=i,Et.transition=o}else e.current=n;if(oi&&(oi=!1,Qn=e,ol=s),o=e.pendingLanes,o===0&&(Zn=null),Q1(n.stateNode),ut(e,Me()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(al)throw al=!1,e=zu,zu=null,e;return ol&1&&e.tag!==0&&ws(),o=e.pendingLanes,o&1?e===Fu?Fa++:(Fa=0,Fu=e):Fa=0,cr(),null}function ws(){if(Qn!==null){var e=Fg(ol),t=Et.transition,n=xe;try{if(Et.transition=null,xe=16>e?16:e,Qn===null)var r=!1;else{if(e=Qn,Qn=null,ol=0,fe&6)throw Error(B(331));var s=fe;for(fe|=4,K=e.current;K!==null;){var o=K,i=o.child;if(K.flags&16){var l=o.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(K=u;K!==null;){var d=K;switch(d.tag){case 0:case 11:case 15:La(8,d,o)}var f=d.child;if(f!==null)f.return=d,K=f;else for(;K!==null;){d=K;var m=d.sibling,y=d.return;if(Y0(d),d===u){K=null;break}if(m!==null){m.return=y,K=m;break}K=y}}}var p=o.alternate;if(p!==null){var w=p.child;if(w!==null){p.child=null;do{var N=w.sibling;w.sibling=null,w=N}while(w!==null)}}K=o}}if(o.subtreeFlags&2064&&i!==null)i.return=o,K=i;else e:for(;K!==null;){if(o=K,o.flags&2048)switch(o.tag){case 0:case 11:case 15:La(9,o,o.return)}var h=o.sibling;if(h!==null){h.return=o.return,K=h;break e}K=o.return}}var g=e.current;for(K=g;K!==null;){i=K;var x=i.child;if(i.subtreeFlags&2064&&x!==null)x.return=i,K=x;else e:for(i=g;K!==null;){if(l=K,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Pl(9,l)}}catch(j){Te(l,l.return,j)}if(l===i){K=null;break e}var b=l.sibling;if(b!==null){b.return=l.return,K=b;break e}K=l.return}}if(fe=s,cr(),rn&&typeof rn.onPostCommitFiberRoot=="function")try{rn.onPostCommitFiberRoot(kl,e)}catch{}r=!0}return r}finally{xe=n,Et.transition=t}}return!1}function oh(e,t,n){t=Vs(n,t),t=F0(e,t,1),e=Jn(e,t,1),t=et(),e!==null&&(ko(e,1,t),ut(e,t))}function Te(e,t,n){if(e.tag===3)oh(e,e,n);else for(;t!==null;){if(t.tag===3){oh(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Zn===null||!Zn.has(r))){e=Vs(n,e),e=$0(t,e,1),t=Jn(t,e,1),e=et(),t!==null&&(ko(t,1,e),ut(t,e));break}}t=t.return}}function bN(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=et(),e.pingedLanes|=e.suspendedLanes&n,$e===e&&(Be&n)===n&&(Le===4||Le===3&&(Be&130023424)===Be&&500>Me()-of?Mr(e,0):af|=n),ut(e,t)}function ox(e,t){t===0&&(e.mode&1?(t=Yo,Yo<<=1,!(Yo&130023424)&&(Yo=4194304)):t=1);var n=et();e=jn(e,t),e!==null&&(ko(e,t,n),ut(e,n))}function wN(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),ox(e,n)}function NN(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(B(314))}r!==null&&r.delete(t),ox(e,n)}var ix;ix=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||lt.current)ot=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return ot=!1,cN(e,t,n);ot=!!(e.flags&131072)}else ot=!1,Ne&&t.flags&1048576&&d0(t,Gi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ci(e,t),e=t.pendingProps;var s=Ls(t,Ye.current);bs(t,n),s=Zd(null,t,r,e,s,n);var o=ef();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ct(r)?(o=!0,Xi(t)):o=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Kd(t),s.updater=Ml,t.stateNode=s,s._reactInternals=t,Cu(t,r,e,n),t=Tu(null,t,r,!0,o,n)):(t.tag=0,Ne&&o&&Vd(t),Ze(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ci(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=kN(r),e=Pt(r,e),s){case 0:t=Ru(null,t,r,e,n);break e;case 1:t=Ym(null,t,r,e,n);break e;case 11:t=Km(null,t,r,e,n);break e;case 14:t=Xm(null,t,r,Pt(r.type,e),n);break e}throw Error(B(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Pt(r,s),Ru(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Pt(r,s),Ym(e,t,r,s,n);case 3:e:{if(U0(t),e===null)throw Error(B(387));r=t.pendingProps,o=t.memoizedState,s=o.element,x0(e,t),el(t,r,null,n);var i=t.memoizedState;if(r=i.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){s=Vs(Error(B(423)),t),t=Gm(e,t,r,n,s);break e}else if(r!==s){s=Vs(Error(B(424)),t),t=Gm(e,t,r,n,s);break e}else for(pt=Gn(t.stateNode.containerInfo.firstChild),gt=t,Ne=!0,Lt=null,n=p0(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(zs(),r===s){t=kn(e,t,n);break e}Ze(e,t,r,n)}t=t.child}return t;case 5:return y0(t),e===null&&ku(t),r=t.type,s=t.pendingProps,o=e!==null?e.memoizedProps:null,i=s.children,vu(r,s)?i=null:o!==null&&vu(r,o)&&(t.flags|=32),B0(e,t),Ze(e,t,i,n),t.child;case 6:return e===null&&ku(t),null;case 13:return W0(e,t,n);case 4:return Xd(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Fs(t,null,r,n):Ze(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Pt(r,s),Km(e,t,r,s,n);case 7:return Ze(e,t,t.pendingProps,n),t.child;case 8:return Ze(e,t,t.pendingProps.children,n),t.child;case 12:return Ze(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,o=t.memoizedProps,i=s.value,ye(Ji,r._currentValue),r._currentValue=i,o!==null)if(Bt(o.value,i)){if(o.children===s.children&&!lt.current){t=kn(e,t,n);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var l=o.dependencies;if(l!==null){i=o.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(o.tag===1){c=bn(-1,n&-n),c.tag=2;var u=o.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),_u(o.return,n,t),l.lanes|=n;break}c=c.next}}else if(o.tag===10)i=o.type===t.type?null:o.child;else if(o.tag===18){if(i=o.return,i===null)throw Error(B(341));i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),_u(i,n,t),i=o.sibling}else i=o.child;if(i!==null)i.return=o;else for(i=o;i!==null;){if(i===t){i=null;break}if(o=i.sibling,o!==null){o.return=i.return,i=o;break}i=i.return}o=i}Ze(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,bs(t,n),s=Rt(s),r=r(s),t.flags|=1,Ze(e,t,r,n),t.child;case 14:return r=t.type,s=Pt(r,t.pendingProps),s=Pt(r.type,s),Xm(e,t,r,s,n);case 15:return V0(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Pt(r,s),Ci(e,t),t.tag=1,ct(r)?(e=!0,Xi(t)):e=!1,bs(t,n),z0(t,r,s),Cu(t,r,s,n),Tu(null,t,r,!0,e,n);case 19:return q0(e,t,n);case 22:return H0(e,t,n)}throw Error(B(156,t.tag))};function lx(e,t){return Ag(e,t)}function jN(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ct(e,t,n,r){return new jN(e,t,n,r)}function df(e){return e=e.prototype,!(!e||!e.isReactComponent)}function kN(e){if(typeof e=="function")return df(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Rd)return 11;if(e===Td)return 14}return 2}function tr(e,t){var n=e.alternate;return n===null?(n=Ct(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ti(e,t,n,r,s,o){var i=2;if(r=e,typeof e=="function")df(e)&&(i=1);else if(typeof e=="string")i=5;else e:switch(e){case rs:return Pr(n.children,s,o,t);case Ed:i=8,s|=8;break;case Gc:return e=Ct(12,n,t,s|2),e.elementType=Gc,e.lanes=o,e;case Jc:return e=Ct(13,n,t,s),e.elementType=Jc,e.lanes=o,e;case Zc:return e=Ct(19,n,t,s),e.elementType=Zc,e.lanes=o,e;case yg:return Dl(n,s,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case gg:i=10;break e;case xg:i=9;break e;case Rd:i=11;break e;case Td:i=14;break e;case In:i=16,r=null;break e}throw Error(B(130,e==null?e:typeof e,""))}return t=Ct(i,n,t,s),t.elementType=e,t.type=r,t.lanes=o,t}function Pr(e,t,n,r){return e=Ct(7,e,r,t),e.lanes=n,e}function Dl(e,t,n,r){return e=Ct(22,e,r,t),e.elementType=yg,e.lanes=n,e.stateNode={isHidden:!1},e}function Ic(e,t,n){return e=Ct(6,e,null,t),e.lanes=n,e}function Dc(e,t,n){return t=Ct(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function _N(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=hc(0),this.expirationTimes=hc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=hc(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function ff(e,t,n,r,s,o,i,l,c){return e=new _N(e,t,n,l,c),t===1?(t=1,o===!0&&(t|=8)):t=0,o=Ct(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Kd(o),e}function SN(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ns,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function cx(e){if(!e)return ar;e=e._reactInternals;e:{if(Xr(e)!==e||e.tag!==1)throw Error(B(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ct(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(B(171))}if(e.tag===1){var n=e.type;if(ct(n))return c0(e,n,t)}return t}function ux(e,t,n,r,s,o,i,l,c){return e=ff(n,r,!0,e,s,o,i,l,c),e.context=cx(null),n=e.current,r=et(),s=er(n),o=bn(r,s),o.callback=t??null,Jn(n,o,s),e.current.lanes=s,ko(e,s,r),ut(e,r),e}function Al(e,t,n,r){var s=t.current,o=et(),i=er(s);return n=cx(n),t.context===null?t.context=n:t.pendingContext=n,t=bn(o,i),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Jn(s,t,i),e!==null&&(Ht(e,s,i,o),ki(e,s,i)),i}function ll(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function ih(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function mf(e,t){ih(e,t),(e=e.alternate)&&ih(e,t)}function CN(){return null}var dx=typeof reportError=="function"?reportError:function(e){console.error(e)};function hf(e){this._internalRoot=e}Ol.prototype.render=hf.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(B(409));Al(e,t,null,null)};Ol.prototype.unmount=hf.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Vr(function(){Al(null,e,null,null)}),t[Nn]=null}};function Ol(e){this._internalRoot=e}Ol.prototype.unstable_scheduleHydration=function(e){if(e){var t=Hg();e={blockedOn:null,target:e,priority:t};for(var n=0;n<An.length&&t!==0&&t<An[n].priority;n++);An.splice(n,0,e),n===0&&Ug(e)}};function pf(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Ll(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function lh(){}function EN(e,t,n,r,s){if(s){if(typeof r=="function"){var o=r;r=function(){var u=ll(i);o.call(u)}}var i=ux(t,r,e,0,null,!1,!1,"",lh);return e._reactRootContainer=i,e[Nn]=i.current,Ya(e.nodeType===8?e.parentNode:e),Vr(),i}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var u=ll(c);l.call(u)}}var c=ff(e,0,!1,null,null,!1,!1,"",lh);return e._reactRootContainer=c,e[Nn]=c.current,Ya(e.nodeType===8?e.parentNode:e),Vr(function(){Al(t,c,n,r)}),c}function zl(e,t,n,r,s){var o=n._reactRootContainer;if(o){var i=o;if(typeof s=="function"){var l=s;s=function(){var c=ll(i);l.call(c)}}Al(t,i,e,s)}else i=EN(n,t,e,s,r);return ll(i)}$g=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Sa(t.pendingLanes);n!==0&&(Id(t,n|1),ut(t,Me()),!(fe&6)&&(Hs=Me()+500,cr()))}break;case 13:Vr(function(){var r=jn(e,1);if(r!==null){var s=et();Ht(r,e,1,s)}}),mf(e,1)}};Dd=function(e){if(e.tag===13){var t=jn(e,134217728);if(t!==null){var n=et();Ht(t,e,134217728,n)}mf(e,134217728)}};Vg=function(e){if(e.tag===13){var t=er(e),n=jn(e,t);if(n!==null){var r=et();Ht(n,e,t,r)}mf(e,t)}};Hg=function(){return xe};Bg=function(e,t){var n=xe;try{return xe=e,t()}finally{xe=n}};cu=function(e,t,n){switch(t){case"input":if(nu(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=El(r);if(!s)throw Error(B(90));bg(r),nu(r,s)}}}break;case"textarea":Ng(e,n);break;case"select":t=n.value,t!=null&&gs(e,!!n.multiple,t,!1)}};Rg=lf;Tg=Vr;var RN={usingClientEntryPoint:!1,Events:[So,is,El,Cg,Eg,lf]},ba={findFiberByHostInstance:gr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},TN={bundleType:ba.bundleType,version:ba.version,rendererPackageName:ba.rendererPackageName,rendererConfig:ba.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Sn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Ig(e),e===null?null:e.stateNode},findFiberByHostInstance:ba.findFiberByHostInstance||CN,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ii=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ii.isDisabled&&ii.supportsFiber)try{kl=ii.inject(TN),rn=ii}catch{}}bt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=RN;bt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!pf(t))throw Error(B(200));return SN(e,t,null,n)};bt.createRoot=function(e,t){if(!pf(e))throw Error(B(299));var n=!1,r="",s=dx;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=ff(e,1,!1,null,null,n,!1,r,s),e[Nn]=t.current,Ya(e.nodeType===8?e.parentNode:e),new hf(t)};bt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(B(188)):(e=Object.keys(e).join(","),Error(B(268,e)));return e=Ig(t),e=e===null?null:e.stateNode,e};bt.flushSync=function(e){return Vr(e)};bt.hydrate=function(e,t,n){if(!Ll(t))throw Error(B(200));return zl(null,e,t,!0,n)};bt.hydrateRoot=function(e,t,n){if(!pf(e))throw Error(B(405));var r=n!=null&&n.hydratedSources||null,s=!1,o="",i=dx;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(i=n.onRecoverableError)),t=ux(t,null,e,1,n??null,s,!1,o,i),e[Nn]=t.current,Ya(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new Ol(t)};bt.render=function(e,t,n){if(!Ll(t))throw Error(B(200));return zl(null,e,t,!1,n)};bt.unmountComponentAtNode=function(e){if(!Ll(e))throw Error(B(40));return e._reactRootContainer?(Vr(function(){zl(null,null,e,!1,function(){e._reactRootContainer=null,e[Nn]=null})}),!0):!1};bt.unstable_batchedUpdates=lf;bt.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Ll(n))throw Error(B(200));if(e==null||e._reactInternals===void 0)throw Error(B(38));return zl(e,t,n,!1,r)};bt.version="18.3.1-next-f1338f8080-20240426";function fx(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(fx)}catch(e){console.error(e)}}fx(),fg.exports=bt;var mx=fg.exports,ch=mx;Xc.createRoot=ch.createRoot,Xc.hydrateRoot=ch.hydrateRoot;var Eo=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},MN={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},zn,bd,Up,PN=(Up=class{constructor(){te(this,zn,MN);te(this,bd,!1)}setTimeoutProvider(e){Q(this,zn,e)}setTimeout(e,t){return D(this,zn).setTimeout(e,t)}clearTimeout(e){D(this,zn).clearTimeout(e)}setInterval(e,t){return D(this,zn).setInterval(e,t)}clearInterval(e){D(this,zn).clearInterval(e)}},zn=new WeakMap,bd=new WeakMap,Up),vr=new PN;function IN(e){setTimeout(e,0)}var Hr=typeof window>"u"||"Deno"in globalThis;function st(){}function DN(e,t){return typeof e=="function"?e(t):e}function Hu(e){return typeof e=="number"&&e>=0&&e!==1/0}function hx(e,t){return Math.max(e+(t||0)-Date.now(),0)}function nr(e,t){return typeof e=="function"?e(t):e}function kt(e,t){return typeof e=="function"?e(t):e}function uh(e,t){const{type:n="all",exact:r,fetchStatus:s,predicate:o,queryKey:i,stale:l}=e;if(i){if(r){if(t.queryHash!==gf(i,t.options))return!1}else if(!oo(t.queryKey,i))return!1}if(n!=="all"){const c=t.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||s&&s!==t.state.fetchStatus||o&&!o(t))}function dh(e,t){const{exact:n,status:r,predicate:s,mutationKey:o}=e;if(o){if(!t.options.mutationKey)return!1;if(n){if(ao(t.options.mutationKey)!==ao(o))return!1}else if(!oo(t.options.mutationKey,o))return!1}return!(r&&t.state.status!==r||s&&!s(t))}function gf(e,t){return((t==null?void 0:t.queryKeyHashFn)||ao)(e)}function ao(e){return JSON.stringify(e,(t,n)=>Uu(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function oo(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(n=>oo(e[n],t[n])):!1}var AN=Object.prototype.hasOwnProperty;function px(e,t){if(e===t)return e;const n=fh(e)&&fh(t);if(!n&&!(Uu(e)&&Uu(t)))return t;const s=(n?e:Object.keys(e)).length,o=n?t:Object.keys(t),i=o.length,l=n?new Array(i):{};let c=0;for(let u=0;u<i;u++){const d=n?u:o[u],f=e[d],m=t[d];if(f===m){l[d]=f,(n?u<s:AN.call(e,d))&&c++;continue}if(f===null||m===null||typeof f!="object"||typeof m!="object"){l[d]=m;continue}const y=px(f,m);l[d]=y,y===f&&c++}return s===i&&c===s?e:l}function Bu(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}function fh(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Uu(e){if(!mh(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!mh(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function mh(e){return Object.prototype.toString.call(e)==="[object Object]"}function ON(e){return new Promise(t=>{vr.setTimeout(t,e)})}function Wu(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?px(e,t):t}function LN(e,t,n=0){const r=[...e,t];return n&&r.length>n?r.slice(1):r}function zN(e,t,n=0){const r=[t,...e];return n&&r.length>n?r.slice(0,-1):r}var xf=Symbol();function gx(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===xf?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function FN(e,t){return typeof e=="function"?e(...t):!!e}var Nr,Fn,ks,Wp,$N=(Wp=class extends Eo{constructor(){super();te(this,Nr);te(this,Fn);te(this,ks);Q(this,ks,t=>{if(!Hr&&window.addEventListener){const n=()=>t();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){D(this,Fn)||this.setEventListener(D(this,ks))}onUnsubscribe(){var t;this.hasListeners()||((t=D(this,Fn))==null||t.call(this),Q(this,Fn,void 0))}setEventListener(t){var n;Q(this,ks,t),(n=D(this,Fn))==null||n.call(this),Q(this,Fn,t(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(t){D(this,Nr)!==t&&(Q(this,Nr,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(n=>{n(t)})}isFocused(){var t;return typeof D(this,Nr)=="boolean"?D(this,Nr):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},Nr=new WeakMap,Fn=new WeakMap,ks=new WeakMap,Wp),yf=new $N;function qu(){let e,t;const n=new Promise((s,o)=>{e=s,t=o});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),e(s)},n.reject=s=>{r({status:"rejected",reason:s}),t(s)},n}var VN=IN;function HN(){let e=[],t=0,n=l=>{l()},r=l=>{l()},s=VN;const o=l=>{t?e.push(l):s(()=>{n(l)})},i=()=>{const l=e;e=[],l.length&&s(()=>{r(()=>{l.forEach(c=>{n(c)})})})};return{batch:l=>{let c;t++;try{c=l()}finally{t--,t||i()}return c},batchCalls:l=>(...c)=>{o(()=>{l(...c)})},schedule:o,setNotifyFunction:l=>{n=l},setBatchNotifyFunction:l=>{r=l},setScheduler:l=>{s=l}}}var He=HN(),_s,$n,Ss,qp,BN=(qp=class extends Eo{constructor(){super();te(this,_s,!0);te(this,$n);te(this,Ss);Q(this,Ss,t=>{if(!Hr&&window.addEventListener){const n=()=>t(!0),r=()=>t(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){D(this,$n)||this.setEventListener(D(this,Ss))}onUnsubscribe(){var t;this.hasListeners()||((t=D(this,$n))==null||t.call(this),Q(this,$n,void 0))}setEventListener(t){var n;Q(this,Ss,t),(n=D(this,$n))==null||n.call(this),Q(this,$n,t(this.setOnline.bind(this)))}setOnline(t){D(this,_s)!==t&&(Q(this,_s,t),this.listeners.forEach(r=>{r(t)}))}isOnline(){return D(this,_s)}},_s=new WeakMap,$n=new WeakMap,Ss=new WeakMap,qp),cl=new BN;function UN(e){return Math.min(1e3*2**e,3e4)}function xx(e){return(e??"online")==="online"?cl.isOnline():!0}var Qu=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function yx(e){let t=!1,n=0,r;const s=qu(),o=()=>s.status!=="pending",i=w=>{var N;if(!o()){const h=new Qu(w);m(h),(N=e.onCancel)==null||N.call(e,h)}},l=()=>{t=!0},c=()=>{t=!1},u=()=>yf.isFocused()&&(e.networkMode==="always"||cl.isOnline())&&e.canRun(),d=()=>xx(e.networkMode)&&e.canRun(),f=w=>{o()||(r==null||r(),s.resolve(w))},m=w=>{o()||(r==null||r(),s.reject(w))},y=()=>new Promise(w=>{var N;r=h=>{(o()||u())&&w(h)},(N=e.onPause)==null||N.call(e)}).then(()=>{var w;r=void 0,o()||(w=e.onContinue)==null||w.call(e)}),p=()=>{if(o())return;let w;const N=n===0?e.initialPromise:void 0;try{w=N??e.fn()}catch(h){w=Promise.reject(h)}Promise.resolve(w).then(f).catch(h=>{var k;if(o())return;const g=e.retry??(Hr?0:3),x=e.retryDelay??UN,b=typeof x=="function"?x(n,h):x,j=g===!0||typeof g=="number"&&n<g||typeof g=="function"&&g(n,h);if(t||!j){m(h);return}n++,(k=e.onFail)==null||k.call(e,n,h),ON(b).then(()=>u()?void 0:y()).then(()=>{t?m(h):p()})})};return{promise:s,status:()=>s.status,cancel:i,continue:()=>(r==null||r(),s),cancelRetry:l,continueRetry:c,canStart:d,start:()=>(d()?p():y().then(p),s)}}var jr,Qp,vx=(Qp=class{constructor(){te(this,jr)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Hu(this.gcTime)&&Q(this,jr,vr.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Hr?1/0:5*60*1e3))}clearGcTimeout(){D(this,jr)&&(vr.clearTimeout(D(this,jr)),Q(this,jr,void 0))}},jr=new WeakMap,Qp),kr,Cs,Nt,_r,ze,yo,Sr,It,fn,Kp,WN=(Kp=class extends vx{constructor(t){super();te(this,It);te(this,kr);te(this,Cs);te(this,Nt);te(this,_r);te(this,ze);te(this,yo);te(this,Sr);Q(this,Sr,!1),Q(this,yo,t.defaultOptions),this.setOptions(t.options),this.observers=[],Q(this,_r,t.client),Q(this,Nt,D(this,_r).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,Q(this,kr,ph(this.options)),this.state=t.state??D(this,kr),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=D(this,ze))==null?void 0:t.promise}setOptions(t){if(this.options={...D(this,yo),...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const n=ph(this.options);n.data!==void 0&&(this.setState(hh(n.data,n.dataUpdatedAt)),Q(this,kr,n))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&D(this,Nt).remove(this)}setData(t,n){const r=Wu(this.state.data,t,this.options);return ce(this,It,fn).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(t,n){ce(this,It,fn).call(this,{type:"setState",state:t,setStateOptions:n})}cancel(t){var r,s;const n=(r=D(this,ze))==null?void 0:r.promise;return(s=D(this,ze))==null||s.cancel(t),n?n.then(st).catch(st):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(D(this,kr))}isActive(){return this.observers.some(t=>kt(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===xf||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>nr(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!hx(this.state.dataUpdatedAt,t)}onFocus(){var n;const t=this.observers.find(r=>r.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(n=D(this,ze))==null||n.continue()}onOnline(){var n;const t=this.observers.find(r=>r.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(n=D(this,ze))==null||n.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),D(this,Nt).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(n=>n!==t),this.observers.length||(D(this,ze)&&(D(this,Sr)?D(this,ze).cancel({revert:!0}):D(this,ze).cancelRetry()),this.scheduleGc()),D(this,Nt).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||ce(this,It,fn).call(this,{type:"invalidate"})}async fetch(t,n){var c,u,d,f,m,y,p,w,N,h,g,x;if(this.state.fetchStatus!=="idle"&&((c=D(this,ze))==null?void 0:c.status())!=="rejected"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(D(this,ze))return D(this,ze).continueRetry(),D(this,ze).promise}if(t&&this.setOptions(t),!this.options.queryFn){const b=this.observers.find(j=>j.options.queryFn);b&&this.setOptions(b.options)}const r=new AbortController,s=b=>{Object.defineProperty(b,"signal",{enumerable:!0,get:()=>(Q(this,Sr,!0),r.signal)})},o=()=>{const b=gx(this.options,n),k=(()=>{const v={client:D(this,_r),queryKey:this.queryKey,meta:this.meta};return s(v),v})();return Q(this,Sr,!1),this.options.persister?this.options.persister(b,k,this):b(k)},l=(()=>{const b={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:D(this,_r),state:this.state,fetchFn:o};return s(b),b})();(u=this.options.behavior)==null||u.onFetch(l,this),Q(this,Cs,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=l.fetchOptions)==null?void 0:d.meta))&&ce(this,It,fn).call(this,{type:"fetch",meta:(f=l.fetchOptions)==null?void 0:f.meta}),Q(this,ze,yx({initialPromise:n==null?void 0:n.initialPromise,fn:l.fetchFn,onCancel:b=>{b instanceof Qu&&b.revert&&this.setState({...D(this,Cs),fetchStatus:"idle"}),r.abort()},onFail:(b,j)=>{ce(this,It,fn).call(this,{type:"failed",failureCount:b,error:j})},onPause:()=>{ce(this,It,fn).call(this,{type:"pause"})},onContinue:()=>{ce(this,It,fn).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0}));try{const b=await D(this,ze).start();if(b===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(b),(y=(m=D(this,Nt).config).onSuccess)==null||y.call(m,b,this),(w=(p=D(this,Nt).config).onSettled)==null||w.call(p,b,this.state.error,this),b}catch(b){if(b instanceof Qu){if(b.silent)return D(this,ze).promise;if(b.revert){if(this.state.data===void 0)throw b;return this.state.data}}throw ce(this,It,fn).call(this,{type:"error",error:b}),(h=(N=D(this,Nt).config).onError)==null||h.call(N,b,this),(x=(g=D(this,Nt).config).onSettled)==null||x.call(g,this.state.data,b,this),b}finally{this.scheduleGc()}}},kr=new WeakMap,Cs=new WeakMap,Nt=new WeakMap,_r=new WeakMap,ze=new WeakMap,yo=new WeakMap,Sr=new WeakMap,It=new WeakSet,fn=function(t){const n=r=>{switch(t.type){case"failed":return{...r,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...bx(r.data,this.options),fetchMeta:t.meta??null};case"success":const s={...r,...hh(t.data,t.dataUpdatedAt),dataUpdateCount:r.dataUpdateCount+1,...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return Q(this,Cs,t.manual?s:void 0),s;case"error":const o=t.error;return{...r,error:o,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:o,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...t.state}}};this.state=n(this.state),He.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),D(this,Nt).notify({query:this,type:"updated",action:t})})},Kp);function bx(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:xx(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function hh(e,t){return{data:e,dataUpdatedAt:t??Date.now(),error:null,isInvalidated:!1,status:"success"}}function ph(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,r=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var rt,ue,vo,Ge,Cr,Es,pn,Vn,bo,Rs,Ts,Er,Rr,Hn,Ms,ge,Ea,Ku,Xu,Yu,Gu,Ju,Zu,ed,wx,Xp,qN=(Xp=class extends Eo{constructor(t,n){super();te(this,ge);te(this,rt);te(this,ue);te(this,vo);te(this,Ge);te(this,Cr);te(this,Es);te(this,pn);te(this,Vn);te(this,bo);te(this,Rs);te(this,Ts);te(this,Er);te(this,Rr);te(this,Hn);te(this,Ms,new Set);this.options=n,Q(this,rt,t),Q(this,Vn,null),Q(this,pn,qu()),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(D(this,ue).addObserver(this),gh(D(this,ue),this.options)?ce(this,ge,Ea).call(this):this.updateResult(),ce(this,ge,Gu).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return td(D(this,ue),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return td(D(this,ue),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,ce(this,ge,Ju).call(this),ce(this,ge,Zu).call(this),D(this,ue).removeObserver(this)}setOptions(t){const n=this.options,r=D(this,ue);if(this.options=D(this,rt).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof kt(this.options.enabled,D(this,ue))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");ce(this,ge,ed).call(this),D(this,ue).setOptions(this.options),n._defaulted&&!Bu(this.options,n)&&D(this,rt).getQueryCache().notify({type:"observerOptionsUpdated",query:D(this,ue),observer:this});const s=this.hasListeners();s&&xh(D(this,ue),r,this.options,n)&&ce(this,ge,Ea).call(this),this.updateResult(),s&&(D(this,ue)!==r||kt(this.options.enabled,D(this,ue))!==kt(n.enabled,D(this,ue))||nr(this.options.staleTime,D(this,ue))!==nr(n.staleTime,D(this,ue)))&&ce(this,ge,Ku).call(this);const o=ce(this,ge,Xu).call(this);s&&(D(this,ue)!==r||kt(this.options.enabled,D(this,ue))!==kt(n.enabled,D(this,ue))||o!==D(this,Hn))&&ce(this,ge,Yu).call(this,o)}getOptimisticResult(t){const n=D(this,rt).getQueryCache().build(D(this,rt),t),r=this.createResult(n,t);return KN(this,r)&&(Q(this,Ge,r),Q(this,Es,this.options),Q(this,Cr,D(this,ue).state)),r}getCurrentResult(){return D(this,Ge)}trackResult(t,n){return new Proxy(t,{get:(r,s)=>(this.trackProp(s),n==null||n(s),s==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&D(this,pn).status==="pending"&&D(this,pn).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(r,s))})}trackProp(t){D(this,Ms).add(t)}getCurrentQuery(){return D(this,ue)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const n=D(this,rt).defaultQueryOptions(t),r=D(this,rt).getQueryCache().build(D(this,rt),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(t){return ce(this,ge,Ea).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),D(this,Ge)))}createResult(t,n){var M;const r=D(this,ue),s=this.options,o=D(this,Ge),i=D(this,Cr),l=D(this,Es),u=t!==r?t.state:D(this,vo),{state:d}=t;let f={...d},m=!1,y;if(n._optimisticResults){const P=this.hasListeners(),T=!P&&gh(t,n),C=P&&xh(t,r,n,s);(T||C)&&(f={...f,...bx(d.data,t.options)}),n._optimisticResults==="isRestoring"&&(f.fetchStatus="idle")}let{error:p,errorUpdatedAt:w,status:N}=f;y=f.data;let h=!1;if(n.placeholderData!==void 0&&y===void 0&&N==="pending"){let P;o!=null&&o.isPlaceholderData&&n.placeholderData===(l==null?void 0:l.placeholderData)?(P=o.data,h=!0):P=typeof n.placeholderData=="function"?n.placeholderData((M=D(this,Ts))==null?void 0:M.state.data,D(this,Ts)):n.placeholderData,P!==void 0&&(N="success",y=Wu(o==null?void 0:o.data,P,n),m=!0)}if(n.select&&y!==void 0&&!h)if(o&&y===(i==null?void 0:i.data)&&n.select===D(this,bo))y=D(this,Rs);else try{Q(this,bo,n.select),y=n.select(y),y=Wu(o==null?void 0:o.data,y,n),Q(this,Rs,y),Q(this,Vn,null)}catch(P){Q(this,Vn,P)}D(this,Vn)&&(p=D(this,Vn),y=D(this,Rs),w=Date.now(),N="error");const g=f.fetchStatus==="fetching",x=N==="pending",b=N==="error",j=x&&g,k=y!==void 0,_={status:N,fetchStatus:f.fetchStatus,isPending:x,isSuccess:N==="success",isError:b,isInitialLoading:j,isLoading:j,data:y,dataUpdatedAt:f.dataUpdatedAt,error:p,errorUpdatedAt:w,failureCount:f.fetchFailureCount,failureReason:f.fetchFailureReason,errorUpdateCount:f.errorUpdateCount,isFetched:f.dataUpdateCount>0||f.errorUpdateCount>0,isFetchedAfterMount:f.dataUpdateCount>u.dataUpdateCount||f.errorUpdateCount>u.errorUpdateCount,isFetching:g,isRefetching:g&&!x,isLoadingError:b&&!k,isPaused:f.fetchStatus==="paused",isPlaceholderData:m,isRefetchError:b&&k,isStale:vf(t,n),refetch:this.refetch,promise:D(this,pn),isEnabled:kt(n.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const P=O=>{_.status==="error"?O.reject(_.error):_.data!==void 0&&O.resolve(_.data)},T=()=>{const O=Q(this,pn,_.promise=qu());P(O)},C=D(this,pn);switch(C.status){case"pending":t.queryHash===r.queryHash&&P(C);break;case"fulfilled":(_.status==="error"||_.data!==C.value)&&T();break;case"rejected":(_.status!=="error"||_.error!==C.reason)&&T();break}}return _}updateResult(){const t=D(this,Ge),n=this.createResult(D(this,ue),this.options);if(Q(this,Cr,D(this,ue).state),Q(this,Es,this.options),D(this,Cr).data!==void 0&&Q(this,Ts,D(this,ue)),Bu(n,t))return;Q(this,Ge,n);const r=()=>{if(!t)return!0;const{notifyOnChangeProps:s}=this.options,o=typeof s=="function"?s():s;if(o==="all"||!o&&!D(this,Ms).size)return!0;const i=new Set(o??D(this,Ms));return this.options.throwOnError&&i.add("error"),Object.keys(D(this,Ge)).some(l=>{const c=l;return D(this,Ge)[c]!==t[c]&&i.has(c)})};ce(this,ge,wx).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&ce(this,ge,Gu).call(this)}},rt=new WeakMap,ue=new WeakMap,vo=new WeakMap,Ge=new WeakMap,Cr=new WeakMap,Es=new WeakMap,pn=new WeakMap,Vn=new WeakMap,bo=new WeakMap,Rs=new WeakMap,Ts=new WeakMap,Er=new WeakMap,Rr=new WeakMap,Hn=new WeakMap,Ms=new WeakMap,ge=new WeakSet,Ea=function(t){ce(this,ge,ed).call(this);let n=D(this,ue).fetch(this.options,t);return t!=null&&t.throwOnError||(n=n.catch(st)),n},Ku=function(){ce(this,ge,Ju).call(this);const t=nr(this.options.staleTime,D(this,ue));if(Hr||D(this,Ge).isStale||!Hu(t))return;const r=hx(D(this,Ge).dataUpdatedAt,t)+1;Q(this,Er,vr.setTimeout(()=>{D(this,Ge).isStale||this.updateResult()},r))},Xu=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(D(this,ue)):this.options.refetchInterval)??!1},Yu=function(t){ce(this,ge,Zu).call(this),Q(this,Hn,t),!(Hr||kt(this.options.enabled,D(this,ue))===!1||!Hu(D(this,Hn))||D(this,Hn)===0)&&Q(this,Rr,vr.setInterval(()=>{(this.options.refetchIntervalInBackground||yf.isFocused())&&ce(this,ge,Ea).call(this)},D(this,Hn)))},Gu=function(){ce(this,ge,Ku).call(this),ce(this,ge,Yu).call(this,ce(this,ge,Xu).call(this))},Ju=function(){D(this,Er)&&(vr.clearTimeout(D(this,Er)),Q(this,Er,void 0))},Zu=function(){D(this,Rr)&&(vr.clearInterval(D(this,Rr)),Q(this,Rr,void 0))},ed=function(){const t=D(this,rt).getQueryCache().build(D(this,rt),this.options);if(t===D(this,ue))return;const n=D(this,ue);Q(this,ue,t),Q(this,vo,t.state),this.hasListeners()&&(n==null||n.removeObserver(this),t.addObserver(this))},wx=function(t){He.batch(()=>{t.listeners&&this.listeners.forEach(n=>{n(D(this,Ge))}),D(this,rt).getQueryCache().notify({query:D(this,ue),type:"observerResultsUpdated"})})},Xp);function QN(e,t){return kt(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function gh(e,t){return QN(e,t)||e.state.data!==void 0&&td(e,t,t.refetchOnMount)}function td(e,t,n){if(kt(t.enabled,e)!==!1&&nr(t.staleTime,e)!=="static"){const r=typeof n=="function"?n(e):n;return r==="always"||r!==!1&&vf(e,t)}return!1}function xh(e,t,n,r){return(e!==t||kt(r.enabled,e)===!1)&&(!n.suspense||e.state.status!=="error")&&vf(e,n)}function vf(e,t){return kt(t.enabled,e)!==!1&&e.isStaleByTime(nr(t.staleTime,e))}function KN(e,t){return!Bu(e.getCurrentResult(),t)}function yh(e){return{onFetch:(t,n)=>{var d,f,m,y,p;const r=t.options,s=(m=(f=(d=t.fetchOptions)==null?void 0:d.meta)==null?void 0:f.fetchMore)==null?void 0:m.direction,o=((y=t.state.data)==null?void 0:y.pages)||[],i=((p=t.state.data)==null?void 0:p.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const u=async()=>{let w=!1;const N=x=>{Object.defineProperty(x,"signal",{enumerable:!0,get:()=>(t.signal.aborted?w=!0:t.signal.addEventListener("abort",()=>{w=!0}),t.signal)})},h=gx(t.options,t.fetchOptions),g=async(x,b,j)=>{if(w)return Promise.reject();if(b==null&&x.pages.length)return Promise.resolve(x);const v=(()=>{const T={client:t.client,queryKey:t.queryKey,pageParam:b,direction:j?"backward":"forward",meta:t.options.meta};return N(T),T})(),_=await h(v),{maxPages:M}=t.options,P=j?zN:LN;return{pages:P(x.pages,_,M),pageParams:P(x.pageParams,b,M)}};if(s&&o.length){const x=s==="backward",b=x?XN:vh,j={pages:o,pageParams:i},k=b(r,j);l=await g(j,k,x)}else{const x=e??o.length;do{const b=c===0?i[0]??r.initialPageParam:vh(r,l);if(c>0&&b==null)break;l=await g(l,b),c++}while(c<x)}return l};t.options.persister?t.fetchFn=()=>{var w,N;return(N=(w=t.options).persister)==null?void 0:N.call(w,u,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n)}:t.fetchFn=u}}}function vh(e,{pages:t,pageParams:n}){const r=t.length-1;return t.length>0?e.getNextPageParam(t[r],t,n[r],n):void 0}function XN(e,{pages:t,pageParams:n}){var r;return t.length>0?(r=e.getPreviousPageParam)==null?void 0:r.call(e,t[0],t,n[0],n):void 0}var wo,Gt,Je,Tr,Jt,Pn,Yp,YN=(Yp=class extends vx{constructor(t){super();te(this,Jt);te(this,wo);te(this,Gt);te(this,Je);te(this,Tr);Q(this,wo,t.client),this.mutationId=t.mutationId,Q(this,Je,t.mutationCache),Q(this,Gt,[]),this.state=t.state||GN(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){D(this,Gt).includes(t)||(D(this,Gt).push(t),this.clearGcTimeout(),D(this,Je).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){Q(this,Gt,D(this,Gt).filter(n=>n!==t)),this.scheduleGc(),D(this,Je).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){D(this,Gt).length||(this.state.status==="pending"?this.scheduleGc():D(this,Je).remove(this))}continue(){var t;return((t=D(this,Tr))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var i,l,c,u,d,f,m,y,p,w,N,h,g,x,b,j,k,v,_,M;const n=()=>{ce(this,Jt,Pn).call(this,{type:"continue"})},r={client:D(this,wo),meta:this.options.meta,mutationKey:this.options.mutationKey};Q(this,Tr,yx({fn:()=>this.options.mutationFn?this.options.mutationFn(t,r):Promise.reject(new Error("No mutationFn found")),onFail:(P,T)=>{ce(this,Jt,Pn).call(this,{type:"failed",failureCount:P,error:T})},onPause:()=>{ce(this,Jt,Pn).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>D(this,Je).canRun(this)}));const s=this.state.status==="pending",o=!D(this,Tr).canStart();try{if(s)n();else{ce(this,Jt,Pn).call(this,{type:"pending",variables:t,isPaused:o}),await((l=(i=D(this,Je).config).onMutate)==null?void 0:l.call(i,t,this,r));const T=await((u=(c=this.options).onMutate)==null?void 0:u.call(c,t,r));T!==this.state.context&&ce(this,Jt,Pn).call(this,{type:"pending",context:T,variables:t,isPaused:o})}const P=await D(this,Tr).start();return await((f=(d=D(this,Je).config).onSuccess)==null?void 0:f.call(d,P,t,this.state.context,this,r)),await((y=(m=this.options).onSuccess)==null?void 0:y.call(m,P,t,this.state.context,r)),await((w=(p=D(this,Je).config).onSettled)==null?void 0:w.call(p,P,null,this.state.variables,this.state.context,this,r)),await((h=(N=this.options).onSettled)==null?void 0:h.call(N,P,null,t,this.state.context,r)),ce(this,Jt,Pn).call(this,{type:"success",data:P}),P}catch(P){try{throw await((x=(g=D(this,Je).config).onError)==null?void 0:x.call(g,P,t,this.state.context,this,r)),await((j=(b=this.options).onError)==null?void 0:j.call(b,P,t,this.state.context,r)),await((v=(k=D(this,Je).config).onSettled)==null?void 0:v.call(k,void 0,P,this.state.variables,this.state.context,this,r)),await((M=(_=this.options).onSettled)==null?void 0:M.call(_,void 0,P,t,this.state.context,r)),P}finally{ce(this,Jt,Pn).call(this,{type:"error",error:P})}}finally{D(this,Je).runNext(this)}}},wo=new WeakMap,Gt=new WeakMap,Je=new WeakMap,Tr=new WeakMap,Jt=new WeakSet,Pn=function(t){const n=r=>{switch(t.type){case"failed":return{...r,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...r,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:t.error,failureCount:r.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=n(this.state),He.batch(()=>{D(this,Gt).forEach(r=>{r.onMutationUpdate(t)}),D(this,Je).notify({mutation:this,type:"updated",action:t})})},Yp);function GN(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var gn,Dt,No,Gp,JN=(Gp=class extends Eo{constructor(t={}){super();te(this,gn);te(this,Dt);te(this,No);this.config=t,Q(this,gn,new Set),Q(this,Dt,new Map),Q(this,No,0)}build(t,n,r){const s=new YN({client:t,mutationCache:this,mutationId:++Uo(this,No)._,options:t.defaultMutationOptions(n),state:r});return this.add(s),s}add(t){D(this,gn).add(t);const n=li(t);if(typeof n=="string"){const r=D(this,Dt).get(n);r?r.push(t):D(this,Dt).set(n,[t])}this.notify({type:"added",mutation:t})}remove(t){if(D(this,gn).delete(t)){const n=li(t);if(typeof n=="string"){const r=D(this,Dt).get(n);if(r)if(r.length>1){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}else r[0]===t&&D(this,Dt).delete(n)}}this.notify({type:"removed",mutation:t})}canRun(t){const n=li(t);if(typeof n=="string"){const r=D(this,Dt).get(n),s=r==null?void 0:r.find(o=>o.state.status==="pending");return!s||s===t}else return!0}runNext(t){var r;const n=li(t);if(typeof n=="string"){const s=(r=D(this,Dt).get(n))==null?void 0:r.find(o=>o!==t&&o.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){He.batch(()=>{D(this,gn).forEach(t=>{this.notify({type:"removed",mutation:t})}),D(this,gn).clear(),D(this,Dt).clear()})}getAll(){return Array.from(D(this,gn))}find(t){const n={exact:!0,...t};return this.getAll().find(r=>dh(n,r))}findAll(t={}){return this.getAll().filter(n=>dh(t,n))}notify(t){He.batch(()=>{this.listeners.forEach(n=>{n(t)})})}resumePausedMutations(){const t=this.getAll().filter(n=>n.state.isPaused);return He.batch(()=>Promise.all(t.map(n=>n.continue().catch(st))))}},gn=new WeakMap,Dt=new WeakMap,No=new WeakMap,Gp);function li(e){var t;return(t=e.options.scope)==null?void 0:t.id}var Zt,Jp,ZN=(Jp=class extends Eo{constructor(t={}){super();te(this,Zt);this.config=t,Q(this,Zt,new Map)}build(t,n,r){const s=n.queryKey,o=n.queryHash??gf(s,n);let i=this.get(o);return i||(i=new WN({client:t,queryKey:s,queryHash:o,options:t.defaultQueryOptions(n),state:r,defaultOptions:t.getQueryDefaults(s)}),this.add(i)),i}add(t){D(this,Zt).has(t.queryHash)||(D(this,Zt).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const n=D(this,Zt).get(t.queryHash);n&&(t.destroy(),n===t&&D(this,Zt).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){He.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return D(this,Zt).get(t)}getAll(){return[...D(this,Zt).values()]}find(t){const n={exact:!0,...t};return this.getAll().find(r=>uh(n,r))}findAll(t={}){const n=this.getAll();return Object.keys(t).length>0?n.filter(r=>uh(t,r)):n}notify(t){He.batch(()=>{this.listeners.forEach(n=>{n(t)})})}onFocus(){He.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){He.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},Zt=new WeakMap,Jp),Re,Bn,Un,Ps,Is,Wn,Ds,As,Zp,ej=(Zp=class{constructor(e={}){te(this,Re);te(this,Bn);te(this,Un);te(this,Ps);te(this,Is);te(this,Wn);te(this,Ds);te(this,As);Q(this,Re,e.queryCache||new ZN),Q(this,Bn,e.mutationCache||new JN),Q(this,Un,e.defaultOptions||{}),Q(this,Ps,new Map),Q(this,Is,new Map),Q(this,Wn,0)}mount(){Uo(this,Wn)._++,D(this,Wn)===1&&(Q(this,Ds,yf.subscribe(async e=>{e&&(await this.resumePausedMutations(),D(this,Re).onFocus())})),Q(this,As,cl.subscribe(async e=>{e&&(await this.resumePausedMutations(),D(this,Re).onOnline())})))}unmount(){var e,t;Uo(this,Wn)._--,D(this,Wn)===0&&((e=D(this,Ds))==null||e.call(this),Q(this,Ds,void 0),(t=D(this,As))==null||t.call(this),Q(this,As,void 0))}isFetching(e){return D(this,Re).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return D(this,Bn).findAll({...e,status:"pending"}).length}getQueryData(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=D(this,Re).get(t.queryHash))==null?void 0:n.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),n=D(this,Re).build(this,t),r=n.state.data;return r===void 0?this.fetchQuery(e):(e.revalidateIfStale&&n.isStaleByTime(nr(t.staleTime,n))&&this.prefetchQuery(t),Promise.resolve(r))}getQueriesData(e){return D(this,Re).findAll(e).map(({queryKey:t,state:n})=>{const r=n.data;return[t,r]})}setQueryData(e,t,n){const r=this.defaultQueryOptions({queryKey:e}),s=D(this,Re).get(r.queryHash),o=s==null?void 0:s.state.data,i=DN(t,o);if(i!==void 0)return D(this,Re).build(this,r).setData(i,{...n,manual:!0})}setQueriesData(e,t,n){return He.batch(()=>D(this,Re).findAll(e).map(({queryKey:r})=>[r,this.setQueryData(r,t,n)]))}getQueryState(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=D(this,Re).get(t.queryHash))==null?void 0:n.state}removeQueries(e){const t=D(this,Re);He.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=D(this,Re);return He.batch(()=>(n.findAll(e).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const n={revert:!0,...t},r=He.batch(()=>D(this,Re).findAll(e).map(s=>s.cancel(n)));return Promise.all(r).then(st).catch(st)}invalidateQueries(e,t={}){return He.batch(()=>(D(this,Re).findAll(e).forEach(n=>{n.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const n={...t,cancelRefetch:t.cancelRefetch??!0},r=He.batch(()=>D(this,Re).findAll(e).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let o=s.fetch(void 0,n);return n.throwOnError||(o=o.catch(st)),s.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(r).then(st)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=D(this,Re).build(this,t);return n.isStaleByTime(nr(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(st).catch(st)}fetchInfiniteQuery(e){return e.behavior=yh(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(st).catch(st)}ensureInfiniteQueryData(e){return e.behavior=yh(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return cl.isOnline()?D(this,Bn).resumePausedMutations():Promise.resolve()}getQueryCache(){return D(this,Re)}getMutationCache(){return D(this,Bn)}getDefaultOptions(){return D(this,Un)}setDefaultOptions(e){Q(this,Un,e)}setQueryDefaults(e,t){D(this,Ps).set(ao(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...D(this,Ps).values()],n={};return t.forEach(r=>{oo(e,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(e,t){D(this,Is).set(ao(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...D(this,Is).values()],n={};return t.forEach(r=>{oo(e,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...D(this,Un).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=gf(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===xf&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...D(this,Un).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){D(this,Re).clear(),D(this,Bn).clear()}},Re=new WeakMap,Bn=new WeakMap,Un=new WeakMap,Ps=new WeakMap,Is=new WeakMap,Wn=new WeakMap,Ds=new WeakMap,As=new WeakMap,Zp),Nx=S.createContext(void 0),tj=e=>{const t=S.useContext(Nx);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},nj=({client:e,children:t})=>(S.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),a.jsx(Nx.Provider,{value:e,children:t})),jx=S.createContext(!1),rj=()=>S.useContext(jx);jx.Provider;function sj(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var aj=S.createContext(sj()),oj=()=>S.useContext(aj),ij=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},lj=e=>{S.useEffect(()=>{e.clearReset()},[e])},cj=({result:e,errorResetBoundary:t,throwOnError:n,query:r,suspense:s})=>e.isError&&!t.isReset()&&!e.isFetching&&r&&(s&&e.data===void 0||FN(n,[e.error,r])),uj=e=>{if(e.suspense){const n=s=>s==="static"?s:Math.max(s??1e3,1e3),r=e.staleTime;e.staleTime=typeof r=="function"?(...s)=>n(r(...s)):n(r),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},dj=(e,t)=>e.isLoading&&e.isFetching&&!t,fj=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,bh=(e,t,n)=>t.fetchOptimistic(e).catch(()=>{n.clearReset()});function mj(e,t,n){var f,m,y,p,w;const r=rj(),s=oj(),o=tj(),i=o.defaultQueryOptions(e);(m=(f=o.getDefaultOptions().queries)==null?void 0:f._experimental_beforeQuery)==null||m.call(f,i),i._optimisticResults=r?"isRestoring":"optimistic",uj(i),ij(i,s),lj(s);const l=!o.getQueryCache().get(i.queryHash),[c]=S.useState(()=>new t(o,i)),u=c.getOptimisticResult(i),d=!r&&e.subscribed!==!1;if(S.useSyncExternalStore(S.useCallback(N=>{const h=d?c.subscribe(He.batchCalls(N)):st;return c.updateResult(),h},[c,d]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),S.useEffect(()=>{c.setOptions(i)},[i,c]),fj(i,u))throw bh(i,c,s);if(cj({result:u,errorResetBoundary:s,throwOnError:i.throwOnError,query:o.getQueryCache().get(i.queryHash),suspense:i.suspense}))throw u.error;if((p=(y=o.getDefaultOptions().queries)==null?void 0:y._experimental_afterQuery)==null||p.call(y,i,u),i.experimental_prefetchInRender&&!Hr&&dj(u,r)){const N=l?bh(i,c,s):(w=o.getQueryCache().get(i.queryHash))==null?void 0:w.promise;N==null||N.catch(st).finally(()=>{c.updateResult()})}return i.notifyOnChangeProps?u:c.trackResult(u)}function hj(e,t){return mj(e,qN)}const pr=class pr{constructor(){ic(this,"nodes",new Map)}static getInstance(){return pr.instance||(pr.instance=new pr),pr.instance}register(t){this.nodes.has(t.type)&&console.warn(`Node type "${t.type}" is already registered. Overwriting.`),this.nodes.set(t.type,t),console.log(`[Registry] Registered node: ${t.label} (${t.type})`)}get(t){return this.nodes.get(t)}getAll(){return Array.from(this.nodes.values())}getByCategory(){const t={};return this.nodes.forEach(n=>{t[n.category]||(t[n.category]=[]),t[n.category].push(n)}),t}};ic(pr,"instance");let nd=pr;const he=nd.getInstance(),pj={},wh=e=>{let t;const n=new Set,r=(d,f)=>{const m=typeof d=="function"?d(t):d;if(!Object.is(m,t)){const y=t;t=f??(typeof m!="object"||m===null)?m:Object.assign({},t,m),n.forEach(p=>p(t,y))}},s=()=>t,c={setState:r,getState:s,getInitialState:()=>u,subscribe:d=>(n.add(d),()=>n.delete(d)),destroy:()=>{(pj?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},u=t=e(r,s,c);return c},kx=e=>e?wh(e):wh;var _x={exports:{}},Sx={},Cx={exports:{}},Ex={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bs=S;function gj(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var xj=typeof Object.is=="function"?Object.is:gj,yj=Bs.useState,vj=Bs.useEffect,bj=Bs.useLayoutEffect,wj=Bs.useDebugValue;function Nj(e,t){var n=t(),r=yj({inst:{value:n,getSnapshot:t}}),s=r[0].inst,o=r[1];return bj(function(){s.value=n,s.getSnapshot=t,Ac(s)&&o({inst:s})},[e,n,t]),vj(function(){return Ac(s)&&o({inst:s}),e(function(){Ac(s)&&o({inst:s})})},[e]),wj(n),n}function Ac(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!xj(e,n)}catch{return!0}}function jj(e,t){return t()}var kj=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?jj:Nj;Ex.useSyncExternalStore=Bs.useSyncExternalStore!==void 0?Bs.useSyncExternalStore:kj;Cx.exports=Ex;var _j=Cx.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fl=S,Sj=_j;function Cj(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ej=typeof Object.is=="function"?Object.is:Cj,Rj=Sj.useSyncExternalStore,Tj=Fl.useRef,Mj=Fl.useEffect,Pj=Fl.useMemo,Ij=Fl.useDebugValue;Sx.useSyncExternalStoreWithSelector=function(e,t,n,r,s){var o=Tj(null);if(o.current===null){var i={hasValue:!1,value:null};o.current=i}else i=o.current;o=Pj(function(){function c(y){if(!u){if(u=!0,d=y,y=r(y),s!==void 0&&i.hasValue){var p=i.value;if(s(p,y))return f=p}return f=y}if(p=f,Ej(d,y))return p;var w=r(y);return s!==void 0&&s(p,w)?(d=y,p):(d=y,f=w)}var u=!1,d,f,m=n===void 0?null:n;return[function(){return c(t())},m===null?void 0:function(){return c(m())}]},[t,n,r,s]);var l=Rj(e,o[0],o[1]);return Mj(function(){i.hasValue=!0,i.value=l},[l]),Ij(l),l};_x.exports=Sx;var Dj=_x.exports;const Rx=eg(Dj),Tx={},{useDebugValue:Aj}=nn,{useSyncExternalStoreWithSelector:Oj}=Rx;let Nh=!1;const Lj=e=>e;function zj(e,t=Lj,n){(Tx?"production":void 0)!=="production"&&n&&!Nh&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),Nh=!0);const r=Oj(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return Aj(r),r}const jh=e=>{(Tx?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof e=="function"?kx(e):e,n=(r,s)=>zj(t,r,s);return Object.assign(n,t),n},Mx=e=>e?jh(e):jh;function Ae(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,r;n<e.length;n++)(r=Ae(e[n]))!==""&&(t+=(t&&" ")+r);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var Fj={value:()=>{}};function $l(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Mi(n)}function Mi(e){this._=e}function $j(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",s=n.indexOf(".");if(s>=0&&(r=n.slice(s+1),n=n.slice(0,s)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Mi.prototype=$l.prototype={constructor:Mi,on:function(e,t){var n=this._,r=$j(e+"",n),s,o=-1,i=r.length;if(arguments.length<2){for(;++o<i;)if((s=(e=r[o]).type)&&(s=Vj(n[s],e.name)))return s;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<i;)if(s=(e=r[o]).type)n[s]=kh(n[s],e.name,t);else if(t==null)for(s in n)n[s]=kh(n[s],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Mi(e)},call:function(e,t){if((s=arguments.length-2)>0)for(var n=new Array(s),r=0,s,o;r<s;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],r=0,s=o.length;r<s;++r)o[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],s=0,o=r.length;s<o;++s)r[s].value.apply(t,n)}};function Vj(e,t){for(var n=0,r=e.length,s;n<r;++n)if((s=e[n]).name===t)return s.value}function kh(e,t,n){for(var r=0,s=e.length;r<s;++r)if(e[r].name===t){e[r]=Fj,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var rd="http://www.w3.org/1999/xhtml";const _h={svg:"http://www.w3.org/2000/svg",xhtml:rd,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Vl(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),_h.hasOwnProperty(t)?{space:_h[t],local:e}:e}function Hj(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===rd&&t.documentElement.namespaceURI===rd?t.createElement(e):t.createElementNS(n,e)}}function Bj(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Px(e){var t=Vl(e);return(t.local?Bj:Hj)(t)}function Uj(){}function bf(e){return e==null?Uj:function(){return this.querySelector(e)}}function Wj(e){typeof e!="function"&&(e=bf(e));for(var t=this._groups,n=t.length,r=new Array(n),s=0;s<n;++s)for(var o=t[s],i=o.length,l=r[s]=new Array(i),c,u,d=0;d<i;++d)(c=o[d])&&(u=e.call(c,c.__data__,d,o))&&("__data__"in c&&(u.__data__=c.__data__),l[d]=u);return new yt(r,this._parents)}function qj(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Qj(){return[]}function Ix(e){return e==null?Qj:function(){return this.querySelectorAll(e)}}function Kj(e){return function(){return qj(e.apply(this,arguments))}}function Xj(e){typeof e=="function"?e=Kj(e):e=Ix(e);for(var t=this._groups,n=t.length,r=[],s=[],o=0;o<n;++o)for(var i=t[o],l=i.length,c,u=0;u<l;++u)(c=i[u])&&(r.push(e.call(c,c.__data__,u,i)),s.push(c));return new yt(r,s)}function Dx(e){return function(){return this.matches(e)}}function Ax(e){return function(t){return t.matches(e)}}var Yj=Array.prototype.find;function Gj(e){return function(){return Yj.call(this.children,e)}}function Jj(){return this.firstElementChild}function Zj(e){return this.select(e==null?Jj:Gj(typeof e=="function"?e:Ax(e)))}var e2=Array.prototype.filter;function t2(){return Array.from(this.children)}function n2(e){return function(){return e2.call(this.children,e)}}function r2(e){return this.selectAll(e==null?t2:n2(typeof e=="function"?e:Ax(e)))}function s2(e){typeof e!="function"&&(e=Dx(e));for(var t=this._groups,n=t.length,r=new Array(n),s=0;s<n;++s)for(var o=t[s],i=o.length,l=r[s]=[],c,u=0;u<i;++u)(c=o[u])&&e.call(c,c.__data__,u,o)&&l.push(c);return new yt(r,this._parents)}function Ox(e){return new Array(e.length)}function a2(){return new yt(this._enter||this._groups.map(Ox),this._parents)}function ul(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}ul.prototype={constructor:ul,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function o2(e){return function(){return e}}function i2(e,t,n,r,s,o){for(var i=0,l,c=t.length,u=o.length;i<u;++i)(l=t[i])?(l.__data__=o[i],r[i]=l):n[i]=new ul(e,o[i]);for(;i<c;++i)(l=t[i])&&(s[i]=l)}function l2(e,t,n,r,s,o,i){var l,c,u=new Map,d=t.length,f=o.length,m=new Array(d),y;for(l=0;l<d;++l)(c=t[l])&&(m[l]=y=i.call(c,c.__data__,l,t)+"",u.has(y)?s[l]=c:u.set(y,c));for(l=0;l<f;++l)y=i.call(e,o[l],l,o)+"",(c=u.get(y))?(r[l]=c,c.__data__=o[l],u.delete(y)):n[l]=new ul(e,o[l]);for(l=0;l<d;++l)(c=t[l])&&u.get(m[l])===c&&(s[l]=c)}function c2(e){return e.__data__}function u2(e,t){if(!arguments.length)return Array.from(this,c2);var n=t?l2:i2,r=this._parents,s=this._groups;typeof e!="function"&&(e=o2(e));for(var o=s.length,i=new Array(o),l=new Array(o),c=new Array(o),u=0;u<o;++u){var d=r[u],f=s[u],m=f.length,y=d2(e.call(d,d&&d.__data__,u,r)),p=y.length,w=l[u]=new Array(p),N=i[u]=new Array(p),h=c[u]=new Array(m);n(d,f,w,N,h,y,t);for(var g=0,x=0,b,j;g<p;++g)if(b=w[g]){for(g>=x&&(x=g+1);!(j=N[x])&&++x<p;);b._next=j||null}}return i=new yt(i,r),i._enter=l,i._exit=c,i}function d2(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function f2(){return new yt(this._exit||this._groups.map(Ox),this._parents)}function m2(e,t,n){var r=this.enter(),s=this,o=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(s=t(s),s&&(s=s.selection())),n==null?o.remove():n(o),r&&s?r.merge(s).order():s}function h2(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,s=n.length,o=r.length,i=Math.min(s,o),l=new Array(s),c=0;c<i;++c)for(var u=n[c],d=r[c],f=u.length,m=l[c]=new Array(f),y,p=0;p<f;++p)(y=u[p]||d[p])&&(m[p]=y);for(;c<s;++c)l[c]=n[c];return new yt(l,this._parents)}function p2(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],s=r.length-1,o=r[s],i;--s>=0;)(i=r[s])&&(o&&i.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(i,o),o=i);return this}function g2(e){e||(e=x2);function t(f,m){return f&&m?e(f.__data__,m.__data__):!f-!m}for(var n=this._groups,r=n.length,s=new Array(r),o=0;o<r;++o){for(var i=n[o],l=i.length,c=s[o]=new Array(l),u,d=0;d<l;++d)(u=i[d])&&(c[d]=u);c.sort(t)}return new yt(s,this._parents).order()}function x2(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function y2(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function v2(){return Array.from(this)}function b2(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],s=0,o=r.length;s<o;++s){var i=r[s];if(i)return i}return null}function w2(){let e=0;for(const t of this)++e;return e}function N2(){return!this.node()}function j2(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var s=t[n],o=0,i=s.length,l;o<i;++o)(l=s[o])&&e.call(l,l.__data__,o,s);return this}function k2(e){return function(){this.removeAttribute(e)}}function _2(e){return function(){this.removeAttributeNS(e.space,e.local)}}function S2(e,t){return function(){this.setAttribute(e,t)}}function C2(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function E2(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function R2(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function T2(e,t){var n=Vl(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?_2:k2:typeof t=="function"?n.local?R2:E2:n.local?C2:S2)(n,t))}function Lx(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function M2(e){return function(){this.style.removeProperty(e)}}function P2(e,t,n){return function(){this.style.setProperty(e,t,n)}}function I2(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function D2(e,t,n){return arguments.length>1?this.each((t==null?M2:typeof t=="function"?I2:P2)(e,t,n??"")):Us(this.node(),e)}function Us(e,t){return e.style.getPropertyValue(t)||Lx(e).getComputedStyle(e,null).getPropertyValue(t)}function A2(e){return function(){delete this[e]}}function O2(e,t){return function(){this[e]=t}}function L2(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function z2(e,t){return arguments.length>1?this.each((t==null?A2:typeof t=="function"?L2:O2)(e,t)):this.node()[e]}function zx(e){return e.trim().split(/^|\s+/)}function wf(e){return e.classList||new Fx(e)}function Fx(e){this._node=e,this._names=zx(e.getAttribute("class")||"")}Fx.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function $x(e,t){for(var n=wf(e),r=-1,s=t.length;++r<s;)n.add(t[r])}function Vx(e,t){for(var n=wf(e),r=-1,s=t.length;++r<s;)n.remove(t[r])}function F2(e){return function(){$x(this,e)}}function $2(e){return function(){Vx(this,e)}}function V2(e,t){return function(){(t.apply(this,arguments)?$x:Vx)(this,e)}}function H2(e,t){var n=zx(e+"");if(arguments.length<2){for(var r=wf(this.node()),s=-1,o=n.length;++s<o;)if(!r.contains(n[s]))return!1;return!0}return this.each((typeof t=="function"?V2:t?F2:$2)(n,t))}function B2(){this.textContent=""}function U2(e){return function(){this.textContent=e}}function W2(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function q2(e){return arguments.length?this.each(e==null?B2:(typeof e=="function"?W2:U2)(e)):this.node().textContent}function Q2(){this.innerHTML=""}function K2(e){return function(){this.innerHTML=e}}function X2(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Y2(e){return arguments.length?this.each(e==null?Q2:(typeof e=="function"?X2:K2)(e)):this.node().innerHTML}function G2(){this.nextSibling&&this.parentNode.appendChild(this)}function J2(){return this.each(G2)}function Z2(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function ek(){return this.each(Z2)}function tk(e){var t=typeof e=="function"?e:Px(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function nk(){return null}function rk(e,t){var n=typeof e=="function"?e:Px(e),r=t==null?nk:typeof t=="function"?t:bf(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function sk(){var e=this.parentNode;e&&e.removeChild(this)}function ak(){return this.each(sk)}function ok(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function ik(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function lk(e){return this.select(e?ik:ok)}function ck(e){return arguments.length?this.property("__data__",e):this.node().__data__}function uk(e){return function(t){e.call(this,t,this.__data__)}}function dk(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function fk(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,s=t.length,o;n<s;++n)o=t[n],(!e.type||o.type===e.type)&&o.name===e.name?this.removeEventListener(o.type,o.listener,o.options):t[++r]=o;++r?t.length=r:delete this.__on}}}function mk(e,t,n){return function(){var r=this.__on,s,o=uk(t);if(r){for(var i=0,l=r.length;i<l;++i)if((s=r[i]).type===e.type&&s.name===e.name){this.removeEventListener(s.type,s.listener,s.options),this.addEventListener(s.type,s.listener=o,s.options=n),s.value=t;return}}this.addEventListener(e.type,o,n),s={type:e.type,name:e.name,value:t,listener:o,options:n},r?r.push(s):this.__on=[s]}}function hk(e,t,n){var r=dk(e+""),s,o=r.length,i;if(arguments.length<2){var l=this.node().__on;if(l){for(var c=0,u=l.length,d;c<u;++c)for(s=0,d=l[c];s<o;++s)if((i=r[s]).type===d.type&&i.name===d.name)return d.value}return}for(l=t?mk:fk,s=0;s<o;++s)this.each(l(r[s],t,n));return this}function Hx(e,t,n){var r=Lx(e),s=r.CustomEvent;typeof s=="function"?s=new s(t,n):(s=r.document.createEvent("Event"),n?(s.initEvent(t,n.bubbles,n.cancelable),s.detail=n.detail):s.initEvent(t,!1,!1)),e.dispatchEvent(s)}function pk(e,t){return function(){return Hx(this,e,t)}}function gk(e,t){return function(){return Hx(this,e,t.apply(this,arguments))}}function xk(e,t){return this.each((typeof t=="function"?gk:pk)(e,t))}function*yk(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],s=0,o=r.length,i;s<o;++s)(i=r[s])&&(yield i)}var Bx=[null];function yt(e,t){this._groups=e,this._parents=t}function Ro(){return new yt([[document.documentElement]],Bx)}function vk(){return this}yt.prototype=Ro.prototype={constructor:yt,select:Wj,selectAll:Xj,selectChild:Zj,selectChildren:r2,filter:s2,data:u2,enter:a2,exit:f2,join:m2,merge:h2,selection:vk,order:p2,sort:g2,call:y2,nodes:v2,node:b2,size:w2,empty:N2,each:j2,attr:T2,style:D2,property:z2,classed:H2,text:q2,html:Y2,raise:J2,lower:ek,append:tk,insert:rk,remove:ak,clone:lk,datum:ck,on:hk,dispatch:xk,[Symbol.iterator]:yk};function ht(e){return typeof e=="string"?new yt([[document.querySelector(e)]],[document.documentElement]):new yt([[e]],Bx)}function bk(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Ot(e,t){if(e=bk(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var s=t.getBoundingClientRect();return[e.clientX-s.left-t.clientLeft,e.clientY-s.top-t.clientTop]}}return[e.pageX,e.pageY]}const wk={passive:!1},io={capture:!0,passive:!1};function Oc(e){e.stopImmediatePropagation()}function Ns(e){e.preventDefault(),e.stopImmediatePropagation()}function Ux(e){var t=e.document.documentElement,n=ht(e).on("dragstart.drag",Ns,io);"onselectstart"in t?n.on("selectstart.drag",Ns,io):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Wx(e,t){var n=e.document.documentElement,r=ht(e).on("dragstart.drag",null);t&&(r.on("click.drag",Ns,io),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const ci=e=>()=>e;function sd(e,{sourceEvent:t,subject:n,target:r,identifier:s,active:o,x:i,y:l,dx:c,dy:u,dispatch:d}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:s,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:i,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:d}})}sd.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function Nk(e){return!e.ctrlKey&&!e.button}function jk(){return this.parentNode}function kk(e,t){return t??{x:e.x,y:e.y}}function _k(){return navigator.maxTouchPoints||"ontouchstart"in this}function qx(){var e=Nk,t=jk,n=kk,r=_k,s={},o=$l("start","drag","end"),i=0,l,c,u,d,f=0;function m(b){b.on("mousedown.drag",y).filter(r).on("touchstart.drag",N).on("touchmove.drag",h,wk).on("touchend.drag touchcancel.drag",g).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function y(b,j){if(!(d||!e.call(this,b,j))){var k=x(this,t.call(this,b,j),b,j,"mouse");k&&(ht(b.view).on("mousemove.drag",p,io).on("mouseup.drag",w,io),Ux(b.view),Oc(b),u=!1,l=b.clientX,c=b.clientY,k("start",b))}}function p(b){if(Ns(b),!u){var j=b.clientX-l,k=b.clientY-c;u=j*j+k*k>f}s.mouse("drag",b)}function w(b){ht(b.view).on("mousemove.drag mouseup.drag",null),Wx(b.view,u),Ns(b),s.mouse("end",b)}function N(b,j){if(e.call(this,b,j)){var k=b.changedTouches,v=t.call(this,b,j),_=k.length,M,P;for(M=0;M<_;++M)(P=x(this,v,b,j,k[M].identifier,k[M]))&&(Oc(b),P("start",b,k[M]))}}function h(b){var j=b.changedTouches,k=j.length,v,_;for(v=0;v<k;++v)(_=s[j[v].identifier])&&(Ns(b),_("drag",b,j[v]))}function g(b){var j=b.changedTouches,k=j.length,v,_;for(d&&clearTimeout(d),d=setTimeout(function(){d=null},500),v=0;v<k;++v)(_=s[j[v].identifier])&&(Oc(b),_("end",b,j[v]))}function x(b,j,k,v,_,M){var P=o.copy(),T=Ot(M||k,j),C,O,E;if((E=n.call(b,new sd("beforestart",{sourceEvent:k,target:m,identifier:_,active:i,x:T[0],y:T[1],dx:0,dy:0,dispatch:P}),v))!=null)return C=E.x-T[0]||0,O=E.y-T[1]||0,function z(A,L,R){var I=T,F;switch(A){case"start":s[_]=z,F=i++;break;case"end":delete s[_],--i;case"drag":T=Ot(R||L,j),F=i;break}P.call(A,b,new sd(A,{sourceEvent:L,subject:E,target:m,identifier:_,active:F,x:T[0]+C,y:T[1]+O,dx:T[0]-I[0],dy:T[1]-I[1],dispatch:P}),v)}}return m.filter=function(b){return arguments.length?(e=typeof b=="function"?b:ci(!!b),m):e},m.container=function(b){return arguments.length?(t=typeof b=="function"?b:ci(b),m):t},m.subject=function(b){return arguments.length?(n=typeof b=="function"?b:ci(b),m):n},m.touchable=function(b){return arguments.length?(r=typeof b=="function"?b:ci(!!b),m):r},m.on=function(){var b=o.on.apply(o,arguments);return b===o?m:b},m.clickDistance=function(b){return arguments.length?(f=(b=+b)*b,m):Math.sqrt(f)},m}function Nf(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Qx(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function To(){}var lo=.7,dl=1/lo,js="\\s*([+-]?\\d+)\\s*",co="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",an="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Sk=/^#([0-9a-f]{3,8})$/,Ck=new RegExp(`^rgb\\(${js},${js},${js}\\)$`),Ek=new RegExp(`^rgb\\(${an},${an},${an}\\)$`),Rk=new RegExp(`^rgba\\(${js},${js},${js},${co}\\)$`),Tk=new RegExp(`^rgba\\(${an},${an},${an},${co}\\)$`),Mk=new RegExp(`^hsl\\(${co},${an},${an}\\)$`),Pk=new RegExp(`^hsla\\(${co},${an},${an},${co}\\)$`),Sh={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Nf(To,Br,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Ch,formatHex:Ch,formatHex8:Ik,formatHsl:Dk,formatRgb:Eh,toString:Eh});function Ch(){return this.rgb().formatHex()}function Ik(){return this.rgb().formatHex8()}function Dk(){return Kx(this).formatHsl()}function Eh(){return this.rgb().formatRgb()}function Br(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Sk.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Rh(t):n===3?new it(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?ui(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?ui(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Ck.exec(e))?new it(t[1],t[2],t[3],1):(t=Ek.exec(e))?new it(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Rk.exec(e))?ui(t[1],t[2],t[3],t[4]):(t=Tk.exec(e))?ui(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Mk.exec(e))?Ph(t[1],t[2]/100,t[3]/100,1):(t=Pk.exec(e))?Ph(t[1],t[2]/100,t[3]/100,t[4]):Sh.hasOwnProperty(e)?Rh(Sh[e]):e==="transparent"?new it(NaN,NaN,NaN,0):null}function Rh(e){return new it(e>>16&255,e>>8&255,e&255,1)}function ui(e,t,n,r){return r<=0&&(e=t=n=NaN),new it(e,t,n,r)}function Ak(e){return e instanceof To||(e=Br(e)),e?(e=e.rgb(),new it(e.r,e.g,e.b,e.opacity)):new it}function ad(e,t,n,r){return arguments.length===1?Ak(e):new it(e,t,n,r??1)}function it(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Nf(it,ad,Qx(To,{brighter(e){return e=e==null?dl:Math.pow(dl,e),new it(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?lo:Math.pow(lo,e),new it(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new it(Ir(this.r),Ir(this.g),Ir(this.b),fl(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Th,formatHex:Th,formatHex8:Ok,formatRgb:Mh,toString:Mh}));function Th(){return`#${br(this.r)}${br(this.g)}${br(this.b)}`}function Ok(){return`#${br(this.r)}${br(this.g)}${br(this.b)}${br((isNaN(this.opacity)?1:this.opacity)*255)}`}function Mh(){const e=fl(this.opacity);return`${e===1?"rgb(":"rgba("}${Ir(this.r)}, ${Ir(this.g)}, ${Ir(this.b)}${e===1?")":`, ${e})`}`}function fl(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Ir(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function br(e){return e=Ir(e),(e<16?"0":"")+e.toString(16)}function Ph(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new zt(e,t,n,r)}function Kx(e){if(e instanceof zt)return new zt(e.h,e.s,e.l,e.opacity);if(e instanceof To||(e=Br(e)),!e)return new zt;if(e instanceof zt)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,s=Math.min(t,n,r),o=Math.max(t,n,r),i=NaN,l=o-s,c=(o+s)/2;return l?(t===o?i=(n-r)/l+(n<r)*6:n===o?i=(r-t)/l+2:i=(t-n)/l+4,l/=c<.5?o+s:2-o-s,i*=60):l=c>0&&c<1?0:i,new zt(i,l,c,e.opacity)}function Lk(e,t,n,r){return arguments.length===1?Kx(e):new zt(e,t,n,r??1)}function zt(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Nf(zt,Lk,Qx(To,{brighter(e){return e=e==null?dl:Math.pow(dl,e),new zt(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?lo:Math.pow(lo,e),new zt(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,s=2*n-r;return new it(Lc(e>=240?e-240:e+120,s,r),Lc(e,s,r),Lc(e<120?e+240:e-120,s,r),this.opacity)},clamp(){return new zt(Ih(this.h),di(this.s),di(this.l),fl(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=fl(this.opacity);return`${e===1?"hsl(":"hsla("}${Ih(this.h)}, ${di(this.s)*100}%, ${di(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Ih(e){return e=(e||0)%360,e<0?e+360:e}function di(e){return Math.max(0,Math.min(1,e||0))}function Lc(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const jf=e=>()=>e;function zk(e,t){return function(n){return e+n*t}}function Fk(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function $k(e){return(e=+e)==1?Xx:function(t,n){return n-t?Fk(t,n,e):jf(isNaN(t)?n:t)}}function Xx(e,t){var n=t-e;return n?zk(e,n):jf(isNaN(e)?t:e)}const ml=function e(t){var n=$k(t);function r(s,o){var i=n((s=ad(s)).r,(o=ad(o)).r),l=n(s.g,o.g),c=n(s.b,o.b),u=Xx(s.opacity,o.opacity);return function(d){return s.r=i(d),s.g=l(d),s.b=c(d),s.opacity=u(d),s+""}}return r.gamma=e,r}(1);function Vk(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),s;return function(o){for(s=0;s<n;++s)r[s]=e[s]*(1-o)+t[s]*o;return r}}function Hk(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Bk(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,s=new Array(r),o=new Array(n),i;for(i=0;i<r;++i)s[i]=$a(e[i],t[i]);for(;i<n;++i)o[i]=t[i];return function(l){for(i=0;i<r;++i)o[i]=s[i](l);return o}}function Uk(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function en(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Wk(e,t){var n={},r={},s;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(s in t)s in e?n[s]=$a(e[s],t[s]):r[s]=t[s];return function(o){for(s in n)r[s]=n[s](o);return r}}var od=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,zc=new RegExp(od.source,"g");function qk(e){return function(){return e}}function Qk(e){return function(t){return e(t)+""}}function Yx(e,t){var n=od.lastIndex=zc.lastIndex=0,r,s,o,i=-1,l=[],c=[];for(e=e+"",t=t+"";(r=od.exec(e))&&(s=zc.exec(t));)(o=s.index)>n&&(o=t.slice(n,o),l[i]?l[i]+=o:l[++i]=o),(r=r[0])===(s=s[0])?l[i]?l[i]+=s:l[++i]=s:(l[++i]=null,c.push({i,x:en(r,s)})),n=zc.lastIndex;return n<t.length&&(o=t.slice(n),l[i]?l[i]+=o:l[++i]=o),l.length<2?c[0]?Qk(c[0].x):qk(t):(t=c.length,function(u){for(var d=0,f;d<t;++d)l[(f=c[d]).i]=f.x(u);return l.join("")})}function $a(e,t){var n=typeof t,r;return t==null||n==="boolean"?jf(t):(n==="number"?en:n==="string"?(r=Br(t))?(t=r,ml):Yx:t instanceof Br?ml:t instanceof Date?Uk:Hk(t)?Vk:Array.isArray(t)?Bk:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Wk:en)(e,t)}var Dh=180/Math.PI,id={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Gx(e,t,n,r,s,o){var i,l,c;return(i=Math.sqrt(e*e+t*t))&&(e/=i,t/=i),(c=e*n+t*r)&&(n-=e*c,r-=t*c),(l=Math.sqrt(n*n+r*r))&&(n/=l,r/=l,c/=l),e*r<t*n&&(e=-e,t=-t,c=-c,i=-i),{translateX:s,translateY:o,rotate:Math.atan2(t,e)*Dh,skewX:Math.atan(c)*Dh,scaleX:i,scaleY:l}}var fi;function Kk(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?id:Gx(t.a,t.b,t.c,t.d,t.e,t.f)}function Xk(e){return e==null||(fi||(fi=document.createElementNS("http://www.w3.org/2000/svg","g")),fi.setAttribute("transform",e),!(e=fi.transform.baseVal.consolidate()))?id:(e=e.matrix,Gx(e.a,e.b,e.c,e.d,e.e,e.f))}function Jx(e,t,n,r){function s(u){return u.length?u.pop()+" ":""}function o(u,d,f,m,y,p){if(u!==f||d!==m){var w=y.push("translate(",null,t,null,n);p.push({i:w-4,x:en(u,f)},{i:w-2,x:en(d,m)})}else(f||m)&&y.push("translate("+f+t+m+n)}function i(u,d,f,m){u!==d?(u-d>180?d+=360:d-u>180&&(u+=360),m.push({i:f.push(s(f)+"rotate(",null,r)-2,x:en(u,d)})):d&&f.push(s(f)+"rotate("+d+r)}function l(u,d,f,m){u!==d?m.push({i:f.push(s(f)+"skewX(",null,r)-2,x:en(u,d)}):d&&f.push(s(f)+"skewX("+d+r)}function c(u,d,f,m,y,p){if(u!==f||d!==m){var w=y.push(s(y)+"scale(",null,",",null,")");p.push({i:w-4,x:en(u,f)},{i:w-2,x:en(d,m)})}else(f!==1||m!==1)&&y.push(s(y)+"scale("+f+","+m+")")}return function(u,d){var f=[],m=[];return u=e(u),d=e(d),o(u.translateX,u.translateY,d.translateX,d.translateY,f,m),i(u.rotate,d.rotate,f,m),l(u.skewX,d.skewX,f,m),c(u.scaleX,u.scaleY,d.scaleX,d.scaleY,f,m),u=d=null,function(y){for(var p=-1,w=m.length,N;++p<w;)f[(N=m[p]).i]=N.x(y);return f.join("")}}}var Yk=Jx(Kk,"px, ","px)","deg)"),Gk=Jx(Xk,", ",")",")"),Jk=1e-12;function Ah(e){return((e=Math.exp(e))+1/e)/2}function Zk(e){return((e=Math.exp(e))-1/e)/2}function e_(e){return((e=Math.exp(2*e))-1)/(e+1)}const Pi=function e(t,n,r){function s(o,i){var l=o[0],c=o[1],u=o[2],d=i[0],f=i[1],m=i[2],y=d-l,p=f-c,w=y*y+p*p,N,h;if(w<Jk)h=Math.log(m/u)/t,N=function(v){return[l+v*y,c+v*p,u*Math.exp(t*v*h)]};else{var g=Math.sqrt(w),x=(m*m-u*u+r*w)/(2*u*n*g),b=(m*m-u*u-r*w)/(2*m*n*g),j=Math.log(Math.sqrt(x*x+1)-x),k=Math.log(Math.sqrt(b*b+1)-b);h=(k-j)/t,N=function(v){var _=v*h,M=Ah(j),P=u/(n*g)*(M*e_(t*_+j)-Zk(j));return[l+P*y,c+P*p,u*M/Ah(t*_+j)]}}return N.duration=h*1e3*t/Math.SQRT2,N}return s.rho=function(o){var i=Math.max(.001,+o),l=i*i,c=l*l;return e(i,l,c)},s}(Math.SQRT2,2,4);var Ws=0,Ra=0,wa=0,Zx=1e3,hl,Ta,pl=0,Ur=0,Hl=0,uo=typeof performance=="object"&&performance.now?performance:Date,ey=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function kf(){return Ur||(ey(t_),Ur=uo.now()+Hl)}function t_(){Ur=0}function gl(){this._call=this._time=this._next=null}gl.prototype=ty.prototype={constructor:gl,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?kf():+n)+(t==null?0:+t),!this._next&&Ta!==this&&(Ta?Ta._next=this:hl=this,Ta=this),this._call=e,this._time=n,ld()},stop:function(){this._call&&(this._call=null,this._time=1/0,ld())}};function ty(e,t,n){var r=new gl;return r.restart(e,t,n),r}function n_(){kf(),++Ws;for(var e=hl,t;e;)(t=Ur-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Ws}function Oh(){Ur=(pl=uo.now())+Hl,Ws=Ra=0;try{n_()}finally{Ws=0,s_(),Ur=0}}function r_(){var e=uo.now(),t=e-pl;t>Zx&&(Hl-=t,pl=e)}function s_(){for(var e,t=hl,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:hl=n);Ta=e,ld(r)}function ld(e){if(!Ws){Ra&&(Ra=clearTimeout(Ra));var t=e-Ur;t>24?(e<1/0&&(Ra=setTimeout(Oh,e-uo.now()-Hl)),wa&&(wa=clearInterval(wa))):(wa||(pl=uo.now(),wa=setInterval(r_,Zx)),Ws=1,ey(Oh))}}function Lh(e,t,n){var r=new gl;return t=t==null?0:+t,r.restart(s=>{r.stop(),e(s+t)},t,n),r}var a_=$l("start","end","cancel","interrupt"),o_=[],ny=0,zh=1,cd=2,Ii=3,Fh=4,ud=5,Di=6;function Bl(e,t,n,r,s,o){var i=e.__transition;if(!i)e.__transition={};else if(n in i)return;i_(e,n,{name:t,index:r,group:s,on:a_,tween:o_,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:ny})}function _f(e,t){var n=Ut(e,t);if(n.state>ny)throw new Error("too late; already scheduled");return n}function cn(e,t){var n=Ut(e,t);if(n.state>Ii)throw new Error("too late; already running");return n}function Ut(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function i_(e,t,n){var r=e.__transition,s;r[t]=n,n.timer=ty(o,0,n.time);function o(u){n.state=zh,n.timer.restart(i,n.delay,n.time),n.delay<=u&&i(u-n.delay)}function i(u){var d,f,m,y;if(n.state!==zh)return c();for(d in r)if(y=r[d],y.name===n.name){if(y.state===Ii)return Lh(i);y.state===Fh?(y.state=Di,y.timer.stop(),y.on.call("interrupt",e,e.__data__,y.index,y.group),delete r[d]):+d<t&&(y.state=Di,y.timer.stop(),y.on.call("cancel",e,e.__data__,y.index,y.group),delete r[d])}if(Lh(function(){n.state===Ii&&(n.state=Fh,n.timer.restart(l,n.delay,n.time),l(u))}),n.state=cd,n.on.call("start",e,e.__data__,n.index,n.group),n.state===cd){for(n.state=Ii,s=new Array(m=n.tween.length),d=0,f=-1;d<m;++d)(y=n.tween[d].value.call(e,e.__data__,n.index,n.group))&&(s[++f]=y);s.length=f+1}}function l(u){for(var d=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(c),n.state=ud,1),f=-1,m=s.length;++f<m;)s[f].call(e,d);n.state===ud&&(n.on.call("end",e,e.__data__,n.index,n.group),c())}function c(){n.state=Di,n.timer.stop(),delete r[t];for(var u in r)return;delete e.__transition}}function Ai(e,t){var n=e.__transition,r,s,o=!0,i;if(n){t=t==null?null:t+"";for(i in n){if((r=n[i]).name!==t){o=!1;continue}s=r.state>cd&&r.state<ud,r.state=Di,r.timer.stop(),r.on.call(s?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[i]}o&&delete e.__transition}}function l_(e){return this.each(function(){Ai(this,e)})}function c_(e,t){var n,r;return function(){var s=cn(this,e),o=s.tween;if(o!==n){r=n=o;for(var i=0,l=r.length;i<l;++i)if(r[i].name===t){r=r.slice(),r.splice(i,1);break}}s.tween=r}}function u_(e,t,n){var r,s;if(typeof n!="function")throw new Error;return function(){var o=cn(this,e),i=o.tween;if(i!==r){s=(r=i).slice();for(var l={name:t,value:n},c=0,u=s.length;c<u;++c)if(s[c].name===t){s[c]=l;break}c===u&&s.push(l)}o.tween=s}}function d_(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=Ut(this.node(),n).tween,s=0,o=r.length,i;s<o;++s)if((i=r[s]).name===e)return i.value;return null}return this.each((t==null?c_:u_)(n,e,t))}function Sf(e,t,n){var r=e._id;return e.each(function(){var s=cn(this,r);(s.value||(s.value={}))[t]=n.apply(this,arguments)}),function(s){return Ut(s,r).value[t]}}function ry(e,t){var n;return(typeof t=="number"?en:t instanceof Br?ml:(n=Br(t))?(t=n,ml):Yx)(e,t)}function f_(e){return function(){this.removeAttribute(e)}}function m_(e){return function(){this.removeAttributeNS(e.space,e.local)}}function h_(e,t,n){var r,s=n+"",o;return function(){var i=this.getAttribute(e);return i===s?null:i===r?o:o=t(r=i,n)}}function p_(e,t,n){var r,s=n+"",o;return function(){var i=this.getAttributeNS(e.space,e.local);return i===s?null:i===r?o:o=t(r=i,n)}}function g_(e,t,n){var r,s,o;return function(){var i,l=n(this),c;return l==null?void this.removeAttribute(e):(i=this.getAttribute(e),c=l+"",i===c?null:i===r&&c===s?o:(s=c,o=t(r=i,l)))}}function x_(e,t,n){var r,s,o;return function(){var i,l=n(this),c;return l==null?void this.removeAttributeNS(e.space,e.local):(i=this.getAttributeNS(e.space,e.local),c=l+"",i===c?null:i===r&&c===s?o:(s=c,o=t(r=i,l)))}}function y_(e,t){var n=Vl(e),r=n==="transform"?Gk:ry;return this.attrTween(e,typeof t=="function"?(n.local?x_:g_)(n,r,Sf(this,"attr."+e,t)):t==null?(n.local?m_:f_)(n):(n.local?p_:h_)(n,r,t))}function v_(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function b_(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function w_(e,t){var n,r;function s(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&b_(e,o)),n}return s._value=t,s}function N_(e,t){var n,r;function s(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&v_(e,o)),n}return s._value=t,s}function j_(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=Vl(e);return this.tween(n,(r.local?w_:N_)(r,t))}function k_(e,t){return function(){_f(this,e).delay=+t.apply(this,arguments)}}function __(e,t){return t=+t,function(){_f(this,e).delay=t}}function S_(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?k_:__)(t,e)):Ut(this.node(),t).delay}function C_(e,t){return function(){cn(this,e).duration=+t.apply(this,arguments)}}function E_(e,t){return t=+t,function(){cn(this,e).duration=t}}function R_(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?C_:E_)(t,e)):Ut(this.node(),t).duration}function T_(e,t){if(typeof t!="function")throw new Error;return function(){cn(this,e).ease=t}}function M_(e){var t=this._id;return arguments.length?this.each(T_(t,e)):Ut(this.node(),t).ease}function P_(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;cn(this,e).ease=n}}function I_(e){if(typeof e!="function")throw new Error;return this.each(P_(this._id,e))}function D_(e){typeof e!="function"&&(e=Dx(e));for(var t=this._groups,n=t.length,r=new Array(n),s=0;s<n;++s)for(var o=t[s],i=o.length,l=r[s]=[],c,u=0;u<i;++u)(c=o[u])&&e.call(c,c.__data__,u,o)&&l.push(c);return new _n(r,this._parents,this._name,this._id)}function A_(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,s=n.length,o=Math.min(r,s),i=new Array(r),l=0;l<o;++l)for(var c=t[l],u=n[l],d=c.length,f=i[l]=new Array(d),m,y=0;y<d;++y)(m=c[y]||u[y])&&(f[y]=m);for(;l<r;++l)i[l]=t[l];return new _n(i,this._parents,this._name,this._id)}function O_(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function L_(e,t,n){var r,s,o=O_(t)?_f:cn;return function(){var i=o(this,e),l=i.on;l!==r&&(s=(r=l).copy()).on(t,n),i.on=s}}function z_(e,t){var n=this._id;return arguments.length<2?Ut(this.node(),n).on.on(e):this.each(L_(n,e,t))}function F_(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function $_(){return this.on("end.remove",F_(this._id))}function V_(e){var t=this._name,n=this._id;typeof e!="function"&&(e=bf(e));for(var r=this._groups,s=r.length,o=new Array(s),i=0;i<s;++i)for(var l=r[i],c=l.length,u=o[i]=new Array(c),d,f,m=0;m<c;++m)(d=l[m])&&(f=e.call(d,d.__data__,m,l))&&("__data__"in d&&(f.__data__=d.__data__),u[m]=f,Bl(u[m],t,n,m,u,Ut(d,n)));return new _n(o,this._parents,t,n)}function H_(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Ix(e));for(var r=this._groups,s=r.length,o=[],i=[],l=0;l<s;++l)for(var c=r[l],u=c.length,d,f=0;f<u;++f)if(d=c[f]){for(var m=e.call(d,d.__data__,f,c),y,p=Ut(d,n),w=0,N=m.length;w<N;++w)(y=m[w])&&Bl(y,t,n,w,m,p);o.push(m),i.push(d)}return new _n(o,i,t,n)}var B_=Ro.prototype.constructor;function U_(){return new B_(this._groups,this._parents)}function W_(e,t){var n,r,s;return function(){var o=Us(this,e),i=(this.style.removeProperty(e),Us(this,e));return o===i?null:o===n&&i===r?s:s=t(n=o,r=i)}}function sy(e){return function(){this.style.removeProperty(e)}}function q_(e,t,n){var r,s=n+"",o;return function(){var i=Us(this,e);return i===s?null:i===r?o:o=t(r=i,n)}}function Q_(e,t,n){var r,s,o;return function(){var i=Us(this,e),l=n(this),c=l+"";return l==null&&(c=l=(this.style.removeProperty(e),Us(this,e))),i===c?null:i===r&&c===s?o:(s=c,o=t(r=i,l))}}function K_(e,t){var n,r,s,o="style."+t,i="end."+o,l;return function(){var c=cn(this,e),u=c.on,d=c.value[o]==null?l||(l=sy(t)):void 0;(u!==n||s!==d)&&(r=(n=u).copy()).on(i,s=d),c.on=r}}function X_(e,t,n){var r=(e+="")=="transform"?Yk:ry;return t==null?this.styleTween(e,W_(e,r)).on("end.style."+e,sy(e)):typeof t=="function"?this.styleTween(e,Q_(e,r,Sf(this,"style."+e,t))).each(K_(this._id,e)):this.styleTween(e,q_(e,r,t),n).on("end.style."+e,null)}function Y_(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function G_(e,t,n){var r,s;function o(){var i=t.apply(this,arguments);return i!==s&&(r=(s=i)&&Y_(e,i,n)),r}return o._value=t,o}function J_(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,G_(e,t,n??""))}function Z_(e){return function(){this.textContent=e}}function eS(e){return function(){var t=e(this);this.textContent=t??""}}function tS(e){return this.tween("text",typeof e=="function"?eS(Sf(this,"text",e)):Z_(e==null?"":e+""))}function nS(e){return function(t){this.textContent=e.call(this,t)}}function rS(e){var t,n;function r(){var s=e.apply(this,arguments);return s!==n&&(t=(n=s)&&nS(s)),t}return r._value=e,r}function sS(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,rS(e))}function aS(){for(var e=this._name,t=this._id,n=ay(),r=this._groups,s=r.length,o=0;o<s;++o)for(var i=r[o],l=i.length,c,u=0;u<l;++u)if(c=i[u]){var d=Ut(c,t);Bl(c,e,n,u,i,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new _n(r,this._parents,e,n)}function oS(){var e,t,n=this,r=n._id,s=n.size();return new Promise(function(o,i){var l={value:i},c={value:function(){--s===0&&o()}};n.each(function(){var u=cn(this,r),d=u.on;d!==e&&(t=(e=d).copy(),t._.cancel.push(l),t._.interrupt.push(l),t._.end.push(c)),u.on=t}),s===0&&o()})}var iS=0;function _n(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function ay(){return++iS}var dn=Ro.prototype;_n.prototype={constructor:_n,select:V_,selectAll:H_,selectChild:dn.selectChild,selectChildren:dn.selectChildren,filter:D_,merge:A_,selection:U_,transition:aS,call:dn.call,nodes:dn.nodes,node:dn.node,size:dn.size,empty:dn.empty,each:dn.each,on:z_,attr:y_,attrTween:j_,style:X_,styleTween:J_,text:tS,textTween:sS,remove:$_,tween:d_,delay:S_,duration:R_,ease:M_,easeVarying:I_,end:oS,[Symbol.iterator]:dn[Symbol.iterator]};function lS(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var cS={time:null,delay:0,duration:250,ease:lS};function uS(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function dS(e){var t,n;e instanceof _n?(t=e._id,e=e._name):(t=ay(),(n=cS).time=kf(),e=e==null?null:e+"");for(var r=this._groups,s=r.length,o=0;o<s;++o)for(var i=r[o],l=i.length,c,u=0;u<l;++u)(c=i[u])&&Bl(c,e,t,u,i,n||uS(c,t));return new _n(r,this._parents,e,t)}Ro.prototype.interrupt=l_;Ro.prototype.transition=dS;const mi=e=>()=>e;function fS(e,{sourceEvent:t,target:n,transform:r,dispatch:s}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:s}})}function vn(e,t,n){this.k=e,this.x=t,this.y=n}vn.prototype={constructor:vn,scale:function(e){return e===1?this:new vn(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new vn(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Ul=new vn(1,0,0);oy.prototype=vn.prototype;function oy(e){for(;!e.__zoom;)if(!(e=e.parentNode))return Ul;return e.__zoom}function Fc(e){e.stopImmediatePropagation()}function Na(e){e.preventDefault(),e.stopImmediatePropagation()}function mS(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function hS(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function $h(){return this.__zoom||Ul}function pS(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function gS(){return navigator.maxTouchPoints||"ontouchstart"in this}function xS(e,t,n){var r=e.invertX(t[0][0])-n[0][0],s=e.invertX(t[1][0])-n[1][0],o=e.invertY(t[0][1])-n[0][1],i=e.invertY(t[1][1])-n[1][1];return e.translate(s>r?(r+s)/2:Math.min(0,r)||Math.max(0,s),i>o?(o+i)/2:Math.min(0,o)||Math.max(0,i))}function iy(){var e=mS,t=hS,n=xS,r=pS,s=gS,o=[0,1/0],i=[[-1/0,-1/0],[1/0,1/0]],l=250,c=Pi,u=$l("start","zoom","end"),d,f,m,y=500,p=150,w=0,N=10;function h(E){E.property("__zoom",$h).on("wheel.zoom",_,{passive:!1}).on("mousedown.zoom",M).on("dblclick.zoom",P).filter(s).on("touchstart.zoom",T).on("touchmove.zoom",C).on("touchend.zoom touchcancel.zoom",O).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}h.transform=function(E,z,A,L){var R=E.selection?E.selection():E;R.property("__zoom",$h),E!==R?j(E,z,A,L):R.interrupt().each(function(){k(this,arguments).event(L).start().zoom(null,typeof z=="function"?z.apply(this,arguments):z).end()})},h.scaleBy=function(E,z,A,L){h.scaleTo(E,function(){var R=this.__zoom.k,I=typeof z=="function"?z.apply(this,arguments):z;return R*I},A,L)},h.scaleTo=function(E,z,A,L){h.transform(E,function(){var R=t.apply(this,arguments),I=this.__zoom,F=A==null?b(R):typeof A=="function"?A.apply(this,arguments):A,V=I.invert(F),H=typeof z=="function"?z.apply(this,arguments):z;return n(x(g(I,H),F,V),R,i)},A,L)},h.translateBy=function(E,z,A,L){h.transform(E,function(){return n(this.__zoom.translate(typeof z=="function"?z.apply(this,arguments):z,typeof A=="function"?A.apply(this,arguments):A),t.apply(this,arguments),i)},null,L)},h.translateTo=function(E,z,A,L,R){h.transform(E,function(){var I=t.apply(this,arguments),F=this.__zoom,V=L==null?b(I):typeof L=="function"?L.apply(this,arguments):L;return n(Ul.translate(V[0],V[1]).scale(F.k).translate(typeof z=="function"?-z.apply(this,arguments):-z,typeof A=="function"?-A.apply(this,arguments):-A),I,i)},L,R)};function g(E,z){return z=Math.max(o[0],Math.min(o[1],z)),z===E.k?E:new vn(z,E.x,E.y)}function x(E,z,A){var L=z[0]-A[0]*E.k,R=z[1]-A[1]*E.k;return L===E.x&&R===E.y?E:new vn(E.k,L,R)}function b(E){return[(+E[0][0]+ +E[1][0])/2,(+E[0][1]+ +E[1][1])/2]}function j(E,z,A,L){E.on("start.zoom",function(){k(this,arguments).event(L).start()}).on("interrupt.zoom end.zoom",function(){k(this,arguments).event(L).end()}).tween("zoom",function(){var R=this,I=arguments,F=k(R,I).event(L),V=t.apply(R,I),H=A==null?b(V):typeof A=="function"?A.apply(R,I):A,q=Math.max(V[1][0]-V[0][0],V[1][1]-V[0][1]),U=R.__zoom,Y=typeof z=="function"?z.apply(R,I):z,G=c(U.invert(H).concat(q/U.k),Y.invert(H).concat(q/Y.k));return function(Z){if(Z===1)Z=Y;else{var W=G(Z),ee=q/W[2];Z=new vn(ee,H[0]-W[0]*ee,H[1]-W[1]*ee)}F.zoom(null,Z)}})}function k(E,z,A){return!A&&E.__zooming||new v(E,z)}function v(E,z){this.that=E,this.args=z,this.active=0,this.sourceEvent=null,this.extent=t.apply(E,z),this.taps=0}v.prototype={event:function(E){return E&&(this.sourceEvent=E),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(E,z){return this.mouse&&E!=="mouse"&&(this.mouse[1]=z.invert(this.mouse[0])),this.touch0&&E!=="touch"&&(this.touch0[1]=z.invert(this.touch0[0])),this.touch1&&E!=="touch"&&(this.touch1[1]=z.invert(this.touch1[0])),this.that.__zoom=z,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(E){var z=ht(this.that).datum();u.call(E,this.that,new fS(E,{sourceEvent:this.sourceEvent,target:h,transform:this.that.__zoom,dispatch:u}),z)}};function _(E,...z){if(!e.apply(this,arguments))return;var A=k(this,z).event(E),L=this.__zoom,R=Math.max(o[0],Math.min(o[1],L.k*Math.pow(2,r.apply(this,arguments)))),I=Ot(E);if(A.wheel)(A.mouse[0][0]!==I[0]||A.mouse[0][1]!==I[1])&&(A.mouse[1]=L.invert(A.mouse[0]=I)),clearTimeout(A.wheel);else{if(L.k===R)return;A.mouse=[I,L.invert(I)],Ai(this),A.start()}Na(E),A.wheel=setTimeout(F,p),A.zoom("mouse",n(x(g(L,R),A.mouse[0],A.mouse[1]),A.extent,i));function F(){A.wheel=null,A.end()}}function M(E,...z){if(m||!e.apply(this,arguments))return;var A=E.currentTarget,L=k(this,z,!0).event(E),R=ht(E.view).on("mousemove.zoom",H,!0).on("mouseup.zoom",q,!0),I=Ot(E,A),F=E.clientX,V=E.clientY;Ux(E.view),Fc(E),L.mouse=[I,this.__zoom.invert(I)],Ai(this),L.start();function H(U){if(Na(U),!L.moved){var Y=U.clientX-F,G=U.clientY-V;L.moved=Y*Y+G*G>w}L.event(U).zoom("mouse",n(x(L.that.__zoom,L.mouse[0]=Ot(U,A),L.mouse[1]),L.extent,i))}function q(U){R.on("mousemove.zoom mouseup.zoom",null),Wx(U.view,L.moved),Na(U),L.event(U).end()}}function P(E,...z){if(e.apply(this,arguments)){var A=this.__zoom,L=Ot(E.changedTouches?E.changedTouches[0]:E,this),R=A.invert(L),I=A.k*(E.shiftKey?.5:2),F=n(x(g(A,I),L,R),t.apply(this,z),i);Na(E),l>0?ht(this).transition().duration(l).call(j,F,L,E):ht(this).call(h.transform,F,L,E)}}function T(E,...z){if(e.apply(this,arguments)){var A=E.touches,L=A.length,R=k(this,z,E.changedTouches.length===L).event(E),I,F,V,H;for(Fc(E),F=0;F<L;++F)V=A[F],H=Ot(V,this),H=[H,this.__zoom.invert(H),V.identifier],R.touch0?!R.touch1&&R.touch0[2]!==H[2]&&(R.touch1=H,R.taps=0):(R.touch0=H,I=!0,R.taps=1+!!d);d&&(d=clearTimeout(d)),I&&(R.taps<2&&(f=H[0],d=setTimeout(function(){d=null},y)),Ai(this),R.start())}}function C(E,...z){if(this.__zooming){var A=k(this,z).event(E),L=E.changedTouches,R=L.length,I,F,V,H;for(Na(E),I=0;I<R;++I)F=L[I],V=Ot(F,this),A.touch0&&A.touch0[2]===F.identifier?A.touch0[0]=V:A.touch1&&A.touch1[2]===F.identifier&&(A.touch1[0]=V);if(F=A.that.__zoom,A.touch1){var q=A.touch0[0],U=A.touch0[1],Y=A.touch1[0],G=A.touch1[1],Z=(Z=Y[0]-q[0])*Z+(Z=Y[1]-q[1])*Z,W=(W=G[0]-U[0])*W+(W=G[1]-U[1])*W;F=g(F,Math.sqrt(Z/W)),V=[(q[0]+Y[0])/2,(q[1]+Y[1])/2],H=[(U[0]+G[0])/2,(U[1]+G[1])/2]}else if(A.touch0)V=A.touch0[0],H=A.touch0[1];else return;A.zoom("touch",n(x(F,V,H),A.extent,i))}}function O(E,...z){if(this.__zooming){var A=k(this,z).event(E),L=E.changedTouches,R=L.length,I,F;for(Fc(E),m&&clearTimeout(m),m=setTimeout(function(){m=null},y),I=0;I<R;++I)F=L[I],A.touch0&&A.touch0[2]===F.identifier?delete A.touch0:A.touch1&&A.touch1[2]===F.identifier&&delete A.touch1;if(A.touch1&&!A.touch0&&(A.touch0=A.touch1,delete A.touch1),A.touch0)A.touch0[1]=this.__zoom.invert(A.touch0[0]);else if(A.end(),A.taps===2&&(F=Ot(F,this),Math.hypot(f[0]-F[0],f[1]-F[1])<N)){var V=ht(this).on("dblclick.zoom");V&&V.apply(this,arguments)}}}return h.wheelDelta=function(E){return arguments.length?(r=typeof E=="function"?E:mi(+E),h):r},h.filter=function(E){return arguments.length?(e=typeof E=="function"?E:mi(!!E),h):e},h.touchable=function(E){return arguments.length?(s=typeof E=="function"?E:mi(!!E),h):s},h.extent=function(E){return arguments.length?(t=typeof E=="function"?E:mi([[+E[0][0],+E[0][1]],[+E[1][0],+E[1][1]]]),h):t},h.scaleExtent=function(E){return arguments.length?(o[0]=+E[0],o[1]=+E[1],h):[o[0],o[1]]},h.translateExtent=function(E){return arguments.length?(i[0][0]=+E[0][0],i[1][0]=+E[1][0],i[0][1]=+E[0][1],i[1][1]=+E[1][1],h):[[i[0][0],i[0][1]],[i[1][0],i[1][1]]]},h.constrain=function(E){return arguments.length?(n=E,h):n},h.duration=function(E){return arguments.length?(l=+E,h):l},h.interpolate=function(E){return arguments.length?(c=E,h):c},h.on=function(){var E=u.on.apply(u,arguments);return E===u?h:E},h.clickDistance=function(E){return arguments.length?(w=(E=+E)*E,h):Math.sqrt(w)},h.tapDistance=function(E){return arguments.length?(N=+E,h):N},h}const ln={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,{id:t,sourceHandle:n,targetHandle:r})=>`Couldn't create edge for ${e} handle id: "${e==="source"?n:r}", edge id: ${t}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(e="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${e}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},fo=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],ly=["Enter"," ","Escape"],cy={"node.a11yDescription.default":"Press enter or space to select a node. Press delete to remove it and escape to cancel.","node.a11yDescription.keyboardDisabled":"Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.","node.a11yDescription.ariaLiveMessage":({direction:e,x:t,y:n})=>`Moved selected node ${e}. New position, x: ${t}, y: ${n}`,"edge.a11yDescription.default":"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.","controls.ariaLabel":"Control Panel","controls.zoomIn.ariaLabel":"Zoom In","controls.zoomOut.ariaLabel":"Zoom Out","controls.fitView.ariaLabel":"Fit View","controls.interactive.ariaLabel":"Toggle Interactivity","minimap.ariaLabel":"Mini Map","handle.ariaLabel":"Handle"};var qs;(function(e){e.Strict="strict",e.Loose="loose"})(qs||(qs={}));var Dr;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(Dr||(Dr={}));var mo;(function(e){e.Partial="partial",e.Full="full"})(mo||(mo={}));const uy={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null,pointer:null};var Ln;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(Ln||(Ln={}));var xl;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(xl||(xl={}));var J;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(J||(J={}));const Vh={[J.Left]:J.Right,[J.Right]:J.Left,[J.Top]:J.Bottom,[J.Bottom]:J.Top};function dy(e){return e===null?null:e?"valid":"invalid"}const fy=e=>"id"in e&&"source"in e&&"target"in e,yS=e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e),Cf=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),ur=(e,t,n)=>{if(!e.id)return[];const r=new Set;return n.forEach(s=>{s.target===e.id&&r.add(s.source)}),t.filter(s=>r.has(s.id))},Mo=(e,t=[0,0])=>{const{width:n,height:r}=Cn(e),s=e.origin??t,o=n*s[0],i=r*s[1];return{x:e.position.x-o,y:e.position.y-i}},vS=(e,t={nodeOrigin:[0,0]})=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((r,s)=>{const o=typeof s=="string";let i=!t.nodeLookup&&!o?s:void 0;t.nodeLookup&&(i=o?t.nodeLookup.get(s):Cf(s)?s:t.nodeLookup.get(s.id));const l=i?yl(i,t.nodeOrigin):{x:0,y:0,x2:0,y2:0};return Wl(r,l)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return ql(n)},Po=(e,t={})=>{let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0},r=!1;return e.forEach(s=>{(t.filter===void 0||t.filter(s))&&(n=Wl(n,yl(s)),r=!0)}),r?ql(n):{x:0,y:0,width:0,height:0}},Ef=(e,t,[n,r,s]=[0,0,1],o=!1,i=!1)=>{const l={...Do(t,[n,r,s]),width:t.width/s,height:t.height/s},c=[];for(const u of e.values()){const{measured:d,selectable:f=!0,hidden:m=!1}=u;if(i&&!f||m)continue;const y=d.width??u.width??u.initialWidth??null,p=d.height??u.height??u.initialHeight??null,w=ho(l,Ks(u)),N=(y??0)*(p??0),h=o&&w>0;(!u.internals.handleBounds||h||w>=N||u.dragging)&&c.push(u)}return c},bS=(e,t)=>{const n=new Set;return e.forEach(r=>{n.add(r.id)}),t.filter(r=>n.has(r.source)||n.has(r.target))};function wS(e,t){const n=new Map,r=t!=null&&t.nodes?new Set(t.nodes.map(s=>s.id)):null;return e.forEach(s=>{s.measured.width&&s.measured.height&&((t==null?void 0:t.includeHiddenNodes)||!s.hidden)&&(!r||r.has(s.id))&&n.set(s.id,s)}),n}async function NS({nodes:e,width:t,height:n,panZoom:r,minZoom:s,maxZoom:o},i){if(e.size===0)return Promise.resolve(!0);const l=wS(e,i),c=Po(l),u=Rf(c,t,n,(i==null?void 0:i.minZoom)??s,(i==null?void 0:i.maxZoom)??o,(i==null?void 0:i.padding)??.1);return await r.setViewport(u,{duration:i==null?void 0:i.duration,ease:i==null?void 0:i.ease,interpolate:i==null?void 0:i.interpolate}),Promise.resolve(!0)}function my({nodeId:e,nextPosition:t,nodeLookup:n,nodeOrigin:r=[0,0],nodeExtent:s,onError:o}){const i=n.get(e),l=i.parentId?n.get(i.parentId):void 0,{x:c,y:u}=l?l.internals.positionAbsolute:{x:0,y:0},d=i.origin??r;let f=i.extent||s;if(i.extent==="parent"&&!i.expandParent)if(!l)o==null||o("005",ln.error005());else{const y=l.measured.width,p=l.measured.height;y&&p&&(f=[[c,u],[c+y,u+p]])}else l&&Xs(i.extent)&&(f=[[i.extent[0][0]+c,i.extent[0][1]+u],[i.extent[1][0]+c,i.extent[1][1]+u]]);const m=Xs(f)?Wr(t,f,i.measured):t;return(i.measured.width===void 0||i.measured.height===void 0)&&(o==null||o("015",ln.error015())),{position:{x:m.x-c+(i.measured.width??0)*d[0],y:m.y-u+(i.measured.height??0)*d[1]},positionAbsolute:m}}async function jS({nodesToRemove:e=[],edgesToRemove:t=[],nodes:n,edges:r,onBeforeDelete:s}){const o=new Set(e.map(m=>m.id)),i=[];for(const m of n){if(m.deletable===!1)continue;const y=o.has(m.id),p=!y&&m.parentId&&i.find(w=>w.id===m.parentId);(y||p)&&i.push(m)}const l=new Set(t.map(m=>m.id)),c=r.filter(m=>m.deletable!==!1),d=bS(i,c);for(const m of c)l.has(m.id)&&!d.find(p=>p.id===m.id)&&d.push(m);if(!s)return{edges:d,nodes:i};const f=await s({nodes:i,edges:d});return typeof f=="boolean"?f?{edges:d,nodes:i}:{edges:[],nodes:[]}:f}const Qs=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),Wr=(e={x:0,y:0},t,n)=>({x:Qs(e.x,t[0][0],t[1][0]-((n==null?void 0:n.width)??0)),y:Qs(e.y,t[0][1],t[1][1]-((n==null?void 0:n.height)??0))});function hy(e,t,n){const{width:r,height:s}=Cn(n),{x:o,y:i}=n.internals.positionAbsolute;return Wr(e,[[o,i],[o+r,i+s]],t)}const Hh=(e,t,n)=>e<t?Qs(Math.abs(e-t),1,t)/t:e>n?-Qs(Math.abs(e-n),1,t)/t:0,py=(e,t,n=15,r=40)=>{const s=Hh(e.x,r,t.width-r)*n,o=Hh(e.y,r,t.height-r)*n;return[s,o]},Wl=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),dd=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),ql=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),Ks=(e,t=[0,0])=>{var s,o;const{x:n,y:r}=Cf(e)?e.internals.positionAbsolute:Mo(e,t);return{x:n,y:r,width:((s=e.measured)==null?void 0:s.width)??e.width??e.initialWidth??0,height:((o=e.measured)==null?void 0:o.height)??e.height??e.initialHeight??0}},yl=(e,t=[0,0])=>{var s,o;const{x:n,y:r}=Cf(e)?e.internals.positionAbsolute:Mo(e,t);return{x:n,y:r,x2:n+(((s=e.measured)==null?void 0:s.width)??e.width??e.initialWidth??0),y2:r+(((o=e.measured)==null?void 0:o.height)??e.height??e.initialHeight??0)}},gy=(e,t)=>ql(Wl(dd(e),dd(t))),ho=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},Bh=e=>Ft(e.width)&&Ft(e.height)&&Ft(e.x)&&Ft(e.y),Ft=e=>!isNaN(e)&&isFinite(e),kS=(e,t)=>{},Io=(e,t=[1,1])=>({x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}),Do=({x:e,y:t},[n,r,s],o=!1,i=[1,1])=>{const l={x:(e-n)/s,y:(t-r)/s};return o?Io(l,i):l},vl=({x:e,y:t},[n,r,s])=>({x:e*s+n,y:t*s+r});function ts(e,t){if(typeof e=="number")return Math.floor((t-t/(1+e))*.5);if(typeof e=="string"&&e.endsWith("px")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(n)}if(typeof e=="string"&&e.endsWith("%")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(t*n*.01)}return console.error(`[React Flow] The padding value "${e}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function _S(e,t,n){if(typeof e=="string"||typeof e=="number"){const r=ts(e,n),s=ts(e,t);return{top:r,right:s,bottom:r,left:s,x:s*2,y:r*2}}if(typeof e=="object"){const r=ts(e.top??e.y??0,n),s=ts(e.bottom??e.y??0,n),o=ts(e.left??e.x??0,t),i=ts(e.right??e.x??0,t);return{top:r,right:i,bottom:s,left:o,x:o+i,y:r+s}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function SS(e,t,n,r,s,o){const{x:i,y:l}=vl(e,[t,n,r]),{x:c,y:u}=vl({x:e.x+e.width,y:e.y+e.height},[t,n,r]),d=s-c,f=o-u;return{left:Math.floor(i),top:Math.floor(l),right:Math.floor(d),bottom:Math.floor(f)}}const Rf=(e,t,n,r,s,o)=>{const i=_S(o,t,n),l=(t-i.x)/e.width,c=(n-i.y)/e.height,u=Math.min(l,c),d=Qs(u,r,s),f=e.x+e.width/2,m=e.y+e.height/2,y=t/2-f*d,p=n/2-m*d,w=SS(e,y,p,d,t,n),N={left:Math.min(w.left-i.left,0),top:Math.min(w.top-i.top,0),right:Math.min(w.right-i.right,0),bottom:Math.min(w.bottom-i.bottom,0)};return{x:y-N.left+N.right,y:p-N.top+N.bottom,zoom:d}},po=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0};function Xs(e){return e!=null&&e!=="parent"}function Cn(e){var t,n;return{width:((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth??0,height:((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight??0}}function xy(e){var t,n;return(((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth)!==void 0&&(((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight)!==void 0}function yy(e,t={width:0,height:0},n,r,s){const o={...e},i=r.get(n);if(i){const l=i.origin||s;o.x+=i.internals.positionAbsolute.x-(t.width??0)*l[0],o.y+=i.internals.positionAbsolute.y-(t.height??0)*l[1]}return o}function Uh(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function CS(){let e,t;return{promise:new Promise((r,s)=>{e=r,t=s}),resolve:e,reject:t}}function ES(e){return{...cy,...e||{}}}function Va(e,{snapGrid:t=[0,0],snapToGrid:n=!1,transform:r,containerBounds:s}){const{x:o,y:i}=$t(e),l=Do({x:o-((s==null?void 0:s.left)??0),y:i-((s==null?void 0:s.top)??0)},r),{x:c,y:u}=n?Io(l,t):l;return{xSnapped:c,ySnapped:u,...l}}const Tf=e=>({width:e.offsetWidth,height:e.offsetHeight}),vy=e=>{var t;return((t=e==null?void 0:e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},RS=["INPUT","SELECT","TEXTAREA"];function by(e){var r,s;const t=((s=(r=e.composedPath)==null?void 0:r.call(e))==null?void 0:s[0])||e.target;return(t==null?void 0:t.nodeType)!==1?!1:RS.includes(t.nodeName)||t.hasAttribute("contenteditable")||!!t.closest(".nokey")}const wy=e=>"clientX"in e,$t=(e,t)=>{var o,i;const n=wy(e),r=n?e.clientX:(o=e.touches)==null?void 0:o[0].clientX,s=n?e.clientY:(i=e.touches)==null?void 0:i[0].clientY;return{x:r-((t==null?void 0:t.left)??0),y:s-((t==null?void 0:t.top)??0)}},Wh=(e,t,n,r,s)=>{const o=t.querySelectorAll(`.${e}`);return!o||!o.length?null:Array.from(o).map(i=>{const l=i.getBoundingClientRect();return{id:i.getAttribute("data-handleid"),type:e,nodeId:s,position:i.getAttribute("data-handlepos"),x:(l.left-n.left)/r,y:(l.top-n.top)/r,...Tf(i)}})};function Ny({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:s,sourceControlY:o,targetControlX:i,targetControlY:l}){const c=e*.125+s*.375+i*.375+n*.125,u=t*.125+o*.375+l*.375+r*.125,d=Math.abs(c-e),f=Math.abs(u-t);return[c,u,d,f]}function hi(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function qh({pos:e,x1:t,y1:n,x2:r,y2:s,c:o}){switch(e){case J.Left:return[t-hi(t-r,o),n];case J.Right:return[t+hi(r-t,o),n];case J.Top:return[t,n-hi(n-s,o)];case J.Bottom:return[t,n+hi(s-n,o)]}}function jy({sourceX:e,sourceY:t,sourcePosition:n=J.Bottom,targetX:r,targetY:s,targetPosition:o=J.Top,curvature:i=.25}){const[l,c]=qh({pos:n,x1:e,y1:t,x2:r,y2:s,c:i}),[u,d]=qh({pos:o,x1:r,y1:s,x2:e,y2:t,c:i}),[f,m,y,p]=Ny({sourceX:e,sourceY:t,targetX:r,targetY:s,sourceControlX:l,sourceControlY:c,targetControlX:u,targetControlY:d});return[`M${e},${t} C${l},${c} ${u},${d} ${r},${s}`,f,m,y,p]}function ky({sourceX:e,sourceY:t,targetX:n,targetY:r}){const s=Math.abs(n-e)/2,o=n<e?n+s:n-s,i=Math.abs(r-t)/2,l=r<t?r+i:r-i;return[o,l,s,i]}function TS({sourceNode:e,targetNode:t,selected:n=!1,zIndex:r=0,elevateOnSelect:s=!1,zIndexMode:o="basic"}){if(o==="manual")return r;const i=s&&n?r+1e3:r,l=Math.max(e.parentId||s&&e.selected?e.internals.z:0,t.parentId||s&&t.selected?t.internals.z:0);return i+l}function MS({sourceNode:e,targetNode:t,width:n,height:r,transform:s}){const o=Wl(yl(e),yl(t));o.x===o.x2&&(o.x2+=1),o.y===o.y2&&(o.y2+=1);const i={x:-s[0]/s[2],y:-s[1]/s[2],width:n/s[2],height:r/s[2]};return ho(i,ql(o))>0}const PS=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`xy-edge__${e}${t||""}-${n}${r||""}`,IS=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),_y=(e,t,n={})=>{if(!e.source||!e.target)return t;const r=n.getEdgeId||PS;let s;return fy(e)?s={...e}:s={...e,id:r(e)},IS(s,t)?t:(s.sourceHandle===null&&delete s.sourceHandle,s.targetHandle===null&&delete s.targetHandle,t.concat(s))};function Sy({sourceX:e,sourceY:t,targetX:n,targetY:r}){const[s,o,i,l]=ky({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,s,o,i,l]}const Qh={[J.Left]:{x:-1,y:0},[J.Right]:{x:1,y:0},[J.Top]:{x:0,y:-1},[J.Bottom]:{x:0,y:1}},DS=({source:e,sourcePosition:t=J.Bottom,target:n})=>t===J.Left||t===J.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},Kh=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function AS({source:e,sourcePosition:t=J.Bottom,target:n,targetPosition:r=J.Top,center:s,offset:o,stepPosition:i}){const l=Qh[t],c=Qh[r],u={x:e.x+l.x*o,y:e.y+l.y*o},d={x:n.x+c.x*o,y:n.y+c.y*o},f=DS({source:u,sourcePosition:t,target:d}),m=f.x!==0?"x":"y",y=f[m];let p=[],w,N;const h={x:0,y:0},g={x:0,y:0},[,,x,b]=ky({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(l[m]*c[m]===-1){m==="x"?(w=s.x??u.x+(d.x-u.x)*i,N=s.y??(u.y+d.y)/2):(w=s.x??(u.x+d.x)/2,N=s.y??u.y+(d.y-u.y)*i);const k=[{x:w,y:u.y},{x:w,y:d.y}],v=[{x:u.x,y:N},{x:d.x,y:N}];l[m]===y?p=m==="x"?k:v:p=m==="x"?v:k}else{const k=[{x:u.x,y:d.y}],v=[{x:d.x,y:u.y}];if(m==="x"?p=l.x===y?v:k:p=l.y===y?k:v,t===r){const C=Math.abs(e[m]-n[m]);if(C<=o){const O=Math.min(o-1,o-C);l[m]===y?h[m]=(u[m]>e[m]?-1:1)*O:g[m]=(d[m]>n[m]?-1:1)*O}}if(t!==r){const C=m==="x"?"y":"x",O=l[m]===c[C],E=u[C]>d[C],z=u[C]<d[C];(l[m]===1&&(!O&&E||O&&z)||l[m]!==1&&(!O&&z||O&&E))&&(p=m==="x"?k:v)}const _={x:u.x+h.x,y:u.y+h.y},M={x:d.x+g.x,y:d.y+g.y},P=Math.max(Math.abs(_.x-p[0].x),Math.abs(M.x-p[0].x)),T=Math.max(Math.abs(_.y-p[0].y),Math.abs(M.y-p[0].y));P>=T?(w=(_.x+M.x)/2,N=p[0].y):(w=p[0].x,N=(_.y+M.y)/2)}return[[e,{x:u.x+h.x,y:u.y+h.y},...p,{x:d.x+g.x,y:d.y+g.y},n],w,N,x,b]}function OS(e,t,n,r){const s=Math.min(Kh(e,t)/2,Kh(t,n)/2,r),{x:o,y:i}=t;if(e.x===o&&o===n.x||e.y===i&&i===n.y)return`L${o} ${i}`;if(e.y===i){const u=e.x<n.x?-1:1,d=e.y<n.y?1:-1;return`L ${o+s*u},${i}Q ${o},${i} ${o},${i+s*d}`}const l=e.x<n.x?1:-1,c=e.y<n.y?-1:1;return`L ${o},${i+s*c}Q ${o},${i} ${o+s*l},${i}`}function bl({sourceX:e,sourceY:t,sourcePosition:n=J.Bottom,targetX:r,targetY:s,targetPosition:o=J.Top,borderRadius:i=5,centerX:l,centerY:c,offset:u=20,stepPosition:d=.5}){const[f,m,y,p,w]=AS({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:s},targetPosition:o,center:{x:l,y:c},offset:u,stepPosition:d});return[f.reduce((h,g,x)=>{let b="";return x>0&&x<f.length-1?b=OS(f[x-1],g,f[x+1],i):b=`${x===0?"M":"L"}${g.x} ${g.y}`,h+=b,h},""),m,y,p,w]}function Xh(e){var t;return e&&!!(e.internals.handleBounds||(t=e.handles)!=null&&t.length)&&!!(e.measured.width||e.width||e.initialWidth)}function LS(e){var f;const{sourceNode:t,targetNode:n}=e;if(!Xh(t)||!Xh(n))return null;const r=t.internals.handleBounds||Yh(t.handles),s=n.internals.handleBounds||Yh(n.handles),o=Gh((r==null?void 0:r.source)??[],e.sourceHandle),i=Gh(e.connectionMode===qs.Strict?(s==null?void 0:s.target)??[]:((s==null?void 0:s.target)??[]).concat((s==null?void 0:s.source)??[]),e.targetHandle);if(!o||!i)return(f=e.onError)==null||f.call(e,"008",ln.error008(o?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;const l=(o==null?void 0:o.position)||J.Bottom,c=(i==null?void 0:i.position)||J.Top,u=qr(t,o,l),d=qr(n,i,c);return{sourceX:u.x,sourceY:u.y,targetX:d.x,targetY:d.y,sourcePosition:l,targetPosition:c}}function Yh(e){if(!e)return null;const t=[],n=[];for(const r of e)r.width=r.width??1,r.height=r.height??1,r.type==="source"?t.push(r):r.type==="target"&&n.push(r);return{source:t,target:n}}function qr(e,t,n=J.Left,r=!1){const s=((t==null?void 0:t.x)??0)+e.internals.positionAbsolute.x,o=((t==null?void 0:t.y)??0)+e.internals.positionAbsolute.y,{width:i,height:l}=t??Cn(e);if(r)return{x:s+i/2,y:o+l/2};switch((t==null?void 0:t.position)??n){case J.Top:return{x:s+i/2,y:o};case J.Right:return{x:s+i,y:o+l/2};case J.Bottom:return{x:s+i/2,y:o+l};case J.Left:return{x:s,y:o+l/2}}}function Gh(e,t){return e&&(t?e.find(n=>n.id===t):e[0])||null}function fd(e,t){return e?typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(r=>`${r}=${e[r]}`).join("&")}`:""}function zS(e,{id:t,defaultColor:n,defaultMarkerStart:r,defaultMarkerEnd:s}){const o=new Set;return e.reduce((i,l)=>([l.markerStart||r,l.markerEnd||s].forEach(c=>{if(c&&typeof c=="object"){const u=fd(c,t);o.has(u)||(i.push({id:u,color:c.color||n,...c}),o.add(u))}}),i),[]).sort((i,l)=>i.id.localeCompare(l.id))}const Cy=1e3,FS=10,Mf={nodeOrigin:[0,0],nodeExtent:fo,elevateNodesOnSelect:!0,zIndexMode:"basic",defaults:{}},$S={...Mf,checkEquality:!0};function Pf(e,t){const n={...e};for(const r in t)t[r]!==void 0&&(n[r]=t[r]);return n}function VS(e,t,n){const r=Pf(Mf,n);for(const s of e.values())if(s.parentId)Df(s,e,t,r);else{const o=Mo(s,r.nodeOrigin),i=Xs(s.extent)?s.extent:r.nodeExtent,l=Wr(o,i,Cn(s));s.internals.positionAbsolute=l}}function HS(e,t){if(!e.handles)return e.measured?t==null?void 0:t.internals.handleBounds:void 0;const n=[],r=[];for(const s of e.handles){const o={id:s.id,width:s.width??1,height:s.height??1,nodeId:e.id,x:s.x,y:s.y,position:s.position,type:s.type};s.type==="source"?n.push(o):s.type==="target"&&r.push(o)}return{source:n,target:r}}function If(e){return e==="manual"}function md(e,t,n,r={}){var u,d;const s=Pf($S,r),o={i:0},i=new Map(t),l=s!=null&&s.elevateNodesOnSelect&&!If(s.zIndexMode)?Cy:0;let c=e.length>0;t.clear(),n.clear();for(const f of e){let m=i.get(f.id);if(s.checkEquality&&f===(m==null?void 0:m.internals.userNode))t.set(f.id,m);else{const y=Mo(f,s.nodeOrigin),p=Xs(f.extent)?f.extent:s.nodeExtent,w=Wr(y,p,Cn(f));m={...s.defaults,...f,measured:{width:(u=f.measured)==null?void 0:u.width,height:(d=f.measured)==null?void 0:d.height},internals:{positionAbsolute:w,handleBounds:HS(f,m),z:Ey(f,l,s.zIndexMode),userNode:f}},t.set(f.id,m)}(m.measured===void 0||m.measured.width===void 0||m.measured.height===void 0)&&!m.hidden&&(c=!1),f.parentId&&Df(m,t,n,r,o)}return c}function BS(e,t){if(!e.parentId)return;const n=t.get(e.parentId);n?n.set(e.id,e):t.set(e.parentId,new Map([[e.id,e]]))}function Df(e,t,n,r,s){const{elevateNodesOnSelect:o,nodeOrigin:i,nodeExtent:l,zIndexMode:c}=Pf(Mf,r),u=e.parentId,d=t.get(u);if(!d){console.warn(`Parent node ${u} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}BS(e,n),s&&!d.parentId&&d.internals.rootParentIndex===void 0&&c==="auto"&&(d.internals.rootParentIndex=++s.i,d.internals.z=d.internals.z+s.i*FS),s&&d.internals.rootParentIndex!==void 0&&(s.i=d.internals.rootParentIndex);const f=o&&!If(c)?Cy:0,{x:m,y,z:p}=US(e,d,i,l,f,c),{positionAbsolute:w}=e.internals,N=m!==w.x||y!==w.y;(N||p!==e.internals.z)&&t.set(e.id,{...e,internals:{...e.internals,positionAbsolute:N?{x:m,y}:w,z:p}})}function Ey(e,t,n){const r=Ft(e.zIndex)?e.zIndex:0;return If(n)?r:r+(e.selected?t:0)}function US(e,t,n,r,s,o){const{x:i,y:l}=t.internals.positionAbsolute,c=Cn(e),u=Mo(e,n),d=Xs(e.extent)?Wr(u,e.extent,c):u;let f=Wr({x:i+d.x,y:l+d.y},r,c);e.extent==="parent"&&(f=hy(f,c,t));const m=Ey(e,s,o),y=t.internals.z??0;return{x:f.x,y:f.y,z:y>=m?y+1:m}}function Af(e,t,n,r=[0,0]){var i;const s=[],o=new Map;for(const l of e){const c=t.get(l.parentId);if(!c)continue;const u=((i=o.get(l.parentId))==null?void 0:i.expandedRect)??Ks(c),d=gy(u,l.rect);o.set(l.parentId,{expandedRect:d,parent:c})}return o.size>0&&o.forEach(({expandedRect:l,parent:c},u)=>{var x;const d=c.internals.positionAbsolute,f=Cn(c),m=c.origin??r,y=l.x<d.x?Math.round(Math.abs(d.x-l.x)):0,p=l.y<d.y?Math.round(Math.abs(d.y-l.y)):0,w=Math.max(f.width,Math.round(l.width)),N=Math.max(f.height,Math.round(l.height)),h=(w-f.width)*m[0],g=(N-f.height)*m[1];(y>0||p>0||h||g)&&(s.push({id:u,type:"position",position:{x:c.position.x-y+h,y:c.position.y-p+g}}),(x=n.get(u))==null||x.forEach(b=>{e.some(j=>j.id===b.id)||s.push({id:b.id,type:"position",position:{x:b.position.x+y,y:b.position.y+p}})})),(f.width<l.width||f.height<l.height||y||p)&&s.push({id:u,type:"dimensions",setAttributes:!0,dimensions:{width:w+(y?m[0]*y-h:0),height:N+(p?m[1]*p-g:0)}})}),s}function WS(e,t,n,r,s,o,i){const l=r==null?void 0:r.querySelector(".xyflow__viewport");let c=!1;if(!l)return{changes:[],updatedInternals:c};const u=[],d=window.getComputedStyle(l),{m22:f}=new window.DOMMatrixReadOnly(d.transform),m=[];for(const y of e.values()){const p=t.get(y.id);if(!p)continue;if(p.hidden){t.set(p.id,{...p,internals:{...p.internals,handleBounds:void 0}}),c=!0;continue}const w=Tf(y.nodeElement),N=p.measured.width!==w.width||p.measured.height!==w.height;if(!!(w.width&&w.height&&(N||!p.internals.handleBounds||y.force))){const g=y.nodeElement.getBoundingClientRect(),x=Xs(p.extent)?p.extent:o;let{positionAbsolute:b}=p.internals;p.parentId&&p.extent==="parent"?b=hy(b,w,t.get(p.parentId)):x&&(b=Wr(b,x,w));const j={...p,measured:w,internals:{...p.internals,positionAbsolute:b,handleBounds:{source:Wh("source",y.nodeElement,g,f,p.id),target:Wh("target",y.nodeElement,g,f,p.id)}}};t.set(p.id,j),p.parentId&&Df(j,t,n,{nodeOrigin:s,zIndexMode:i}),c=!0,N&&(u.push({id:p.id,type:"dimensions",dimensions:w}),p.expandParent&&p.parentId&&m.push({id:p.id,parentId:p.parentId,rect:Ks(j,s)}))}}if(m.length>0){const y=Af(m,t,n,s);u.push(...y)}return{changes:u,updatedInternals:c}}async function qS({delta:e,panZoom:t,transform:n,translateExtent:r,width:s,height:o}){if(!t||!e.x&&!e.y)return Promise.resolve(!1);const i=await t.setViewportConstrained({x:n[0]+e.x,y:n[1]+e.y,zoom:n[2]},[[0,0],[s,o]],r),l=!!i&&(i.x!==n[0]||i.y!==n[1]||i.k!==n[2]);return Promise.resolve(l)}function Jh(e,t,n,r,s,o){let i=s;const l=r.get(i)||new Map;r.set(i,l.set(n,t)),i=`${s}-${e}`;const c=r.get(i)||new Map;if(r.set(i,c.set(n,t)),o){i=`${s}-${e}-${o}`;const u=r.get(i)||new Map;r.set(i,u.set(n,t))}}function Ry(e,t,n){e.clear(),t.clear();for(const r of n){const{source:s,target:o,sourceHandle:i=null,targetHandle:l=null}=r,c={edgeId:r.id,source:s,target:o,sourceHandle:i,targetHandle:l},u=`${s}-${i}--${o}-${l}`,d=`${o}-${l}--${s}-${i}`;Jh("source",c,d,e,s,i),Jh("target",c,u,e,o,l),t.set(r.id,r)}}function Ty(e,t){if(!e.parentId)return!1;const n=t.get(e.parentId);return n?n.selected?!0:Ty(n,t):!1}function Zh(e,t,n){var s;let r=e;do{if((s=r==null?void 0:r.matches)!=null&&s.call(r,t))return!0;if(r===n)return!1;r=r==null?void 0:r.parentElement}while(r);return!1}function QS(e,t,n,r){const s=new Map;for(const[o,i]of e)if((i.selected||i.id===r)&&(!i.parentId||!Ty(i,e))&&(i.draggable||t&&typeof i.draggable>"u")){const l=e.get(o);l&&s.set(o,{id:o,position:l.position||{x:0,y:0},distance:{x:n.x-l.internals.positionAbsolute.x,y:n.y-l.internals.positionAbsolute.y},extent:l.extent,parentId:l.parentId,origin:l.origin,expandParent:l.expandParent,internals:{positionAbsolute:l.internals.positionAbsolute||{x:0,y:0}},measured:{width:l.measured.width??0,height:l.measured.height??0}})}return s}function $c({nodeId:e,dragItems:t,nodeLookup:n,dragging:r=!0}){var i,l,c;const s=[];for(const[u,d]of t){const f=(i=n.get(u))==null?void 0:i.internals.userNode;f&&s.push({...f,position:d.position,dragging:r})}if(!e)return[s[0],s];const o=(l=n.get(e))==null?void 0:l.internals.userNode;return[o?{...o,position:((c=t.get(e))==null?void 0:c.position)||o.position,dragging:r}:s[0],s]}function KS({dragItems:e,snapGrid:t,x:n,y:r}){const s=e.values().next().value;if(!s)return null;const o={x:n-s.distance.x,y:r-s.distance.y},i=Io(o,t);return{x:i.x-o.x,y:i.y-o.y}}function XS({onNodeMouseDown:e,getStoreItems:t,onDragStart:n,onDrag:r,onDragStop:s}){let o={x:null,y:null},i=0,l=new Map,c=!1,u={x:0,y:0},d=null,f=!1,m=null,y=!1,p=!1,w=null;function N({noDragClassName:g,handleSelector:x,domNode:b,isSelectable:j,nodeId:k,nodeClickDistance:v=0}){m=ht(b);function _({x:C,y:O}){const{nodeLookup:E,nodeExtent:z,snapGrid:A,snapToGrid:L,nodeOrigin:R,onNodeDrag:I,onSelectionDrag:F,onError:V,updateNodePositions:H}=t();o={x:C,y:O};let q=!1;const U=l.size>1,Y=U&&z?dd(Po(l)):null,G=U&&L?KS({dragItems:l,snapGrid:A,x:C,y:O}):null;for(const[Z,W]of l){if(!E.has(Z))continue;let ee={x:C-W.distance.x,y:O-W.distance.y};L&&(ee=G?{x:Math.round(ee.x+G.x),y:Math.round(ee.y+G.y)}:Io(ee,A));let ie=null;if(U&&z&&!W.extent&&Y){const{positionAbsolute:ne}=W.internals,pe=ne.x-Y.x+z[0][0],ve=ne.x+W.measured.width-Y.x2+z[1][0],me=ne.y-Y.y+z[0][1],We=ne.y+W.measured.height-Y.y2+z[1][1];ie=[[pe,me],[ve,We]]}const{position:se,positionAbsolute:re}=my({nodeId:Z,nextPosition:ee,nodeLookup:E,nodeExtent:ie||z,nodeOrigin:R,onError:V});q=q||W.position.x!==se.x||W.position.y!==se.y,W.position=se,W.internals.positionAbsolute=re}if(p=p||q,!!q&&(H(l,!0),w&&(r||I||!k&&F))){const[Z,W]=$c({nodeId:k,dragItems:l,nodeLookup:E});r==null||r(w,l,Z,W),I==null||I(w,Z,W),k||F==null||F(w,W)}}async function M(){if(!d)return;const{transform:C,panBy:O,autoPanSpeed:E,autoPanOnNodeDrag:z}=t();if(!z){c=!1,cancelAnimationFrame(i);return}const[A,L]=py(u,d,E);(A!==0||L!==0)&&(o.x=(o.x??0)-A/C[2],o.y=(o.y??0)-L/C[2],await O({x:A,y:L})&&_(o)),i=requestAnimationFrame(M)}function P(C){var U;const{nodeLookup:O,multiSelectionActive:E,nodesDraggable:z,transform:A,snapGrid:L,snapToGrid:R,selectNodesOnDrag:I,onNodeDragStart:F,onSelectionDragStart:V,unselectNodesAndEdges:H}=t();f=!0,(!I||!j)&&!E&&k&&((U=O.get(k))!=null&&U.selected||H()),j&&I&&k&&(e==null||e(k));const q=Va(C.sourceEvent,{transform:A,snapGrid:L,snapToGrid:R,containerBounds:d});if(o=q,l=QS(O,z,q,k),l.size>0&&(n||F||!k&&V)){const[Y,G]=$c({nodeId:k,dragItems:l,nodeLookup:O});n==null||n(C.sourceEvent,l,Y,G),F==null||F(C.sourceEvent,Y,G),k||V==null||V(C.sourceEvent,G)}}const T=qx().clickDistance(v).on("start",C=>{const{domNode:O,nodeDragThreshold:E,transform:z,snapGrid:A,snapToGrid:L}=t();d=(O==null?void 0:O.getBoundingClientRect())||null,y=!1,p=!1,w=C.sourceEvent,E===0&&P(C),o=Va(C.sourceEvent,{transform:z,snapGrid:A,snapToGrid:L,containerBounds:d}),u=$t(C.sourceEvent,d)}).on("drag",C=>{const{autoPanOnNodeDrag:O,transform:E,snapGrid:z,snapToGrid:A,nodeDragThreshold:L,nodeLookup:R}=t(),I=Va(C.sourceEvent,{transform:E,snapGrid:z,snapToGrid:A,containerBounds:d});if(w=C.sourceEvent,(C.sourceEvent.type==="touchmove"&&C.sourceEvent.touches.length>1||k&&!R.has(k))&&(y=!0),!y){if(!c&&O&&f&&(c=!0,M()),!f){const F=$t(C.sourceEvent,d),V=F.x-u.x,H=F.y-u.y;Math.sqrt(V*V+H*H)>L&&P(C)}(o.x!==I.xSnapped||o.y!==I.ySnapped)&&l&&f&&(u=$t(C.sourceEvent,d),_(I))}}).on("end",C=>{if(!(!f||y)&&(c=!1,f=!1,cancelAnimationFrame(i),l.size>0)){const{nodeLookup:O,updateNodePositions:E,onNodeDragStop:z,onSelectionDragStop:A}=t();if(p&&(E(l,!1),p=!1),s||z||!k&&A){const[L,R]=$c({nodeId:k,dragItems:l,nodeLookup:O,dragging:!1});s==null||s(C.sourceEvent,l,L,R),z==null||z(C.sourceEvent,L,R),k||A==null||A(C.sourceEvent,R)}}}).filter(C=>{const O=C.target;return!C.button&&(!g||!Zh(O,`.${g}`,b))&&(!x||Zh(O,x,b))});m.call(T)}function h(){m==null||m.on(".drag",null)}return{update:N,destroy:h}}function YS(e,t,n){const r=[],s={x:e.x-n,y:e.y-n,width:n*2,height:n*2};for(const o of t.values())ho(s,Ks(o))>0&&r.push(o);return r}const GS=250;function JS(e,t,n,r){var l,c;let s=[],o=1/0;const i=YS(e,n,t+GS);for(const u of i){const d=[...((l=u.internals.handleBounds)==null?void 0:l.source)??[],...((c=u.internals.handleBounds)==null?void 0:c.target)??[]];for(const f of d){if(r.nodeId===f.nodeId&&r.type===f.type&&r.id===f.id)continue;const{x:m,y}=qr(u,f,f.position,!0),p=Math.sqrt(Math.pow(m-e.x,2)+Math.pow(y-e.y,2));p>t||(p<o?(s=[{...f,x:m,y}],o=p):p===o&&s.push({...f,x:m,y}))}}if(!s.length)return null;if(s.length>1){const u=r.type==="source"?"target":"source";return s.find(d=>d.type===u)??s[0]}return s[0]}function My(e,t,n,r,s,o=!1){var u,d,f;const i=r.get(e);if(!i)return null;const l=s==="strict"?(u=i.internals.handleBounds)==null?void 0:u[t]:[...((d=i.internals.handleBounds)==null?void 0:d.source)??[],...((f=i.internals.handleBounds)==null?void 0:f.target)??[]],c=(n?l==null?void 0:l.find(m=>m.id===n):l==null?void 0:l[0])??null;return c&&o?{...c,...qr(i,c,c.position,!0)}:c}function Py(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function ZS(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}const Iy=()=>!0;function eC(e,{connectionMode:t,connectionRadius:n,handleId:r,nodeId:s,edgeUpdaterType:o,isTarget:i,domNode:l,nodeLookup:c,lib:u,autoPanOnConnect:d,flowId:f,panBy:m,cancelConnection:y,onConnectStart:p,onConnect:w,onConnectEnd:N,isValidConnection:h=Iy,onReconnectEnd:g,updateConnection:x,getTransform:b,getFromHandle:j,autoPanSpeed:k,dragThreshold:v=1,handleDomNode:_}){const M=vy(e.target);let P=0,T;const{x:C,y:O}=$t(e),E=Py(o,_),z=l==null?void 0:l.getBoundingClientRect();let A=!1;if(!z||!E)return;const L=My(s,E,r,c,t);if(!L)return;let R=$t(e,z),I=!1,F=null,V=!1,H=null;function q(){if(!d||!z)return;const[se,re]=py(R,z,k);m({x:se,y:re}),P=requestAnimationFrame(q)}const U={...L,nodeId:s,type:E,position:L.position},Y=c.get(s);let Z={inProgress:!0,isValid:null,from:qr(Y,U,J.Left,!0),fromHandle:U,fromPosition:U.position,fromNode:Y,to:R,toHandle:null,toPosition:Vh[U.position],toNode:null,pointer:R};function W(){A=!0,x(Z),p==null||p(e,{nodeId:s,handleId:r,handleType:E})}v===0&&W();function ee(se){if(!A){const{x:We,y:En}=$t(se),un=We-C,dr=En-O;if(!(un*un+dr*dr>v*v))return;W()}if(!j()||!U){ie(se);return}const re=b();R=$t(se,z),T=JS(Do(R,re,!1,[1,1]),n,c,U),I||(q(),I=!0);const ne=Dy(se,{handle:T,connectionMode:t,fromNodeId:s,fromHandleId:r,fromType:i?"target":"source",isValidConnection:h,doc:M,lib:u,flowId:f,nodeLookup:c});H=ne.handleDomNode,F=ne.connection,V=ZS(!!T,ne.isValid);const pe=c.get(s),ve=pe?qr(pe,U,J.Left,!0):Z.from,me={...Z,from:ve,isValid:V,to:ne.toHandle&&V?vl({x:ne.toHandle.x,y:ne.toHandle.y},re):R,toHandle:ne.toHandle,toPosition:V&&ne.toHandle?ne.toHandle.position:Vh[U.position],toNode:ne.toHandle?c.get(ne.toHandle.nodeId):null,pointer:R};x(me),Z=me}function ie(se){if(!("touches"in se&&se.touches.length>0)){if(A){(T||H)&&F&&V&&(w==null||w(F));const{inProgress:re,...ne}=Z,pe={...ne,toPosition:Z.toHandle?Z.toPosition:null};N==null||N(se,pe),o&&(g==null||g(se,pe))}y(),cancelAnimationFrame(P),I=!1,V=!1,F=null,H=null,M.removeEventListener("mousemove",ee),M.removeEventListener("mouseup",ie),M.removeEventListener("touchmove",ee),M.removeEventListener("touchend",ie)}}M.addEventListener("mousemove",ee),M.addEventListener("mouseup",ie),M.addEventListener("touchmove",ee),M.addEventListener("touchend",ie)}function Dy(e,{handle:t,connectionMode:n,fromNodeId:r,fromHandleId:s,fromType:o,doc:i,lib:l,flowId:c,isValidConnection:u=Iy,nodeLookup:d}){const f=o==="target",m=t?i.querySelector(`.${l}-flow__handle[data-id="${c}-${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`):null,{x:y,y:p}=$t(e),w=i.elementFromPoint(y,p),N=w!=null&&w.classList.contains(`${l}-flow__handle`)?w:m,h={handleDomNode:N,isValid:!1,connection:null,toHandle:null};if(N){const g=Py(void 0,N),x=N.getAttribute("data-nodeid"),b=N.getAttribute("data-handleid"),j=N.classList.contains("connectable"),k=N.classList.contains("connectableend");if(!x||!g)return h;const v={source:f?x:r,sourceHandle:f?b:s,target:f?r:x,targetHandle:f?s:b};h.connection=v;const M=j&&k&&(n===qs.Strict?f&&g==="source"||!f&&g==="target":x!==r||b!==s);h.isValid=M&&u(v),h.toHandle=My(x,g,b,d,n,!0)}return h}const hd={onPointerDown:eC,isValid:Dy};function tC({domNode:e,panZoom:t,getTransform:n,getViewScale:r}){const s=ht(e);function o({translateExtent:l,width:c,height:u,zoomStep:d=1,pannable:f=!0,zoomable:m=!0,inversePan:y=!1}){const p=x=>{if(x.sourceEvent.type!=="wheel"||!t)return;const b=n(),j=x.sourceEvent.ctrlKey&&po()?10:1,k=-x.sourceEvent.deltaY*(x.sourceEvent.deltaMode===1?.05:x.sourceEvent.deltaMode?1:.002)*d,v=b[2]*Math.pow(2,k*j);t.scaleTo(v)};let w=[0,0];const N=x=>{(x.sourceEvent.type==="mousedown"||x.sourceEvent.type==="touchstart")&&(w=[x.sourceEvent.clientX??x.sourceEvent.touches[0].clientX,x.sourceEvent.clientY??x.sourceEvent.touches[0].clientY])},h=x=>{const b=n();if(x.sourceEvent.type!=="mousemove"&&x.sourceEvent.type!=="touchmove"||!t)return;const j=[x.sourceEvent.clientX??x.sourceEvent.touches[0].clientX,x.sourceEvent.clientY??x.sourceEvent.touches[0].clientY],k=[j[0]-w[0],j[1]-w[1]];w=j;const v=r()*Math.max(b[2],Math.log(b[2]))*(y?-1:1),_={x:b[0]-k[0]*v,y:b[1]-k[1]*v},M=[[0,0],[c,u]];t.setViewportConstrained({x:_.x,y:_.y,zoom:b[2]},M,l)},g=iy().on("start",N).on("zoom",f?h:null).on("zoom.wheel",m?p:null);s.call(g,{})}function i(){s.on("zoom",null)}return{update:o,destroy:i,pointer:Ot}}const Ql=e=>({x:e.x,y:e.y,zoom:e.k}),Vc=({x:e,y:t,zoom:n})=>Ul.translate(e,t).scale(n),hs=(e,t)=>e.target.closest(`.${t}`),Ay=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),nC=e=>((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2,Hc=(e,t=0,n=nC,r=()=>{})=>{const s=typeof t=="number"&&t>0;return s||r(),s?e.transition().duration(t).ease(n).on("end",r):e},Oy=e=>{const t=e.ctrlKey&&po()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t};function rC({zoomPanValues:e,noWheelClassName:t,d3Selection:n,d3Zoom:r,panOnScrollMode:s,panOnScrollSpeed:o,zoomOnPinch:i,onPanZoomStart:l,onPanZoom:c,onPanZoomEnd:u}){return d=>{if(hs(d,t))return d.ctrlKey&&d.preventDefault(),!1;d.preventDefault(),d.stopImmediatePropagation();const f=n.property("__zoom").k||1;if(d.ctrlKey&&i){const N=Ot(d),h=Oy(d),g=f*Math.pow(2,h);r.scaleTo(n,g,N,d);return}const m=d.deltaMode===1?20:1;let y=s===Dr.Vertical?0:d.deltaX*m,p=s===Dr.Horizontal?0:d.deltaY*m;!po()&&d.shiftKey&&s!==Dr.Vertical&&(y=d.deltaY*m,p=0),r.translateBy(n,-(y/f)*o,-(p/f)*o,{internal:!0});const w=Ql(n.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling?(c==null||c(d,w),e.panScrollTimeout=setTimeout(()=>{u==null||u(d,w),e.isPanScrolling=!1},150)):(e.isPanScrolling=!0,l==null||l(d,w))}}function sC({noWheelClassName:e,preventScrolling:t,d3ZoomHandler:n}){return function(r,s){const o=r.type==="wheel",i=!t&&o&&!r.ctrlKey,l=hs(r,e);if(r.ctrlKey&&o&&l&&r.preventDefault(),i||l)return null;r.preventDefault(),n.call(this,r,s)}}function aC({zoomPanValues:e,onDraggingChange:t,onPanZoomStart:n}){return r=>{var o,i,l;if((o=r.sourceEvent)!=null&&o.internal)return;const s=Ql(r.transform);e.mouseButton=((i=r.sourceEvent)==null?void 0:i.button)||0,e.isZoomingOrPanning=!0,e.prevViewport=s,((l=r.sourceEvent)==null?void 0:l.type)==="mousedown"&&t(!0),n&&(n==null||n(r.sourceEvent,s))}}function oC({zoomPanValues:e,panOnDrag:t,onPaneContextMenu:n,onTransformChange:r,onPanZoom:s}){return o=>{var i,l;e.usedRightMouseButton=!!(n&&Ay(t,e.mouseButton??0)),(i=o.sourceEvent)!=null&&i.sync||r([o.transform.x,o.transform.y,o.transform.k]),s&&!((l=o.sourceEvent)!=null&&l.internal)&&(s==null||s(o.sourceEvent,Ql(o.transform)))}}function iC({zoomPanValues:e,panOnDrag:t,panOnScroll:n,onDraggingChange:r,onPanZoomEnd:s,onPaneContextMenu:o}){return i=>{var l;if(!((l=i.sourceEvent)!=null&&l.internal)&&(e.isZoomingOrPanning=!1,o&&Ay(t,e.mouseButton??0)&&!e.usedRightMouseButton&&i.sourceEvent&&o(i.sourceEvent),e.usedRightMouseButton=!1,r(!1),s)){const c=Ql(i.transform);e.prevViewport=c,clearTimeout(e.timerId),e.timerId=setTimeout(()=>{s==null||s(i.sourceEvent,c)},n?150:0)}}}function lC({zoomActivationKeyPressed:e,zoomOnScroll:t,zoomOnPinch:n,panOnDrag:r,panOnScroll:s,zoomOnDoubleClick:o,userSelectionActive:i,noWheelClassName:l,noPanClassName:c,lib:u,connectionInProgress:d}){return f=>{var N;const m=e||t,y=n&&f.ctrlKey,p=f.type==="wheel";if(f.button===1&&f.type==="mousedown"&&(hs(f,`${u}-flow__node`)||hs(f,`${u}-flow__edge`)))return!0;if(!r&&!m&&!s&&!o&&!n||i||d&&!p||hs(f,l)&&p||hs(f,c)&&(!p||s&&p&&!e)||!n&&f.ctrlKey&&p)return!1;if(!n&&f.type==="touchstart"&&((N=f.touches)==null?void 0:N.length)>1)return f.preventDefault(),!1;if(!m&&!s&&!y&&p||!r&&(f.type==="mousedown"||f.type==="touchstart")||Array.isArray(r)&&!r.includes(f.button)&&f.type==="mousedown")return!1;const w=Array.isArray(r)&&r.includes(f.button)||!f.button||f.button<=1;return(!f.ctrlKey||p)&&w}}function cC({domNode:e,minZoom:t,maxZoom:n,translateExtent:r,viewport:s,onPanZoom:o,onPanZoomStart:i,onPanZoomEnd:l,onDraggingChange:c}){const u={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},d=e.getBoundingClientRect(),f=iy().scaleExtent([t,n]).translateExtent(r),m=ht(e).call(f);g({x:s.x,y:s.y,zoom:Qs(s.zoom,t,n)},[[0,0],[d.width,d.height]],r);const y=m.on("wheel.zoom"),p=m.on("dblclick.zoom");f.wheelDelta(Oy);function w(T,C){return m?new Promise(O=>{f==null||f.interpolate((C==null?void 0:C.interpolate)==="linear"?$a:Pi).transform(Hc(m,C==null?void 0:C.duration,C==null?void 0:C.ease,()=>O(!0)),T)}):Promise.resolve(!1)}function N({noWheelClassName:T,noPanClassName:C,onPaneContextMenu:O,userSelectionActive:E,panOnScroll:z,panOnDrag:A,panOnScrollMode:L,panOnScrollSpeed:R,preventScrolling:I,zoomOnPinch:F,zoomOnScroll:V,zoomOnDoubleClick:H,zoomActivationKeyPressed:q,lib:U,onTransformChange:Y,connectionInProgress:G,paneClickDistance:Z,selectionOnDrag:W}){E&&!u.isZoomingOrPanning&&h();const ee=z&&!q&&!E;f.clickDistance(W?1/0:!Ft(Z)||Z<0?0:Z);const ie=ee?rC({zoomPanValues:u,noWheelClassName:T,d3Selection:m,d3Zoom:f,panOnScrollMode:L,panOnScrollSpeed:R,zoomOnPinch:F,onPanZoomStart:i,onPanZoom:o,onPanZoomEnd:l}):sC({noWheelClassName:T,preventScrolling:I,d3ZoomHandler:y});if(m.on("wheel.zoom",ie,{passive:!1}),!E){const re=aC({zoomPanValues:u,onDraggingChange:c,onPanZoomStart:i});f.on("start",re);const ne=oC({zoomPanValues:u,panOnDrag:A,onPaneContextMenu:!!O,onPanZoom:o,onTransformChange:Y});f.on("zoom",ne);const pe=iC({zoomPanValues:u,panOnDrag:A,panOnScroll:z,onPaneContextMenu:O,onPanZoomEnd:l,onDraggingChange:c});f.on("end",pe)}const se=lC({zoomActivationKeyPressed:q,panOnDrag:A,zoomOnScroll:V,panOnScroll:z,zoomOnDoubleClick:H,zoomOnPinch:F,userSelectionActive:E,noPanClassName:C,noWheelClassName:T,lib:U,connectionInProgress:G});f.filter(se),H?m.on("dblclick.zoom",p):m.on("dblclick.zoom",null)}function h(){f.on("zoom",null)}async function g(T,C,O){const E=Vc(T),z=f==null?void 0:f.constrain()(E,C,O);return z&&await w(z),new Promise(A=>A(z))}async function x(T,C){const O=Vc(T);return await w(O,C),new Promise(E=>E(O))}function b(T){if(m){const C=Vc(T),O=m.property("__zoom");(O.k!==T.zoom||O.x!==T.x||O.y!==T.y)&&(f==null||f.transform(m,C,null,{sync:!0}))}}function j(){const T=m?oy(m.node()):{x:0,y:0,k:1};return{x:T.x,y:T.y,zoom:T.k}}function k(T,C){return m?new Promise(O=>{f==null||f.interpolate((C==null?void 0:C.interpolate)==="linear"?$a:Pi).scaleTo(Hc(m,C==null?void 0:C.duration,C==null?void 0:C.ease,()=>O(!0)),T)}):Promise.resolve(!1)}function v(T,C){return m?new Promise(O=>{f==null||f.interpolate((C==null?void 0:C.interpolate)==="linear"?$a:Pi).scaleBy(Hc(m,C==null?void 0:C.duration,C==null?void 0:C.ease,()=>O(!0)),T)}):Promise.resolve(!1)}function _(T){f==null||f.scaleExtent(T)}function M(T){f==null||f.translateExtent(T)}function P(T){const C=!Ft(T)||T<0?0:T;f==null||f.clickDistance(C)}return{update:N,destroy:h,setViewport:x,setViewportConstrained:g,getViewport:j,scaleTo:k,scaleBy:v,setScaleExtent:_,setTranslateExtent:M,syncViewport:b,setClickDistance:P}}var Ys;(function(e){e.Line="line",e.Handle="handle"})(Ys||(Ys={}));function uC({width:e,prevWidth:t,height:n,prevHeight:r,affectsX:s,affectsY:o}){const i=e-t,l=n-r,c=[i>0?1:i<0?-1:0,l>0?1:l<0?-1:0];return i&&s&&(c[0]=c[0]*-1),l&&o&&(c[1]=c[1]*-1),c}function ep(e){const t=e.includes("right")||e.includes("left"),n=e.includes("bottom")||e.includes("top"),r=e.includes("left"),s=e.includes("top");return{isHorizontal:t,isVertical:n,affectsX:r,affectsY:s}}function Tn(e,t){return Math.max(0,t-e)}function Mn(e,t){return Math.max(0,e-t)}function pi(e,t,n){return Math.max(0,t-e,e-n)}function tp(e,t){return e?!t:t}function dC(e,t,n,r,s,o,i,l){let{affectsX:c,affectsY:u}=t;const{isHorizontal:d,isVertical:f}=t,m=d&&f,{xSnapped:y,ySnapped:p}=n,{minWidth:w,maxWidth:N,minHeight:h,maxHeight:g}=r,{x,y:b,width:j,height:k,aspectRatio:v}=e;let _=Math.floor(d?y-e.pointerX:0),M=Math.floor(f?p-e.pointerY:0);const P=j+(c?-_:_),T=k+(u?-M:M),C=-o[0]*j,O=-o[1]*k;let E=pi(P,w,N),z=pi(T,h,g);if(i){let R=0,I=0;c&&_<0?R=Tn(x+_+C,i[0][0]):!c&&_>0&&(R=Mn(x+P+C,i[1][0])),u&&M<0?I=Tn(b+M+O,i[0][1]):!u&&M>0&&(I=Mn(b+T+O,i[1][1])),E=Math.max(E,R),z=Math.max(z,I)}if(l){let R=0,I=0;c&&_>0?R=Mn(x+_,l[0][0]):!c&&_<0&&(R=Tn(x+P,l[1][0])),u&&M>0?I=Mn(b+M,l[0][1]):!u&&M<0&&(I=Tn(b+T,l[1][1])),E=Math.max(E,R),z=Math.max(z,I)}if(s){if(d){const R=pi(P/v,h,g)*v;if(E=Math.max(E,R),i){let I=0;!c&&!u||c&&!u&&m?I=Mn(b+O+P/v,i[1][1])*v:I=Tn(b+O+(c?_:-_)/v,i[0][1])*v,E=Math.max(E,I)}if(l){let I=0;!c&&!u||c&&!u&&m?I=Tn(b+P/v,l[1][1])*v:I=Mn(b+(c?_:-_)/v,l[0][1])*v,E=Math.max(E,I)}}if(f){const R=pi(T*v,w,N)/v;if(z=Math.max(z,R),i){let I=0;!c&&!u||u&&!c&&m?I=Mn(x+T*v+C,i[1][0])/v:I=Tn(x+(u?M:-M)*v+C,i[0][0])/v,z=Math.max(z,I)}if(l){let I=0;!c&&!u||u&&!c&&m?I=Tn(x+T*v,l[1][0])/v:I=Mn(x+(u?M:-M)*v,l[0][0])/v,z=Math.max(z,I)}}}M=M+(M<0?z:-z),_=_+(_<0?E:-E),s&&(m?P>T*v?M=(tp(c,u)?-_:_)/v:_=(tp(c,u)?-M:M)*v:d?(M=_/v,u=c):(_=M*v,c=u));const A=c?x+_:x,L=u?b+M:b;return{width:j+(c?-_:_),height:k+(u?-M:M),x:o[0]*_*(c?-1:1)+A,y:o[1]*M*(u?-1:1)+L}}const Ly={width:0,height:0,x:0,y:0},fC={...Ly,pointerX:0,pointerY:0,aspectRatio:1};function mC(e){return[[0,0],[e.measured.width,e.measured.height]]}function hC(e,t,n){const r=t.position.x+e.position.x,s=t.position.y+e.position.y,o=e.measured.width??0,i=e.measured.height??0,l=n[0]*o,c=n[1]*i;return[[r-l,s-c],[r+o-l,s+i-c]]}function pC({domNode:e,nodeId:t,getStoreItems:n,onChange:r,onEnd:s}){const o=ht(e);let i={controlDirection:ep("bottom-right"),boundaries:{minWidth:0,minHeight:0,maxWidth:Number.MAX_VALUE,maxHeight:Number.MAX_VALUE},resizeDirection:void 0,keepAspectRatio:!1};function l({controlPosition:u,boundaries:d,keepAspectRatio:f,resizeDirection:m,onResizeStart:y,onResize:p,onResizeEnd:w,shouldResize:N}){let h={...Ly},g={...fC};i={boundaries:d,resizeDirection:m,keepAspectRatio:f,controlDirection:ep(u)};let x,b=null,j=[],k,v,_,M=!1;const P=qx().on("start",T=>{const{nodeLookup:C,transform:O,snapGrid:E,snapToGrid:z,nodeOrigin:A,paneDomNode:L}=n();if(x=C.get(t),!x)return;b=(L==null?void 0:L.getBoundingClientRect())??null;const{xSnapped:R,ySnapped:I}=Va(T.sourceEvent,{transform:O,snapGrid:E,snapToGrid:z,containerBounds:b});h={width:x.measured.width??0,height:x.measured.height??0,x:x.position.x??0,y:x.position.y??0},g={...h,pointerX:R,pointerY:I,aspectRatio:h.width/h.height},k=void 0,x.parentId&&(x.extent==="parent"||x.expandParent)&&(k=C.get(x.parentId),v=k&&x.extent==="parent"?mC(k):void 0),j=[],_=void 0;for(const[F,V]of C)if(V.parentId===t&&(j.push({id:F,position:{...V.position},extent:V.extent}),V.extent==="parent"||V.expandParent)){const H=hC(V,x,V.origin??A);_?_=[[Math.min(H[0][0],_[0][0]),Math.min(H[0][1],_[0][1])],[Math.max(H[1][0],_[1][0]),Math.max(H[1][1],_[1][1])]]:_=H}y==null||y(T,{...h})}).on("drag",T=>{const{transform:C,snapGrid:O,snapToGrid:E,nodeOrigin:z}=n(),A=Va(T.sourceEvent,{transform:C,snapGrid:O,snapToGrid:E,containerBounds:b}),L=[];if(!x)return;const{x:R,y:I,width:F,height:V}=h,H={},q=x.origin??z,{width:U,height:Y,x:G,y:Z}=dC(g,i.controlDirection,A,i.boundaries,i.keepAspectRatio,q,v,_),W=U!==F,ee=Y!==V,ie=G!==R&&W,se=Z!==I&&ee;if(!ie&&!se&&!W&&!ee)return;if((ie||se||q[0]===1||q[1]===1)&&(H.x=ie?G:h.x,H.y=se?Z:h.y,h.x=H.x,h.y=H.y,j.length>0)){const ve=G-R,me=Z-I;for(const We of j)We.position={x:We.position.x-ve+q[0]*(U-F),y:We.position.y-me+q[1]*(Y-V)},L.push(We)}if((W||ee)&&(H.width=W&&(!i.resizeDirection||i.resizeDirection==="horizontal")?U:h.width,H.height=ee&&(!i.resizeDirection||i.resizeDirection==="vertical")?Y:h.height,h.width=H.width,h.height=H.height),k&&x.expandParent){const ve=q[0]*(H.width??0);H.x&&H.x<ve&&(h.x=ve,g.x=g.x-(H.x-ve));const me=q[1]*(H.height??0);H.y&&H.y<me&&(h.y=me,g.y=g.y-(H.y-me))}const re=uC({width:h.width,prevWidth:F,height:h.height,prevHeight:V,affectsX:i.controlDirection.affectsX,affectsY:i.controlDirection.affectsY}),ne={...h,direction:re};(N==null?void 0:N(T,ne))!==!1&&(M=!0,p==null||p(T,ne),r(H,L))}).on("end",T=>{M&&(w==null||w(T,{...h}),s==null||s({...h}),M=!1)});o.call(P)}function c(){o.on(".drag",null)}return{update:l,destroy:c}}const{useDebugValue:gC}=nn,{useSyncExternalStoreWithSelector:xC}=Rx,yC=e=>e;function zy(e,t=yC,n){const r=xC(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return gC(r),r}const np=(e,t)=>{const n=kx(e),r=(s,o=t)=>zy(n,s,o);return Object.assign(r,n),r},vC=(e,t)=>e?np(e,t):np;function je(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[r,s]of e)if(!Object.is(s,t.get(r)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}const Kl=S.createContext(null),bC=Kl.Provider,Fy=ln.error001();function de(e,t){const n=S.useContext(Kl);if(n===null)throw new Error(Fy);return zy(n,e,t)}function ke(){const e=S.useContext(Kl);if(e===null)throw new Error(Fy);return S.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe}),[e])}const rp={display:"none"},wC={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},$y="react-flow__node-desc",Vy="react-flow__edge-desc",NC="react-flow__aria-live",jC=e=>e.ariaLiveMessage,kC=e=>e.ariaLabelConfig;function _C({rfId:e}){const t=de(jC);return a.jsx("div",{id:`${NC}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:wC,children:t})}function SC({rfId:e,disableKeyboardA11y:t}){const n=de(kC);return a.jsxs(a.Fragment,{children:[a.jsx("div",{id:`${$y}-${e}`,style:rp,children:t?n["node.a11yDescription.default"]:n["node.a11yDescription.keyboardDisabled"]}),a.jsx("div",{id:`${Vy}-${e}`,style:rp,children:n["edge.a11yDescription.default"]}),!t&&a.jsx(_C,{rfId:e})]})}const Xl=S.forwardRef(({position:e="top-left",children:t,className:n,style:r,...s},o)=>{const i=`${e}`.split("-");return a.jsx("div",{className:Ae(["react-flow__panel",n,...i]),style:r,ref:o,...s,children:t})});Xl.displayName="Panel";function CC({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:a.jsx(Xl,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:a.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const EC=e=>{const t=[],n=[];for(const[,r]of e.nodeLookup)r.selected&&t.push(r.internals.userNode);for(const[,r]of e.edgeLookup)r.selected&&n.push(r);return{selectedNodes:t,selectedEdges:n}},gi=e=>e.id;function RC(e,t){return je(e.selectedNodes.map(gi),t.selectedNodes.map(gi))&&je(e.selectedEdges.map(gi),t.selectedEdges.map(gi))}function TC({onSelectionChange:e}){const t=ke(),{selectedNodes:n,selectedEdges:r}=de(EC,RC);return S.useEffect(()=>{const s={nodes:n,edges:r};e==null||e(s),t.getState().onSelectionChangeHandlers.forEach(o=>o(s))},[n,r,e]),null}const MC=e=>!!e.onSelectionChangeHandlers;function PC({onSelectionChange:e}){const t=de(MC);return e||t?a.jsx(TC,{onSelectionChange:e}):null}const Hy=[0,0],IC={x:0,y:0,zoom:1},DC=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","autoPanOnNodeFocus","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","connectionDragThreshold","onBeforeDelete","debug","autoPanSpeed","ariaLabelConfig","zIndexMode"],sp=[...DC,"rfId"],AC=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges}),ap={translateExtent:fo,nodeOrigin:Hy,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1"};function OC(e){const{setNodes:t,setEdges:n,setMinZoom:r,setMaxZoom:s,setTranslateExtent:o,setNodeExtent:i,reset:l,setDefaultNodesAndEdges:c}=de(AC,je),u=ke();S.useEffect(()=>(c(e.defaultNodes,e.defaultEdges),()=>{d.current=ap,l()}),[]);const d=S.useRef(ap);return S.useEffect(()=>{for(const f of sp){const m=e[f],y=d.current[f];m!==y&&(typeof e[f]>"u"||(f==="nodes"?t(m):f==="edges"?n(m):f==="minZoom"?r(m):f==="maxZoom"?s(m):f==="translateExtent"?o(m):f==="nodeExtent"?i(m):f==="ariaLabelConfig"?u.setState({ariaLabelConfig:ES(m)}):f==="fitView"?u.setState({fitViewQueued:m}):f==="fitViewOptions"?u.setState({fitViewOptions:m}):u.setState({[f]:m})))}d.current=e},sp.map(f=>e[f])),null}function op(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function LC(e){var r;const[t,n]=S.useState(e==="system"?null:e);return S.useEffect(()=>{if(e!=="system"){n(e);return}const s=op(),o=()=>n(s!=null&&s.matches?"dark":"light");return o(),s==null||s.addEventListener("change",o),()=>{s==null||s.removeEventListener("change",o)}},[e]),t!==null?t:(r=op())!=null&&r.matches?"dark":"light"}const ip=typeof document<"u"?document:null;function go(e=null,t={target:ip,actInsideInputWithModifier:!0}){const[n,r]=S.useState(!1),s=S.useRef(!1),o=S.useRef(new Set([])),[i,l]=S.useMemo(()=>{if(e!==null){const u=(Array.isArray(e)?e:[e]).filter(f=>typeof f=="string").map(f=>f.replace("+",`
`).replace(`

`,`
+`).split(`
`)),d=u.reduce((f,m)=>f.concat(...m),[]);return[u,d]}return[[],[]]},[e]);return S.useEffect(()=>{const c=(t==null?void 0:t.target)??ip,u=(t==null?void 0:t.actInsideInputWithModifier)??!0;if(e!==null){const d=y=>{var N,h;if(s.current=y.ctrlKey||y.metaKey||y.shiftKey||y.altKey,(!s.current||s.current&&!u)&&by(y))return!1;const w=cp(y.code,l);if(o.current.add(y[w]),lp(i,o.current,!1)){const g=((h=(N=y.composedPath)==null?void 0:N.call(y))==null?void 0:h[0])||y.target,x=(g==null?void 0:g.nodeName)==="BUTTON"||(g==null?void 0:g.nodeName)==="A";t.preventDefault!==!1&&(s.current||!x)&&y.preventDefault(),r(!0)}},f=y=>{const p=cp(y.code,l);lp(i,o.current,!0)?(r(!1),o.current.clear()):o.current.delete(y[p]),y.key==="Meta"&&o.current.clear(),s.current=!1},m=()=>{o.current.clear(),r(!1)};return c==null||c.addEventListener("keydown",d),c==null||c.addEventListener("keyup",f),window.addEventListener("blur",m),window.addEventListener("contextmenu",m),()=>{c==null||c.removeEventListener("keydown",d),c==null||c.removeEventListener("keyup",f),window.removeEventListener("blur",m),window.removeEventListener("contextmenu",m)}}},[e,r]),n}function lp(e,t,n){return e.filter(r=>n||r.length===t.size).some(r=>r.every(s=>t.has(s)))}function cp(e,t){return t.includes(e)?"code":"key"}const zC=()=>{const e=ke();return S.useMemo(()=>({zoomIn:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1.2,{duration:t==null?void 0:t.duration}):Promise.resolve(!1)},zoomOut:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1/1.2,{duration:t==null?void 0:t.duration}):Promise.resolve(!1)},zoomTo:(t,n)=>{const{panZoom:r}=e.getState();return r?r.scaleTo(t,{duration:n==null?void 0:n.duration}):Promise.resolve(!1)},getZoom:()=>e.getState().transform[2],setViewport:async(t,n)=>{const{transform:[r,s,o],panZoom:i}=e.getState();return i?(await i.setViewport({x:t.x??r,y:t.y??s,zoom:t.zoom??o},n),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[t,n,r]=e.getState().transform;return{x:t,y:n,zoom:r}},setCenter:async(t,n,r)=>e.getState().setCenter(t,n,r),fitBounds:async(t,n)=>{const{width:r,height:s,minZoom:o,maxZoom:i,panZoom:l}=e.getState(),c=Rf(t,r,s,o,i,(n==null?void 0:n.padding)??.1);return l?(await l.setViewport(c,{duration:n==null?void 0:n.duration,ease:n==null?void 0:n.ease,interpolate:n==null?void 0:n.interpolate}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(t,n={})=>{const{transform:r,snapGrid:s,snapToGrid:o,domNode:i}=e.getState();if(!i)return t;const{x:l,y:c}=i.getBoundingClientRect(),u={x:t.x-l,y:t.y-c},d=n.snapGrid??s,f=n.snapToGrid??o;return Do(u,r,f,d)},flowToScreenPosition:t=>{const{transform:n,domNode:r}=e.getState();if(!r)return t;const{x:s,y:o}=r.getBoundingClientRect(),i=vl(t,n);return{x:i.x+s,y:i.y+o}}}),[])};function By(e,t){const n=[],r=new Map,s=[];for(const o of e)if(o.type==="add"){s.push(o);continue}else if(o.type==="remove"||o.type==="replace")r.set(o.id,[o]);else{const i=r.get(o.id);i?i.push(o):r.set(o.id,[o])}for(const o of t){const i=r.get(o.id);if(!i){n.push(o);continue}if(i[0].type==="remove")continue;if(i[0].type==="replace"){n.push({...i[0].item});continue}const l={...o};for(const c of i)FC(c,l);n.push(l)}return s.length&&s.forEach(o=>{o.index!==void 0?n.splice(o.index,0,{...o.item}):n.push({...o.item})}),n}function FC(e,t){switch(e.type){case"select":{t.selected=e.selected;break}case"position":{typeof e.position<"u"&&(t.position=e.position),typeof e.dragging<"u"&&(t.dragging=e.dragging);break}case"dimensions":{typeof e.dimensions<"u"&&(t.measured={...e.dimensions},e.setAttributes&&((e.setAttributes===!0||e.setAttributes==="width")&&(t.width=e.dimensions.width),(e.setAttributes===!0||e.setAttributes==="height")&&(t.height=e.dimensions.height))),typeof e.resizing=="boolean"&&(t.resizing=e.resizing);break}}}function Uy(e,t){return By(e,t)}function Wy(e,t){return By(e,t)}function hr(e,t){return{id:e,type:"select",selected:t}}function ps(e,t=new Set,n=!1){const r=[];for(const[s,o]of e){const i=t.has(s);!(o.selected===void 0&&!i)&&o.selected!==i&&(n&&(o.selected=i),r.push(hr(o.id,i)))}return r}function up({items:e=[],lookup:t}){var s;const n=[],r=new Map(e.map(o=>[o.id,o]));for(const[o,i]of e.entries()){const l=t.get(i.id),c=((s=l==null?void 0:l.internals)==null?void 0:s.userNode)??l;c!==void 0&&c!==i&&n.push({id:i.id,item:i,type:"replace"}),c===void 0&&n.push({item:i,type:"add",index:o})}for(const[o]of t)r.get(o)===void 0&&n.push({id:o,type:"remove"});return n}function dp(e){return{id:e.id,type:"remove"}}const fp=e=>yS(e),$C=e=>fy(e);function qy(e){return S.forwardRef(e)}const VC=typeof window<"u"?S.useLayoutEffect:S.useEffect;function mp(e){const[t,n]=S.useState(BigInt(0)),[r]=S.useState(()=>HC(()=>n(s=>s+BigInt(1))));return VC(()=>{const s=r.get();s.length&&(e(s),r.reset())},[t]),r}function HC(e){let t=[];return{get:()=>t,reset:()=>{t=[]},push:n=>{t.push(n),e()}}}const Qy=S.createContext(null);function BC({children:e}){const t=ke(),n=S.useCallback(l=>{const{nodes:c=[],setNodes:u,hasDefaultNodes:d,onNodesChange:f,nodeLookup:m,fitViewQueued:y,onNodesChangeMiddlewareMap:p}=t.getState();let w=c;for(const h of l)w=typeof h=="function"?h(w):h;let N=up({items:w,lookup:m});for(const h of p.values())N=h(N);d&&u(w),N.length>0?f==null||f(N):y&&window.requestAnimationFrame(()=>{const{fitViewQueued:h,nodes:g,setNodes:x}=t.getState();h&&x(g)})},[]),r=mp(n),s=S.useCallback(l=>{const{edges:c=[],setEdges:u,hasDefaultEdges:d,onEdgesChange:f,edgeLookup:m}=t.getState();let y=c;for(const p of l)y=typeof p=="function"?p(y):p;d?u(y):f&&f(up({items:y,lookup:m}))},[]),o=mp(s),i=S.useMemo(()=>({nodeQueue:r,edgeQueue:o}),[]);return a.jsx(Qy.Provider,{value:i,children:e})}function UC(){const e=S.useContext(Qy);if(!e)throw new Error("useBatchContext must be used within a BatchProvider");return e}const WC=e=>!!e.panZoom;function ra(){const e=zC(),t=ke(),n=UC(),r=de(WC),s=S.useMemo(()=>{const o=f=>t.getState().nodeLookup.get(f),i=f=>{n.nodeQueue.push(f)},l=f=>{n.edgeQueue.push(f)},c=f=>{var h,g;const{nodeLookup:m,nodeOrigin:y}=t.getState(),p=fp(f)?f:m.get(f.id),w=p.parentId?yy(p.position,p.measured,p.parentId,m,y):p.position,N={...p,position:w,width:((h=p.measured)==null?void 0:h.width)??p.width,height:((g=p.measured)==null?void 0:g.height)??p.height};return Ks(N)},u=(f,m,y={replace:!1})=>{i(p=>p.map(w=>{if(w.id===f){const N=typeof m=="function"?m(w):m;return y.replace&&fp(N)?N:{...w,...N}}return w}))},d=(f,m,y={replace:!1})=>{l(p=>p.map(w=>{if(w.id===f){const N=typeof m=="function"?m(w):m;return y.replace&&$C(N)?N:{...w,...N}}return w}))};return{getNodes:()=>t.getState().nodes.map(f=>({...f})),getNode:f=>{var m;return(m=o(f))==null?void 0:m.internals.userNode},getInternalNode:o,getEdges:()=>{const{edges:f=[]}=t.getState();return f.map(m=>({...m}))},getEdge:f=>t.getState().edgeLookup.get(f),setNodes:i,setEdges:l,addNodes:f=>{const m=Array.isArray(f)?f:[f];n.nodeQueue.push(y=>[...y,...m])},addEdges:f=>{const m=Array.isArray(f)?f:[f];n.edgeQueue.push(y=>[...y,...m])},toObject:()=>{const{nodes:f=[],edges:m=[],transform:y}=t.getState(),[p,w,N]=y;return{nodes:f.map(h=>({...h})),edges:m.map(h=>({...h})),viewport:{x:p,y:w,zoom:N}}},deleteElements:async({nodes:f=[],edges:m=[]})=>{const{nodes:y,edges:p,onNodesDelete:w,onEdgesDelete:N,triggerNodeChanges:h,triggerEdgeChanges:g,onDelete:x,onBeforeDelete:b}=t.getState(),{nodes:j,edges:k}=await jS({nodesToRemove:f,edgesToRemove:m,nodes:y,edges:p,onBeforeDelete:b}),v=k.length>0,_=j.length>0;if(v){const M=k.map(dp);N==null||N(k),g(M)}if(_){const M=j.map(dp);w==null||w(j),h(M)}return(_||v)&&(x==null||x({nodes:j,edges:k})),{deletedNodes:j,deletedEdges:k}},getIntersectingNodes:(f,m=!0,y)=>{const p=Bh(f),w=p?f:c(f),N=y!==void 0;return w?(y||t.getState().nodes).filter(h=>{const g=t.getState().nodeLookup.get(h.id);if(g&&!p&&(h.id===f.id||!g.internals.positionAbsolute))return!1;const x=Ks(N?h:g),b=ho(x,w);return m&&b>0||b>=x.width*x.height||b>=w.width*w.height}):[]},isNodeIntersecting:(f,m,y=!0)=>{const w=Bh(f)?f:c(f);if(!w)return!1;const N=ho(w,m);return y&&N>0||N>=m.width*m.height||N>=w.width*w.height},updateNode:u,updateNodeData:(f,m,y={replace:!1})=>{u(f,p=>{const w=typeof m=="function"?m(p):m;return y.replace?{...p,data:w}:{...p,data:{...p.data,...w}}},y)},updateEdge:d,updateEdgeData:(f,m,y={replace:!1})=>{d(f,p=>{const w=typeof m=="function"?m(p):m;return y.replace?{...p,data:w}:{...p,data:{...p.data,...w}}},y)},getNodesBounds:f=>{const{nodeLookup:m,nodeOrigin:y}=t.getState();return vS(f,{nodeLookup:m,nodeOrigin:y})},getHandleConnections:({type:f,id:m,nodeId:y})=>{var p;return Array.from(((p=t.getState().connectionLookup.get(`${y}-${f}${m?`-${m}`:""}`))==null?void 0:p.values())??[])},getNodeConnections:({type:f,handleId:m,nodeId:y})=>{var p;return Array.from(((p=t.getState().connectionLookup.get(`${y}${f?m?`-${f}-${m}`:`-${f}`:""}`))==null?void 0:p.values())??[])},fitView:async f=>{const m=t.getState().fitViewResolver??CS();return t.setState({fitViewQueued:!0,fitViewOptions:f,fitViewResolver:m}),n.nodeQueue.push(y=>[...y]),m.promise}}},[]);return S.useMemo(()=>({...s,...e,viewportInitialized:r}),[r])}const hp=e=>e.selected,qC=typeof window<"u"?window:void 0;function QC({deleteKeyCode:e,multiSelectionKeyCode:t}){const n=ke(),{deleteElements:r}=ra(),s=go(e,{actInsideInputWithModifier:!1}),o=go(t,{target:qC});S.useEffect(()=>{if(s){const{edges:i,nodes:l}=n.getState();r({nodes:l.filter(hp),edges:i.filter(hp)}),n.setState({nodesSelectionActive:!1})}},[s]),S.useEffect(()=>{n.setState({multiSelectionActive:o})},[o])}function KC(e){const t=ke();S.useEffect(()=>{const n=()=>{var s,o,i,l;if(!e.current||!(((o=(s=e.current).checkVisibility)==null?void 0:o.call(s))??!0))return!1;const r=Tf(e.current);(r.height===0||r.width===0)&&((l=(i=t.getState()).onError)==null||l.call(i,"004",ln.error004())),t.setState({width:r.width||500,height:r.height||500})};if(e.current){n(),window.addEventListener("resize",n);const r=new ResizeObserver(()=>n());return r.observe(e.current),()=>{window.removeEventListener("resize",n),r&&e.current&&r.unobserve(e.current)}}},[])}const Yl={position:"absolute",width:"100%",height:"100%",top:0,left:0},XC=e=>({userSelectionActive:e.userSelectionActive,lib:e.lib,connectionInProgress:e.connection.inProgress});function YC({onPaneContextMenu:e,zoomOnScroll:t=!0,zoomOnPinch:n=!0,panOnScroll:r=!1,panOnScrollSpeed:s=.5,panOnScrollMode:o=Dr.Free,zoomOnDoubleClick:i=!0,panOnDrag:l=!0,defaultViewport:c,translateExtent:u,minZoom:d,maxZoom:f,zoomActivationKeyCode:m,preventScrolling:y=!0,children:p,noWheelClassName:w,noPanClassName:N,onViewportChange:h,isControlledViewport:g,paneClickDistance:x,selectionOnDrag:b}){const j=ke(),k=S.useRef(null),{userSelectionActive:v,lib:_,connectionInProgress:M}=de(XC,je),P=go(m),T=S.useRef();KC(k);const C=S.useCallback(O=>{h==null||h({x:O[0],y:O[1],zoom:O[2]}),g||j.setState({transform:O})},[h,g]);return S.useEffect(()=>{if(k.current){T.current=cC({domNode:k.current,minZoom:d,maxZoom:f,translateExtent:u,viewport:c,onDraggingChange:A=>j.setState({paneDragging:A}),onPanZoomStart:(A,L)=>{const{onViewportChangeStart:R,onMoveStart:I}=j.getState();I==null||I(A,L),R==null||R(L)},onPanZoom:(A,L)=>{const{onViewportChange:R,onMove:I}=j.getState();I==null||I(A,L),R==null||R(L)},onPanZoomEnd:(A,L)=>{const{onViewportChangeEnd:R,onMoveEnd:I}=j.getState();I==null||I(A,L),R==null||R(L)}});const{x:O,y:E,zoom:z}=T.current.getViewport();return j.setState({panZoom:T.current,transform:[O,E,z],domNode:k.current.closest(".react-flow")}),()=>{var A;(A=T.current)==null||A.destroy()}}},[]),S.useEffect(()=>{var O;(O=T.current)==null||O.update({onPaneContextMenu:e,zoomOnScroll:t,zoomOnPinch:n,panOnScroll:r,panOnScrollSpeed:s,panOnScrollMode:o,zoomOnDoubleClick:i,panOnDrag:l,zoomActivationKeyPressed:P,preventScrolling:y,noPanClassName:N,userSelectionActive:v,noWheelClassName:w,lib:_,onTransformChange:C,connectionInProgress:M,selectionOnDrag:b,paneClickDistance:x})},[e,t,n,r,s,o,i,l,P,y,N,v,w,_,C,M,b,x]),a.jsx("div",{className:"react-flow__renderer",ref:k,style:Yl,children:p})}const GC=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function JC(){const{userSelectionActive:e,userSelectionRect:t}=de(GC,je);return e&&t?a.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}const Bc=(e,t)=>n=>{n.target===t.current&&(e==null||e(n))},ZC=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,connectionInProgress:e.connection.inProgress,dragging:e.paneDragging});function eE({isSelecting:e,selectionKeyPressed:t,selectionMode:n=mo.Full,panOnDrag:r,paneClickDistance:s,selectionOnDrag:o,onSelectionStart:i,onSelectionEnd:l,onPaneClick:c,onPaneContextMenu:u,onPaneScroll:d,onPaneMouseEnter:f,onPaneMouseMove:m,onPaneMouseLeave:y,children:p}){const w=ke(),{userSelectionActive:N,elementsSelectable:h,dragging:g,connectionInProgress:x}=de(ZC,je),b=h&&(e||N),j=S.useRef(null),k=S.useRef(),v=S.useRef(new Set),_=S.useRef(new Set),M=S.useRef(!1),P=R=>{if(M.current||x){M.current=!1;return}c==null||c(R),w.getState().resetSelectedElements(),w.setState({nodesSelectionActive:!1})},T=R=>{if(Array.isArray(r)&&(r!=null&&r.includes(2))){R.preventDefault();return}u==null||u(R)},C=d?R=>d(R):void 0,O=R=>{M.current&&(R.stopPropagation(),M.current=!1)},E=R=>{var Y,G;const{domNode:I}=w.getState();if(k.current=I==null?void 0:I.getBoundingClientRect(),!k.current)return;const F=R.target===j.current;if(!F&&!!R.target.closest(".nokey")||!e||!(o&&F||t)||R.button!==0||!R.isPrimary)return;(G=(Y=R.target)==null?void 0:Y.setPointerCapture)==null||G.call(Y,R.pointerId),M.current=!1;const{x:q,y:U}=$t(R.nativeEvent,k.current);w.setState({userSelectionRect:{width:0,height:0,startX:q,startY:U,x:q,y:U}}),F||(R.stopPropagation(),R.preventDefault())},z=R=>{const{userSelectionRect:I,transform:F,nodeLookup:V,edgeLookup:H,connectionLookup:q,triggerNodeChanges:U,triggerEdgeChanges:Y,defaultEdgeOptions:G,resetSelectedElements:Z}=w.getState();if(!k.current||!I)return;const{x:W,y:ee}=$t(R.nativeEvent,k.current),{startX:ie,startY:se}=I;if(!M.current){const me=t?0:s;if(Math.hypot(W-ie,ee-se)<=me)return;Z(),i==null||i(R)}M.current=!0;const re={startX:ie,startY:se,x:W<ie?W:ie,y:ee<se?ee:se,width:Math.abs(W-ie),height:Math.abs(ee-se)},ne=v.current,pe=_.current;v.current=new Set(Ef(V,re,F,n===mo.Partial,!0).map(me=>me.id)),_.current=new Set;const ve=(G==null?void 0:G.selectable)??!0;for(const me of v.current){const We=q.get(me);if(We)for(const{edgeId:En}of We.values()){const un=H.get(En);un&&(un.selectable??ve)&&_.current.add(En)}}if(!Uh(ne,v.current)){const me=ps(V,v.current,!0);U(me)}if(!Uh(pe,_.current)){const me=ps(H,_.current);Y(me)}w.setState({userSelectionRect:re,userSelectionActive:!0,nodesSelectionActive:!1})},A=R=>{var I,F;R.button===0&&((F=(I=R.target)==null?void 0:I.releasePointerCapture)==null||F.call(I,R.pointerId),!N&&R.target===j.current&&w.getState().userSelectionRect&&(P==null||P(R)),w.setState({userSelectionActive:!1,userSelectionRect:null}),M.current&&(l==null||l(R),w.setState({nodesSelectionActive:v.current.size>0})))},L=r===!0||Array.isArray(r)&&r.includes(0);return a.jsxs("div",{className:Ae(["react-flow__pane",{draggable:L,dragging:g,selection:e}]),onClick:b?void 0:Bc(P,j),onContextMenu:Bc(T,j),onWheel:Bc(C,j),onPointerEnter:b?void 0:f,onPointerMove:b?z:m,onPointerUp:b?A:void 0,onPointerDownCapture:b?E:void 0,onClickCapture:b?O:void 0,onPointerLeave:y,ref:j,style:Yl,children:[p,a.jsx(JC,{})]})}function pd({id:e,store:t,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:s,unselectNodesAndEdges:o,multiSelectionActive:i,nodeLookup:l,onError:c}=t.getState(),u=l.get(e);if(!u){c==null||c("012",ln.error012(e));return}t.setState({nodesSelectionActive:!1}),u.selected?(n||u.selected&&i)&&(o({nodes:[u],edges:[]}),requestAnimationFrame(()=>{var d;return(d=r==null?void 0:r.current)==null?void 0:d.blur()})):s([e])}function Ky({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:r,nodeId:s,isSelectable:o,nodeClickDistance:i}){const l=ke(),[c,u]=S.useState(!1),d=S.useRef();return S.useEffect(()=>{d.current=XS({getStoreItems:()=>l.getState(),onNodeMouseDown:f=>{pd({id:f,store:l,nodeRef:e})},onDragStart:()=>{u(!0)},onDragStop:()=>{u(!1)}})},[]),S.useEffect(()=>{var f,m;if(t)(f=d.current)==null||f.destroy();else if(e.current)return(m=d.current)==null||m.update({noDragClassName:n,handleSelector:r,domNode:e.current,isSelectable:o,nodeId:s,nodeClickDistance:i}),()=>{var y;(y=d.current)==null||y.destroy()}},[n,r,t,o,e,s]),c}const tE=e=>t=>t.selected&&(t.draggable||e&&typeof t.draggable>"u");function Xy(){const e=ke();return S.useCallback(n=>{const{nodeExtent:r,snapToGrid:s,snapGrid:o,nodesDraggable:i,onError:l,updateNodePositions:c,nodeLookup:u,nodeOrigin:d}=e.getState(),f=new Map,m=tE(i),y=s?o[0]:5,p=s?o[1]:5,w=n.direction.x*y*n.factor,N=n.direction.y*p*n.factor;for(const[,h]of u){if(!m(h))continue;let g={x:h.internals.positionAbsolute.x+w,y:h.internals.positionAbsolute.y+N};s&&(g=Io(g,o));const{position:x,positionAbsolute:b}=my({nodeId:h.id,nextPosition:g,nodeLookup:u,nodeExtent:r,nodeOrigin:d,onError:l});h.position=x,h.internals.positionAbsolute=b,f.set(h.id,h)}c(f)},[])}const Of=S.createContext(null),nE=Of.Provider;Of.Consumer;const Yy=()=>S.useContext(Of),rE=e=>({connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName,rfId:e.rfId}),sE=(e,t,n)=>r=>{const{connectionClickStartHandle:s,connectionMode:o,connection:i}=r,{fromHandle:l,toHandle:c,isValid:u}=i,d=(c==null?void 0:c.nodeId)===e&&(c==null?void 0:c.id)===t&&(c==null?void 0:c.type)===n;return{connectingFrom:(l==null?void 0:l.nodeId)===e&&(l==null?void 0:l.id)===t&&(l==null?void 0:l.type)===n,connectingTo:d,clickConnecting:(s==null?void 0:s.nodeId)===e&&(s==null?void 0:s.id)===t&&(s==null?void 0:s.type)===n,isPossibleEndHandle:o===qs.Strict?(l==null?void 0:l.type)!==n:e!==(l==null?void 0:l.nodeId)||t!==(l==null?void 0:l.id),connectionInProcess:!!l,clickConnectionInProcess:!!s,valid:d&&u}};function aE({type:e="source",position:t=J.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:s=!0,isConnectableEnd:o=!0,id:i,onConnect:l,children:c,className:u,onMouseDown:d,onTouchStart:f,...m},y){var z,A;const p=i||null,w=e==="target",N=ke(),h=Yy(),{connectOnClick:g,noPanClassName:x,rfId:b}=de(rE,je),{connectingFrom:j,connectingTo:k,clickConnecting:v,isPossibleEndHandle:_,connectionInProcess:M,clickConnectionInProcess:P,valid:T}=de(sE(h,p,e),je);h||(A=(z=N.getState()).onError)==null||A.call(z,"010",ln.error010());const C=L=>{const{defaultEdgeOptions:R,onConnect:I,hasDefaultEdges:F}=N.getState(),V={...R,...L};if(F){const{edges:H,setEdges:q}=N.getState();q(_y(V,H))}I==null||I(V),l==null||l(V)},O=L=>{if(!h)return;const R=wy(L.nativeEvent);if(s&&(R&&L.button===0||!R)){const I=N.getState();hd.onPointerDown(L.nativeEvent,{handleDomNode:L.currentTarget,autoPanOnConnect:I.autoPanOnConnect,connectionMode:I.connectionMode,connectionRadius:I.connectionRadius,domNode:I.domNode,nodeLookup:I.nodeLookup,lib:I.lib,isTarget:w,handleId:p,nodeId:h,flowId:I.rfId,panBy:I.panBy,cancelConnection:I.cancelConnection,onConnectStart:I.onConnectStart,onConnectEnd:I.onConnectEnd,updateConnection:I.updateConnection,onConnect:C,isValidConnection:n||I.isValidConnection,getTransform:()=>N.getState().transform,getFromHandle:()=>N.getState().connection.fromHandle,autoPanSpeed:I.autoPanSpeed,dragThreshold:I.connectionDragThreshold})}R?d==null||d(L):f==null||f(L)},E=L=>{const{onClickConnectStart:R,onClickConnectEnd:I,connectionClickStartHandle:F,connectionMode:V,isValidConnection:H,lib:q,rfId:U,nodeLookup:Y,connection:G}=N.getState();if(!h||!F&&!s)return;if(!F){R==null||R(L.nativeEvent,{nodeId:h,handleId:p,handleType:e}),N.setState({connectionClickStartHandle:{nodeId:h,type:e,id:p}});return}const Z=vy(L.target),W=n||H,{connection:ee,isValid:ie}=hd.isValid(L.nativeEvent,{handle:{nodeId:h,id:p,type:e},connectionMode:V,fromNodeId:F.nodeId,fromHandleId:F.id||null,fromType:F.type,isValidConnection:W,flowId:U,doc:Z,lib:q,nodeLookup:Y});ie&&ee&&C(ee);const se=structuredClone(G);delete se.inProgress,se.toPosition=se.toHandle?se.toHandle.position:null,I==null||I(L,se),N.setState({connectionClickStartHandle:null})};return a.jsx("div",{"data-handleid":p,"data-nodeid":h,"data-handlepos":t,"data-id":`${b}-${h}-${p}-${e}`,className:Ae(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",x,u,{source:!w,target:w,connectable:r,connectablestart:s,connectableend:o,clickconnecting:v,connectingfrom:j,connectingto:k,valid:T,connectionindicator:r&&(!M||_)&&(M||P?o:s)}]),onMouseDown:O,onTouchStart:O,onClick:g?E:void 0,ref:y,...m,children:c})}const Gs=S.memo(qy(aE));function oE({data:e,isConnectable:t,sourcePosition:n=J.Bottom}){return a.jsxs(a.Fragment,{children:[e==null?void 0:e.label,a.jsx(Gs,{type:"source",position:n,isConnectable:t})]})}function iE({data:e,isConnectable:t,targetPosition:n=J.Top,sourcePosition:r=J.Bottom}){return a.jsxs(a.Fragment,{children:[a.jsx(Gs,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label,a.jsx(Gs,{type:"source",position:r,isConnectable:t})]})}function lE(){return null}function cE({data:e,isConnectable:t,targetPosition:n=J.Top}){return a.jsxs(a.Fragment,{children:[a.jsx(Gs,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label]})}const wl={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},pp={input:oE,default:iE,output:cE,group:lE};function uE(e){var t,n,r,s;return e.internals.handleBounds===void 0?{width:e.width??e.initialWidth??((t=e.style)==null?void 0:t.width),height:e.height??e.initialHeight??((n=e.style)==null?void 0:n.height)}:{width:e.width??((r=e.style)==null?void 0:r.width),height:e.height??((s=e.style)==null?void 0:s.height)}}const dE=e=>{const{width:t,height:n,x:r,y:s}=Po(e.nodeLookup,{filter:o=>!!o.selected});return{width:Ft(t)?t:null,height:Ft(n)?n:null,userSelectionActive:e.userSelectionActive,transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]}) translate(${r}px,${s}px)`}};function fE({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const r=ke(),{width:s,height:o,transformString:i,userSelectionActive:l}=de(dE,je),c=Xy(),u=S.useRef(null);if(S.useEffect(()=>{var m;n||(m=u.current)==null||m.focus({preventScroll:!0})},[n]),Ky({nodeRef:u}),l||!s||!o)return null;const d=e?m=>{const y=r.getState().nodes.filter(p=>p.selected);e(m,y)}:void 0,f=m=>{Object.prototype.hasOwnProperty.call(wl,m.key)&&(m.preventDefault(),c({direction:wl[m.key],factor:m.shiftKey?4:1}))};return a.jsx("div",{className:Ae(["react-flow__nodesselection","react-flow__container",t]),style:{transform:i},children:a.jsx("div",{ref:u,className:"react-flow__nodesselection-rect",onContextMenu:d,tabIndex:n?void 0:-1,onKeyDown:n?void 0:f,style:{width:s,height:o}})})}const gp=typeof window<"u"?window:void 0,mE=e=>({nodesSelectionActive:e.nodesSelectionActive,userSelectionActive:e.userSelectionActive});function Gy({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:s,onPaneContextMenu:o,onPaneScroll:i,paneClickDistance:l,deleteKeyCode:c,selectionKeyCode:u,selectionOnDrag:d,selectionMode:f,onSelectionStart:m,onSelectionEnd:y,multiSelectionKeyCode:p,panActivationKeyCode:w,zoomActivationKeyCode:N,elementsSelectable:h,zoomOnScroll:g,zoomOnPinch:x,panOnScroll:b,panOnScrollSpeed:j,panOnScrollMode:k,zoomOnDoubleClick:v,panOnDrag:_,defaultViewport:M,translateExtent:P,minZoom:T,maxZoom:C,preventScrolling:O,onSelectionContextMenu:E,noWheelClassName:z,noPanClassName:A,disableKeyboardA11y:L,onViewportChange:R,isControlledViewport:I}){const{nodesSelectionActive:F,userSelectionActive:V}=de(mE,je),H=go(u,{target:gp}),q=go(w,{target:gp}),U=q||_,Y=q||b,G=d&&U!==!0,Z=H||V||G;return QC({deleteKeyCode:c,multiSelectionKeyCode:p}),a.jsx(YC,{onPaneContextMenu:o,elementsSelectable:h,zoomOnScroll:g,zoomOnPinch:x,panOnScroll:Y,panOnScrollSpeed:j,panOnScrollMode:k,zoomOnDoubleClick:v,panOnDrag:!H&&U,defaultViewport:M,translateExtent:P,minZoom:T,maxZoom:C,zoomActivationKeyCode:N,preventScrolling:O,noWheelClassName:z,noPanClassName:A,onViewportChange:R,isControlledViewport:I,paneClickDistance:l,selectionOnDrag:G,children:a.jsxs(eE,{onSelectionStart:m,onSelectionEnd:y,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:s,onPaneContextMenu:o,onPaneScroll:i,panOnDrag:U,isSelecting:!!Z,selectionMode:f,selectionKeyPressed:H,paneClickDistance:l,selectionOnDrag:G,children:[e,F&&a.jsx(fE,{onSelectionContextMenu:E,noPanClassName:A,disableKeyboardA11y:L})]})})}Gy.displayName="FlowRenderer";const hE=S.memo(Gy),pE=e=>t=>e?Ef(t.nodeLookup,{x:0,y:0,width:t.width,height:t.height},t.transform,!0).map(n=>n.id):Array.from(t.nodeLookup.keys());function gE(e){return de(S.useCallback(pE(e),[e]),je)}const xE=e=>e.updateNodeInternals;function yE(){const e=de(xE),[t]=S.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(n=>{const r=new Map;n.forEach(s=>{const o=s.target.getAttribute("data-id");r.set(o,{id:o,nodeElement:s.target,force:!0})}),e(r)}));return S.useEffect(()=>()=>{t==null||t.disconnect()},[t]),t}function vE({node:e,nodeType:t,hasDimensions:n,resizeObserver:r}){const s=ke(),o=S.useRef(null),i=S.useRef(null),l=S.useRef(e.sourcePosition),c=S.useRef(e.targetPosition),u=S.useRef(t),d=n&&!!e.internals.handleBounds;return S.useEffect(()=>{o.current&&!e.hidden&&(!d||i.current!==o.current)&&(i.current&&(r==null||r.unobserve(i.current)),r==null||r.observe(o.current),i.current=o.current)},[d,e.hidden]),S.useEffect(()=>()=>{i.current&&(r==null||r.unobserve(i.current),i.current=null)},[]),S.useEffect(()=>{if(o.current){const f=u.current!==t,m=l.current!==e.sourcePosition,y=c.current!==e.targetPosition;(f||m||y)&&(u.current=t,l.current=e.sourcePosition,c.current=e.targetPosition,s.getState().updateNodeInternals(new Map([[e.id,{id:e.id,nodeElement:o.current,force:!0}]])))}},[e.id,t,e.sourcePosition,e.targetPosition]),o}function bE({id:e,onClick:t,onMouseEnter:n,onMouseMove:r,onMouseLeave:s,onContextMenu:o,onDoubleClick:i,nodesDraggable:l,elementsSelectable:c,nodesConnectable:u,nodesFocusable:d,resizeObserver:f,noDragClassName:m,noPanClassName:y,disableKeyboardA11y:p,rfId:w,nodeTypes:N,nodeClickDistance:h,onError:g}){const{node:x,internals:b,isParent:j}=de(W=>{const ee=W.nodeLookup.get(e),ie=W.parentLookup.has(e);return{node:ee,internals:ee.internals,isParent:ie}},je);let k=x.type||"default",v=(N==null?void 0:N[k])||pp[k];v===void 0&&(g==null||g("003",ln.error003(k)),k="default",v=(N==null?void 0:N.default)||pp.default);const _=!!(x.draggable||l&&typeof x.draggable>"u"),M=!!(x.selectable||c&&typeof x.selectable>"u"),P=!!(x.connectable||u&&typeof x.connectable>"u"),T=!!(x.focusable||d&&typeof x.focusable>"u"),C=ke(),O=xy(x),E=vE({node:x,nodeType:k,hasDimensions:O,resizeObserver:f}),z=Ky({nodeRef:E,disabled:x.hidden||!_,noDragClassName:m,handleSelector:x.dragHandle,nodeId:e,isSelectable:M,nodeClickDistance:h}),A=Xy();if(x.hidden)return null;const L=Cn(x),R=uE(x),I=M||_||t||n||r||s,F=n?W=>n(W,{...b.userNode}):void 0,V=r?W=>r(W,{...b.userNode}):void 0,H=s?W=>s(W,{...b.userNode}):void 0,q=o?W=>o(W,{...b.userNode}):void 0,U=i?W=>i(W,{...b.userNode}):void 0,Y=W=>{const{selectNodesOnDrag:ee,nodeDragThreshold:ie}=C.getState();M&&(!ee||!_||ie>0)&&pd({id:e,store:C,nodeRef:E}),t&&t(W,{...b.userNode})},G=W=>{if(!(by(W.nativeEvent)||p)){if(ly.includes(W.key)&&M){const ee=W.key==="Escape";pd({id:e,store:C,unselect:ee,nodeRef:E})}else if(_&&x.selected&&Object.prototype.hasOwnProperty.call(wl,W.key)){W.preventDefault();const{ariaLabelConfig:ee}=C.getState();C.setState({ariaLiveMessage:ee["node.a11yDescription.ariaLiveMessage"]({direction:W.key.replace("Arrow","").toLowerCase(),x:~~b.positionAbsolute.x,y:~~b.positionAbsolute.y})}),A({direction:wl[W.key],factor:W.shiftKey?4:1})}}},Z=()=>{var pe;if(p||!((pe=E.current)!=null&&pe.matches(":focus-visible")))return;const{transform:W,width:ee,height:ie,autoPanOnNodeFocus:se,setCenter:re}=C.getState();if(!se)return;Ef(new Map([[e,x]]),{x:0,y:0,width:ee,height:ie},W,!0).length>0||re(x.position.x+L.width/2,x.position.y+L.height/2,{zoom:W[2]})};return a.jsx("div",{className:Ae(["react-flow__node",`react-flow__node-${k}`,{[y]:_},x.className,{selected:x.selected,selectable:M,parent:j,draggable:_,dragging:z}]),ref:E,style:{zIndex:b.z,transform:`translate(${b.positionAbsolute.x}px,${b.positionAbsolute.y}px)`,pointerEvents:I?"all":"none",visibility:O?"visible":"hidden",...x.style,...R},"data-id":e,"data-testid":`rf__node-${e}`,onMouseEnter:F,onMouseMove:V,onMouseLeave:H,onContextMenu:q,onClick:Y,onDoubleClick:U,onKeyDown:T?G:void 0,tabIndex:T?0:void 0,onFocus:T?Z:void 0,role:x.ariaRole??(T?"group":void 0),"aria-roledescription":"node","aria-describedby":p?void 0:`${$y}-${w}`,"aria-label":x.ariaLabel,...x.domAttributes,children:a.jsx(nE,{value:e,children:a.jsx(v,{id:e,data:x.data,type:k,positionAbsoluteX:b.positionAbsolute.x,positionAbsoluteY:b.positionAbsolute.y,selected:x.selected??!1,selectable:M,draggable:_,deletable:x.deletable??!0,isConnectable:P,sourcePosition:x.sourcePosition,targetPosition:x.targetPosition,dragging:z,dragHandle:x.dragHandle,zIndex:b.z,parentId:x.parentId,...L})})})}var wE=S.memo(bE);const NE=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,onError:e.onError});function Jy(e){const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:s,onError:o}=de(NE,je),i=gE(e.onlyRenderVisibleElements),l=yE();return a.jsx("div",{className:"react-flow__nodes",style:Yl,children:i.map(c=>a.jsx(wE,{id:c,nodeTypes:e.nodeTypes,nodeExtent:e.nodeExtent,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,resizeObserver:l,nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:s,nodeClickDistance:e.nodeClickDistance,onError:o},c))})}Jy.displayName="NodeRenderer";const jE=S.memo(Jy);function kE(e){return de(S.useCallback(n=>{if(!e)return n.edges.map(s=>s.id);const r=[];if(n.width&&n.height)for(const s of n.edges){const o=n.nodeLookup.get(s.source),i=n.nodeLookup.get(s.target);o&&i&&MS({sourceNode:o,targetNode:i,width:n.width,height:n.height,transform:n.transform})&&r.push(s.id)}return r},[e]),je)}const _E=({color:e="none",strokeWidth:t=1})=>{const n={strokeWidth:t,...e&&{stroke:e}};return a.jsx("polyline",{className:"arrow",style:n,strokeLinecap:"round",fill:"none",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4"})},SE=({color:e="none",strokeWidth:t=1})=>{const n={strokeWidth:t,...e&&{stroke:e,fill:e}};return a.jsx("polyline",{className:"arrowclosed",style:n,strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})},xp={[xl.Arrow]:_E,[xl.ArrowClosed]:SE};function CE(e){const t=ke();return S.useMemo(()=>{var s,o;return Object.prototype.hasOwnProperty.call(xp,e)?xp[e]:((o=(s=t.getState()).onError)==null||o.call(s,"009",ln.error009(e)),null)},[e])}const EE=({id:e,type:t,color:n,width:r=12.5,height:s=12.5,markerUnits:o="strokeWidth",strokeWidth:i,orient:l="auto-start-reverse"})=>{const c=CE(t);return c?a.jsx("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${r}`,markerHeight:`${s}`,viewBox:"-10 -10 20 20",markerUnits:o,orient:l,refX:"0",refY:"0",children:a.jsx(c,{color:n,strokeWidth:i})}):null},Zy=({defaultColor:e,rfId:t})=>{const n=de(o=>o.edges),r=de(o=>o.defaultEdgeOptions),s=S.useMemo(()=>zS(n,{id:t,defaultColor:e,defaultMarkerStart:r==null?void 0:r.markerStart,defaultMarkerEnd:r==null?void 0:r.markerEnd}),[n,r,t,e]);return s.length?a.jsx("svg",{className:"react-flow__marker","aria-hidden":"true",children:a.jsx("defs",{children:s.map(o=>a.jsx(EE,{id:o.id,type:o.type,color:o.color,width:o.width,height:o.height,markerUnits:o.markerUnits,strokeWidth:o.strokeWidth,orient:o.orient},o.id))})}):null};Zy.displayName="MarkerDefinitions";var RE=S.memo(Zy);function ev({x:e,y:t,label:n,labelStyle:r,labelShowBg:s=!0,labelBgStyle:o,labelBgPadding:i=[2,4],labelBgBorderRadius:l=2,children:c,className:u,...d}){const[f,m]=S.useState({x:1,y:0,width:0,height:0}),y=Ae(["react-flow__edge-textwrapper",u]),p=S.useRef(null);return S.useEffect(()=>{if(p.current){const w=p.current.getBBox();m({x:w.x,y:w.y,width:w.width,height:w.height})}},[n]),n?a.jsxs("g",{transform:`translate(${e-f.width/2} ${t-f.height/2})`,className:y,visibility:f.width?"visible":"hidden",...d,children:[s&&a.jsx("rect",{width:f.width+2*i[0],x:-i[0],y:-i[1],height:f.height+2*i[1],className:"react-flow__edge-textbg",style:o,rx:l,ry:l}),a.jsx("text",{className:"react-flow__edge-text",y:f.height/2,dy:"0.3em",ref:p,style:r,children:n}),c]}):null}ev.displayName="EdgeText";const TE=S.memo(ev);function Js({path:e,labelX:t,labelY:n,label:r,labelStyle:s,labelShowBg:o,labelBgStyle:i,labelBgPadding:l,labelBgBorderRadius:c,interactionWidth:u=20,...d}){return a.jsxs(a.Fragment,{children:[a.jsx("path",{...d,d:e,fill:"none",className:Ae(["react-flow__edge-path",d.className])}),u?a.jsx("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:u,className:"react-flow__edge-interaction"}):null,r&&Ft(t)&&Ft(n)?a.jsx(TE,{x:t,y:n,label:r,labelStyle:s,labelShowBg:o,labelBgStyle:i,labelBgPadding:l,labelBgBorderRadius:c}):null]})}function yp({pos:e,x1:t,y1:n,x2:r,y2:s}){return e===J.Left||e===J.Right?[.5*(t+r),n]:[t,.5*(n+s)]}function tv({sourceX:e,sourceY:t,sourcePosition:n=J.Bottom,targetX:r,targetY:s,targetPosition:o=J.Top}){const[i,l]=yp({pos:n,x1:e,y1:t,x2:r,y2:s}),[c,u]=yp({pos:o,x1:r,y1:s,x2:e,y2:t}),[d,f,m,y]=Ny({sourceX:e,sourceY:t,targetX:r,targetY:s,sourceControlX:i,sourceControlY:l,targetControlX:c,targetControlY:u});return[`M${e},${t} C${i},${l} ${c},${u} ${r},${s}`,d,f,m,y]}function nv(e){return S.memo(({id:t,sourceX:n,sourceY:r,targetX:s,targetY:o,sourcePosition:i,targetPosition:l,label:c,labelStyle:u,labelShowBg:d,labelBgStyle:f,labelBgPadding:m,labelBgBorderRadius:y,style:p,markerEnd:w,markerStart:N,interactionWidth:h})=>{const[g,x,b]=tv({sourceX:n,sourceY:r,sourcePosition:i,targetX:s,targetY:o,targetPosition:l}),j=e.isInternal?void 0:t;return a.jsx(Js,{id:j,path:g,labelX:x,labelY:b,label:c,labelStyle:u,labelShowBg:d,labelBgStyle:f,labelBgPadding:m,labelBgBorderRadius:y,style:p,markerEnd:w,markerStart:N,interactionWidth:h})})}const ME=nv({isInternal:!1}),rv=nv({isInternal:!0});ME.displayName="SimpleBezierEdge";rv.displayName="SimpleBezierEdgeInternal";function sv(e){return S.memo(({id:t,sourceX:n,sourceY:r,targetX:s,targetY:o,label:i,labelStyle:l,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:m,sourcePosition:y=J.Bottom,targetPosition:p=J.Top,markerEnd:w,markerStart:N,pathOptions:h,interactionWidth:g})=>{const[x,b,j]=bl({sourceX:n,sourceY:r,sourcePosition:y,targetX:s,targetY:o,targetPosition:p,borderRadius:h==null?void 0:h.borderRadius,offset:h==null?void 0:h.offset,stepPosition:h==null?void 0:h.stepPosition}),k=e.isInternal?void 0:t;return a.jsx(Js,{id:k,path:x,labelX:b,labelY:j,label:i,labelStyle:l,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:m,markerEnd:w,markerStart:N,interactionWidth:g})})}const av=sv({isInternal:!1}),ov=sv({isInternal:!0});av.displayName="SmoothStepEdge";ov.displayName="SmoothStepEdgeInternal";function iv(e){return S.memo(({id:t,...n})=>{var s;const r=e.isInternal?void 0:t;return a.jsx(av,{...n,id:r,pathOptions:S.useMemo(()=>{var o;return{borderRadius:0,offset:(o=n.pathOptions)==null?void 0:o.offset}},[(s=n.pathOptions)==null?void 0:s.offset])})})}const PE=iv({isInternal:!1}),lv=iv({isInternal:!0});PE.displayName="StepEdge";lv.displayName="StepEdgeInternal";function cv(e){return S.memo(({id:t,sourceX:n,sourceY:r,targetX:s,targetY:o,label:i,labelStyle:l,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:m,markerEnd:y,markerStart:p,interactionWidth:w})=>{const[N,h,g]=Sy({sourceX:n,sourceY:r,targetX:s,targetY:o}),x=e.isInternal?void 0:t;return a.jsx(Js,{id:x,path:N,labelX:h,labelY:g,label:i,labelStyle:l,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:m,markerEnd:y,markerStart:p,interactionWidth:w})})}const IE=cv({isInternal:!1}),uv=cv({isInternal:!0});IE.displayName="StraightEdge";uv.displayName="StraightEdgeInternal";function dv(e){return S.memo(({id:t,sourceX:n,sourceY:r,targetX:s,targetY:o,sourcePosition:i=J.Bottom,targetPosition:l=J.Top,label:c,labelStyle:u,labelShowBg:d,labelBgStyle:f,labelBgPadding:m,labelBgBorderRadius:y,style:p,markerEnd:w,markerStart:N,pathOptions:h,interactionWidth:g})=>{const[x,b,j]=jy({sourceX:n,sourceY:r,sourcePosition:i,targetX:s,targetY:o,targetPosition:l,curvature:h==null?void 0:h.curvature}),k=e.isInternal?void 0:t;return a.jsx(Js,{id:k,path:x,labelX:b,labelY:j,label:c,labelStyle:u,labelShowBg:d,labelBgStyle:f,labelBgPadding:m,labelBgBorderRadius:y,style:p,markerEnd:w,markerStart:N,interactionWidth:g})})}const DE=dv({isInternal:!1}),fv=dv({isInternal:!0});DE.displayName="BezierEdge";fv.displayName="BezierEdgeInternal";const vp={default:fv,straight:uv,step:lv,smoothstep:ov,simplebezier:rv},bp={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},AE=(e,t,n)=>n===J.Left?e-t:n===J.Right?e+t:e,OE=(e,t,n)=>n===J.Top?e-t:n===J.Bottom?e+t:e,wp="react-flow__edgeupdater";function Np({position:e,centerX:t,centerY:n,radius:r=10,onMouseDown:s,onMouseEnter:o,onMouseOut:i,type:l}){return a.jsx("circle",{onMouseDown:s,onMouseEnter:o,onMouseOut:i,className:Ae([wp,`${wp}-${l}`]),cx:AE(t,r,e),cy:OE(n,r,e),r,stroke:"transparent",fill:"transparent"})}function LE({isReconnectable:e,reconnectRadius:t,edge:n,sourceX:r,sourceY:s,targetX:o,targetY:i,sourcePosition:l,targetPosition:c,onReconnect:u,onReconnectStart:d,onReconnectEnd:f,setReconnecting:m,setUpdateHover:y}){const p=ke(),w=(b,j)=>{if(b.button!==0)return;const{autoPanOnConnect:k,domNode:v,isValidConnection:_,connectionMode:M,connectionRadius:P,lib:T,onConnectStart:C,onConnectEnd:O,cancelConnection:E,nodeLookup:z,rfId:A,panBy:L,updateConnection:R}=p.getState(),I=j.type==="target",F=(q,U)=>{m(!1),f==null||f(q,n,j.type,U)},V=q=>u==null?void 0:u(n,q),H=(q,U)=>{m(!0),d==null||d(b,n,j.type),C==null||C(q,U)};hd.onPointerDown(b.nativeEvent,{autoPanOnConnect:k,connectionMode:M,connectionRadius:P,domNode:v,handleId:j.id,nodeId:j.nodeId,nodeLookup:z,isTarget:I,edgeUpdaterType:j.type,lib:T,flowId:A,cancelConnection:E,panBy:L,isValidConnection:_,onConnect:V,onConnectStart:H,onConnectEnd:O,onReconnectEnd:F,updateConnection:R,getTransform:()=>p.getState().transform,getFromHandle:()=>p.getState().connection.fromHandle,dragThreshold:p.getState().connectionDragThreshold,handleDomNode:b.currentTarget})},N=b=>w(b,{nodeId:n.target,id:n.targetHandle??null,type:"target"}),h=b=>w(b,{nodeId:n.source,id:n.sourceHandle??null,type:"source"}),g=()=>y(!0),x=()=>y(!1);return a.jsxs(a.Fragment,{children:[(e===!0||e==="source")&&a.jsx(Np,{position:l,centerX:r,centerY:s,radius:t,onMouseDown:N,onMouseEnter:g,onMouseOut:x,type:"source"}),(e===!0||e==="target")&&a.jsx(Np,{position:c,centerX:o,centerY:i,radius:t,onMouseDown:h,onMouseEnter:g,onMouseOut:x,type:"target"})]})}function zE({id:e,edgesFocusable:t,edgesReconnectable:n,elementsSelectable:r,onClick:s,onDoubleClick:o,onContextMenu:i,onMouseEnter:l,onMouseMove:c,onMouseLeave:u,reconnectRadius:d,onReconnect:f,onReconnectStart:m,onReconnectEnd:y,rfId:p,edgeTypes:w,noPanClassName:N,onError:h,disableKeyboardA11y:g}){let x=de(re=>re.edgeLookup.get(e));const b=de(re=>re.defaultEdgeOptions);x=b?{...b,...x}:x;let j=x.type||"default",k=(w==null?void 0:w[j])||vp[j];k===void 0&&(h==null||h("011",ln.error011(j)),j="default",k=(w==null?void 0:w.default)||vp.default);const v=!!(x.focusable||t&&typeof x.focusable>"u"),_=typeof f<"u"&&(x.reconnectable||n&&typeof x.reconnectable>"u"),M=!!(x.selectable||r&&typeof x.selectable>"u"),P=S.useRef(null),[T,C]=S.useState(!1),[O,E]=S.useState(!1),z=ke(),{zIndex:A,sourceX:L,sourceY:R,targetX:I,targetY:F,sourcePosition:V,targetPosition:H}=de(S.useCallback(re=>{const ne=re.nodeLookup.get(x.source),pe=re.nodeLookup.get(x.target);if(!ne||!pe)return{zIndex:x.zIndex,...bp};const ve=LS({id:e,sourceNode:ne,targetNode:pe,sourceHandle:x.sourceHandle||null,targetHandle:x.targetHandle||null,connectionMode:re.connectionMode,onError:h});return{zIndex:TS({selected:x.selected,zIndex:x.zIndex,sourceNode:ne,targetNode:pe,elevateOnSelect:re.elevateEdgesOnSelect,zIndexMode:re.zIndexMode}),...ve||bp}},[x.source,x.target,x.sourceHandle,x.targetHandle,x.selected,x.zIndex]),je),q=S.useMemo(()=>x.markerStart?`url('#${fd(x.markerStart,p)}')`:void 0,[x.markerStart,p]),U=S.useMemo(()=>x.markerEnd?`url('#${fd(x.markerEnd,p)}')`:void 0,[x.markerEnd,p]);if(x.hidden||L===null||R===null||I===null||F===null)return null;const Y=re=>{var me;const{addSelectedEdges:ne,unselectNodesAndEdges:pe,multiSelectionActive:ve}=z.getState();M&&(z.setState({nodesSelectionActive:!1}),x.selected&&ve?(pe({nodes:[],edges:[x]}),(me=P.current)==null||me.blur()):ne([e])),s&&s(re,x)},G=o?re=>{o(re,{...x})}:void 0,Z=i?re=>{i(re,{...x})}:void 0,W=l?re=>{l(re,{...x})}:void 0,ee=c?re=>{c(re,{...x})}:void 0,ie=u?re=>{u(re,{...x})}:void 0,se=re=>{var ne;if(!g&&ly.includes(re.key)&&M){const{unselectNodesAndEdges:pe,addSelectedEdges:ve}=z.getState();re.key==="Escape"?((ne=P.current)==null||ne.blur(),pe({edges:[x]})):ve([e])}};return a.jsx("svg",{style:{zIndex:A},children:a.jsxs("g",{className:Ae(["react-flow__edge",`react-flow__edge-${j}`,x.className,N,{selected:x.selected,animated:x.animated,inactive:!M&&!s,updating:T,selectable:M}]),onClick:Y,onDoubleClick:G,onContextMenu:Z,onMouseEnter:W,onMouseMove:ee,onMouseLeave:ie,onKeyDown:v?se:void 0,tabIndex:v?0:void 0,role:x.ariaRole??(v?"group":"img"),"aria-roledescription":"edge","data-id":e,"data-testid":`rf__edge-${e}`,"aria-label":x.ariaLabel===null?void 0:x.ariaLabel||`Edge from ${x.source} to ${x.target}`,"aria-describedby":v?`${Vy}-${p}`:void 0,ref:P,...x.domAttributes,children:[!O&&a.jsx(k,{id:e,source:x.source,target:x.target,type:x.type,selected:x.selected,animated:x.animated,selectable:M,deletable:x.deletable??!0,label:x.label,labelStyle:x.labelStyle,labelShowBg:x.labelShowBg,labelBgStyle:x.labelBgStyle,labelBgPadding:x.labelBgPadding,labelBgBorderRadius:x.labelBgBorderRadius,sourceX:L,sourceY:R,targetX:I,targetY:F,sourcePosition:V,targetPosition:H,data:x.data,style:x.style,sourceHandleId:x.sourceHandle,targetHandleId:x.targetHandle,markerStart:q,markerEnd:U,pathOptions:"pathOptions"in x?x.pathOptions:void 0,interactionWidth:x.interactionWidth}),_&&a.jsx(LE,{edge:x,isReconnectable:_,reconnectRadius:d,onReconnect:f,onReconnectStart:m,onReconnectEnd:y,sourceX:L,sourceY:R,targetX:I,targetY:F,sourcePosition:V,targetPosition:H,setUpdateHover:C,setReconnecting:E})]})})}var FE=S.memo(zE);const $E=e=>({edgesFocusable:e.edgesFocusable,edgesReconnectable:e.edgesReconnectable,elementsSelectable:e.elementsSelectable,connectionMode:e.connectionMode,onError:e.onError});function mv({defaultMarkerColor:e,onlyRenderVisibleElements:t,rfId:n,edgeTypes:r,noPanClassName:s,onReconnect:o,onEdgeContextMenu:i,onEdgeMouseEnter:l,onEdgeMouseMove:c,onEdgeMouseLeave:u,onEdgeClick:d,reconnectRadius:f,onEdgeDoubleClick:m,onReconnectStart:y,onReconnectEnd:p,disableKeyboardA11y:w}){const{edgesFocusable:N,edgesReconnectable:h,elementsSelectable:g,onError:x}=de($E,je),b=kE(t);return a.jsxs("div",{className:"react-flow__edges",children:[a.jsx(RE,{defaultColor:e,rfId:n}),b.map(j=>a.jsx(FE,{id:j,edgesFocusable:N,edgesReconnectable:h,elementsSelectable:g,noPanClassName:s,onReconnect:o,onContextMenu:i,onMouseEnter:l,onMouseMove:c,onMouseLeave:u,onClick:d,reconnectRadius:f,onDoubleClick:m,onReconnectStart:y,onReconnectEnd:p,rfId:n,onError:x,edgeTypes:r,disableKeyboardA11y:w},j))]})}mv.displayName="EdgeRenderer";const VE=S.memo(mv),HE=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function BE({children:e}){const t=de(HE);return a.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:t},children:e})}function UE(e){const t=ra(),n=S.useRef(!1);S.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const WE=e=>{var t;return(t=e.panZoom)==null?void 0:t.syncViewport};function qE(e){const t=de(WE),n=ke();return S.useEffect(()=>{e&&(t==null||t(e),n.setState({transform:[e.x,e.y,e.zoom]}))},[e,t]),null}function QE(e){return e.connection.inProgress?{...e.connection,to:Do(e.connection.to,e.transform)}:{...e.connection}}function KE(e){return QE}function XE(e){const t=KE();return de(t,je)}const YE=e=>({nodesConnectable:e.nodesConnectable,isValid:e.connection.isValid,inProgress:e.connection.inProgress,width:e.width,height:e.height});function GE({containerStyle:e,style:t,type:n,component:r}){const{nodesConnectable:s,width:o,height:i,isValid:l,inProgress:c}=de(YE,je);return!(o&&s&&c)?null:a.jsx("svg",{style:e,width:o,height:i,className:"react-flow__connectionline react-flow__container",children:a.jsx("g",{className:Ae(["react-flow__connection",dy(l)]),children:a.jsx(hv,{style:t,type:n,CustomComponent:r,isValid:l})})})}const hv=({style:e,type:t=Ln.Bezier,CustomComponent:n,isValid:r})=>{const{inProgress:s,from:o,fromNode:i,fromHandle:l,fromPosition:c,to:u,toNode:d,toHandle:f,toPosition:m,pointer:y}=XE();if(!s)return;if(n)return a.jsx(n,{connectionLineType:t,connectionLineStyle:e,fromNode:i,fromHandle:l,fromX:o.x,fromY:o.y,toX:u.x,toY:u.y,fromPosition:c,toPosition:m,connectionStatus:dy(r),toNode:d,toHandle:f,pointer:y});let p="";const w={sourceX:o.x,sourceY:o.y,sourcePosition:c,targetX:u.x,targetY:u.y,targetPosition:m};switch(t){case Ln.Bezier:[p]=jy(w);break;case Ln.SimpleBezier:[p]=tv(w);break;case Ln.Step:[p]=bl({...w,borderRadius:0});break;case Ln.SmoothStep:[p]=bl(w);break;default:[p]=Sy(w)}return a.jsx("path",{d:p,fill:"none",className:"react-flow__connection-path",style:e})};hv.displayName="ConnectionLine";const JE={};function jp(e=JE){S.useRef(e),ke(),S.useEffect(()=>{},[e])}function ZE(){ke(),S.useRef(!1),S.useEffect(()=>{},[])}function pv({nodeTypes:e,edgeTypes:t,onInit:n,onNodeClick:r,onEdgeClick:s,onNodeDoubleClick:o,onEdgeDoubleClick:i,onNodeMouseEnter:l,onNodeMouseMove:c,onNodeMouseLeave:u,onNodeContextMenu:d,onSelectionContextMenu:f,onSelectionStart:m,onSelectionEnd:y,connectionLineType:p,connectionLineStyle:w,connectionLineComponent:N,connectionLineContainerStyle:h,selectionKeyCode:g,selectionOnDrag:x,selectionMode:b,multiSelectionKeyCode:j,panActivationKeyCode:k,zoomActivationKeyCode:v,deleteKeyCode:_,onlyRenderVisibleElements:M,elementsSelectable:P,defaultViewport:T,translateExtent:C,minZoom:O,maxZoom:E,preventScrolling:z,defaultMarkerColor:A,zoomOnScroll:L,zoomOnPinch:R,panOnScroll:I,panOnScrollSpeed:F,panOnScrollMode:V,zoomOnDoubleClick:H,panOnDrag:q,onPaneClick:U,onPaneMouseEnter:Y,onPaneMouseMove:G,onPaneMouseLeave:Z,onPaneScroll:W,onPaneContextMenu:ee,paneClickDistance:ie,nodeClickDistance:se,onEdgeContextMenu:re,onEdgeMouseEnter:ne,onEdgeMouseMove:pe,onEdgeMouseLeave:ve,reconnectRadius:me,onReconnect:We,onReconnectStart:En,onReconnectEnd:un,noDragClassName:dr,noWheelClassName:ca,noPanClassName:ua,disableKeyboardA11y:da,nodeExtent:sc,rfId:Ho,viewport:Zr,onViewportChange:fa}){return jp(e),jp(t),ZE(),UE(n),qE(Zr),a.jsx(hE,{onPaneClick:U,onPaneMouseEnter:Y,onPaneMouseMove:G,onPaneMouseLeave:Z,onPaneContextMenu:ee,onPaneScroll:W,paneClickDistance:ie,deleteKeyCode:_,selectionKeyCode:g,selectionOnDrag:x,selectionMode:b,onSelectionStart:m,onSelectionEnd:y,multiSelectionKeyCode:j,panActivationKeyCode:k,zoomActivationKeyCode:v,elementsSelectable:P,zoomOnScroll:L,zoomOnPinch:R,zoomOnDoubleClick:H,panOnScroll:I,panOnScrollSpeed:F,panOnScrollMode:V,panOnDrag:q,defaultViewport:T,translateExtent:C,minZoom:O,maxZoom:E,onSelectionContextMenu:f,preventScrolling:z,noDragClassName:dr,noWheelClassName:ca,noPanClassName:ua,disableKeyboardA11y:da,onViewportChange:fa,isControlledViewport:!!Zr,children:a.jsxs(BE,{children:[a.jsx(VE,{edgeTypes:t,onEdgeClick:s,onEdgeDoubleClick:i,onReconnect:We,onReconnectStart:En,onReconnectEnd:un,onlyRenderVisibleElements:M,onEdgeContextMenu:re,onEdgeMouseEnter:ne,onEdgeMouseMove:pe,onEdgeMouseLeave:ve,reconnectRadius:me,defaultMarkerColor:A,noPanClassName:ua,disableKeyboardA11y:da,rfId:Ho}),a.jsx(GE,{style:w,type:p,component:N,containerStyle:h}),a.jsx("div",{className:"react-flow__edgelabel-renderer"}),a.jsx(jE,{nodeTypes:e,onNodeClick:r,onNodeDoubleClick:o,onNodeMouseEnter:l,onNodeMouseMove:c,onNodeMouseLeave:u,onNodeContextMenu:d,nodeClickDistance:se,onlyRenderVisibleElements:M,noPanClassName:ua,noDragClassName:dr,disableKeyboardA11y:da,nodeExtent:sc,rfId:Ho}),a.jsx("div",{className:"react-flow__viewport-portal"})]})})}pv.displayName="GraphView";const e4=S.memo(pv),kp=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:s,height:o,fitView:i,fitViewOptions:l,minZoom:c=.5,maxZoom:u=2,nodeOrigin:d,nodeExtent:f,zIndexMode:m="basic"}={})=>{const y=new Map,p=new Map,w=new Map,N=new Map,h=r??t??[],g=n??e??[],x=d??[0,0],b=f??fo;Ry(w,N,h);const j=md(g,y,p,{nodeOrigin:x,nodeExtent:b,zIndexMode:m});let k=[0,0,1];if(i&&s&&o){const v=Po(y,{filter:T=>!!((T.width||T.initialWidth)&&(T.height||T.initialHeight))}),{x:_,y:M,zoom:P}=Rf(v,s,o,c,u,(l==null?void 0:l.padding)??.1);k=[_,M,P]}return{rfId:"1",width:s??0,height:o??0,transform:k,nodes:g,nodesInitialized:j,nodeLookup:y,parentLookup:p,edges:h,edgeLookup:N,connectionLookup:w,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:n!==void 0,hasDefaultEdges:r!==void 0,panZoom:null,minZoom:c,maxZoom:u,translateExtent:fo,nodeExtent:b,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:qs.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:x,nodeDragThreshold:1,connectionDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!0,selectNodesOnDrag:!0,multiSelectionActive:!1,fitViewQueued:i??!1,fitViewOptions:l,fitViewResolver:null,connection:{...uy},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanOnNodeFocus:!0,autoPanSpeed:15,connectionRadius:20,onError:kS,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1,ariaLabelConfig:cy,zIndexMode:m,onNodesChangeMiddlewareMap:new Map,onEdgesChangeMiddlewareMap:new Map}},t4=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:s,height:o,fitView:i,fitViewOptions:l,minZoom:c,maxZoom:u,nodeOrigin:d,nodeExtent:f,zIndexMode:m})=>vC((y,p)=>{async function w(){const{nodeLookup:N,panZoom:h,fitViewOptions:g,fitViewResolver:x,width:b,height:j,minZoom:k,maxZoom:v}=p();h&&(await NS({nodes:N,width:b,height:j,panZoom:h,minZoom:k,maxZoom:v},g),x==null||x.resolve(!0),y({fitViewResolver:null}))}return{...kp({nodes:e,edges:t,width:s,height:o,fitView:i,fitViewOptions:l,minZoom:c,maxZoom:u,nodeOrigin:d,nodeExtent:f,defaultNodes:n,defaultEdges:r,zIndexMode:m}),setNodes:N=>{const{nodeLookup:h,parentLookup:g,nodeOrigin:x,elevateNodesOnSelect:b,fitViewQueued:j,zIndexMode:k}=p(),v=md(N,h,g,{nodeOrigin:x,nodeExtent:f,elevateNodesOnSelect:b,checkEquality:!0,zIndexMode:k});j&&v?(w(),y({nodes:N,nodesInitialized:v,fitViewQueued:!1,fitViewOptions:void 0})):y({nodes:N,nodesInitialized:v})},setEdges:N=>{const{connectionLookup:h,edgeLookup:g}=p();Ry(h,g,N),y({edges:N})},setDefaultNodesAndEdges:(N,h)=>{if(N){const{setNodes:g}=p();g(N),y({hasDefaultNodes:!0})}if(h){const{setEdges:g}=p();g(h),y({hasDefaultEdges:!0})}},updateNodeInternals:N=>{const{triggerNodeChanges:h,nodeLookup:g,parentLookup:x,domNode:b,nodeOrigin:j,nodeExtent:k,debug:v,fitViewQueued:_,zIndexMode:M}=p(),{changes:P,updatedInternals:T}=WS(N,g,x,b,j,k,M);T&&(VS(g,x,{nodeOrigin:j,nodeExtent:k,zIndexMode:M}),_?(w(),y({fitViewQueued:!1,fitViewOptions:void 0})):y({}),(P==null?void 0:P.length)>0&&(v&&console.log("React Flow: trigger node changes",P),h==null||h(P)))},updateNodePositions:(N,h=!1)=>{const g=[];let x=[];const{nodeLookup:b,triggerNodeChanges:j,connection:k,updateConnection:v,onNodesChangeMiddlewareMap:_}=p();for(const[M,P]of N){const T=b.get(M),C=!!(T!=null&&T.expandParent&&(T!=null&&T.parentId)&&(P!=null&&P.position)),O={id:M,type:"position",position:C?{x:Math.max(0,P.position.x),y:Math.max(0,P.position.y)}:P.position,dragging:h};if(T&&k.inProgress&&k.fromNode.id===T.id){const E=qr(T,k.fromHandle,J.Left,!0);v({...k,from:E})}C&&T.parentId&&g.push({id:M,parentId:T.parentId,rect:{...P.internals.positionAbsolute,width:P.measured.width??0,height:P.measured.height??0}}),x.push(O)}if(g.length>0){const{parentLookup:M,nodeOrigin:P}=p(),T=Af(g,b,M,P);x.push(...T)}for(const M of _.values())x=M(x);j(x)},triggerNodeChanges:N=>{const{onNodesChange:h,setNodes:g,nodes:x,hasDefaultNodes:b,debug:j}=p();if(N!=null&&N.length){if(b){const k=Uy(N,x);g(k)}j&&console.log("React Flow: trigger node changes",N),h==null||h(N)}},triggerEdgeChanges:N=>{const{onEdgesChange:h,setEdges:g,edges:x,hasDefaultEdges:b,debug:j}=p();if(N!=null&&N.length){if(b){const k=Wy(N,x);g(k)}j&&console.log("React Flow: trigger edge changes",N),h==null||h(N)}},addSelectedNodes:N=>{const{multiSelectionActive:h,edgeLookup:g,nodeLookup:x,triggerNodeChanges:b,triggerEdgeChanges:j}=p();if(h){const k=N.map(v=>hr(v,!0));b(k);return}b(ps(x,new Set([...N]),!0)),j(ps(g))},addSelectedEdges:N=>{const{multiSelectionActive:h,edgeLookup:g,nodeLookup:x,triggerNodeChanges:b,triggerEdgeChanges:j}=p();if(h){const k=N.map(v=>hr(v,!0));j(k);return}j(ps(g,new Set([...N]))),b(ps(x,new Set,!0))},unselectNodesAndEdges:({nodes:N,edges:h}={})=>{const{edges:g,nodes:x,nodeLookup:b,triggerNodeChanges:j,triggerEdgeChanges:k}=p(),v=N||x,_=h||g,M=v.map(T=>{const C=b.get(T.id);return C&&(C.selected=!1),hr(T.id,!1)}),P=_.map(T=>hr(T.id,!1));j(M),k(P)},setMinZoom:N=>{const{panZoom:h,maxZoom:g}=p();h==null||h.setScaleExtent([N,g]),y({minZoom:N})},setMaxZoom:N=>{const{panZoom:h,minZoom:g}=p();h==null||h.setScaleExtent([g,N]),y({maxZoom:N})},setTranslateExtent:N=>{var h;(h=p().panZoom)==null||h.setTranslateExtent(N),y({translateExtent:N})},resetSelectedElements:()=>{const{edges:N,nodes:h,triggerNodeChanges:g,triggerEdgeChanges:x,elementsSelectable:b}=p();if(!b)return;const j=h.reduce((v,_)=>_.selected?[...v,hr(_.id,!1)]:v,[]),k=N.reduce((v,_)=>_.selected?[...v,hr(_.id,!1)]:v,[]);g(j),x(k)},setNodeExtent:N=>{const{nodes:h,nodeLookup:g,parentLookup:x,nodeOrigin:b,elevateNodesOnSelect:j,nodeExtent:k,zIndexMode:v}=p();N[0][0]===k[0][0]&&N[0][1]===k[0][1]&&N[1][0]===k[1][0]&&N[1][1]===k[1][1]||(md(h,g,x,{nodeOrigin:b,nodeExtent:N,elevateNodesOnSelect:j,checkEquality:!1,zIndexMode:v}),y({nodeExtent:N}))},panBy:N=>{const{transform:h,width:g,height:x,panZoom:b,translateExtent:j}=p();return qS({delta:N,panZoom:b,transform:h,translateExtent:j,width:g,height:x})},setCenter:async(N,h,g)=>{const{width:x,height:b,maxZoom:j,panZoom:k}=p();if(!k)return Promise.resolve(!1);const v=typeof(g==null?void 0:g.zoom)<"u"?g.zoom:j;return await k.setViewport({x:x/2-N*v,y:b/2-h*v,zoom:v},{duration:g==null?void 0:g.duration,ease:g==null?void 0:g.ease,interpolate:g==null?void 0:g.interpolate}),Promise.resolve(!0)},cancelConnection:()=>{y({connection:{...uy}})},updateConnection:N=>{y({connection:N})},reset:()=>y({...kp()})}},Object.is);function gv({initialNodes:e,initialEdges:t,defaultNodes:n,defaultEdges:r,initialWidth:s,initialHeight:o,initialMinZoom:i,initialMaxZoom:l,initialFitViewOptions:c,fitView:u,nodeOrigin:d,nodeExtent:f,zIndexMode:m,children:y}){const[p]=S.useState(()=>t4({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:s,height:o,fitView:u,minZoom:i,maxZoom:l,fitViewOptions:c,nodeOrigin:d,nodeExtent:f,zIndexMode:m}));return a.jsx(bC,{value:p,children:a.jsx(BC,{children:y})})}function n4({children:e,nodes:t,edges:n,defaultNodes:r,defaultEdges:s,width:o,height:i,fitView:l,fitViewOptions:c,minZoom:u,maxZoom:d,nodeOrigin:f,nodeExtent:m,zIndexMode:y}){return S.useContext(Kl)?a.jsx(a.Fragment,{children:e}):a.jsx(gv,{initialNodes:t,initialEdges:n,defaultNodes:r,defaultEdges:s,initialWidth:o,initialHeight:i,fitView:l,initialFitViewOptions:c,initialMinZoom:u,initialMaxZoom:d,nodeOrigin:f,nodeExtent:m,zIndexMode:y,children:e})}const r4={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function s4({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,className:s,nodeTypes:o,edgeTypes:i,onNodeClick:l,onEdgeClick:c,onInit:u,onMove:d,onMoveStart:f,onMoveEnd:m,onConnect:y,onConnectStart:p,onConnectEnd:w,onClickConnectStart:N,onClickConnectEnd:h,onNodeMouseEnter:g,onNodeMouseMove:x,onNodeMouseLeave:b,onNodeContextMenu:j,onNodeDoubleClick:k,onNodeDragStart:v,onNodeDrag:_,onNodeDragStop:M,onNodesDelete:P,onEdgesDelete:T,onDelete:C,onSelectionChange:O,onSelectionDragStart:E,onSelectionDrag:z,onSelectionDragStop:A,onSelectionContextMenu:L,onSelectionStart:R,onSelectionEnd:I,onBeforeDelete:F,connectionMode:V,connectionLineType:H=Ln.Bezier,connectionLineStyle:q,connectionLineComponent:U,connectionLineContainerStyle:Y,deleteKeyCode:G="Backspace",selectionKeyCode:Z="Shift",selectionOnDrag:W=!1,selectionMode:ee=mo.Full,panActivationKeyCode:ie="Space",multiSelectionKeyCode:se=po()?"Meta":"Control",zoomActivationKeyCode:re=po()?"Meta":"Control",snapToGrid:ne,snapGrid:pe,onlyRenderVisibleElements:ve=!1,selectNodesOnDrag:me,nodesDraggable:We,autoPanOnNodeFocus:En,nodesConnectable:un,nodesFocusable:dr,nodeOrigin:ca=Hy,edgesFocusable:ua,edgesReconnectable:da,elementsSelectable:sc=!0,defaultViewport:Ho=IC,minZoom:Zr=.5,maxZoom:fa=2,translateExtent:qf=fo,preventScrolling:tb=!0,nodeExtent:ac,defaultMarkerColor:nb="#b1b1b7",zoomOnScroll:rb=!0,zoomOnPinch:sb=!0,panOnScroll:ab=!1,panOnScrollSpeed:ob=.5,panOnScrollMode:ib=Dr.Free,zoomOnDoubleClick:lb=!0,panOnDrag:cb=!0,onPaneClick:ub,onPaneMouseEnter:db,onPaneMouseMove:fb,onPaneMouseLeave:mb,onPaneScroll:hb,onPaneContextMenu:pb,paneClickDistance:gb=1,nodeClickDistance:xb=0,children:yb,onReconnect:vb,onReconnectStart:bb,onReconnectEnd:wb,onEdgeContextMenu:Nb,onEdgeDoubleClick:jb,onEdgeMouseEnter:kb,onEdgeMouseMove:_b,onEdgeMouseLeave:Sb,reconnectRadius:Cb=10,onNodesChange:Eb,onEdgesChange:Rb,noDragClassName:Tb="nodrag",noWheelClassName:Mb="nowheel",noPanClassName:Qf="nopan",fitView:Kf,fitViewOptions:Xf,connectOnClick:Pb,attributionPosition:Ib,proOptions:Db,defaultEdgeOptions:Ab,elevateNodesOnSelect:Ob=!0,elevateEdgesOnSelect:Lb=!1,disableKeyboardA11y:Yf=!1,autoPanOnConnect:zb,autoPanOnNodeDrag:Fb,autoPanSpeed:$b,connectionRadius:Vb,isValidConnection:Hb,onError:Bb,style:Ub,id:Gf,nodeDragThreshold:Wb,connectionDragThreshold:qb,viewport:Qb,onViewportChange:Kb,width:Xb,height:Yb,colorMode:Gb="light",debug:Jb,onScroll:Bo,ariaLabelConfig:Zb,zIndexMode:Jf="basic",...e1},t1){const oc=Gf||"1",n1=LC(Gb),r1=S.useCallback(Zf=>{Zf.currentTarget.scrollTo({top:0,left:0,behavior:"instant"}),Bo==null||Bo(Zf)},[Bo]);return a.jsx("div",{"data-testid":"rf__wrapper",...e1,onScroll:r1,style:{...Ub,...r4},ref:t1,className:Ae(["react-flow",s,n1]),id:Gf,role:"application",children:a.jsxs(n4,{nodes:e,edges:t,width:Xb,height:Yb,fitView:Kf,fitViewOptions:Xf,minZoom:Zr,maxZoom:fa,nodeOrigin:ca,nodeExtent:ac,zIndexMode:Jf,children:[a.jsx(e4,{onInit:u,onNodeClick:l,onEdgeClick:c,onNodeMouseEnter:g,onNodeMouseMove:x,onNodeMouseLeave:b,onNodeContextMenu:j,onNodeDoubleClick:k,nodeTypes:o,edgeTypes:i,connectionLineType:H,connectionLineStyle:q,connectionLineComponent:U,connectionLineContainerStyle:Y,selectionKeyCode:Z,selectionOnDrag:W,selectionMode:ee,deleteKeyCode:G,multiSelectionKeyCode:se,panActivationKeyCode:ie,zoomActivationKeyCode:re,onlyRenderVisibleElements:ve,defaultViewport:Ho,translateExtent:qf,minZoom:Zr,maxZoom:fa,preventScrolling:tb,zoomOnScroll:rb,zoomOnPinch:sb,zoomOnDoubleClick:lb,panOnScroll:ab,panOnScrollSpeed:ob,panOnScrollMode:ib,panOnDrag:cb,onPaneClick:ub,onPaneMouseEnter:db,onPaneMouseMove:fb,onPaneMouseLeave:mb,onPaneScroll:hb,onPaneContextMenu:pb,paneClickDistance:gb,nodeClickDistance:xb,onSelectionContextMenu:L,onSelectionStart:R,onSelectionEnd:I,onReconnect:vb,onReconnectStart:bb,onReconnectEnd:wb,onEdgeContextMenu:Nb,onEdgeDoubleClick:jb,onEdgeMouseEnter:kb,onEdgeMouseMove:_b,onEdgeMouseLeave:Sb,reconnectRadius:Cb,defaultMarkerColor:nb,noDragClassName:Tb,noWheelClassName:Mb,noPanClassName:Qf,rfId:oc,disableKeyboardA11y:Yf,nodeExtent:ac,viewport:Qb,onViewportChange:Kb}),a.jsx(OC,{nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:y,onConnectStart:p,onConnectEnd:w,onClickConnectStart:N,onClickConnectEnd:h,nodesDraggable:We,autoPanOnNodeFocus:En,nodesConnectable:un,nodesFocusable:dr,edgesFocusable:ua,edgesReconnectable:da,elementsSelectable:sc,elevateNodesOnSelect:Ob,elevateEdgesOnSelect:Lb,minZoom:Zr,maxZoom:fa,nodeExtent:ac,onNodesChange:Eb,onEdgesChange:Rb,snapToGrid:ne,snapGrid:pe,connectionMode:V,translateExtent:qf,connectOnClick:Pb,defaultEdgeOptions:Ab,fitView:Kf,fitViewOptions:Xf,onNodesDelete:P,onEdgesDelete:T,onDelete:C,onNodeDragStart:v,onNodeDrag:_,onNodeDragStop:M,onSelectionDrag:z,onSelectionDragStart:E,onSelectionDragStop:A,onMove:d,onMoveStart:f,onMoveEnd:m,noPanClassName:Qf,nodeOrigin:ca,rfId:oc,autoPanOnConnect:zb,autoPanOnNodeDrag:Fb,autoPanSpeed:$b,onError:Bb,connectionRadius:Vb,isValidConnection:Hb,selectNodesOnDrag:me,nodeDragThreshold:Wb,connectionDragThreshold:qb,onBeforeDelete:F,debug:Jb,ariaLabelConfig:Zb,zIndexMode:Jf}),a.jsx(PC,{onSelectionChange:O}),yb,a.jsx(CC,{proOptions:Db,position:Ib}),a.jsx(SC,{rfId:oc,disableKeyboardA11y:Yf})]})})}var a4=qy(s4);const o4=e=>{var t;return(t=e.domNode)==null?void 0:t.querySelector(".react-flow__edgelabel-renderer")};function i4({children:e}){const t=de(o4);return t?mx.createPortal(e,t):null}function l4({dimensions:e,lineWidth:t,variant:n,className:r}){return a.jsx("path",{strokeWidth:t,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`,className:Ae(["react-flow__background-pattern",n,r])})}function c4({radius:e,className:t}){return a.jsx("circle",{cx:e,cy:e,r:e,className:Ae(["react-flow__background-pattern","dots",t])})}var rr;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(rr||(rr={}));const u4={[rr.Dots]:1,[rr.Lines]:1,[rr.Cross]:6},d4=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function xv({id:e,variant:t=rr.Dots,gap:n=20,size:r,lineWidth:s=1,offset:o=0,color:i,bgColor:l,style:c,className:u,patternClassName:d}){const f=S.useRef(null),{transform:m,patternId:y}=de(d4,je),p=r||u4[t],w=t===rr.Dots,N=t===rr.Cross,h=Array.isArray(n)?n:[n,n],g=[h[0]*m[2]||1,h[1]*m[2]||1],x=p*m[2],b=Array.isArray(o)?o:[o,o],j=N?[x,x]:g,k=[b[0]*m[2]||1+j[0]/2,b[1]*m[2]||1+j[1]/2],v=`${y}${e||""}`;return a.jsxs("svg",{className:Ae(["react-flow__background",u]),style:{...c,...Yl,"--xy-background-color-props":l,"--xy-background-pattern-color-props":i},ref:f,"data-testid":"rf__background",children:[a.jsx("pattern",{id:v,x:m[0]%g[0],y:m[1]%g[1],width:g[0],height:g[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${k[0]},-${k[1]})`,children:w?a.jsx(c4,{radius:x/2,className:d}):a.jsx(l4,{dimensions:j,lineWidth:s,variant:t,className:d})}),a.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${v})`})]})}xv.displayName="Background";const f4=S.memo(xv);function m4(){return a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:a.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function h4(){return a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:a.jsx("path",{d:"M0 0h32v4.2H0z"})})}function p4(){return a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:a.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function g4(){return a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:a.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function x4(){return a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:a.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function xi({children:e,className:t,...n}){return a.jsx("button",{type:"button",className:Ae(["react-flow__controls-button",t]),...n,children:e})}const y4=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom,ariaLabelConfig:e.ariaLabelConfig});function yv({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:s,onZoomIn:o,onZoomOut:i,onFitView:l,onInteractiveChange:c,className:u,children:d,position:f="bottom-left",orientation:m="vertical","aria-label":y}){const p=ke(),{isInteractive:w,minZoomReached:N,maxZoomReached:h,ariaLabelConfig:g}=de(y4,je),{zoomIn:x,zoomOut:b,fitView:j}=ra(),k=()=>{x(),o==null||o()},v=()=>{b(),i==null||i()},_=()=>{j(s),l==null||l()},M=()=>{p.setState({nodesDraggable:!w,nodesConnectable:!w,elementsSelectable:!w}),c==null||c(!w)},P=m==="horizontal"?"horizontal":"vertical";return a.jsxs(Xl,{className:Ae(["react-flow__controls",P,u]),position:f,style:e,"data-testid":"rf__controls","aria-label":y??g["controls.ariaLabel"],children:[t&&a.jsxs(a.Fragment,{children:[a.jsx(xi,{onClick:k,className:"react-flow__controls-zoomin",title:g["controls.zoomIn.ariaLabel"],"aria-label":g["controls.zoomIn.ariaLabel"],disabled:h,children:a.jsx(m4,{})}),a.jsx(xi,{onClick:v,className:"react-flow__controls-zoomout",title:g["controls.zoomOut.ariaLabel"],"aria-label":g["controls.zoomOut.ariaLabel"],disabled:N,children:a.jsx(h4,{})})]}),n&&a.jsx(xi,{className:"react-flow__controls-fitview",onClick:_,title:g["controls.fitView.ariaLabel"],"aria-label":g["controls.fitView.ariaLabel"],children:a.jsx(p4,{})}),r&&a.jsx(xi,{className:"react-flow__controls-interactive",onClick:M,title:g["controls.interactive.ariaLabel"],"aria-label":g["controls.interactive.ariaLabel"],children:w?a.jsx(x4,{}):a.jsx(g4,{})}),d]})}yv.displayName="Controls";const v4=S.memo(yv);function b4({id:e,x:t,y:n,width:r,height:s,style:o,color:i,strokeColor:l,strokeWidth:c,className:u,borderRadius:d,shapeRendering:f,selected:m,onClick:y}){const{background:p,backgroundColor:w}=o||{},N=i||p||w;return a.jsx("rect",{className:Ae(["react-flow__minimap-node",{selected:m},u]),x:t,y:n,rx:d,ry:d,width:r,height:s,style:{fill:N,stroke:l,strokeWidth:c},shapeRendering:f,onClick:y?h=>y(h,e):void 0})}const w4=S.memo(b4),N4=e=>e.nodes.map(t=>t.id),Uc=e=>e instanceof Function?e:()=>e;function j4({nodeStrokeColor:e,nodeColor:t,nodeClassName:n="",nodeBorderRadius:r=5,nodeStrokeWidth:s,nodeComponent:o=w4,onClick:i}){const l=de(N4,je),c=Uc(t),u=Uc(e),d=Uc(n),f=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return a.jsx(a.Fragment,{children:l.map(m=>a.jsx(_4,{id:m,nodeColorFunc:c,nodeStrokeColorFunc:u,nodeClassNameFunc:d,nodeBorderRadius:r,nodeStrokeWidth:s,NodeComponent:o,onClick:i,shapeRendering:f},m))})}function k4({id:e,nodeColorFunc:t,nodeStrokeColorFunc:n,nodeClassNameFunc:r,nodeBorderRadius:s,nodeStrokeWidth:o,shapeRendering:i,NodeComponent:l,onClick:c}){const{node:u,x:d,y:f,width:m,height:y}=de(p=>{const{internals:w}=p.nodeLookup.get(e),N=w.userNode,{x:h,y:g}=w.positionAbsolute,{width:x,height:b}=Cn(N);return{node:N,x:h,y:g,width:x,height:b}},je);return!u||u.hidden||!xy(u)?null:a.jsx(l,{x:d,y:f,width:m,height:y,style:u.style,selected:!!u.selected,className:r(u),color:t(u),borderRadius:s,strokeColor:n(u),strokeWidth:o,shapeRendering:i,onClick:c,id:u.id})}const _4=S.memo(k4);var S4=S.memo(j4);const C4=200,E4=150,R4=e=>!e.hidden,T4=e=>{const t={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:t,boundingRect:e.nodeLookup.size>0?gy(Po(e.nodeLookup,{filter:R4}),t):t,rfId:e.rfId,panZoom:e.panZoom,translateExtent:e.translateExtent,flowWidth:e.width,flowHeight:e.height,ariaLabelConfig:e.ariaLabelConfig}},M4="react-flow__minimap-desc";function vv({style:e,className:t,nodeStrokeColor:n,nodeColor:r,nodeClassName:s="",nodeBorderRadius:o=5,nodeStrokeWidth:i,nodeComponent:l,bgColor:c,maskColor:u,maskStrokeColor:d,maskStrokeWidth:f,position:m="bottom-right",onClick:y,onNodeClick:p,pannable:w=!1,zoomable:N=!1,ariaLabel:h,inversePan:g,zoomStep:x=1,offsetScale:b=5}){const j=ke(),k=S.useRef(null),{boundingRect:v,viewBB:_,rfId:M,panZoom:P,translateExtent:T,flowWidth:C,flowHeight:O,ariaLabelConfig:E}=de(T4,je),z=(e==null?void 0:e.width)??C4,A=(e==null?void 0:e.height)??E4,L=v.width/z,R=v.height/A,I=Math.max(L,R),F=I*z,V=I*A,H=b*I,q=v.x-(F-v.width)/2-H,U=v.y-(V-v.height)/2-H,Y=F+H*2,G=V+H*2,Z=`${M4}-${M}`,W=S.useRef(0),ee=S.useRef();W.current=I,S.useEffect(()=>{if(k.current&&P)return ee.current=tC({domNode:k.current,panZoom:P,getTransform:()=>j.getState().transform,getViewScale:()=>W.current}),()=>{var ne;(ne=ee.current)==null||ne.destroy()}},[P]),S.useEffect(()=>{var ne;(ne=ee.current)==null||ne.update({translateExtent:T,width:C,height:O,inversePan:g,pannable:w,zoomStep:x,zoomable:N})},[w,N,g,x,T,C,O]);const ie=y?ne=>{var me;const[pe,ve]=((me=ee.current)==null?void 0:me.pointer(ne))||[0,0];y(ne,{x:pe,y:ve})}:void 0,se=p?S.useCallback((ne,pe)=>{const ve=j.getState().nodeLookup.get(pe).internals.userNode;p(ne,ve)},[]):void 0,re=h??E["minimap.ariaLabel"];return a.jsx(Xl,{position:m,style:{...e,"--xy-minimap-background-color-props":typeof c=="string"?c:void 0,"--xy-minimap-mask-background-color-props":typeof u=="string"?u:void 0,"--xy-minimap-mask-stroke-color-props":typeof d=="string"?d:void 0,"--xy-minimap-mask-stroke-width-props":typeof f=="number"?f*I:void 0,"--xy-minimap-node-background-color-props":typeof r=="string"?r:void 0,"--xy-minimap-node-stroke-color-props":typeof n=="string"?n:void 0,"--xy-minimap-node-stroke-width-props":typeof i=="number"?i:void 0},className:Ae(["react-flow__minimap",t]),"data-testid":"rf__minimap",children:a.jsxs("svg",{width:z,height:A,viewBox:`${q} ${U} ${Y} ${G}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":Z,ref:k,onClick:ie,children:[re&&a.jsx("title",{id:Z,children:re}),a.jsx(S4,{onClick:se,nodeColor:r,nodeStrokeColor:n,nodeBorderRadius:o,nodeClassName:s,nodeStrokeWidth:i,nodeComponent:l}),a.jsx("path",{className:"react-flow__minimap-mask",d:`M${q-H},${U-H}h${Y+H*2}v${G+H*2}h${-Y-H*2}z
        M${_.x},${_.y}h${_.width}v${_.height}h${-_.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}vv.displayName="MiniMap";S.memo(vv);const P4=e=>t=>e?`${Math.max(1/t.transform[2],1)}`:void 0,I4={[Ys.Line]:"right",[Ys.Handle]:"bottom-right"};function D4({nodeId:e,position:t,variant:n=Ys.Handle,className:r,style:s=void 0,children:o,color:i,minWidth:l=10,minHeight:c=10,maxWidth:u=Number.MAX_VALUE,maxHeight:d=Number.MAX_VALUE,keepAspectRatio:f=!1,resizeDirection:m,autoScale:y=!0,shouldResize:p,onResizeStart:w,onResize:N,onResizeEnd:h}){const g=Yy(),x=typeof e=="string"?e:g,b=ke(),j=S.useRef(null),k=n===Ys.Handle,v=de(S.useCallback(P4(k&&y),[k,y]),je),_=S.useRef(null),M=t??I4[n];S.useEffect(()=>{if(!(!j.current||!x))return _.current||(_.current=pC({domNode:j.current,nodeId:x,getStoreItems:()=>{const{nodeLookup:T,transform:C,snapGrid:O,snapToGrid:E,nodeOrigin:z,domNode:A}=b.getState();return{nodeLookup:T,transform:C,snapGrid:O,snapToGrid:E,nodeOrigin:z,paneDomNode:A}},onChange:(T,C)=>{const{triggerNodeChanges:O,nodeLookup:E,parentLookup:z,nodeOrigin:A}=b.getState(),L=[],R={x:T.x,y:T.y},I=E.get(x);if(I&&I.expandParent&&I.parentId){const F=I.origin??A,V=T.width??I.measured.width??0,H=T.height??I.measured.height??0,q={id:I.id,parentId:I.parentId,rect:{width:V,height:H,...yy({x:T.x??I.position.x,y:T.y??I.position.y},{width:V,height:H},I.parentId,E,F)}},U=Af([q],E,z,A);L.push(...U),R.x=T.x?Math.max(F[0]*V,T.x):void 0,R.y=T.y?Math.max(F[1]*H,T.y):void 0}if(R.x!==void 0&&R.y!==void 0){const F={id:x,type:"position",position:{...R}};L.push(F)}if(T.width!==void 0&&T.height!==void 0){const V={id:x,type:"dimensions",resizing:!0,setAttributes:m?m==="horizontal"?"width":"height":!0,dimensions:{width:T.width,height:T.height}};L.push(V)}for(const F of C){const V={...F,type:"position"};L.push(V)}O(L)},onEnd:({width:T,height:C})=>{const O={id:x,type:"dimensions",resizing:!1,dimensions:{width:T,height:C}};b.getState().triggerNodeChanges([O])}})),_.current.update({controlPosition:M,boundaries:{minWidth:l,minHeight:c,maxWidth:u,maxHeight:d},keepAspectRatio:f,resizeDirection:m,onResizeStart:w,onResize:N,onResizeEnd:h,shouldResize:p}),()=>{var T;(T=_.current)==null||T.destroy()}},[M,l,c,u,d,f,w,N,h,p]);const P=M.split("-");return a.jsx("div",{className:Ae(["react-flow__resize-control","nodrag",...P,n,r]),ref:j,style:{...s,scale:v,...i&&{[k?"backgroundColor":"borderColor"]:i}},children:o})}S.memo(D4);const oe=Mx((e,t)=>({nodes:[],edges:[],executionResult:null,setExecutionResult:n=>e({executionResult:n}),setGraph:(n,r)=>e({nodes:n,edges:r}),onNodesChange:n=>{e({nodes:Uy(n,t().nodes)})},onEdgesChange:n=>{e({edges:Wy(n,t().edges)})},onConnect:n=>{e({edges:_y(n,t().edges)})},addNode:(n,r,s={})=>{const o=he.get(n);if(!o)return console.error(`Node type ${n} not found in registry`),"";const i=`${n}-${Date.now()}`,l={id:i,type:"custom",position:r,data:{definitionType:n,catalogType:n,...o.getDefaultConfig(),...s}};return e({nodes:[...t().nodes,l]}),i},updateNodeData:(n,r)=>{e({nodes:t().nodes.map(s=>s.id===n?{...s,data:{...s.data,...r}}:s)})},validateGraph:async()=>{const{nodes:n,edges:r}=t();if(n.length===0)return!1;for(const s of n){const o=he.get(s.data.definitionType);if(o){const i=o.validate(s.data);if(!i.isValid)return console.warn(`Node ${s.id} validation failed: ${i.message}`),!1}}for(const s of n){const o=he.get(s.data.definitionType);if(o&&o.inputs.length>0&&!r.some(l=>l.target===s.id))return console.warn(`Node ${s.id} (${o.label}) is disconnected.`),!1}return!0}}));/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var A4={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O4=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=(e,t)=>{const n=S.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:o=2,absoluteStrokeWidth:i,className:l="",children:c,...u},d)=>S.createElement("svg",{ref:d,...A4,width:s,height:s,stroke:r,strokeWidth:i?Number(o)*24/Number(s):o,className:["lucide",`lucide-${O4(e)}`,l].join(" "),...u},[...t.map(([f,m])=>S.createElement(f,m)),...Array.isArray(c)?c:[c]]));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wt=X("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bv=X("ArrowLeftRight",[["path",{d:"M8 3 4 7l4 4",key:"9rb6wj"}],["path",{d:"M4 7h16",key:"6tx8e3"}],["path",{d:"m16 21 4-4-4-4",key:"siv7j2"}],["path",{d:"M20 17H4",key:"h6l3hr"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L4=X("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z4=X("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gl=X("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F4=X("BrainCircuit",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M9 13a4.5 4.5 0 0 0 3-4",key:"10igwf"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M16 8V5a2 2 0 0 1 2-2",key:"u6izg6"}],["circle",{cx:"16",cy:"13",r:".5",key:"ry7gng"}],["circle",{cx:"18",cy:"3",r:".5",key:"1aiba7"}],["circle",{cx:"20",cy:"21",r:".5",key:"yhc1fs"}],["circle",{cx:"20",cy:"8",r:".5",key:"1e43v0"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $4=X("Bug",[["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1",key:"d7y7pr"}],["path",{d:"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6",key:"xs1cw7"}],["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M6.53 9C4.6 8.8 3 7.1 3 5",key:"32zzws"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"M3 21c0-2.1 1.7-3.9 3.8-4",key:"4p0ekp"}],["path",{d:"M20.97 5c0 2.1-1.6 3.8-3.5 4",key:"18gb23"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M17.2 17c2.1.1 3.8 1.9 3.8 4",key:"k3fwyw"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lf=X("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V4=X("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wv=X("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vt=X("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xo=X("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sa=X("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aa=X("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nv=X("CircleCheckBig",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H4=X("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jv=X("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B4=X("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U4=X("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W4=X("CopyMinus",[["line",{x1:"12",x2:"18",y1:"15",y2:"15",key:"1nscbv"}],["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ao=X("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _p=X("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q4=X("Eraser",[["path",{d:"m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21",key:"182aya"}],["path",{d:"M22 21H7",key:"t4ddhn"}],["path",{d:"m5 11 9 9",key:"1mo9qw"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q4=X("FileType2",[["path",{d:"M4 22h14a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v4",key:"1pf5j1"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M2 13v-1h6v1",key:"1dh9dg"}],["path",{d:"M5 12v6",key:"150t9c"}],["path",{d:"M4 18h2",key:"1xrofg"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K4=X("FilterX",[["path",{d:"M13.013 3H2l8 9.46V19l4 2v-8.54l.9-1.055",key:"1fi1da"}],["path",{d:"m22 3-5 5",key:"12jva0"}],["path",{d:"m17 3 5 5",key:"k36vhe"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X4=X("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y4=X("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G4=X("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J4=X("GitCompare",[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M13 6h3a2 2 0 0 1 2 2v7",key:"1yeb86"}],["path",{d:"M11 18H8a2 2 0 0 1-2-2V9",key:"19pyzm"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z4=X("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e3=X("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oo=X("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t3=X("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kv=X("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ar=X("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n3=X("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r3=X("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s3=X("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a3=X("PaintBucket",[["path",{d:"m19 11-8-8-8.6 8.6a2 2 0 0 0 0 2.8l5.2 5.2c.8.8 2 .8 2.8 0L19 11Z",key:"irua1i"}],["path",{d:"m5 2 5 5",key:"1lls2c"}],["path",{d:"M2 13h15",key:"1hkzvu"}],["path",{d:"M22 20a2 2 0 1 1-4 0c0-1.6 1.7-2.4 2-4 .3 1.6 2 2.4 2 4Z",key:"xk76lq"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o3=X("PanelsTopLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i3=X("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zf=X("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lo=X("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jl=X("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l3=X("Replace",[["path",{d:"M14 4c0-1.1.9-2 2-2",key:"1mvvbw"}],["path",{d:"M20 2c1.1 0 2 .9 2 2",key:"1mj6oe"}],["path",{d:"M22 8c0 1.1-.9 2-2 2",key:"v1wql3"}],["path",{d:"M16 10c-1.1 0-2-.9-2-2",key:"821ux0"}],["path",{d:"m3 7 3 3 3-3",key:"x25e72"}],["path",{d:"M6 10V5c0-1.7 1.3-3 3-3h1",key:"13af7h"}],["rect",{width:"8",height:"8",x:"2",y:"14",rx:"2",key:"17ihk4"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c3=X("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u3=X("Scaling",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M14 15H9v-5",key:"pi4jk9"}],["path",{d:"M16 3h5v5",key:"1806ms"}],["path",{d:"M21 3 9 15",key:"15kdhq"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d3=X("Scissors",[["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M8.12 8.12 12 12",key:"1alkpv"}],["path",{d:"M20 4 8.12 15.88",key:"xgtan2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M14.8 14.8 20 20",key:"ptml3r"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yr=X("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ff=X("Settings2",[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f3=X("SlidersVertical",[["line",{x1:"4",x2:"4",y1:"21",y2:"14",key:"1p332r"}],["line",{x1:"4",x2:"4",y1:"10",y2:"3",key:"gb41h5"}],["line",{x1:"12",x2:"12",y1:"21",y2:"12",key:"hf2csr"}],["line",{x1:"12",x2:"12",y1:"8",y2:"3",key:"1kfi7u"}],["line",{x1:"20",x2:"20",y1:"21",y2:"16",key:"1lhrwl"}],["line",{x1:"20",x2:"20",y1:"12",y2:"3",key:"16vvfq"}],["line",{x1:"2",x2:"6",y1:"14",y2:"14",key:"1uebub"}],["line",{x1:"10",x2:"14",y1:"8",y2:"8",key:"1yglbp"}],["line",{x1:"18",x2:"22",y1:"16",y2:"16",key:"1jxqpz"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _v=X("Split",[["path",{d:"M16 3h5v5",key:"1806ms"}],["path",{d:"M8 3H3v5",key:"15dfkv"}],["path",{d:"M12 22v-8.3a4 4 0 0 0-1.172-2.872L3 3",key:"1qrqzj"}],["path",{d:"m15 9 6-6",key:"ko1vev"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sv=X("SquareFunction",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["path",{d:"M9 17c2 0 2.8-1 2.8-2.8V10c0-2 1-3.3 3.2-3",key:"m1af9g"}],["path",{d:"M9 11.2h5.7",key:"3zgcl2"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m3=X("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h3=X("TableProperties",[["path",{d:"M15 3v18",key:"14nvp0"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M21 9H3",key:"1338ky"}],["path",{d:"M21 15H3",key:"9uk58r"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p3=X("Table",[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g3=X("Terminal",[["polyline",{points:"4 17 10 11 4 5",key:"akl6gq"}],["line",{x1:"12",x2:"20",y1:"19",y2:"19",key:"q2wloq"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gr=X("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $f=X("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x3=X("WandSparkles",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const or=X("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y3=X("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),v3=()=>{const e=he.getAll(),t=oe(l=>l.addNode),[n,r]=S.useState(""),s=(l,c)=>{l.dataTransfer.setData("application/reactflow",c),l.dataTransfer.effectAllowed="move"},o=e.filter(l=>l.label.toLowerCase().includes(n.toLowerCase())||l.category.toLowerCase().includes(n.toLowerCase())),i=["Data Source","Preprocessing","Modeling","Evaluation","Utility"];return a.jsxs("aside",{className:"w-64 shrink-0 border-r bg-background flex flex-col h-full shadow-sm z-10",children:[a.jsxs("div",{className:"p-4 border-b space-y-3",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"font-semibold tracking-tight",children:"Components"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Drag and drop to canvas"})]}),a.jsxs("div",{className:"relative",children:[a.jsx(Yr,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),a.jsx("input",{placeholder:"Search nodes...",className:"w-full pl-9 pr-3 py-2 text-sm border rounded-md bg-muted/50 focus:bg-background focus:outline-none focus:ring-1 focus:ring-primary transition-colors",value:n,onChange:l=>r(l.target.value)})]})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-6 scrollbar-thin",children:i.map(l=>{const c=o.filter(u=>u.category===l);return c.length===0?null:a.jsxs("div",{children:[a.jsx("h3",{className:"text-[10px] font-bold text-muted-foreground mb-2 uppercase tracking-wider px-1",children:l}),a.jsx("div",{className:"space-y-2",children:c.map(u=>a.jsxs("div",{className:"group flex items-center p-3 border rounded-lg bg-card hover:border-primary/50 hover:shadow-sm cursor-grab active:cursor-grabbing transition-all",draggable:!0,onDragStart:d=>s(d,u.type),onClick:()=>t(u.type,{x:100,y:100}),children:[a.jsx("div",{className:"p-2 bg-primary/5 group-hover:bg-primary/10 rounded-md mr-3 transition-colors",children:u.icon&&a.jsx(u.icon,{className:"w-4 h-4 text-primary"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"text-sm font-medium truncate",children:u.label}),a.jsx("div",{className:"text-xs text-muted-foreground truncate",children:u.description})]})]},u.type))})]},l)})})]})};function b3(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[r,s]of e)if(!Object.is(s,t.get(r)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}const{useRef:w3}=nn;function N3(e){const t=w3();return n=>{const r=e(n);return b3(t.current,r)?t.current:t.current=r}}const j3=S.memo(({id:e,data:t,selected:n})=>{const r=t.definitionType,s=he.get(r),{deleteElements:o}=ra(),i=oe(u=>u.executionResult),l=i==null?void 0:i.node_results[e],c=u=>{u.stopPropagation(),o({nodes:[{id:e}]})};return s?a.jsxs("div",{className:`
      min-w-[200px] bg-card border-2 rounded-lg shadow-sm transition-all
      ${n?"border-primary ring-2 ring-primary/20":"border-border hover:border-primary/50"}
    `,children:[a.jsxs("div",{className:"flex items-center p-3 border-b bg-muted/30 rounded-t-lg relative group",children:[a.jsx("div",{className:"p-1.5 bg-primary/10 rounded mr-3",children:s.icon&&a.jsx(s.icon,{className:"w-4 h-4 text-primary"})}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"text-sm font-bold",children:s.label}),l&&a.jsx("div",{className:`flex items-center gap-1 px-1.5 py-0.5 rounded-full text-[10px] font-medium border ${l.status==="success"?"bg-green-50 text-green-700 border-green-200 dark:bg-green-900/30 dark:text-green-400 dark:border-green-900":"bg-red-50 text-red-700 border-red-200 dark:bg-red-900/30 dark:text-red-400 dark:border-red-900"}`,children:l.status==="success"?a.jsx(H4,{size:10}):a.jsx(B4,{size:10})})]}),a.jsx("div",{className:"text-[10px] text-muted-foreground uppercase tracking-wider",children:s.category})]}),a.jsx("button",{onClick:c,className:"p-1 rounded-md hover:bg-destructive/10 hover:text-destructive text-muted-foreground/50 transition-all opacity-0 group-hover:opacity-100 ml-2",title:"Remove Node",children:a.jsx(or,{size:14})})]}),a.jsx("div",{className:"p-3",children:s.component?a.jsx(s.component,{data:t}):a.jsx("div",{className:"text-xs text-muted-foreground italic",children:"No configuration needed"})}),s.inputs.map((u,d)=>a.jsx(Gs,{type:"target",position:J.Left,id:u.id,className:"!w-3 !h-3 !bg-muted-foreground hover:!bg-primary transition-colors",style:{top:`${(d+1)*100/(s.inputs.length+1)}%`},children:a.jsx("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-[10px] text-muted-foreground pointer-events-none whitespace-nowrap",children:u.label})},`input-${u.id}`)),s.outputs.map((u,d)=>a.jsx(Gs,{type:"source",position:J.Right,id:u.id,className:"!w-3 !h-3 !bg-muted-foreground hover:!bg-primary transition-colors",style:{top:`${(d+1)*100/(s.outputs.length+1)}%`},children:a.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-[10px] text-muted-foreground pointer-events-none whitespace-nowrap",children:u.label})},`output-${u.id}`))]}):a.jsxs("div",{className:"p-4 border-2 border-destructive bg-destructive/10 rounded-md min-w-[150px]",children:[a.jsxs("div",{className:"flex items-center gap-2 text-destructive",children:[a.jsx(aa,{size:16}),a.jsx("span",{className:"text-sm font-bold",children:"Unknown Node"})]}),a.jsxs("div",{className:"text-xs mt-1",children:["Type: ",r]})]})}),k3=({id:e,sourceX:t,sourceY:n,targetX:r,targetY:s,sourcePosition:o,targetPosition:i,style:l={},markerEnd:c})=>{const{deleteElements:u}=ra(),[d,f,m]=bl({sourceX:t,sourceY:n,sourcePosition:o,targetX:r,targetY:s,targetPosition:i,borderRadius:24}),y=p=>{p.stopPropagation(),u({edges:[{id:e}]})};return a.jsxs(a.Fragment,{children:[a.jsx(Js,{path:d,style:{strokeWidth:20,stroke:"transparent",cursor:"pointer"}}),a.jsx(Js,{path:d,markerEnd:c,style:{...l,strokeWidth:2},className:"react-flow__edge-path"}),a.jsx(i4,{children:a.jsx("div",{style:{position:"absolute",transform:`translate(-50%, -50%) translate(${f}px,${m}px)`,fontSize:12,pointerEvents:"all"},className:"nodrag nopan",children:a.jsx("button",{className:"w-5 h-5 bg-background border border-border text-muted-foreground rounded-full flex items-center justify-center hover:bg-destructive hover:text-destructive-foreground transition-colors shadow-sm",onClick:y,title:"Remove Connection",children:a.jsx(or,{size:10})})})})]})},_3={custom:j3},S3={custom:k3},C3=()=>{const e=S.useRef(null),{screenToFlowPosition:t}=ra(),{nodes:n,edges:r,onNodesChange:s,onEdgesChange:o,onConnect:i,addNode:l}=oe(N3(d=>({nodes:d.nodes,edges:d.edges,onNodesChange:d.onNodesChange,onEdgesChange:d.onEdgesChange,onConnect:d.onConnect,addNode:d.addNode}))),c=S.useCallback(d=>{d.preventDefault(),d.dataTransfer.dropEffect="move"},[]),u=S.useCallback(d=>{d.preventDefault();const f=d.dataTransfer.getData("application/reactflow");if(typeof f>"u"||!f)return;const m=t({x:d.clientX,y:d.clientY});l(f,m)},[t,l]);return a.jsx("div",{className:"w-full h-full outline-none",ref:e,tabIndex:0,children:a.jsxs(a4,{nodes:n,edges:r,onNodesChange:s,onEdgesChange:o,onConnect:i,nodeTypes:_3,onDragOver:c,onDrop:u,fitView:!0,proOptions:{hideAttribution:!0},defaultEdgeOptions:{type:"custom",style:{stroke:"url(#edge-gradient)",strokeWidth:3,strokeDasharray:"8 6",filter:"url(#glow)"},animated:!0},edgeTypes:S3,deleteKeyCode:["Backspace","Delete"],children:[a.jsx("svg",{style:{position:"absolute",top:0,left:0,width:0,height:0,pointerEvents:"none"},children:a.jsxs("defs",{children:[a.jsxs("linearGradient",{id:"edge-gradient",children:[a.jsx("stop",{offset:"0%",stopColor:"#38bdf8"}),a.jsx("stop",{offset:"50%",stopColor:"#6366f1"}),a.jsx("stop",{offset:"100%",stopColor:"#a855f7"})]}),a.jsxs("filter",{id:"glow",x:"-50%",y:"-50%",width:"200%",height:"200%",children:[a.jsx("feGaussianBlur",{stdDeviation:"3",result:"coloredBlur"}),a.jsxs("feMerge",{children:[a.jsx("feMergeNode",{in:"coloredBlur"}),a.jsx("feMergeNode",{in:"SourceGraphic"})]})]})]})}),a.jsx(f4,{}),a.jsx(v4,{position:"top-left"})]})})},E3=()=>a.jsx(gv,{children:a.jsx(C3,{})}),R3=()=>{const e=oe(f=>f.nodes),t=oe(f=>f.updateNodeData),n=oe(f=>f.onNodesChange),[r,s]=S.useState(!1),o=e.find(f=>f.selected);if(!o)return a.jsxs("aside",{className:"w-80 border-l bg-background p-8 flex flex-col items-center justify-center text-muted-foreground text-center shrink-0",children:[a.jsx("div",{className:"p-4 bg-muted/50 rounded-full mb-4",children:a.jsx(Ff,{className:"w-8 h-8 opacity-50"})}),a.jsx("h3",{className:"font-medium mb-1",children:"No Node Selected"}),a.jsx("p",{className:"text-sm",children:"Select a node on the canvas to configure its properties."})]});const i=()=>{n([{id:o.id,type:"select",selected:!1}])},l=()=>{s(!r)},c=o.data.definitionType,u=he.get(c);if(!u)return a.jsx("aside",{className:"w-80 border-l bg-background p-4 shrink-0",children:a.jsxs("div",{className:"text-destructive flex items-center gap-2",children:[a.jsx(or,{className:"w-4 h-4"}),"Error: Node definition '",c,"' not found."]})});const d=u.settings;return a.jsxs("aside",{className:`
        border-l bg-background flex flex-col h-full shadow-xl z-20 transition-all duration-300 ease-in-out
        ${r?"absolute right-0 top-0 bottom-0 w-[calc(100%-16rem)]":"w-80 shrink-0"}
      `,children:[a.jsxs("div",{className:"p-4 border-b flex items-center justify-between bg-muted/10",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-2 bg-primary/10 rounded-md",children:u.icon&&a.jsx(u.icon,{className:"w-4 h-4 text-primary"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"font-semibold text-sm",children:u.label}),a.jsx("p",{className:"text-[10px] text-muted-foreground uppercase tracking-wider",children:u.category})]})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("button",{onClick:l,className:"p-1 hover:bg-muted rounded-md transition-colors text-muted-foreground hover:text-foreground",title:r?"Collapse":"Expand",children:r?a.jsx(r3,{className:"w-4 h-4"}):a.jsx(n3,{className:"w-4 h-4"})}),a.jsx("button",{onClick:i,className:"p-1 hover:bg-muted rounded-md transition-colors text-muted-foreground hover:text-foreground",title:"Close",children:a.jsx(or,{className:"w-4 h-4"})})]})]}),a.jsx("div",{className:"flex-1 overflow-y-auto",children:d?a.jsx(d,{config:o.data,onChange:f=>t(o.id,f),nodeId:o.id}):a.jsx("div",{className:"p-8 text-center text-sm text-muted-foreground italic",children:"No configuration options available for this node."})}),a.jsxs("div",{className:"p-3 border-t bg-muted/5 text-[10px] text-muted-foreground font-mono flex justify-between",children:[a.jsxs("span",{children:["ID: ",o.id]}),a.jsx("span",{children:"v1.0"})]})]})};function Cv(e,t){return function(){return e.apply(t,arguments)}}const{toString:T3}=Object.prototype,{getPrototypeOf:Vf}=Object,{iterator:Zl,toStringTag:Ev}=Symbol,ec=(e=>t=>{const n=T3.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),qt=e=>(e=e.toLowerCase(),t=>ec(t)===e),tc=e=>t=>typeof t===e,{isArray:oa}=Array,Zs=tc("undefined");function zo(e){return e!==null&&!Zs(e)&&e.constructor!==null&&!Zs(e.constructor)&&dt(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const Rv=qt("ArrayBuffer");function M3(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&Rv(e.buffer),t}const P3=tc("string"),dt=tc("function"),Tv=tc("number"),Fo=e=>e!==null&&typeof e=="object",I3=e=>e===!0||e===!1,Oi=e=>{if(ec(e)!=="object")return!1;const t=Vf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Ev in e)&&!(Zl in e)},D3=e=>{if(!Fo(e)||zo(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},A3=qt("Date"),O3=qt("File"),L3=qt("Blob"),z3=qt("FileList"),F3=e=>Fo(e)&&dt(e.pipe),$3=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||dt(e.append)&&((t=ec(e))==="formdata"||t==="object"&&dt(e.toString)&&e.toString()==="[object FormData]"))},V3=qt("URLSearchParams"),[H3,B3,U3,W3]=["ReadableStream","Request","Response","Headers"].map(qt),q3=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function $o(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let r,s;if(typeof e!="object"&&(e=[e]),oa(e))for(r=0,s=e.length;r<s;r++)t.call(null,e[r],r,e);else{if(zo(e))return;const o=n?Object.getOwnPropertyNames(e):Object.keys(e),i=o.length;let l;for(r=0;r<i;r++)l=o[r],t.call(null,e[l],l,e)}}function Mv(e,t){if(zo(e))return null;t=t.toLowerCase();const n=Object.keys(e);let r=n.length,s;for(;r-- >0;)if(s=n[r],t===s.toLowerCase())return s;return null}const wr=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Pv=e=>!Zs(e)&&e!==wr;function gd(){const{caseless:e,skipUndefined:t}=Pv(this)&&this||{},n={},r=(s,o)=>{const i=e&&Mv(n,o)||o;Oi(n[i])&&Oi(s)?n[i]=gd(n[i],s):Oi(s)?n[i]=gd({},s):oa(s)?n[i]=s.slice():(!t||!Zs(s))&&(n[i]=s)};for(let s=0,o=arguments.length;s<o;s++)arguments[s]&&$o(arguments[s],r);return n}const Q3=(e,t,n,{allOwnKeys:r}={})=>($o(t,(s,o)=>{n&&dt(s)?e[o]=Cv(s,n):e[o]=s},{allOwnKeys:r}),e),K3=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),X3=(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},Y3=(e,t,n,r)=>{let s,o,i;const l={};if(t=t||{},e==null)return t;do{for(s=Object.getOwnPropertyNames(e),o=s.length;o-- >0;)i=s[o],(!r||r(i,e,t))&&!l[i]&&(t[i]=e[i],l[i]=!0);e=n!==!1&&Vf(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},G3=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return r!==-1&&r===n},J3=e=>{if(!e)return null;if(oa(e))return e;let t=e.length;if(!Tv(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},Z3=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&Vf(Uint8Array)),e5=(e,t)=>{const r=(e&&e[Zl]).call(e);let s;for(;(s=r.next())&&!s.done;){const o=s.value;t.call(e,o[0],o[1])}},t5=(e,t)=>{let n;const r=[];for(;(n=e.exec(t))!==null;)r.push(n);return r},n5=qt("HTMLFormElement"),r5=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,s){return r.toUpperCase()+s}),Sp=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),s5=qt("RegExp"),Iv=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};$o(n,(s,o)=>{let i;(i=t(s,o,e))!==!1&&(r[o]=i||s)}),Object.defineProperties(e,r)},a5=e=>{Iv(e,(t,n)=>{if(dt(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=e[n];if(dt(r)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},o5=(e,t)=>{const n={},r=s=>{s.forEach(o=>{n[o]=!0})};return oa(e)?r(e):r(String(e).split(t)),n},i5=()=>{},l5=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function c5(e){return!!(e&&dt(e.append)&&e[Ev]==="FormData"&&e[Zl])}const u5=e=>{const t=new Array(10),n=(r,s)=>{if(Fo(r)){if(t.indexOf(r)>=0)return;if(zo(r))return r;if(!("toJSON"in r)){t[s]=r;const o=oa(r)?[]:{};return $o(r,(i,l)=>{const c=n(i,s+1);!Zs(c)&&(o[l]=c)}),t[s]=void 0,o}}return r};return n(e,0)},d5=qt("AsyncFunction"),f5=e=>e&&(Fo(e)||dt(e))&&dt(e.then)&&dt(e.catch),Dv=((e,t)=>e?setImmediate:t?((n,r)=>(wr.addEventListener("message",({source:s,data:o})=>{s===wr&&o===n&&r.length&&r.shift()()},!1),s=>{r.push(s),wr.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",dt(wr.postMessage)),m5=typeof queueMicrotask<"u"?queueMicrotask.bind(wr):typeof process<"u"&&process.nextTick||Dv,h5=e=>e!=null&&dt(e[Zl]),$={isArray:oa,isArrayBuffer:Rv,isBuffer:zo,isFormData:$3,isArrayBufferView:M3,isString:P3,isNumber:Tv,isBoolean:I3,isObject:Fo,isPlainObject:Oi,isEmptyObject:D3,isReadableStream:H3,isRequest:B3,isResponse:U3,isHeaders:W3,isUndefined:Zs,isDate:A3,isFile:O3,isBlob:L3,isRegExp:s5,isFunction:dt,isStream:F3,isURLSearchParams:V3,isTypedArray:Z3,isFileList:z3,forEach:$o,merge:gd,extend:Q3,trim:q3,stripBOM:K3,inherits:X3,toFlatObject:Y3,kindOf:ec,kindOfTest:qt,endsWith:G3,toArray:J3,forEachEntry:e5,matchAll:t5,isHTMLForm:n5,hasOwnProperty:Sp,hasOwnProp:Sp,reduceDescriptors:Iv,freezeMethods:a5,toObjectSet:o5,toCamelCase:r5,noop:i5,toFiniteNumber:l5,findKey:Mv,global:wr,isContextDefined:Pv,isSpecCompliantForm:c5,toJSONObject:u5,isAsyncFn:d5,isThenable:f5,setImmediate:Dv,asap:m5,isIterable:h5};function ae(e,t,n,r,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),s&&(this.response=s,this.status=s.status?s.status:null)}$.inherits(ae,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:$.toJSONObject(this.config),code:this.code,status:this.status}}});const Av=ae.prototype,Ov={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{Ov[e]={value:e}});Object.defineProperties(ae,Ov);Object.defineProperty(Av,"isAxiosError",{value:!0});ae.from=(e,t,n,r,s,o)=>{const i=Object.create(Av);$.toFlatObject(e,i,function(d){return d!==Error.prototype},u=>u!=="isAxiosError");const l=e&&e.message?e.message:"Error",c=t==null&&e?e.code:t;return ae.call(i,l,c,n,r,s),e&&i.cause==null&&Object.defineProperty(i,"cause",{value:e,configurable:!0}),i.name=e&&e.name||"Error",o&&Object.assign(i,o),i};const p5=null;function xd(e){return $.isPlainObject(e)||$.isArray(e)}function Lv(e){return $.endsWith(e,"[]")?e.slice(0,-2):e}function Cp(e,t,n){return e?e.concat(t).map(function(s,o){return s=Lv(s),!n&&o?"["+s+"]":s}).join(n?".":""):t}function g5(e){return $.isArray(e)&&!e.some(xd)}const x5=$.toFlatObject($,{},null,function(t){return/^is[A-Z]/.test(t)});function nc(e,t,n){if(!$.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=$.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(w,N){return!$.isUndefined(N[w])});const r=n.metaTokens,s=n.visitor||d,o=n.dots,i=n.indexes,c=(n.Blob||typeof Blob<"u"&&Blob)&&$.isSpecCompliantForm(t);if(!$.isFunction(s))throw new TypeError("visitor must be a function");function u(p){if(p===null)return"";if($.isDate(p))return p.toISOString();if($.isBoolean(p))return p.toString();if(!c&&$.isBlob(p))throw new ae("Blob is not supported. Use a Buffer instead.");return $.isArrayBuffer(p)||$.isTypedArray(p)?c&&typeof Blob=="function"?new Blob([p]):Buffer.from(p):p}function d(p,w,N){let h=p;if(p&&!N&&typeof p=="object"){if($.endsWith(w,"{}"))w=r?w:w.slice(0,-2),p=JSON.stringify(p);else if($.isArray(p)&&g5(p)||($.isFileList(p)||$.endsWith(w,"[]"))&&(h=$.toArray(p)))return w=Lv(w),h.forEach(function(x,b){!($.isUndefined(x)||x===null)&&t.append(i===!0?Cp([w],b,o):i===null?w:w+"[]",u(x))}),!1}return xd(p)?!0:(t.append(Cp(N,w,o),u(p)),!1)}const f=[],m=Object.assign(x5,{defaultVisitor:d,convertValue:u,isVisitable:xd});function y(p,w){if(!$.isUndefined(p)){if(f.indexOf(p)!==-1)throw Error("Circular reference detected in "+w.join("."));f.push(p),$.forEach(p,function(h,g){(!($.isUndefined(h)||h===null)&&s.call(t,h,$.isString(g)?g.trim():g,w,m))===!0&&y(h,w?w.concat(g):[g])}),f.pop()}}if(!$.isObject(e))throw new TypeError("data must be an object");return y(e),t}function Ep(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(r){return t[r]})}function Hf(e,t){this._pairs=[],e&&nc(e,this,t)}const zv=Hf.prototype;zv.append=function(t,n){this._pairs.push([t,n])};zv.toString=function(t){const n=t?function(r){return t.call(this,r,Ep)}:Ep;return this._pairs.map(function(s){return n(s[0])+"="+n(s[1])},"").join("&")};function y5(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function Fv(e,t,n){if(!t)return e;const r=n&&n.encode||y5;$.isFunction(n)&&(n={serialize:n});const s=n&&n.serialize;let o;if(s?o=s(t,n):o=$.isURLSearchParams(t)?t.toString():new Hf(t,n).toString(r),o){const i=e.indexOf("#");i!==-1&&(e=e.slice(0,i)),e+=(e.indexOf("?")===-1?"?":"&")+o}return e}class Rp{constructor(){this.handlers=[]}use(t,n,r){return this.handlers.push({fulfilled:t,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){$.forEach(this.handlers,function(r){r!==null&&t(r)})}}const $v={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},v5=typeof URLSearchParams<"u"?URLSearchParams:Hf,b5=typeof FormData<"u"?FormData:null,w5=typeof Blob<"u"?Blob:null,N5={isBrowser:!0,classes:{URLSearchParams:v5,FormData:b5,Blob:w5},protocols:["http","https","file","blob","url","data"]},Bf=typeof window<"u"&&typeof document<"u",yd=typeof navigator=="object"&&navigator||void 0,j5=Bf&&(!yd||["ReactNative","NativeScript","NS"].indexOf(yd.product)<0),k5=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",_5=Bf&&window.location.href||"http://localhost",S5=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Bf,hasStandardBrowserEnv:j5,hasStandardBrowserWebWorkerEnv:k5,navigator:yd,origin:_5},Symbol.toStringTag,{value:"Module"})),Xe={...S5,...N5};function C5(e,t){return nc(e,new Xe.classes.URLSearchParams,{visitor:function(n,r,s,o){return Xe.isNode&&$.isBuffer(n)?(this.append(r,n.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)},...t})}function E5(e){return $.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function R5(e){const t={},n=Object.keys(e);let r;const s=n.length;let o;for(r=0;r<s;r++)o=n[r],t[o]=e[o];return t}function Vv(e){function t(n,r,s,o){let i=n[o++];if(i==="__proto__")return!0;const l=Number.isFinite(+i),c=o>=n.length;return i=!i&&$.isArray(s)?s.length:i,c?($.hasOwnProp(s,i)?s[i]=[s[i],r]:s[i]=r,!l):((!s[i]||!$.isObject(s[i]))&&(s[i]=[]),t(n,r,s[i],o)&&$.isArray(s[i])&&(s[i]=R5(s[i])),!l)}if($.isFormData(e)&&$.isFunction(e.entries)){const n={};return $.forEachEntry(e,(r,s)=>{t(E5(r),s,n,0)}),n}return null}function T5(e,t,n){if($.isString(e))try{return(t||JSON.parse)(e),$.trim(e)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(e)}const Vo={transitional:$v,adapter:["xhr","http","fetch"],transformRequest:[function(t,n){const r=n.getContentType()||"",s=r.indexOf("application/json")>-1,o=$.isObject(t);if(o&&$.isHTMLForm(t)&&(t=new FormData(t)),$.isFormData(t))return s?JSON.stringify(Vv(t)):t;if($.isArrayBuffer(t)||$.isBuffer(t)||$.isStream(t)||$.isFile(t)||$.isBlob(t)||$.isReadableStream(t))return t;if($.isArrayBufferView(t))return t.buffer;if($.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let l;if(o){if(r.indexOf("application/x-www-form-urlencoded")>-1)return C5(t,this.formSerializer).toString();if((l=$.isFileList(t))||r.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return nc(l?{"files[]":t}:t,c&&new c,this.formSerializer)}}return o||s?(n.setContentType("application/json",!1),T5(t)):t}],transformResponse:[function(t){const n=this.transitional||Vo.transitional,r=n&&n.forcedJSONParsing,s=this.responseType==="json";if($.isResponse(t)||$.isReadableStream(t))return t;if(t&&$.isString(t)&&(r&&!this.responseType||s)){const i=!(n&&n.silentJSONParsing)&&s;try{return JSON.parse(t,this.parseReviver)}catch(l){if(i)throw l.name==="SyntaxError"?ae.from(l,ae.ERR_BAD_RESPONSE,this,null,this.response):l}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Xe.classes.FormData,Blob:Xe.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};$.forEach(["delete","get","head","post","put","patch"],e=>{Vo.headers[e]={}});const M5=$.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),P5=e=>{const t={};let n,r,s;return e&&e.split(`
`).forEach(function(i){s=i.indexOf(":"),n=i.substring(0,s).trim().toLowerCase(),r=i.substring(s+1).trim(),!(!n||t[n]&&M5[n])&&(n==="set-cookie"?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)}),t},Tp=Symbol("internals");function ja(e){return e&&String(e).trim().toLowerCase()}function Li(e){return e===!1||e==null?e:$.isArray(e)?e.map(Li):String(e)}function I5(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}const D5=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Wc(e,t,n,r,s){if($.isFunction(r))return r.call(this,t,n);if(s&&(t=n),!!$.isString(t)){if($.isString(r))return t.indexOf(r)!==-1;if($.isRegExp(r))return r.test(t)}}function A5(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,r)=>n.toUpperCase()+r)}function O5(e,t){const n=$.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+n,{value:function(s,o,i){return this[r].call(this,t,s,o,i)},configurable:!0})})}let ft=class{constructor(t){t&&this.set(t)}set(t,n,r){const s=this;function o(l,c,u){const d=ja(c);if(!d)throw new Error("header name must be a non-empty string");const f=$.findKey(s,d);(!f||s[f]===void 0||u===!0||u===void 0&&s[f]!==!1)&&(s[f||c]=Li(l))}const i=(l,c)=>$.forEach(l,(u,d)=>o(u,d,c));if($.isPlainObject(t)||t instanceof this.constructor)i(t,n);else if($.isString(t)&&(t=t.trim())&&!D5(t))i(P5(t),n);else if($.isObject(t)&&$.isIterable(t)){let l={},c,u;for(const d of t){if(!$.isArray(d))throw TypeError("Object iterator must return a key-value pair");l[u=d[0]]=(c=l[u])?$.isArray(c)?[...c,d[1]]:[c,d[1]]:d[1]}i(l,n)}else t!=null&&o(n,t,r);return this}get(t,n){if(t=ja(t),t){const r=$.findKey(this,t);if(r){const s=this[r];if(!n)return s;if(n===!0)return I5(s);if($.isFunction(n))return n.call(this,s,r);if($.isRegExp(n))return n.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=ja(t),t){const r=$.findKey(this,t);return!!(r&&this[r]!==void 0&&(!n||Wc(this,this[r],r,n)))}return!1}delete(t,n){const r=this;let s=!1;function o(i){if(i=ja(i),i){const l=$.findKey(r,i);l&&(!n||Wc(r,r[l],l,n))&&(delete r[l],s=!0)}}return $.isArray(t)?t.forEach(o):o(t),s}clear(t){const n=Object.keys(this);let r=n.length,s=!1;for(;r--;){const o=n[r];(!t||Wc(this,this[o],o,t,!0))&&(delete this[o],s=!0)}return s}normalize(t){const n=this,r={};return $.forEach(this,(s,o)=>{const i=$.findKey(r,o);if(i){n[i]=Li(s),delete n[o];return}const l=t?A5(o):String(o).trim();l!==o&&delete n[o],n[l]=Li(s),r[l]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return $.forEach(this,(r,s)=>{r!=null&&r!==!1&&(n[s]=t&&$.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const r=new this(t);return n.forEach(s=>r.set(s)),r}static accessor(t){const r=(this[Tp]=this[Tp]={accessors:{}}).accessors,s=this.prototype;function o(i){const l=ja(i);r[l]||(O5(s,i),r[l]=!0)}return $.isArray(t)?t.forEach(o):o(t),this}};ft.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);$.reduceDescriptors(ft.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(r){this[n]=r}}});$.freezeMethods(ft);function qc(e,t){const n=this||Vo,r=t||n,s=ft.from(r.headers);let o=r.data;return $.forEach(e,function(l){o=l.call(n,o,s.normalize(),t?t.status:void 0)}),s.normalize(),o}function Hv(e){return!!(e&&e.__CANCEL__)}function ia(e,t,n){ae.call(this,e??"canceled",ae.ERR_CANCELED,t,n),this.name="CanceledError"}$.inherits(ia,ae,{__CANCEL__:!0});function Bv(e,t,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?e(n):t(new ae("Request failed with status code "+n.status,[ae.ERR_BAD_REQUEST,ae.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function L5(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function z5(e,t){e=e||10;const n=new Array(e),r=new Array(e);let s=0,o=0,i;return t=t!==void 0?t:1e3,function(c){const u=Date.now(),d=r[o];i||(i=u),n[s]=c,r[s]=u;let f=o,m=0;for(;f!==s;)m+=n[f++],f=f%e;if(s=(s+1)%e,s===o&&(o=(o+1)%e),u-i<t)return;const y=d&&u-d;return y?Math.round(m*1e3/y):void 0}}function F5(e,t){let n=0,r=1e3/t,s,o;const i=(u,d=Date.now())=>{n=d,s=null,o&&(clearTimeout(o),o=null),e(...u)};return[(...u)=>{const d=Date.now(),f=d-n;f>=r?i(u,d):(s=u,o||(o=setTimeout(()=>{o=null,i(s)},r-f)))},()=>s&&i(s)]}const Nl=(e,t,n=3)=>{let r=0;const s=z5(50,250);return F5(o=>{const i=o.loaded,l=o.lengthComputable?o.total:void 0,c=i-r,u=s(c),d=i<=l;r=i;const f={loaded:i,total:l,progress:l?i/l:void 0,bytes:c,rate:u||void 0,estimated:u&&l&&d?(l-i)/u:void 0,event:o,lengthComputable:l!=null,[t?"download":"upload"]:!0};e(f)},n)},Mp=(e,t)=>{const n=e!=null;return[r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]},Pp=e=>(...t)=>$.asap(()=>e(...t)),$5=Xe.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,Xe.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(Xe.origin),Xe.navigator&&/(msie|trident)/i.test(Xe.navigator.userAgent)):()=>!0,V5=Xe.hasStandardBrowserEnv?{write(e,t,n,r,s,o,i){if(typeof document>"u")return;const l=[`${e}=${encodeURIComponent(t)}`];$.isNumber(n)&&l.push(`expires=${new Date(n).toUTCString()}`),$.isString(r)&&l.push(`path=${r}`),$.isString(s)&&l.push(`domain=${s}`),o===!0&&l.push("secure"),$.isString(i)&&l.push(`SameSite=${i}`),document.cookie=l.join("; ")},read(e){if(typeof document>"u")return null;const t=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function H5(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function B5(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function Uv(e,t,n){let r=!H5(t);return e&&(r||n==!1)?B5(e,t):t}const Ip=e=>e instanceof ft?{...e}:e;function Qr(e,t){t=t||{};const n={};function r(u,d,f,m){return $.isPlainObject(u)&&$.isPlainObject(d)?$.merge.call({caseless:m},u,d):$.isPlainObject(d)?$.merge({},d):$.isArray(d)?d.slice():d}function s(u,d,f,m){if($.isUndefined(d)){if(!$.isUndefined(u))return r(void 0,u,f,m)}else return r(u,d,f,m)}function o(u,d){if(!$.isUndefined(d))return r(void 0,d)}function i(u,d){if($.isUndefined(d)){if(!$.isUndefined(u))return r(void 0,u)}else return r(void 0,d)}function l(u,d,f){if(f in t)return r(u,d);if(f in e)return r(void 0,u)}const c={url:o,method:o,data:o,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,withXSRFToken:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:l,headers:(u,d,f)=>s(Ip(u),Ip(d),f,!0)};return $.forEach(Object.keys({...e,...t}),function(d){const f=c[d]||s,m=f(e[d],t[d],d);$.isUndefined(m)&&f!==l||(n[d]=m)}),n}const Wv=e=>{const t=Qr({},e);let{data:n,withXSRFToken:r,xsrfHeaderName:s,xsrfCookieName:o,headers:i,auth:l}=t;if(t.headers=i=ft.from(i),t.url=Fv(Uv(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),l&&i.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),$.isFormData(n)){if(Xe.hasStandardBrowserEnv||Xe.hasStandardBrowserWebWorkerEnv)i.setContentType(void 0);else if($.isFunction(n.getHeaders)){const c=n.getHeaders(),u=["content-type","content-length"];Object.entries(c).forEach(([d,f])=>{u.includes(d.toLowerCase())&&i.set(d,f)})}}if(Xe.hasStandardBrowserEnv&&(r&&$.isFunction(r)&&(r=r(t)),r||r!==!1&&$5(t.url))){const c=s&&o&&V5.read(o);c&&i.set(s,c)}return t},U5=typeof XMLHttpRequest<"u",W5=U5&&function(e){return new Promise(function(n,r){const s=Wv(e);let o=s.data;const i=ft.from(s.headers).normalize();let{responseType:l,onUploadProgress:c,onDownloadProgress:u}=s,d,f,m,y,p;function w(){y&&y(),p&&p(),s.cancelToken&&s.cancelToken.unsubscribe(d),s.signal&&s.signal.removeEventListener("abort",d)}let N=new XMLHttpRequest;N.open(s.method.toUpperCase(),s.url,!0),N.timeout=s.timeout;function h(){if(!N)return;const x=ft.from("getAllResponseHeaders"in N&&N.getAllResponseHeaders()),j={data:!l||l==="text"||l==="json"?N.responseText:N.response,status:N.status,statusText:N.statusText,headers:x,config:e,request:N};Bv(function(v){n(v),w()},function(v){r(v),w()},j),N=null}"onloadend"in N?N.onloadend=h:N.onreadystatechange=function(){!N||N.readyState!==4||N.status===0&&!(N.responseURL&&N.responseURL.indexOf("file:")===0)||setTimeout(h)},N.onabort=function(){N&&(r(new ae("Request aborted",ae.ECONNABORTED,e,N)),N=null)},N.onerror=function(b){const j=b&&b.message?b.message:"Network Error",k=new ae(j,ae.ERR_NETWORK,e,N);k.event=b||null,r(k),N=null},N.ontimeout=function(){let b=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const j=s.transitional||$v;s.timeoutErrorMessage&&(b=s.timeoutErrorMessage),r(new ae(b,j.clarifyTimeoutError?ae.ETIMEDOUT:ae.ECONNABORTED,e,N)),N=null},o===void 0&&i.setContentType(null),"setRequestHeader"in N&&$.forEach(i.toJSON(),function(b,j){N.setRequestHeader(j,b)}),$.isUndefined(s.withCredentials)||(N.withCredentials=!!s.withCredentials),l&&l!=="json"&&(N.responseType=s.responseType),u&&([m,p]=Nl(u,!0),N.addEventListener("progress",m)),c&&N.upload&&([f,y]=Nl(c),N.upload.addEventListener("progress",f),N.upload.addEventListener("loadend",y)),(s.cancelToken||s.signal)&&(d=x=>{N&&(r(!x||x.type?new ia(null,e,N):x),N.abort(),N=null)},s.cancelToken&&s.cancelToken.subscribe(d),s.signal&&(s.signal.aborted?d():s.signal.addEventListener("abort",d)));const g=L5(s.url);if(g&&Xe.protocols.indexOf(g)===-1){r(new ae("Unsupported protocol "+g+":",ae.ERR_BAD_REQUEST,e));return}N.send(o||null)})},q5=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let r=new AbortController,s;const o=function(u){if(!s){s=!0,l();const d=u instanceof Error?u:this.reason;r.abort(d instanceof ae?d:new ia(d instanceof Error?d.message:d))}};let i=t&&setTimeout(()=>{i=null,o(new ae(`timeout ${t} of ms exceeded`,ae.ETIMEDOUT))},t);const l=()=>{e&&(i&&clearTimeout(i),i=null,e.forEach(u=>{u.unsubscribe?u.unsubscribe(o):u.removeEventListener("abort",o)}),e=null)};e.forEach(u=>u.addEventListener("abort",o));const{signal:c}=r;return c.unsubscribe=()=>$.asap(l),c}},Q5=function*(e,t){let n=e.byteLength;if(n<t){yield e;return}let r=0,s;for(;r<n;)s=r+t,yield e.slice(r,s),r=s},K5=async function*(e,t){for await(const n of X5(e))yield*Q5(n,t)},X5=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:n,value:r}=await t.read();if(n)break;yield r}}finally{await t.cancel()}},Dp=(e,t,n,r)=>{const s=K5(e,t);let o=0,i,l=c=>{i||(i=!0,r&&r(c))};return new ReadableStream({async pull(c){try{const{done:u,value:d}=await s.next();if(u){l(),c.close();return}let f=d.byteLength;if(n){let m=o+=f;n(m)}c.enqueue(new Uint8Array(d))}catch(u){throw l(u),u}},cancel(c){return l(c),s.return()}},{highWaterMark:2})},Ap=64*1024,{isFunction:yi}=$,Y5=(({Request:e,Response:t})=>({Request:e,Response:t}))($.global),{ReadableStream:Op,TextEncoder:Lp}=$.global,zp=(e,...t)=>{try{return!!e(...t)}catch{return!1}},G5=e=>{e=$.merge.call({skipUndefined:!0},Y5,e);const{fetch:t,Request:n,Response:r}=e,s=t?yi(t):typeof fetch=="function",o=yi(n),i=yi(r);if(!s)return!1;const l=s&&yi(Op),c=s&&(typeof Lp=="function"?(p=>w=>p.encode(w))(new Lp):async p=>new Uint8Array(await new n(p).arrayBuffer())),u=o&&l&&zp(()=>{let p=!1;const w=new n(Xe.origin,{body:new Op,method:"POST",get duplex(){return p=!0,"half"}}).headers.has("Content-Type");return p&&!w}),d=i&&l&&zp(()=>$.isReadableStream(new r("").body)),f={stream:d&&(p=>p.body)};s&&["text","arrayBuffer","blob","formData","stream"].forEach(p=>{!f[p]&&(f[p]=(w,N)=>{let h=w&&w[p];if(h)return h.call(w);throw new ae(`Response type '${p}' is not supported`,ae.ERR_NOT_SUPPORT,N)})});const m=async p=>{if(p==null)return 0;if($.isBlob(p))return p.size;if($.isSpecCompliantForm(p))return(await new n(Xe.origin,{method:"POST",body:p}).arrayBuffer()).byteLength;if($.isArrayBufferView(p)||$.isArrayBuffer(p))return p.byteLength;if($.isURLSearchParams(p)&&(p=p+""),$.isString(p))return(await c(p)).byteLength},y=async(p,w)=>{const N=$.toFiniteNumber(p.getContentLength());return N??m(w)};return async p=>{let{url:w,method:N,data:h,signal:g,cancelToken:x,timeout:b,onDownloadProgress:j,onUploadProgress:k,responseType:v,headers:_,withCredentials:M="same-origin",fetchOptions:P}=Wv(p),T=t||fetch;v=v?(v+"").toLowerCase():"text";let C=q5([g,x&&x.toAbortSignal()],b),O=null;const E=C&&C.unsubscribe&&(()=>{C.unsubscribe()});let z;try{if(k&&u&&N!=="get"&&N!=="head"&&(z=await y(_,h))!==0){let V=new n(w,{method:"POST",body:h,duplex:"half"}),H;if($.isFormData(h)&&(H=V.headers.get("content-type"))&&_.setContentType(H),V.body){const[q,U]=Mp(z,Nl(Pp(k)));h=Dp(V.body,Ap,q,U)}}$.isString(M)||(M=M?"include":"omit");const A=o&&"credentials"in n.prototype,L={...P,signal:C,method:N.toUpperCase(),headers:_.normalize().toJSON(),body:h,duplex:"half",credentials:A?M:void 0};O=o&&new n(w,L);let R=await(o?T(O,P):T(w,L));const I=d&&(v==="stream"||v==="response");if(d&&(j||I&&E)){const V={};["status","statusText","headers"].forEach(Y=>{V[Y]=R[Y]});const H=$.toFiniteNumber(R.headers.get("content-length")),[q,U]=j&&Mp(H,Nl(Pp(j),!0))||[];R=new r(Dp(R.body,Ap,q,()=>{U&&U(),E&&E()}),V)}v=v||"text";let F=await f[$.findKey(f,v)||"text"](R,p);return!I&&E&&E(),await new Promise((V,H)=>{Bv(V,H,{data:F,headers:ft.from(R.headers),status:R.status,statusText:R.statusText,config:p,request:O})})}catch(A){throw E&&E(),A&&A.name==="TypeError"&&/Load failed|fetch/i.test(A.message)?Object.assign(new ae("Network Error",ae.ERR_NETWORK,p,O),{cause:A.cause||A}):ae.from(A,A&&A.code,p,O)}}},J5=new Map,qv=e=>{let t=e&&e.env||{};const{fetch:n,Request:r,Response:s}=t,o=[r,s,n];let i=o.length,l=i,c,u,d=J5;for(;l--;)c=o[l],u=d.get(c),u===void 0&&d.set(c,u=l?new Map:G5(t)),d=u;return u};qv();const Uf={http:p5,xhr:W5,fetch:{get:qv}};$.forEach(Uf,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const Fp=e=>`- ${e}`,Z5=e=>$.isFunction(e)||e===null||e===!1;function eR(e,t){e=$.isArray(e)?e:[e];const{length:n}=e;let r,s;const o={};for(let i=0;i<n;i++){r=e[i];let l;if(s=r,!Z5(r)&&(s=Uf[(l=String(r)).toLowerCase()],s===void 0))throw new ae(`Unknown adapter '${l}'`);if(s&&($.isFunction(s)||(s=s.get(t))))break;o[l||"#"+i]=s}if(!s){const i=Object.entries(o).map(([c,u])=>`adapter ${c} `+(u===!1?"is not supported by the environment":"is not available in the build"));let l=n?i.length>1?`since :
`+i.map(Fp).join(`
`):" "+Fp(i[0]):"as no adapter specified";throw new ae("There is no suitable adapter to dispatch the request "+l,"ERR_NOT_SUPPORT")}return s}const Qv={getAdapter:eR,adapters:Uf};function Qc(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new ia(null,e)}function $p(e){return Qc(e),e.headers=ft.from(e.headers),e.data=qc.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),Qv.getAdapter(e.adapter||Vo.adapter,e)(e).then(function(r){return Qc(e),r.data=qc.call(e,e.transformResponse,r),r.headers=ft.from(r.headers),r},function(r){return Hv(r)||(Qc(e),r&&r.response&&(r.response.data=qc.call(e,e.transformResponse,r.response),r.response.headers=ft.from(r.response.headers))),Promise.reject(r)})}const Kv="1.13.2",rc={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{rc[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});const Vp={};rc.transitional=function(t,n,r){function s(o,i){return"[Axios v"+Kv+"] Transitional option '"+o+"'"+i+(r?". "+r:"")}return(o,i,l)=>{if(t===!1)throw new ae(s(i," has been removed"+(n?" in "+n:"")),ae.ERR_DEPRECATED);return n&&!Vp[i]&&(Vp[i]=!0,console.warn(s(i," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(o,i,l):!0}};rc.spelling=function(t){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${t}`),!0)};function tR(e,t,n){if(typeof e!="object")throw new ae("options must be an object",ae.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let s=r.length;for(;s-- >0;){const o=r[s],i=t[o];if(i){const l=e[o],c=l===void 0||i(l,o,e);if(c!==!0)throw new ae("option "+o+" must be "+c,ae.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new ae("Unknown option "+o,ae.ERR_BAD_OPTION)}}const zi={assertOptions:tR,validators:rc},Kt=zi.validators;let Or=class{constructor(t){this.defaults=t||{},this.interceptors={request:new Rp,response:new Rp}}async request(t,n){try{return await this._request(t,n)}catch(r){if(r instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const o=s.stack?s.stack.replace(/^.+\n/,""):"";try{r.stack?o&&!String(r.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+o):r.stack=o}catch{}}throw r}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=Qr(this.defaults,n);const{transitional:r,paramsSerializer:s,headers:o}=n;r!==void 0&&zi.assertOptions(r,{silentJSONParsing:Kt.transitional(Kt.boolean),forcedJSONParsing:Kt.transitional(Kt.boolean),clarifyTimeoutError:Kt.transitional(Kt.boolean)},!1),s!=null&&($.isFunction(s)?n.paramsSerializer={serialize:s}:zi.assertOptions(s,{encode:Kt.function,serialize:Kt.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),zi.assertOptions(n,{baseUrl:Kt.spelling("baseURL"),withXsrfToken:Kt.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let i=o&&$.merge(o.common,o[n.method]);o&&$.forEach(["delete","get","head","post","put","patch","common"],p=>{delete o[p]}),n.headers=ft.concat(i,o);const l=[];let c=!0;this.interceptors.request.forEach(function(w){typeof w.runWhen=="function"&&w.runWhen(n)===!1||(c=c&&w.synchronous,l.unshift(w.fulfilled,w.rejected))});const u=[];this.interceptors.response.forEach(function(w){u.push(w.fulfilled,w.rejected)});let d,f=0,m;if(!c){const p=[$p.bind(this),void 0];for(p.unshift(...l),p.push(...u),m=p.length,d=Promise.resolve(n);f<m;)d=d.then(p[f++],p[f++]);return d}m=l.length;let y=n;for(;f<m;){const p=l[f++],w=l[f++];try{y=p(y)}catch(N){w.call(this,N);break}}try{d=$p.call(this,y)}catch(p){return Promise.reject(p)}for(f=0,m=u.length;f<m;)d=d.then(u[f++],u[f++]);return d}getUri(t){t=Qr(this.defaults,t);const n=Uv(t.baseURL,t.url,t.allowAbsoluteUrls);return Fv(n,t.params,t.paramsSerializer)}};$.forEach(["delete","get","head","options"],function(t){Or.prototype[t]=function(n,r){return this.request(Qr(r||{},{method:t,url:n,data:(r||{}).data}))}});$.forEach(["post","put","patch"],function(t){function n(r){return function(o,i,l){return this.request(Qr(l||{},{method:t,headers:r?{"Content-Type":"multipart/form-data"}:{},url:o,data:i}))}}Or.prototype[t]=n(),Or.prototype[t+"Form"]=n(!0)});let nR=class Xv{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(o){n=o});const r=this;this.promise.then(s=>{if(!r._listeners)return;let o=r._listeners.length;for(;o-- >0;)r._listeners[o](s);r._listeners=null}),this.promise.then=s=>{let o;const i=new Promise(l=>{r.subscribe(l),o=l}).then(s);return i.cancel=function(){r.unsubscribe(o)},i},t(function(o,i,l){r.reason||(r.reason=new ia(o,i,l),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const t=new AbortController,n=r=>{t.abort(r)};return this.subscribe(n),t.signal.unsubscribe=()=>this.unsubscribe(n),t.signal}static source(){let t;return{token:new Xv(function(s){t=s}),cancel:t}}};function rR(e){return function(n){return e.apply(null,n)}}function sR(e){return $.isObject(e)&&e.isAxiosError===!0}const vd={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(vd).forEach(([e,t])=>{vd[t]=e});function Yv(e){const t=new Or(e),n=Cv(Or.prototype.request,t);return $.extend(n,Or.prototype,t,{allOwnKeys:!0}),$.extend(n,t,null,{allOwnKeys:!0}),n.create=function(s){return Yv(Qr(e,s))},n}const Pe=Yv(Vo);Pe.Axios=Or;Pe.CanceledError=ia;Pe.CancelToken=nR;Pe.isCancel=Hv;Pe.VERSION=Kv;Pe.toFormData=nc;Pe.AxiosError=ae;Pe.Cancel=Pe.CanceledError;Pe.all=function(t){return Promise.all(t)};Pe.spread=rR;Pe.isAxiosError=sR;Pe.mergeConfig=Qr;Pe.AxiosHeaders=ft;Pe.formToJSON=e=>Vv($.isHTMLForm(e)?new FormData(e):e);Pe.getAdapter=Qv.getAdapter;Pe.HttpStatusCode=vd;Pe.default=Pe;const{Axios:WT,AxiosError:qT,CanceledError:QT,isCancel:KT,CancelToken:XT,VERSION:YT,all:GT,Cancel:JT,isAxiosError:ZT,spread:eM,toFormData:tM,AxiosHeaders:nM,HttpStatusCode:rM,formToJSON:sM,getAdapter:aM,mergeConfig:oM}=Pe,aR="/api",jt=Pe.create({baseURL:aR,headers:{"Content-Type":"application/json"}}),oR=async e=>(await jt.post("/pipeline/preview",e)).data,iR=async e=>(await jt.get(`/pipeline/datasets/${e}/schema`)).data,lR=async(e,t)=>(await jt.post(`/pipeline/save/${e}`,t)).data,cR=async e=>{const t=await jt.get(`/pipeline/load/${e}`);return t.data?t.data:null},on={runPipeline:async e=>(await jt.post("/pipeline/run",e)).data,getJob:async e=>(await jt.get(`/pipeline/jobs/${e}`)).data,listJobs:async(e=50)=>(await jt.get("/pipeline/jobs",{params:{limit:e}})).data,getHyperparameters:async e=>(await jt.get(`/pipeline/hyperparameters/${e}`)).data,getDefaultSearchSpace:async e=>(await jt.get(`/pipeline/hyperparameters/${e}/defaults`)).data,getLatestTuningJob:async e=>(await jt.get(`/pipeline/jobs/tuning/latest/${e}`)).data,getBestTuningJobForModel:async e=>(await jt.get(`/pipeline/jobs/tuning/best/${e}`)).data,getTuningJobsForModel:async e=>(await jt.get(`/pipeline/jobs/tuning/history/${e}`)).data},uR=3e3,Gv=Mx((e,t)=>{let n=null;return{jobs:[],isLoading:!1,isDrawerOpen:!1,activeTab:"training",fetchJobs:async()=>{e({isLoading:!0});try{const r=await on.listJobs();e({jobs:r,isLoading:!1})}catch(r){console.error("Failed to fetch jobs:",r),e({isLoading:!1})}},submitJob:async r=>{try{const s=await on.runPipeline(r);return await t().fetchJobs(),t().startPolling(),s.job_id}catch(s){throw console.error("Failed to submit job:",s),s}},toggleDrawer:r=>{const s=t().isDrawerOpen,o=r!==void 0?r:!s;e({isDrawerOpen:o}),o?(t().fetchJobs(),t().startPolling()):t().jobs.some(l=>l.status==="running"||l.status==="queued")||t().stopPolling()},setTab:r=>e({activeTab:r}),startPolling:()=>{n||(n=setInterval(async()=>{try{const r=await on.listJobs();e({jobs:r}),!r.some(o=>o.status==="running"||o.status==="queued")&&!t().isDrawerOpen&&t().stopPolling()}catch(r){console.error("Polling error:",r)}},uR))},stopPolling:()=>{n&&(clearInterval(n),n=null)}}}),Wf=(e,t)=>{const n=[],r=new Set,s=[],o=e.find(l=>l.data.definitionType==="dataset_node"),i=o==null?void 0:o.data.datasetId;for(o&&s.push(o.id);s.length>0;){const l=s.shift();if(r.has(l))continue;r.add(l);const c=e.find(p=>p.id===l);if(!c)continue;let u="unknown",d={};const m=t.filter(p=>p.target===l).map(p=>p.source);if(c.data.definitionType==="dataset_node")u="data_loader",d={dataset_id:c.data.datasetId};else if(c.data.definitionType==="imputation_node"){const p=c.data.method||"simple";p==="knn"?(u="KNNImputer",d={columns:c.data.columns,n_neighbors:c.data.n_neighbors,weights:c.data.weights}):p==="iterative"?(u="IterativeImputer",d={columns:c.data.columns,max_iter:c.data.max_iter,estimator:c.data.estimator,random_state:0}):(u="SimpleImputer",d={columns:c.data.columns,strategy:c.data.strategy,fill_value:c.data.fill_value})}else if(c.data.definitionType==="simple_imputer")u="SimpleImputer",d=c.data||{};else if(c.data.definitionType==="drop_missing_columns"||c.data.definitionType==="DropMissingColumns")u="DropMissingColumns",d={columns:c.data.columns||[],missing_threshold:c.data.missing_threshold};else if(c.data.definitionType==="drop_missing_rows"||c.data.definitionType==="DropMissingRows")u="DropMissingRows",d={missing_threshold:c.data.missing_threshold,drop_if_any_missing:c.data.drop_if_any_missing};else if(c.data.definitionType==="deduplicate"||c.data.definitionType==="Deduplicate")u="Deduplicate",d={subset:c.data.subset,keep:c.data.keep};else if(c.data.definitionType==="casting"||c.data.definitionType==="Casting")u="Casting",d={column_types:c.data.column_types};else if(c.data.definitionType==="MissingIndicator"||c.data.definitionType==="missing_indicator")u="MissingIndicator",d={columns:c.data.columns,flag_suffix:c.data.flag_suffix};else if(c.data.definitionType==="scale_numeric_features"){const p=c.data||{},w=p.method||"standard";w==="minmax"?u="MinMaxScaler":w==="maxabs"?u="MaxAbsScaler":w==="robust"?u="RobustScaler":u="StandardScaler",d=p}else if(c.data.definitionType==="encoding"){const p=c.data.method;p==="onehot"?u="OneHotEncoder":p==="dummy"?(u="DummyEncoder",d={...c.data,drop_first:!0}):p==="label"?u="LabelEncoder":p==="ordinal"?u="OrdinalEncoder":p==="target"?u="TargetEncoder":p==="hash"?u="HashEncoder":u="OneHotEncoder",u!=="DummyEncoder"&&(d=c.data)}else if(c.data.definitionType==="TrainTestSplitter")u="TrainTestSplitter",d=c.data||{};else if(c.data.definitionType==="label_encoding")u="LabelEncoder",d=c.data||{};else if(c.data.definitionType==="feature_target_split")u="feature_target_split",d=c.data||{};else if(c.data.definitionType==="feature_selection")u="feature_selection",d=c.data||{};else if(c.data.definitionType==="outlier"){const p=c.data.method||"iqr";p==="iqr"?u="IQR":p==="zscore"?u="ZScore":p==="winsorize"?u="Winsorize":p==="elliptic_envelope"?u="EllipticEnvelope":u="IQR",d=c.data}else if(c.data.definitionType==="TransformationNode"){u="GeneralTransformation";const p=c.data.transformations||[],w=[];for(const N of p)if(N.columns&&Array.isArray(N.columns))for(const h of N.columns)w.push({column:h,method:N.method,...N.params});d={transformations:w}}else c.data.definitionType==="BinningNode"?(u="GeneralBinning",d={columns:c.data.columns,strategy:c.data.strategy,n_bins:c.data.n_bins,label_format:c.data.label_format,output_suffix:c.data.output_suffix,drop_original:c.data.drop_original,custom_bins:c.data.custom_bins,custom_labels:c.data.custom_labels}):c.data.definitionType==="ResamplingNode"?((c.data.type||"oversampling")==="oversampling"?u="Oversampling":u="Undersampling",d=c.data):c.data.definitionType==="FeatureGenerationNode"?(u="FeatureMath",d={operations:c.data.operations}):c.data.definitionType==="TextCleaning"?(u="TextCleaning",d=c.data):c.data.definitionType==="ValueReplacement"?(u="ValueReplacement",d=c.data):c.data.definitionType==="AliasReplacement"?(u="AliasReplacement",d=c.data):c.data.definitionType==="InvalidValueReplacement"?(u="InvalidValueReplacement",d=c.data):c.data.definitionType==="model_training"?(u="model_training",d={target_column:c.data.target_column,model_type:c.data.model_type,hyperparameters:c.data.hyperparameters,cv_enabled:c.data.cv_enabled,cv_folds:c.data.cv_folds,cv_type:c.data.cv_type,cv_shuffle:c.data.cv_shuffle,cv_random_state:c.data.cv_random_state}):c.data.definitionType==="hyperparameter_tuning"?(u="model_tuning",d={target_column:c.data.target_column,algorithm:c.data.model_type,tuning_config:{strategy:c.data.search_strategy,metric:c.data.metric,n_trials:c.data.n_trials,search_space:c.data.search_space,cv_enabled:c.data.cv_enabled,cv_folds:c.data.cv_folds,cv_type:c.data.cv_type,cv_shuffle:c.data.cv_shuffle,cv_random_state:c.data.cv_random_state,random_state:c.data.random_state}}):(console.warn(`Unknown node type: ${c.data.definitionType}`),u="Unknown",d=c.data);n.push({node_id:c.id,step_type:u,params:d,inputs:m}),t.filter(p=>p.source===l).forEach(p=>s.push(p.target))}return{pipeline_id:`preview_${Date.now()}`,nodes:n,metadata:{dataset_source_id:i}}},dR=()=>{const e=oe(w=>w.nodes),t=oe(w=>w.edges),n=oe(w=>w.setExecutionResult),r=oe(w=>w.setGraph),{toggleDrawer:s}=Gv(),[o,i]=S.useState(!1),[l,c]=S.useState(!1),[u,d]=S.useState(!1),f=()=>({nodes:e.map(w=>({id:w.id,type:w.type,position:w.position,data:{...w.data,catalogType:w.data.catalogType||w.data.definitionType}})),edges:t.map(w=>({id:w.id,source:w.source,target:w.target,sourceHandle:w.sourceHandle,targetHandle:w.targetHandle,type:w.type,data:w.data}))}),m=async()=>{const w=e.find(h=>h.data.definitionType==="dataset_node"),N=w==null?void 0:w.data.datasetId;if(!N){alert("No dataset node found! Cannot save pipeline without a dataset context.");return}c(!0);try{await lR(N,{name:"My Pipeline",description:"Saved from V2 Canvas",graph:f()}),alert("Pipeline saved successfully!")}catch(h){console.error("Save failed:",h),alert("Failed to save pipeline.")}finally{c(!1)}},y=async()=>{const w=e.find(h=>h.data.definitionType==="dataset_node"),N=w==null?void 0:w.data.datasetId;if(!N){alert("No dataset node found! Cannot load pipeline without a dataset context.");return}if(confirm("Loading a pipeline will overwrite your current work. Continue?")){d(!0);try{const h=await cR(N);h&&h.graph?(r(h.graph.nodes,h.graph.edges),alert("Pipeline loaded successfully!")):alert("No saved pipeline found for this dataset.")}catch(h){console.error("Load failed:",h),alert("Failed to load pipeline.")}finally{d(!1)}}},p=async()=>{const w=e.find(h=>h.data.definitionType==="dataset_node");if(!(w==null?void 0:w.data.datasetId)){alert("No dataset node found!");return}i(!0),n(null);try{const h=Wf(e,t),g=await oR(h);n(g)}catch(h){console.error("Pipeline failed:",h),alert("Pipeline execution failed. Check console for details.")}finally{i(!1)}};return a.jsxs("div",{className:"absolute top-4 right-4 z-10 flex gap-2",children:[a.jsxs("button",{onClick:()=>s(),className:"flex items-center gap-2 px-4 py-2 bg-background border rounded-md shadow-sm hover:bg-accent transition-colors",children:[a.jsx(e3,{className:"w-4 h-4"}),a.jsx("span",{className:"text-sm font-medium",children:"Jobs"})]}),a.jsxs("button",{onClick:y,disabled:u||o,className:"flex items-center gap-2 px-4 py-2 bg-background border rounded-md shadow-sm hover:bg-accent transition-colors disabled:opacity-50",children:[u?a.jsx(Ar,{className:"w-4 h-4 animate-spin"}):a.jsx(G4,{className:"w-4 h-4"}),a.jsx("span",{className:"text-sm font-medium",children:u?"Loading...":"Load"})]}),a.jsxs("button",{onClick:m,disabled:l||o,className:"flex items-center gap-2 px-4 py-2 bg-background border rounded-md shadow-sm hover:bg-accent transition-colors disabled:opacity-50",children:[l?a.jsx(Ar,{className:"w-4 h-4 animate-spin"}):a.jsx(c3,{className:"w-4 h-4"}),a.jsx("span",{className:"text-sm font-medium",children:l?"Saving...":"Save"})]}),a.jsxs("button",{onClick:p,disabled:o,className:"flex items-center gap-2 px-4 py-2 text-white rounded-md shadow-sm transition-all disabled:opacity-50",style:{background:"var(--main-gradient)"},children:[o?a.jsx(Ar,{className:"w-4 h-4 animate-spin"}):a.jsx(zf,{className:"w-4 h-4"}),a.jsx("span",{className:"text-sm font-medium",children:o?"Running...":"Run Preview"})]})]})},fR=()=>{const e=oe(m=>m.executionResult),[t,n]=S.useState(!0),[r,s]=S.useState(null),o=S.useMemo(()=>e!=null&&e.preview_data?Array.isArray(e.preview_data)?{Result:e.preview_data}:typeof e.preview_data=="object"?e.preview_data:{}:{},[e]),i=Object.keys(o);if(nn.useEffect(()=>{i.length>0&&(!r||!i.includes(r))&&(i.includes("train")?s("train"):i.includes("X")?s("X"):s(i[0]))},[i,r]),!e)return null;const l=r&&o[r]?o[r]:[],c=l.length>0?Object.keys(l[0]):[],u=e.node_results?Object.keys(e.node_results):[],d=Object.keys(e.node_results||{}).find(m=>e.node_results[m].status==="failed"),f=d?e.node_results[d].error:null;return a.jsxs("div",{className:`absolute bottom-0 left-0 right-0 bg-background border-t shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.1)] transition-all duration-300 z-20 flex flex-col ${t?"h-96":"h-10"}`,children:[a.jsxs("div",{className:"flex items-center justify-between px-4 py-2 bg-muted/10 cursor-pointer hover:bg-muted/20 border-b select-none",onClick:()=>n(!t),children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(p3,{className:"w-4 h-4 text-primary"}),a.jsx("span",{className:"font-semibold text-sm",children:"Preview Results"}),a.jsxs("span",{className:"text-xs text-muted-foreground ml-2",children:[l.length," rows shown"]}),e.status==="failed"&&a.jsx("span",{className:"text-xs text-red-600 font-bold ml-2",children:"(Failed)"})]}),a.jsx("button",{className:"p-1 hover:bg-muted rounded",children:t?a.jsx(vt,{className:"w-4 h-4"}):a.jsx(sa,{className:"w-4 h-4"})})]}),t&&a.jsxs("div",{className:"flex-1 overflow-hidden flex flex-col",children:[e.status==="failed"&&a.jsxs("div",{className:"p-4 bg-red-50 border-b text-red-800 text-sm overflow-auto max-h-32",children:[a.jsx("div",{className:"font-bold mb-1",children:"Pipeline Execution Failed"}),a.jsx("div",{className:"font-mono text-xs whitespace-pre-wrap",children:f||"Unknown error occurred during execution."})]}),i.length>1&&a.jsxs("div",{className:"flex items-center gap-1 px-2 pt-2 border-b bg-muted/5",children:[a.jsx(t3,{className:"w-3 h-3 text-muted-foreground mr-1"}),i.map(m=>a.jsx("button",{onClick:()=>s(m),className:`px-3 py-1 text-xs font-medium rounded-t-md border-t border-l border-r transition-colors ${r===m?"bg-background text-primary border-b-background translate-y-[1px]":"bg-muted/30 text-muted-foreground hover:bg-muted/50 border-transparent"}`,children:m},m))]}),u.length>0&&e.status!=="failed"&&a.jsx("div",{className:"p-2 bg-blue-50 dark:bg-blue-950/20 border-b dark:border-blue-900/30 flex gap-2 overflow-x-auto",children:u.map((m,y)=>a.jsx("div",{className:"text-xs text-blue-800 dark:text-blue-200 bg-blue-100 dark:bg-blue-900/40 px-2 py-1 rounded border border-blue-200 dark:border-blue-800 whitespace-nowrap",children:m},y))}),a.jsxs("div",{className:"flex-1 overflow-auto",children:[a.jsxs("table",{className:"w-full text-sm text-left border-collapse",children:[a.jsx("thead",{className:"text-xs text-muted-foreground uppercase bg-muted sticky top-0 z-10 shadow-sm",children:a.jsx("tr",{children:c.map(m=>a.jsx("th",{className:"px-4 py-2 font-medium border-b whitespace-nowrap",children:m},m))})}),a.jsx("tbody",{children:l.map((m,y)=>a.jsx("tr",{className:"border-b hover:bg-muted/10",children:c.map(p=>a.jsx("td",{className:"px-4 py-2 whitespace-nowrap font-mono text-xs",children:m[p]!==null?String(m[p]):a.jsx("span",{className:"text-muted-foreground italic",children:"null"})},`${y}-${p}`))},y))})]}),l.length===0&&a.jsxs("div",{className:"flex items-center justify-center h-32 text-muted-foreground text-sm",children:["No preview data available ",r?`for ${r}`:""]})]})]})]})},mR=()=>{const[e,t]=S.useState(!1);S.useEffect(()=>{document.documentElement.classList.contains("dark")?t(!0):window.matchMedia("(prefers-color-scheme: dark)").matches&&(document.documentElement.classList.add("dark"),t(!0))},[]);const n=()=>{const r=!e;t(r),r?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")};return a.jsxs("div",{className:"h-14 border-b bg-card px-4 flex items-center justify-between shrink-0",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"p-1.5 bg-primary/10 rounded-md",children:a.jsx(o3,{className:"w-5 h-5 text-primary"})}),a.jsx("h1",{className:"font-bold text-lg tracking-tight bg-gradient-to-r from-blue-500 to-purple-600 bg-clip-text text-transparent",children:"Skyulf ML Canvas"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("a",{href:"/ml-workflow-v1",className:"text-sm text-muted-foreground hover:text-primary transition-colors mr-2",target:"_blank",rel:"noopener noreferrer",children:"Switch to Legacy V1"}),a.jsx("button",{onClick:n,className:"p-2 hover:bg-accent rounded-md transition-colors text-muted-foreground hover:text-foreground",title:"Toggle Theme",children:e?a.jsx(s3,{className:"w-5 h-5"}):a.jsx(m3,{className:"w-5 h-5"})})]})]})},hR=()=>{const{isDrawerOpen:e,toggleDrawer:t,jobs:n,isLoading:r,activeTab:s,setTab:o,fetchJobs:i}=Gv(),[l,c]=S.useState(null);if(!e)return null;const u=n.filter(d=>d.job_type===s);return a.jsxs("div",{className:"fixed inset-0 z-50 flex justify-center items-center",children:[a.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:()=>t(!1)}),a.jsx("div",{className:"relative w-[900px] h-[85vh] bg-white dark:bg-gray-800 shadow-2xl rounded-lg flex flex-col border border-gray-200 dark:border-gray-700 overflow-hidden transition-all",children:l?a.jsx(pR,{job:l,onBack:()=>c(null),onClose:()=>t(!1)}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"p-4 border-b border-gray-100 dark:border-gray-700 flex justify-between items-center bg-gray-50 dark:bg-gray-800/50",children:[a.jsx("h2",{className:"font-semibold text-gray-800 dark:text-gray-100",children:"Job History"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>i(),className:`p-1.5 rounded hover:bg-gray-200 dark:hover:bg-gray-700 text-gray-500 dark:text-gray-400 ${r?"animate-spin":""}`,title:"Refresh",children:a.jsx(Jl,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>t(!1),className:"p-1.5 rounded hover:bg-gray-200 dark:hover:bg-gray-700 text-gray-500 dark:text-gray-400",children:a.jsx(or,{className:"w-4 h-4"})})]})]}),a.jsxs("div",{className:"flex border-b border-gray-200 dark:border-gray-700",children:[a.jsx("button",{className:`flex-1 py-3 text-sm font-medium border-b-2 transition-colors ${s==="training"?"border-blue-500 text-blue-600 dark:text-blue-400 bg-blue-50/50 dark:bg-blue-900/20":"border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200"}`,onClick:()=>o("training"),children:"Training Jobs"}),a.jsx("button",{className:`flex-1 py-3 text-sm font-medium border-b-2 transition-colors ${s==="tuning"?"border-purple-500 text-purple-600 dark:text-purple-400 bg-purple-50/50 dark:bg-purple-900/20":"border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200"}`,onClick:()=>o("tuning"),children:"Tuning Jobs"})]}),a.jsxs("div",{className:"grid grid-cols-12 gap-4 px-6 py-2 bg-gray-50 dark:bg-gray-900/50 border-b border-gray-200 dark:border-gray-700 text-xs font-medium text-gray-500 dark:text-gray-400",children:[a.jsx("div",{className:"col-span-2",children:"Status"}),a.jsx("div",{className:"col-span-2",children:"Dataset"}),a.jsx("div",{className:"col-span-2",children:"Job ID"}),a.jsx("div",{className:"col-span-2",children:"Started"}),a.jsx("div",{className:"col-span-1",children:"Duration"}),a.jsx("div",{className:"col-span-3",children:"Result"})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-2 bg-gray-50/30 dark:bg-gray-900/30",children:u.length===0?a.jsxs("div",{className:"text-center py-10 text-gray-400 dark:text-gray-500 text-sm",children:["No ",s," jobs found."]}):u.map(d=>a.jsx(gR,{job:d,onClick:()=>c(d)},d.job_id))})]})})]})},pR=({job:e,onBack:t,onClose:n})=>a.jsxs("div",{className:"flex flex-col h-full",children:[a.jsxs("div",{className:"p-4 border-b border-gray-100 dark:border-gray-700 flex justify-between items-center bg-gray-50 dark:bg-gray-800/50",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("button",{onClick:t,className:"p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded text-gray-500",children:a.jsx(L4,{className:"w-4 h-4"})}),a.jsx("div",{children:a.jsxs("h2",{className:"font-semibold text-gray-800 dark:text-gray-100 flex items-center gap-2",children:["Job Details",a.jsx("span",{className:"text-xs font-normal text-gray-500 font-mono bg-gray-100 dark:bg-gray-700 px-1.5 py-0.5 rounded",children:e.job_id.slice(0,8)})]})})]}),a.jsx("button",{onClick:n,className:"p-1.5 rounded hover:bg-gray-200 dark:hover:bg-gray-700 text-gray-500 dark:text-gray-400",children:a.jsx(or,{className:"w-4 h-4"})})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[a.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-900/50 rounded-lg border border-gray-100 dark:border-gray-700",children:[a.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Status"}),a.jsx("div",{className:"font-medium capitalize flex items-center gap-2 text-gray-800 dark:text-gray-200",children:e.status})]}),a.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-900/50 rounded-lg border border-gray-100 dark:border-gray-700",children:[a.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Dataset"}),a.jsxs("div",{className:"font-medium text-gray-800 dark:text-gray-200 flex items-center gap-2",children:[a.jsx(Ao,{className:"w-3 h-3 text-gray-400"}),e.dataset_name||e.dataset_id||"Unknown"]})]}),a.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-900/50 rounded-lg border border-gray-100 dark:border-gray-700",children:[a.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Duration"}),a.jsx("div",{className:"font-medium text-gray-800 dark:text-gray-200 font-mono",children:e.start_time&&e.end_time?`${Math.round((new Date(e.end_time).getTime()-new Date(e.start_time).getTime())/1e3)}s`:"-"})]})]}),e.error&&a.jsxs("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-100 dark:border-red-900/30 rounded-lg",children:[a.jsxs("h3",{className:"text-sm font-medium text-red-800 dark:text-red-300 mb-2 flex items-center gap-2",children:[a.jsx(aa,{className:"w-4 h-4"}),"Error Log"]}),a.jsx("pre",{className:"text-xs text-red-700 dark:text-red-400 whitespace-pre-wrap font-mono",children:e.error})]}),e.result&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("h3",{className:"text-sm font-medium text-gray-800 dark:text-gray-200 flex items-center gap-2",children:[a.jsx(g3,{className:"w-4 h-4"}),"Execution Results"]}),e.job_type==="training"&&e.result.metrics&&a.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:Object.entries(e.result.metrics).map(([r,s])=>a.jsxs("div",{className:"p-3 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg",children:[a.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1 capitalize",children:r.replace(/_/g," ")}),a.jsx("div",{className:"font-mono font-medium text-blue-600 dark:text-blue-400",children:typeof s=="number"?s.toFixed(4):String(s)})]},r))}),e.job_type==="tuning"&&e.result.best_params&&a.jsxs("div",{className:"bg-gray-900 text-gray-100 p-4 rounded-lg font-mono text-xs overflow-x-auto",children:[a.jsx("div",{className:"text-gray-500 mb-2",children:"# Best Hyperparameters"}),a.jsx("pre",{children:JSON.stringify(e.result.best_params,null,2)})]}),a.jsx("div",{className:"mt-4",children:a.jsxs("details",{className:"text-xs text-gray-500 cursor-pointer",children:[a.jsx("summary",{className:"hover:text-gray-700 dark:hover:text-gray-300",children:"View Raw Output"}),a.jsx("pre",{className:"mt-2 p-3 bg-gray-50 dark:bg-gray-900 rounded border border-gray-200 dark:border-gray-700 overflow-x-auto",children:JSON.stringify(e.result,null,2)})]})})]})]})]}),gR=({job:e,onClick:t})=>{const n=i=>{switch(i){case"completed":case"succeeded":return a.jsx(Nv,{className:"w-4 h-4 text-green-500 dark:text-green-400"});case"failed":return a.jsx(aa,{className:"w-4 h-4 text-red-500 dark:text-red-400"});case"running":return a.jsx(Jl,{className:"w-4 h-4 text-blue-500 dark:text-blue-400 animate-spin"});default:return a.jsx(U4,{className:"w-4 h-4 text-gray-400 dark:text-gray-500"})}},r=i=>{switch(i){case"completed":return"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700/50";case"failed":return"bg-red-50/30 dark:bg-red-900/10 border-red-100 dark:border-red-900/30 hover:bg-red-50/50 dark:hover:bg-red-900/20";case"running":return"bg-blue-50/30 dark:bg-blue-900/10 border-blue-100 dark:border-blue-900/30 hover:bg-blue-50/50 dark:hover:bg-blue-900/20";default:return"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700"}},s=i=>i?new Date(i).toLocaleString(void 0,{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"-",o=(i,l)=>{if(!i||!l)return"-";const c=new Date(l).getTime()-new Date(i).getTime(),u=Math.floor(c/1e3);return u<60?`${u}s`:`${Math.floor(u/60)}m ${u%60}s`};return a.jsxs("div",{onClick:t,className:`grid grid-cols-12 gap-4 p-3 rounded-lg border text-sm items-center transition-colors cursor-pointer ${r(e.status)}`,children:[a.jsxs("div",{className:"col-span-2 flex items-center gap-2",children:[n(e.status),a.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300 capitalize truncate",children:e.status})]}),a.jsxs("div",{className:"col-span-2 flex items-center gap-1 text-xs text-gray-600 dark:text-gray-400 truncate",title:e.dataset_id,children:[a.jsx(Ao,{className:"w-3 h-3"}),e.dataset_name||e.dataset_id||"-"]}),a.jsx("div",{className:"col-span-2 font-mono text-xs text-gray-500 dark:text-gray-400 truncate",title:e.job_id,children:e.job_id.slice(0,8)}),a.jsx("div",{className:"col-span-2 text-gray-600 dark:text-gray-400 text-xs",children:s(e.start_time)}),a.jsx("div",{className:"col-span-1 text-gray-600 dark:text-gray-400 text-xs font-mono",children:o(e.start_time,e.end_time)}),a.jsx("div",{className:"col-span-3",children:e.error?a.jsxs("span",{className:"text-red-600 dark:text-red-400 text-xs truncate block",title:e.error,children:["Error: ",e.error]}):e.status==="completed"&&e.result?e.job_type==="training"&&e.result.metrics?a.jsx("div",{className:"flex flex-wrap gap-2",children:Object.entries(e.result.metrics).slice(0,2).map(([i,l])=>a.jsxs("span",{className:"text-[10px] bg-gray-100 dark:bg-gray-700 px-1.5 py-0.5 rounded text-gray-600 dark:text-gray-300 border border-gray-200 dark:border-gray-600",children:[i,": ",Number(l).toFixed(3)]},i))}):e.job_type==="tuning"&&e.result.best_params?a.jsx("div",{className:"text-[10px] text-gray-500 dark:text-gray-400 truncate",title:JSON.stringify(e.result.best_params),children:"Params found"}):a.jsx("span",{className:"text-gray-400 text-xs",children:"-"}):a.jsx("span",{className:"text-gray-400 text-xs",children:"-"})})]})},xR=()=>a.jsxs("div",{className:"flex h-screen w-full bg-background overflow-hidden flex-col",children:[a.jsx(hR,{}),a.jsx(mR,{}),a.jsxs("div",{className:"flex flex-1 overflow-hidden relative",children:[a.jsx(v3,{}),a.jsxs("main",{className:"flex-1 h-full relative flex flex-col transition-all duration-300 ease-in-out",children:[a.jsx(dR,{}),a.jsxs("div",{className:"flex-1 relative",children:[a.jsx(E3,{}),a.jsx(fR,{})]})]}),a.jsx(R3,{})]})]});function yR(){const e=oe(t=>t.addNode);return S.useEffect(()=>{const n=new URLSearchParams(window.location.search).get("source_id");n&&setTimeout(()=>{e("dataset_node",{x:100,y:100},{datasetId:n})},100)},[]),S.useEffect(()=>{},[]),a.jsx(xR,{})}const vR=({config:e,onChange:t})=>a.jsxs("div",{className:"p-4 space-y-2",children:[a.jsx("label",{className:"block text-sm font-medium",children:"Debug Message"}),a.jsx("input",{type:"text",className:"w-full p-2 border rounded",value:e.message,onChange:n=>t({...e,message:n.target.value})})]}),bR={type:"debug_node",label:"Debug Node",category:"Utility",description:"A simple node for testing the registry.",icon:$4,inputs:[{id:"in",label:"Input",type:"any"}],outputs:[{id:"out",label:"Output",type:"any"}],component:({data:e})=>a.jsxs("div",{className:"text-xs",children:["Msg: ",a.jsx("span",{className:"font-mono",children:e.message||"..."})]}),settings:vR,validate:e=>({isValid:e.message.length>0,message:e.message.length===0?"Message is required":void 0}),getDefaultConfig:()=>({message:"Hello World"})},Hp="/data/api",Jv={getAll:async()=>{const e=await fetch(`${Hp}/sources`);if(!e.ok)throw new Error("Failed to fetch datasets");return(await e.json()).sources||[]},getById:async e=>{const t=await fetch(`${Hp}/sources/${e}`);if(!t.ok)throw new Error("Failed to fetch dataset");return t.json()}},Ee=e=>hj({queryKey:["dataset-schema",e],queryFn:()=>iR(e),enabled:!!e,staleTime:1e3*60*5}),wR=({config:e,onChange:t})=>{const[n,r]=S.useState([]),[s,o]=S.useState(!1),{data:i,isLoading:l}=Ee(e.datasetId);S.useEffect(()=>{o(!0),Jv.getAll().then(r).catch(console.error).finally(()=>o(!1))},[]);const c=u=>{const d=u.target.value,f=n.find(m=>String(m.id)===d);t({...e,datasetId:d,datasetName:f==null?void 0:f.name})};return a.jsxs("div",{className:"p-4 space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"block text-sm font-medium",children:"Select Dataset"}),s?a.jsx("div",{className:"text-xs text-muted-foreground",children:"Loading datasets..."}):a.jsxs("select",{className:"w-full p-2 border rounded bg-background focus:ring-1 focus:ring-primary outline-none",value:e.datasetId||"",onChange:c,children:[a.jsx("option",{value:"",children:"-- Select --"}),n.map(u=>a.jsx("option",{value:u.id,children:u.name},u.id))]})]}),e.datasetId&&a.jsxs("div",{className:"space-y-2 pt-2 border-t",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium text-muted-foreground",children:[a.jsx(h3,{size:14}),a.jsx("span",{children:"Dataset Schema"})]}),l?a.jsx("div",{className:"text-xs text-muted-foreground animate-pulse",children:"Loading schema..."}):i?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"border rounded-md bg-muted/10 max-h-60 overflow-y-auto",children:a.jsxs("table",{className:"w-full text-xs text-left",children:[a.jsx("thead",{className:"bg-muted/20 sticky top-0",children:a.jsxs("tr",{children:[a.jsx("th",{className:"p-2 font-medium border-b",children:"Column"}),a.jsx("th",{className:"p-2 font-medium border-b",children:"Type"}),a.jsx("th",{className:"p-2 font-medium border-b text-right",children:"Missing"}),a.jsx("th",{className:"p-2 font-medium border-b text-right",children:"Unique"})]})}),a.jsx("tbody",{children:Object.values(i.columns).map(u=>a.jsxs("tr",{className:"border-b last:border-0 hover:bg-muted/20",children:[a.jsx("td",{className:"p-2 font-mono font-medium",children:u.name}),a.jsx("td",{className:"p-2 text-muted-foreground",children:u.dtype}),a.jsx("td",{className:"p-2 text-right text-muted-foreground",children:u.missing_count}),a.jsx("td",{className:"p-2 text-right text-muted-foreground",children:u.unique_count})]},u.name))})]})}),a.jsx("p",{className:"text-[10px] text-muted-foreground mt-1 text-center italic",children:"Expand node to see full details"})]}):a.jsx("div",{className:"text-xs text-muted-foreground italic",children:"No schema available."})]})]})},NR=({data:e})=>{const[t,n]=S.useState(void 0);S.useEffect(()=>{e.datasetId&&!e.datasetName&&t===void 0&&Jv.getById(e.datasetId).then(s=>n(s.name)).catch(()=>n(e.datasetId))},[e.datasetId,e.datasetName,t]);const r=e.datasetName||t||e.datasetId;return a.jsx("div",{className:"text-xs",children:e.datasetId?a.jsx("div",{className:"font-medium truncate max-w-[150px]",title:r,children:r||"Loading..."}):a.jsx("div",{className:"text-muted-foreground italic",children:"Select a dataset"})})},jR={type:"dataset_node",label:"Dataset",category:"Data Source",description:"Load a dataset from the registry.",icon:Ao,inputs:[],outputs:[{id:"data",label:"Data",type:"dataset"}],settings:wR,component:NR,validate:e=>({isValid:!!e.datasetId,message:e.datasetId?void 0:"Dataset is required"}),getDefaultConfig:()=>({datasetId:""})},Zv=(e,t,n,r=new Set)=>{var o;if(r.has(e.id))return;if(r.add(e.id),(o=e.data)!=null&&o.datasetId)return e.data.datasetId;const s=ur(e,t,n);for(const i of s){const l=Zv(i,t,n,r);if(l)return l}},Ie=e=>{const t=oe(o=>o.nodes),n=oe(o=>o.edges),r=t.find(o=>o.id===e);return r?ur(r,t,n).map(o=>{const i=Zv(o,t,n);return i&&!o.data.datasetId?{...o.data,datasetId:i}:o.data}):[]},la=(e,t={})=>{var o;const r=(o=Ie(e).find(i=>i.datasetId))==null?void 0:o.datasetId,s=oe(i=>i.executionResult);return S.useMemo(()=>!r||!(s!=null&&s.recommendations)?[]:s.recommendations.filter(i=>{var l,c;if(t.types||t.suggestedNodeTypes){const u=(l=t.types)==null?void 0:l.includes(i.type),d=(c=t.suggestedNodeTypes)==null?void 0:c.includes(i.suggested_node_type);if(!u&&!d)return!1}return!(t.scope==="column"&&(!i.target_columns||i.target_columns.length===0))}),[s,r,t.types,t.suggestedNodeTypes,t.scope])},Jr=({recommendations:e,onApply:t,className:n=""})=>!e||e.length===0?null:a.jsxs("div",{className:`bg-blue-50 border border-blue-100 rounded-md p-3 ${n}`,children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2 text-blue-800 font-medium text-sm",children:[a.jsx(kv,{className:"w-4 h-4"}),a.jsx("span",{children:"Recommendations"})]}),a.jsx("div",{className:"space-y-2",children:e.map(r=>a.jsx("div",{className:"bg-white border border-blue-100 rounded p-2 text-sm shadow-sm hover:shadow-md transition-shadow",children:a.jsxs("div",{className:"flex justify-between items-start gap-2",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-gray-800 font-medium text-xs mb-1",children:r.type.replace("_"," ").toUpperCase()}),a.jsx("p",{className:"text-gray-600 text-xs leading-relaxed",children:r.description}),r.reasoning&&a.jsxs("p",{className:"text-gray-400 text-[10px] mt-1 italic",children:["Why: ",r.reasoning]})]}),t&&a.jsx("button",{onClick:()=>t(r),className:"text-blue-600 hover:text-blue-800 p-1 rounded hover:bg-blue-50",title:"Apply Recommendation",children:a.jsx(Nv,{className:"w-5 h-5"})})]})},r.rule_id))})]}),kR=({config:e,onChange:t,nodeId:n})=>{var j;const s=(j=Ie(n||"").find(k=>k.datasetId))==null?void 0:j.datasetId,{data:o,isLoading:i}=Ee(s),l=o?Object.values(o.columns).map(k=>k.name):[],c=oe(k=>k.executionResult),u=n?c==null?void 0:c.node_results[n]:null,d=u==null?void 0:u.metrics,f=S.useRef(null),[m,y]=S.useState(!1);S.useEffect(()=>{if(!f.current)return;const k=new ResizeObserver(v=>{for(const _ of v)y(_.contentRect.width>450)});return k.observe(f.current),()=>k.disconnect()},[]);const p=la(n||"",{types:["cleaning","feature_selection"],suggestedNodeTypes:["DropMissingColumns"],scope:"column"}),w=k=>{if(k.target_columns&&k.target_columns.length>0){const v=Array.from(new Set([...e.columns,...k.target_columns]));t({...e,columns:v})}},[N,h]=S.useState(""),g=S.useMemo(()=>l.filter(k=>k.toLowerCase().includes(N.toLowerCase())),[l,N]),x=()=>{t({...e,columns:g})},b=()=>{const k=e.columns.filter(v=>!g.includes(v));t({...e,columns:k})};return a.jsxs("div",{ref:f,className:`flex flex-col h-full w-full bg-background ${m?"overflow-hidden":"overflow-y-auto"}`,children:[a.jsxs("div",{className:"shrink-0 p-4 pb-0 space-y-2",children:[!s&&a.jsx("div",{className:"p-2 bg-yellow-50 text-yellow-800 text-xs rounded border border-yellow-200",children:"Connect a dataset node to see available columns."}),i&&!!s&&a.jsx("div",{className:"text-xs text-muted-foreground animate-pulse",children:"Loading schema..."})]}),a.jsxs("div",{className:`flex-1 min-h-0 p-4 gap-4 ${m?"grid grid-cols-2":"flex flex-col"}`,children:[a.jsxs("div",{className:`space-y-4 ${m?"overflow-y-auto pr-2":"shrink-0"}`,children:[p.length>0&&a.jsx("div",{className:"shrink-0",children:a.jsx(Jr,{recommendations:p,onApply:w})}),a.jsxs("div",{className:"space-y-3 p-3 border rounded-md bg-muted/5",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx("label",{className:"text-sm font-medium text-foreground",children:"Missing Value Threshold"}),a.jsxs("p",{className:"text-[10px] text-muted-foreground",children:["Drop columns with >",e.missing_threshold??0,"% missing values"]})]}),a.jsxs("span",{className:"text-sm font-mono font-bold text-primary bg-primary/10 px-2 py-1 rounded",children:[e.missing_threshold??0,"%"]})]}),a.jsx("input",{type:"range",min:"0",max:"100",step:"5",value:e.missing_threshold??0,onChange:k=>t({...e,missing_threshold:parseInt(k.target.value)}),className:"w-full h-2 bg-secondary rounded-lg appearance-none cursor-pointer accent-primary"})]}),d&&d.dropped_columns_count!==void 0&&a.jsxs("div",{className:"p-3 bg-muted/30 rounded-md border border-border",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2 text-sm font-semibold text-primary",children:[a.jsx(Wt,{size:14}),a.jsx("span",{children:"Last Run Results"})]}),a.jsxs("div",{className:"space-y-1 text-xs",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-muted-foreground",children:"Columns Dropped:"}),a.jsx("span",{className:"font-medium text-destructive",children:d.dropped_columns_count})]}),d.dropped_columns&&Array.isArray(d.dropped_columns)&&d.dropped_columns.length>0&&a.jsxs("div",{className:"pt-1 border-t mt-1",children:[a.jsx("span",{className:"text-muted-foreground block mb-1",children:"Dropped Names:"}),a.jsx("div",{className:"flex flex-wrap gap-1",children:d.dropped_columns.map(k=>a.jsx("span",{className:"px-1.5 py-0.5 bg-background border rounded text-[10px] font-mono",children:k},k))})]})]})]})]}),a.jsxs("div",{className:`flex flex-col border rounded-md bg-background shadow-sm overflow-hidden ${m?"min-h-0 flex-1":"h-96 shrink-0"}`,children:[a.jsxs("div",{className:"p-3 border-b bg-muted/5 space-y-3 shrink-0",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("label",{className:"text-sm font-medium",children:"Explicitly Drop Columns"}),a.jsxs("span",{className:"text-xs text-muted-foreground",children:[e.columns.length," selected"]})]}),a.jsx("div",{className:"relative group",children:a.jsx("input",{type:"text",placeholder:"Search columns...",className:"block w-full pl-9 pr-3 py-1.5 text-sm bg-background border rounded-md shadow-sm focus:ring-1 focus:ring-primary focus:border-primary transition-all outline-none",value:N,onChange:k=>h(k.target.value)})}),a.jsxs("div",{className:"flex gap-2 text-xs justify-end",children:[a.jsx("button",{onClick:x,className:"text-primary hover:text-primary/80 font-medium transition-colors",children:"Select All"}),a.jsx("span",{className:"text-border",children:"|"}),a.jsx("button",{onClick:b,className:"text-primary hover:text-primary/80 font-medium transition-colors",children:"Deselect All"})]})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-1",children:l.length>0?g.length>0?a.jsx("div",{className:"space-y-0.5",children:g.map(k=>a.jsxs("label",{className:"flex items-center gap-2 text-sm hover:bg-accent/50 p-2 rounded cursor-pointer transition-colors select-none",children:[a.jsx("input",{type:"checkbox",checked:e.columns.includes(k),onChange:v=>{const _=v.target.checked?[...e.columns,k]:e.columns.filter(M=>M!==k);t({...e,columns:_})},className:"rounded border-gray-300 text-primary focus:ring-primary w-4 h-4"}),a.jsx("span",{className:"truncate font-mono text-xs",title:k,children:k})]},k))}):a.jsxs("div",{className:"text-xs text-muted-foreground text-center py-8",children:['No columns match "',N,'"']}):a.jsx("div",{className:"text-xs text-muted-foreground italic p-8 text-center",children:"No columns available"})})]})]})]})},_R={type:"drop_missing_columns",label:"Drop Columns",category:"Preprocessing",description:"Remove specific columns or those with high missing values.",icon:Gr,inputs:[{id:"in",label:"Data",type:"dataset"}],outputs:[{id:"out",label:"Data",type:"dataset"}],settings:kR,validate:e=>({isValid:e.columns.length>0||e.missing_threshold!==void 0&&e.missing_threshold>0,message:e.columns.length===0&&(!e.missing_threshold||e.missing_threshold===0)?"Select columns or set a threshold":void 0}),getDefaultConfig:()=>({columns:[],missing_threshold:0})},SR=({config:e,onChange:t,nodeId:n})=>{var k;const s=(k=Ie(n||"").find(v=>v.datasetId))==null?void 0:k.datasetId,{data:o,isLoading:i}=Ee(s),l=o?Object.values(o.columns).map(v=>v.name):[],c=oe(v=>v.executionResult),u=n?c==null?void 0:c.node_results[n]:null,d=u==null?void 0:u.metrics,f=S.useRef(null),[m,y]=S.useState(!1);S.useEffect(()=>{if(!f.current)return;const v=new ResizeObserver(_=>{for(const M of _)y(M.contentRect.width>450)});return v.observe(f.current),()=>v.disconnect()},[]);const p=la(n||"",{types:["imputation"],suggestedNodeTypes:["SimpleImputer","KNNImputer","IterativeImputer"],scope:"column"}),w=v=>{if(v.target_columns&&v.target_columns.length>0){const _=Array.from(new Set([...e.columns,...v.target_columns]));t({...e,columns:_})}},[N,h]=S.useState(""),g=S.useMemo(()=>l.filter(v=>v.toLowerCase().includes(N.toLowerCase())),[l,N]),x=()=>{t({...e,columns:g})},b=()=>{const v=e.columns.filter(_=>!g.includes(_));t({...e,columns:v})},j=()=>d?a.jsxs("div",{className:"mt-4 p-3 bg-muted/50 rounded border text-xs",children:[a.jsx("div",{className:"font-medium text-muted-foreground mb-2",children:"Execution Feedback"}),d.fill_values&&a.jsxs("div",{className:"space-y-1",children:[a.jsx("span",{className:"text-muted-foreground block mb-1 font-medium",children:"Imputed Values:"}),a.jsx("div",{className:"grid grid-cols-2 gap-x-4 gap-y-1 max-h-32 overflow-y-auto",children:Object.entries(d.fill_values).map(([v,_])=>a.jsxs("div",{className:"flex justify-between text-[10px]",children:[a.jsxs("span",{className:"truncate max-w-[100px]",title:v,children:[v,":"]}),a.jsx("span",{className:"font-mono",children:typeof _=="number"?_.toFixed(4):String(_)})]},v))})]}),d.missing_counts&&a.jsxs("div",{className:"space-y-1 mt-2",children:[a.jsx("span",{className:"text-muted-foreground block mb-1 font-medium",children:"Missing Values Filled:"}),a.jsx("div",{className:"grid grid-cols-2 gap-x-4 gap-y-1 max-h-32 overflow-y-auto",children:Object.entries(d.missing_counts).map(([v,_])=>a.jsxs("div",{className:"flex justify-between text-[10px]",children:[a.jsxs("span",{className:"truncate max-w-[100px]",title:v,children:[v,":"]}),a.jsx("span",{className:"font-mono",children:String(_)})]},v))}),d.total_missing!==void 0&&a.jsxs("div",{className:"text-[10px] text-muted-foreground mt-1 pt-1 border-t",children:["Total Filled: ",a.jsx("span",{className:"font-mono font-medium",children:d.total_missing})]})]}),!d.fill_values&&!d.missing_counts&&(u==null?void 0:u.status)==="success"&&a.jsx("div",{className:"text-green-600",children:"Imputation completed successfully."})]}):null;return a.jsxs("div",{ref:f,className:`flex flex-col h-full w-full bg-background ${m?"overflow-hidden":"overflow-y-auto"}`,children:[a.jsxs("div",{className:"shrink-0 p-4 pb-0 space-y-2",children:[!s&&a.jsx("div",{className:"p-2 bg-yellow-50 text-yellow-800 text-xs rounded border border-yellow-200",children:"Connect a dataset node to see available columns."}),i&&!!s&&a.jsx("div",{className:"text-xs text-muted-foreground animate-pulse",children:"Loading schema..."})]}),a.jsxs("div",{className:`flex-1 min-h-0 p-4 gap-4 ${m?"grid grid-cols-2":"flex flex-col"}`,children:[a.jsxs("div",{className:`space-y-4 ${m?"overflow-y-auto pr-2":"shrink-0"}`,children:[p.length>0&&a.jsx("div",{className:"shrink-0",children:a.jsx(Jr,{recommendations:p,onApply:w})}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Imputation Method"}),a.jsxs("select",{className:"w-full p-2 border rounded bg-background text-sm",value:e.method||"simple",onChange:v=>t({...e,method:v.target.value}),children:[a.jsx("option",{value:"simple",children:"Simple Imputer (Univariate)"}),a.jsx("option",{value:"knn",children:"KNN Imputer (Multivariate)"}),a.jsx("option",{value:"iterative",children:"Iterative Imputer (MICE)"})]})]}),(e.method==="simple"||!e.method)&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Strategy"}),a.jsxs("select",{className:"w-full p-2 border rounded bg-background text-sm",value:e.strategy,onChange:v=>t({...e,strategy:v.target.value}),children:[a.jsx("option",{value:"mean",children:"Mean (Average)"}),a.jsx("option",{value:"median",children:"Median (Middle Value)"}),a.jsx("option",{value:"most_frequent",children:"Most Frequent (Mode)"}),a.jsx("option",{value:"constant",children:"Constant Value"})]}),a.jsxs("p",{className:"text-[10px] text-muted-foreground mt-1",children:[e.strategy==="mean"&&"Replaces missing values with the mean of the column. (Numeric only)",e.strategy==="median"&&"Replaces missing values with the median. (Robust to outliers)",e.strategy==="most_frequent"&&"Replaces missing with the most common value. (Categorical/Numeric)",e.strategy==="constant"&&"Replaces missing values with a specific value."]})]}),e.strategy==="constant"&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Fill Value"}),a.jsx("input",{type:"text",className:"w-full p-2 border rounded bg-background text-sm",value:e.fill_value||"",onChange:v=>t({...e,fill_value:v.target.value}),placeholder:"Enter value..."})]})]}),e.method==="knn"&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Number of Neighbors"}),a.jsx("input",{type:"number",min:"1",className:"w-full p-2 border rounded bg-background text-sm",value:e.n_neighbors||5,onChange:v=>t({...e,n_neighbors:parseInt(v.target.value)})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Weights"}),a.jsxs("select",{className:"w-full p-2 border rounded bg-background text-sm",value:e.weights||"uniform",onChange:v=>t({...e,weights:v.target.value}),children:[a.jsx("option",{value:"uniform",children:"Uniform"}),a.jsx("option",{value:"distance",children:"Distance"})]}),a.jsx("p",{className:"text-[10px] text-muted-foreground mt-1",children:"Uniform: All points in each neighborhood are weighted equally. Distance: Weight points by the inverse of their distance."})]})]}),e.method==="iterative"&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Max Iterations"}),a.jsx("input",{type:"number",min:"1",className:"w-full p-2 border rounded bg-background text-sm",value:e.max_iter||10,onChange:v=>t({...e,max_iter:parseInt(v.target.value)})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Estimator"}),a.jsxs("select",{className:"w-full p-2 border rounded bg-background text-sm",value:e.estimator||"bayesian_ridge",onChange:v=>t({...e,estimator:v.target.value}),children:[a.jsx("option",{value:"bayesian_ridge",children:"Bayesian Ridge"}),a.jsx("option",{value:"decision_tree",children:"Decision Tree"}),a.jsx("option",{value:"extra_trees",children:"Extra Trees"}),a.jsx("option",{value:"knn",children:"KNN"})]}),a.jsx("p",{className:"text-[10px] text-muted-foreground mt-1",children:"The estimator to use for the imputation steps."})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Random State"}),a.jsx("input",{type:"number",className:"w-full p-2 border rounded bg-background text-sm",value:e.random_state??0,onChange:v=>t({...e,random_state:parseInt(v.target.value)})})]})]}),m&&a.jsx(j,{})]}),a.jsxs("div",{className:`flex flex-col h-full min-h-[200px] border rounded-md overflow-hidden ${m?"":"shrink-0"}`,children:[a.jsxs("div",{className:"p-2 border-b bg-muted/30 flex flex-col gap-2",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("span",{className:"text-xs font-medium text-muted-foreground",children:["Target Columns (",e.columns.length,")"]}),a.jsxs("div",{className:"flex gap-1",children:[a.jsx("button",{onClick:x,className:"text-[10px] px-2 py-1 hover:bg-accent rounded",children:"All"}),a.jsx("button",{onClick:b,className:"text-[10px] px-2 py-1 hover:bg-accent rounded",children:"None"})]})]}),a.jsx("input",{type:"text",placeholder:"Search columns...",className:"w-full text-xs p-1.5 border rounded bg-background",value:N,onChange:v=>h(v.target.value)})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-2 space-y-1",children:g.length>0?g.map(v=>a.jsxs("label",{className:"flex items-center justify-between gap-2 text-sm hover:bg-accent/50 p-1.5 rounded cursor-pointer select-none",children:[a.jsxs("div",{className:"flex items-center gap-2 overflow-hidden",children:[a.jsx("input",{type:"checkbox",checked:e.columns.includes(v),onChange:_=>{const M=_.target.checked?[...e.columns,v]:e.columns.filter(P=>P!==v);t({...e,columns:M})},className:"rounded border-gray-300 text-primary focus:ring-primary shrink-0"}),a.jsx("span",{className:"truncate",title:v,children:v})]}),(d==null?void 0:d.missing_counts)&&d.missing_counts[v]!==void 0&&a.jsx("span",{className:"text-[10px] text-muted-foreground font-mono shrink-0 bg-muted px-1.5 py-0.5 rounded",title:`${d.missing_counts[v]} missing values filled`,children:d.missing_counts[v]})]},v)):a.jsx("div",{className:"p-4 text-center text-xs text-muted-foreground",children:l.length===0?"No columns available":"No matches found"})})]}),!m&&a.jsx(j,{})]})]})},CR={type:"imputation_node",label:"Imputation",category:"Preprocessing",description:"Fill missing values using Simple, KNN, or Iterative strategies.",icon:a3,inputs:[{id:"in",label:"Data",type:"dataset"}],outputs:[{id:"out",label:"Cleaned Data",type:"dataset"}],settings:SR,validate:e=>e.columns.length===0?{isValid:!1,message:"Select at least one column"}:(e.method==="simple"||!e.method)&&e.strategy==="constant"&&(e.fill_value===void 0||e.fill_value==="")?{isValid:!1,message:"Fill value is required for Constant strategy"}:{isValid:!0},getDefaultConfig:()=>({columns:[],method:"simple",strategy:"mean",fill_value:0,n_neighbors:5,weights:"uniform",max_iter:10,estimator:"bayesian_ridge",random_state:0})},ER=({config:e,onChange:t,nodeId:n})=>{var x;const s=(x=Ie(n||"").find(b=>b.datasetId))==null?void 0:x.datasetId,{data:o,isLoading:i}=Ee(s),l=oe(b=>b.executionResult),c=n?l==null?void 0:l.node_results[n]:null,u=S.useRef(null),[d,f]=S.useState(!1),[m,y]=S.useState("");S.useEffect(()=>{if(!u.current)return;const b=new ResizeObserver(j=>{for(const k of j)f(k.contentRect.width>450)});return b.observe(u.current),()=>b.disconnect()},[]);const p=o?Object.values(o.columns).filter(b=>["int","float","number"].some(j=>{var k;return(k=b.dtype)==null?void 0:k.toLowerCase().includes(j)})).map(b=>b.name):[],w=p.filter(b=>b.toLowerCase().includes(m.toLowerCase())),N=()=>{t({...e,columns:w})},h=()=>{const b=e.columns.filter(j=>!w.includes(j));t({...e,columns:b})},g=()=>{if(!c||!c.metrics)return null;const b=c.metrics,j=b.columns;if(!j)return null;const k=()=>{switch(e.method){case"standard":return"Target:   0,   1";case"minmax":return`Target: ${e.feature_range_min??0} to ${e.feature_range_max??1}`;case"robust":return"Target: Median  0, IQR  1";case"maxabs":return"Target: MaxAbs = 1";default:return""}};return a.jsxs("div",{className:"mt-4 p-3 bg-muted/50 rounded border text-xs space-y-2",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("div",{className:"font-medium text-muted-foreground",children:"Scaling Statistics"}),a.jsx("div",{className:"text-[10px] text-primary/80 bg-primary/5 px-1.5 py-0.5 rounded border border-primary/10",title:"Values close to these targets indicate successful scaling.",children:k()})]}),a.jsx("div",{className:"max-h-40 overflow-y-auto bg-background p-2 rounded border space-y-1",children:j.map((v,_)=>{var P,T,C,O,E,z,A;let M="";if(e.method==="standard"){const L=(P=b.mean)==null?void 0:P[_],R=(T=b.scale)==null?void 0:T[_];typeof L=="number"&&(M=`=${L.toFixed(2)}, =${typeof R=="number"?R.toFixed(2):"-"}`)}else if(e.method==="minmax"){const L=(C=b.data_min)==null?void 0:C[_],R=(O=b.data_max)==null?void 0:O[_];typeof L=="number"&&(M=`Min=${L.toFixed(2)}, Max=${typeof R=="number"?R.toFixed(2):"-"}`)}else if(e.method==="robust"){const L=(E=b.center)==null?void 0:E[_],R=(z=b.scale)==null?void 0:z[_];typeof L=="number"&&(M=`Med=${L.toFixed(2)}, IQR=${typeof R=="number"?R.toFixed(2):"-"}`)}else if(e.method==="maxabs"){const L=(A=b.max_abs)==null?void 0:A[_];typeof L=="number"&&(M=`MaxAbs=${L.toFixed(2)}`)}return a.jsxs("div",{className:"flex justify-between items-center border-b border-border/50 last:border-0 pb-1 last:pb-0",children:[a.jsx("span",{className:"truncate max-w-[100px] font-medium",title:v,children:v}),a.jsx("span",{className:"font-mono text-[10px] text-muted-foreground",children:M})]},v)})})]})};return a.jsxs("div",{ref:u,className:`flex flex-col h-full w-full bg-background ${d?"overflow-hidden":"overflow-y-auto"}`,children:[a.jsx("div",{className:"shrink-0 p-4 pb-0 space-y-2",children:!s&&a.jsx("div",{className:"p-2 bg-yellow-50 text-yellow-800 text-xs rounded border border-yellow-200",children:"Connect a dataset node to see available columns."})}),a.jsxs("div",{className:`flex-1 min-h-0 p-4 gap-4 ${d?"grid grid-cols-2":"flex flex-col"}`,children:[a.jsxs("div",{className:`space-y-4 ${d?"overflow-y-auto pr-2":"shrink-0"}`,children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Scaling Method"}),a.jsxs("select",{className:"w-full p-2 border rounded bg-background text-sm",value:e.method,onChange:b=>t({...e,method:b.target.value}),children:[a.jsx("option",{value:"standard",children:"Standard Scaler (Z-Score)"}),a.jsx("option",{value:"minmax",children:"MinMax Scaler (0-1)"}),a.jsx("option",{value:"maxabs",children:"MaxAbs Scaler"}),a.jsx("option",{value:"robust",children:"Robust Scaler (Outlier Safe)"})]}),a.jsxs("p",{className:"text-[10px] text-muted-foreground mt-1",children:[e.method==="standard"&&"Centers data around 0 with unit variance.",e.method==="minmax"&&"Scales data to a fixed range [0, 1].",e.method==="maxabs"&&"Scales data by its maximum absolute value.",e.method==="robust"&&"Scales data using statistics that are robust to outliers."]})]}),e.method==="standard"&&a.jsxs("div",{className:"space-y-2 border-t pt-2",children:[a.jsxs("label",{className:"flex items-center gap-2 text-sm cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:e.with_mean??!0,onChange:b=>t({...e,with_mean:b.target.checked}),className:"rounded border-gray-300 text-primary focus:ring-primary"}),a.jsx("span",{children:"Center Data (with_mean)"})]}),a.jsxs("label",{className:"flex items-center gap-2 text-sm cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:e.with_std??!0,onChange:b=>t({...e,with_std:b.target.checked}),className:"rounded border-gray-300 text-primary focus:ring-primary"}),a.jsx("span",{children:"Scale Variance (with_std)"})]})]}),e.method==="minmax"&&a.jsxs("div",{className:"space-y-2 border-t pt-2",children:[a.jsx("label",{className:"block text-sm font-medium",children:"Feature Range"}),a.jsxs("div",{className:"flex gap-2 items-center",children:[a.jsx("input",{type:"number",className:"w-full p-2 border rounded bg-background text-sm",placeholder:"Min (0)",value:e.feature_range_min??0,onChange:b=>t({...e,feature_range_min:parseFloat(b.target.value)})}),a.jsx("span",{className:"text-muted-foreground",children:"-"}),a.jsx("input",{type:"number",className:"w-full p-2 border rounded bg-background text-sm",placeholder:"Max (1)",value:e.feature_range_max??1,onChange:b=>t({...e,feature_range_max:parseFloat(b.target.value)})})]})]}),e.method==="robust"&&a.jsxs("div",{className:"space-y-2 border-t pt-2",children:[a.jsx("label",{className:"block text-sm font-medium",children:"Quantile Range"}),a.jsxs("div",{className:"flex gap-2 items-center",children:[a.jsx("input",{type:"number",className:"w-full p-2 border rounded bg-background text-sm",placeholder:"Min (25.0)",value:e.quantile_range_min??25,onChange:b=>t({...e,quantile_range_min:parseFloat(b.target.value)})}),a.jsx("span",{className:"text-muted-foreground",children:"-"}),a.jsx("input",{type:"number",className:"w-full p-2 border rounded bg-background text-sm",placeholder:"Max (75.0)",value:e.quantile_range_max??75,onChange:b=>t({...e,quantile_range_max:parseFloat(b.target.value)})})]}),a.jsxs("div",{className:"space-y-2 mt-2",children:[a.jsxs("label",{className:"flex items-center gap-2 text-sm cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:e.with_centering??!0,onChange:b=>t({...e,with_centering:b.target.checked}),className:"rounded border-gray-300 text-primary focus:ring-primary"}),a.jsx("span",{children:"Center Data (Median)"})]}),a.jsxs("label",{className:"flex items-center gap-2 text-sm cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:e.with_scaling??!0,onChange:b=>t({...e,with_scaling:b.target.checked}),className:"rounded border-gray-300 text-primary focus:ring-primary"}),a.jsx("span",{children:"Scale Data (IQR)"})]})]})]}),d&&a.jsx(g,{})]}),a.jsxs("div",{className:`flex flex-col h-full min-h-[200px] border rounded-md overflow-hidden ${d?"":"shrink-0"}`,children:[a.jsxs("div",{className:"p-2 border-b bg-muted/30 flex flex-col gap-2",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("span",{className:"text-xs font-medium text-muted-foreground",children:["Numeric Columns (",e.columns.length,")"]}),a.jsxs("div",{className:"flex gap-1",children:[a.jsx("button",{onClick:N,className:"text-[10px] px-2 py-1 hover:bg-accent rounded",children:"All"}),a.jsx("button",{onClick:h,className:"text-[10px] px-2 py-1 hover:bg-accent rounded",children:"None"})]})]}),a.jsx("input",{type:"text",placeholder:"Search columns...",className:"w-full text-xs p-1.5 border rounded bg-background",value:m,onChange:b=>y(b.target.value)})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-2 space-y-1",children:w.length>0?w.map(b=>a.jsxs("label",{className:"flex items-center gap-2 text-sm hover:bg-accent/50 p-1.5 rounded cursor-pointer select-none",children:[a.jsx("input",{type:"checkbox",checked:e.columns.includes(b),onChange:j=>{const k=j.target.checked?[...e.columns,b]:e.columns.filter(v=>v!==b);t({...e,columns:k})},className:"rounded border-gray-300 text-primary focus:ring-primary"}),a.jsx("span",{className:"truncate",title:b,children:b})]},b)):a.jsx("div",{className:"text-xs text-muted-foreground italic p-4 text-center",children:i?"Loading schema...":p.length===0?"No numeric columns found":"No matches found"})})]}),!d&&a.jsx(g,{})]})]})},RR={type:"scale_numeric_features",label:"Scaling",category:"Preprocessing",description:"Scale numeric features to a standard range.",icon:u3,inputs:[{id:"in",label:"Data",type:"dataset"}],outputs:[{id:"out",label:"Scaled Data",type:"dataset"}],settings:ER,validate:e=>({isValid:e.columns.length>0,message:e.columns.length===0?"Select at least one column":void 0}),getDefaultConfig:()=>({columns:[],method:"standard"})};function eb(){const[e,t]=S.useState(null),[n,r]=S.useState({width:0,height:0}),s=S.useCallback(o=>{if(!o||o.length===0)return;const{width:i,height:l}=o[0].contentRect;r({width:i,height:l})},[]);return S.useEffect(()=>{if(!e)return;const o=new ResizeObserver(s);return o.observe(e),()=>o.disconnect()},[e,s]),[t,n]}const TR=({text:e})=>a.jsxs("div",{className:"group relative flex items-center",children:[a.jsx(jv,{className:"w-3 h-3 text-gray-400 cursor-help"}),a.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 hidden group-hover:block w-48 p-2 bg-gray-900 text-white text-xs rounded shadow-lg z-50",children:[e,a.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 border-4 border-transparent border-t-gray-900"})]})]}),MR=({isOpen:e,onClose:t,modelType:n,onSelect:r})=>{const[s,o]=S.useState(n),[i,l]=S.useState([]),[c,u]=S.useState(!1),[d,f]=S.useState(null);S.useEffect(()=>{e&&o(n)},[e,n]);const m=S.useCallback(()=>{s&&(u(!0),f(null),on.getTuningJobsForModel(s).then(y=>{l(y||[])}).catch(y=>{console.error("Failed to fetch jobs",y),f("Failed to load history.")}).finally(()=>u(!1)))},[s]);return S.useEffect(()=>{e&&m()},[e,m]),e?a.jsxs("div",{className:"fixed inset-0 z-[100] flex justify-center items-center p-4",children:[a.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:t}),a.jsxs("div",{className:"relative w-full max-w-2xl max-h-[85vh] bg-white dark:bg-gray-800 shadow-2xl rounded-xl flex flex-col border border-gray-200 dark:border-gray-700 overflow-hidden animate-in fade-in zoom-in duration-200",children:[a.jsxs("div",{className:"p-4 border-b border-gray-100 dark:border-gray-700 flex justify-between items-center bg-gray-50/50 dark:bg-gray-800/50",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg",children:a.jsx(Wt,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"Best Parameters History"}),a.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[a.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Select parameters for:"}),a.jsxs("select",{value:s,onChange:y=>o(y.target.value),className:"text-xs border border-gray-200 dark:border-gray-700 rounded px-2 py-0.5 bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 focus:ring-1 focus:ring-blue-500 outline-none",children:[a.jsx("option",{value:"random_forest_classifier",children:"Random Forest Classifier"}),a.jsx("option",{value:"logistic_regression",children:"Logistic Regression"}),a.jsx("option",{value:"ridge_regression",children:"Ridge Regression"}),a.jsx("option",{value:"random_forest_regressor",children:"Random Forest Regressor"})]})]})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:m,className:"p-2 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-700 text-gray-500 transition-colors",title:"Refresh",children:a.jsx(Jl,{className:`w-4 h-4 ${c?"animate-spin":""}`})}),a.jsx("button",{onClick:t,className:"p-2 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-700 text-gray-500 transition-colors",children:a.jsx(or,{className:"w-4 h-4"})})]})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-3 bg-gray-50/30 dark:bg-gray-900/30",children:c?a.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-gray-400",children:[a.jsx(Ar,{className:"w-8 h-8 animate-spin mb-2 text-blue-500"}),a.jsx("p",{className:"text-sm",children:"Loading history..."})]}):d?a.jsxs("div",{className:"text-center py-12 text-red-500 bg-red-50 dark:bg-red-900/10 rounded-lg border border-red-100 dark:border-red-900/20",children:[a.jsx(aa,{className:"w-8 h-8 mx-auto mb-2"}),a.jsx("p",{className:"text-sm",children:d}),a.jsx("button",{onClick:m,className:"mt-2 text-xs underline hover:text-red-600",children:"Try Again"})]}):i.length===0?a.jsxs("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400 bg-white dark:bg-gray-800 rounded-lg border border-dashed border-gray-300 dark:border-gray-700",children:[a.jsx(Ao,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),a.jsx("p",{className:"text-sm",children:"No completed tuning jobs found."}),a.jsx("p",{className:"text-xs opacity-70 mt-1",children:"Run a tuning job to see results here."})]}):i.map(y=>{var p,w;return a.jsxs("div",{className:"group bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl p-4 hover:shadow-md hover:border-blue-200 dark:hover:border-blue-800 transition-all",children:[a.jsxs("div",{className:"flex justify-between items-start mb-3",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("span",{className:"text-xs font-mono bg-gray-100 dark:bg-gray-700 px-2 py-0.5 rounded text-gray-600 dark:text-gray-300",children:["#",y.job_id.slice(0,8)]}),a.jsx("span",{className:"text-xs text-gray-400",children:y.end_time?new Date(y.end_time).toLocaleString():"Unknown Date"})]}),((p=y.result)==null?void 0:p.best_score)!==void 0&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-xs font-medium text-gray-500",children:"Score:"}),a.jsx("span",{className:"text-sm font-bold text-green-600 dark:text-green-400",children:y.result.best_score.toFixed(4)})]})]}),a.jsxs("button",{onClick:()=>{var N;(N=y.result)!=null&&N.best_params&&(r({params:y.result.best_params,modelType:s}),t())},className:"text-xs bg-blue-600 hover:bg-blue-700 text-white px-3 py-1.5 rounded-md transition-colors flex items-center gap-1 shadow-sm shadow-blue-500/20",children:[a.jsx(wv,{className:"w-3 h-3"}),"Apply"]})]}),a.jsx("div",{className:"bg-gray-50 dark:bg-gray-900/50 rounded-lg p-2.5 border border-gray-100 dark:border-gray-800",children:a.jsx("code",{className:"text-[10px] text-gray-600 dark:text-gray-300 font-mono break-all",children:JSON.stringify(((w=y.result)==null?void 0:w.best_params)||{},null,2)})})]},y.job_id)})})]})]}):null},PR=({value:e,type:t,onChange:n,step:r,min:s,max:o})=>{const[i,l]=S.useState("");S.useEffect(()=>{l(e===null?"None":(e==null?void 0:e.toString())??"")},[e]);const c=()=>{const u=i.trim();if(u.toLowerCase()==="none"){n(null);return}if(t==="number"){if(u==="")return;const d=Number(u);isNaN(d)?l(e===null?"None":(e==null?void 0:e.toString())??""):n(d)}else t==="boolean"?u.toLowerCase()==="true"?n(!0):u.toLowerCase()==="false"?n(!1):l((e==null?void 0:e.toString())??""):n(u)};return a.jsx("input",{type:"text",value:i,onChange:u=>l(u.target.value),onBlur:c,placeholder:e===null?"None":"",className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg p-2 text-sm bg-white dark:bg-gray-800 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",...t==="number"?{step:r,min:s,max:o}:{}})},IR=({config:e,onChange:t,nodeId:n})=>{const[r,s]=S.useState([]),[o,i]=S.useState(!1),[l,c]=S.useState(!1),u=Ie(n||""),d=oe(P=>P.nodes),f=oe(P=>P.edges),y=(P=>{var O,E,z,A;const T=new Set,C=[P];for(;C.length>0;){const L=C.shift();if(T.has(L))continue;T.add(L);const R=d.find(F=>F.id===L);if(!R)continue;if(L!==P){if((O=R.data)!=null&&O.datasetId)return R.data.datasetId;if((E=R.data)!=null&&E.dataset_id)return R.data.dataset_id;if((z=R.data)!=null&&z.config){const F=R.data.config;if(F.datasetId)return F.datasetId;if(F.dataset_id)return F.dataset_id}if((A=R.data)!=null&&A.params){const F=R.data.params;if(F.datasetId)return F.datasetId;if(F.dataset_id)return F.dataset_id}}const I=ur(R,d,f);for(const F of I)C.push(F.id)}})(n||""),{data:p}=Ee(y),w=p?Object.values(p.columns):[],[N,{width:h}]=eb(),g=h>450,[x,b]=S.useState("model"),[j,k]=S.useState(!1);S.useEffect(()=>{e.model_type&&(c(!0),on.getHyperparameters(e.model_type).then(s).catch(console.error).finally(()=>c(!1)))},[e.model_type]),S.useEffect(()=>{var T;const P=(T=u.find(C=>C.target_column))==null?void 0:T.target_column;P&&e.target_column!==P&&t({...e,target_column:P})},[u,e.target_column]);const v=async()=>{if(n)try{const P=Wf(d,f);await on.runPipeline({...P,target_node_id:n,job_type:"training"}),alert("Training job submitted successfully!")}catch(P){console.error("Failed to submit training job:",P),alert("Failed to submit training job. Check console for details.")}},_=a.jsx("div",{className:"space-y-5 animate-in fade-in duration-300",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("label",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Model Configuration"}),a.jsxs("div",{className:"grid gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium mb-1 text-gray-700 dark:text-gray-300",children:"Model Type"}),a.jsxs("div",{className:"relative",children:[a.jsxs("select",{value:e.model_type,onChange:P=>t({...e,model_type:P.target.value,hyperparameters:{}}),className:"w-full appearance-none border border-gray-300 dark:border-gray-600 rounded-lg p-2.5 text-sm bg-white dark:bg-gray-800 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",children:[a.jsx("option",{value:"random_forest_classifier",children:"Random Forest Classifier"}),a.jsx("option",{value:"logistic_regression",children:"Logistic Regression"}),a.jsx("option",{value:"ridge_regression",children:"Ridge Regression"}),a.jsx("option",{value:"random_forest_regressor",children:"Random Forest Regressor"})]}),a.jsx(vt,{className:"absolute right-3 top-3 w-4 h-4 text-gray-400 pointer-events-none"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium mb-1 text-gray-700 dark:text-gray-300",children:"Target Column"}),w.length===0&&a.jsxs("div",{className:"mb-2 p-2 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded text-xs text-yellow-700 dark:text-yellow-400 flex items-center gap-2",children:[a.jsx($f,{className:"w-3 h-3"}),a.jsx("span",{children:"Connect a dataset node to see available columns"})]}),a.jsxs("div",{className:"relative",children:[w.length>0?a.jsxs("select",{value:e.target_column,onChange:P=>t({...e,target_column:P.target.value}),className:"w-full appearance-none border border-gray-300 dark:border-gray-600 rounded-lg p-2.5 text-sm bg-white dark:bg-gray-800 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",children:[a.jsx("option",{value:"",children:"Select target..."}),w.map(P=>a.jsx("option",{value:P.name,children:P.name},P.name))]}):a.jsx("input",{type:"text",value:e.target_column,onChange:P=>t({...e,target_column:P.target.value}),className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg p-2.5 text-sm bg-white dark:bg-gray-800 dark:text-gray-100",placeholder:"e.g., target"}),w.length>0&&a.jsx(vt,{className:"absolute right-3 top-3 w-4 h-4 text-gray-400 pointer-events-none"})]})]})]})]}),a.jsx("div",{className:"border-t border-gray-100 dark:border-gray-700"}),a.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg overflow-hidden",children:[a.jsxs("button",{onClick:()=>k(!j),className:"w-full flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800/50 hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Gl,{className:"w-4 h-4 text-blue-500"}),a.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-200",children:"Cross Validation"})]}),a.jsx(xo,{className:`w-4 h-4 text-gray-400 transition-transform ${j?"rotate-90":""}`})]}),j&&a.jsxs("div",{className:"p-3 space-y-3 bg-white dark:bg-gray-900 border-t border-gray-200 dark:border-gray-700 animate-in slide-in-from-top-2 duration-200",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("input",{type:"checkbox",id:"cv_enabled",checked:e.cv_enabled!==!1,onChange:P=>t({...e,cv_enabled:P.target.checked}),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),a.jsx("label",{htmlFor:"cv_enabled",className:"text-sm text-gray-700 dark:text-gray-300",children:"Enable Cross-Validation"})]}),e.cv_enabled!==!1&&a.jsxs("div",{className:"space-y-3 pl-6 border-l-2 border-gray-100 dark:border-gray-800",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Folds"}),a.jsx("input",{type:"number",value:e.cv_folds??5,onChange:P=>t({...e,cv_folds:Number(P.target.value)}),className:"w-full border border-gray-300 dark:border-gray-600 rounded p-1.5 text-sm bg-white dark:bg-gray-800 dark:text-gray-100",min:2})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Method"}),a.jsxs("select",{value:e.cv_type??"k_fold",onChange:P=>t({...e,cv_type:P.target.value}),className:"w-full border border-gray-300 dark:border-gray-600 rounded p-1.5 text-sm bg-white dark:bg-gray-800 dark:text-gray-100",children:[a.jsx("option",{value:"k_fold",children:"K-Fold"}),a.jsx("option",{value:"stratified_k_fold",children:"Stratified"}),a.jsx("option",{value:"time_series_split",children:"Time Series"}),a.jsx("option",{value:"shuffle_split",children:"Shuffle Split"})]})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",id:"cv_shuffle",checked:e.cv_shuffle!==!1,onChange:P=>t({...e,cv_shuffle:P.target.checked}),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),a.jsx("label",{htmlFor:"cv_shuffle",className:"text-xs text-gray-600 dark:text-gray-400",children:"Shuffle Data"})]})]})]})]})]})}),M=()=>{const P=Object.keys(e.hyperparameters).length>0,T=C=>{if(C){const O={};r.forEach(E=>{O[E.name]=E.default}),t({...e,hyperparameters:O})}else t({...e,hyperparameters:{}})};return a.jsxs("div",{className:"space-y-4 animate-in fade-in duration-300",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("h4",{className:"text-sm font-medium text-gray-900 dark:text-gray-100 flex items-center gap-2",children:[a.jsx(Ff,{className:"w-4 h-4 text-blue-500"}),"Hyperparameters"]}),a.jsx("div",{className:"flex items-center gap-2",children:a.jsxs("label",{className:"text-xs text-gray-500 dark:text-gray-400 flex items-center gap-2 cursor-pointer select-none",children:[a.jsx("input",{type:"checkbox",checked:P,onChange:C=>T(C.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),"Customize"]})})]}),P?a.jsxs("div",{className:"space-y-3",children:[a.jsx("div",{className:"flex justify-end mb-2",children:a.jsxs("button",{onClick:()=>i(!0),className:"text-xs flex items-center gap-1.5 px-2 py-1 text-purple-600 dark:text-purple-400 hover:bg-purple-50 dark:hover:bg-purple-900/20 rounded transition-colors",children:[a.jsx(_p,{className:"w-3 h-3"}),"Load Best"]})}),l?a.jsx("div",{className:"flex justify-center py-4",children:a.jsx(Ar,{className:"w-5 h-5 animate-spin text-blue-500"})}):r.map(C=>{var O;return a.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800/50 border border-gray-200 dark:border-gray-700 rounded-lg p-3",children:[a.jsxs("div",{className:"flex justify-between items-center mb-2",children:[a.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300",children:C.label}),C.description&&a.jsx(TR,{text:C.description})]}),C.type==="select"?a.jsx("select",{value:e.hyperparameters[C.name]??C.default,onChange:E=>t({...e,hyperparameters:{...e.hyperparameters,[C.name]:E.target.value}}),className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg p-2 text-sm bg-white dark:bg-gray-800 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",children:(O=C.options)==null?void 0:O.map(E=>a.jsx("option",{value:E.value,children:E.label},E.value))}):a.jsx(PR,{type:C.type,value:e.hyperparameters[C.name]??C.default,onChange:E=>t({...e,hyperparameters:{...e.hyperparameters,[C.name]:E}}),step:C.step,min:C.min,max:C.max})]},C.name)}),r.length===0&&!l&&a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 italic text-center py-4",children:"No parameters available."})]}):a.jsxs("div",{className:"text-center py-8 bg-gray-50 dark:bg-gray-900/50 rounded-lg border border-dashed border-gray-200 dark:border-gray-700",children:[a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Using default hyperparameters."}),a.jsxs("button",{onClick:()=>i(!0),className:"mt-3 text-xs flex items-center gap-1.5 px-3 py-1.5 mx-auto bg-purple-50 dark:bg-purple-900/20 text-purple-600 dark:text-purple-400 rounded-md border border-purple-200 dark:border-purple-800 hover:bg-purple-100 dark:hover:bg-purple-900/40 transition-colors shadow-sm",children:[a.jsx(_p,{className:"w-3 h-3"}),"Load Best Params"]})]})]})};return a.jsxs("div",{className:"flex flex-col h-full",ref:N,children:[a.jsx(MR,{isOpen:o,onClose:()=>i(!1),modelType:e.model_type,onSelect:P=>{P.modelType&&P.modelType!==e.model_type?t({...e,model_type:P.modelType,hyperparameters:P.params}):t({...e,hyperparameters:P.params})}}),!g&&a.jsxs("div",{className:"flex border-b border-gray-200 dark:border-gray-700 mb-4",children:[a.jsx("button",{className:`flex-1 py-2.5 text-xs font-medium text-center border-b-2 transition-colors ${x==="model"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700"}`,onClick:()=>b("model"),children:"Configuration"}),a.jsx("button",{className:`flex-1 py-2.5 text-xs font-medium text-center border-b-2 transition-colors ${x==="params"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700"}`,onClick:()=>b("params"),children:"Hyperparameters"})]}),a.jsx("div",{className:"flex-1 overflow-y-auto px-1 pb-4 custom-scrollbar",children:g?a.jsxs("div",{className:"grid grid-cols-2 gap-6 h-full",children:[a.jsx("div",{className:"overflow-y-auto pr-2",children:_}),a.jsx("div",{className:"overflow-y-auto pl-2 border-l border-gray-100 dark:border-gray-800",children:a.jsx(M,{})})]}):a.jsxs(a.Fragment,{children:[x==="model"&&_,x==="params"&&a.jsx(M,{})]})}),a.jsx("div",{className:"pt-4 mt-auto border-t border-gray-100 dark:border-gray-700 flex flex-col gap-3 items-center",children:a.jsxs("button",{onClick:v,className:"w-full max-w-xs flex items-center justify-center gap-2 px-6 py-2.5 text-white rounded-lg shadow-lg shadow-purple-500/20 transition-all hover:shadow-purple-500/30 hover:-translate-y-0.5 active:translate-y-0",style:{background:"linear-gradient(135deg, #8b5cf6 0%, #6d28d9 100%)"},children:[a.jsx(zf,{className:"w-4 h-4 fill-current"}),a.jsx("span",{className:"text-sm font-semibold",children:"Train Model"})]})})]})},DR={type:"model_training",label:"Model Training",category:"Modeling",description:"Train a machine learning model.",icon:F4,inputs:[{id:"in",label:"Training Data",type:"dataset"}],outputs:[{id:"model",label:"Trained Model",type:"model"}],settings:IR,validate:e=>e.target_column?{isValid:!0}:{isValid:!1,message:"Target column is required."},getDefaultConfig:()=>({target_column:"",model_type:"random_forest_classifier",hyperparameters:{},cv_enabled:!0,cv_folds:5,cv_type:"k_fold",cv_shuffle:!0,cv_random_state:42})},AR=({text:e})=>a.jsxs("div",{className:"group relative flex items-center",children:[a.jsx(jv,{className:"w-3 h-3 text-gray-400 cursor-help"}),a.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 hidden group-hover:block w-48 p-2 bg-gray-900 text-white text-xs rounded shadow-lg z-50",children:[e,a.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 border-4 border-transparent border-t-gray-900"})]})]}),OR=({def:e,value:t,onChange:n})=>{const[r,s]=S.useState(""),[o,i]=S.useState(null);S.useEffect(()=>{s(Array.isArray(t)?t.map(u=>u===null?"None":u).join(", "):"")},[t]);const l=u=>{if(!u.trim())return[];const d=u.split(",").map(m=>m.trim()).filter(m=>m!==""),f=[];for(const m of d){if(m.toLowerCase()==="none"){f.push(null);continue}if(e.type==="number"){const y=Number(m);if(isNaN(y))throw new Error(`"${m}" is not a valid number`);f.push(y)}else if(e.type==="boolean"){const y=m.toLowerCase();if(y==="true")f.push(!0);else if(y==="false")f.push(!1);else throw new Error(`"${m}" must be true or false`)}else f.push(m)}return f},c=()=>{try{const u=l(r);i(null),JSON.stringify(u)!==JSON.stringify(t)&&n(u)}catch(u){i(u.message)}};return a.jsxs("div",{className:"space-y-1",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("label",{className:"text-xs font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:[e.label,e.description&&a.jsx(AR,{text:e.description})]}),a.jsx("span",{className:"text-[10px] text-gray-400 uppercase",children:e.type})]}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"text",className:`w-full border rounded px-2 py-1.5 text-sm font-mono bg-white dark:bg-gray-900 dark:text-gray-100 outline-none transition-all ${o?"border-red-500 focus:ring-2 focus:ring-red-500/20":"border-gray-300 dark:border-gray-600 focus:ring-2 focus:ring-purple-500/20 focus:border-purple-500"}`,placeholder:e.type==="select"?"e.g. lbfgs, liblinear":"e.g. 10, 50, 100",value:r,onChange:u=>{s(u.target.value),i(null)},onBlur:c}),e.type==="select"&&e.options&&a.jsx("div",{className:"mt-1 flex flex-wrap gap-1",children:e.options.map(u=>a.jsx("button",{onClick:()=>{const d=l(r),m=d.includes(u.value)?d.filter(y=>y!==u.value):[...d,u.value];n(m)},className:`text-[10px] px-1.5 py-0.5 rounded border transition-colors ${t.includes(u.value)?"bg-purple-100 border-purple-200 text-purple-700 dark:bg-purple-900/30 dark:border-purple-800 dark:text-purple-300":"bg-gray-50 border-gray-200 text-gray-600 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:u.label},u.value))})]}),o&&a.jsxs("p",{className:"text-[10px] text-red-500 flex items-center gap-1",children:[a.jsx(aa,{className:"w-3 h-3"}),o]})]})},LR=({isOpen:e,onClose:t,modelType:n})=>{const[r,s]=S.useState(n),[o,i]=S.useState([]),[l,c]=S.useState(!1),[u,d]=S.useState(null);S.useEffect(()=>{e&&s(n)},[e,n]);const f=S.useCallback(()=>{r&&(c(!0),d(null),on.getTuningJobsForModel(r).then(m=>{console.log("Fetched jobs for",r,m),i(m||[])}).catch(m=>{console.error("Failed to fetch jobs",m),d("Failed to load history.")}).finally(()=>c(!1)))},[r]);return S.useEffect(()=>{e&&f()},[e,f]),e?a.jsxs("div",{className:"fixed inset-0 z-[100] flex justify-center items-center p-4",children:[a.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:t}),a.jsxs("div",{className:"relative w-full max-w-2xl max-h-[85vh] bg-white dark:bg-gray-800 shadow-2xl rounded-xl flex flex-col border border-gray-200 dark:border-gray-700 overflow-hidden animate-in fade-in zoom-in duration-200",children:[a.jsxs("div",{className:"p-4 border-b border-gray-100 dark:border-gray-700 flex justify-between items-center bg-gray-50/50 dark:bg-gray-800/50",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900/30 rounded-lg",children:a.jsx(Wt,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"Best Parameters History"}),a.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[a.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"View parameters for:"}),a.jsxs("select",{value:r,onChange:m=>s(m.target.value),className:"text-xs border border-gray-200 dark:border-gray-700 rounded px-2 py-0.5 bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 focus:ring-1 focus:ring-purple-500 outline-none",children:[a.jsx("option",{value:"random_forest_classifier",children:"Random Forest Classifier"}),a.jsx("option",{value:"logistic_regression",children:"Logistic Regression"}),a.jsx("option",{value:"ridge_regression",children:"Ridge Regression"}),a.jsx("option",{value:"random_forest_regressor",children:"Random Forest Regressor"})]})]})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:f,className:"p-2 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-700 text-gray-500 transition-colors",title:"Refresh",children:a.jsx(Jl,{className:`w-4 h-4 ${l?"animate-spin":""}`})}),a.jsx("button",{onClick:t,className:"p-2 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-700 text-gray-500 transition-colors",children:a.jsx(or,{className:"w-4 h-4"})})]})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-3 bg-gray-50/30 dark:bg-gray-900/30",children:l?a.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-gray-400",children:[a.jsx(Ar,{className:"w-8 h-8 animate-spin mb-2 text-purple-500"}),a.jsx("p",{className:"text-sm",children:"Loading history..."})]}):u?a.jsxs("div",{className:"text-center py-12 text-red-500 bg-red-50 dark:bg-red-900/10 rounded-lg border border-red-100 dark:border-red-900/20",children:[a.jsx(aa,{className:"w-8 h-8 mx-auto mb-2"}),a.jsx("p",{className:"text-sm",children:u}),a.jsx("button",{onClick:f,className:"mt-2 text-xs underline hover:text-red-600",children:"Try Again"})]}):o.length===0?a.jsxs("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400 bg-white dark:bg-gray-800 rounded-lg border border-dashed border-gray-300 dark:border-gray-700",children:[a.jsx(Ao,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),a.jsx("p",{className:"text-sm",children:"No completed tuning jobs found."}),a.jsx("p",{className:"text-xs opacity-70 mt-1",children:"Run a tuning job to see results here."})]}):o.map(m=>{var y,p;return a.jsxs("div",{className:"group bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl p-4 hover:shadow-md hover:border-purple-200 dark:hover:border-purple-800 transition-all",children:[a.jsx("div",{className:"flex justify-between items-start mb-3",children:a.jsxs("div",{className:"space-y-1",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("span",{className:"text-xs font-mono bg-gray-100 dark:bg-gray-700 px-2 py-0.5 rounded text-gray-600 dark:text-gray-300",children:["#",m.job_id.slice(0,8)]}),a.jsx("span",{className:"text-xs text-gray-400",children:m.end_time?new Date(m.end_time).toLocaleString():"Unknown Date"})]}),((y=m.result)==null?void 0:y.best_score)!==void 0&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-xs font-medium text-gray-500",children:"Score:"}),a.jsx("span",{className:"text-sm font-bold text-green-600 dark:text-green-400",children:m.result.best_score.toFixed(4)})]})]})}),a.jsx("div",{className:"bg-gray-50 dark:bg-gray-900/50 rounded-lg p-2.5 border border-gray-100 dark:border-gray-800",children:a.jsx("code",{className:"text-[10px] text-gray-600 dark:text-gray-300 font-mono break-all",children:JSON.stringify(((p=m.result)==null?void 0:p.best_params)||{},null,2)})})]},m.job_id)})})]})]}):null},zR=({config:e,onChange:t,nodeId:n})=>{const[r,s]=S.useState([]),[o,i]=S.useState(!1),[l,c]=S.useState(!1),[u,d]=S.useState("config"),[f,m]=S.useState(!1),[y,{width:p}]=eb(),w=p>450,N=Ie(n||""),h=oe(T=>T.nodes),g=oe(T=>T.edges),b=(T=>{var E,z,A,L;const C=new Set,O=[T];for(;O.length>0;){const R=O.shift();if(C.has(R))continue;C.add(R);const I=h.find(V=>V.id===R);if(!I)continue;if(R!==T){if((E=I.data)!=null&&E.datasetId)return I.data.datasetId;if((z=I.data)!=null&&z.dataset_id)return I.data.dataset_id;const V=I.data;if((A=V==null?void 0:V.config)!=null&&A.datasetId)return V.config.datasetId;if((L=V==null?void 0:V.config)!=null&&L.dataset_id)return V.config.dataset_id}const F=ur(I,h,g);for(const V of F)O.push(V.id)}})(n||""),{data:j}=Ee(b),k=j?Object.values(j.columns):[];S.useEffect(()=>{var C;const T=(C=N.find(O=>O.target_column))==null?void 0:C.target_column;T&&e.target_column!==T&&t({...e,target_column:T})},[N,e.target_column]);const v=S.useRef(null);S.useEffect(()=>{(async()=>{const C=e.model_type;if(!C)return;const O=C!==v.current;if(!(!O&&r.length>0)){i(!0);try{const E=await on.getHyperparameters(C);if(s(E),O||Object.keys(e.search_space||{}).length===0){const z=await on.getDefaultSearchSpace(C);t({...e,search_space:z||{}}),v.current=C}}catch(E){console.error("Failed to load model hyperparameters:",E)}finally{i(!1)}}})()},[e.model_type]);const _=async()=>{if(n)try{const T=Wf(h,g);await on.runPipeline({...T,target_node_id:n,job_type:"tuning"}),alert("Tuning job submitted successfully!")}catch(T){console.error("Failed to submit tuning job:",T),alert("Failed to submit tuning job.")}},M=a.jsx("div",{className:"space-y-5 animate-in fade-in duration-300",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("label",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Model Configuration"}),a.jsxs("div",{className:"grid gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium mb-1 text-gray-700 dark:text-gray-300",children:"Model Type"}),a.jsxs("div",{className:"relative",children:[a.jsxs("select",{value:e.model_type,onChange:T=>{v.current=null,t({...e,model_type:T.target.value,search_space:{}})},className:"w-full appearance-none border border-gray-300 dark:border-gray-600 rounded-lg p-2.5 text-sm bg-white dark:bg-gray-800 dark:text-gray-100 focus:ring-2 focus:ring-purple-500 focus:border-purple-500 outline-none transition-all",children:[a.jsx("option",{value:"random_forest_classifier",children:"Random Forest Classifier"}),a.jsx("option",{value:"logistic_regression",children:"Logistic Regression"}),a.jsx("option",{value:"ridge_regression",children:"Ridge Regression"}),a.jsx("option",{value:"random_forest_regressor",children:"Random Forest Regressor"})]}),a.jsx(vt,{className:"absolute right-3 top-3 w-4 h-4 text-gray-400 pointer-events-none"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium mb-1 text-gray-700 dark:text-gray-300",children:"Target Column"}),k.length===0&&a.jsxs("div",{className:"mb-2 p-2 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded text-xs text-yellow-700 dark:text-yellow-400 flex items-center gap-2",children:[a.jsx($f,{className:"w-3 h-3"}),a.jsx("span",{children:"Connect a dataset node to see available columns"})]}),a.jsxs("div",{className:"relative",children:[k.length>0?a.jsxs("select",{value:e.target_column,onChange:T=>t({...e,target_column:T.target.value}),className:"w-full appearance-none border border-gray-300 dark:border-gray-600 rounded-lg p-2.5 text-sm bg-white dark:bg-gray-800 dark:text-gray-100 focus:ring-2 focus:ring-purple-500 focus:border-purple-500 outline-none transition-all",children:[a.jsx("option",{value:"",children:"Select target..."}),k.map(T=>a.jsx("option",{value:T.name,children:T.name},T.name))]}):a.jsx("input",{type:"text",value:e.target_column,onChange:T=>t({...e,target_column:T.target.value}),className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg p-2.5 text-sm bg-white dark:bg-gray-800 dark:text-gray-100",placeholder:"e.g., target"}),k.length>0&&a.jsx(vt,{className:"absolute right-3 top-3 w-4 h-4 text-gray-400 pointer-events-none"})]})]})]})]}),a.jsx("div",{className:"border-t border-gray-100 dark:border-gray-700"}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("label",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Tuning Strategy"}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{className:"col-span-2",children:[a.jsx("label",{className:"block text-xs font-medium mb-1 text-gray-700 dark:text-gray-300",children:"Search Method"}),a.jsxs("select",{value:e.search_strategy??"random",onChange:T=>t({...e,search_strategy:T.target.value}),className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg p-2 text-sm bg-white dark:bg-gray-800 dark:text-gray-100",children:[a.jsx("option",{value:"random",children:"Random Search"}),a.jsx("option",{value:"grid",children:"Grid Search"}),a.jsx("option",{value:"halving_grid",children:"Successive Halving (Grid)"}),a.jsx("option",{value:"halving_random",children:"Successive Halving (Randomized)"}),a.jsx("option",{value:"optuna",children:"Optuna Search"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium mb-1 text-gray-700 dark:text-gray-300",children:"Metric"}),a.jsxs("select",{value:e.metric,onChange:T=>t({...e,metric:T.target.value}),className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg p-2 text-sm bg-white dark:bg-gray-800 dark:text-gray-100",children:[a.jsx("option",{value:"accuracy",children:"Accuracy"}),a.jsx("option",{value:"f1",children:"F1 Score"}),a.jsx("option",{value:"roc_auc",children:"ROC AUC"}),a.jsx("option",{value:"mse",children:"MSE"}),a.jsx("option",{value:"r2",children:"R2 Score"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium mb-1 text-gray-700 dark:text-gray-300",children:"Trials"}),a.jsx("input",{type:"number",value:e.n_trials,onChange:T=>t({...e,n_trials:Number(T.target.value)}),disabled:["grid","halving_grid"].includes(e.search_strategy),className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg p-2 text-sm bg-white dark:bg-gray-800 dark:text-gray-100 disabled:opacity-50",min:1})]})]})]}),a.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg overflow-hidden",children:[a.jsxs("button",{onClick:()=>m(!f),className:"w-full flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800/50 hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Gl,{className:"w-4 h-4 text-purple-500"}),a.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-200",children:"Cross Validation"})]}),a.jsx(xo,{className:`w-4 h-4 text-gray-400 transition-transform ${f?"rotate-90":""}`})]}),f&&a.jsxs("div",{className:"p-3 space-y-3 bg-white dark:bg-gray-900 border-t border-gray-200 dark:border-gray-700 animate-in slide-in-from-top-2 duration-200",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("input",{type:"checkbox",id:"cv_enabled",checked:e.cv_enabled!==!1,onChange:T=>t({...e,cv_enabled:T.target.checked}),className:"rounded border-gray-300 text-purple-600 focus:ring-purple-500"}),a.jsx("label",{htmlFor:"cv_enabled",className:"text-sm text-gray-700 dark:text-gray-300",children:"Enable Cross-Validation"})]}),e.cv_enabled!==!1&&a.jsxs("div",{className:"space-y-3 pl-6 border-l-2 border-gray-100 dark:border-gray-800",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Folds"}),a.jsx("input",{type:"number",value:e.cv_folds??5,onChange:T=>t({...e,cv_folds:Number(T.target.value)}),className:"w-full border border-gray-300 dark:border-gray-600 rounded p-1.5 text-sm bg-white dark:bg-gray-800 dark:text-gray-100",min:2})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Method"}),a.jsxs("select",{value:e.cv_type??"k_fold",onChange:T=>t({...e,cv_type:T.target.value}),className:"w-full border border-gray-300 dark:border-gray-600 rounded p-1.5 text-sm bg-white dark:bg-gray-800 dark:text-gray-100",children:[a.jsx("option",{value:"k_fold",children:"K-Fold"}),a.jsx("option",{value:"stratified_k_fold",children:"Stratified"}),a.jsx("option",{value:"time_series_split",children:"Time Series"})]})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",id:"cv_shuffle",checked:e.cv_shuffle!==!1,onChange:T=>t({...e,cv_shuffle:T.target.checked}),className:"rounded border-gray-300 text-purple-600 focus:ring-purple-500"}),a.jsx("label",{htmlFor:"cv_shuffle",className:"text-xs text-gray-600 dark:text-gray-400",children:"Shuffle Data"})]})]})]})]})]})}),P=a.jsxs("div",{className:"space-y-4 animate-in fade-in duration-300",children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("h4",{className:"text-sm font-medium text-gray-900 dark:text-gray-100 flex items-center gap-2",children:[a.jsx(Ff,{className:"w-4 h-4 text-purple-500"}),"Hyperparameters"]})}),o?a.jsx("div",{className:"flex justify-center py-8",children:a.jsx(Ar,{className:"w-6 h-6 animate-spin text-purple-500"})}):a.jsxs("div",{className:"space-y-3",children:[r.map(T=>{var C;return a.jsx("div",{className:"bg-gray-50 dark:bg-gray-800/50 border border-gray-200 dark:border-gray-700 rounded-lg p-3",children:a.jsx(OR,{def:T,value:((C=e.search_space)==null?void 0:C[T.name])||[],onChange:O=>{t({...e,search_space:{...e.search_space,[T.name]:O}})}})},`${e.model_type}-${T.name}`)}),r.length===0&&a.jsx("div",{className:"text-center py-8 text-gray-500 text-sm",children:"No hyperparameters available for this model."})]})]});return a.jsxs("div",{className:"flex flex-col h-full",ref:y,children:[!w&&a.jsxs("div",{className:"flex border-b border-gray-200 dark:border-gray-700 mb-4",children:[a.jsx("button",{className:`flex-1 py-2.5 text-xs font-medium text-center border-b-2 transition-colors ${u==="config"?"border-purple-500 text-purple-600 dark:text-purple-400":"border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700"}`,onClick:()=>d("config"),children:"Configuration"}),a.jsx("button",{className:`flex-1 py-2.5 text-xs font-medium text-center border-b-2 transition-colors ${u==="search_space"?"border-purple-500 text-purple-600 dark:text-purple-400":"border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700"}`,onClick:()=>d("search_space"),children:"Search Space"})]}),a.jsx("div",{className:"flex-1 overflow-y-auto px-1 pb-4 custom-scrollbar",children:w?a.jsxs("div",{className:"grid grid-cols-2 gap-6 h-full",children:[a.jsx("div",{className:"overflow-y-auto pr-2",children:M}),a.jsx("div",{className:"overflow-y-auto pl-2 border-l border-gray-100 dark:border-gray-800",children:P})]}):a.jsxs(a.Fragment,{children:[u==="config"&&M,u==="search_space"&&P]})}),a.jsxs("div",{className:"pt-4 mt-auto border-t border-gray-100 dark:border-gray-700 flex flex-col gap-3 items-center",children:[a.jsxs("button",{onClick:_,className:"w-full max-w-xs flex items-center justify-center gap-2 px-6 py-2.5 text-white rounded-lg shadow-lg shadow-purple-500/20 transition-all hover:shadow-purple-500/30 hover:-translate-y-0.5 active:translate-y-0",style:{background:"linear-gradient(135deg, #8b5cf6 0%, #6d28d9 100%)"},children:[a.jsx(zf,{className:"w-4 h-4 fill-current"}),a.jsx("span",{className:"text-sm font-semibold",children:"Run Tuning Job"})]}),a.jsxs("button",{onClick:()=>c(!0),className:"text-xs text-gray-500 hover:text-purple-600 dark:text-gray-400 dark:hover:text-purple-400 flex items-center gap-1.5 transition-colors px-3 py-1 rounded-md hover:bg-gray-50 dark:hover:bg-gray-800",children:[a.jsx(Wt,{className:"w-3.5 h-3.5"}),"View Best Parameters History"]})]}),a.jsx(LR,{isOpen:l,onClose:()=>c(!1),modelType:e.model_type})]})},FR={type:"hyperparameter_tuning",label:"Hyperparameter Tuning",category:"Modeling",description:"Optimize model hyperparameters.",icon:f3,inputs:[{id:"in",label:"Training Data",type:"dataset"}],outputs:[{id:"model",label:"Best Model",type:"model"}],settings:zR,validate:e=>e.target_column?{isValid:!0}:{isValid:!1,message:"Target column is required."},getDefaultConfig:()=>({target_column:"",model_type:"random_forest_classifier",n_trials:10,metric:"accuracy",search_strategy:"random",cv_enabled:!0,cv_folds:5,cv_type:"k_fold",cv_shuffle:!0,cv_random_state:42,random_state:42,search_space:{}})},$R=({config:e,onChange:t})=>{const n=["train","validation","test"],r=["accuracy","precision","recall","f1","roc_auc","mse","rmse","r2"],s=i=>{const l=e.splits.includes(i)?e.splits.filter(c=>c!==i):[...e.splits,i];t({...e,splits:l})},o=i=>{const l=e.metrics.includes(i)?e.metrics.filter(c=>c!==i):[...e.metrics,i];t({...e,metrics:l})};return a.jsxs("div",{className:"p-4 space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"Evaluation Splits"}),a.jsx("div",{className:"space-y-2",children:n.map(i=>a.jsxs("label",{className:"flex items-center gap-2 text-sm cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:e.splits.includes(i),onChange:()=>s(i),className:"rounded border-gray-300 text-primary focus:ring-primary"}),a.jsxs("span",{className:"capitalize",children:[i," Set"]})]},i))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"Metrics to Track"}),a.jsx("div",{className:"grid grid-cols-2 gap-2",children:r.map(i=>a.jsxs("label",{className:"flex items-center gap-2 text-sm cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:e.metrics.includes(i),onChange:()=>o(i),className:"rounded border-gray-300 text-primary focus:ring-primary"}),a.jsx("span",{className:"uppercase",children:i.replace("_"," ")})]},i))})]})]})},VR={type:"model_evaluation",label:"Model Evaluation",category:"Evaluation",description:"Evaluate model performance on specific splits.",icon:Gl,inputs:[{id:"model",label:"Trained Model",type:"model"}],outputs:[{id:"report",label:"Evaluation Report",type:"report"}],settings:$R,validate:e=>({isValid:e.splits.length>0,message:e.splits.length===0?"Select at least one split to evaluate":void 0}),getDefaultConfig:()=>({splits:["validation"],metrics:["accuracy","f1"]})},HR=({config:e,onChange:t,nodeId:n})=>{var b;const r=Ie(n||""),s=oe(j=>j.nodes),o=oe(j=>j.edges),i=oe(j=>j.executionResult),c=(j=>{var _;const k=new Set,v=[j];for(;v.length>0;){const M=v.shift();if(k.has(M))continue;k.add(M);const P=s.find(C=>C.id===M);if(!P)continue;if(M!==j&&((_=P.data)!=null&&_.datasetId))return P.data.datasetId;const T=ur(P,s,o);for(const C of T)v.push(C.id)}})(n||""),u=(b=r.find(j=>j.target_column))==null?void 0:b.target_column;S.useEffect(()=>{const j={};c&&e.datasetId!==c&&(j.datasetId=c),u&&e.target_column!==u&&(j.target_column=u),Object.keys(j).length>0&&t({...e,...j})},[c,u,e.datasetId,e.target_column,t]);const{data:d,isLoading:f}=Ee(c||e.datasetId),m=d?Object.values(d.columns).map(j=>j.name):[],y=S.useRef(null),[p,w]=S.useState(!1);S.useEffect(()=>{if(!y.current)return;const j=new ResizeObserver(k=>{for(const v of k)w(v.contentRect.width>450)});return j.observe(y.current),()=>j.disconnect()},[]);const N=()=>{const j=e.problem_type||"auto";return j==="classification"?[{value:"f_classif",label:"ANOVA F-value"},{value:"mutual_info_classif",label:"Mutual Information"},{value:"chi2",label:"Chi-squared"}]:j==="regression"?[{value:"f_regression",label:"F-value"},{value:"mutual_info_regression",label:"Mutual Information"},{value:"r_regression",label:"Pearson Correlation"}]:[{value:"f_classif",label:"ANOVA F-value (Classif)"},{value:"f_regression",label:"F-value (Reg)"},{value:"mutual_info_classif",label:"Mutual Info (Classif)"},{value:"mutual_info_regression",label:"Mutual Info (Reg)"}]},h=["select_k_best","select_percentile","select_fpr","select_fdr","select_fwe","generic_univariate_select"].includes(e.method),g=["select_from_model","rfe"].includes(e.method),x=()=>{const j=i==null?void 0:i.node_results[n||""];if(!j)return null;const k=j.metrics||{},v=k.dropped_columns,_=k.feature_scores,M=k.p_values,P=k.feature_importances,T=k.variances,C=k.ranking;return a.jsxs("div",{className:"mt-4 p-3 bg-muted/50 rounded border text-xs space-y-3",children:[a.jsx("div",{className:"font-medium text-muted-foreground",children:"Execution Feedback"}),j.error&&a.jsx("div",{className:"p-2 bg-destructive/10 text-destructive rounded border border-destructive/20",children:j.error}),v&&v.length>0?a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-muted-foreground mb-1 flex justify-between items-center",children:a.jsxs("span",{children:["Dropped Columns (",v.length,")"]})}),a.jsx("div",{className:"max-h-40 overflow-y-auto bg-background p-2 rounded border space-y-1",children:v.map(O=>{const E=_==null?void 0:_[O],z=M==null?void 0:M[O],A=P==null?void 0:P[O],L=T==null?void 0:T[O],R=C==null?void 0:C[O];return a.jsxs("div",{className:"flex justify-between items-center border-b border-border/50 last:border-0 pb-1 last:pb-0",children:[a.jsx("span",{className:"truncate max-w-[120px] font-medium text-destructive",title:O,children:O}),a.jsxs("div",{className:"flex flex-col items-end text-[10px] text-muted-foreground",children:[E!==void 0&&a.jsxs("span",{children:["Score: ",E.toFixed(4)]}),z!==void 0&&a.jsxs("span",{children:["p-val: ",z.toExponential(2)]}),A!==void 0&&a.jsxs("span",{children:["Imp: ",A.toFixed(4)]}),L!==void 0&&a.jsxs("span",{children:["Var: ",L.toFixed(4)]}),R!==void 0&&a.jsxs("span",{children:["Rank: ",R]})]})]},O)})})]}):j.status==="success"&&a.jsxs("div",{className:"text-green-600 text-[10px] space-y-1",children:[a.jsx("div",{children:"No columns were dropped."}),e.method==="variance_threshold"&&a.jsxs("div",{className:"text-muted-foreground italic",children:["All features have variance > ",e.threshold??0,". Try increasing the threshold."]}),e.method==="select_k_best"&&a.jsxs("div",{className:"text-muted-foreground italic",children:["K (",e.k??10,") is likely larger than or equal to the number of features. Try reducing K."]}),e.method==="correlation_threshold"&&a.jsxs("div",{className:"text-muted-foreground italic",children:["No feature pairs found with correlation > ",e.threshold??.95,"."]})]}),(_||P)&&a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-muted-foreground mb-1",children:"Top 5 Features"}),a.jsx("div",{className:"max-h-32 overflow-y-auto bg-background p-2 rounded border space-y-1",children:Object.entries(_||P||{}).sort(([,O],[,E])=>E-O).slice(0,5).map(([O,E])=>a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"truncate max-w-[120px]",title:O,children:O}),a.jsx("span",{className:"font-mono text-[10px]",children:E.toFixed(4)})]},O))})]})]})};return a.jsxs("div",{ref:y,className:`flex flex-col h-full w-full bg-background ${p?"overflow-hidden":"overflow-y-auto"}`,children:[a.jsxs("div",{className:"shrink-0 p-4 pb-0 space-y-2",children:[!c&&a.jsx("div",{className:"p-2 bg-yellow-50 text-yellow-800 text-xs rounded border border-yellow-200",children:"Connect a dataset node to configure."}),f&&!!c&&a.jsx("div",{className:"text-xs text-muted-foreground animate-pulse",children:"Loading schema..."})]}),a.jsxs("div",{className:`flex-1 min-h-0 p-4 gap-4 ${p?"grid grid-cols-2":"flex flex-col"}`,children:[a.jsxs("div",{className:`space-y-4 ${p?"overflow-y-auto pr-2":"shrink-0"}`,children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:"Selection Method"}),a.jsxs("select",{className:"w-full p-2 border rounded bg-background text-sm",value:e.method,onChange:j=>t({...e,method:j.target.value}),children:[a.jsxs("optgroup",{label:"Simple",children:[a.jsx("option",{value:"variance_threshold",children:"Variance Threshold"}),a.jsx("option",{value:"correlation_threshold",children:"Correlation Threshold"})]}),a.jsxs("optgroup",{label:"Univariate",children:[a.jsx("option",{value:"select_k_best",children:"Select K Best"}),a.jsx("option",{value:"select_percentile",children:"Select Percentile"}),a.jsx("option",{value:"select_fpr",children:"False Positive Rate (FPR)"}),a.jsx("option",{value:"select_fdr",children:"False Discovery Rate (FDR)"}),a.jsx("option",{value:"select_fwe",children:"Family-wise Error (FWE)"}),a.jsx("option",{value:"generic_univariate_select",children:"Generic Univariate"})]}),a.jsxs("optgroup",{label:"Model Based",children:[a.jsx("option",{value:"select_from_model",children:"Select From Model"}),a.jsx("option",{value:"rfe",children:"Recursive Feature Elimination (RFE)"})]})]})]}),e.method!=="variance_threshold"&&e.method!=="correlation_threshold"&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:"Target Column"}),u?a.jsxs("div",{className:"p-2 bg-muted rounded text-sm text-muted-foreground border",children:[u," ",a.jsx("span",{className:"text-xs italic",children:"(Auto-detected)"})]}):a.jsxs("select",{className:"w-full p-2 border rounded bg-background text-sm",value:e.target_column??"",onChange:j=>t({...e,target_column:j.target.value}),children:[a.jsx("option",{value:"",children:"Select Target..."}),m.map(j=>a.jsx("option",{value:j,children:j},j))]}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Required for supervised selection methods."})]}),(h||g)&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:"Problem Type"}),a.jsxs("select",{className:"w-full p-2 border rounded bg-background text-sm",value:e.problem_type??"auto",onChange:j=>t({...e,problem_type:j.target.value}),children:[a.jsx("option",{value:"auto",children:"Auto-detect"}),a.jsx("option",{value:"classification",children:"Classification"}),a.jsx("option",{value:"regression",children:"Regression"})]})]}),p&&a.jsx(x,{})]}),a.jsxs("div",{className:`space-y-4 ${p?"overflow-y-auto pl-2 border-l":"shrink-0 border-t pt-4"}`,children:[a.jsx("h4",{className:"text-xs font-semibold uppercase text-muted-foreground mb-2",children:"Parameters"}),e.method==="variance_threshold"&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:"Threshold"}),a.jsx("input",{type:"number",step:"0.01",className:"w-full p-2 border rounded bg-background text-sm",value:e.threshold??0,onChange:j=>t({...e,threshold:parseFloat(j.target.value)})}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Features with variance lower than this will be removed."})]}),e.method==="correlation_threshold"&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:"Threshold"}),a.jsx("input",{type:"number",step:"0.01",max:"1",min:"0",className:"w-full p-2 border rounded bg-background text-sm",value:e.threshold??.95,onChange:j=>t({...e,threshold:parseFloat(j.target.value)})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:"Method"}),a.jsxs("select",{className:"w-full p-2 border rounded bg-background text-sm",value:e.correlation_method??"pearson",onChange:j=>t({...e,correlation_method:j.target.value}),children:[a.jsx("option",{value:"pearson",children:"Pearson"}),a.jsx("option",{value:"spearman",children:"Spearman"}),a.jsx("option",{value:"kendall",children:"Kendall"})]})]})]}),h&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:"Scoring Function"}),a.jsxs("select",{className:"w-full p-2 border rounded bg-background text-sm",value:e.score_func??"",onChange:j=>t({...e,score_func:j.target.value}),children:[a.jsx("option",{value:"",children:"Auto (Default)"}),N().map(j=>a.jsx("option",{value:j.value,children:j.label},j.value))]})]}),(e.method==="select_k_best"||e.method==="rfe")&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:"K (Number of Features)"}),a.jsx("input",{type:"number",className:"w-full p-2 border rounded bg-background text-sm",value:e.k??10,onChange:j=>t({...e,k:parseInt(j.target.value)})})]}),e.method==="select_percentile"&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:"Percentile"}),a.jsx("input",{type:"number",className:"w-full p-2 border rounded bg-background text-sm",value:e.percentile??10,onChange:j=>t({...e,percentile:parseInt(j.target.value)})})]}),["select_fpr","select_fdr","select_fwe"].includes(e.method)&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:"Alpha (Significance)"}),a.jsx("input",{type:"number",step:"0.001",className:"w-full p-2 border rounded bg-background text-sm",value:e.alpha??.05,onChange:j=>t({...e,alpha:parseFloat(j.target.value)})})]}),e.method==="generic_univariate_select"&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:"Mode"}),a.jsxs("select",{className:"w-full p-2 border rounded bg-background text-sm",value:e.mode??"k_best",onChange:j=>t({...e,mode:j.target.value}),children:[a.jsx("option",{value:"k_best",children:"K Best"}),a.jsx("option",{value:"percentile",children:"Percentile"}),a.jsx("option",{value:"fpr",children:"FPR"}),a.jsx("option",{value:"fdr",children:"FDR"}),a.jsx("option",{value:"fwe",children:"FWE"})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:"Parameter"}),a.jsx("input",{type:"number",step:"0.001",className:"w-full p-2 border rounded bg-background text-sm",value:e.param??1e-5,onChange:j=>t({...e,param:parseFloat(j.target.value)})}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Value for the selected mode (e.g., k, percentile, or alpha)."})]})]}),g&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:"Estimator"}),a.jsxs("select",{className:"w-full p-2 border rounded bg-background text-sm",value:e.estimator??"auto",onChange:j=>t({...e,estimator:j.target.value}),children:[a.jsx("option",{value:"auto",children:"Auto"}),a.jsx("option",{value:"RandomForest",children:"Random Forest"}),a.jsx("option",{value:"LogisticRegression",children:"Logistic Regression"}),a.jsx("option",{value:"LinearRegression",children:"Linear Regression"})]})]}),e.method==="select_from_model"&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:"Threshold"}),a.jsx("input",{type:"text",className:"w-full p-2 border rounded bg-background text-sm",placeholder:"e.g., median, mean, 1.25*mean",value:e.threshold??"median",onChange:j=>t({...e,threshold:j.target.value})}),a.jsx("p",{className:"text-xs text-muted-foreground",children:'String (e.g. "median") or float.'})]}),e.method==="rfe"&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:"Step"}),a.jsx("input",{type:"number",min:"1",className:"w-full p-2 border rounded bg-background text-sm",value:e.step??1,onChange:j=>t({...e,step:parseInt(j.target.value)})}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Features to remove at each iteration."})]}),a.jsxs("div",{className:"flex items-center space-x-2 pt-2 border-t",children:[a.jsx("input",{type:"checkbox",id:"drop_columns",className:"rounded border-gray-300",checked:e.drop_columns!==!1,onChange:j=>t({...e,drop_columns:j.target.checked})}),a.jsx("label",{htmlFor:"drop_columns",className:"text-sm font-medium",children:"Drop Columns"})]}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"If unchecked, columns will be identified but not removed from the dataset."}),!p&&a.jsx(x,{})]})]})]})},BR={type:"feature_selection",label:"Feature Selection",category:"Preprocessing",description:"Select the most important features.",icon:X4,inputs:[{id:"in",label:"Data",type:"dataset"}],outputs:[{id:"out",label:"Selected",type:"dataset"}],settings:HR,validate:e=>e.method!=="variance_threshold"&&!e.target_column?{isValid:!1,message:"Target column is required for this method."}:{isValid:!0},getDefaultConfig:()=>({method:"select_k_best",k:10})},UR=({config:e,onChange:t,nodeId:n})=>{var h;const r=Ie(n||""),s=oe(g=>g.nodes),o=oe(g=>g.edges),l=(g=>{var j;const x=new Set,b=[g];for(;b.length>0;){const k=b.shift();if(x.has(k))continue;x.add(k);const v=s.find(M=>M.id===k);if(!v)continue;if(k!==g&&((j=v.data)!=null&&j.datasetId))return v.data.datasetId;const _=ur(v,s,o);for(const M of _)b.push(M.id)}})(n||""),c=(h=r.find(g=>g.target_column))==null?void 0:h.target_column;nn.useEffect(()=>{const g={};l&&e.datasetId!==l&&(g.datasetId=l),c&&e.target_column!==c&&(g.target_column=c),Object.keys(g).length>0&&t({...e,...g})},[l,c,e.datasetId,e.target_column,t]);const{data:u,isLoading:d}=Ee(l||e.datasetId),f=u?Object.values(u.columns).map(g=>g.name):[],m=e.validation_size||0,y=1-e.test_size-m,p=nn.useRef(null),[w,N]=nn.useState(!1);return nn.useEffect(()=>{if(!p.current)return;const g=new ResizeObserver(x=>{for(const b of x)N(b.contentRect.width>450)});return g.observe(p.current),()=>g.disconnect()},[]),a.jsxs("div",{ref:p,className:`flex flex-col h-full w-full bg-background ${w?"overflow-hidden":"overflow-y-auto"}`,children:[a.jsxs("div",{className:"shrink-0 p-4 pb-0 space-y-2",children:[!l&&!e.datasetId&&a.jsx("div",{className:"p-2 bg-yellow-50 text-yellow-800 text-xs rounded border border-yellow-200",children:"Connect a dataset node to see available columns."}),d&&a.jsx("div",{className:"text-xs text-muted-foreground animate-pulse",children:"Loading schema..."})]}),a.jsxs("div",{className:`flex-1 min-h-0 p-4 gap-4 ${w?"grid grid-cols-2":"flex flex-col"}`,children:[a.jsxs("div",{className:`space-y-4 ${w?"overflow-y-auto pr-2":"shrink-0"}`,children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:"Test Size (0.0 - 1.0)"}),a.jsx("input",{type:"number",step:"0.05",min:"0.05",max:"0.95",className:"w-full p-2 border rounded bg-background text-sm",value:e.test_size,onChange:g=>t({...e,test_size:parseFloat(g.target.value)})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:"Validation Size (0.0 - 1.0)"}),a.jsx("input",{type:"number",step:"0.05",min:"0.00",max:"0.95",className:"w-full p-2 border rounded bg-background text-sm",value:m,onChange:g=>t({...e,validation_size:parseFloat(g.target.value)})}),a.jsxs("p",{className:"text-xs text-muted-foreground",children:[Math.round(y*100),"% Training, ",Math.round(m*100),"% Validation, ",Math.round(e.test_size*100),"% Testing"]}),y<=0&&a.jsx("p",{className:"text-xs text-red-500 font-medium",children:"Error: Total split size exceeds 100%"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:"Random State"}),a.jsx("input",{type:"number",className:"w-full p-2 border rounded bg-background text-sm",value:e.random_state,onChange:g=>t({...e,random_state:parseInt(g.target.value)})})]})]}),a.jsxs("div",{className:`space-y-4 ${w?"overflow-y-auto pl-2 border-l":"shrink-0 pt-4 border-t"}`,children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",id:"shuffle",checked:e.shuffle,onChange:g=>t({...e,shuffle:g.target.checked})}),a.jsx("label",{htmlFor:"shuffle",className:"text-sm font-medium",children:"Shuffle Data"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",id:"stratify",checked:e.stratify,onChange:g=>t({...e,stratify:g.target.checked})}),a.jsx("label",{htmlFor:"stratify",className:"text-sm font-medium",children:"Stratify by Target"})]}),a.jsxs("div",{className:"space-y-2 pl-6 border-l-2 border-muted",children:[a.jsx("label",{className:"text-sm font-medium",children:"Target Column"}),a.jsxs("select",{className:"w-full p-2 border rounded bg-background text-sm",value:e.target_column??"",onChange:g=>t({...e,target_column:g.target.value}),disabled:!e.stratify,children:[a.jsx("option",{value:"",children:"-- Select Target --"}),f.map(g=>a.jsx("option",{value:g,children:g},g))]}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Required for stratification. If input is already separated (X, y), this is ignored."})]})]})]})]})},WR={type:"TrainTestSplitter",label:"Train-Test Split",category:"Preprocessing",description:"Split data into training and testing sets.",icon:_v,inputs:[{id:"in",label:"Data",type:"dataset"}],outputs:[{id:"train",label:"Train",type:"dataset"},{id:"validation",label:"Validation",type:"dataset"},{id:"test",label:"Test",type:"dataset"}],settings:UR,validate:e=>{if(e.test_size<=0||e.test_size>=1)return{isValid:!1,message:"Test size must be between 0 and 1."};const t=e.validation_size||0;return t<0||t>=1?{isValid:!1,message:"Validation size must be between 0 and 1."}:e.test_size+t>=1?{isValid:!1,message:"Sum of Test and Validation sizes must be less than 1."}:{isValid:!0}},getDefaultConfig:()=>({test_size:.2,validation_size:0,random_state:42,stratify:!1,shuffle:!0})},qR=({config:e,onChange:t,nodeId:n})=>{const r=oe(u=>u.nodes),s=oe(u=>u.edges),i=(u=>{var m;const d=new Set,f=[u];for(;f.length>0;){const y=f.shift();if(d.has(y))continue;d.add(y);const p=r.find(N=>N.id===y);if(!p)continue;if(y!==u&&((m=p.data)!=null&&m.datasetId))return p.data.datasetId;const w=ur(p,r,s);for(const N of w)f.push(N.id)}})(n||"");nn.useEffect(()=>{i&&e.datasetId!==i&&t({...e,datasetId:i})},[i,e.datasetId,t]);const{data:l}=Ee(i||e.datasetId),c=l?Object.values(l.columns).map(u=>u.name):[];return a.jsx("div",{className:"p-4 space-y-4",children:a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:"Target Column"}),a.jsxs("select",{className:"w-full p-2 border rounded bg-background text-sm",value:e.target_column,onChange:u=>t({...e,target_column:u.target.value}),children:[a.jsx("option",{value:"",children:"-- Select Target --"}),c.map(u=>a.jsx("option",{value:u,children:u},u))]}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"This column will be separated as the target (y), and all other columns will be features (X)."})]})})},QR={type:"feature_target_split",label:"Feature-Target Split",category:"Preprocessing",description:"Separate features (X) from target (y).",icon:_v,inputs:[{id:"in",label:"Data",type:"dataset"}],outputs:[{id:"X",label:"Features (X)",type:"dataset"},{id:"y",label:"Target (y)",type:"dataset"}],settings:qR,validate:e=>e.target_column?{isValid:!0}:{isValid:!1,message:"Target column is required."},getDefaultConfig:()=>({target_column:""})},KR=({config:e,onChange:t,nodeId:n})=>{var u;const s=(u=Ie(n||"").find(d=>d.datasetId))==null?void 0:u.datasetId,{isLoading:o}=Ee(s),i=oe(d=>d.executionResult),l=n?i==null?void 0:i.node_results[n]:null,c=l==null?void 0:l.metrics;return a.jsxs("div",{className:"p-4 space-y-4",children:[!s&&a.jsx("div",{className:"p-2 bg-yellow-50 text-yellow-800 text-xs rounded border border-yellow-200",children:"Connect a dataset node to see available columns."}),o&&!!s&&a.jsx("div",{className:"text-xs text-muted-foreground animate-pulse",children:"Loading schema..."}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium",children:[a.jsx("input",{type:"checkbox",checked:e.drop_if_any_missing,onChange:d=>t({...e,drop_if_any_missing:d.target.checked}),className:"rounded border-gray-300"}),"Drop rows with ANY missing values"]}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"If checked, any row containing at least one missing value will be removed."})]}),a.jsxs("div",{className:`space-y-2 ${e.drop_if_any_missing?"opacity-50 pointer-events-none":""}`,children:[a.jsx("label",{className:"block text-sm font-medium",children:"Missing Value Threshold (%)"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"range",min:"0",max:"100",value:e.missing_threshold||0,onChange:d=>t({...e,missing_threshold:parseInt(d.target.value)}),className:"flex-1"}),a.jsxs("span",{className:"text-sm w-12 text-right",children:[e.missing_threshold||0,"%"]})]}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Drop rows that have more than this percentage of missing values."})]}),c&&c.DropMissingRows_rows_removed!==void 0&&a.jsxs("div",{className:"mt-4 p-3 bg-muted/30 rounded-md border border-border",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2 text-sm font-semibold text-primary",children:[a.jsx(Wt,{size:14}),a.jsx("span",{children:"Last Run Results"})]}),a.jsxs("div",{className:"space-y-1 text-xs",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-muted-foreground",children:"Rows Removed:"}),a.jsx("span",{className:"font-medium text-destructive",children:c.DropMissingRows_rows_removed})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-muted-foreground",children:"Rows Remaining:"}),a.jsx("span",{className:"font-medium",children:c.DropMissingRows_rows_remaining})]}),a.jsxs("div",{className:"flex justify-between pt-1 border-t",children:[a.jsx("span",{className:"text-muted-foreground",children:"Total Rows:"}),a.jsx("span",{className:"font-medium",children:c.DropMissingRows_rows_total})]})]})]})]})},XR={type:"drop_missing_rows",label:"Drop Rows",category:"Preprocessing",description:"Drop rows based on missing values.",icon:K4,inputs:[{id:"in",label:"Data",type:"dataset"}],outputs:[{id:"out",label:"Cleaned Data",type:"dataset"}],settings:KR,validate:e=>({isValid:!0}),getDefaultConfig:()=>({drop_if_any_missing:!1,missing_threshold:50})},YR=({config:e,onChange:t,nodeId:n})=>{var N;const s=(N=Ie(n||"").find(h=>h.datasetId))==null?void 0:N.datasetId,{data:o,isLoading:i}=Ee(s),l=o?Object.values(o.columns).map(h=>h.name):[],c=oe(h=>h.executionResult),u=n?c==null?void 0:c.node_results[n]:null,d=u==null?void 0:u.metrics,[f,m]=S.useState(""),y=S.useMemo(()=>l.filter(h=>h.toLowerCase().includes(f.toLowerCase())),[l,f]),p=()=>{t({...e,subset:y})},w=()=>{const h=e.subset.filter(g=>!y.includes(g));t({...e,subset:h})};return a.jsxs("div",{className:"p-4 space-y-4",children:[!s&&a.jsx("div",{className:"p-2 bg-yellow-50 text-yellow-800 text-xs rounded border border-yellow-200",children:"Connect a dataset node to see available columns."}),i&&!!s&&a.jsx("div",{className:"text-xs text-muted-foreground animate-pulse",children:"Loading schema..."}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Keep Strategy"}),a.jsxs("select",{className:"w-full p-2 border rounded bg-background focus:ring-1 focus:ring-primary outline-none",value:e.keep,onChange:h=>t({...e,keep:h.target.value}),children:[a.jsx("option",{value:"first",children:"Keep First Occurrence"}),a.jsx("option",{value:"last",children:"Keep Last Occurrence"}),a.jsx("option",{value:"none",children:"Drop All Duplicates"})]}),a.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Determines which duplicates (if any) to keep."})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("label",{className:"block text-sm font-medium",children:"Subset Columns (Optional)"}),a.jsxs("span",{className:"text-xs text-muted-foreground",children:[e.subset.length," selected"]})]}),a.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Only consider these columns for identifying duplicates. If empty, all columns are used."}),a.jsxs("div",{className:"space-y-2 mb-2",children:[a.jsx("input",{type:"text",placeholder:"Search columns...",className:"block w-full px-3 py-1.5 text-sm bg-background border rounded-md shadow-sm focus:ring-1 focus:ring-primary outline-none",value:f,onChange:h=>m(h.target.value)}),a.jsxs("div",{className:"flex gap-2 text-xs justify-end",children:[a.jsx("button",{onClick:p,className:"text-primary hover:text-primary/80 font-medium transition-colors",children:"Select All"}),a.jsx("span",{className:"text-border",children:"|"}),a.jsx("button",{onClick:w,className:"text-primary hover:text-primary/80 font-medium transition-colors",children:"Deselect All"})]})]}),l.length>0?a.jsxs("div",{className:"space-y-1 max-h-40 overflow-y-auto border rounded p-2 bg-background",children:[y.map(h=>a.jsxs("label",{className:"flex items-center gap-2 text-sm hover:bg-accent/50 p-1 rounded cursor-pointer",children:[a.jsx("input",{type:"checkbox",className:"rounded border-gray-300 text-primary focus:ring-primary",checked:e.subset.includes(h),onChange:g=>{const x=g.target.checked?[...e.subset,h]:e.subset.filter(b=>b!==h);t({...e,subset:x})}}),h]},h)),y.length===0&&a.jsxs("div",{className:"text-xs text-muted-foreground text-center py-2",children:['No columns match "',f,'"']})]}):a.jsx("div",{className:"text-xs text-muted-foreground italic border rounded p-4 text-center",children:"No columns available"})]}),d&&d.Deduplicate_rows_removed!==void 0&&a.jsxs("div",{className:"mt-4 p-3 bg-muted/30 rounded-md border border-border",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2 text-sm font-semibold text-primary",children:[a.jsx(Wt,{size:14}),a.jsx("span",{children:"Last Run Results"})]}),a.jsxs("div",{className:"space-y-1 text-xs",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-muted-foreground",children:"Duplicates Removed:"}),a.jsx("span",{className:"font-medium text-destructive",children:d.Deduplicate_rows_removed})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-muted-foreground",children:"Rows Remaining:"}),a.jsx("span",{className:"font-medium",children:d.Deduplicate_rows_remaining})]}),a.jsxs("div",{className:"flex justify-between pt-1 border-t",children:[a.jsx("span",{className:"text-muted-foreground",children:"Total Rows:"}),a.jsx("span",{className:"font-medium",children:d.Deduplicate_rows_total})]})]})]})]})},GR={type:"deduplicate",label:"Deduplicate",category:"Preprocessing",description:"Remove duplicate rows.",icon:W4,inputs:[{id:"in",label:"Data",type:"dataset"}],outputs:[{id:"out",label:"Unique Data",type:"dataset"}],settings:YR,validate:e=>({isValid:!0}),getDefaultConfig:()=>({subset:[],keep:"first"})},JR=[{value:"float",label:"Float (Decimal)"},{value:"int",label:"Integer"},{value:"string",label:"String (Text)"},{value:"category",label:"Category"},{value:"bool",label:"Boolean"},{value:"datetime",label:"Datetime"}],ZR=({config:e,onChange:t,nodeId:n})=>{var g;const s=(g=Ie(n||"").find(x=>x.datasetId))==null?void 0:g.datasetId,{data:o,isLoading:i}=Ee(s),l=o?Object.values(o.columns).map(x=>x.name):[],c=oe(x=>x.executionResult),u=n?c==null?void 0:c.node_results[n]:null,d=u==null?void 0:u.metrics,f=S.useRef(null),[m,y]=S.useState(!1);S.useEffect(()=>{if(!f.current)return;const x=new ResizeObserver(b=>{for(const j of b)y(j.contentRect.width>450)});return x.observe(f.current),()=>x.disconnect()},[]);const p=()=>{if(l.length===0)return;const x=l.find(b=>!e.column_types[b])||l[0];t({...e,column_types:{...e.column_types,[x]:"float"}})},w=x=>{const b={...e.column_types};delete b[x],t({...e,column_types:b})},N=(x,b)=>{if(x===b)return;const j=e.column_types[x],k={...e.column_types};delete k[x],k[b]=j,t({...e,column_types:k})},h=(x,b)=>{t({...e,column_types:{...e.column_types,[x]:b}})};return a.jsxs("div",{ref:f,className:"p-4 space-y-4 h-full overflow-y-auto",children:[!s&&a.jsx("div",{className:"p-2 bg-yellow-50 text-yellow-800 text-xs rounded border border-yellow-200",children:"Connect a dataset node to see available columns."}),i&&!!s&&a.jsx("div",{className:"text-xs text-muted-foreground animate-pulse",children:"Loading schema..."}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("label",{className:"text-sm font-medium",children:"Casting Rules"}),a.jsx("button",{onClick:p,disabled:!s||l.length===0,className:"p-1.5 bg-primary text-primary-foreground rounded hover:bg-primary/90 disabled:opacity-50 transition-colors",title:"Add Casting Rule",children:a.jsx(Lo,{className:"w-4 h-4"})})]}),a.jsxs("div",{className:`space-y-2 ${m?"grid grid-cols-2 gap-2 space-y-0":""}`,children:[Object.entries(e.column_types).map(([x,b])=>a.jsxs("div",{className:"flex items-center gap-2 p-2 border rounded bg-muted/10 group",children:[a.jsxs("div",{className:"flex-1 space-y-2 min-w-0",children:[a.jsx("select",{className:"w-full p-1.5 text-sm border rounded bg-background focus:ring-1 focus:ring-primary outline-none",value:x,onChange:j=>N(x,j.target.value),children:l.map(j=>a.jsx("option",{value:j,disabled:j!==x&&!!e.column_types[j],children:j},j))}),a.jsx("select",{className:"w-full p-1.5 text-sm border rounded bg-background focus:ring-1 focus:ring-primary outline-none",value:b,onChange:j=>h(x,j.target.value),children:JR.map(j=>a.jsx("option",{value:j.value,children:j.label},j.value))})]}),a.jsx("button",{onClick:()=>w(x),className:"p-1.5 text-muted-foreground hover:text-destructive hover:bg-destructive/10 rounded transition-colors",title:"Remove Rule",children:a.jsx(Gr,{className:"w-4 h-4"})})]},x)),Object.keys(e.column_types).length===0&&a.jsx("div",{className:`text-xs text-muted-foreground italic border border-dashed rounded p-8 text-center ${m?"col-span-2":""}`,children:"No casting rules defined. Click + to add one."})]})]}),d&&(d.cast_errors!==void 0||d.casted_columns_count!==void 0)&&a.jsxs("div",{className:"mt-4 p-3 bg-muted/30 rounded-md border border-border",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2 text-sm font-semibold text-primary",children:[a.jsx(Wt,{size:14}),a.jsx("span",{children:"Last Run Results"})]}),a.jsxs("div",{className:"space-y-1 text-xs",children:[d.casted_columns_count!==void 0&&a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-muted-foreground",children:"Columns Casted:"}),a.jsx("span",{className:"font-medium",children:d.casted_columns_count})]}),d.cast_errors!==void 0&&a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-muted-foreground",children:"Errors Encountered:"}),a.jsx("span",{className:"font-medium text-destructive",children:d.cast_errors})]})]})]})]})},eT={type:"casting",label:"Cast Types",category:"Preprocessing",description:"Cast columns to specific data types.",icon:Q4,inputs:[{id:"in",label:"Data",type:"dataset"}],outputs:[{id:"out",label:"Casted Data",type:"dataset"}],settings:ZR,validate:e=>({isValid:!0}),getDefaultConfig:()=>({column_types:{}})},tT=({config:e,onChange:t,nodeId:n})=>{var N;const s=(N=Ie(n||"").find(h=>h.datasetId))==null?void 0:N.datasetId,{data:o,isLoading:i}=Ee(s),l=o?Object.values(o.columns).map(h=>h.name):[],c=oe(h=>h.executionResult),u=n?c==null?void 0:c.node_results[n]:null,d=u==null?void 0:u.metrics,[f,m]=S.useState(""),y=S.useMemo(()=>l.filter(h=>h.toLowerCase().includes(f.toLowerCase())),[l,f]),p=()=>{t({...e,columns:y})},w=()=>{const h=e.columns.filter(g=>!y.includes(g));t({...e,columns:h})};return a.jsxs("div",{className:"p-4 space-y-4",children:[!s&&a.jsx("div",{className:"p-2 bg-yellow-50 text-yellow-800 text-xs rounded border border-yellow-200",children:"Connect a dataset node to see available columns."}),i&&!!s&&a.jsx("div",{className:"text-xs text-muted-foreground animate-pulse",children:"Loading schema..."}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Indicator Suffix"}),a.jsx("input",{type:"text",className:"w-full p-2 border rounded bg-background focus:ring-1 focus:ring-primary outline-none",value:e.flag_suffix,onChange:h=>t({...e,flag_suffix:h.target.value}),placeholder:"_was_missing"}),a.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:'Suffix added to the new indicator columns (e.g., "Age_was_missing").'})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("label",{className:"block text-sm font-medium",children:"Target Columns (Optional)"}),a.jsxs("span",{className:"text-xs text-muted-foreground",children:[e.columns.length," selected"]})]}),a.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Create indicators for these columns. If empty, all columns with missing values are used."}),a.jsxs("div",{className:"space-y-2 mb-2",children:[a.jsx("input",{type:"text",placeholder:"Search columns...",className:"block w-full px-3 py-1.5 text-sm bg-background border rounded-md shadow-sm focus:ring-1 focus:ring-primary outline-none",value:f,onChange:h=>m(h.target.value)}),a.jsxs("div",{className:"flex gap-2 text-xs justify-end",children:[a.jsx("button",{onClick:p,className:"text-primary hover:text-primary/80 font-medium transition-colors",children:"Select All"}),a.jsx("span",{className:"text-border",children:"|"}),a.jsx("button",{onClick:w,className:"text-primary hover:text-primary/80 font-medium transition-colors",children:"Deselect All"})]})]}),l.length>0?a.jsxs("div",{className:"space-y-1 max-h-40 overflow-y-auto border rounded p-2 bg-background",children:[y.map(h=>a.jsxs("label",{className:"flex items-center gap-2 text-sm hover:bg-accent/50 p-1 rounded cursor-pointer",children:[a.jsx("input",{type:"checkbox",className:"rounded border-gray-300 text-primary focus:ring-primary",checked:e.columns.includes(h),onChange:g=>{const x=g.target.checked?[...e.columns,h]:e.columns.filter(b=>b!==h);t({...e,columns:x})}}),h]},h)),y.length===0&&a.jsxs("div",{className:"text-xs text-muted-foreground text-center py-2",children:['No columns match "',f,'"']})]}):a.jsx("div",{className:"text-xs text-muted-foreground italic border rounded p-4 text-center",children:"No columns available"})]}),d&&d.missing_indicators_created!==void 0&&a.jsxs("div",{className:"mt-4 p-3 bg-muted/30 rounded-md border border-border",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2 text-sm font-semibold text-primary",children:[a.jsx(Wt,{size:14}),a.jsx("span",{children:"Last Run Results"})]}),a.jsxs("div",{className:"space-y-1 text-xs",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-muted-foreground",children:"Indicators Created:"}),a.jsx("span",{className:"font-medium text-primary",children:d.missing_indicators_created})]}),d.missing_indicators_columns&&Array.isArray(d.missing_indicators_columns)&&d.missing_indicators_columns.length>0&&a.jsxs("div",{className:"pt-1 border-t mt-1",children:[a.jsx("span",{className:"text-muted-foreground block mb-1",children:"New Columns:"}),a.jsx("div",{className:"flex flex-wrap gap-1",children:d.missing_indicators_columns.map(h=>a.jsx("span",{className:"px-1.5 py-0.5 bg-background border rounded text-[10px] font-mono",children:h},h))})]})]})]})]})},nT={type:"MissingIndicator",label:"Missing Indicator",category:"Preprocessing",description:"Create binary indicators for missing values.",icon:Y4,inputs:[{id:"in",label:"Data",type:"dataset"}],outputs:[{id:"out",label:"Augmented Data",type:"dataset"}],settings:tT,validate:e=>({isValid:!0}),getDefaultConfig:()=>({columns:[],flag_suffix:"_was_missing"})},rT=({config:e,onChange:t,nodeId:n})=>{var j;const s=(j=Ie(n||"").find(k=>k.datasetId))==null?void 0:j.datasetId,{data:o,isLoading:i}=Ee(s),[l,c]=S.useState(""),u=S.useRef(null),[d,f]=S.useState(!1),m=oe(k=>k.executionResult),y=n?m==null?void 0:m.node_results[n]:null,p=y==null?void 0:y.metrics,N=((m==null?void 0:m.recommendations)||[]).filter(k=>k.suggested_node_type==="encoding"||k.type.includes("encoding")||k.type.includes("cardinality"));S.useEffect(()=>{if(!u.current)return;const k=new ResizeObserver(v=>{for(const _ of v)f(_.contentRect.width>400)});return k.observe(u.current),()=>k.disconnect()},[]);const h=o?Object.values(o.columns).filter(k=>["object","string","category","bool"].some(v=>{var _;return(_=k.dtype)==null?void 0:_.toLowerCase().includes(v)})).map(k=>k.name):[],g=h.filter(k=>k.toLowerCase().includes(l.toLowerCase())),x=()=>{t({...e,columns:[...h]})},b=()=>{t({...e,columns:[]})};return a.jsxs("div",{ref:u,className:"p-4 space-y-4",children:[!s&&a.jsx("div",{className:"p-2 bg-yellow-50 text-yellow-800 text-xs rounded border border-yellow-200",children:"Connect a dataset node to see available columns."}),i&&!!s&&a.jsx("div",{className:"text-xs text-muted-foreground animate-pulse",children:"Loading schema..."}),a.jsxs("div",{className:`grid gap-4 ${d?"grid-cols-2":"grid-cols-1"}`,children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"block text-sm font-medium",children:"Encoding Method"}),a.jsxs("select",{className:"w-full p-2 border rounded bg-background focus:ring-1 focus:ring-primary outline-none",value:e.method,onChange:k=>t({...e,method:k.target.value}),children:[a.jsx("option",{value:"onehot",children:"One-Hot Encoding"}),a.jsx("option",{value:"dummy",children:"Dummy Encoding"}),a.jsx("option",{value:"label",children:"Label Encoding"}),a.jsx("option",{value:"ordinal",children:"Ordinal Encoding"}),a.jsx("option",{value:"target",children:"Target Encoding"}),a.jsx("option",{value:"hash",children:"Hash Encoding"})]}),a.jsxs("p",{className:"text-xs text-muted-foreground",children:[e.method==="onehot"&&"Creates binary columns for each category.",e.method==="dummy"&&"Like One-Hot but drops first category to avoid collinearity.",e.method==="label"&&"Assigns a unique integer to each category.",e.method==="ordinal"&&"Encodes categories as ordered integers.",e.method==="target"&&"Encodes categories based on target mean.",e.method==="hash"&&"Maps categories to a fixed number of features."]})]}),a.jsxs("div",{className:"space-y-2",children:[(e.method==="onehot"||e.method==="dummy")&&a.jsxs("div",{className:"space-y-2 p-3 bg-muted/20 rounded border h-full",children:[a.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[a.jsx("input",{type:"checkbox",checked:e.method==="dummy"?!0:e.drop_first||!1,disabled:e.method==="dummy",onChange:k=>t({...e,drop_first:k.target.checked}),className:"rounded border-gray-300"}),"Drop First Category"]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"block text-xs font-medium",children:"Handle Unknown"}),a.jsxs("select",{className:"w-full p-1 text-sm border rounded",value:e.handle_unknown||"ignore",onChange:k=>t({...e,handle_unknown:k.target.value}),title:"How to handle categories seen in test data but not in training data.",children:[a.jsx("option",{value:"ignore",children:"Ignore (Zeros)"}),a.jsx("option",{value:"error",children:"Raise Error"})]}),a.jsx("p",{className:"text-[10px] text-muted-foreground",children:'"Ignore" produces all-zeros for unknown categories.'})]})]}),e.method==="target"&&a.jsxs("div",{className:"space-y-2 p-3 bg-muted/20 rounded border h-full",children:[a.jsx("label",{className:"block text-sm font-medium",children:"Target Column"}),a.jsxs("select",{className:"w-full p-2 border rounded bg-background text-sm",value:e.target_column||"",onChange:k=>t({...e,target_column:k.target.value}),children:[a.jsx("option",{value:"",children:"Select a target column..."}),o&&Object.values(o.columns).map(k=>a.jsxs("option",{value:k.name,children:[k.name," (",k.dtype,")"]},k.name))]}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"The column to use for calculating target statistics."})]}),e.method==="hash"&&a.jsxs("div",{className:"space-y-2 p-3 bg-muted/20 rounded border h-full",children:[a.jsx("label",{className:"block text-sm font-medium",children:"Number of Features"}),a.jsx("input",{type:"number",min:"1",className:"w-full p-2 border rounded",value:e.n_features||8,onChange:k=>t({...e,n_features:parseInt(k.target.value)})})]}),e.method==="ordinal"&&a.jsxs("div",{className:"space-y-2 p-3 bg-muted/20 rounded border h-full",children:[a.jsx("label",{className:"block text-sm font-medium",children:"Unknown Value"}),a.jsx("input",{type:"number",className:"w-full p-2 border rounded",value:e.unknown_value??-1,onChange:k=>t({...e,unknown_value:parseInt(k.target.value)}),title:"Integer to assign for unknown categories."}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Value assigned to unknown categories (default: -1)."})]}),e.method==="label"&&a.jsxs("div",{className:"space-y-2 p-3 bg-muted/20 rounded border h-full",children:[a.jsx("label",{className:"block text-sm font-medium",children:"Missing/Unknown Code"}),a.jsx("input",{type:"number",className:"w-full p-2 border rounded",value:e.missing_code??-1,onChange:k=>t({...e,missing_code:parseInt(k.target.value)}),title:"Integer to assign for missing or unknown categories."}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Value assigned to missing/unknown categories (default: -1)."})]})]})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("label",{className:"block text-sm font-medium",children:"Columns to Encode"}),a.jsxs("span",{className:"text-xs text-muted-foreground",children:[e.columns.length," selected"]})]}),a.jsxs("div",{className:"space-y-2 mb-2",children:[a.jsx("input",{type:"text",placeholder:"Search columns...",className:"block w-full px-3 py-1.5 text-sm bg-background border rounded-md shadow-sm focus:ring-1 focus:ring-primary outline-none",value:l,onChange:k=>c(k.target.value)}),a.jsxs("div",{className:"flex gap-2 text-xs justify-end",children:[a.jsx("button",{onClick:x,className:"text-primary hover:text-primary/80 font-medium transition-colors",children:"Select All"}),a.jsx("span",{className:"text-border",children:"|"}),a.jsx("button",{onClick:b,className:"text-primary hover:text-primary/80 font-medium transition-colors",children:"Deselect All"})]})]}),h.length>0?a.jsxs("div",{className:"space-y-1 max-h-40 overflow-y-auto border rounded p-2 bg-background",children:[g.map(k=>a.jsxs("label",{className:"flex items-center gap-2 text-sm hover:bg-accent/50 p-1 rounded cursor-pointer",children:[a.jsx("input",{type:"checkbox",className:"rounded border-gray-300 text-primary focus:ring-primary",checked:e.columns.includes(k),onChange:v=>{const _=v.target.checked?[...e.columns,k]:e.columns.filter(M=>M!==k);t({...e,columns:_})}}),k]},k)),g.length===0&&a.jsxs("div",{className:"text-xs text-muted-foreground text-center py-2",children:['No columns match "',l,'"']})]}):a.jsx("div",{className:"text-xs text-muted-foreground italic border rounded p-4 text-center",children:"No categorical columns found"})]}),N.length>0&&a.jsx(Jr,{recommendations:N}),p&&a.jsxs("div",{className:"mt-4 p-3 bg-muted/30 rounded-md border border-border",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2 text-sm font-semibold text-primary",children:[a.jsx(Wt,{size:14}),a.jsx("span",{children:"Last Run Results"})]}),a.jsxs("div",{className:"space-y-1 text-xs",children:[p.encoded_columns_count!==void 0&&a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-muted-foreground",children:"Columns Encoded:"}),a.jsx("span",{className:"font-medium",children:p.encoded_columns_count})]}),p.new_features_count!==void 0&&a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-muted-foreground",children:"New Features Created:"}),a.jsx("span",{className:"font-medium text-primary",children:p.new_features_count})]}),p.categories_count&&a.jsxs("div",{className:"mt-2 border-t pt-2",children:[a.jsx("span",{className:"text-muted-foreground block mb-1 font-medium",children:"Categories Found:"}),a.jsx("div",{className:"grid grid-cols-2 gap-x-4 gap-y-1",children:Object.entries(p.categories_count).map(([k,v])=>a.jsxs("div",{className:"flex justify-between text-[10px]",children:[a.jsxs("span",{className:"truncate max-w-[100px]",title:k,children:[k,":"]}),a.jsx("span",{className:"font-mono",children:v})]},k))})]}),p.classes_count&&a.jsxs("div",{className:"mt-2 border-t pt-2",children:[a.jsx("span",{className:"text-muted-foreground block mb-1 font-medium",children:"Classes Found:"}),a.jsx("div",{className:"grid grid-cols-2 gap-x-4 gap-y-1",children:Object.entries(p.classes_count).map(([k,v])=>a.jsxs("div",{className:"flex justify-between text-[10px]",children:[a.jsxs("span",{className:"truncate max-w-[100px]",title:k,children:[k,":"]}),a.jsx("span",{className:"font-mono",children:v})]},k))})]})]})]})]})},sT={type:"encoding",label:"Encoding",category:"Preprocessing",description:"Encode categorical variables.",icon:Z4,inputs:[{id:"in",label:"Data",type:"dataset"}],outputs:[{id:"out",label:"Encoded Data",type:"dataset"}],settings:rT,validate:e=>e.columns.length===0?{isValid:!1,error:"Select at least one column"}:{isValid:!0},getDefaultConfig:()=>({method:"onehot",columns:[],drop_first:!1,handle_unknown:"ignore",n_features:8,unknown_value:-1,missing_code:-1})},aT=({config:e,onChange:t,nodeId:n})=>{const r=oe(v=>v.nodes),s=oe(v=>v.edges),i=(v=>{var P;const _=new Set,M=[v];for(;M.length>0;){const T=M.shift();if(_.has(T))continue;_.add(T);const C=r.find(E=>E.id===T);if(!C)continue;if(T!==v&&((P=C.data)!=null&&P.datasetId))return C.data.datasetId;const O=ur(C,r,s);for(const E of O)M.push(E.id)}})(n||""),{data:l,isLoading:c}=Ee(i),u=la(n||"",{types:["outlier_removal","cleaning"],suggestedNodeTypes:["OutlierRemoval","outlier"],scope:"column"}),d=oe(v=>v.executionResult),f=n?d==null?void 0:d.node_results[n]:null,m=S.useRef(null),[y,p]=S.useState(!1),[w,N]=S.useState("");S.useEffect(()=>{if(!m.current)return;const v=new ResizeObserver(_=>{for(const M of _)p(M.contentRect.width>450)});return v.observe(m.current),()=>v.disconnect()},[]);const h=l?Object.values(l.columns).filter(v=>["int","float","number"].some(_=>{var M;return(M=v.dtype)==null?void 0:M.toLowerCase().includes(_)})).map(v=>v.name):[],g=h.filter(v=>v.toLowerCase().includes(w.toLowerCase())),x=()=>{t({...e,columns:g})},b=()=>{const v=e.columns.filter(_=>!g.includes(_));t({...e,columns:v})},j=()=>{if(!f||!f.metrics)return null;const v=f.metrics,_=v.rows_removed,M=v.rows_remaining,P=v.rows_total??(_??0)+(M??0),T=v.bounds,C=v.stats,O=v.contamination,E=v.warnings,z=v.values_clipped;if(_===void 0&&!T&&!C&&O===void 0&&!E&&z===void 0)return null;const A=()=>{switch(e.method){case"iqr":return"Removes statistical outliers (IQR)";case"zscore":return"Removes deviations > 3";case"winsorize":return"Clips extreme values";case"elliptic_envelope":return"Detects multivariate anomalies";default:return""}};return a.jsxs("div",{className:"mt-4 p-3 bg-muted/50 rounded border text-xs space-y-3",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("div",{className:"font-medium text-muted-foreground",children:"Execution Feedback"}),a.jsx("div",{className:"text-[10px] text-primary/80 bg-primary/5 px-1.5 py-0.5 rounded border border-primary/10",title:"Goal of the selected method",children:A()})]}),E&&E.length>0&&a.jsxs("div",{className:"p-2 bg-yellow-50 text-yellow-800 rounded border border-yellow-200",children:[a.jsx("div",{className:"font-medium mb-1",children:"Warnings"}),a.jsx("ul",{className:"list-disc list-inside space-y-0.5",children:E.map((L,R)=>a.jsx("li",{className:"truncate",title:L,children:L},R))})]}),e.method==="winsorize"?a.jsxs("div",{className:"flex justify-between items-center p-2 bg-background rounded border",children:[a.jsx("span",{className:"text-muted-foreground",children:"Values Clipped"}),a.jsxs("div",{className:"text-right",children:[a.jsx("span",{className:"font-mono font-medium text-blue-600",children:z??0}),a.jsx("span",{className:"text-[10px] text-muted-foreground block",children:"(Replaced with bounds)"})]})]}):(_!==void 0||P!==void 0)&&a.jsxs("div",{className:"flex justify-between items-center p-2 bg-background rounded border",children:[a.jsx("span",{className:"text-muted-foreground",children:"Rows Removed"}),a.jsxs("div",{className:"text-right",children:[a.jsxs("div",{className:"flex items-center justify-end gap-1",children:[a.jsx("span",{className:"font-mono font-medium text-destructive",children:_??0}),P>0&&a.jsxs("span",{className:"text-[10px] text-muted-foreground",children:["(",((_??0)/P*100).toFixed(1),"%)"]})]}),M!==void 0&&a.jsxs("span",{className:"text-[10px] text-muted-foreground block",children:[M," remaining"]})]})]}),O!==void 0&&a.jsxs("div",{className:"flex justify-between items-center p-2 bg-background rounded border",children:[a.jsx("span",{className:"text-muted-foreground",children:"Contamination"}),a.jsxs("span",{className:"font-mono font-medium",children:[(O*100).toFixed(1),"%"]})]}),T&&a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-muted-foreground mb-1",children:"Calculated Bounds"}),a.jsx("div",{className:"max-h-32 overflow-y-auto bg-background p-2 rounded border space-y-1",children:Object.entries(T).map(([L,R])=>a.jsxs("div",{className:"flex justify-between items-center border-b border-border/50 last:border-0 pb-1 last:pb-0",children:[a.jsx("span",{className:"truncate max-w-[100px] font-medium",title:L,children:L}),a.jsxs("span",{className:"font-mono text-[10px] text-muted-foreground",children:["[",R.lower.toFixed(2),", ",R.upper.toFixed(2),"]"]})]},L))})]}),C&&a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-muted-foreground mb-1",children:"Z-Score Stats"}),a.jsx("div",{className:"max-h-32 overflow-y-auto bg-background p-2 rounded border space-y-1",children:Object.entries(C).map(([L,R])=>a.jsxs("div",{className:"flex justify-between items-center border-b border-border/50 last:border-0 pb-1 last:pb-0",children:[a.jsx("span",{className:"truncate max-w-[100px] font-medium",title:L,children:L}),a.jsxs("span",{className:"font-mono text-[10px] text-muted-foreground",children:["=",R.mean.toFixed(2),", =",R.std.toFixed(2)]})]},L))})]})]})},k=()=>{const v=[];if(f&&f.metrics){const M=f.metrics,P=M.rows_removed,C=M.rows_total??M[`${e.method==="elliptic_envelope"?"EllipticEnvelope":e.method==="zscore"?"ZScore":e.method==="winsorize"?"Winsorize":"IQR"}_rows_total`];if(P!==void 0&&C!==void 0&&C>0){const O=P/C;O>.2?v.push({rule_id:"high_data_loss",type:"warning",description:"High data loss (>20%).",reasoning:"Consider relaxing parameters (e.g., higher IQR multiplier or Z-Score threshold) or using Winsorization to clip values instead of removing rows.",suggested_node_type:"OutlierRemoval",suggested_params:{},confidence:1,target_columns:[]}):O===0&&e.method!=="winsorize"&&v.push({rule_id:"no_outliers",type:"info",description:"No outliers detected.",reasoning:"If you suspect outliers, try tightening the parameters (e.g., lower IQR multiplier).",suggested_node_type:"OutlierRemoval",suggested_params:{},confidence:1,target_columns:[]})}e.method==="elliptic_envelope"&&v.push({rule_id:"elliptic_stochastic",type:"info",description:"Stochastic Method",reasoning:"Elliptic Envelope is stochastic. Results may vary slightly between runs.",suggested_node_type:"OutlierRemoval",suggested_params:{},confidence:1,target_columns:[]})}const _=[...u,...v];return _.length===0?null:a.jsx("div",{className:"mt-4",children:a.jsx(Jr,{recommendations:_})})};return a.jsxs("div",{ref:m,className:`flex flex-col h-full w-full bg-background ${y?"overflow-hidden":"overflow-y-auto"}`,children:[a.jsx("div",{className:"shrink-0 p-4 pb-0 space-y-2",children:!i&&a.jsx("div",{className:"p-2 bg-yellow-50 text-yellow-800 text-xs rounded border border-yellow-200",children:"Connect a dataset node to see available columns."})}),a.jsxs("div",{className:`flex-1 min-h-0 p-4 gap-4 ${y?"grid grid-cols-2":"flex flex-col"}`,children:[a.jsxs("div",{className:`space-y-4 ${y?"overflow-y-auto pr-2":"shrink-0"}`,children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Method"}),a.jsxs("select",{className:"w-full p-2 border rounded bg-background text-sm",value:e.method,onChange:v=>t({...e,method:v.target.value}),children:[a.jsx("option",{value:"iqr",children:"IQR (Interquartile Range)"}),a.jsx("option",{value:"zscore",children:"Z-Score (Standard Deviation)"}),a.jsx("option",{value:"winsorize",children:"Winsorize (Clip Values)"}),a.jsx("option",{value:"elliptic_envelope",children:"Elliptic Envelope (Multivariate)"})]}),a.jsxs("p",{className:"text-[10px] text-muted-foreground mt-1",children:[e.method==="iqr"&&"Removes rows with values outside Q1/Q3  multiplier * IQR.",e.method==="zscore"&&"Removes rows with values more than N standard deviations from mean.",e.method==="winsorize"&&"Clips values to specified percentiles instead of removing rows.",e.method==="elliptic_envelope"&&"Fits a robust covariance estimate to detect outliers."]})]}),e.method==="iqr"&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"block text-sm font-medium",children:"Multiplier"}),a.jsx("input",{type:"number",step:"0.1",className:"w-full p-2 border rounded bg-background text-sm",value:e.multiplier??1.5,onChange:v=>t({...e,multiplier:parseFloat(v.target.value)})}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Usually 1.5 for outliers, 3.0 for extreme outliers."})]}),e.method==="zscore"&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"block text-sm font-medium",children:"Threshold (Sigma)"}),a.jsx("input",{type:"number",step:"0.1",className:"w-full p-2 border rounded bg-background text-sm",value:e.threshold??3,onChange:v=>t({...e,threshold:parseFloat(v.target.value)})}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Number of standard deviations to tolerate."})]}),e.method==="winsorize"&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"block text-sm font-medium",children:"Percentiles"}),a.jsxs("div",{className:"flex gap-2 items-center",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("label",{className:"text-[10px] text-muted-foreground",children:"Lower"}),a.jsx("input",{type:"number",className:"w-full p-2 border rounded bg-background text-sm",value:e.lower_percentile??5,onChange:v=>t({...e,lower_percentile:parseFloat(v.target.value)})})]}),a.jsxs("div",{className:"flex-1",children:[a.jsx("label",{className:"text-[10px] text-muted-foreground",children:"Upper"}),a.jsx("input",{type:"number",className:"w-full p-2 border rounded bg-background text-sm",value:e.upper_percentile??95,onChange:v=>t({...e,upper_percentile:parseFloat(v.target.value)})})]})]})]}),e.method==="elliptic_envelope"&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"block text-sm font-medium",children:"Contamination"}),a.jsx("input",{type:"number",step:"0.01",min:"0",max:"0.5",className:"w-full p-2 border rounded bg-background text-sm",value:e.contamination??.01,onChange:v=>t({...e,contamination:parseFloat(v.target.value)})}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Expected proportion of outliers in the dataset."})]}),y&&a.jsxs(a.Fragment,{children:[a.jsx(j,{}),a.jsx(k,{})]})]}),a.jsxs("div",{className:`flex flex-col h-full min-h-[200px] border rounded-md overflow-hidden ${y?"":"shrink-0"}`,children:[a.jsxs("div",{className:"p-2 border-b bg-muted/30 flex flex-col gap-2",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("span",{className:"text-xs font-medium text-muted-foreground",children:["Numeric Columns (",e.columns.length,")"]}),a.jsxs("div",{className:"flex gap-1",children:[a.jsx("button",{onClick:x,className:"text-[10px] px-2 py-1 hover:bg-accent rounded",children:"All"}),a.jsx("button",{onClick:b,className:"text-[10px] px-2 py-1 hover:bg-accent rounded",children:"None"})]})]}),a.jsx("input",{type:"text",placeholder:"Search columns...",className:"w-full text-xs p-1.5 border rounded bg-background",value:w,onChange:v=>N(v.target.value)})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-2 space-y-1",children:g.length>0?g.map(v=>a.jsxs("label",{className:"flex items-center gap-2 text-sm hover:bg-accent/50 p-1.5 rounded cursor-pointer select-none",children:[a.jsx("input",{type:"checkbox",checked:e.columns.includes(v),onChange:_=>{const M=_.target.checked?[...e.columns,v]:e.columns.filter(P=>P!==v);t({...e,columns:M})},className:"rounded border-gray-300 text-primary focus:ring-primary"}),a.jsx("span",{className:"truncate",title:v,children:v})]},v)):a.jsx("div",{className:"text-xs text-muted-foreground italic p-4 text-center",children:c?"Loading schema...":h.length===0?"No numeric columns found":"No matches found"})})]}),!y&&a.jsxs(a.Fragment,{children:[a.jsx(j,{}),a.jsx(k,{})]})]})]})},oT={type:"outlier",label:"Outlier Removal",category:"Preprocessing",description:"Detect and remove or clip outliers.",icon:d3,inputs:[{id:"in",type:"dataset",label:"Dataset"}],outputs:[{id:"out",type:"dataset",label:"Cleaned"}],settings:aT,validate:e=>!e.columns||e.columns.length===0?{isValid:!1,message:"Select at least one column."}:{isValid:!0},getDefaultConfig:()=>({method:"iqr",columns:[],multiplier:1.5,threshold:3,lower_percentile:5,upper_percentile:95,contamination:.01})},Kc={power:{label:"Power Transforms",methods:[{value:"yeo-johnson",label:"Yeo-Johnson"},{value:"box-cox",label:"Box-Cox (>0 only)"}]},simple:{label:"Simple Math",methods:[{value:"log",label:"Log (log1p)"},{value:"square_root",label:"Square Root"},{value:"cube_root",label:"Cube Root"},{value:"reciprocal",label:"Reciprocal (1/x)"},{value:"square",label:"Square (x)"},{value:"exponential",label:"Exponential (e)"}]}},iT=e=>["yeo-johnson","box-cox"].includes(e)?"power":"simple",lT=({allColumns:e,selectedColumns:t,onChange:n})=>{const[r,s]=S.useState(""),o=S.useMemo(()=>e.filter(u=>u.toLowerCase().includes(r.toLowerCase())),[e,r]),i=()=>{const u=Array.from(new Set([...t,...o]));n(u)},l=()=>{const u=t.filter(d=>!o.includes(d));n(u)},c=u=>{t.includes(u)?n(t.filter(d=>d!==u)):n([...t,u])};return a.jsxs("div",{className:"space-y-2 border rounded p-2 bg-background",children:[a.jsx("div",{className:"flex gap-2 items-center",children:a.jsxs("div",{className:"relative flex-1",children:[a.jsx(Yr,{className:"absolute left-2 top-1.5 w-3 h-3 text-muted-foreground"}),a.jsx("input",{className:"w-full pl-7 pr-2 py-1 text-xs border rounded bg-background",placeholder:"Search columns...",value:r,onChange:u=>s(u.target.value)})]})}),a.jsxs("div",{className:"flex gap-2 text-xs border-b pb-2",children:[a.jsx("button",{onClick:i,className:"text-primary hover:underline font-medium",children:"Select All"}),a.jsx("span",{className:"text-muted-foreground",children:"|"}),a.jsx("button",{onClick:l,className:"text-muted-foreground hover:underline",children:"None"}),a.jsxs("span",{className:"ml-auto text-muted-foreground",children:[t.length," selected"]})]}),a.jsx("div",{className:"max-h-32 overflow-y-auto space-y-1 pt-1",children:o.length===0?a.jsxs("div",{className:"text-xs text-muted-foreground p-2 text-center",children:['No columns match "',r,'"']}):o.map(u=>a.jsxs("label",{className:"flex items-center gap-2 text-xs cursor-pointer hover:bg-accent/50 p-1 rounded",children:[a.jsx("input",{type:"checkbox",checked:t.includes(u),onChange:()=>c(u),className:"rounded border-gray-300 text-primary focus:ring-primary"}),a.jsx("span",{className:"truncate",title:u,children:u})]},u))})]})},cT=({config:e,onChange:t,nodeId:n})=>{var b;const r=S.useMemo(()=>e||{transformations:[]},[e]),s=S.useMemo(()=>Array.isArray(r.transformations)?r.transformations:[],[r.transformations]),[o,i]=S.useState([]),l=S.useRef(null),[c,u]=S.useState(!1);S.useEffect(()=>{if(!l.current)return;const j=new ResizeObserver(k=>{for(const v of k)u(v.contentRect.width>450)});return j.observe(l.current),()=>j.disconnect()},[]);const f=(b=Ie(n||"").find(j=>j.datasetId))==null?void 0:b.datasetId,{data:m}=Ee(f),y=S.useMemo(()=>m!=null&&m.columns?Object.values(m.columns).filter(j=>["int","float","number"].some(k=>{var v;return(v=j.dtype)==null?void 0:v.toLowerCase().includes(k)})).map(j=>j.name):[],[m]),p=()=>{const j=s.length;i(k=>[...k,j]),t({transformations:[...s,{columns:[],method:"log",params:{}}]})},w=(j,k)=>{const v=[...s];v[j]={...v[j],...k},t({transformations:v})},N=j=>{const k=[...s];k.splice(j,1),t({transformations:k}),i(v=>v.filter(_=>_!==j).map(_=>_>j?_-1:_))},h=j=>{i(k=>k.includes(j)?k.filter(v=>v!==j):[...k,j])},g=(j,k)=>{const v=Kc[k].methods[0].value;w(j,{method:v})},x=la(n||"",{types:["transformation","preprocessing"],suggestedNodeTypes:["TransformationNode"],scope:"column"});return a.jsxs("div",{ref:l,className:"p-4 space-y-6 h-full overflow-y-auto",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("label",{className:"text-sm font-medium",children:"Transformation Rules"}),a.jsxs("button",{onClick:p,className:"flex items-center gap-1 text-xs bg-primary text-primary-foreground px-2 py-1 rounded hover:bg-primary/90",children:[a.jsx(Lo,{size:12})," Add Rule"]})]}),a.jsxs("div",{className:"space-y-4",children:[s.map((j,k)=>{var P,T,C;const v=iT(j.method),_=o.includes(k),M=((P=Kc[v].methods.find(O=>O.value===j.method))==null?void 0:P.label)||j.method;return a.jsxs("div",{className:"border rounded bg-card shadow-sm overflow-hidden",children:[a.jsxs("div",{className:"flex items-center justify-between p-3 cursor-pointer hover:bg-accent/50 transition-colors",onClick:()=>h(k),children:[a.jsxs("div",{className:"flex items-center gap-2 overflow-hidden",children:[_?a.jsx(vt,{size:16,className:"text-muted-foreground flex-shrink-0"}):a.jsx(xo,{size:16,className:"text-muted-foreground flex-shrink-0"}),a.jsxs("div",{className:"flex flex-col overflow-hidden",children:[a.jsx("span",{className:"text-sm font-medium truncate",children:M}),a.jsx("span",{className:"text-xs text-muted-foreground truncate",children:j.columns.length===0?"No columns selected":`${j.columns.length} columns`})]})]}),a.jsx("button",{onClick:O=>{O.stopPropagation(),N(k)},className:"text-destructive hover:bg-destructive/10 p-1.5 rounded flex-shrink-0",title:"Remove rule",children:a.jsx(Gr,{size:14})})]}),_&&a.jsxs("div",{className:`p-3 border-t bg-accent/5 animate-in slide-in-from-top-2 duration-200 ${c?"grid grid-cols-2 gap-4":"space-y-3"}`,children:[a.jsxs("div",{className:"flex flex-col gap-3",children:[a.jsxs("div",{className:"flex flex-col gap-2",children:[a.jsx("label",{className:"text-xs font-medium text-muted-foreground",children:"Method"}),a.jsxs("select",{className:"w-full p-1.5 border rounded text-xs bg-background font-medium",value:v,onChange:O=>g(k,O.target.value),onClick:O=>O.stopPropagation(),children:[a.jsx("option",{value:"simple",children:"Simple Math"}),a.jsx("option",{value:"power",children:"Power Transform"})]}),a.jsx("select",{className:"w-full p-1.5 border rounded text-xs bg-background",value:j.method,onChange:O=>w(k,{method:O.target.value}),onClick:O=>O.stopPropagation(),children:Kc[v].methods.map(O=>a.jsx("option",{value:O.value,children:O.label},O.value))})]}),(j.method==="yeo-johnson"||j.method==="box-cox")&&a.jsxs("div",{className:"flex items-center gap-2 pt-1",onClick:O=>O.stopPropagation(),children:[a.jsx("input",{type:"checkbox",id:`std-${k}`,checked:((T=j.params)==null?void 0:T.standardize)!==!1,onChange:O=>w(k,{params:{...j.params,standardize:O.target.checked}})}),a.jsx("label",{htmlFor:`std-${k}`,className:"text-xs text-muted-foreground",children:"Standardize result"})]}),j.method==="exponential"&&a.jsxs("div",{className:"flex flex-col gap-1 pt-1",onClick:O=>O.stopPropagation(),children:[a.jsx("label",{className:"text-xs text-muted-foreground",children:"Clip Threshold:"}),a.jsx("input",{type:"number",className:"w-full p-1 border rounded text-xs",value:((C=j.params)==null?void 0:C.clip_threshold)||700,onChange:O=>w(k,{params:{...j.params,clip_threshold:parseFloat(O.target.value)}})})]})]}),a.jsxs("div",{className:"space-y-1 min-w-0",onClick:O=>O.stopPropagation(),children:[a.jsx("label",{className:"text-xs font-medium text-muted-foreground",children:"Target Columns"}),a.jsx(lT,{allColumns:y,selectedColumns:j.columns||[],onChange:O=>w(k,{columns:O})})]})]})]},k)}),s.length===0&&a.jsxs("div",{className:"text-xs text-muted-foreground text-center py-8 border border-dashed rounded bg-muted/20",children:["No transformation rules defined.",a.jsx("br",{}),'Click "Add Rule" to start.']})]}),a.jsx(Jr,{recommendations:x||[],onApply:j=>{var M,P;const k=j,v=((M=k.suggested_params)==null?void 0:M.method)||((P=k.params)==null?void 0:P.method)||"log",_=k.target_columns||[];if(_.length>0){const T=s.length;i(C=>[...C,T]),t({transformations:[...s,{columns:_,method:v,params:{}}]})}}})]})},uT={type:"TransformationNode",label:"Transformation",description:"Apply mathematical transformations to features.",icon:Sv,category:"Preprocessing",inputs:[{id:"in",type:"dataset",label:"Dataset"}],outputs:[{id:"out",type:"dataset",label:"Transformed"}],validate:e=>{if(!(e!=null&&e.transformations)||e.transformations.length===0)return{isValid:!1,message:"Add at least one transformation rule."};for(const t of e.transformations)if(!t.columns||t.columns.length===0)return{isValid:!1,message:"Each rule must have at least one column selected."};return{isValid:!0}},settings:cT,getDefaultConfig:()=>({transformations:[]})},dT=({value:e,onChange:t})=>{const[n,r]=S.useState((e==null?void 0:e.join(", "))||""),s=S.useRef(e);S.useEffect(()=>{JSON.stringify(e)!==JSON.stringify(s.current)&&(r((e==null?void 0:e.join(", "))||""),s.current=e)},[e]);const o=()=>{const i=n.split(",").map(l=>parseFloat(l.trim())).filter(l=>!isNaN(l)).sort((l,c)=>l-c);t(i)};return a.jsx("input",{type:"text",className:"w-full p-1 text-xs border rounded bg-background text-foreground",placeholder:"0, 10, 20, 100...",value:n,onChange:i=>r(i.target.value),onBlur:o})},fT=({config:e,onChange:t,nodeId:n})=>{var h;const s=(h=Ie(n||"").find(g=>g.datasetId))==null?void 0:h.datasetId,{data:o,isLoading:i}=Ee(s),l=S.useRef(null),[c,u]=S.useState(!1),[d,f]=S.useState("");S.useEffect(()=>{if(!l.current)return;const g=new ResizeObserver(x=>{for(const b of x)u(b.contentRect.width>450)});return g.observe(l.current),()=>g.disconnect()},[]);const m=o?Object.values(o.columns).filter(g=>["int","float","number"].some(x=>{var b;return(b=g.dtype)==null?void 0:b.toLowerCase().includes(x)})).map(g=>g.name):[],y=m.filter(g=>g.toLowerCase().includes(d.toLowerCase())),p=()=>{t({...e,columns:y})},w=()=>{const g=e.columns.filter(x=>!y.includes(x));t({...e,columns:g})},N=g=>{e.columns.includes(g)?t({...e,columns:e.columns.filter(x=>x!==g)}):t({...e,columns:[...e.columns,g]})};return a.jsxs("div",{ref:l,className:"p-4 space-y-4 h-full overflow-y-auto",children:[!s&&a.jsx("div",{className:"p-2 bg-yellow-50 text-yellow-800 text-xs rounded border border-yellow-200",children:"Connect a dataset node to see available columns."}),a.jsxs("div",{className:`grid gap-4 ${c?"grid-cols-2":"grid-cols-1"}`,children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"block text-sm font-medium",children:"Binning Strategy"}),a.jsxs("select",{className:"w-full p-2 border rounded bg-background focus:ring-1 focus:ring-primary outline-none",value:e.strategy,onChange:g=>t({...e,strategy:g.target.value}),children:[a.jsx("option",{value:"equal_width",children:"Equal Width (Uniform)"}),a.jsx("option",{value:"equal_frequency",children:"Equal Frequency (Quantile)"}),a.jsx("option",{value:"kmeans",children:"K-Means Clustering"}),a.jsx("option",{value:"custom",children:"Custom Edges"})]}),a.jsxs("p",{className:"text-[10px] text-muted-foreground",children:[e.strategy==="equal_width"&&"Bins have equal width ranges.",e.strategy==="equal_frequency"&&"Bins have equal number of records.",e.strategy==="kmeans"&&"Bins based on K-Means clustering centers.",e.strategy==="custom"&&"Define specific bin edges for each column."]})]}),e.strategy!=="custom"&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"block text-sm font-medium",children:"Number of Bins"}),a.jsx("input",{type:"number",min:2,max:100,className:"w-full p-2 border rounded bg-background focus:ring-1 focus:ring-primary outline-none",value:e.n_bins,onChange:g=>t({...e,n_bins:parseInt(g.target.value)||5})})]}),e.strategy==="custom"&&a.jsxs("div",{className:"space-y-2 border rounded p-2 bg-muted/10",children:[a.jsx("label",{className:"block text-xs font-medium",children:"Custom Edges"}),e.columns.length===0?a.jsx("div",{className:"text-xs text-muted-foreground",children:"Select columns first."}):a.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:e.columns.map(g=>{var x;return a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-[10px] font-medium",children:g}),a.jsx(dT,{value:(x=e.custom_bins)==null?void 0:x[g],onChange:b=>t({...e,custom_bins:{...e.custom_bins,[g]:b}})})]},g)})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"block text-sm font-medium",children:"Label Format"}),a.jsxs("select",{className:"w-full p-2 border rounded bg-background focus:ring-1 focus:ring-primary outline-none",value:e.label_format,onChange:g=>t({...e,label_format:g.target.value}),children:[a.jsx("option",{value:"ordinal",children:"Ordinal (0, 1, 2...)"}),a.jsx("option",{value:"range",children:"Range Intervals ([0-10], [10-20]...)"}),a.jsx("option",{value:"bin_index",children:"Bin Index"})]})]}),e.label_format==="range"&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"block text-sm font-medium",children:"Precision (Decimals)"}),a.jsx("input",{type:"number",min:0,max:10,className:"w-full p-2 border rounded bg-background focus:ring-1 focus:ring-primary outline-none",value:e.precision??3,onChange:g=>t({...e,precision:parseInt(g.target.value)||0})}),a.jsx("p",{className:"text-[10px] text-muted-foreground",children:"Number of decimal places to show in interval labels (e.g. 2 gives [0.00, 10.00])."})]}),a.jsxs("div",{className:"space-y-2 pt-2 border-t",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",id:"drop_original",checked:e.drop_original,onChange:g=>t({...e,drop_original:g.target.checked}),className:"rounded border-gray-300 text-primary focus:ring-primary"}),a.jsx("label",{htmlFor:"drop_original",className:"text-sm",children:"Drop Original Columns"})]}),!e.drop_original&&a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-xs font-medium text-muted-foreground",children:"Output Suffix"}),a.jsx("input",{type:"text",className:"w-full p-1.5 border rounded text-xs",placeholder:"_binned",value:e.output_suffix||"",onChange:g=>t({...e,output_suffix:g.target.value})})]})]})]}),a.jsxs("div",{className:"space-y-2 flex flex-col h-full min-h-[200px]",children:[a.jsx("label",{className:"block text-sm font-medium",children:"Target Columns"}),a.jsx("div",{className:"flex gap-2",children:a.jsx("input",{className:"w-full px-2 py-1 text-xs border rounded bg-background text-foreground",placeholder:"Search columns...",value:d,onChange:g=>f(g.target.value)})}),a.jsxs("div",{className:"flex gap-2 text-xs border-b pb-1",children:[a.jsx("button",{onClick:p,className:"text-primary hover:underline",children:"Select All"}),a.jsx("span",{className:"text-muted-foreground",children:"|"}),a.jsx("button",{onClick:w,className:"text-muted-foreground hover:underline",children:"None"}),a.jsxs("span",{className:"ml-auto text-muted-foreground",children:[e.columns.length," selected"]})]}),a.jsx("div",{className:"flex-1 border rounded bg-background overflow-y-auto p-2 max-h-[300px]",children:i?a.jsx("div",{className:"text-xs text-muted-foreground p-2",children:"Loading columns..."}):y.length===0?a.jsx("div",{className:"text-xs text-muted-foreground p-2 text-center",children:m.length===0?"No numeric columns found.":`No columns match "${d}"`}):a.jsx("div",{className:"space-y-1",children:y.map(g=>a.jsxs("label",{className:"flex items-center gap-2 text-xs cursor-pointer hover:bg-accent/50 p-1 rounded",children:[a.jsx("input",{type:"checkbox",checked:e.columns.includes(g),onChange:()=>N(g),className:"rounded border-gray-300 text-primary focus:ring-primary"}),a.jsx("span",{className:"truncate",title:g,children:g})]},g))})})]})]})]})},mT={type:"BinningNode",label:"Binning / Discretization",description:"Convert continuous variables into discrete bins.",icon:Gl,category:"Preprocessing",inputs:[{id:"in",type:"dataset",label:"Dataset"}],outputs:[{id:"out",type:"dataset",label:"Binned"}],validate:e=>!e.columns||e.columns.length===0?{isValid:!1,message:"Select at least one column to bin."}:e.n_bins<2?{isValid:!1,message:"Number of bins must be at least 2."}:{isValid:!0},settings:fT,getDefaultConfig:()=>({columns:[],strategy:"equal_width",n_bins:5,label_format:"ordinal",output_suffix:"_binned",drop_original:!1})},hT=({nodeId:e})=>{const t=oe(s=>s.executionResult),n=e?t==null?void 0:t.node_results[e]:null;if(!n)return null;const r=s=>s?a.jsx("div",{className:"space-y-1",children:Object.entries(s).map(([o,i])=>typeof i=="object"&&i!==null?a.jsxs("div",{className:"mt-1",children:[a.jsxs("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:[o.replace(/_/g," "),":"]}),a.jsx("div",{className:"pl-2 border-l-2 border-gray-200 dark:border-gray-700 ml-1",children:r(i)})]},o):a.jsxs("div",{className:"flex justify-between text-[10px]",children:[a.jsxs("span",{className:"text-gray-600 dark:text-gray-400 capitalize",children:[o.replace(/_/g," "),":"]}),a.jsx("span",{className:"font-mono text-gray-900 dark:text-gray-100",children:String(i)})]},o))}):null;return a.jsxs("div",{className:"mt-6 p-4 border rounded-md bg-gray-50 dark:bg-gray-800 dark:border-gray-700",children:[a.jsx("h4",{className:"text-sm font-medium mb-2 text-gray-900 dark:text-gray-100",children:"Last Run Results"}),a.jsxs("div",{className:"text-xs space-y-1 text-gray-600 dark:text-gray-300",children:[n.metrics&&a.jsx("div",{className:"mt-2",children:r(n.metrics)}),n.error&&a.jsxs("div",{className:"mt-2 text-red-500 break-words",children:["Error: ",n.error]}),!n.metrics&&!n.error&&a.jsx("div",{className:"italic text-gray-500",children:"No metrics available"})]})]})},pT=({config:e,onChange:t,nodeId:n})=>{var w,N;const r=S.useRef(null),[s,o]=S.useState(!1),[i,l]=S.useState(!0),c=Ie(n||""),u=(w=c.find(h=>h.datasetId))==null?void 0:w.datasetId,{data:d}=Ee(u),f=(N=c.find(h=>{var g;return(g=h.config)==null?void 0:g.target_column}))==null?void 0:N.config.target_column;S.useEffect(()=>{if(!e.target_column){if(f)t({...e,target_column:f});else if(d!=null&&d.columns){const h=Object.values(d.columns).find(g=>g.name.toLowerCase()==="target"||g.name.toLowerCase()==="class"||g.column_type==="target");h&&t({...e,target_column:h.name})}}},[d,f,e.target_column]),S.useEffect(()=>{if(!r.current)return;const h=new ResizeObserver(g=>{for(const x of g)o(x.contentRect.width>400)});return h.observe(r.current),()=>h.disconnect()},[]);const m=la(n||"",{types:["resampling"],suggestedNodeTypes:["ResamplingNode"]}),y=h=>{h.suggested_params&&t({...e,...h.suggested_params})},p=(h,g)=>{const x={...e,[h]:g};h==="type"&&(g==="oversampling"?x.method="smote":x.method="random_under_sampling"),t(x)};return a.jsx("div",{ref:r,className:`flex flex-col h-full w-full bg-white dark:bg-gray-900 ${s?"overflow-hidden":"overflow-y-auto"}`,children:a.jsxs("div",{className:`flex-1 min-h-0 p-4 gap-4 ${s?"grid grid-cols-2":"flex flex-col"}`,children:[a.jsxs("div",{className:`space-y-4 ${s?"overflow-y-auto pr-2":"shrink-0"}`,children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Resampling Type"}),a.jsxs("select",{className:"w-full rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 p-2 text-sm text-gray-900 dark:text-gray-100 focus:border-blue-500 focus:ring-1 focus:ring-blue-500",value:e.type,onChange:h=>p("type",h.target.value),children:[a.jsx("option",{value:"oversampling",children:"Oversampling (Minority)"}),a.jsx("option",{value:"undersampling",children:"Undersampling (Majority)"})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Method"}),a.jsx("select",{className:"w-full rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 p-2 text-sm text-gray-900 dark:text-gray-100 focus:border-blue-500 focus:ring-1 focus:ring-blue-500",value:e.method,onChange:h=>p("method",h.target.value),children:e.type==="oversampling"?a.jsxs(a.Fragment,{children:[a.jsx("option",{value:"smote",children:"SMOTE"}),a.jsx("option",{value:"adasyn",children:"ADASYN"}),a.jsx("option",{value:"borderline_smote",children:"Borderline SMOTE"}),a.jsx("option",{value:"svm_smote",children:"SVM SMOTE"}),a.jsx("option",{value:"kmeans_smote",children:"KMeans SMOTE"}),a.jsx("option",{value:"smote_tomek",children:"SMOTE + Tomek"})]}):a.jsxs(a.Fragment,{children:[a.jsx("option",{value:"random_under_sampling",children:"Random Under Sampling"}),a.jsx("option",{value:"nearmiss",children:"NearMiss"}),a.jsx("option",{value:"tomek_links",children:"Tomek Links"}),a.jsx("option",{value:"edited_nearest_neighbours",children:"Edited Nearest Neighbours"})]})}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:e.type==="oversampling"?"Generate synthetic samples for the minority class.":"Remove samples from the majority class."})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Target Column"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"text",className:"w-full rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 p-2 text-sm text-gray-900 dark:text-gray-100 focus:border-blue-500 focus:ring-1 focus:ring-blue-500",placeholder:"e.g., target",value:e.target_column,onChange:h=>p("target_column",h.target.value),list:"target-column-suggestions"}),(d==null?void 0:d.columns)&&a.jsx("datalist",{id:"target-column-suggestions",children:Object.values(d.columns).map(h=>a.jsx("option",{value:h.name},h.name))})]}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:f?"Auto-detected from upstream node.":"The column containing the class labels."})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Sampling Strategy"}),a.jsxs("select",{className:"w-full rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 p-2 text-sm text-gray-900 dark:text-gray-100 focus:border-blue-500 focus:ring-1 focus:ring-blue-500",value:e.sampling_strategy,onChange:h=>p("sampling_strategy",h.target.value),children:[a.jsx("option",{value:"auto",children:"Auto (Resample all classes but majority)"}),a.jsx("option",{value:"minority",children:"Minority (Resample only minority class)"}),a.jsx("option",{value:"not minority",children:"Not Minority (Resample all but minority)"}),a.jsx("option",{value:"not majority",children:"Not Majority (Resample all but majority)"}),a.jsx("option",{value:"all",children:"All (Resample all classes)"})]}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Defines which classes to resample."})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Random State"}),a.jsx("input",{type:"number",className:"w-full rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 p-2 text-sm text-gray-900 dark:text-gray-100 focus:border-blue-500 focus:ring-1 focus:ring-blue-500",value:e.random_state,onChange:h=>p("random_state",parseInt(h.target.value))})]})]}),a.jsxs("div",{className:`space-y-4 ${s?"overflow-y-auto pl-2 border-l border-gray-100 dark:border-gray-700":"shrink-0 pt-4 border-t border-gray-100 dark:border-gray-700"}`,children:[e.type==="oversampling"&&a.jsxs(a.Fragment,{children:[["smote","adasyn","borderline_smote","svm_smote","kmeans_smote"].includes(e.method)&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"k Neighbors"}),a.jsx("input",{type:"number",className:"w-full rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 p-2 text-sm text-gray-900 dark:text-gray-100 focus:border-blue-500 focus:ring-1 focus:ring-blue-500",value:e.k_neighbors??5,onChange:h=>p("k_neighbors",parseInt(h.target.value))})]}),["borderline_smote","svm_smote"].includes(e.method)&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"m Neighbors"}),a.jsx("input",{type:"number",className:"w-full rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 p-2 text-sm text-gray-900 dark:text-gray-100 focus:border-blue-500 focus:ring-1 focus:ring-blue-500",value:e.m_neighbors??10,onChange:h=>p("m_neighbors",parseInt(h.target.value))})]}),e.method==="borderline_smote"&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Kind"}),a.jsxs("select",{className:"w-full rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 p-2 text-sm text-gray-900 dark:text-gray-100 focus:border-blue-500 focus:ring-1 focus:ring-blue-500",value:e.kind??"borderline-1",onChange:h=>p("kind",h.target.value),children:[a.jsx("option",{value:"borderline-1",children:"Borderline-1"}),a.jsx("option",{value:"borderline-2",children:"Borderline-2"})]})]}),e.method==="svm_smote"&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Out Step"}),a.jsx("input",{type:"number",step:"0.1",className:"w-full rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 p-2 text-sm text-gray-900 dark:text-gray-100 focus:border-blue-500 focus:ring-1 focus:ring-blue-500",value:e.out_step??.5,onChange:h=>p("out_step",parseFloat(h.target.value))})]}),e.method==="kmeans_smote"&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Cluster Balance Threshold"}),a.jsx("input",{type:"number",step:"0.1",className:"w-full rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 p-2 text-sm text-gray-900 dark:text-gray-100 focus:border-blue-500 focus:ring-1 focus:ring-blue-500",value:e.cluster_balance_threshold??.1,onChange:h=>p("cluster_balance_threshold",parseFloat(h.target.value))})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Density Exponent"}),a.jsx("input",{type:"text",className:"w-full rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 p-2 text-sm text-gray-900 dark:text-gray-100 focus:border-blue-500 focus:ring-1 focus:ring-blue-500",value:e.density_exponent??"auto",onChange:h=>p("density_exponent",h.target.value)})]})]})]}),e.type==="undersampling"&&e.method==="random_under_sampling"&&a.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-md bg-gray-50 dark:bg-gray-800 dark:border-gray-700",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 block",children:"Replacement"}),a.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Sample with replacement"})]}),a.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded border-gray-300 dark:border-gray-600 text-blue-600 focus:ring-blue-500",checked:e.replacement??!1,onChange:h=>p("replacement",h.target.checked)})]}),e.type==="undersampling"&&e.method==="nearmiss"&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Version"}),a.jsxs("select",{className:"w-full rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 p-2 text-sm text-gray-900 dark:text-gray-100 focus:border-blue-500 focus:ring-1 focus:ring-blue-500",value:e.version??1,onChange:h=>p("version",parseInt(h.target.value)),children:[a.jsx("option",{value:"1",children:"1"}),a.jsx("option",{value:"2",children:"2"}),a.jsx("option",{value:"3",children:"3"})]})]}),e.type==="undersampling"&&e.method==="edited_nearest_neighbours"&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"n Neighbors"}),a.jsx("input",{type:"number",className:"w-full rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 p-2 text-sm text-gray-900 dark:text-gray-100 focus:border-blue-500 focus:ring-1 focus:ring-blue-500",value:e.n_neighbors??3,onChange:h=>p("n_neighbors",parseInt(h.target.value))})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Selection Kind"}),a.jsxs("select",{className:"w-full rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 p-2 text-sm text-gray-900 dark:text-gray-100 focus:border-blue-500 focus:ring-1 focus:ring-blue-500",value:e.kind_sel??"all",onChange:h=>p("kind_sel",h.target.value),children:[a.jsx("option",{value:"all",children:"All"}),a.jsx("option",{value:"mode",children:"Mode"})]})]})]}),m.length>0&&a.jsxs("div",{className:"mt-0 border rounded-md overflow-hidden border-gray-200 dark:border-gray-700",children:[a.jsxs("button",{className:"w-full flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",onClick:()=>l(!i),children:[a.jsxs("span",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:["Recommendations (",m.length,")"]}),i?a.jsx(sa,{size:16}):a.jsx(vt,{size:16})]}),i&&a.jsx("div",{className:"p-3 bg-white dark:bg-gray-900 border-t border-gray-200 dark:border-gray-700",children:a.jsx(Jr,{recommendations:m,onApply:y})})]}),n&&a.jsx(hT,{nodeId:n})]})]})})},gT=e=>e.target_column?e.type==="oversampling"&&["smote","adasyn","borderline_smote","svm_smote","kmeans_smote"].includes(e.method)&&(e.k_neighbors??5)<1?{isValid:!1,message:"k_neighbors must be at least 1."}:{isValid:!0}:{isValid:!1,message:"Target column is required for resampling."},xT={type:"ResamplingNode",label:"Resampling",category:"Preprocessing",description:"Balance dataset classes using oversampling or undersampling techniques.",icon:Wt,inputs:[{id:"in",label:"Data",type:"dataset"}],outputs:[{id:"out",label:"Balanced Data",type:"dataset"}],settings:pT,validate:gT,getDefaultConfig:()=>({type:"oversampling",method:"smote",target_column:"",sampling_strategy:"auto",random_state:42,k_neighbors:5,replacement:!1,version:1,n_neighbors:3,kind_sel:"all"})},yT=[{value:"arithmetic",label:"Arithmetic",icon:Lf},{value:"datetime_extract",label:"Date Extraction",icon:V4},{value:"ratio",label:"Ratio",icon:i3},{value:"similarity",label:"Similarity",icon:J4},{value:"polynomial",label:"Polynomial",icon:y3},{value:"group_agg",label:"Group Agg",icon:Sv}],vT=["add","subtract","multiply","divide"],bT=["year","month","day","weekday","hour","quarter","is_weekend"],wT=["ratio","token_sort_ratio","token_set_ratio"],NT=["mean","sum","count","min","max","std","median"],Xt=({columns:e,selected:t,onChange:n,label:r,single:s})=>{const[o,i]=S.useState(""),l=e.filter(u=>u.toLowerCase().includes(o.toLowerCase())),c=u=>{s?n([u]):t.includes(u)?n(t.filter(d=>d!==u)):n([...t,u])};return a.jsxs("div",{className:"space-y-1.5",children:[r&&a.jsx("label",{className:"text-xs font-medium text-muted-foreground",children:r}),a.jsxs("div",{className:"border rounded bg-background overflow-hidden flex flex-col",children:[a.jsxs("div",{className:"flex items-center px-2 py-1.5 border-b bg-muted/20",children:[a.jsx(Yr,{size:12,className:"text-muted-foreground mr-1.5"}),a.jsx("input",{className:"flex-1 bg-transparent text-xs outline-none placeholder:text-muted-foreground/70",placeholder:"Search columns...",value:o,onChange:u=>i(u.target.value)})]}),a.jsx("div",{className:"max-h-32 overflow-y-auto p-1 space-y-0.5",children:l.length>0?l.map(u=>{const d=t.includes(u);return a.jsxs("div",{onClick:()=>c(u),className:`
                    flex items-center gap-2 px-2 py-1.5 rounded text-xs cursor-pointer transition-colors
                    ${d?"bg-primary/10 text-primary font-medium":"hover:bg-accent text-foreground"}
                  `,children:[a.jsx("div",{className:`
                    w-3 h-3 rounded border flex items-center justify-center
                    ${d?"border-primary bg-primary text-primary-foreground":"border-muted-foreground/40"}
                  `,children:d&&a.jsx(wv,{size:8,strokeWidth:4})}),a.jsx("span",{className:"truncate",children:u})]},u)}):a.jsx("div",{className:"p-2 text-xs text-muted-foreground text-center italic",children:"No columns found"})})]})]})},jT=({config:e,onChange:t,nodeId:n})=>{var k;const s=(k=Ie(n||"").find(v=>v.datasetId))==null?void 0:k.datasetId,{data:o}=Ee(s),i=oe(v=>v.executionResult),l=n?i==null?void 0:i.node_results[n]:null,c=l==null?void 0:l.metrics,[u,d]=S.useState(!1),f=o?Object.values(o.columns).map(v=>v.name):[],m=o?Object.values(o.columns).filter(v=>["int","float","number"].some(_=>{var M;return(M=v.dtype)==null?void 0:M.toLowerCase().includes(_)})).map(v=>v.name):[],y=o?Object.values(o.columns).filter(v=>["date","time"].some(_=>{var M;return(M=v.dtype)==null?void 0:M.toLowerCase().includes(_)})).map(v=>v.name):[],p=o?Object.values(o.columns).filter(v=>["string","object","text"].some(_=>{var M;return(M=v.dtype)==null?void 0:M.toLowerCase().includes(_)})).map(v=>v.name):[],w=la(n||"",{types:["feature_generation"],suggestedNodeTypes:["FeatureGenerationNode"],scope:"column"}),N=v=>{console.log("Applying recommendation:",v)},h=v=>{const _={operation_type:v,method:v==="arithmetic"?"add":v==="similarity"?"ratio":v==="group_agg"?"mean":v==="polynomial"?"poly":"year",input_columns:[],output_column:"",datetime_features:v==="datetime_extract"?["year"]:void 0,degree:v==="polynomial"?2:void 0,interaction_only:v==="polynomial"?!1:void 0,isExpanded:!0};t({operations:[...e.operations||[],_]})},g=(v,_)=>{const M=[...e.operations||[]];M[v]={...M[v],..._},t({operations:M})},x=(v,_)=>{_.stopPropagation();const M=[...e.operations||[]];M.splice(v,1),t({operations:M})},b=v=>{const _=[...e.operations||[]];_[v]={..._[v],isExpanded:!_[v].isExpanded},t({operations:_})},j=(v,_)=>`${v.operation_type}_${_}`;return a.jsxs("div",{className:"flex h-full",children:[a.jsxs("div",{className:"w-20 border-r bg-muted/10 flex flex-col items-center py-4 gap-2 overflow-y-auto shrink-0",children:[a.jsx("span",{className:"text-[10px] font-bold text-muted-foreground mb-2 uppercase tracking-wider",children:"Add"}),yT.map(v=>a.jsxs("button",{onClick:()=>h(v.value),className:"flex flex-col items-center justify-center gap-1 p-1.5 rounded-md border bg-card hover:bg-accent hover:border-primary/50 transition-all group w-16 h-14 shadow-sm",title:v.label,children:[a.jsx(v.icon,{size:18,className:"text-muted-foreground group-hover:text-primary"}),a.jsx("span",{className:"text-[9px] font-medium text-muted-foreground group-hover:text-foreground text-center leading-tight line-clamp-2",children:v.label.replace(" ",`
`)})]},v.value))]}),a.jsxs("div",{className:"flex-1 flex flex-col min-w-0 bg-background",children:[w.length>0&&a.jsxs("div",{className:"border-b bg-muted/10",children:[a.jsxs("button",{onClick:()=>d(!u),className:"w-full flex items-center justify-between px-4 py-2 text-xs font-medium text-muted-foreground hover:text-primary hover:bg-muted/20 transition-colors",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(kv,{size:14,className:w.length>0?"text-yellow-500":""}),a.jsxs("span",{children:["Recommendations (",w.length,")"]})]}),u?a.jsx(vt,{size:14}):a.jsx(xo,{size:14})]}),u&&a.jsx("div",{className:"p-4 bg-muted/5 border-t",children:a.jsx(Jr,{recommendations:w,onApply:N,className:"mb-0"})})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 min-h-0",children:[(e.operations||[]).map((v,_)=>{var M,P,T;return a.jsxs("div",{className:"border rounded-lg bg-card shadow-sm overflow-hidden",children:[a.jsxs("div",{className:"flex items-center justify-between px-3 py-2 bg-muted/30 border-b cursor-pointer hover:bg-muted/50 transition-colors",onClick:()=>b(_),children:[a.jsxs("div",{className:"flex items-center gap-2",children:[v.isExpanded?a.jsx(vt,{size:14,className:"text-muted-foreground"}):a.jsx(xo,{size:14,className:"text-muted-foreground"}),a.jsx("span",{className:"text-[10px] font-bold uppercase tracking-wider text-primary bg-primary/10 px-1.5 py-0.5 rounded",children:v.operation_type==="datetime_extract"?"Date":v.operation_type.replace("_"," ")}),["arithmetic","similarity","group_agg"].includes(v.operation_type)&&a.jsx("select",{className:"text-sm border-none bg-transparent font-semibold focus:ring-0 cursor-pointer hover:text-primary",value:v.method,onClick:C=>C.stopPropagation(),onChange:C=>g(_,{method:C.target.value}),children:(v.operation_type==="arithmetic"?vT:v.operation_type==="similarity"?wT:v.operation_type==="group_agg"?NT:[]).map(C=>a.jsx("option",{value:C,children:C.replace("_"," ")},C))})]}),a.jsx("button",{onClick:C=>x(_,C),className:"text-muted-foreground hover:text-destructive transition-colors p-1 rounded-full hover:bg-destructive/10",children:a.jsx(Gr,{size:14})})]}),v.isExpanded&&a.jsxs("div",{className:"p-3 space-y-4",children:[v.operation_type==="arithmetic"&&a.jsxs("div",{className:"flex flex-col gap-3",children:[a.jsx("div",{className:"text-[10px] text-muted-foreground bg-muted/20 p-1.5 rounded border border-muted/20",children:v.method==="divide"?"Performs row-by-row division (Col A / Col B) for each record.":"Performs row-by-row arithmetic between two columns."}),a.jsx(Xt,{label:"Column A (Left Operand)",columns:m,selected:v.input_columns.slice(0,1),onChange:C=>g(_,{input_columns:C}),single:!0}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"h-px bg-border flex-1"}),a.jsx("span",{className:"text-lg font-bold text-muted-foreground bg-muted/20 w-8 h-8 rounded flex items-center justify-center",children:v.method==="add"?"+":v.method==="subtract"?"-":v.method==="multiply"?"":""}),a.jsx("div",{className:"h-px bg-border flex-1"})]}),a.jsx(Xt,{label:"Column B (Right Operand)",columns:m,selected:((M=v.secondary_columns)==null?void 0:M.slice(0,1))||[],onChange:C=>g(_,{secondary_columns:C}),single:!0})]}),v.operation_type==="ratio"&&a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"text-[10px] text-muted-foreground bg-muted/20 p-1.5 rounded border border-muted/20",children:["Calculates aggregate ratio: ",a.jsx("strong",{children:"Sum(Numerator) / Sum(Denominator)"}),"."]}),a.jsx(Xt,{label:"Numerator (Sum)",columns:m,selected:v.input_columns,onChange:C=>g(_,{input_columns:C})}),a.jsxs("div",{className:"relative flex items-center justify-center",children:[a.jsx("div",{className:"absolute inset-0 flex items-center",children:a.jsx("div",{className:"w-full border-t border-dashed"})}),a.jsx("span",{className:"relative bg-card px-2 text-xs text-muted-foreground font-medium",children:"Divided By"})]}),a.jsx(Xt,{label:"Denominator (Sum)",columns:m,selected:v.secondary_columns||[],onChange:C=>g(_,{secondary_columns:C})})]}),v.operation_type==="similarity"&&a.jsxs("div",{className:"flex flex-col gap-3",children:[a.jsxs("div",{className:"text-[10px] text-muted-foreground bg-muted/20 p-1.5 rounded border border-muted/20 space-y-1",children:[a.jsx("p",{children:"Calculates string similarity score (0-100) between two text columns."}),a.jsxs("ul",{className:"list-disc pl-3 space-y-0.5 opacity-80",children:[a.jsxs("li",{children:[a.jsx("strong",{children:"Ratio:"}),' Strict character matching (Levenshtein). "apple banana" != "banana apple".']}),a.jsxs("li",{children:[a.jsx("strong",{children:"Token Sort:"}),' Sorts words alphabetically then compares. "apple banana" == "banana apple".']}),a.jsxs("li",{children:[a.jsx("strong",{children:"Token Set:"})," Compares intersection of words. Handles duplicates/subsets well."]})]})]}),a.jsx(Xt,{label:"String A",columns:p,selected:v.input_columns.slice(0,1),onChange:C=>g(_,{input_columns:C}),single:!0}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"h-px bg-border flex-1"}),a.jsx("span",{className:"text-xs font-bold text-muted-foreground bg-muted/20 px-2 py-1 rounded",children:"vs"}),a.jsx("div",{className:"h-px bg-border flex-1"})]}),a.jsx(Xt,{label:"String B",columns:p,selected:((P=v.secondary_columns)==null?void 0:P.slice(0,1))||[],onChange:C=>g(_,{secondary_columns:C}),single:!0})]}),v.operation_type==="polynomial"&&a.jsxs("div",{className:"space-y-3",children:[a.jsx("div",{className:"text-[10px] text-muted-foreground bg-muted/20 p-1.5 rounded border border-muted/20",children:"Generates polynomial and interaction features (e.g., A, AB)."}),a.jsx(Xt,{label:"Input Columns",columns:m,selected:v.input_columns,onChange:C=>g(_,{input_columns:C})}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-xs font-medium text-muted-foreground",children:"Degree"}),a.jsx("input",{type:"number",min:"2",max:"5",className:"w-full text-xs border rounded p-1.5",value:v.degree||2,onChange:C=>g(_,{degree:parseInt(C.target.value)})})]}),a.jsx("div",{className:"space-y-1 pt-5",children:a.jsxs("label",{className:"flex items-center gap-2 text-xs cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:v.interaction_only||!1,onChange:C=>g(_,{interaction_only:C.target.checked})}),"Interaction Only"]})})]})]}),v.operation_type==="group_agg"&&a.jsxs("div",{className:"space-y-3",children:[a.jsx("div",{className:"text-[10px] text-muted-foreground bg-muted/20 p-1.5 rounded border border-muted/20",children:"Calculates aggregate statistics (e.g., Mean Salary) grouped by a categorical column (e.g., Department) and assigns it back to each row."}),a.jsx(Xt,{label:"Group By (Categorical)",columns:p.length>0?p:f,selected:v.input_columns.slice(0,1),onChange:C=>g(_,{input_columns:C}),single:!0}),a.jsxs("div",{className:"relative flex items-center justify-center",children:[a.jsx("div",{className:"absolute inset-0 flex items-center",children:a.jsx("div",{className:"w-full border-t border-dashed"})}),a.jsx("span",{className:"relative bg-card px-2 text-xs text-muted-foreground font-medium",children:"Target Column"})]}),a.jsx(Xt,{label:"Target (Numeric)",columns:m,selected:((T=v.secondary_columns)==null?void 0:T.slice(0,1))||[],onChange:C=>g(_,{secondary_columns:C}),single:!0})]}),v.operation_type==="datetime_extract"&&a.jsxs("div",{className:"space-y-3",children:[a.jsx(Xt,{label:"Date Column",columns:y.length>0?y:f,selected:v.input_columns.slice(0,1),onChange:C=>g(_,{input_columns:C}),single:!0}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("label",{className:"text-xs font-medium text-muted-foreground",children:"Features to Extract"}),a.jsx("div",{className:"grid grid-cols-2 gap-2",children:bT.map(C=>a.jsxs("label",{className:"flex items-center gap-2 text-xs p-1.5 border rounded hover:bg-accent cursor-pointer transition-colors",children:[a.jsx("input",{type:"checkbox",className:"rounded border-muted-foreground/40 text-primary focus:ring-0",checked:(v.datetime_features||[]).includes(C),onChange:O=>{const E=v.datetime_features||[],z=O.target.checked?[...E,C]:E.filter(A=>A!==C);g(_,{datetime_features:z})}}),a.jsx("span",{className:"capitalize",children:C.replace("_"," ")})]},C))})]})]}),a.jsxs("div",{className:"pt-2",children:[a.jsx("label",{className:"text-[10px] font-medium text-muted-foreground uppercase tracking-wider mb-1 block",children:"Output Column Name"}),a.jsx("input",{type:"text",className:"w-full text-xs border rounded px-2 py-1.5 bg-background focus:border-primary focus:ring-1 focus:ring-primary outline-none transition-all",placeholder:j(v,_),value:v.output_column||"",onChange:C=>g(_,{output_column:C.target.value})})]})]})]},_)}),(!e.operations||e.operations.length===0)&&a.jsxs("div",{className:"flex flex-col items-center justify-center py-12 border-2 border-dashed rounded-lg bg-muted/5 text-muted-foreground",children:[a.jsx(Lf,{size:32,className:"mb-2 opacity-20"}),a.jsx("p",{className:"text-xs font-medium",children:"No operations added"}),a.jsx("p",{className:"text-[10px] opacity-70",children:"Select a type above to start"})]}),c&&a.jsxs("div",{className:"border rounded-lg bg-muted/10 p-4",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-3 text-sm font-semibold text-primary",children:[a.jsx(Wt,{size:14}),a.jsx("span",{children:"Last Run Results"})]}),a.jsx("div",{className:"space-y-2 text-xs",children:c.generated_features&&c.generated_features.length>0?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-muted-foreground",children:"New Features Created:"}),a.jsx("span",{className:"font-medium text-primary bg-primary/10 px-2 py-0.5 rounded-full",children:c.generated_features.length})]}),a.jsxs("div",{className:"pt-2",children:[a.jsx("span",{className:"text-[10px] text-muted-foreground uppercase tracking-wider font-semibold mb-1.5 block",children:"Generated Columns"}),a.jsx("div",{className:"flex flex-wrap gap-1.5",children:c.generated_features.map(v=>a.jsx("span",{className:"px-2 py-1 bg-background border rounded text-[10px] font-mono text-foreground shadow-sm",children:v},v))})]})]}):a.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground italic",children:[a.jsx(Oo,{size:12}),a.jsx("span",{children:"No features generated in last run."})]})})]})]})]})]})},kT={type:"FeatureGenerationNode",label:"Feature Generation",description:"Create new features via math, stats, or date extraction.",icon:Lf,category:"Preprocessing",inputs:[{id:"in",type:"dataset",label:"Dataset"}],outputs:[{id:"out",type:"dataset",label:"Enhanced"}],validate:e=>{var t,n,r;if(!e.operations||e.operations.length===0)return{isValid:!1,message:"Add at least one operation."};for(const s of e.operations){if(s.operation_type==="arithmetic"&&(s.input_columns.length===0||!((t=s.secondary_columns)!=null&&t.length)&&!((n=s.constants)!=null&&n.length)))return{isValid:!1,message:"Arithmetic requires two operands."};if(s.operation_type==="datetime_extract"&&s.input_columns.length===0)return{isValid:!1,message:"Select a date column."};if(s.operation_type==="polynomial"&&s.input_columns.length===0)return{isValid:!1,message:"Select input columns for polynomial features."};if(s.operation_type==="group_agg"&&(s.input_columns.length===0||!((r=s.secondary_columns)!=null&&r.length)))return{isValid:!1,message:"Select both Group By and Target columns."}}return{isValid:!0}},settings:jT,getDefaultConfig:()=>({operations:[]})},_T=({columns:e,selected:t,onChange:n})=>{const[r,s]=S.useState(""),o=e.filter(l=>l.toLowerCase().includes(r.toLowerCase())),i=l=>{t.includes(l)?n(t.filter(c=>c!==l)):n([...t,l])};return a.jsxs("div",{className:"border rounded bg-background overflow-hidden flex flex-col max-h-40",children:[a.jsxs("div",{className:"flex items-center px-2 py-1.5 border-b bg-muted/20",children:[a.jsx(Yr,{size:12,className:"text-muted-foreground mr-1.5"}),a.jsx("input",{className:"flex-1 bg-transparent text-xs outline-none placeholder:text-muted-foreground/70",placeholder:"Search columns...",value:r,onChange:l=>s(l.target.value)})]}),a.jsx("div",{className:"overflow-y-auto p-1 space-y-0.5",children:o.length>0?o.map(l=>{const c=t.includes(l);return a.jsxs("div",{onClick:()=>i(l),className:`
                  flex items-center gap-2 px-2 py-1.5 rounded text-xs cursor-pointer transition-colors
                  ${c?"bg-blue-50 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300 font-medium":"hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-700 dark:text-gray-300"}
                `,children:[a.jsx("div",{className:`
                  w-3 h-3 rounded border flex items-center justify-center
                  ${c?"border-blue-500 bg-blue-500 text-white":"border-gray-400 dark:border-gray-600"}
                `,children:c&&a.jsx("div",{className:"w-1.5 h-1.5 bg-white rounded-full"})}),a.jsx("span",{className:"truncate",children:l})]},l)}):a.jsx("div",{className:"p-2 text-xs text-gray-500 text-center italic",children:"No columns found"})})]})},ST=({operation:e,onChange:t,onDelete:n})=>a.jsxs("div",{className:"p-3 border rounded-md bg-gray-50 dark:bg-gray-800/50 border-gray-200 dark:border-gray-700 space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("select",{className:"text-xs font-medium bg-transparent border-none focus:ring-0 p-0 text-gray-900 dark:text-gray-100",value:e.op,onChange:r=>{const s=r.target.value;let o="both";s==="case"&&(o="lower"),s==="remove_special"&&(o="keep_alphanumeric"),s==="regex"&&(o="custom"),t({...e,op:s,mode:o})},children:[a.jsx("option",{value:"trim",children:"Trim Whitespace"}),a.jsx("option",{value:"case",children:"Change Case"}),a.jsx("option",{value:"remove_special",children:"Remove Special Chars"}),a.jsx("option",{value:"regex",children:"Regex Replace"})]}),a.jsx("button",{onClick:n,className:"text-gray-400 hover:text-red-500 transition-colors",children:a.jsx(Gr,{size:14})})]}),a.jsxs("div",{className:"space-y-2",children:[e.op==="trim"&&a.jsxs("select",{className:"w-full text-xs rounded border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 p-1.5",value:e.mode,onChange:r=>t({...e,mode:r.target.value}),children:[a.jsx("option",{value:"both",children:"Both Ends"}),a.jsx("option",{value:"leading",children:"Leading Only"}),a.jsx("option",{value:"trailing",children:"Trailing Only"})]}),e.op==="case"&&a.jsxs("select",{className:"w-full text-xs rounded border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 p-1.5",value:e.mode,onChange:r=>t({...e,mode:r.target.value}),children:[a.jsx("option",{value:"lower",children:"Lower Case"}),a.jsx("option",{value:"upper",children:"Upper Case"}),a.jsx("option",{value:"title",children:"Title Case"}),a.jsx("option",{value:"sentence",children:"Sentence Case"})]}),e.op==="remove_special"&&a.jsxs("div",{className:"space-y-2",children:[a.jsxs("select",{className:"w-full text-xs rounded border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 p-1.5",value:e.mode,onChange:r=>t({...e,mode:r.target.value}),children:[a.jsx("option",{value:"keep_alphanumeric",children:"Keep Alphanumeric"}),a.jsx("option",{value:"keep_alphanumeric_space",children:"Keep Alphanumeric & Space"}),a.jsx("option",{value:"letters_only",children:"Letters Only"}),a.jsx("option",{value:"digits_only",children:"Digits Only"})]}),a.jsx("input",{type:"text",className:"w-full text-xs rounded border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 p-1.5",placeholder:"Replacement (optional)",value:e.replacement||"",onChange:r=>t({...e,replacement:r.target.value})})]}),e.op==="regex"&&a.jsxs("div",{className:"space-y-2",children:[a.jsxs("select",{className:"w-full text-xs rounded border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 p-1.5",value:e.mode,onChange:r=>t({...e,mode:r.target.value}),children:[a.jsx("option",{value:"custom",children:"Custom Pattern"}),a.jsx("option",{value:"collapse_whitespace",children:"Collapse Whitespace"}),a.jsx("option",{value:"extract_digits",children:"Extract Digits"}),a.jsx("option",{value:"normalize_slash_dates",children:"Normalize Dates (MM/DD/YYYY)"})]}),e.mode==="custom"&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex gap-1",children:[a.jsx("input",{type:"text",className:"flex-1 min-w-0 text-xs rounded border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 p-1.5 font-mono",placeholder:"Regex Pattern",value:e.pattern||"",onChange:r=>t({...e,pattern:r.target.value})}),a.jsx("button",{className:"p-1.5 bg-gray-100 dark:bg-gray-700 rounded border border-gray-300 dark:border-gray-600 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600",title:"Generate regex from literal text",onClick:()=>{const r=prompt("Enter the exact text you want to match (it will be escaped):");if(r){const s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");t({...e,pattern:s})}},children:a.jsx(x3,{size:14})})]}),a.jsx("input",{type:"text",className:"w-full text-xs rounded border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 p-1.5",placeholder:"Replacement",value:e.repl||"",onChange:r=>t({...e,repl:r.target.value})})]})]})]})]}),CT=({config:e,onChange:t,nodeId:n})=>{var w;const r=S.useRef(null),[s,o]=S.useState(!1),[i,l]=S.useState(!0),u=(w=Ie(n||"").find(N=>N.datasetId))==null?void 0:w.datasetId,{data:d}=Ee(u),f=d?Object.values(d.columns).filter(N=>N.dtype==="object"||N.dtype==="string"||N.dtype==="category").map(N=>N.name):[];S.useEffect(()=>{if(!r.current)return;const N=new ResizeObserver(h=>{for(const g of h)o(g.contentRect.width>400)});return N.observe(r.current),()=>N.disconnect()},[]);const m=()=>{t({...e,operations:[...e.operations,{op:"trim",mode:"both"}]})},y=(N,h)=>{const g=[...e.operations];g[N]=h,t({...e,operations:g})},p=N=>{const h=e.operations.filter((g,x)=>x!==N);t({...e,operations:h})};return a.jsx("div",{ref:r,className:`flex flex-col h-full w-full bg-white dark:bg-gray-900 ${s?"overflow-hidden":"overflow-y-auto"}`,children:a.jsxs("div",{className:`flex-1 min-h-0 p-4 gap-4 ${s?"grid grid-cols-2":"flex flex-col"}`,children:[a.jsx("div",{className:`space-y-4 ${s?"overflow-y-auto pr-2":"shrink-0"}`,children:a.jsxs("div",{children:[a.jsxs("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 block",children:["Target Columns (",e.columns.length,")"]}),a.jsx(_T,{columns:f,selected:e.columns,onChange:N=>t({...e,columns:N})}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Only text/categorical columns are shown."})]})}),a.jsxs("div",{className:`space-y-4 ${s?"overflow-y-auto pl-2 border-l border-gray-100 dark:border-gray-700":"shrink-0 pt-4 border-t border-gray-100 dark:border-gray-700"}`,children:[a.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-md border border-blue-100 dark:border-blue-800 overflow-hidden",children:[a.jsxs("button",{onClick:()=>l(!i),className:"w-full flex items-center gap-2 p-3 text-left hover:bg-blue-100/50 dark:hover:bg-blue-900/30 transition-colors",children:[a.jsx(Oo,{className:"text-blue-600 dark:text-blue-400 shrink-0",size:16}),a.jsx("span",{className:"text-xs font-semibold text-blue-800 dark:text-blue-200 flex-1",children:"About Text Cleaning"}),i?a.jsx(sa,{size:14,className:"text-blue-600 dark:text-blue-400"}):a.jsx(vt,{size:14,className:"text-blue-600 dark:text-blue-400"})]}),i&&a.jsx("div",{className:"px-3 pb-3 text-xs text-blue-800 dark:text-blue-200 pl-9",children:a.jsx("p",{children:"Clean and standardize text columns by trimming whitespace, changing case, removing special characters, or applying custom regex patterns."})})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Cleaning Operations"}),a.jsxs("button",{onClick:m,className:"flex items-center gap-1 text-xs font-medium text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300",children:[a.jsx(Lo,{size:14}),"Add Step"]})]}),a.jsx("div",{className:"space-y-3",children:e.operations.length===0?a.jsxs("div",{className:"text-center p-6 border-2 border-dashed border-gray-200 dark:border-gray-700 rounded-lg",children:[a.jsx("p",{className:"text-xs text-gray-500",children:"No operations added."}),a.jsx("button",{onClick:m,className:"mt-2 text-xs text-blue-600 hover:underline",children:"Add your first cleaning step"})]}):e.operations.map((N,h)=>a.jsx(ST,{operation:N,onChange:g=>y(h,g),onDelete:()=>p(h)},h))})]})]})})},ET={type:"TextCleaning",label:"Text Cleaning",category:"Preprocessing",description:"Clean and standardize text columns.",icon:q4,inputs:[{id:"in",label:"Data",type:"dataset"}],outputs:[{id:"out",label:"Cleaned Data",type:"dataset"}],settings:CT,validate:e=>e.columns.length===0?{isValid:!1,message:"Select at least one column."}:e.operations.length===0?{isValid:!1,message:"Add at least one operation."}:{isValid:!0},getDefaultConfig:()=>({columns:[],operations:[{op:"trim",mode:"both"}]})},RT=({columns:e,selected:t,onChange:n})=>{const[r,s]=S.useState(""),o=e.filter(l=>l.toLowerCase().includes(r.toLowerCase())),i=l=>{t.includes(l)?n(t.filter(c=>c!==l)):n([...t,l])};return a.jsxs("div",{className:"border rounded bg-background overflow-hidden flex flex-col max-h-40",children:[a.jsxs("div",{className:"flex items-center px-2 py-1.5 border-b bg-muted/20",children:[a.jsx(Yr,{size:12,className:"text-muted-foreground mr-1.5"}),a.jsx("input",{className:"flex-1 bg-transparent text-xs outline-none placeholder:text-muted-foreground/70",placeholder:"Search columns...",value:r,onChange:l=>s(l.target.value)})]}),a.jsx("div",{className:"overflow-y-auto p-1 space-y-0.5",children:o.length>0?o.map(l=>{const c=t.includes(l);return a.jsxs("div",{onClick:()=>i(l),className:`
                  flex items-center gap-2 px-2 py-1.5 rounded text-xs cursor-pointer transition-colors
                  ${c?"bg-blue-50 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300 font-medium":"hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-700 dark:text-gray-300"}
                `,children:[a.jsx("div",{className:`
                  w-3 h-3 rounded border flex items-center justify-center
                  ${c?"border-blue-500 bg-blue-500 text-white":"border-gray-400 dark:border-gray-600"}
                `,children:c&&a.jsx("div",{className:"w-1.5 h-1.5 bg-white rounded-full"})}),a.jsx("span",{className:"truncate",children:l})]},l)}):a.jsx("div",{className:"p-2 text-xs text-gray-500 text-center italic",children:"No columns found"})})]})},Bp=({value:e,type:t,onChange:n,placeholder:r})=>{const s=i=>{let l=e;i==="number"&&(l=Number(e)||0),i==="boolean"&&(l=!!e),i==="string"&&(l=String(e)),i==="null"&&(l=null),i==="nan"&&(l="NaN"),n(l,i)},o=i=>{let l=i.target.value;t==="number"&&(l=parseFloat(l)),n(l,t)};return a.jsxs("div",{className:"flex gap-1",children:[a.jsxs("select",{className:"w-20 text-[10px] rounded border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-800 px-1",value:t,onChange:i=>s(i.target.value),children:[a.jsx("option",{value:"string",children:"Text"}),a.jsx("option",{value:"number",children:"Num"}),a.jsx("option",{value:"boolean",children:"Bool"}),a.jsx("option",{value:"null",children:"Null"})]}),t==="string"&&a.jsx("input",{type:"text",className:"flex-1 min-w-0 text-xs rounded border border-gray-300 dark:border-gray-600 px-2 py-1",value:e||"",onChange:o,placeholder:r}),t==="number"&&a.jsx("input",{type:"number",className:"flex-1 min-w-0 text-xs rounded border border-gray-300 dark:border-gray-600 px-2 py-1",value:e,onChange:o,placeholder:r}),t==="boolean"&&a.jsxs("select",{className:"flex-1 min-w-0 text-xs rounded border border-gray-300 dark:border-gray-600 px-2 py-1",value:String(e),onChange:i=>n(i.target.value==="true","boolean"),children:[a.jsx("option",{value:"true",children:"True"}),a.jsx("option",{value:"false",children:"False"})]}),(t==="null"||t==="nan")&&a.jsx("div",{className:"flex-1 min-w-0 text-xs rounded border border-gray-300 dark:border-gray-600 px-2 py-1 bg-gray-100 dark:bg-gray-800 text-gray-500 italic flex items-center",children:t==="null"?"None / Null":"NaN"})]})},TT=({item:e,onChange:t,onDelete:n})=>a.jsxs("div",{className:"p-2 border rounded-md bg-gray-50 dark:bg-gray-800/50 border-gray-200 dark:border-gray-700 flex flex-col gap-2",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("div",{className:"text-[10px] text-gray-500 uppercase font-semibold tracking-wider",children:"Find"}),a.jsx("button",{onClick:n,className:"text-gray-400 hover:text-red-500 transition-colors p-1",children:a.jsx(Gr,{size:14})})]}),a.jsx(Bp,{value:e.old,type:e.oldType,onChange:(r,s)=>t({...e,old:r,oldType:s}),placeholder:"Value to find"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"text-gray-400",children:a.jsx(z4,{size:14,className:"rotate-90"})}),a.jsx("div",{className:"text-[10px] text-gray-500 uppercase font-semibold tracking-wider",children:"Replace With"})]}),a.jsx(Bp,{value:e.new,type:e.newType,onChange:(r,s)=>t({...e,new:r,newType:s}),placeholder:"New value"})]}),MT=({config:e,onChange:t,nodeId:n})=>{var w;const r=S.useRef(null),[s,o]=S.useState(!1),[i,l]=S.useState(!0),u=(w=Ie(n||"").find(N=>N.datasetId))==null?void 0:w.datasetId,{data:d}=Ee(u),f=d?Object.values(d.columns).map(N=>N.name):[];S.useEffect(()=>{if(!r.current)return;const N=new ResizeObserver(h=>{for(const g of h)o(g.contentRect.width>400)});return N.observe(r.current),()=>N.disconnect()},[]);const m=()=>{t({...e,replacements:[...e.replacements,{old:"",new:"",oldType:"string",newType:"string"}]})},y=(N,h)=>{const g=[...e.replacements];g[N]=h,t({...e,replacements:g})},p=N=>{const h=e.replacements.filter((g,x)=>x!==N);t({...e,replacements:h})};return a.jsx("div",{ref:r,className:`flex flex-col h-full w-full bg-white dark:bg-gray-900 ${s?"overflow-hidden":"overflow-y-auto"}`,children:a.jsxs("div",{className:`flex-1 min-h-0 p-4 gap-4 ${s?"grid grid-cols-2":"flex flex-col"}`,children:[a.jsx("div",{className:`space-y-4 ${s?"overflow-y-auto pr-2":"shrink-0"}`,children:a.jsxs("div",{children:[a.jsxs("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 block",children:["Target Columns (",e.columns.length,")"]}),a.jsx(RT,{columns:f,selected:e.columns,onChange:N=>t({...e,columns:N})})]})}),a.jsxs("div",{className:`space-y-4 ${s?"overflow-y-auto pl-2 border-l border-gray-100 dark:border-gray-700":"shrink-0 pt-4 border-t border-gray-100 dark:border-gray-700"}`,children:[a.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-md border border-blue-100 dark:border-blue-800 overflow-hidden",children:[a.jsxs("button",{onClick:()=>l(!i),className:"w-full flex items-center gap-2 p-3 text-left hover:bg-blue-100/50 dark:hover:bg-blue-900/30 transition-colors",children:[a.jsx(Oo,{className:"text-blue-600 dark:text-blue-400 shrink-0",size:16}),a.jsx("span",{className:"text-xs font-semibold text-blue-800 dark:text-blue-200 flex-1",children:"About Value Replacement"}),i?a.jsx(sa,{size:14,className:"text-blue-600 dark:text-blue-400"}):a.jsx(vt,{size:14,className:"text-blue-600 dark:text-blue-400"})]}),i&&a.jsx("div",{className:"px-3 pb-3 text-xs text-blue-800 dark:text-blue-200 pl-9",children:a.jsx("p",{children:'Replace specific values with new ones. Useful for fixing typos, recoding categories (e.g., "Yes" to 1), or handling specific placeholders.'})})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Value Mappings"}),a.jsxs("button",{onClick:m,className:"flex items-center gap-1 text-xs font-medium text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300",children:[a.jsx(Lo,{size:14}),"Add Mapping"]})]}),a.jsx("div",{className:"space-y-3",children:e.replacements.length===0?a.jsxs("div",{className:"text-center p-6 border-2 border-dashed border-gray-200 dark:border-gray-700 rounded-lg",children:[a.jsx("p",{className:"text-xs text-gray-500",children:"No replacements defined."}),a.jsx("button",{onClick:m,className:"mt-2 text-xs text-blue-600 hover:underline",children:"Add your first replacement"})]}):e.replacements.map((N,h)=>a.jsx(TT,{item:N,onChange:g=>y(h,g),onDelete:()=>p(h)},h))})]})]})})},PT={type:"ValueReplacement",label:"Value Replacement",category:"Preprocessing",description:"Replace specific values in columns.",icon:l3,inputs:[{id:"in",label:"Data",type:"dataset"}],outputs:[{id:"out",label:"Processed Data",type:"dataset"}],settings:MT,validate:e=>e.columns.length===0?{isValid:!1,message:"Select at least one column."}:e.replacements.length===0?{isValid:!1,message:"Add at least one replacement."}:{isValid:!0},getDefaultConfig:()=>({columns:[],replacements:[{old:"",new:"",oldType:"string",newType:"string"}]})},IT=({columns:e,selected:t,onChange:n})=>{const[r,s]=S.useState(""),o=e.filter(l=>l.toLowerCase().includes(r.toLowerCase())),i=l=>{t.includes(l)?n(t.filter(c=>c!==l)):n([...t,l])};return a.jsxs("div",{className:"border rounded bg-background overflow-hidden flex flex-col max-h-40",children:[a.jsxs("div",{className:"flex items-center px-2 py-1.5 border-b bg-muted/20",children:[a.jsx(Yr,{size:12,className:"text-muted-foreground mr-1.5"}),a.jsx("input",{className:"flex-1 bg-transparent text-xs outline-none placeholder:text-muted-foreground/70",placeholder:"Search columns...",value:r,onChange:l=>s(l.target.value)})]}),a.jsx("div",{className:"overflow-y-auto p-1 space-y-0.5",children:o.length>0?o.map(l=>{const c=t.includes(l);return a.jsxs("div",{onClick:()=>i(l),className:`
                  flex items-center gap-2 px-2 py-1.5 rounded text-xs cursor-pointer transition-colors
                  ${c?"bg-blue-50 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300 font-medium":"hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-700 dark:text-gray-300"}
                `,children:[a.jsx("div",{className:`
                  w-3 h-3 rounded border flex items-center justify-center
                  ${c?"border-blue-500 bg-blue-500 text-white":"border-gray-400 dark:border-gray-600"}
                `,children:c&&a.jsx("div",{className:"w-1.5 h-1.5 bg-white rounded-full"})}),a.jsx("span",{className:"truncate",children:l})]},l)}):a.jsx("div",{className:"p-2 text-xs text-gray-500 text-center italic",children:"No columns found"})})]})},DT=({pairs:e,onChange:t})=>{const[n,r]=S.useState(""),[s,o]=S.useState(""),i=()=>{n&&s&&(t({...e,[n]:s}),r(""),o(""))},l=c=>{const u={...e};delete u[c],t(u)};return a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex gap-2 items-end",children:[a.jsxs("div",{className:"flex-1 space-y-1",children:[a.jsx("label",{className:"text-[10px] text-gray-500 uppercase font-semibold",children:"Alias (Old)"}),a.jsx("input",{className:"w-full text-xs rounded border border-gray-300 dark:border-gray-600 px-2 py-1.5",placeholder:"e.g. NY",value:n,onChange:c=>r(c.target.value)})]}),a.jsxs("div",{className:"flex-1 space-y-1",children:[a.jsx("label",{className:"text-[10px] text-gray-500 uppercase font-semibold",children:"Canonical (New)"}),a.jsx("input",{className:"w-full text-xs rounded border border-gray-300 dark:border-gray-600 px-2 py-1.5",placeholder:"e.g. New York",value:s,onChange:c=>o(c.target.value),onKeyDown:c=>c.key==="Enter"&&i()})]}),a.jsx("button",{onClick:i,disabled:!n||!s,className:"p-1.5 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:a.jsx(Lo,{size:16})})]}),a.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto border rounded-md p-2 bg-gray-50 dark:bg-gray-800/50",children:Object.entries(e).length===0?a.jsx("div",{className:"text-center text-xs text-gray-500 py-2",children:"No custom aliases defined."}):Object.entries(e).map(([c,u])=>a.jsxs("div",{className:"flex items-center justify-between bg-white dark:bg-gray-800 p-2 rounded border border-gray-200 dark:border-gray-700 text-xs",children:[a.jsxs("div",{className:"flex items-center gap-2 overflow-hidden",children:[a.jsx("span",{className:"font-medium text-red-600 truncate max-w-[80px]",children:c}),a.jsx(bv,{size:12,className:"text-gray-400 shrink-0"}),a.jsx("span",{className:"font-medium text-green-600 truncate max-w-[80px]",children:u})]}),a.jsx("button",{onClick:()=>l(c),className:"text-gray-400 hover:text-red-500",children:a.jsx(Gr,{size:14})})]},c))})]})},AT=({config:e,onChange:t,nodeId:n})=>{var m;const r=S.useRef(null),[s,o]=S.useState(!1),[i,l]=S.useState(!0),u=(m=Ie(n||"").find(y=>y.datasetId))==null?void 0:m.datasetId,{data:d}=Ee(u),f=d?Object.values(d.columns).filter(y=>y.dtype==="object"||y.dtype==="string"||y.dtype==="category").map(y=>y.name):[];return S.useEffect(()=>{if(!r.current)return;const y=new ResizeObserver(p=>{for(const w of p)o(w.contentRect.width>400)});return y.observe(r.current),()=>y.disconnect()},[]),a.jsx("div",{ref:r,className:`flex flex-col h-full w-full bg-white dark:bg-gray-900 ${s?"overflow-hidden":"overflow-y-auto"}`,children:a.jsxs("div",{className:`flex-1 min-h-0 p-4 gap-4 ${s?"grid grid-cols-2":"flex flex-col"}`,children:[a.jsx("div",{className:`space-y-4 ${s?"overflow-y-auto pr-2":"shrink-0"}`,children:a.jsxs("div",{children:[a.jsxs("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 block",children:["Target Columns (",e.columns.length,")"]}),a.jsx(IT,{columns:f,selected:e.columns,onChange:y=>t({...e,columns:y})}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Only text/categorical columns are shown."})]})}),a.jsxs("div",{className:`space-y-4 ${s?"overflow-y-auto pl-2 border-l border-gray-100 dark:border-gray-700":"shrink-0 pt-4 border-t border-gray-100 dark:border-gray-700"}`,children:[a.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-md border border-blue-100 dark:border-blue-800 overflow-hidden",children:[a.jsxs("button",{onClick:()=>l(!i),className:"w-full flex items-center gap-2 p-3 text-left hover:bg-blue-100/50 dark:hover:bg-blue-900/30 transition-colors",children:[a.jsx(Oo,{className:"text-blue-600 dark:text-blue-400 shrink-0",size:16}),a.jsx("span",{className:"text-xs font-semibold text-blue-800 dark:text-blue-200 flex-1",children:"About Alias Replacement"}),i?a.jsx(sa,{size:14,className:"text-blue-600 dark:text-blue-400"}):a.jsx(vt,{size:14,className:"text-blue-600 dark:text-blue-400"})]}),i&&a.jsx("div",{className:"px-3 pb-3 text-xs text-blue-800 dark:text-blue-200 pl-9",children:a.jsx("p",{children:"Standardize data by mapping multiple variations (aliases) to a single canonical value. Useful for country codes, boolean strings, or custom synonyms."})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 block",children:"Replacement Mode"}),a.jsxs("select",{className:"w-full text-xs rounded border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 p-2",value:e.mode,onChange:y=>t({...e,mode:y.target.value}),children:[a.jsx("option",{value:"custom",children:"Custom Mapping"}),a.jsx("option",{value:"canonicalize_country_codes",children:"Canonicalize Country Codes"}),a.jsx("option",{value:"normalize_boolean",children:"Normalize Booleans (yes/no -> True/False)"}),a.jsx("option",{value:"punctuation",children:"Remove Punctuation"})]}),a.jsxs("p",{className:"text-[10px] text-gray-500 mt-1",children:[e.mode==="custom"&&"Define your own alias mappings below.",e.mode==="canonicalize_country_codes"&&"Standardizes country codes (e.g. 'USA', 'U.S.A.' -> 'US').",e.mode==="normalize_boolean"&&"Converts 'yes', 'y', '1' to True and 'no', 'n', '0' to False.",e.mode==="punctuation"&&"Removes common punctuation characters from text."]})]}),e.mode==="custom"&&a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 block",children:"Custom Aliases"}),a.jsx(DT,{pairs:e.custom_pairs,onChange:y=>t({...e,custom_pairs:y})})]})]})]})})},OT={type:"AliasReplacement",label:"Alias Replacement",category:"Preprocessing",description:"Standardize values by mapping aliases to canonical forms.",icon:bv,inputs:[{id:"in",label:"Data",type:"dataset"}],outputs:[{id:"out",label:"Standardized Data",type:"dataset"}],settings:AT,validate:e=>e.columns.length===0?{isValid:!1,message:"Select at least one column."}:e.mode==="custom"&&Object.keys(e.custom_pairs).length===0?{isValid:!1,message:"Add at least one alias pair for custom mode."}:{isValid:!0},getDefaultConfig:()=>({columns:[],mode:"custom",custom_pairs:{}})},LT=({columns:e,selected:t,onChange:n})=>{const[r,s]=S.useState(""),o=e.filter(l=>l.toLowerCase().includes(r.toLowerCase())),i=l=>{t.includes(l)?n(t.filter(c=>c!==l)):n([...t,l])};return a.jsxs("div",{className:"border rounded bg-background overflow-hidden flex flex-col max-h-40",children:[a.jsxs("div",{className:"flex items-center px-2 py-1.5 border-b bg-muted/20",children:[a.jsx(Yr,{size:12,className:"text-muted-foreground mr-1.5"}),a.jsx("input",{className:"flex-1 bg-transparent text-xs outline-none placeholder:text-muted-foreground/70",placeholder:"Search columns...",value:r,onChange:l=>s(l.target.value)})]}),a.jsx("div",{className:"overflow-y-auto p-1 space-y-0.5",children:o.length>0?o.map(l=>{const c=t.includes(l);return a.jsxs("div",{onClick:()=>i(l),className:`
                  flex items-center gap-2 px-2 py-1.5 rounded text-xs cursor-pointer transition-colors
                  ${c?"bg-blue-50 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300 font-medium":"hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-700 dark:text-gray-300"}
                `,children:[a.jsx("div",{className:`
                  w-3 h-3 rounded border flex items-center justify-center
                  ${c?"border-blue-500 bg-blue-500 text-white":"border-gray-400 dark:border-gray-600"}
                `,children:c&&a.jsx("div",{className:"w-1.5 h-1.5 bg-white rounded-full"})}),a.jsx("span",{className:"truncate",children:l})]},l)}):a.jsx("div",{className:"p-2 text-xs text-gray-500 text-center italic",children:"No columns found"})})]})},zT=({config:e,onChange:t,nodeId:n})=>{var m;const r=S.useRef(null),[s,o]=S.useState(!1),[i,l]=S.useState(!0),u=(m=Ie(n||"").find(y=>y.datasetId))==null?void 0:m.datasetId,{data:d}=Ee(u),f=d?Object.values(d.columns).filter(y=>["int","float","number"].some(p=>{var w;return(w=y.dtype)==null?void 0:w.toLowerCase().includes(p)})).map(y=>y.name):[];return S.useEffect(()=>{if(!r.current)return;const y=new ResizeObserver(p=>{for(const w of p)o(w.contentRect.width>400)});return y.observe(r.current),()=>y.disconnect()},[]),a.jsx("div",{ref:r,className:`flex flex-col h-full w-full bg-white dark:bg-gray-900 ${s?"overflow-hidden":"overflow-y-auto"}`,children:a.jsxs("div",{className:`flex-1 min-h-0 p-4 gap-4 ${s?"grid grid-cols-2":"flex flex-col"}`,children:[a.jsx("div",{className:`space-y-4 ${s?"overflow-y-auto pr-2":"shrink-0"}`,children:a.jsxs("div",{children:[a.jsxs("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 block",children:["Target Columns (",e.columns.length,")"]}),a.jsx(LT,{columns:f,selected:e.columns,onChange:y=>t({...e,columns:y})}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Only numeric columns are shown."})]})}),a.jsxs("div",{className:`space-y-4 ${s?"overflow-y-auto pl-2 border-l border-gray-100 dark:border-gray-700":"shrink-0 pt-4 border-t border-gray-100 dark:border-gray-700"}`,children:[a.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-md border border-blue-100 dark:border-blue-800 overflow-hidden",children:[a.jsxs("button",{onClick:()=>l(!i),className:"w-full flex items-center gap-2 p-3 text-left hover:bg-blue-100/50 dark:hover:bg-blue-900/30 transition-colors",children:[a.jsx(Oo,{className:"text-blue-600 dark:text-blue-400 shrink-0",size:16}),a.jsx("span",{className:"text-xs font-semibold text-blue-800 dark:text-blue-200 flex-1",children:"About Invalid Value Replacement"}),i?a.jsx(sa,{size:14,className:"text-blue-600 dark:text-blue-400"}):a.jsx(vt,{size:14,className:"text-blue-600 dark:text-blue-400"})]}),i&&a.jsx("div",{className:"px-3 pb-3 text-xs text-blue-800 dark:text-blue-200 pl-9",children:a.jsx("p",{children:"Use this node to handle data quality issues by replacing invalid numeric values (like negative ages or out-of-bounds sensor readings) with NaN (Missing)."})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 block",children:"Replacement Mode"}),a.jsxs("select",{className:"w-full text-xs rounded border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 p-2",value:e.mode,onChange:y=>t({...e,mode:y.target.value}),children:[a.jsx("option",{value:"negative_to_nan",children:"Negative to NaN"}),a.jsx("option",{value:"zero_to_nan",children:"Zero to NaN"}),a.jsx("option",{value:"percentage_bounds",children:"Percentage Bounds (0-100)"}),a.jsx("option",{value:"age_bounds",children:"Age Bounds (0-120)"}),a.jsx("option",{value:"custom_range",children:"Custom Range"})]}),a.jsxs("p",{className:"text-[10px] text-gray-500 mt-1",children:[e.mode==="negative_to_nan"&&"Replaces all negative values (< 0) with NaN.",e.mode==="zero_to_nan"&&"Replaces all zero values (== 0) with NaN.",e.mode==="percentage_bounds"&&"Replaces values outside 0-100 range with NaN.",e.mode==="age_bounds"&&"Replaces values outside 0-120 range with NaN.",e.mode==="custom_range"&&"Replaces values outside the specified Min/Max range with NaN."]})]}),(e.mode==="custom_range"||e.mode==="percentage_bounds"||e.mode==="age_bounds")&&a.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-[10px] text-gray-500 uppercase font-semibold",children:"Min Value"}),a.jsx("input",{type:"number",className:"w-full text-xs rounded border border-gray-300 dark:border-gray-600 px-2 py-1.5",placeholder:e.mode==="percentage_bounds"?"0":"Min",value:e.min_value??"",onChange:y=>t({...e,min_value:y.target.value?parseFloat(y.target.value):void 0})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-[10px] text-gray-500 uppercase font-semibold",children:"Max Value"}),a.jsx("input",{type:"number",className:"w-full text-xs rounded border border-gray-300 dark:border-gray-600 px-2 py-1.5",placeholder:e.mode==="percentage_bounds"?"100":"Max",value:e.max_value??"",onChange:y=>t({...e,max_value:y.target.value?parseFloat(y.target.value):void 0})})]}),a.jsx("p",{className:"col-span-2 text-[10px] text-gray-500",children:"Values outside this range will be replaced with NaN."})]})]})]})})},FT={type:"InvalidValueReplacement",label:"Invalid Value Replacement",category:"Preprocessing",description:"Replace invalid or out-of-range values with NaN.",icon:$f,inputs:[{id:"in",label:"Data",type:"dataset"}],outputs:[{id:"out",label:"Cleaned Data",type:"dataset"}],settings:zT,validate:e=>e.columns.length===0?{isValid:!1,message:"Select at least one column."}:e.mode==="custom_range"&&e.min_value===void 0&&e.max_value===void 0?{isValid:!1,message:"Specify at least a min or max value for custom range."}:{isValid:!0},getDefaultConfig:()=>({columns:[],mode:"negative_to_nan"})},$T=()=>{he.register(bR),he.register(jR),he.register(_R),he.register(CR),he.register(RR),he.register(oT),he.register(uT),he.register(mT),he.register(xT),he.register(kT),he.register(ET),he.register(PT),he.register(OT),he.register(FT),he.register(sT),he.register(BR),he.register(WR),he.register(QR),he.register(XR),he.register(GR),he.register(eT),he.register(nT),he.register(DR),he.register(FR),he.register(VR),console.log("[Registry] Initialization complete. Total nodes:",he.getAll().length)};$T();const VT=new ej;Xc.createRoot(document.getElementById("root")).render(a.jsx(nn.StrictMode,{children:a.jsx(nj,{client:VT,children:a.jsx(yR,{})})}));
