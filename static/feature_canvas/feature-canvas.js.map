{"version":3,"file":"feature-canvas.js","sources":["../../frontend/feature-canvas/node_modules/react/cjs/react.production.min.js","../../frontend/feature-canvas/node_modules/react/index.js","../../frontend/feature-canvas/node_modules/react/cjs/react-jsx-runtime.production.min.js","../../frontend/feature-canvas/node_modules/react/jsx-runtime.js","../../frontend/feature-canvas/node_modules/scheduler/cjs/scheduler.production.min.js","../../frontend/feature-canvas/node_modules/scheduler/index.js","../../frontend/feature-canvas/node_modules/react-dom/cjs/react-dom.production.min.js","../../frontend/feature-canvas/node_modules/react-dom/index.js","../../frontend/feature-canvas/node_modules/react-dom/client.js","../../frontend/feature-canvas/node_modules/@tanstack/query-core/build/modern/subscribable.js","../../frontend/feature-canvas/node_modules/@tanstack/query-core/build/modern/timeoutManager.js","../../frontend/feature-canvas/node_modules/@tanstack/query-core/build/modern/utils.js","../../frontend/feature-canvas/node_modules/@tanstack/query-core/build/modern/focusManager.js","../../frontend/feature-canvas/node_modules/@tanstack/query-core/build/modern/thenable.js","../../frontend/feature-canvas/node_modules/@tanstack/query-core/build/modern/notifyManager.js","../../frontend/feature-canvas/node_modules/@tanstack/query-core/build/modern/onlineManager.js","../../frontend/feature-canvas/node_modules/@tanstack/query-core/build/modern/retryer.js","../../frontend/feature-canvas/node_modules/@tanstack/query-core/build/modern/removable.js","../../frontend/feature-canvas/node_modules/@tanstack/query-core/build/modern/query.js","../../frontend/feature-canvas/node_modules/@tanstack/query-core/build/modern/queryObserver.js","../../frontend/feature-canvas/node_modules/@tanstack/query-core/build/modern/infiniteQueryBehavior.js","../../frontend/feature-canvas/node_modules/@tanstack/query-core/build/modern/mutation.js","../../frontend/feature-canvas/node_modules/@tanstack/query-core/build/modern/mutationCache.js","../../frontend/feature-canvas/node_modules/@tanstack/query-core/build/modern/mutationObserver.js","../../frontend/feature-canvas/node_modules/@tanstack/query-core/build/modern/queryCache.js","../../frontend/feature-canvas/node_modules/@tanstack/query-core/build/modern/queryClient.js","../../frontend/feature-canvas/node_modules/@tanstack/react-query/build/modern/QueryClientProvider.js","../../frontend/feature-canvas/node_modules/@tanstack/react-query/build/modern/IsRestoringProvider.js","../../frontend/feature-canvas/node_modules/@tanstack/react-query/build/modern/QueryErrorResetBoundary.js","../../frontend/feature-canvas/node_modules/@tanstack/react-query/build/modern/errorBoundaryUtils.js","../../frontend/feature-canvas/node_modules/@tanstack/react-query/build/modern/suspense.js","../../frontend/feature-canvas/node_modules/@tanstack/react-query/build/modern/useBaseQuery.js","../../frontend/feature-canvas/node_modules/@tanstack/react-query/build/modern/useQuery.js","../../frontend/feature-canvas/node_modules/@tanstack/react-query/build/modern/useMutation.js","../../frontend/feature-canvas/node_modules/zustand/esm/index.js","../../frontend/feature-canvas/node_modules/zustand/esm/context.js","../../frontend/feature-canvas/node_modules/d3-dispatch/src/dispatch.js","../../frontend/feature-canvas/node_modules/d3-selection/src/namespaces.js","../../frontend/feature-canvas/node_modules/d3-selection/src/namespace.js","../../frontend/feature-canvas/node_modules/d3-selection/src/creator.js","../../frontend/feature-canvas/node_modules/d3-selection/src/selector.js","../../frontend/feature-canvas/node_modules/d3-selection/src/selection/select.js","../../frontend/feature-canvas/node_modules/d3-selection/src/array.js","../../frontend/feature-canvas/node_modules/d3-selection/src/selectorAll.js","../../frontend/feature-canvas/node_modules/d3-selection/src/selection/selectAll.js","../../frontend/feature-canvas/node_modules/d3-selection/src/matcher.js","../../frontend/feature-canvas/node_modules/d3-selection/src/selection/selectChild.js","../../frontend/feature-canvas/node_modules/d3-selection/src/selection/selectChildren.js","../../frontend/feature-canvas/node_modules/d3-selection/src/selection/filter.js","../../frontend/feature-canvas/node_modules/d3-selection/src/selection/sparse.js","../../frontend/feature-canvas/node_modules/d3-selection/src/selection/enter.js","../../frontend/feature-canvas/node_modules/d3-selection/src/constant.js","../../frontend/feature-canvas/node_modules/d3-selection/src/selection/data.js","../../frontend/feature-canvas/node_modules/d3-selection/src/selection/exit.js","../../frontend/feature-canvas/node_modules/d3-selection/src/selection/join.js","../../frontend/feature-canvas/node_modules/d3-selection/src/selection/merge.js","../../frontend/feature-canvas/node_modules/d3-selection/src/selection/order.js","../../frontend/feature-canvas/node_modules/d3-selection/src/selection/sort.js","../../frontend/feature-canvas/node_modules/d3-selection/src/selection/call.js","../../frontend/feature-canvas/node_modules/d3-selection/src/selection/nodes.js","../../frontend/feature-canvas/node_modules/d3-selection/src/selection/node.js","../../frontend/feature-canvas/node_modules/d3-selection/src/selection/size.js","../../frontend/feature-canvas/node_modules/d3-selection/src/selection/empty.js","../../frontend/feature-canvas/node_modules/d3-selection/src/selection/each.js","../../frontend/feature-canvas/node_modules/d3-selection/src/selection/attr.js","../../frontend/feature-canvas/node_modules/d3-selection/src/window.js","../../frontend/feature-canvas/node_modules/d3-selection/src/selection/style.js","../../frontend/feature-canvas/node_modules/d3-selection/src/selection/property.js","../../frontend/feature-canvas/node_modules/d3-selection/src/selection/classed.js","../../frontend/feature-canvas/node_modules/d3-selection/src/selection/text.js","../../frontend/feature-canvas/node_modules/d3-selection/src/selection/html.js","../../frontend/feature-canvas/node_modules/d3-selection/src/selection/raise.js","../../frontend/feature-canvas/node_modules/d3-selection/src/selection/lower.js","../../frontend/feature-canvas/node_modules/d3-selection/src/selection/append.js","../../frontend/feature-canvas/node_modules/d3-selection/src/selection/insert.js","../../frontend/feature-canvas/node_modules/d3-selection/src/selection/remove.js","../../frontend/feature-canvas/node_modules/d3-selection/src/selection/clone.js","../../frontend/feature-canvas/node_modules/d3-selection/src/selection/datum.js","../../frontend/feature-canvas/node_modules/d3-selection/src/selection/on.js","../../frontend/feature-canvas/node_modules/d3-selection/src/selection/dispatch.js","../../frontend/feature-canvas/node_modules/d3-selection/src/selection/iterator.js","../../frontend/feature-canvas/node_modules/d3-selection/src/selection/index.js","../../frontend/feature-canvas/node_modules/d3-selection/src/select.js","../../frontend/feature-canvas/node_modules/d3-selection/src/sourceEvent.js","../../frontend/feature-canvas/node_modules/d3-selection/src/pointer.js","../../frontend/feature-canvas/node_modules/d3-drag/src/noevent.js","../../frontend/feature-canvas/node_modules/d3-drag/src/nodrag.js","../../frontend/feature-canvas/node_modules/d3-drag/src/constant.js","../../frontend/feature-canvas/node_modules/d3-drag/src/event.js","../../frontend/feature-canvas/node_modules/d3-drag/src/drag.js","../../frontend/feature-canvas/node_modules/d3-color/src/define.js","../../frontend/feature-canvas/node_modules/d3-color/src/color.js","../../frontend/feature-canvas/node_modules/d3-interpolate/src/constant.js","../../frontend/feature-canvas/node_modules/d3-interpolate/src/color.js","../../frontend/feature-canvas/node_modules/d3-interpolate/src/rgb.js","../../frontend/feature-canvas/node_modules/d3-interpolate/src/number.js","../../frontend/feature-canvas/node_modules/d3-interpolate/src/string.js","../../frontend/feature-canvas/node_modules/d3-interpolate/src/transform/decompose.js","../../frontend/feature-canvas/node_modules/d3-interpolate/src/transform/parse.js","../../frontend/feature-canvas/node_modules/d3-interpolate/src/transform/index.js","../../frontend/feature-canvas/node_modules/d3-interpolate/src/zoom.js","../../frontend/feature-canvas/node_modules/d3-timer/src/timer.js","../../frontend/feature-canvas/node_modules/d3-timer/src/timeout.js","../../frontend/feature-canvas/node_modules/d3-transition/src/transition/schedule.js","../../frontend/feature-canvas/node_modules/d3-transition/src/interrupt.js","../../frontend/feature-canvas/node_modules/d3-transition/src/selection/interrupt.js","../../frontend/feature-canvas/node_modules/d3-transition/src/transition/tween.js","../../frontend/feature-canvas/node_modules/d3-transition/src/transition/interpolate.js","../../frontend/feature-canvas/node_modules/d3-transition/src/transition/attr.js","../../frontend/feature-canvas/node_modules/d3-transition/src/transition/attrTween.js","../../frontend/feature-canvas/node_modules/d3-transition/src/transition/delay.js","../../frontend/feature-canvas/node_modules/d3-transition/src/transition/duration.js","../../frontend/feature-canvas/node_modules/d3-transition/src/transition/ease.js","../../frontend/feature-canvas/node_modules/d3-transition/src/transition/easeVarying.js","../../frontend/feature-canvas/node_modules/d3-transition/src/transition/filter.js","../../frontend/feature-canvas/node_modules/d3-transition/src/transition/merge.js","../../frontend/feature-canvas/node_modules/d3-transition/src/transition/on.js","../../frontend/feature-canvas/node_modules/d3-transition/src/transition/remove.js","../../frontend/feature-canvas/node_modules/d3-transition/src/transition/select.js","../../frontend/feature-canvas/node_modules/d3-transition/src/transition/selectAll.js","../../frontend/feature-canvas/node_modules/d3-transition/src/transition/selection.js","../../frontend/feature-canvas/node_modules/d3-transition/src/transition/style.js","../../frontend/feature-canvas/node_modules/d3-transition/src/transition/styleTween.js","../../frontend/feature-canvas/node_modules/d3-transition/src/transition/text.js","../../frontend/feature-canvas/node_modules/d3-transition/src/transition/textTween.js","../../frontend/feature-canvas/node_modules/d3-transition/src/transition/transition.js","../../frontend/feature-canvas/node_modules/d3-transition/src/transition/end.js","../../frontend/feature-canvas/node_modules/d3-transition/src/transition/index.js","../../frontend/feature-canvas/node_modules/d3-ease/src/cubic.js","../../frontend/feature-canvas/node_modules/d3-transition/src/selection/transition.js","../../frontend/feature-canvas/node_modules/d3-transition/src/selection/index.js","../../frontend/feature-canvas/node_modules/d3-zoom/src/constant.js","../../frontend/feature-canvas/node_modules/d3-zoom/src/event.js","../../frontend/feature-canvas/node_modules/d3-zoom/src/transform.js","../../frontend/feature-canvas/node_modules/d3-zoom/src/noevent.js","../../frontend/feature-canvas/node_modules/d3-zoom/src/zoom.js","../../frontend/feature-canvas/node_modules/react-flow-renderer/dist/esm/index-a12c80bd.js","../../frontend/feature-canvas/node_modules/classcat/index.js","../../frontend/feature-canvas/node_modules/zustand/esm/shallow.js","../../frontend/feature-canvas/node_modules/react-flow-renderer/dist/esm/useReactFlow-993c30ca.js","../../frontend/feature-canvas/node_modules/react-flow-renderer/dist/esm/index-20df97c0.js","../../frontend/feature-canvas/node_modules/react-flow-renderer/dist/esm/index3.js","../../frontend/feature-canvas/node_modules/react-flow-renderer/dist/esm/useUpdateNodeInternals.js","../../frontend/feature-canvas/node_modules/react-flow-renderer/dist/esm/index.js","../../frontend/feature-canvas/src/components/edges/AnimatedEdge.tsx","../../frontend/feature-canvas/src/components/edges/ConnectionLine.tsx","../../frontend/feature-canvas/src/components/FeatureCanvasSidebar.tsx","../../frontend/feature-canvas/src/api/catalog.ts","../../frontend/feature-canvas/src/api/datasets.ts","../../frontend/feature-canvas/src/api/recommendations/encoding.ts","../../frontend/feature-canvas/src/api/recommendations/outliers.ts","../../frontend/feature-canvas/src/api/recommendations/stats.ts","../../frontend/feature-canvas/src/api/analytics/binnedDistribution.ts","../../frontend/feature-canvas/src/api/analytics/quickProfile.ts","../../frontend/feature-canvas/src/api/analytics/outlierDiagnostics.ts","../../frontend/feature-canvas/src/api/pipelines/crud.ts","../../frontend/feature-canvas/src/api/pipelines/preview.ts","../../frontend/feature-canvas/src/api/jobs/training.ts","../../frontend/feature-canvas/src/api/jobs/evaluation.ts","../../frontend/feature-canvas/src/api/jobs/hyperparameters.ts","../../frontend/feature-canvas/src/api/utils.ts","../../frontend/feature-canvas/src/components/node-settings/nodes/drop_col_rows/DropMissingColumnsSection.tsx","../../frontend/feature-canvas/src/components/node-settings/nodes/drop_col_rows/DropMissingRowsSection.tsx","../../frontend/feature-canvas/src/components/node-settings/nodes/remove_duplicates/removeDuplicatesSettings.ts","../../frontend/feature-canvas/src/components/node-settings/nodes/remove_duplicates/RemoveDuplicatesSection.tsx","../../frontend/feature-canvas/src/components/node-settings/sharedUtils.ts","../../frontend/feature-canvas/src/components/node-settings/nodes/cast_column/CastColumnTypesSection.tsx","../../frontend/feature-canvas/src/components/node-settings/nodes/dataset/DataSnapshotSection.tsx","../../frontend/feature-canvas/src/components/node-settings/nodes/dataset/datasetProfile.tsx","../../frontend/feature-canvas/src/components/node-settings/layout/NodeSettingsHeader.tsx","../../frontend/feature-canvas/src/components/node-settings/layout/NodeSettingsFooter.tsx","../../frontend/feature-canvas/src/components/node-settings/formatting.ts","../../frontend/feature-canvas/src/components/node-settings/nodes/binning/binningSettings.ts","../../frontend/feature-canvas/src/components/node-settings/nodes/binning/BinNumericColumnsSection.tsx","../../frontend/feature-canvas/src/components/node-settings/nodes/binning/BinningInsightsSection.tsx","../../frontend/feature-canvas/src/components/node-settings/nodes/binning/BinnedDistributionSection.tsx","../../frontend/feature-canvas/src/components/node-settings/nodes/imputation/imputationSettings.ts","../../frontend/feature-canvas/src/components/node-settings/nodes/imputation/ImputationStrategiesSection.tsx","../../frontend/feature-canvas/src/components/node-settings/nodes/scaling/scalingSettings.ts","../../frontend/feature-canvas/src/components/node-settings/nodes/scaling/ScalingInsightsSection.tsx","../../frontend/feature-canvas/src/components/node-settings/nodes/skewness/skewnessSettings.ts","../../frontend/feature-canvas/src/components/node-settings/nodes/skewness/SkewnessInsightsSection.tsx","../../frontend/feature-canvas/src/components/node-settings/nodes/missing_indicator/missingIndicatorSettings.ts","../../frontend/feature-canvas/src/components/node-settings/nodes/missing_indicator/MissingIndicatorInsightsSection.tsx","../../frontend/feature-canvas/src/components/node-settings/nodes/replace_aliases/replaceAliasesSettings.ts","../../frontend/feature-canvas/src/components/node-settings/nodes/replace_aliases/ReplaceAliasesSection.tsx","../../frontend/feature-canvas/src/components/node-settings/nodes/standardize_date/standardizeDateSettings.ts","../../frontend/feature-canvas/src/components/node-settings/nodes/standardize_date/StandardizeDatesSection.tsx","../../frontend/feature-canvas/src/components/node-settings/nodes/trim_white_space/trimWhitespaceSettings.ts","../../frontend/feature-canvas/src/components/node-settings/nodes/trim_white_space/TrimWhitespaceSection.tsx","../../frontend/feature-canvas/src/components/node-settings/nodes/remove_special_char/removeSpecialCharactersSettings.ts","../../frontend/feature-canvas/src/components/node-settings/nodes/remove_special_char/RemoveSpecialCharactersSection.tsx","../../frontend/feature-canvas/src/components/node-settings/nodes/normalize_text/normalizeTextCaseSettings.ts","../../frontend/feature-canvas/src/components/node-settings/nodes/normalize_text/NormalizeTextCaseSection.tsx","../../frontend/feature-canvas/src/components/node-settings/nodes/regex_node/regexCleanupSettings.ts","../../frontend/feature-canvas/src/components/node-settings/nodes/regex_node/RegexCleanupSection.tsx","../../frontend/feature-canvas/src/components/node-settings/nodes/replace_invalid_values/replaceInvalidValuesSettings.ts","../../frontend/feature-canvas/src/components/node-settings/nodes/replace_invalid_values/ReplaceInvalidValuesSection.tsx","../../frontend/feature-canvas/node_modules/nanoid/non-secure/index.js","../../frontend/feature-canvas/src/components/node-settings/nodes/feature_math/featureMathSettings.ts","../../frontend/feature-canvas/src/components/node-settings/nodes/feature_math/FeatureMathSection.tsx","../../frontend/feature-canvas/src/components/node-settings/nodes/label_encoding/LabelEncodingSection.tsx","../../frontend/feature-canvas/src/components/node-settings/nodes/target_encoding/TargetEncodingSection.tsx","../../frontend/feature-canvas/src/components/node-settings/nodes/hash_encoding/HashEncodingSection.tsx","../../frontend/feature-canvas/src/components/node-settings/nodes/polynomial_features/PolynomialFeaturesSection.tsx","../../frontend/feature-canvas/src/components/node-settings/nodes/feature_selection/FeatureSelectionSection.tsx","../../frontend/feature-canvas/src/components/node-settings/nodes/ordinal_encoding/OrdinalEncodingSection.tsx","../../frontend/feature-canvas/src/components/node-settings/nodes/dummy_encoding/DummyEncodingSection.tsx","../../frontend/feature-canvas/src/components/node-settings/nodes/one_hot_encoding/OneHotEncodingSection.tsx","../../frontend/feature-canvas/src/components/node-settings/nodes/transformer_audit/TransformerAuditSection.tsx","../../frontend/feature-canvas/src/components/node-settings/nodes/modeling/FeatureTargetSplitSection.tsx","../../frontend/feature-canvas/src/components/node-settings/nodes/modeling/TrainTestSplitSection.tsx","../../frontend/feature-canvas/src/components/node-settings/nodes/modeling/TrainModelDraftSection.tsx","../../frontend/feature-canvas/src/components/node-settings/utils/formatters.ts","../../frontend/feature-canvas/src/components/node-settings/nodes/modeling/BestHyperparamsModal.tsx","../../frontend/feature-canvas/src/components/node-settings/nodes/modeling/useScalingWarning.ts","../../frontend/feature-canvas/src/components/node-settings/nodes/modeling/ModelTrainingSection.tsx","../../frontend/feature-canvas/src/components/node-settings/utils/configParsers.ts","../../frontend/feature-canvas/src/components/node-settings/nodes/modeling/EvaluationPackSection.tsx","../../frontend/feature-canvas/src/components/node-settings/nodes/modeling/ModelRegistrySection.tsx","../../frontend/feature-canvas/src/components/node-settings/nodes/modeling/HyperparameterTuningSection.tsx","../../frontend/feature-canvas/src/components/node-settings/nodes/resampling/ClassResamplingSection.tsx","../../frontend/feature-canvas/src/components/node-settings/utils/catalogTypes.ts","../../frontend/feature-canvas/src/components/node-settings/hooks/useCatalogFlags.ts","../../frontend/feature-canvas/src/components/node-settings/hooks/useScalingInsights.ts","../../frontend/feature-canvas/src/components/node-settings/hooks/useBinningInsights.ts","../../frontend/feature-canvas/src/components/node-settings/hooks/useSkewnessInsights.ts","../../frontend/feature-canvas/src/components/node-settings/hooks/useBinnedDistribution.ts","../../frontend/feature-canvas/src/components/node-settings/hooks/usePipelinePreview.ts","../../frontend/feature-canvas/src/components/node-settings/hooks/useDropColumnRecommendations.ts","../../frontend/feature-canvas/src/components/node-settings/hooks/useAliasConfiguration.ts","../../frontend/feature-canvas/src/components/node-settings/hooks/useOutlierRecommendations.ts","../../frontend/feature-canvas/src/components/node-settings/hooks/useNumericColumnAnalysis.ts","../../frontend/feature-canvas/src/components/node-settings/hooks/useNumericRangeSummaries.ts","../../frontend/feature-canvas/src/components/node-settings/nodes/outlier/outlierSettings.ts","../../frontend/feature-canvas/src/components/node-settings/hooks/usePruneColumnSelections.ts","../../frontend/feature-canvas/src/components/node-settings/hooks/useTextCleanupConfiguration.ts","../../frontend/feature-canvas/src/components/node-settings/hooks/useReplaceInvalidConfiguration.ts","../../frontend/feature-canvas/src/components/node-settings/hooks/useStandardizeDatesConfiguration.ts","../../frontend/feature-canvas/src/components/node-settings/hooks/useScalingConfiguration.ts","../../frontend/feature-canvas/src/components/node-settings/hooks/useOutlierConfiguration.ts","../../frontend/feature-canvas/src/components/node-settings/hooks/useBinningConfiguration.ts","../../frontend/feature-canvas/src/components/node-settings/hooks/useImputationConfiguration.ts","../../frontend/feature-canvas/src/components/node-settings/hooks/useModelingConfiguration.ts","../../frontend/feature-canvas/src/components/node-settings/hooks/useSkewnessConfiguration.ts","../../frontend/feature-canvas/src/components/node-settings/hooks/useLabelEncodingRecommendations.ts","../../frontend/feature-canvas/src/components/node-settings/hooks/useTargetEncodingRecommendations.ts","../../frontend/feature-canvas/src/components/node-settings/hooks/useHashEncodingRecommendations.ts","../../frontend/feature-canvas/src/components/node-settings/hooks/useOrdinalEncodingRecommendations.ts","../../frontend/feature-canvas/src/components/node-settings/hooks/useDummyEncodingRecommendations.ts","../../frontend/feature-canvas/src/components/node-settings/hooks/useOneHotEncodingRecommendations.ts","../../frontend/feature-canvas/src/components/node-settings/utils/guidance.ts","../../frontend/feature-canvas/src/components/node-settings/nodes/outlier/OutlierInsightsSection.tsx","../../frontend/feature-canvas/src/components/NodeSettingsModal.tsx","../../frontend/feature-canvas/src/canvas/constants/splits.ts","../../frontend/feature-canvas/src/canvas/constants/nodeHandles.ts","../../frontend/feature-canvas/src/canvas/constants/defaults.ts","../../frontend/feature-canvas/src/canvas/components/FeatureCanvasNode/FeatureCanvasNode.tsx","../../frontend/feature-canvas/src/canvas/services/configSanitizer.ts","../../frontend/feature-canvas/src/canvas/services/layout.ts","../../frontend/feature-canvas/src/canvas/services/nodeFactory.ts","../../frontend/feature-canvas/src/canvas/services/splitPropagation.ts","../../frontend/feature-canvas/src/canvas/services/graphSerialization.ts","../../frontend/feature-canvas/src/canvas/components/CanvasShell/CanvasShell.tsx","../../frontend/feature-canvas/src/canvas/utils/time.ts","../../frontend/feature-canvas/src/canvas/components/CanvasSidepanel/CanvasSidepanel.tsx","../../frontend/feature-canvas/src/canvas/hooks/useDatasetSelection.ts","../../frontend/feature-canvas/src/canvas/hooks/useDatasetSelectionHandler.ts","../../frontend/feature-canvas/src/canvas/hooks/useCanvasSnapshotState.ts","../../frontend/feature-canvas/src/canvas/hooks/useClearCanvasHandler.ts","../../frontend/feature-canvas/src/canvas/hooks/usePipelineHistory.ts","../../frontend/feature-canvas/src/canvas/hooks/usePipelineHydration.ts","../../frontend/feature-canvas/src/canvas/hooks/usePipelineSave.ts","../../frontend/feature-canvas/src/canvas/hooks/useSaveFeedbackState.ts","../../frontend/feature-canvas/src/canvas/hooks/useSidepanelViewModel.ts","../../frontend/feature-canvas/src/canvas/hooks/useSidepanelToggle.ts","../../frontend/feature-canvas/src/canvas/utils/buildPipelineSavePayload.ts","../../frontend/feature-canvas/src/App.tsx","../../frontend/feature-canvas/src/main.tsx"],"sourcesContent":["/**\n * @license React\n * react.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';var l=Symbol.for(\"react.element\"),n=Symbol.for(\"react.portal\"),p=Symbol.for(\"react.fragment\"),q=Symbol.for(\"react.strict_mode\"),r=Symbol.for(\"react.profiler\"),t=Symbol.for(\"react.provider\"),u=Symbol.for(\"react.context\"),v=Symbol.for(\"react.forward_ref\"),w=Symbol.for(\"react.suspense\"),x=Symbol.for(\"react.memo\"),y=Symbol.for(\"react.lazy\"),z=Symbol.iterator;function A(a){if(null===a||\"object\"!==typeof a)return null;a=z&&a[z]||a[\"@@iterator\"];return\"function\"===typeof a?a:null}\nvar B={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,D={};function E(a,b,e){this.props=a;this.context=b;this.refs=D;this.updater=e||B}E.prototype.isReactComponent={};\nE.prototype.setState=function(a,b){if(\"object\"!==typeof a&&\"function\"!==typeof a&&null!=a)throw Error(\"setState(...): takes an object of state variables to update or a function which returns an object of state variables.\");this.updater.enqueueSetState(this,a,b,\"setState\")};E.prototype.forceUpdate=function(a){this.updater.enqueueForceUpdate(this,a,\"forceUpdate\")};function F(){}F.prototype=E.prototype;function G(a,b,e){this.props=a;this.context=b;this.refs=D;this.updater=e||B}var H=G.prototype=new F;\nH.constructor=G;C(H,E.prototype);H.isPureReactComponent=!0;var I=Array.isArray,J=Object.prototype.hasOwnProperty,K={current:null},L={key:!0,ref:!0,__self:!0,__source:!0};\nfunction M(a,b,e){var d,c={},k=null,h=null;if(null!=b)for(d in void 0!==b.ref&&(h=b.ref),void 0!==b.key&&(k=\"\"+b.key),b)J.call(b,d)&&!L.hasOwnProperty(d)&&(c[d]=b[d]);var g=arguments.length-2;if(1===g)c.children=e;else if(1<g){for(var f=Array(g),m=0;m<g;m++)f[m]=arguments[m+2];c.children=f}if(a&&a.defaultProps)for(d in g=a.defaultProps,g)void 0===c[d]&&(c[d]=g[d]);return{$$typeof:l,type:a,key:k,ref:h,props:c,_owner:K.current}}\nfunction N(a,b){return{$$typeof:l,type:a.type,key:b,ref:a.ref,props:a.props,_owner:a._owner}}function O(a){return\"object\"===typeof a&&null!==a&&a.$$typeof===l}function escape(a){var b={\"=\":\"=0\",\":\":\"=2\"};return\"$\"+a.replace(/[=:]/g,function(a){return b[a]})}var P=/\\/+/g;function Q(a,b){return\"object\"===typeof a&&null!==a&&null!=a.key?escape(\"\"+a.key):b.toString(36)}\nfunction R(a,b,e,d,c){var k=typeof a;if(\"undefined\"===k||\"boolean\"===k)a=null;var h=!1;if(null===a)h=!0;else switch(k){case \"string\":case \"number\":h=!0;break;case \"object\":switch(a.$$typeof){case l:case n:h=!0}}if(h)return h=a,c=c(h),a=\"\"===d?\".\"+Q(h,0):d,I(c)?(e=\"\",null!=a&&(e=a.replace(P,\"$&/\")+\"/\"),R(c,b,e,\"\",function(a){return a})):null!=c&&(O(c)&&(c=N(c,e+(!c.key||h&&h.key===c.key?\"\":(\"\"+c.key).replace(P,\"$&/\")+\"/\")+a)),b.push(c)),1;h=0;d=\"\"===d?\".\":d+\":\";if(I(a))for(var g=0;g<a.length;g++){k=\na[g];var f=d+Q(k,g);h+=R(k,b,e,f,c)}else if(f=A(a),\"function\"===typeof f)for(a=f.call(a),g=0;!(k=a.next()).done;)k=k.value,f=d+Q(k,g++),h+=R(k,b,e,f,c);else if(\"object\"===k)throw b=String(a),Error(\"Objects are not valid as a React child (found: \"+(\"[object Object]\"===b?\"object with keys {\"+Object.keys(a).join(\", \")+\"}\":b)+\"). If you meant to render a collection of children, use an array instead.\");return h}\nfunction S(a,b,e){if(null==a)return a;var d=[],c=0;R(a,d,\"\",\"\",function(a){return b.call(e,a,c++)});return d}function T(a){if(-1===a._status){var b=a._result;b=b();b.then(function(b){if(0===a._status||-1===a._status)a._status=1,a._result=b},function(b){if(0===a._status||-1===a._status)a._status=2,a._result=b});-1===a._status&&(a._status=0,a._result=b)}if(1===a._status)return a._result.default;throw a._result;}\nvar U={current:null},V={transition:null},W={ReactCurrentDispatcher:U,ReactCurrentBatchConfig:V,ReactCurrentOwner:K};function X(){throw Error(\"act(...) is not supported in production builds of React.\");}\nexports.Children={map:S,forEach:function(a,b,e){S(a,function(){b.apply(this,arguments)},e)},count:function(a){var b=0;S(a,function(){b++});return b},toArray:function(a){return S(a,function(a){return a})||[]},only:function(a){if(!O(a))throw Error(\"React.Children.only expected to receive a single React element child.\");return a}};exports.Component=E;exports.Fragment=p;exports.Profiler=r;exports.PureComponent=G;exports.StrictMode=q;exports.Suspense=w;\nexports.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W;exports.act=X;\nexports.cloneElement=function(a,b,e){if(null===a||void 0===a)throw Error(\"React.cloneElement(...): The argument must be a React element, but you passed \"+a+\".\");var d=C({},a.props),c=a.key,k=a.ref,h=a._owner;if(null!=b){void 0!==b.ref&&(k=b.ref,h=K.current);void 0!==b.key&&(c=\"\"+b.key);if(a.type&&a.type.defaultProps)var g=a.type.defaultProps;for(f in b)J.call(b,f)&&!L.hasOwnProperty(f)&&(d[f]=void 0===b[f]&&void 0!==g?g[f]:b[f])}var f=arguments.length-2;if(1===f)d.children=e;else if(1<f){g=Array(f);\nfor(var m=0;m<f;m++)g[m]=arguments[m+2];d.children=g}return{$$typeof:l,type:a.type,key:c,ref:k,props:d,_owner:h}};exports.createContext=function(a){a={$$typeof:u,_currentValue:a,_currentValue2:a,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null};a.Provider={$$typeof:t,_context:a};return a.Consumer=a};exports.createElement=M;exports.createFactory=function(a){var b=M.bind(null,a);b.type=a;return b};exports.createRef=function(){return{current:null}};\nexports.forwardRef=function(a){return{$$typeof:v,render:a}};exports.isValidElement=O;exports.lazy=function(a){return{$$typeof:y,_payload:{_status:-1,_result:a},_init:T}};exports.memo=function(a,b){return{$$typeof:x,type:a,compare:void 0===b?null:b}};exports.startTransition=function(a){var b=V.transition;V.transition={};try{a()}finally{V.transition=b}};exports.unstable_act=X;exports.useCallback=function(a,b){return U.current.useCallback(a,b)};exports.useContext=function(a){return U.current.useContext(a)};\nexports.useDebugValue=function(){};exports.useDeferredValue=function(a){return U.current.useDeferredValue(a)};exports.useEffect=function(a,b){return U.current.useEffect(a,b)};exports.useId=function(){return U.current.useId()};exports.useImperativeHandle=function(a,b,e){return U.current.useImperativeHandle(a,b,e)};exports.useInsertionEffect=function(a,b){return U.current.useInsertionEffect(a,b)};exports.useLayoutEffect=function(a,b){return U.current.useLayoutEffect(a,b)};\nexports.useMemo=function(a,b){return U.current.useMemo(a,b)};exports.useReducer=function(a,b,e){return U.current.useReducer(a,b,e)};exports.useRef=function(a){return U.current.useRef(a)};exports.useState=function(a){return U.current.useState(a)};exports.useSyncExternalStore=function(a,b,e){return U.current.useSyncExternalStore(a,b,e)};exports.useTransition=function(){return U.current.useTransition()};exports.version=\"18.3.1\";\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react.production.min.js');\n} else {\n  module.exports = require('./cjs/react.development.js');\n}\n","/**\n * @license React\n * react-jsx-runtime.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';var f=require(\"react\"),k=Symbol.for(\"react.element\"),l=Symbol.for(\"react.fragment\"),m=Object.prototype.hasOwnProperty,n=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p={key:!0,ref:!0,__self:!0,__source:!0};\nfunction q(c,a,g){var b,d={},e=null,h=null;void 0!==g&&(e=\"\"+g);void 0!==a.key&&(e=\"\"+a.key);void 0!==a.ref&&(h=a.ref);for(b in a)m.call(a,b)&&!p.hasOwnProperty(b)&&(d[b]=a[b]);if(c&&c.defaultProps)for(b in a=c.defaultProps,a)void 0===d[b]&&(d[b]=a[b]);return{$$typeof:k,type:c,key:e,ref:h,props:d,_owner:n.current}}exports.Fragment=l;exports.jsx=q;exports.jsxs=q;\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react-jsx-runtime.production.min.js');\n} else {\n  module.exports = require('./cjs/react-jsx-runtime.development.js');\n}\n","/**\n * @license React\n * scheduler.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';function f(a,b){var c=a.length;a.push(b);a:for(;0<c;){var d=c-1>>>1,e=a[d];if(0<g(e,b))a[d]=b,a[c]=e,c=d;else break a}}function h(a){return 0===a.length?null:a[0]}function k(a){if(0===a.length)return null;var b=a[0],c=a.pop();if(c!==b){a[0]=c;a:for(var d=0,e=a.length,w=e>>>1;d<w;){var m=2*(d+1)-1,C=a[m],n=m+1,x=a[n];if(0>g(C,c))n<e&&0>g(x,C)?(a[d]=x,a[n]=c,d=n):(a[d]=C,a[m]=c,d=m);else if(n<e&&0>g(x,c))a[d]=x,a[n]=c,d=n;else break a}}return b}\nfunction g(a,b){var c=a.sortIndex-b.sortIndex;return 0!==c?c:a.id-b.id}if(\"object\"===typeof performance&&\"function\"===typeof performance.now){var l=performance;exports.unstable_now=function(){return l.now()}}else{var p=Date,q=p.now();exports.unstable_now=function(){return p.now()-q}}var r=[],t=[],u=1,v=null,y=3,z=!1,A=!1,B=!1,D=\"function\"===typeof setTimeout?setTimeout:null,E=\"function\"===typeof clearTimeout?clearTimeout:null,F=\"undefined\"!==typeof setImmediate?setImmediate:null;\n\"undefined\"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function G(a){for(var b=h(t);null!==b;){if(null===b.callback)k(t);else if(b.startTime<=a)k(t),b.sortIndex=b.expirationTime,f(r,b);else break;b=h(t)}}function H(a){B=!1;G(a);if(!A)if(null!==h(r))A=!0,I(J);else{var b=h(t);null!==b&&K(H,b.startTime-a)}}\nfunction J(a,b){A=!1;B&&(B=!1,E(L),L=-1);z=!0;var c=y;try{G(b);for(v=h(r);null!==v&&(!(v.expirationTime>b)||a&&!M());){var d=v.callback;if(\"function\"===typeof d){v.callback=null;y=v.priorityLevel;var e=d(v.expirationTime<=b);b=exports.unstable_now();\"function\"===typeof e?v.callback=e:v===h(r)&&k(r);G(b)}else k(r);v=h(r)}if(null!==v)var w=!0;else{var m=h(t);null!==m&&K(H,m.startTime-b);w=!1}return w}finally{v=null,y=c,z=!1}}var N=!1,O=null,L=-1,P=5,Q=-1;\nfunction M(){return exports.unstable_now()-Q<P?!1:!0}function R(){if(null!==O){var a=exports.unstable_now();Q=a;var b=!0;try{b=O(!0,a)}finally{b?S():(N=!1,O=null)}}else N=!1}var S;if(\"function\"===typeof F)S=function(){F(R)};else if(\"undefined\"!==typeof MessageChannel){var T=new MessageChannel,U=T.port2;T.port1.onmessage=R;S=function(){U.postMessage(null)}}else S=function(){D(R,0)};function I(a){O=a;N||(N=!0,S())}function K(a,b){L=D(function(){a(exports.unstable_now())},b)}\nexports.unstable_IdlePriority=5;exports.unstable_ImmediatePriority=1;exports.unstable_LowPriority=4;exports.unstable_NormalPriority=3;exports.unstable_Profiling=null;exports.unstable_UserBlockingPriority=2;exports.unstable_cancelCallback=function(a){a.callback=null};exports.unstable_continueExecution=function(){A||z||(A=!0,I(J))};\nexports.unstable_forceFrameRate=function(a){0>a||125<a?console.error(\"forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported\"):P=0<a?Math.floor(1E3/a):5};exports.unstable_getCurrentPriorityLevel=function(){return y};exports.unstable_getFirstCallbackNode=function(){return h(r)};exports.unstable_next=function(a){switch(y){case 1:case 2:case 3:var b=3;break;default:b=y}var c=y;y=b;try{return a()}finally{y=c}};exports.unstable_pauseExecution=function(){};\nexports.unstable_requestPaint=function(){};exports.unstable_runWithPriority=function(a,b){switch(a){case 1:case 2:case 3:case 4:case 5:break;default:a=3}var c=y;y=a;try{return b()}finally{y=c}};\nexports.unstable_scheduleCallback=function(a,b,c){var d=exports.unstable_now();\"object\"===typeof c&&null!==c?(c=c.delay,c=\"number\"===typeof c&&0<c?d+c:d):c=d;switch(a){case 1:var e=-1;break;case 2:e=250;break;case 5:e=1073741823;break;case 4:e=1E4;break;default:e=5E3}e=c+e;a={id:u++,callback:b,priorityLevel:a,startTime:c,expirationTime:e,sortIndex:-1};c>d?(a.sortIndex=c,f(t,a),null===h(r)&&a===h(t)&&(B?(E(L),L=-1):B=!0,K(H,c-d))):(a.sortIndex=e,f(r,a),A||z||(A=!0,I(J)));return a};\nexports.unstable_shouldYield=M;exports.unstable_wrapCallback=function(a){var b=y;return function(){var c=y;y=b;try{return a.apply(this,arguments)}finally{y=c}}};\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/scheduler.production.min.js');\n} else {\n  module.exports = require('./cjs/scheduler.development.js');\n}\n","/**\n * @license React\n * react-dom.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n/*\n Modernizr 3.0.0pre (Custom Build) | MIT\n*/\n'use strict';var aa=require(\"react\"),ca=require(\"scheduler\");function p(a){for(var b=\"https://reactjs.org/docs/error-decoder.html?invariant=\"+a,c=1;c<arguments.length;c++)b+=\"&args[]=\"+encodeURIComponent(arguments[c]);return\"Minified React error #\"+a+\"; visit \"+b+\" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.\"}var da=new Set,ea={};function fa(a,b){ha(a,b);ha(a+\"Capture\",b)}\nfunction ha(a,b){ea[a]=b;for(a=0;a<b.length;a++)da.add(b[a])}\nvar ia=!(\"undefined\"===typeof window||\"undefined\"===typeof window.document||\"undefined\"===typeof window.document.createElement),ja=Object.prototype.hasOwnProperty,ka=/^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$/,la=\n{},ma={};function oa(a){if(ja.call(ma,a))return!0;if(ja.call(la,a))return!1;if(ka.test(a))return ma[a]=!0;la[a]=!0;return!1}function pa(a,b,c,d){if(null!==c&&0===c.type)return!1;switch(typeof b){case \"function\":case \"symbol\":return!0;case \"boolean\":if(d)return!1;if(null!==c)return!c.acceptsBooleans;a=a.toLowerCase().slice(0,5);return\"data-\"!==a&&\"aria-\"!==a;default:return!1}}\nfunction qa(a,b,c,d){if(null===b||\"undefined\"===typeof b||pa(a,b,c,d))return!0;if(d)return!1;if(null!==c)switch(c.type){case 3:return!b;case 4:return!1===b;case 5:return isNaN(b);case 6:return isNaN(b)||1>b}return!1}function v(a,b,c,d,e,f,g){this.acceptsBooleans=2===b||3===b||4===b;this.attributeName=d;this.attributeNamespace=e;this.mustUseProperty=c;this.propertyName=a;this.type=b;this.sanitizeURL=f;this.removeEmptyString=g}var z={};\n\"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style\".split(\" \").forEach(function(a){z[a]=new v(a,0,!1,a,null,!1,!1)});[[\"acceptCharset\",\"accept-charset\"],[\"className\",\"class\"],[\"htmlFor\",\"for\"],[\"httpEquiv\",\"http-equiv\"]].forEach(function(a){var b=a[0];z[b]=new v(b,1,!1,a[1],null,!1,!1)});[\"contentEditable\",\"draggable\",\"spellCheck\",\"value\"].forEach(function(a){z[a]=new v(a,2,!1,a.toLowerCase(),null,!1,!1)});\n[\"autoReverse\",\"externalResourcesRequired\",\"focusable\",\"preserveAlpha\"].forEach(function(a){z[a]=new v(a,2,!1,a,null,!1,!1)});\"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope\".split(\" \").forEach(function(a){z[a]=new v(a,3,!1,a.toLowerCase(),null,!1,!1)});\n[\"checked\",\"multiple\",\"muted\",\"selected\"].forEach(function(a){z[a]=new v(a,3,!0,a,null,!1,!1)});[\"capture\",\"download\"].forEach(function(a){z[a]=new v(a,4,!1,a,null,!1,!1)});[\"cols\",\"rows\",\"size\",\"span\"].forEach(function(a){z[a]=new v(a,6,!1,a,null,!1,!1)});[\"rowSpan\",\"start\"].forEach(function(a){z[a]=new v(a,5,!1,a.toLowerCase(),null,!1,!1)});var ra=/[\\-:]([a-z])/g;function sa(a){return a[1].toUpperCase()}\n\"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height\".split(\" \").forEach(function(a){var b=a.replace(ra,\nsa);z[b]=new v(b,1,!1,a,null,!1,!1)});\"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type\".split(\" \").forEach(function(a){var b=a.replace(ra,sa);z[b]=new v(b,1,!1,a,\"http://www.w3.org/1999/xlink\",!1,!1)});[\"xml:base\",\"xml:lang\",\"xml:space\"].forEach(function(a){var b=a.replace(ra,sa);z[b]=new v(b,1,!1,a,\"http://www.w3.org/XML/1998/namespace\",!1,!1)});[\"tabIndex\",\"crossOrigin\"].forEach(function(a){z[a]=new v(a,1,!1,a.toLowerCase(),null,!1,!1)});\nz.xlinkHref=new v(\"xlinkHref\",1,!1,\"xlink:href\",\"http://www.w3.org/1999/xlink\",!0,!1);[\"src\",\"href\",\"action\",\"formAction\"].forEach(function(a){z[a]=new v(a,1,!1,a.toLowerCase(),null,!0,!0)});\nfunction ta(a,b,c,d){var e=z.hasOwnProperty(b)?z[b]:null;if(null!==e?0!==e.type:d||!(2<b.length)||\"o\"!==b[0]&&\"O\"!==b[0]||\"n\"!==b[1]&&\"N\"!==b[1])qa(b,c,e,d)&&(c=null),d||null===e?oa(b)&&(null===c?a.removeAttribute(b):a.setAttribute(b,\"\"+c)):e.mustUseProperty?a[e.propertyName]=null===c?3===e.type?!1:\"\":c:(b=e.attributeName,d=e.attributeNamespace,null===c?a.removeAttribute(b):(e=e.type,c=3===e||4===e&&!0===c?\"\":\"\"+c,d?a.setAttributeNS(d,b,c):a.setAttribute(b,c)))}\nvar ua=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va=Symbol.for(\"react.element\"),wa=Symbol.for(\"react.portal\"),ya=Symbol.for(\"react.fragment\"),za=Symbol.for(\"react.strict_mode\"),Aa=Symbol.for(\"react.profiler\"),Ba=Symbol.for(\"react.provider\"),Ca=Symbol.for(\"react.context\"),Da=Symbol.for(\"react.forward_ref\"),Ea=Symbol.for(\"react.suspense\"),Fa=Symbol.for(\"react.suspense_list\"),Ga=Symbol.for(\"react.memo\"),Ha=Symbol.for(\"react.lazy\");Symbol.for(\"react.scope\");Symbol.for(\"react.debug_trace_mode\");\nvar Ia=Symbol.for(\"react.offscreen\");Symbol.for(\"react.legacy_hidden\");Symbol.for(\"react.cache\");Symbol.for(\"react.tracing_marker\");var Ja=Symbol.iterator;function Ka(a){if(null===a||\"object\"!==typeof a)return null;a=Ja&&a[Ja]||a[\"@@iterator\"];return\"function\"===typeof a?a:null}var A=Object.assign,La;function Ma(a){if(void 0===La)try{throw Error();}catch(c){var b=c.stack.trim().match(/\\n( *(at )?)/);La=b&&b[1]||\"\"}return\"\\n\"+La+a}var Na=!1;\nfunction Oa(a,b){if(!a||Na)return\"\";Na=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(b)if(b=function(){throw Error();},Object.defineProperty(b.prototype,\"props\",{set:function(){throw Error();}}),\"object\"===typeof Reflect&&Reflect.construct){try{Reflect.construct(b,[])}catch(l){var d=l}Reflect.construct(a,[],b)}else{try{b.call()}catch(l){d=l}a.call(b.prototype)}else{try{throw Error();}catch(l){d=l}a()}}catch(l){if(l&&d&&\"string\"===typeof l.stack){for(var e=l.stack.split(\"\\n\"),\nf=d.stack.split(\"\\n\"),g=e.length-1,h=f.length-1;1<=g&&0<=h&&e[g]!==f[h];)h--;for(;1<=g&&0<=h;g--,h--)if(e[g]!==f[h]){if(1!==g||1!==h){do if(g--,h--,0>h||e[g]!==f[h]){var k=\"\\n\"+e[g].replace(\" at new \",\" at \");a.displayName&&k.includes(\"<anonymous>\")&&(k=k.replace(\"<anonymous>\",a.displayName));return k}while(1<=g&&0<=h)}break}}}finally{Na=!1,Error.prepareStackTrace=c}return(a=a?a.displayName||a.name:\"\")?Ma(a):\"\"}\nfunction Pa(a){switch(a.tag){case 5:return Ma(a.type);case 16:return Ma(\"Lazy\");case 13:return Ma(\"Suspense\");case 19:return Ma(\"SuspenseList\");case 0:case 2:case 15:return a=Oa(a.type,!1),a;case 11:return a=Oa(a.type.render,!1),a;case 1:return a=Oa(a.type,!0),a;default:return\"\"}}\nfunction Qa(a){if(null==a)return null;if(\"function\"===typeof a)return a.displayName||a.name||null;if(\"string\"===typeof a)return a;switch(a){case ya:return\"Fragment\";case wa:return\"Portal\";case Aa:return\"Profiler\";case za:return\"StrictMode\";case Ea:return\"Suspense\";case Fa:return\"SuspenseList\"}if(\"object\"===typeof a)switch(a.$$typeof){case Ca:return(a.displayName||\"Context\")+\".Consumer\";case Ba:return(a._context.displayName||\"Context\")+\".Provider\";case Da:var b=a.render;a=a.displayName;a||(a=b.displayName||\nb.name||\"\",a=\"\"!==a?\"ForwardRef(\"+a+\")\":\"ForwardRef\");return a;case Ga:return b=a.displayName||null,null!==b?b:Qa(a.type)||\"Memo\";case Ha:b=a._payload;a=a._init;try{return Qa(a(b))}catch(c){}}return null}\nfunction Ra(a){var b=a.type;switch(a.tag){case 24:return\"Cache\";case 9:return(b.displayName||\"Context\")+\".Consumer\";case 10:return(b._context.displayName||\"Context\")+\".Provider\";case 18:return\"DehydratedFragment\";case 11:return a=b.render,a=a.displayName||a.name||\"\",b.displayName||(\"\"!==a?\"ForwardRef(\"+a+\")\":\"ForwardRef\");case 7:return\"Fragment\";case 5:return b;case 4:return\"Portal\";case 3:return\"Root\";case 6:return\"Text\";case 16:return Qa(b);case 8:return b===za?\"StrictMode\":\"Mode\";case 22:return\"Offscreen\";\ncase 12:return\"Profiler\";case 21:return\"Scope\";case 13:return\"Suspense\";case 19:return\"SuspenseList\";case 25:return\"TracingMarker\";case 1:case 0:case 17:case 2:case 14:case 15:if(\"function\"===typeof b)return b.displayName||b.name||null;if(\"string\"===typeof b)return b}return null}function Sa(a){switch(typeof a){case \"boolean\":case \"number\":case \"string\":case \"undefined\":return a;case \"object\":return a;default:return\"\"}}\nfunction Ta(a){var b=a.type;return(a=a.nodeName)&&\"input\"===a.toLowerCase()&&(\"checkbox\"===b||\"radio\"===b)}\nfunction Ua(a){var b=Ta(a)?\"checked\":\"value\",c=Object.getOwnPropertyDescriptor(a.constructor.prototype,b),d=\"\"+a[b];if(!a.hasOwnProperty(b)&&\"undefined\"!==typeof c&&\"function\"===typeof c.get&&\"function\"===typeof c.set){var e=c.get,f=c.set;Object.defineProperty(a,b,{configurable:!0,get:function(){return e.call(this)},set:function(a){d=\"\"+a;f.call(this,a)}});Object.defineProperty(a,b,{enumerable:c.enumerable});return{getValue:function(){return d},setValue:function(a){d=\"\"+a},stopTracking:function(){a._valueTracker=\nnull;delete a[b]}}}}function Va(a){a._valueTracker||(a._valueTracker=Ua(a))}function Wa(a){if(!a)return!1;var b=a._valueTracker;if(!b)return!0;var c=b.getValue();var d=\"\";a&&(d=Ta(a)?a.checked?\"true\":\"false\":a.value);a=d;return a!==c?(b.setValue(a),!0):!1}function Xa(a){a=a||(\"undefined\"!==typeof document?document:void 0);if(\"undefined\"===typeof a)return null;try{return a.activeElement||a.body}catch(b){return a.body}}\nfunction Ya(a,b){var c=b.checked;return A({},b,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=c?c:a._wrapperState.initialChecked})}function Za(a,b){var c=null==b.defaultValue?\"\":b.defaultValue,d=null!=b.checked?b.checked:b.defaultChecked;c=Sa(null!=b.value?b.value:c);a._wrapperState={initialChecked:d,initialValue:c,controlled:\"checkbox\"===b.type||\"radio\"===b.type?null!=b.checked:null!=b.value}}function ab(a,b){b=b.checked;null!=b&&ta(a,\"checked\",b,!1)}\nfunction bb(a,b){ab(a,b);var c=Sa(b.value),d=b.type;if(null!=c)if(\"number\"===d){if(0===c&&\"\"===a.value||a.value!=c)a.value=\"\"+c}else a.value!==\"\"+c&&(a.value=\"\"+c);else if(\"submit\"===d||\"reset\"===d){a.removeAttribute(\"value\");return}b.hasOwnProperty(\"value\")?cb(a,b.type,c):b.hasOwnProperty(\"defaultValue\")&&cb(a,b.type,Sa(b.defaultValue));null==b.checked&&null!=b.defaultChecked&&(a.defaultChecked=!!b.defaultChecked)}\nfunction db(a,b,c){if(b.hasOwnProperty(\"value\")||b.hasOwnProperty(\"defaultValue\")){var d=b.type;if(!(\"submit\"!==d&&\"reset\"!==d||void 0!==b.value&&null!==b.value))return;b=\"\"+a._wrapperState.initialValue;c||b===a.value||(a.value=b);a.defaultValue=b}c=a.name;\"\"!==c&&(a.name=\"\");a.defaultChecked=!!a._wrapperState.initialChecked;\"\"!==c&&(a.name=c)}\nfunction cb(a,b,c){if(\"number\"!==b||Xa(a.ownerDocument)!==a)null==c?a.defaultValue=\"\"+a._wrapperState.initialValue:a.defaultValue!==\"\"+c&&(a.defaultValue=\"\"+c)}var eb=Array.isArray;\nfunction fb(a,b,c,d){a=a.options;if(b){b={};for(var e=0;e<c.length;e++)b[\"$\"+c[e]]=!0;for(c=0;c<a.length;c++)e=b.hasOwnProperty(\"$\"+a[c].value),a[c].selected!==e&&(a[c].selected=e),e&&d&&(a[c].defaultSelected=!0)}else{c=\"\"+Sa(c);b=null;for(e=0;e<a.length;e++){if(a[e].value===c){a[e].selected=!0;d&&(a[e].defaultSelected=!0);return}null!==b||a[e].disabled||(b=a[e])}null!==b&&(b.selected=!0)}}\nfunction gb(a,b){if(null!=b.dangerouslySetInnerHTML)throw Error(p(91));return A({},b,{value:void 0,defaultValue:void 0,children:\"\"+a._wrapperState.initialValue})}function hb(a,b){var c=b.value;if(null==c){c=b.children;b=b.defaultValue;if(null!=c){if(null!=b)throw Error(p(92));if(eb(c)){if(1<c.length)throw Error(p(93));c=c[0]}b=c}null==b&&(b=\"\");c=b}a._wrapperState={initialValue:Sa(c)}}\nfunction ib(a,b){var c=Sa(b.value),d=Sa(b.defaultValue);null!=c&&(c=\"\"+c,c!==a.value&&(a.value=c),null==b.defaultValue&&a.defaultValue!==c&&(a.defaultValue=c));null!=d&&(a.defaultValue=\"\"+d)}function jb(a){var b=a.textContent;b===a._wrapperState.initialValue&&\"\"!==b&&null!==b&&(a.value=b)}function kb(a){switch(a){case \"svg\":return\"http://www.w3.org/2000/svg\";case \"math\":return\"http://www.w3.org/1998/Math/MathML\";default:return\"http://www.w3.org/1999/xhtml\"}}\nfunction lb(a,b){return null==a||\"http://www.w3.org/1999/xhtml\"===a?kb(b):\"http://www.w3.org/2000/svg\"===a&&\"foreignObject\"===b?\"http://www.w3.org/1999/xhtml\":a}\nvar mb,nb=function(a){return\"undefined\"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(b,c,d,e){MSApp.execUnsafeLocalFunction(function(){return a(b,c,d,e)})}:a}(function(a,b){if(\"http://www.w3.org/2000/svg\"!==a.namespaceURI||\"innerHTML\"in a)a.innerHTML=b;else{mb=mb||document.createElement(\"div\");mb.innerHTML=\"<svg>\"+b.valueOf().toString()+\"</svg>\";for(b=mb.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;b.firstChild;)a.appendChild(b.firstChild)}});\nfunction ob(a,b){if(b){var c=a.firstChild;if(c&&c===a.lastChild&&3===c.nodeType){c.nodeValue=b;return}}a.textContent=b}\nvar pb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,\nzoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qb=[\"Webkit\",\"ms\",\"Moz\",\"O\"];Object.keys(pb).forEach(function(a){qb.forEach(function(b){b=b+a.charAt(0).toUpperCase()+a.substring(1);pb[b]=pb[a]})});function rb(a,b,c){return null==b||\"boolean\"===typeof b||\"\"===b?\"\":c||\"number\"!==typeof b||0===b||pb.hasOwnProperty(a)&&pb[a]?(\"\"+b).trim():b+\"px\"}\nfunction sb(a,b){a=a.style;for(var c in b)if(b.hasOwnProperty(c)){var d=0===c.indexOf(\"--\"),e=rb(c,b[c],d);\"float\"===c&&(c=\"cssFloat\");d?a.setProperty(c,e):a[c]=e}}var tb=A({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});\nfunction ub(a,b){if(b){if(tb[a]&&(null!=b.children||null!=b.dangerouslySetInnerHTML))throw Error(p(137,a));if(null!=b.dangerouslySetInnerHTML){if(null!=b.children)throw Error(p(60));if(\"object\"!==typeof b.dangerouslySetInnerHTML||!(\"__html\"in b.dangerouslySetInnerHTML))throw Error(p(61));}if(null!=b.style&&\"object\"!==typeof b.style)throw Error(p(62));}}\nfunction vb(a,b){if(-1===a.indexOf(\"-\"))return\"string\"===typeof b.is;switch(a){case \"annotation-xml\":case \"color-profile\":case \"font-face\":case \"font-face-src\":case \"font-face-uri\":case \"font-face-format\":case \"font-face-name\":case \"missing-glyph\":return!1;default:return!0}}var wb=null;function xb(a){a=a.target||a.srcElement||window;a.correspondingUseElement&&(a=a.correspondingUseElement);return 3===a.nodeType?a.parentNode:a}var yb=null,zb=null,Ab=null;\nfunction Bb(a){if(a=Cb(a)){if(\"function\"!==typeof yb)throw Error(p(280));var b=a.stateNode;b&&(b=Db(b),yb(a.stateNode,a.type,b))}}function Eb(a){zb?Ab?Ab.push(a):Ab=[a]:zb=a}function Fb(){if(zb){var a=zb,b=Ab;Ab=zb=null;Bb(a);if(b)for(a=0;a<b.length;a++)Bb(b[a])}}function Gb(a,b){return a(b)}function Hb(){}var Ib=!1;function Jb(a,b,c){if(Ib)return a(b,c);Ib=!0;try{return Gb(a,b,c)}finally{if(Ib=!1,null!==zb||null!==Ab)Hb(),Fb()}}\nfunction Kb(a,b){var c=a.stateNode;if(null===c)return null;var d=Db(c);if(null===d)return null;c=d[b];a:switch(b){case \"onClick\":case \"onClickCapture\":case \"onDoubleClick\":case \"onDoubleClickCapture\":case \"onMouseDown\":case \"onMouseDownCapture\":case \"onMouseMove\":case \"onMouseMoveCapture\":case \"onMouseUp\":case \"onMouseUpCapture\":case \"onMouseEnter\":(d=!d.disabled)||(a=a.type,d=!(\"button\"===a||\"input\"===a||\"select\"===a||\"textarea\"===a));a=!d;break a;default:a=!1}if(a)return null;if(c&&\"function\"!==\ntypeof c)throw Error(p(231,b,typeof c));return c}var Lb=!1;if(ia)try{var Mb={};Object.defineProperty(Mb,\"passive\",{get:function(){Lb=!0}});window.addEventListener(\"test\",Mb,Mb);window.removeEventListener(\"test\",Mb,Mb)}catch(a){Lb=!1}function Nb(a,b,c,d,e,f,g,h,k){var l=Array.prototype.slice.call(arguments,3);try{b.apply(c,l)}catch(m){this.onError(m)}}var Ob=!1,Pb=null,Qb=!1,Rb=null,Sb={onError:function(a){Ob=!0;Pb=a}};function Tb(a,b,c,d,e,f,g,h,k){Ob=!1;Pb=null;Nb.apply(Sb,arguments)}\nfunction Ub(a,b,c,d,e,f,g,h,k){Tb.apply(this,arguments);if(Ob){if(Ob){var l=Pb;Ob=!1;Pb=null}else throw Error(p(198));Qb||(Qb=!0,Rb=l)}}function Vb(a){var b=a,c=a;if(a.alternate)for(;b.return;)b=b.return;else{a=b;do b=a,0!==(b.flags&4098)&&(c=b.return),a=b.return;while(a)}return 3===b.tag?c:null}function Wb(a){if(13===a.tag){var b=a.memoizedState;null===b&&(a=a.alternate,null!==a&&(b=a.memoizedState));if(null!==b)return b.dehydrated}return null}function Xb(a){if(Vb(a)!==a)throw Error(p(188));}\nfunction Yb(a){var b=a.alternate;if(!b){b=Vb(a);if(null===b)throw Error(p(188));return b!==a?null:a}for(var c=a,d=b;;){var e=c.return;if(null===e)break;var f=e.alternate;if(null===f){d=e.return;if(null!==d){c=d;continue}break}if(e.child===f.child){for(f=e.child;f;){if(f===c)return Xb(e),a;if(f===d)return Xb(e),b;f=f.sibling}throw Error(p(188));}if(c.return!==d.return)c=e,d=f;else{for(var g=!1,h=e.child;h;){if(h===c){g=!0;c=e;d=f;break}if(h===d){g=!0;d=e;c=f;break}h=h.sibling}if(!g){for(h=f.child;h;){if(h===\nc){g=!0;c=f;d=e;break}if(h===d){g=!0;d=f;c=e;break}h=h.sibling}if(!g)throw Error(p(189));}}if(c.alternate!==d)throw Error(p(190));}if(3!==c.tag)throw Error(p(188));return c.stateNode.current===c?a:b}function Zb(a){a=Yb(a);return null!==a?$b(a):null}function $b(a){if(5===a.tag||6===a.tag)return a;for(a=a.child;null!==a;){var b=$b(a);if(null!==b)return b;a=a.sibling}return null}\nvar ac=ca.unstable_scheduleCallback,bc=ca.unstable_cancelCallback,cc=ca.unstable_shouldYield,dc=ca.unstable_requestPaint,B=ca.unstable_now,ec=ca.unstable_getCurrentPriorityLevel,fc=ca.unstable_ImmediatePriority,gc=ca.unstable_UserBlockingPriority,hc=ca.unstable_NormalPriority,ic=ca.unstable_LowPriority,jc=ca.unstable_IdlePriority,kc=null,lc=null;function mc(a){if(lc&&\"function\"===typeof lc.onCommitFiberRoot)try{lc.onCommitFiberRoot(kc,a,void 0,128===(a.current.flags&128))}catch(b){}}\nvar oc=Math.clz32?Math.clz32:nc,pc=Math.log,qc=Math.LN2;function nc(a){a>>>=0;return 0===a?32:31-(pc(a)/qc|0)|0}var rc=64,sc=4194304;\nfunction tc(a){switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return a&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;\ndefault:return a}}function uc(a,b){var c=a.pendingLanes;if(0===c)return 0;var d=0,e=a.suspendedLanes,f=a.pingedLanes,g=c&268435455;if(0!==g){var h=g&~e;0!==h?d=tc(h):(f&=g,0!==f&&(d=tc(f)))}else g=c&~e,0!==g?d=tc(g):0!==f&&(d=tc(f));if(0===d)return 0;if(0!==b&&b!==d&&0===(b&e)&&(e=d&-d,f=b&-b,e>=f||16===e&&0!==(f&4194240)))return b;0!==(d&4)&&(d|=c&16);b=a.entangledLanes;if(0!==b)for(a=a.entanglements,b&=d;0<b;)c=31-oc(b),e=1<<c,d|=a[c],b&=~e;return d}\nfunction vc(a,b){switch(a){case 1:case 2:case 4:return b+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return b+5E3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}\nfunction wc(a,b){for(var c=a.suspendedLanes,d=a.pingedLanes,e=a.expirationTimes,f=a.pendingLanes;0<f;){var g=31-oc(f),h=1<<g,k=e[g];if(-1===k){if(0===(h&c)||0!==(h&d))e[g]=vc(h,b)}else k<=b&&(a.expiredLanes|=h);f&=~h}}function xc(a){a=a.pendingLanes&-1073741825;return 0!==a?a:a&1073741824?1073741824:0}function yc(){var a=rc;rc<<=1;0===(rc&4194240)&&(rc=64);return a}function zc(a){for(var b=[],c=0;31>c;c++)b.push(a);return b}\nfunction Ac(a,b,c){a.pendingLanes|=b;536870912!==b&&(a.suspendedLanes=0,a.pingedLanes=0);a=a.eventTimes;b=31-oc(b);a[b]=c}function Bc(a,b){var c=a.pendingLanes&~b;a.pendingLanes=b;a.suspendedLanes=0;a.pingedLanes=0;a.expiredLanes&=b;a.mutableReadLanes&=b;a.entangledLanes&=b;b=a.entanglements;var d=a.eventTimes;for(a=a.expirationTimes;0<c;){var e=31-oc(c),f=1<<e;b[e]=0;d[e]=-1;a[e]=-1;c&=~f}}\nfunction Cc(a,b){var c=a.entangledLanes|=b;for(a=a.entanglements;c;){var d=31-oc(c),e=1<<d;e&b|a[d]&b&&(a[d]|=b);c&=~e}}var C=0;function Dc(a){a&=-a;return 1<a?4<a?0!==(a&268435455)?16:536870912:4:1}var Ec,Fc,Gc,Hc,Ic,Jc=!1,Kc=[],Lc=null,Mc=null,Nc=null,Oc=new Map,Pc=new Map,Qc=[],Rc=\"mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit\".split(\" \");\nfunction Sc(a,b){switch(a){case \"focusin\":case \"focusout\":Lc=null;break;case \"dragenter\":case \"dragleave\":Mc=null;break;case \"mouseover\":case \"mouseout\":Nc=null;break;case \"pointerover\":case \"pointerout\":Oc.delete(b.pointerId);break;case \"gotpointercapture\":case \"lostpointercapture\":Pc.delete(b.pointerId)}}\nfunction Tc(a,b,c,d,e,f){if(null===a||a.nativeEvent!==f)return a={blockedOn:b,domEventName:c,eventSystemFlags:d,nativeEvent:f,targetContainers:[e]},null!==b&&(b=Cb(b),null!==b&&Fc(b)),a;a.eventSystemFlags|=d;b=a.targetContainers;null!==e&&-1===b.indexOf(e)&&b.push(e);return a}\nfunction Uc(a,b,c,d,e){switch(b){case \"focusin\":return Lc=Tc(Lc,a,b,c,d,e),!0;case \"dragenter\":return Mc=Tc(Mc,a,b,c,d,e),!0;case \"mouseover\":return Nc=Tc(Nc,a,b,c,d,e),!0;case \"pointerover\":var f=e.pointerId;Oc.set(f,Tc(Oc.get(f)||null,a,b,c,d,e));return!0;case \"gotpointercapture\":return f=e.pointerId,Pc.set(f,Tc(Pc.get(f)||null,a,b,c,d,e)),!0}return!1}\nfunction Vc(a){var b=Wc(a.target);if(null!==b){var c=Vb(b);if(null!==c)if(b=c.tag,13===b){if(b=Wb(c),null!==b){a.blockedOn=b;Ic(a.priority,function(){Gc(c)});return}}else if(3===b&&c.stateNode.current.memoizedState.isDehydrated){a.blockedOn=3===c.tag?c.stateNode.containerInfo:null;return}}a.blockedOn=null}\nfunction Xc(a){if(null!==a.blockedOn)return!1;for(var b=a.targetContainers;0<b.length;){var c=Yc(a.domEventName,a.eventSystemFlags,b[0],a.nativeEvent);if(null===c){c=a.nativeEvent;var d=new c.constructor(c.type,c);wb=d;c.target.dispatchEvent(d);wb=null}else return b=Cb(c),null!==b&&Fc(b),a.blockedOn=c,!1;b.shift()}return!0}function Zc(a,b,c){Xc(a)&&c.delete(b)}function $c(){Jc=!1;null!==Lc&&Xc(Lc)&&(Lc=null);null!==Mc&&Xc(Mc)&&(Mc=null);null!==Nc&&Xc(Nc)&&(Nc=null);Oc.forEach(Zc);Pc.forEach(Zc)}\nfunction ad(a,b){a.blockedOn===b&&(a.blockedOn=null,Jc||(Jc=!0,ca.unstable_scheduleCallback(ca.unstable_NormalPriority,$c)))}\nfunction bd(a){function b(b){return ad(b,a)}if(0<Kc.length){ad(Kc[0],a);for(var c=1;c<Kc.length;c++){var d=Kc[c];d.blockedOn===a&&(d.blockedOn=null)}}null!==Lc&&ad(Lc,a);null!==Mc&&ad(Mc,a);null!==Nc&&ad(Nc,a);Oc.forEach(b);Pc.forEach(b);for(c=0;c<Qc.length;c++)d=Qc[c],d.blockedOn===a&&(d.blockedOn=null);for(;0<Qc.length&&(c=Qc[0],null===c.blockedOn);)Vc(c),null===c.blockedOn&&Qc.shift()}var cd=ua.ReactCurrentBatchConfig,dd=!0;\nfunction ed(a,b,c,d){var e=C,f=cd.transition;cd.transition=null;try{C=1,fd(a,b,c,d)}finally{C=e,cd.transition=f}}function gd(a,b,c,d){var e=C,f=cd.transition;cd.transition=null;try{C=4,fd(a,b,c,d)}finally{C=e,cd.transition=f}}\nfunction fd(a,b,c,d){if(dd){var e=Yc(a,b,c,d);if(null===e)hd(a,b,d,id,c),Sc(a,d);else if(Uc(e,a,b,c,d))d.stopPropagation();else if(Sc(a,d),b&4&&-1<Rc.indexOf(a)){for(;null!==e;){var f=Cb(e);null!==f&&Ec(f);f=Yc(a,b,c,d);null===f&&hd(a,b,d,id,c);if(f===e)break;e=f}null!==e&&d.stopPropagation()}else hd(a,b,d,null,c)}}var id=null;\nfunction Yc(a,b,c,d){id=null;a=xb(d);a=Wc(a);if(null!==a)if(b=Vb(a),null===b)a=null;else if(c=b.tag,13===c){a=Wb(b);if(null!==a)return a;a=null}else if(3===c){if(b.stateNode.current.memoizedState.isDehydrated)return 3===b.tag?b.stateNode.containerInfo:null;a=null}else b!==a&&(a=null);id=a;return null}\nfunction jd(a){switch(a){case \"cancel\":case \"click\":case \"close\":case \"contextmenu\":case \"copy\":case \"cut\":case \"auxclick\":case \"dblclick\":case \"dragend\":case \"dragstart\":case \"drop\":case \"focusin\":case \"focusout\":case \"input\":case \"invalid\":case \"keydown\":case \"keypress\":case \"keyup\":case \"mousedown\":case \"mouseup\":case \"paste\":case \"pause\":case \"play\":case \"pointercancel\":case \"pointerdown\":case \"pointerup\":case \"ratechange\":case \"reset\":case \"resize\":case \"seeked\":case \"submit\":case \"touchcancel\":case \"touchend\":case \"touchstart\":case \"volumechange\":case \"change\":case \"selectionchange\":case \"textInput\":case \"compositionstart\":case \"compositionend\":case \"compositionupdate\":case \"beforeblur\":case \"afterblur\":case \"beforeinput\":case \"blur\":case \"fullscreenchange\":case \"focus\":case \"hashchange\":case \"popstate\":case \"select\":case \"selectstart\":return 1;case \"drag\":case \"dragenter\":case \"dragexit\":case \"dragleave\":case \"dragover\":case \"mousemove\":case \"mouseout\":case \"mouseover\":case \"pointermove\":case \"pointerout\":case \"pointerover\":case \"scroll\":case \"toggle\":case \"touchmove\":case \"wheel\":case \"mouseenter\":case \"mouseleave\":case \"pointerenter\":case \"pointerleave\":return 4;\ncase \"message\":switch(ec()){case fc:return 1;case gc:return 4;case hc:case ic:return 16;case jc:return 536870912;default:return 16}default:return 16}}var kd=null,ld=null,md=null;function nd(){if(md)return md;var a,b=ld,c=b.length,d,e=\"value\"in kd?kd.value:kd.textContent,f=e.length;for(a=0;a<c&&b[a]===e[a];a++);var g=c-a;for(d=1;d<=g&&b[c-d]===e[f-d];d++);return md=e.slice(a,1<d?1-d:void 0)}\nfunction od(a){var b=a.keyCode;\"charCode\"in a?(a=a.charCode,0===a&&13===b&&(a=13)):a=b;10===a&&(a=13);return 32<=a||13===a?a:0}function pd(){return!0}function qd(){return!1}\nfunction rd(a){function b(b,d,e,f,g){this._reactName=b;this._targetInst=e;this.type=d;this.nativeEvent=f;this.target=g;this.currentTarget=null;for(var c in a)a.hasOwnProperty(c)&&(b=a[c],this[c]=b?b(f):f[c]);this.isDefaultPrevented=(null!=f.defaultPrevented?f.defaultPrevented:!1===f.returnValue)?pd:qd;this.isPropagationStopped=qd;return this}A(b.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():\"unknown\"!==typeof a.returnValue&&\n(a.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():\"unknown\"!==typeof a.cancelBubble&&(a.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd});return b}\nvar sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td=rd(sd),ud=A({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=A({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(a){return void 0===a.relatedTarget?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){if(\"movementX\"in\na)return a.movementX;a!==yd&&(yd&&\"mousemove\"===a.type?(wd=a.screenX-yd.screenX,xd=a.screenY-yd.screenY):xd=wd=0,yd=a);return wd},movementY:function(a){return\"movementY\"in a?a.movementY:xd}}),Bd=rd(Ad),Cd=A({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=A({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=A({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=A({},sd,{clipboardData:function(a){return\"clipboardData\"in a?a.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=A({},sd,{data:0}),Ld=rd(Kd),Md={Esc:\"Escape\",\nSpacebar:\" \",Left:\"ArrowLeft\",Up:\"ArrowUp\",Right:\"ArrowRight\",Down:\"ArrowDown\",Del:\"Delete\",Win:\"OS\",Menu:\"ContextMenu\",Apps:\"ContextMenu\",Scroll:\"ScrollLock\",MozPrintableKey:\"Unidentified\"},Nd={8:\"Backspace\",9:\"Tab\",12:\"Clear\",13:\"Enter\",16:\"Shift\",17:\"Control\",18:\"Alt\",19:\"Pause\",20:\"CapsLock\",27:\"Escape\",32:\" \",33:\"PageUp\",34:\"PageDown\",35:\"End\",36:\"Home\",37:\"ArrowLeft\",38:\"ArrowUp\",39:\"ArrowRight\",40:\"ArrowDown\",45:\"Insert\",46:\"Delete\",112:\"F1\",113:\"F2\",114:\"F3\",115:\"F4\",116:\"F5\",117:\"F6\",118:\"F7\",\n119:\"F8\",120:\"F9\",121:\"F10\",122:\"F11\",123:\"F12\",144:\"NumLock\",145:\"ScrollLock\",224:\"Meta\"},Od={Alt:\"altKey\",Control:\"ctrlKey\",Meta:\"metaKey\",Shift:\"shiftKey\"};function Pd(a){var b=this.nativeEvent;return b.getModifierState?b.getModifierState(a):(a=Od[a])?!!b[a]:!1}function zd(){return Pd}\nvar Qd=A({},ud,{key:function(a){if(a.key){var b=Md[a.key]||a.key;if(\"Unidentified\"!==b)return b}return\"keypress\"===a.type?(a=od(a),13===a?\"Enter\":String.fromCharCode(a)):\"keydown\"===a.type||\"keyup\"===a.type?Nd[a.keyCode]||\"Unidentified\":\"\"},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(a){return\"keypress\"===a.type?od(a):0},keyCode:function(a){return\"keydown\"===a.type||\"keyup\"===a.type?a.keyCode:0},which:function(a){return\"keypress\"===\na.type?od(a):\"keydown\"===a.type||\"keyup\"===a.type?a.keyCode:0}}),Rd=rd(Qd),Sd=A({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=A({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=A({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=A({},Ad,{deltaX:function(a){return\"deltaX\"in a?a.deltaX:\"wheelDeltaX\"in a?-a.wheelDeltaX:0},\ndeltaY:function(a){return\"deltaY\"in a?a.deltaY:\"wheelDeltaY\"in a?-a.wheelDeltaY:\"wheelDelta\"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae=ia&&\"CompositionEvent\"in window,be=null;ia&&\"documentMode\"in document&&(be=document.documentMode);var ce=ia&&\"TextEvent\"in window&&!be,de=ia&&(!ae||be&&8<be&&11>=be),ee=String.fromCharCode(32),fe=!1;\nfunction ge(a,b){switch(a){case \"keyup\":return-1!==$d.indexOf(b.keyCode);case \"keydown\":return 229!==b.keyCode;case \"keypress\":case \"mousedown\":case \"focusout\":return!0;default:return!1}}function he(a){a=a.detail;return\"object\"===typeof a&&\"data\"in a?a.data:null}var ie=!1;function je(a,b){switch(a){case \"compositionend\":return he(b);case \"keypress\":if(32!==b.which)return null;fe=!0;return ee;case \"textInput\":return a=b.data,a===ee&&fe?null:a;default:return null}}\nfunction ke(a,b){if(ie)return\"compositionend\"===a||!ae&&ge(a,b)?(a=nd(),md=ld=kd=null,ie=!1,a):null;switch(a){case \"paste\":return null;case \"keypress\":if(!(b.ctrlKey||b.altKey||b.metaKey)||b.ctrlKey&&b.altKey){if(b.char&&1<b.char.length)return b.char;if(b.which)return String.fromCharCode(b.which)}return null;case \"compositionend\":return de&&\"ko\"!==b.locale?null:b.data;default:return null}}\nvar le={color:!0,date:!0,datetime:!0,\"datetime-local\":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me(a){var b=a&&a.nodeName&&a.nodeName.toLowerCase();return\"input\"===b?!!le[a.type]:\"textarea\"===b?!0:!1}function ne(a,b,c,d){Eb(d);b=oe(b,\"onChange\");0<b.length&&(c=new td(\"onChange\",\"change\",null,c,d),a.push({event:c,listeners:b}))}var pe=null,qe=null;function re(a){se(a,0)}function te(a){var b=ue(a);if(Wa(b))return a}\nfunction ve(a,b){if(\"change\"===a)return b}var we=!1;if(ia){var xe;if(ia){var ye=\"oninput\"in document;if(!ye){var ze=document.createElement(\"div\");ze.setAttribute(\"oninput\",\"return;\");ye=\"function\"===typeof ze.oninput}xe=ye}else xe=!1;we=xe&&(!document.documentMode||9<document.documentMode)}function Ae(){pe&&(pe.detachEvent(\"onpropertychange\",Be),qe=pe=null)}function Be(a){if(\"value\"===a.propertyName&&te(qe)){var b=[];ne(b,qe,a,xb(a));Jb(re,b)}}\nfunction Ce(a,b,c){\"focusin\"===a?(Ae(),pe=b,qe=c,pe.attachEvent(\"onpropertychange\",Be)):\"focusout\"===a&&Ae()}function De(a){if(\"selectionchange\"===a||\"keyup\"===a||\"keydown\"===a)return te(qe)}function Ee(a,b){if(\"click\"===a)return te(b)}function Fe(a,b){if(\"input\"===a||\"change\"===a)return te(b)}function Ge(a,b){return a===b&&(0!==a||1/a===1/b)||a!==a&&b!==b}var He=\"function\"===typeof Object.is?Object.is:Ge;\nfunction Ie(a,b){if(He(a,b))return!0;if(\"object\"!==typeof a||null===a||\"object\"!==typeof b||null===b)return!1;var c=Object.keys(a),d=Object.keys(b);if(c.length!==d.length)return!1;for(d=0;d<c.length;d++){var e=c[d];if(!ja.call(b,e)||!He(a[e],b[e]))return!1}return!0}function Je(a){for(;a&&a.firstChild;)a=a.firstChild;return a}\nfunction Ke(a,b){var c=Je(a);a=0;for(var d;c;){if(3===c.nodeType){d=a+c.textContent.length;if(a<=b&&d>=b)return{node:c,offset:b-a};a=d}a:{for(;c;){if(c.nextSibling){c=c.nextSibling;break a}c=c.parentNode}c=void 0}c=Je(c)}}function Le(a,b){return a&&b?a===b?!0:a&&3===a.nodeType?!1:b&&3===b.nodeType?Le(a,b.parentNode):\"contains\"in a?a.contains(b):a.compareDocumentPosition?!!(a.compareDocumentPosition(b)&16):!1:!1}\nfunction Me(){for(var a=window,b=Xa();b instanceof a.HTMLIFrameElement;){try{var c=\"string\"===typeof b.contentWindow.location.href}catch(d){c=!1}if(c)a=b.contentWindow;else break;b=Xa(a.document)}return b}function Ne(a){var b=a&&a.nodeName&&a.nodeName.toLowerCase();return b&&(\"input\"===b&&(\"text\"===a.type||\"search\"===a.type||\"tel\"===a.type||\"url\"===a.type||\"password\"===a.type)||\"textarea\"===b||\"true\"===a.contentEditable)}\nfunction Oe(a){var b=Me(),c=a.focusedElem,d=a.selectionRange;if(b!==c&&c&&c.ownerDocument&&Le(c.ownerDocument.documentElement,c)){if(null!==d&&Ne(c))if(b=d.start,a=d.end,void 0===a&&(a=b),\"selectionStart\"in c)c.selectionStart=b,c.selectionEnd=Math.min(a,c.value.length);else if(a=(b=c.ownerDocument||document)&&b.defaultView||window,a.getSelection){a=a.getSelection();var e=c.textContent.length,f=Math.min(d.start,e);d=void 0===d.end?f:Math.min(d.end,e);!a.extend&&f>d&&(e=d,d=f,f=e);e=Ke(c,f);var g=Ke(c,\nd);e&&g&&(1!==a.rangeCount||a.anchorNode!==e.node||a.anchorOffset!==e.offset||a.focusNode!==g.node||a.focusOffset!==g.offset)&&(b=b.createRange(),b.setStart(e.node,e.offset),a.removeAllRanges(),f>d?(a.addRange(b),a.extend(g.node,g.offset)):(b.setEnd(g.node,g.offset),a.addRange(b)))}b=[];for(a=c;a=a.parentNode;)1===a.nodeType&&b.push({element:a,left:a.scrollLeft,top:a.scrollTop});\"function\"===typeof c.focus&&c.focus();for(c=0;c<b.length;c++)a=b[c],a.element.scrollLeft=a.left,a.element.scrollTop=a.top}}\nvar Pe=ia&&\"documentMode\"in document&&11>=document.documentMode,Qe=null,Re=null,Se=null,Te=!1;\nfunction Ue(a,b,c){var d=c.window===c?c.document:9===c.nodeType?c:c.ownerDocument;Te||null==Qe||Qe!==Xa(d)||(d=Qe,\"selectionStart\"in d&&Ne(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Se&&Ie(Se,d)||(Se=d,d=oe(Re,\"onSelect\"),0<d.length&&(b=new td(\"onSelect\",\"select\",null,b,c),a.push({event:b,listeners:d}),b.target=Qe)))}\nfunction Ve(a,b){var c={};c[a.toLowerCase()]=b.toLowerCase();c[\"Webkit\"+a]=\"webkit\"+b;c[\"Moz\"+a]=\"moz\"+b;return c}var We={animationend:Ve(\"Animation\",\"AnimationEnd\"),animationiteration:Ve(\"Animation\",\"AnimationIteration\"),animationstart:Ve(\"Animation\",\"AnimationStart\"),transitionend:Ve(\"Transition\",\"TransitionEnd\")},Xe={},Ye={};\nia&&(Ye=document.createElement(\"div\").style,\"AnimationEvent\"in window||(delete We.animationend.animation,delete We.animationiteration.animation,delete We.animationstart.animation),\"TransitionEvent\"in window||delete We.transitionend.transition);function Ze(a){if(Xe[a])return Xe[a];if(!We[a])return a;var b=We[a],c;for(c in b)if(b.hasOwnProperty(c)&&c in Ye)return Xe[a]=b[c];return a}var $e=Ze(\"animationend\"),af=Ze(\"animationiteration\"),bf=Ze(\"animationstart\"),cf=Ze(\"transitionend\"),df=new Map,ef=\"abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel\".split(\" \");\nfunction ff(a,b){df.set(a,b);fa(b,[a])}for(var gf=0;gf<ef.length;gf++){var hf=ef[gf],jf=hf.toLowerCase(),kf=hf[0].toUpperCase()+hf.slice(1);ff(jf,\"on\"+kf)}ff($e,\"onAnimationEnd\");ff(af,\"onAnimationIteration\");ff(bf,\"onAnimationStart\");ff(\"dblclick\",\"onDoubleClick\");ff(\"focusin\",\"onFocus\");ff(\"focusout\",\"onBlur\");ff(cf,\"onTransitionEnd\");ha(\"onMouseEnter\",[\"mouseout\",\"mouseover\"]);ha(\"onMouseLeave\",[\"mouseout\",\"mouseover\"]);ha(\"onPointerEnter\",[\"pointerout\",\"pointerover\"]);\nha(\"onPointerLeave\",[\"pointerout\",\"pointerover\"]);fa(\"onChange\",\"change click focusin focusout input keydown keyup selectionchange\".split(\" \"));fa(\"onSelect\",\"focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange\".split(\" \"));fa(\"onBeforeInput\",[\"compositionend\",\"keypress\",\"textInput\",\"paste\"]);fa(\"onCompositionEnd\",\"compositionend focusout keydown keypress keyup mousedown\".split(\" \"));fa(\"onCompositionStart\",\"compositionstart focusout keydown keypress keyup mousedown\".split(\" \"));\nfa(\"onCompositionUpdate\",\"compositionupdate focusout keydown keypress keyup mousedown\".split(\" \"));var lf=\"abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting\".split(\" \"),mf=new Set(\"cancel close invalid load scroll toggle\".split(\" \").concat(lf));\nfunction nf(a,b,c){var d=a.type||\"unknown-event\";a.currentTarget=c;Ub(d,b,void 0,a);a.currentTarget=null}\nfunction se(a,b){b=0!==(b&4);for(var c=0;c<a.length;c++){var d=a[c],e=d.event;d=d.listeners;a:{var f=void 0;if(b)for(var g=d.length-1;0<=g;g--){var h=d[g],k=h.instance,l=h.currentTarget;h=h.listener;if(k!==f&&e.isPropagationStopped())break a;nf(e,h,l);f=k}else for(g=0;g<d.length;g++){h=d[g];k=h.instance;l=h.currentTarget;h=h.listener;if(k!==f&&e.isPropagationStopped())break a;nf(e,h,l);f=k}}}if(Qb)throw a=Rb,Qb=!1,Rb=null,a;}\nfunction D(a,b){var c=b[of];void 0===c&&(c=b[of]=new Set);var d=a+\"__bubble\";c.has(d)||(pf(b,a,2,!1),c.add(d))}function qf(a,b,c){var d=0;b&&(d|=4);pf(c,a,d,b)}var rf=\"_reactListening\"+Math.random().toString(36).slice(2);function sf(a){if(!a[rf]){a[rf]=!0;da.forEach(function(b){\"selectionchange\"!==b&&(mf.has(b)||qf(b,!1,a),qf(b,!0,a))});var b=9===a.nodeType?a:a.ownerDocument;null===b||b[rf]||(b[rf]=!0,qf(\"selectionchange\",!1,b))}}\nfunction pf(a,b,c,d){switch(jd(b)){case 1:var e=ed;break;case 4:e=gd;break;default:e=fd}c=e.bind(null,b,c,a);e=void 0;!Lb||\"touchstart\"!==b&&\"touchmove\"!==b&&\"wheel\"!==b||(e=!0);d?void 0!==e?a.addEventListener(b,c,{capture:!0,passive:e}):a.addEventListener(b,c,!0):void 0!==e?a.addEventListener(b,c,{passive:e}):a.addEventListener(b,c,!1)}\nfunction hd(a,b,c,d,e){var f=d;if(0===(b&1)&&0===(b&2)&&null!==d)a:for(;;){if(null===d)return;var g=d.tag;if(3===g||4===g){var h=d.stateNode.containerInfo;if(h===e||8===h.nodeType&&h.parentNode===e)break;if(4===g)for(g=d.return;null!==g;){var k=g.tag;if(3===k||4===k)if(k=g.stateNode.containerInfo,k===e||8===k.nodeType&&k.parentNode===e)return;g=g.return}for(;null!==h;){g=Wc(h);if(null===g)return;k=g.tag;if(5===k||6===k){d=f=g;continue a}h=h.parentNode}}d=d.return}Jb(function(){var d=f,e=xb(c),g=[];\na:{var h=df.get(a);if(void 0!==h){var k=td,n=a;switch(a){case \"keypress\":if(0===od(c))break a;case \"keydown\":case \"keyup\":k=Rd;break;case \"focusin\":n=\"focus\";k=Fd;break;case \"focusout\":n=\"blur\";k=Fd;break;case \"beforeblur\":case \"afterblur\":k=Fd;break;case \"click\":if(2===c.button)break a;case \"auxclick\":case \"dblclick\":case \"mousedown\":case \"mousemove\":case \"mouseup\":case \"mouseout\":case \"mouseover\":case \"contextmenu\":k=Bd;break;case \"drag\":case \"dragend\":case \"dragenter\":case \"dragexit\":case \"dragleave\":case \"dragover\":case \"dragstart\":case \"drop\":k=\nDd;break;case \"touchcancel\":case \"touchend\":case \"touchmove\":case \"touchstart\":k=Vd;break;case $e:case af:case bf:k=Hd;break;case cf:k=Xd;break;case \"scroll\":k=vd;break;case \"wheel\":k=Zd;break;case \"copy\":case \"cut\":case \"paste\":k=Jd;break;case \"gotpointercapture\":case \"lostpointercapture\":case \"pointercancel\":case \"pointerdown\":case \"pointermove\":case \"pointerout\":case \"pointerover\":case \"pointerup\":k=Td}var t=0!==(b&4),J=!t&&\"scroll\"===a,x=t?null!==h?h+\"Capture\":null:h;t=[];for(var w=d,u;null!==\nw;){u=w;var F=u.stateNode;5===u.tag&&null!==F&&(u=F,null!==x&&(F=Kb(w,x),null!=F&&t.push(tf(w,F,u))));if(J)break;w=w.return}0<t.length&&(h=new k(h,n,null,c,e),g.push({event:h,listeners:t}))}}if(0===(b&7)){a:{h=\"mouseover\"===a||\"pointerover\"===a;k=\"mouseout\"===a||\"pointerout\"===a;if(h&&c!==wb&&(n=c.relatedTarget||c.fromElement)&&(Wc(n)||n[uf]))break a;if(k||h){h=e.window===e?e:(h=e.ownerDocument)?h.defaultView||h.parentWindow:window;if(k){if(n=c.relatedTarget||c.toElement,k=d,n=n?Wc(n):null,null!==\nn&&(J=Vb(n),n!==J||5!==n.tag&&6!==n.tag))n=null}else k=null,n=d;if(k!==n){t=Bd;F=\"onMouseLeave\";x=\"onMouseEnter\";w=\"mouse\";if(\"pointerout\"===a||\"pointerover\"===a)t=Td,F=\"onPointerLeave\",x=\"onPointerEnter\",w=\"pointer\";J=null==k?h:ue(k);u=null==n?h:ue(n);h=new t(F,w+\"leave\",k,c,e);h.target=J;h.relatedTarget=u;F=null;Wc(e)===d&&(t=new t(x,w+\"enter\",n,c,e),t.target=u,t.relatedTarget=J,F=t);J=F;if(k&&n)b:{t=k;x=n;w=0;for(u=t;u;u=vf(u))w++;u=0;for(F=x;F;F=vf(F))u++;for(;0<w-u;)t=vf(t),w--;for(;0<u-w;)x=\nvf(x),u--;for(;w--;){if(t===x||null!==x&&t===x.alternate)break b;t=vf(t);x=vf(x)}t=null}else t=null;null!==k&&wf(g,h,k,t,!1);null!==n&&null!==J&&wf(g,J,n,t,!0)}}}a:{h=d?ue(d):window;k=h.nodeName&&h.nodeName.toLowerCase();if(\"select\"===k||\"input\"===k&&\"file\"===h.type)var na=ve;else if(me(h))if(we)na=Fe;else{na=De;var xa=Ce}else(k=h.nodeName)&&\"input\"===k.toLowerCase()&&(\"checkbox\"===h.type||\"radio\"===h.type)&&(na=Ee);if(na&&(na=na(a,d))){ne(g,na,c,e);break a}xa&&xa(a,h,d);\"focusout\"===a&&(xa=h._wrapperState)&&\nxa.controlled&&\"number\"===h.type&&cb(h,\"number\",h.value)}xa=d?ue(d):window;switch(a){case \"focusin\":if(me(xa)||\"true\"===xa.contentEditable)Qe=xa,Re=d,Se=null;break;case \"focusout\":Se=Re=Qe=null;break;case \"mousedown\":Te=!0;break;case \"contextmenu\":case \"mouseup\":case \"dragend\":Te=!1;Ue(g,c,e);break;case \"selectionchange\":if(Pe)break;case \"keydown\":case \"keyup\":Ue(g,c,e)}var $a;if(ae)b:{switch(a){case \"compositionstart\":var ba=\"onCompositionStart\";break b;case \"compositionend\":ba=\"onCompositionEnd\";\nbreak b;case \"compositionupdate\":ba=\"onCompositionUpdate\";break b}ba=void 0}else ie?ge(a,c)&&(ba=\"onCompositionEnd\"):\"keydown\"===a&&229===c.keyCode&&(ba=\"onCompositionStart\");ba&&(de&&\"ko\"!==c.locale&&(ie||\"onCompositionStart\"!==ba?\"onCompositionEnd\"===ba&&ie&&($a=nd()):(kd=e,ld=\"value\"in kd?kd.value:kd.textContent,ie=!0)),xa=oe(d,ba),0<xa.length&&(ba=new Ld(ba,a,null,c,e),g.push({event:ba,listeners:xa}),$a?ba.data=$a:($a=he(c),null!==$a&&(ba.data=$a))));if($a=ce?je(a,c):ke(a,c))d=oe(d,\"onBeforeInput\"),\n0<d.length&&(e=new Ld(\"onBeforeInput\",\"beforeinput\",null,c,e),g.push({event:e,listeners:d}),e.data=$a)}se(g,b)})}function tf(a,b,c){return{instance:a,listener:b,currentTarget:c}}function oe(a,b){for(var c=b+\"Capture\",d=[];null!==a;){var e=a,f=e.stateNode;5===e.tag&&null!==f&&(e=f,f=Kb(a,c),null!=f&&d.unshift(tf(a,f,e)),f=Kb(a,b),null!=f&&d.push(tf(a,f,e)));a=a.return}return d}function vf(a){if(null===a)return null;do a=a.return;while(a&&5!==a.tag);return a?a:null}\nfunction wf(a,b,c,d,e){for(var f=b._reactName,g=[];null!==c&&c!==d;){var h=c,k=h.alternate,l=h.stateNode;if(null!==k&&k===d)break;5===h.tag&&null!==l&&(h=l,e?(k=Kb(c,f),null!=k&&g.unshift(tf(c,k,h))):e||(k=Kb(c,f),null!=k&&g.push(tf(c,k,h))));c=c.return}0!==g.length&&a.push({event:b,listeners:g})}var xf=/\\r\\n?/g,yf=/\\u0000|\\uFFFD/g;function zf(a){return(\"string\"===typeof a?a:\"\"+a).replace(xf,\"\\n\").replace(yf,\"\")}function Af(a,b,c){b=zf(b);if(zf(a)!==b&&c)throw Error(p(425));}function Bf(){}\nvar Cf=null,Df=null;function Ef(a,b){return\"textarea\"===a||\"noscript\"===a||\"string\"===typeof b.children||\"number\"===typeof b.children||\"object\"===typeof b.dangerouslySetInnerHTML&&null!==b.dangerouslySetInnerHTML&&null!=b.dangerouslySetInnerHTML.__html}\nvar Ff=\"function\"===typeof setTimeout?setTimeout:void 0,Gf=\"function\"===typeof clearTimeout?clearTimeout:void 0,Hf=\"function\"===typeof Promise?Promise:void 0,Jf=\"function\"===typeof queueMicrotask?queueMicrotask:\"undefined\"!==typeof Hf?function(a){return Hf.resolve(null).then(a).catch(If)}:Ff;function If(a){setTimeout(function(){throw a;})}\nfunction Kf(a,b){var c=b,d=0;do{var e=c.nextSibling;a.removeChild(c);if(e&&8===e.nodeType)if(c=e.data,\"/$\"===c){if(0===d){a.removeChild(e);bd(b);return}d--}else\"$\"!==c&&\"$?\"!==c&&\"$!\"!==c||d++;c=e}while(c);bd(b)}function Lf(a){for(;null!=a;a=a.nextSibling){var b=a.nodeType;if(1===b||3===b)break;if(8===b){b=a.data;if(\"$\"===b||\"$!\"===b||\"$?\"===b)break;if(\"/$\"===b)return null}}return a}\nfunction Mf(a){a=a.previousSibling;for(var b=0;a;){if(8===a.nodeType){var c=a.data;if(\"$\"===c||\"$!\"===c||\"$?\"===c){if(0===b)return a;b--}else\"/$\"===c&&b++}a=a.previousSibling}return null}var Nf=Math.random().toString(36).slice(2),Of=\"__reactFiber$\"+Nf,Pf=\"__reactProps$\"+Nf,uf=\"__reactContainer$\"+Nf,of=\"__reactEvents$\"+Nf,Qf=\"__reactListeners$\"+Nf,Rf=\"__reactHandles$\"+Nf;\nfunction Wc(a){var b=a[Of];if(b)return b;for(var c=a.parentNode;c;){if(b=c[uf]||c[Of]){c=b.alternate;if(null!==b.child||null!==c&&null!==c.child)for(a=Mf(a);null!==a;){if(c=a[Of])return c;a=Mf(a)}return b}a=c;c=a.parentNode}return null}function Cb(a){a=a[Of]||a[uf];return!a||5!==a.tag&&6!==a.tag&&13!==a.tag&&3!==a.tag?null:a}function ue(a){if(5===a.tag||6===a.tag)return a.stateNode;throw Error(p(33));}function Db(a){return a[Pf]||null}var Sf=[],Tf=-1;function Uf(a){return{current:a}}\nfunction E(a){0>Tf||(a.current=Sf[Tf],Sf[Tf]=null,Tf--)}function G(a,b){Tf++;Sf[Tf]=a.current;a.current=b}var Vf={},H=Uf(Vf),Wf=Uf(!1),Xf=Vf;function Yf(a,b){var c=a.type.contextTypes;if(!c)return Vf;var d=a.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===b)return d.__reactInternalMemoizedMaskedChildContext;var e={},f;for(f in c)e[f]=b[f];d&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=b,a.__reactInternalMemoizedMaskedChildContext=e);return e}\nfunction Zf(a){a=a.childContextTypes;return null!==a&&void 0!==a}function $f(){E(Wf);E(H)}function ag(a,b,c){if(H.current!==Vf)throw Error(p(168));G(H,b);G(Wf,c)}function bg(a,b,c){var d=a.stateNode;b=b.childContextTypes;if(\"function\"!==typeof d.getChildContext)return c;d=d.getChildContext();for(var e in d)if(!(e in b))throw Error(p(108,Ra(a)||\"Unknown\",e));return A({},c,d)}\nfunction cg(a){a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||Vf;Xf=H.current;G(H,a);G(Wf,Wf.current);return!0}function dg(a,b,c){var d=a.stateNode;if(!d)throw Error(p(169));c?(a=bg(a,b,Xf),d.__reactInternalMemoizedMergedChildContext=a,E(Wf),E(H),G(H,a)):E(Wf);G(Wf,c)}var eg=null,fg=!1,gg=!1;function hg(a){null===eg?eg=[a]:eg.push(a)}function ig(a){fg=!0;hg(a)}\nfunction jg(){if(!gg&&null!==eg){gg=!0;var a=0,b=C;try{var c=eg;for(C=1;a<c.length;a++){var d=c[a];do d=d(!0);while(null!==d)}eg=null;fg=!1}catch(e){throw null!==eg&&(eg=eg.slice(a+1)),ac(fc,jg),e;}finally{C=b,gg=!1}}return null}var kg=[],lg=0,mg=null,ng=0,og=[],pg=0,qg=null,rg=1,sg=\"\";function tg(a,b){kg[lg++]=ng;kg[lg++]=mg;mg=a;ng=b}\nfunction ug(a,b,c){og[pg++]=rg;og[pg++]=sg;og[pg++]=qg;qg=a;var d=rg;a=sg;var e=32-oc(d)-1;d&=~(1<<e);c+=1;var f=32-oc(b)+e;if(30<f){var g=e-e%5;f=(d&(1<<g)-1).toString(32);d>>=g;e-=g;rg=1<<32-oc(b)+e|c<<e|d;sg=f+a}else rg=1<<f|c<<e|d,sg=a}function vg(a){null!==a.return&&(tg(a,1),ug(a,1,0))}function wg(a){for(;a===mg;)mg=kg[--lg],kg[lg]=null,ng=kg[--lg],kg[lg]=null;for(;a===qg;)qg=og[--pg],og[pg]=null,sg=og[--pg],og[pg]=null,rg=og[--pg],og[pg]=null}var xg=null,yg=null,I=!1,zg=null;\nfunction Ag(a,b){var c=Bg(5,null,null,0);c.elementType=\"DELETED\";c.stateNode=b;c.return=a;b=a.deletions;null===b?(a.deletions=[c],a.flags|=16):b.push(c)}\nfunction Cg(a,b){switch(a.tag){case 5:var c=a.type;b=1!==b.nodeType||c.toLowerCase()!==b.nodeName.toLowerCase()?null:b;return null!==b?(a.stateNode=b,xg=a,yg=Lf(b.firstChild),!0):!1;case 6:return b=\"\"===a.pendingProps||3!==b.nodeType?null:b,null!==b?(a.stateNode=b,xg=a,yg=null,!0):!1;case 13:return b=8!==b.nodeType?null:b,null!==b?(c=null!==qg?{id:rg,overflow:sg}:null,a.memoizedState={dehydrated:b,treeContext:c,retryLane:1073741824},c=Bg(18,null,null,0),c.stateNode=b,c.return=a,a.child=c,xg=a,yg=\nnull,!0):!1;default:return!1}}function Dg(a){return 0!==(a.mode&1)&&0===(a.flags&128)}function Eg(a){if(I){var b=yg;if(b){var c=b;if(!Cg(a,b)){if(Dg(a))throw Error(p(418));b=Lf(c.nextSibling);var d=xg;b&&Cg(a,b)?Ag(d,c):(a.flags=a.flags&-4097|2,I=!1,xg=a)}}else{if(Dg(a))throw Error(p(418));a.flags=a.flags&-4097|2;I=!1;xg=a}}}function Fg(a){for(a=a.return;null!==a&&5!==a.tag&&3!==a.tag&&13!==a.tag;)a=a.return;xg=a}\nfunction Gg(a){if(a!==xg)return!1;if(!I)return Fg(a),I=!0,!1;var b;(b=3!==a.tag)&&!(b=5!==a.tag)&&(b=a.type,b=\"head\"!==b&&\"body\"!==b&&!Ef(a.type,a.memoizedProps));if(b&&(b=yg)){if(Dg(a))throw Hg(),Error(p(418));for(;b;)Ag(a,b),b=Lf(b.nextSibling)}Fg(a);if(13===a.tag){a=a.memoizedState;a=null!==a?a.dehydrated:null;if(!a)throw Error(p(317));a:{a=a.nextSibling;for(b=0;a;){if(8===a.nodeType){var c=a.data;if(\"/$\"===c){if(0===b){yg=Lf(a.nextSibling);break a}b--}else\"$\"!==c&&\"$!\"!==c&&\"$?\"!==c||b++}a=a.nextSibling}yg=\nnull}}else yg=xg?Lf(a.stateNode.nextSibling):null;return!0}function Hg(){for(var a=yg;a;)a=Lf(a.nextSibling)}function Ig(){yg=xg=null;I=!1}function Jg(a){null===zg?zg=[a]:zg.push(a)}var Kg=ua.ReactCurrentBatchConfig;\nfunction Lg(a,b,c){a=c.ref;if(null!==a&&\"function\"!==typeof a&&\"object\"!==typeof a){if(c._owner){c=c._owner;if(c){if(1!==c.tag)throw Error(p(309));var d=c.stateNode}if(!d)throw Error(p(147,a));var e=d,f=\"\"+a;if(null!==b&&null!==b.ref&&\"function\"===typeof b.ref&&b.ref._stringRef===f)return b.ref;b=function(a){var b=e.refs;null===a?delete b[f]:b[f]=a};b._stringRef=f;return b}if(\"string\"!==typeof a)throw Error(p(284));if(!c._owner)throw Error(p(290,a));}return a}\nfunction Mg(a,b){a=Object.prototype.toString.call(b);throw Error(p(31,\"[object Object]\"===a?\"object with keys {\"+Object.keys(b).join(\", \")+\"}\":a));}function Ng(a){var b=a._init;return b(a._payload)}\nfunction Og(a){function b(b,c){if(a){var d=b.deletions;null===d?(b.deletions=[c],b.flags|=16):d.push(c)}}function c(c,d){if(!a)return null;for(;null!==d;)b(c,d),d=d.sibling;return null}function d(a,b){for(a=new Map;null!==b;)null!==b.key?a.set(b.key,b):a.set(b.index,b),b=b.sibling;return a}function e(a,b){a=Pg(a,b);a.index=0;a.sibling=null;return a}function f(b,c,d){b.index=d;if(!a)return b.flags|=1048576,c;d=b.alternate;if(null!==d)return d=d.index,d<c?(b.flags|=2,c):d;b.flags|=2;return c}function g(b){a&&\nnull===b.alternate&&(b.flags|=2);return b}function h(a,b,c,d){if(null===b||6!==b.tag)return b=Qg(c,a.mode,d),b.return=a,b;b=e(b,c);b.return=a;return b}function k(a,b,c,d){var f=c.type;if(f===ya)return m(a,b,c.props.children,d,c.key);if(null!==b&&(b.elementType===f||\"object\"===typeof f&&null!==f&&f.$$typeof===Ha&&Ng(f)===b.type))return d=e(b,c.props),d.ref=Lg(a,b,c),d.return=a,d;d=Rg(c.type,c.key,c.props,null,a.mode,d);d.ref=Lg(a,b,c);d.return=a;return d}function l(a,b,c,d){if(null===b||4!==b.tag||\nb.stateNode.containerInfo!==c.containerInfo||b.stateNode.implementation!==c.implementation)return b=Sg(c,a.mode,d),b.return=a,b;b=e(b,c.children||[]);b.return=a;return b}function m(a,b,c,d,f){if(null===b||7!==b.tag)return b=Tg(c,a.mode,d,f),b.return=a,b;b=e(b,c);b.return=a;return b}function q(a,b,c){if(\"string\"===typeof b&&\"\"!==b||\"number\"===typeof b)return b=Qg(\"\"+b,a.mode,c),b.return=a,b;if(\"object\"===typeof b&&null!==b){switch(b.$$typeof){case va:return c=Rg(b.type,b.key,b.props,null,a.mode,c),\nc.ref=Lg(a,null,b),c.return=a,c;case wa:return b=Sg(b,a.mode,c),b.return=a,b;case Ha:var d=b._init;return q(a,d(b._payload),c)}if(eb(b)||Ka(b))return b=Tg(b,a.mode,c,null),b.return=a,b;Mg(a,b)}return null}function r(a,b,c,d){var e=null!==b?b.key:null;if(\"string\"===typeof c&&\"\"!==c||\"number\"===typeof c)return null!==e?null:h(a,b,\"\"+c,d);if(\"object\"===typeof c&&null!==c){switch(c.$$typeof){case va:return c.key===e?k(a,b,c,d):null;case wa:return c.key===e?l(a,b,c,d):null;case Ha:return e=c._init,r(a,\nb,e(c._payload),d)}if(eb(c)||Ka(c))return null!==e?null:m(a,b,c,d,null);Mg(a,c)}return null}function y(a,b,c,d,e){if(\"string\"===typeof d&&\"\"!==d||\"number\"===typeof d)return a=a.get(c)||null,h(b,a,\"\"+d,e);if(\"object\"===typeof d&&null!==d){switch(d.$$typeof){case va:return a=a.get(null===d.key?c:d.key)||null,k(b,a,d,e);case wa:return a=a.get(null===d.key?c:d.key)||null,l(b,a,d,e);case Ha:var f=d._init;return y(a,b,c,f(d._payload),e)}if(eb(d)||Ka(d))return a=a.get(c)||null,m(b,a,d,e,null);Mg(b,d)}return null}\nfunction n(e,g,h,k){for(var l=null,m=null,u=g,w=g=0,x=null;null!==u&&w<h.length;w++){u.index>w?(x=u,u=null):x=u.sibling;var n=r(e,u,h[w],k);if(null===n){null===u&&(u=x);break}a&&u&&null===n.alternate&&b(e,u);g=f(n,g,w);null===m?l=n:m.sibling=n;m=n;u=x}if(w===h.length)return c(e,u),I&&tg(e,w),l;if(null===u){for(;w<h.length;w++)u=q(e,h[w],k),null!==u&&(g=f(u,g,w),null===m?l=u:m.sibling=u,m=u);I&&tg(e,w);return l}for(u=d(e,u);w<h.length;w++)x=y(u,e,w,h[w],k),null!==x&&(a&&null!==x.alternate&&u.delete(null===\nx.key?w:x.key),g=f(x,g,w),null===m?l=x:m.sibling=x,m=x);a&&u.forEach(function(a){return b(e,a)});I&&tg(e,w);return l}function t(e,g,h,k){var l=Ka(h);if(\"function\"!==typeof l)throw Error(p(150));h=l.call(h);if(null==h)throw Error(p(151));for(var u=l=null,m=g,w=g=0,x=null,n=h.next();null!==m&&!n.done;w++,n=h.next()){m.index>w?(x=m,m=null):x=m.sibling;var t=r(e,m,n.value,k);if(null===t){null===m&&(m=x);break}a&&m&&null===t.alternate&&b(e,m);g=f(t,g,w);null===u?l=t:u.sibling=t;u=t;m=x}if(n.done)return c(e,\nm),I&&tg(e,w),l;if(null===m){for(;!n.done;w++,n=h.next())n=q(e,n.value,k),null!==n&&(g=f(n,g,w),null===u?l=n:u.sibling=n,u=n);I&&tg(e,w);return l}for(m=d(e,m);!n.done;w++,n=h.next())n=y(m,e,w,n.value,k),null!==n&&(a&&null!==n.alternate&&m.delete(null===n.key?w:n.key),g=f(n,g,w),null===u?l=n:u.sibling=n,u=n);a&&m.forEach(function(a){return b(e,a)});I&&tg(e,w);return l}function J(a,d,f,h){\"object\"===typeof f&&null!==f&&f.type===ya&&null===f.key&&(f=f.props.children);if(\"object\"===typeof f&&null!==f){switch(f.$$typeof){case va:a:{for(var k=\nf.key,l=d;null!==l;){if(l.key===k){k=f.type;if(k===ya){if(7===l.tag){c(a,l.sibling);d=e(l,f.props.children);d.return=a;a=d;break a}}else if(l.elementType===k||\"object\"===typeof k&&null!==k&&k.$$typeof===Ha&&Ng(k)===l.type){c(a,l.sibling);d=e(l,f.props);d.ref=Lg(a,l,f);d.return=a;a=d;break a}c(a,l);break}else b(a,l);l=l.sibling}f.type===ya?(d=Tg(f.props.children,a.mode,h,f.key),d.return=a,a=d):(h=Rg(f.type,f.key,f.props,null,a.mode,h),h.ref=Lg(a,d,f),h.return=a,a=h)}return g(a);case wa:a:{for(l=f.key;null!==\nd;){if(d.key===l)if(4===d.tag&&d.stateNode.containerInfo===f.containerInfo&&d.stateNode.implementation===f.implementation){c(a,d.sibling);d=e(d,f.children||[]);d.return=a;a=d;break a}else{c(a,d);break}else b(a,d);d=d.sibling}d=Sg(f,a.mode,h);d.return=a;a=d}return g(a);case Ha:return l=f._init,J(a,d,l(f._payload),h)}if(eb(f))return n(a,d,f,h);if(Ka(f))return t(a,d,f,h);Mg(a,f)}return\"string\"===typeof f&&\"\"!==f||\"number\"===typeof f?(f=\"\"+f,null!==d&&6===d.tag?(c(a,d.sibling),d=e(d,f),d.return=a,a=d):\n(c(a,d),d=Qg(f,a.mode,h),d.return=a,a=d),g(a)):c(a,d)}return J}var Ug=Og(!0),Vg=Og(!1),Wg=Uf(null),Xg=null,Yg=null,Zg=null;function $g(){Zg=Yg=Xg=null}function ah(a){var b=Wg.current;E(Wg);a._currentValue=b}function bh(a,b,c){for(;null!==a;){var d=a.alternate;(a.childLanes&b)!==b?(a.childLanes|=b,null!==d&&(d.childLanes|=b)):null!==d&&(d.childLanes&b)!==b&&(d.childLanes|=b);if(a===c)break;a=a.return}}\nfunction ch(a,b){Xg=a;Zg=Yg=null;a=a.dependencies;null!==a&&null!==a.firstContext&&(0!==(a.lanes&b)&&(dh=!0),a.firstContext=null)}function eh(a){var b=a._currentValue;if(Zg!==a)if(a={context:a,memoizedValue:b,next:null},null===Yg){if(null===Xg)throw Error(p(308));Yg=a;Xg.dependencies={lanes:0,firstContext:a}}else Yg=Yg.next=a;return b}var fh=null;function gh(a){null===fh?fh=[a]:fh.push(a)}\nfunction hh(a,b,c,d){var e=b.interleaved;null===e?(c.next=c,gh(b)):(c.next=e.next,e.next=c);b.interleaved=c;return ih(a,d)}function ih(a,b){a.lanes|=b;var c=a.alternate;null!==c&&(c.lanes|=b);c=a;for(a=a.return;null!==a;)a.childLanes|=b,c=a.alternate,null!==c&&(c.childLanes|=b),c=a,a=a.return;return 3===c.tag?c.stateNode:null}var jh=!1;function kh(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}\nfunction lh(a,b){a=a.updateQueue;b.updateQueue===a&&(b.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,effects:a.effects})}function mh(a,b){return{eventTime:a,lane:b,tag:0,payload:null,callback:null,next:null}}\nfunction nh(a,b,c){var d=a.updateQueue;if(null===d)return null;d=d.shared;if(0!==(K&2)){var e=d.pending;null===e?b.next=b:(b.next=e.next,e.next=b);d.pending=b;return ih(a,c)}e=d.interleaved;null===e?(b.next=b,gh(d)):(b.next=e.next,e.next=b);d.interleaved=b;return ih(a,c)}function oh(a,b,c){b=b.updateQueue;if(null!==b&&(b=b.shared,0!==(c&4194240))){var d=b.lanes;d&=a.pendingLanes;c|=d;b.lanes=c;Cc(a,c)}}\nfunction ph(a,b){var c=a.updateQueue,d=a.alternate;if(null!==d&&(d=d.updateQueue,c===d)){var e=null,f=null;c=c.firstBaseUpdate;if(null!==c){do{var g={eventTime:c.eventTime,lane:c.lane,tag:c.tag,payload:c.payload,callback:c.callback,next:null};null===f?e=f=g:f=f.next=g;c=c.next}while(null!==c);null===f?e=f=b:f=f.next=b}else e=f=b;c={baseState:d.baseState,firstBaseUpdate:e,lastBaseUpdate:f,shared:d.shared,effects:d.effects};a.updateQueue=c;return}a=c.lastBaseUpdate;null===a?c.firstBaseUpdate=b:a.next=\nb;c.lastBaseUpdate=b}\nfunction qh(a,b,c,d){var e=a.updateQueue;jh=!1;var f=e.firstBaseUpdate,g=e.lastBaseUpdate,h=e.shared.pending;if(null!==h){e.shared.pending=null;var k=h,l=k.next;k.next=null;null===g?f=l:g.next=l;g=k;var m=a.alternate;null!==m&&(m=m.updateQueue,h=m.lastBaseUpdate,h!==g&&(null===h?m.firstBaseUpdate=l:h.next=l,m.lastBaseUpdate=k))}if(null!==f){var q=e.baseState;g=0;m=l=k=null;h=f;do{var r=h.lane,y=h.eventTime;if((d&r)===r){null!==m&&(m=m.next={eventTime:y,lane:0,tag:h.tag,payload:h.payload,callback:h.callback,\nnext:null});a:{var n=a,t=h;r=b;y=c;switch(t.tag){case 1:n=t.payload;if(\"function\"===typeof n){q=n.call(y,q,r);break a}q=n;break a;case 3:n.flags=n.flags&-65537|128;case 0:n=t.payload;r=\"function\"===typeof n?n.call(y,q,r):n;if(null===r||void 0===r)break a;q=A({},q,r);break a;case 2:jh=!0}}null!==h.callback&&0!==h.lane&&(a.flags|=64,r=e.effects,null===r?e.effects=[h]:r.push(h))}else y={eventTime:y,lane:r,tag:h.tag,payload:h.payload,callback:h.callback,next:null},null===m?(l=m=y,k=q):m=m.next=y,g|=r;\nh=h.next;if(null===h)if(h=e.shared.pending,null===h)break;else r=h,h=r.next,r.next=null,e.lastBaseUpdate=r,e.shared.pending=null}while(1);null===m&&(k=q);e.baseState=k;e.firstBaseUpdate=l;e.lastBaseUpdate=m;b=e.shared.interleaved;if(null!==b){e=b;do g|=e.lane,e=e.next;while(e!==b)}else null===f&&(e.shared.lanes=0);rh|=g;a.lanes=g;a.memoizedState=q}}\nfunction sh(a,b,c){a=b.effects;b.effects=null;if(null!==a)for(b=0;b<a.length;b++){var d=a[b],e=d.callback;if(null!==e){d.callback=null;d=c;if(\"function\"!==typeof e)throw Error(p(191,e));e.call(d)}}}var th={},uh=Uf(th),vh=Uf(th),wh=Uf(th);function xh(a){if(a===th)throw Error(p(174));return a}\nfunction yh(a,b){G(wh,b);G(vh,a);G(uh,th);a=b.nodeType;switch(a){case 9:case 11:b=(b=b.documentElement)?b.namespaceURI:lb(null,\"\");break;default:a=8===a?b.parentNode:b,b=a.namespaceURI||null,a=a.tagName,b=lb(b,a)}E(uh);G(uh,b)}function zh(){E(uh);E(vh);E(wh)}function Ah(a){xh(wh.current);var b=xh(uh.current);var c=lb(b,a.type);b!==c&&(G(vh,a),G(uh,c))}function Bh(a){vh.current===a&&(E(uh),E(vh))}var L=Uf(0);\nfunction Ch(a){for(var b=a;null!==b;){if(13===b.tag){var c=b.memoizedState;if(null!==c&&(c=c.dehydrated,null===c||\"$?\"===c.data||\"$!\"===c.data))return b}else if(19===b.tag&&void 0!==b.memoizedProps.revealOrder){if(0!==(b.flags&128))return b}else if(null!==b.child){b.child.return=b;b=b.child;continue}if(b===a)break;for(;null===b.sibling;){if(null===b.return||b.return===a)return null;b=b.return}b.sibling.return=b.return;b=b.sibling}return null}var Dh=[];\nfunction Eh(){for(var a=0;a<Dh.length;a++)Dh[a]._workInProgressVersionPrimary=null;Dh.length=0}var Fh=ua.ReactCurrentDispatcher,Gh=ua.ReactCurrentBatchConfig,Hh=0,M=null,N=null,O=null,Ih=!1,Jh=!1,Kh=0,Lh=0;function P(){throw Error(p(321));}function Mh(a,b){if(null===b)return!1;for(var c=0;c<b.length&&c<a.length;c++)if(!He(a[c],b[c]))return!1;return!0}\nfunction Nh(a,b,c,d,e,f){Hh=f;M=b;b.memoizedState=null;b.updateQueue=null;b.lanes=0;Fh.current=null===a||null===a.memoizedState?Oh:Ph;a=c(d,e);if(Jh){f=0;do{Jh=!1;Kh=0;if(25<=f)throw Error(p(301));f+=1;O=N=null;b.updateQueue=null;Fh.current=Qh;a=c(d,e)}while(Jh)}Fh.current=Rh;b=null!==N&&null!==N.next;Hh=0;O=N=M=null;Ih=!1;if(b)throw Error(p(300));return a}function Sh(){var a=0!==Kh;Kh=0;return a}\nfunction Th(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};null===O?M.memoizedState=O=a:O=O.next=a;return O}function Uh(){if(null===N){var a=M.alternate;a=null!==a?a.memoizedState:null}else a=N.next;var b=null===O?M.memoizedState:O.next;if(null!==b)O=b,N=a;else{if(null===a)throw Error(p(310));N=a;a={memoizedState:N.memoizedState,baseState:N.baseState,baseQueue:N.baseQueue,queue:N.queue,next:null};null===O?M.memoizedState=O=a:O=O.next=a}return O}\nfunction Vh(a,b){return\"function\"===typeof b?b(a):b}\nfunction Wh(a){var b=Uh(),c=b.queue;if(null===c)throw Error(p(311));c.lastRenderedReducer=a;var d=N,e=d.baseQueue,f=c.pending;if(null!==f){if(null!==e){var g=e.next;e.next=f.next;f.next=g}d.baseQueue=e=f;c.pending=null}if(null!==e){f=e.next;d=d.baseState;var h=g=null,k=null,l=f;do{var m=l.lane;if((Hh&m)===m)null!==k&&(k=k.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),d=l.hasEagerState?l.eagerState:a(d,l.action);else{var q={lane:m,action:l.action,hasEagerState:l.hasEagerState,\neagerState:l.eagerState,next:null};null===k?(h=k=q,g=d):k=k.next=q;M.lanes|=m;rh|=m}l=l.next}while(null!==l&&l!==f);null===k?g=d:k.next=h;He(d,b.memoizedState)||(dh=!0);b.memoizedState=d;b.baseState=g;b.baseQueue=k;c.lastRenderedState=d}a=c.interleaved;if(null!==a){e=a;do f=e.lane,M.lanes|=f,rh|=f,e=e.next;while(e!==a)}else null===e&&(c.lanes=0);return[b.memoizedState,c.dispatch]}\nfunction Xh(a){var b=Uh(),c=b.queue;if(null===c)throw Error(p(311));c.lastRenderedReducer=a;var d=c.dispatch,e=c.pending,f=b.memoizedState;if(null!==e){c.pending=null;var g=e=e.next;do f=a(f,g.action),g=g.next;while(g!==e);He(f,b.memoizedState)||(dh=!0);b.memoizedState=f;null===b.baseQueue&&(b.baseState=f);c.lastRenderedState=f}return[f,d]}function Yh(){}\nfunction Zh(a,b){var c=M,d=Uh(),e=b(),f=!He(d.memoizedState,e);f&&(d.memoizedState=e,dh=!0);d=d.queue;$h(ai.bind(null,c,d,a),[a]);if(d.getSnapshot!==b||f||null!==O&&O.memoizedState.tag&1){c.flags|=2048;bi(9,ci.bind(null,c,d,e,b),void 0,null);if(null===Q)throw Error(p(349));0!==(Hh&30)||di(c,b,e)}return e}function di(a,b,c){a.flags|=16384;a={getSnapshot:b,value:c};b=M.updateQueue;null===b?(b={lastEffect:null,stores:null},M.updateQueue=b,b.stores=[a]):(c=b.stores,null===c?b.stores=[a]:c.push(a))}\nfunction ci(a,b,c,d){b.value=c;b.getSnapshot=d;ei(b)&&fi(a)}function ai(a,b,c){return c(function(){ei(b)&&fi(a)})}function ei(a){var b=a.getSnapshot;a=a.value;try{var c=b();return!He(a,c)}catch(d){return!0}}function fi(a){var b=ih(a,1);null!==b&&gi(b,a,1,-1)}\nfunction hi(a){var b=Th();\"function\"===typeof a&&(a=a());b.memoizedState=b.baseState=a;a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vh,lastRenderedState:a};b.queue=a;a=a.dispatch=ii.bind(null,M,a);return[b.memoizedState,a]}\nfunction bi(a,b,c,d){a={tag:a,create:b,destroy:c,deps:d,next:null};b=M.updateQueue;null===b?(b={lastEffect:null,stores:null},M.updateQueue=b,b.lastEffect=a.next=a):(c=b.lastEffect,null===c?b.lastEffect=a.next=a:(d=c.next,c.next=a,a.next=d,b.lastEffect=a));return a}function ji(){return Uh().memoizedState}function ki(a,b,c,d){var e=Th();M.flags|=a;e.memoizedState=bi(1|b,c,void 0,void 0===d?null:d)}\nfunction li(a,b,c,d){var e=Uh();d=void 0===d?null:d;var f=void 0;if(null!==N){var g=N.memoizedState;f=g.destroy;if(null!==d&&Mh(d,g.deps)){e.memoizedState=bi(b,c,f,d);return}}M.flags|=a;e.memoizedState=bi(1|b,c,f,d)}function mi(a,b){return ki(8390656,8,a,b)}function $h(a,b){return li(2048,8,a,b)}function ni(a,b){return li(4,2,a,b)}function oi(a,b){return li(4,4,a,b)}\nfunction pi(a,b){if(\"function\"===typeof b)return a=a(),b(a),function(){b(null)};if(null!==b&&void 0!==b)return a=a(),b.current=a,function(){b.current=null}}function qi(a,b,c){c=null!==c&&void 0!==c?c.concat([a]):null;return li(4,4,pi.bind(null,b,a),c)}function ri(){}function si(a,b){var c=Uh();b=void 0===b?null:b;var d=c.memoizedState;if(null!==d&&null!==b&&Mh(b,d[1]))return d[0];c.memoizedState=[a,b];return a}\nfunction ti(a,b){var c=Uh();b=void 0===b?null:b;var d=c.memoizedState;if(null!==d&&null!==b&&Mh(b,d[1]))return d[0];a=a();c.memoizedState=[a,b];return a}function ui(a,b,c){if(0===(Hh&21))return a.baseState&&(a.baseState=!1,dh=!0),a.memoizedState=c;He(c,b)||(c=yc(),M.lanes|=c,rh|=c,a.baseState=!0);return b}function vi(a,b){var c=C;C=0!==c&&4>c?c:4;a(!0);var d=Gh.transition;Gh.transition={};try{a(!1),b()}finally{C=c,Gh.transition=d}}function wi(){return Uh().memoizedState}\nfunction xi(a,b,c){var d=yi(a);c={lane:d,action:c,hasEagerState:!1,eagerState:null,next:null};if(zi(a))Ai(b,c);else if(c=hh(a,b,c,d),null!==c){var e=R();gi(c,a,d,e);Bi(c,b,d)}}\nfunction ii(a,b,c){var d=yi(a),e={lane:d,action:c,hasEagerState:!1,eagerState:null,next:null};if(zi(a))Ai(b,e);else{var f=a.alternate;if(0===a.lanes&&(null===f||0===f.lanes)&&(f=b.lastRenderedReducer,null!==f))try{var g=b.lastRenderedState,h=f(g,c);e.hasEagerState=!0;e.eagerState=h;if(He(h,g)){var k=b.interleaved;null===k?(e.next=e,gh(b)):(e.next=k.next,k.next=e);b.interleaved=e;return}}catch(l){}finally{}c=hh(a,b,e,d);null!==c&&(e=R(),gi(c,a,d,e),Bi(c,b,d))}}\nfunction zi(a){var b=a.alternate;return a===M||null!==b&&b===M}function Ai(a,b){Jh=Ih=!0;var c=a.pending;null===c?b.next=b:(b.next=c.next,c.next=b);a.pending=b}function Bi(a,b,c){if(0!==(c&4194240)){var d=b.lanes;d&=a.pendingLanes;c|=d;b.lanes=c;Cc(a,c)}}\nvar Rh={readContext:eh,useCallback:P,useContext:P,useEffect:P,useImperativeHandle:P,useInsertionEffect:P,useLayoutEffect:P,useMemo:P,useReducer:P,useRef:P,useState:P,useDebugValue:P,useDeferredValue:P,useTransition:P,useMutableSource:P,useSyncExternalStore:P,useId:P,unstable_isNewReconciler:!1},Oh={readContext:eh,useCallback:function(a,b){Th().memoizedState=[a,void 0===b?null:b];return a},useContext:eh,useEffect:mi,useImperativeHandle:function(a,b,c){c=null!==c&&void 0!==c?c.concat([a]):null;return ki(4194308,\n4,pi.bind(null,b,a),c)},useLayoutEffect:function(a,b){return ki(4194308,4,a,b)},useInsertionEffect:function(a,b){return ki(4,2,a,b)},useMemo:function(a,b){var c=Th();b=void 0===b?null:b;a=a();c.memoizedState=[a,b];return a},useReducer:function(a,b,c){var d=Th();b=void 0!==c?c(b):b;d.memoizedState=d.baseState=b;a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:b};d.queue=a;a=a.dispatch=xi.bind(null,M,a);return[d.memoizedState,a]},useRef:function(a){var b=\nTh();a={current:a};return b.memoizedState=a},useState:hi,useDebugValue:ri,useDeferredValue:function(a){return Th().memoizedState=a},useTransition:function(){var a=hi(!1),b=a[0];a=vi.bind(null,a[1]);Th().memoizedState=a;return[b,a]},useMutableSource:function(){},useSyncExternalStore:function(a,b,c){var d=M,e=Th();if(I){if(void 0===c)throw Error(p(407));c=c()}else{c=b();if(null===Q)throw Error(p(349));0!==(Hh&30)||di(d,b,c)}e.memoizedState=c;var f={value:c,getSnapshot:b};e.queue=f;mi(ai.bind(null,d,\nf,a),[a]);d.flags|=2048;bi(9,ci.bind(null,d,f,c,b),void 0,null);return c},useId:function(){var a=Th(),b=Q.identifierPrefix;if(I){var c=sg;var d=rg;c=(d&~(1<<32-oc(d)-1)).toString(32)+c;b=\":\"+b+\"R\"+c;c=Kh++;0<c&&(b+=\"H\"+c.toString(32));b+=\":\"}else c=Lh++,b=\":\"+b+\"r\"+c.toString(32)+\":\";return a.memoizedState=b},unstable_isNewReconciler:!1},Ph={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Wh,useRef:ji,useState:function(){return Wh(Vh)},\nuseDebugValue:ri,useDeferredValue:function(a){var b=Uh();return ui(b,N.memoizedState,a)},useTransition:function(){var a=Wh(Vh)[0],b=Uh().memoizedState;return[a,b]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1},Qh={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Xh,useRef:ji,useState:function(){return Xh(Vh)},useDebugValue:ri,useDeferredValue:function(a){var b=Uh();return null===\nN?b.memoizedState=a:ui(b,N.memoizedState,a)},useTransition:function(){var a=Xh(Vh)[0],b=Uh().memoizedState;return[a,b]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1};function Ci(a,b){if(a&&a.defaultProps){b=A({},b);a=a.defaultProps;for(var c in a)void 0===b[c]&&(b[c]=a[c]);return b}return b}function Di(a,b,c,d){b=a.memoizedState;c=c(d,b);c=null===c||void 0===c?b:A({},b,c);a.memoizedState=c;0===a.lanes&&(a.updateQueue.baseState=c)}\nvar Ei={isMounted:function(a){return(a=a._reactInternals)?Vb(a)===a:!1},enqueueSetState:function(a,b,c){a=a._reactInternals;var d=R(),e=yi(a),f=mh(d,e);f.payload=b;void 0!==c&&null!==c&&(f.callback=c);b=nh(a,f,e);null!==b&&(gi(b,a,e,d),oh(b,a,e))},enqueueReplaceState:function(a,b,c){a=a._reactInternals;var d=R(),e=yi(a),f=mh(d,e);f.tag=1;f.payload=b;void 0!==c&&null!==c&&(f.callback=c);b=nh(a,f,e);null!==b&&(gi(b,a,e,d),oh(b,a,e))},enqueueForceUpdate:function(a,b){a=a._reactInternals;var c=R(),d=\nyi(a),e=mh(c,d);e.tag=2;void 0!==b&&null!==b&&(e.callback=b);b=nh(a,e,d);null!==b&&(gi(b,a,d,c),oh(b,a,d))}};function Fi(a,b,c,d,e,f,g){a=a.stateNode;return\"function\"===typeof a.shouldComponentUpdate?a.shouldComponentUpdate(d,f,g):b.prototype&&b.prototype.isPureReactComponent?!Ie(c,d)||!Ie(e,f):!0}\nfunction Gi(a,b,c){var d=!1,e=Vf;var f=b.contextType;\"object\"===typeof f&&null!==f?f=eh(f):(e=Zf(b)?Xf:H.current,d=b.contextTypes,f=(d=null!==d&&void 0!==d)?Yf(a,e):Vf);b=new b(c,f);a.memoizedState=null!==b.state&&void 0!==b.state?b.state:null;b.updater=Ei;a.stateNode=b;b._reactInternals=a;d&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=e,a.__reactInternalMemoizedMaskedChildContext=f);return b}\nfunction Hi(a,b,c,d){a=b.state;\"function\"===typeof b.componentWillReceiveProps&&b.componentWillReceiveProps(c,d);\"function\"===typeof b.UNSAFE_componentWillReceiveProps&&b.UNSAFE_componentWillReceiveProps(c,d);b.state!==a&&Ei.enqueueReplaceState(b,b.state,null)}\nfunction Ii(a,b,c,d){var e=a.stateNode;e.props=c;e.state=a.memoizedState;e.refs={};kh(a);var f=b.contextType;\"object\"===typeof f&&null!==f?e.context=eh(f):(f=Zf(b)?Xf:H.current,e.context=Yf(a,f));e.state=a.memoizedState;f=b.getDerivedStateFromProps;\"function\"===typeof f&&(Di(a,b,f,c),e.state=a.memoizedState);\"function\"===typeof b.getDerivedStateFromProps||\"function\"===typeof e.getSnapshotBeforeUpdate||\"function\"!==typeof e.UNSAFE_componentWillMount&&\"function\"!==typeof e.componentWillMount||(b=e.state,\n\"function\"===typeof e.componentWillMount&&e.componentWillMount(),\"function\"===typeof e.UNSAFE_componentWillMount&&e.UNSAFE_componentWillMount(),b!==e.state&&Ei.enqueueReplaceState(e,e.state,null),qh(a,c,e,d),e.state=a.memoizedState);\"function\"===typeof e.componentDidMount&&(a.flags|=4194308)}function Ji(a,b){try{var c=\"\",d=b;do c+=Pa(d),d=d.return;while(d);var e=c}catch(f){e=\"\\nError generating stack: \"+f.message+\"\\n\"+f.stack}return{value:a,source:b,stack:e,digest:null}}\nfunction Ki(a,b,c){return{value:a,source:null,stack:null!=c?c:null,digest:null!=b?b:null}}function Li(a,b){try{console.error(b.value)}catch(c){setTimeout(function(){throw c;})}}var Mi=\"function\"===typeof WeakMap?WeakMap:Map;function Ni(a,b,c){c=mh(-1,c);c.tag=3;c.payload={element:null};var d=b.value;c.callback=function(){Oi||(Oi=!0,Pi=d);Li(a,b)};return c}\nfunction Qi(a,b,c){c=mh(-1,c);c.tag=3;var d=a.type.getDerivedStateFromError;if(\"function\"===typeof d){var e=b.value;c.payload=function(){return d(e)};c.callback=function(){Li(a,b)}}var f=a.stateNode;null!==f&&\"function\"===typeof f.componentDidCatch&&(c.callback=function(){Li(a,b);\"function\"!==typeof d&&(null===Ri?Ri=new Set([this]):Ri.add(this));var c=b.stack;this.componentDidCatch(b.value,{componentStack:null!==c?c:\"\"})});return c}\nfunction Si(a,b,c){var d=a.pingCache;if(null===d){d=a.pingCache=new Mi;var e=new Set;d.set(b,e)}else e=d.get(b),void 0===e&&(e=new Set,d.set(b,e));e.has(c)||(e.add(c),a=Ti.bind(null,a,b,c),b.then(a,a))}function Ui(a){do{var b;if(b=13===a.tag)b=a.memoizedState,b=null!==b?null!==b.dehydrated?!0:!1:!0;if(b)return a;a=a.return}while(null!==a);return null}\nfunction Vi(a,b,c,d,e){if(0===(a.mode&1))return a===b?a.flags|=65536:(a.flags|=128,c.flags|=131072,c.flags&=-52805,1===c.tag&&(null===c.alternate?c.tag=17:(b=mh(-1,1),b.tag=2,nh(c,b,1))),c.lanes|=1),a;a.flags|=65536;a.lanes=e;return a}var Wi=ua.ReactCurrentOwner,dh=!1;function Xi(a,b,c,d){b.child=null===a?Vg(b,null,c,d):Ug(b,a.child,c,d)}\nfunction Yi(a,b,c,d,e){c=c.render;var f=b.ref;ch(b,e);d=Nh(a,b,c,d,f,e);c=Sh();if(null!==a&&!dh)return b.updateQueue=a.updateQueue,b.flags&=-2053,a.lanes&=~e,Zi(a,b,e);I&&c&&vg(b);b.flags|=1;Xi(a,b,d,e);return b.child}\nfunction $i(a,b,c,d,e){if(null===a){var f=c.type;if(\"function\"===typeof f&&!aj(f)&&void 0===f.defaultProps&&null===c.compare&&void 0===c.defaultProps)return b.tag=15,b.type=f,bj(a,b,f,d,e);a=Rg(c.type,null,d,b,b.mode,e);a.ref=b.ref;a.return=b;return b.child=a}f=a.child;if(0===(a.lanes&e)){var g=f.memoizedProps;c=c.compare;c=null!==c?c:Ie;if(c(g,d)&&a.ref===b.ref)return Zi(a,b,e)}b.flags|=1;a=Pg(f,d);a.ref=b.ref;a.return=b;return b.child=a}\nfunction bj(a,b,c,d,e){if(null!==a){var f=a.memoizedProps;if(Ie(f,d)&&a.ref===b.ref)if(dh=!1,b.pendingProps=d=f,0!==(a.lanes&e))0!==(a.flags&131072)&&(dh=!0);else return b.lanes=a.lanes,Zi(a,b,e)}return cj(a,b,c,d,e)}\nfunction dj(a,b,c){var d=b.pendingProps,e=d.children,f=null!==a?a.memoizedState:null;if(\"hidden\"===d.mode)if(0===(b.mode&1))b.memoizedState={baseLanes:0,cachePool:null,transitions:null},G(ej,fj),fj|=c;else{if(0===(c&1073741824))return a=null!==f?f.baseLanes|c:c,b.lanes=b.childLanes=1073741824,b.memoizedState={baseLanes:a,cachePool:null,transitions:null},b.updateQueue=null,G(ej,fj),fj|=a,null;b.memoizedState={baseLanes:0,cachePool:null,transitions:null};d=null!==f?f.baseLanes:c;G(ej,fj);fj|=d}else null!==\nf?(d=f.baseLanes|c,b.memoizedState=null):d=c,G(ej,fj),fj|=d;Xi(a,b,e,c);return b.child}function gj(a,b){var c=b.ref;if(null===a&&null!==c||null!==a&&a.ref!==c)b.flags|=512,b.flags|=2097152}function cj(a,b,c,d,e){var f=Zf(c)?Xf:H.current;f=Yf(b,f);ch(b,e);c=Nh(a,b,c,d,f,e);d=Sh();if(null!==a&&!dh)return b.updateQueue=a.updateQueue,b.flags&=-2053,a.lanes&=~e,Zi(a,b,e);I&&d&&vg(b);b.flags|=1;Xi(a,b,c,e);return b.child}\nfunction hj(a,b,c,d,e){if(Zf(c)){var f=!0;cg(b)}else f=!1;ch(b,e);if(null===b.stateNode)ij(a,b),Gi(b,c,d),Ii(b,c,d,e),d=!0;else if(null===a){var g=b.stateNode,h=b.memoizedProps;g.props=h;var k=g.context,l=c.contextType;\"object\"===typeof l&&null!==l?l=eh(l):(l=Zf(c)?Xf:H.current,l=Yf(b,l));var m=c.getDerivedStateFromProps,q=\"function\"===typeof m||\"function\"===typeof g.getSnapshotBeforeUpdate;q||\"function\"!==typeof g.UNSAFE_componentWillReceiveProps&&\"function\"!==typeof g.componentWillReceiveProps||\n(h!==d||k!==l)&&Hi(b,g,d,l);jh=!1;var r=b.memoizedState;g.state=r;qh(b,d,g,e);k=b.memoizedState;h!==d||r!==k||Wf.current||jh?(\"function\"===typeof m&&(Di(b,c,m,d),k=b.memoizedState),(h=jh||Fi(b,c,h,d,r,k,l))?(q||\"function\"!==typeof g.UNSAFE_componentWillMount&&\"function\"!==typeof g.componentWillMount||(\"function\"===typeof g.componentWillMount&&g.componentWillMount(),\"function\"===typeof g.UNSAFE_componentWillMount&&g.UNSAFE_componentWillMount()),\"function\"===typeof g.componentDidMount&&(b.flags|=4194308)):\n(\"function\"===typeof g.componentDidMount&&(b.flags|=4194308),b.memoizedProps=d,b.memoizedState=k),g.props=d,g.state=k,g.context=l,d=h):(\"function\"===typeof g.componentDidMount&&(b.flags|=4194308),d=!1)}else{g=b.stateNode;lh(a,b);h=b.memoizedProps;l=b.type===b.elementType?h:Ci(b.type,h);g.props=l;q=b.pendingProps;r=g.context;k=c.contextType;\"object\"===typeof k&&null!==k?k=eh(k):(k=Zf(c)?Xf:H.current,k=Yf(b,k));var y=c.getDerivedStateFromProps;(m=\"function\"===typeof y||\"function\"===typeof g.getSnapshotBeforeUpdate)||\n\"function\"!==typeof g.UNSAFE_componentWillReceiveProps&&\"function\"!==typeof g.componentWillReceiveProps||(h!==q||r!==k)&&Hi(b,g,d,k);jh=!1;r=b.memoizedState;g.state=r;qh(b,d,g,e);var n=b.memoizedState;h!==q||r!==n||Wf.current||jh?(\"function\"===typeof y&&(Di(b,c,y,d),n=b.memoizedState),(l=jh||Fi(b,c,l,d,r,n,k)||!1)?(m||\"function\"!==typeof g.UNSAFE_componentWillUpdate&&\"function\"!==typeof g.componentWillUpdate||(\"function\"===typeof g.componentWillUpdate&&g.componentWillUpdate(d,n,k),\"function\"===typeof g.UNSAFE_componentWillUpdate&&\ng.UNSAFE_componentWillUpdate(d,n,k)),\"function\"===typeof g.componentDidUpdate&&(b.flags|=4),\"function\"===typeof g.getSnapshotBeforeUpdate&&(b.flags|=1024)):(\"function\"!==typeof g.componentDidUpdate||h===a.memoizedProps&&r===a.memoizedState||(b.flags|=4),\"function\"!==typeof g.getSnapshotBeforeUpdate||h===a.memoizedProps&&r===a.memoizedState||(b.flags|=1024),b.memoizedProps=d,b.memoizedState=n),g.props=d,g.state=n,g.context=k,d=l):(\"function\"!==typeof g.componentDidUpdate||h===a.memoizedProps&&r===\na.memoizedState||(b.flags|=4),\"function\"!==typeof g.getSnapshotBeforeUpdate||h===a.memoizedProps&&r===a.memoizedState||(b.flags|=1024),d=!1)}return jj(a,b,c,d,f,e)}\nfunction jj(a,b,c,d,e,f){gj(a,b);var g=0!==(b.flags&128);if(!d&&!g)return e&&dg(b,c,!1),Zi(a,b,f);d=b.stateNode;Wi.current=b;var h=g&&\"function\"!==typeof c.getDerivedStateFromError?null:d.render();b.flags|=1;null!==a&&g?(b.child=Ug(b,a.child,null,f),b.child=Ug(b,null,h,f)):Xi(a,b,h,f);b.memoizedState=d.state;e&&dg(b,c,!0);return b.child}function kj(a){var b=a.stateNode;b.pendingContext?ag(a,b.pendingContext,b.pendingContext!==b.context):b.context&&ag(a,b.context,!1);yh(a,b.containerInfo)}\nfunction lj(a,b,c,d,e){Ig();Jg(e);b.flags|=256;Xi(a,b,c,d);return b.child}var mj={dehydrated:null,treeContext:null,retryLane:0};function nj(a){return{baseLanes:a,cachePool:null,transitions:null}}\nfunction oj(a,b,c){var d=b.pendingProps,e=L.current,f=!1,g=0!==(b.flags&128),h;(h=g)||(h=null!==a&&null===a.memoizedState?!1:0!==(e&2));if(h)f=!0,b.flags&=-129;else if(null===a||null!==a.memoizedState)e|=1;G(L,e&1);if(null===a){Eg(b);a=b.memoizedState;if(null!==a&&(a=a.dehydrated,null!==a))return 0===(b.mode&1)?b.lanes=1:\"$!\"===a.data?b.lanes=8:b.lanes=1073741824,null;g=d.children;a=d.fallback;return f?(d=b.mode,f=b.child,g={mode:\"hidden\",children:g},0===(d&1)&&null!==f?(f.childLanes=0,f.pendingProps=\ng):f=pj(g,d,0,null),a=Tg(a,d,c,null),f.return=b,a.return=b,f.sibling=a,b.child=f,b.child.memoizedState=nj(c),b.memoizedState=mj,a):qj(b,g)}e=a.memoizedState;if(null!==e&&(h=e.dehydrated,null!==h))return rj(a,b,g,d,h,e,c);if(f){f=d.fallback;g=b.mode;e=a.child;h=e.sibling;var k={mode:\"hidden\",children:d.children};0===(g&1)&&b.child!==e?(d=b.child,d.childLanes=0,d.pendingProps=k,b.deletions=null):(d=Pg(e,k),d.subtreeFlags=e.subtreeFlags&14680064);null!==h?f=Pg(h,f):(f=Tg(f,g,c,null),f.flags|=2);f.return=\nb;d.return=b;d.sibling=f;b.child=d;d=f;f=b.child;g=a.child.memoizedState;g=null===g?nj(c):{baseLanes:g.baseLanes|c,cachePool:null,transitions:g.transitions};f.memoizedState=g;f.childLanes=a.childLanes&~c;b.memoizedState=mj;return d}f=a.child;a=f.sibling;d=Pg(f,{mode:\"visible\",children:d.children});0===(b.mode&1)&&(d.lanes=c);d.return=b;d.sibling=null;null!==a&&(c=b.deletions,null===c?(b.deletions=[a],b.flags|=16):c.push(a));b.child=d;b.memoizedState=null;return d}\nfunction qj(a,b){b=pj({mode:\"visible\",children:b},a.mode,0,null);b.return=a;return a.child=b}function sj(a,b,c,d){null!==d&&Jg(d);Ug(b,a.child,null,c);a=qj(b,b.pendingProps.children);a.flags|=2;b.memoizedState=null;return a}\nfunction rj(a,b,c,d,e,f,g){if(c){if(b.flags&256)return b.flags&=-257,d=Ki(Error(p(422))),sj(a,b,g,d);if(null!==b.memoizedState)return b.child=a.child,b.flags|=128,null;f=d.fallback;e=b.mode;d=pj({mode:\"visible\",children:d.children},e,0,null);f=Tg(f,e,g,null);f.flags|=2;d.return=b;f.return=b;d.sibling=f;b.child=d;0!==(b.mode&1)&&Ug(b,a.child,null,g);b.child.memoizedState=nj(g);b.memoizedState=mj;return f}if(0===(b.mode&1))return sj(a,b,g,null);if(\"$!\"===e.data){d=e.nextSibling&&e.nextSibling.dataset;\nif(d)var h=d.dgst;d=h;f=Error(p(419));d=Ki(f,d,void 0);return sj(a,b,g,d)}h=0!==(g&a.childLanes);if(dh||h){d=Q;if(null!==d){switch(g&-g){case 4:e=2;break;case 16:e=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:e=32;break;case 536870912:e=268435456;break;default:e=0}e=0!==(e&(d.suspendedLanes|g))?0:e;\n0!==e&&e!==f.retryLane&&(f.retryLane=e,ih(a,e),gi(d,a,e,-1))}tj();d=Ki(Error(p(421)));return sj(a,b,g,d)}if(\"$?\"===e.data)return b.flags|=128,b.child=a.child,b=uj.bind(null,a),e._reactRetry=b,null;a=f.treeContext;yg=Lf(e.nextSibling);xg=b;I=!0;zg=null;null!==a&&(og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,rg=a.id,sg=a.overflow,qg=b);b=qj(b,d.children);b.flags|=4096;return b}function vj(a,b,c){a.lanes|=b;var d=a.alternate;null!==d&&(d.lanes|=b);bh(a.return,b,c)}\nfunction wj(a,b,c,d,e){var f=a.memoizedState;null===f?a.memoizedState={isBackwards:b,rendering:null,renderingStartTime:0,last:d,tail:c,tailMode:e}:(f.isBackwards=b,f.rendering=null,f.renderingStartTime=0,f.last=d,f.tail=c,f.tailMode=e)}\nfunction xj(a,b,c){var d=b.pendingProps,e=d.revealOrder,f=d.tail;Xi(a,b,d.children,c);d=L.current;if(0!==(d&2))d=d&1|2,b.flags|=128;else{if(null!==a&&0!==(a.flags&128))a:for(a=b.child;null!==a;){if(13===a.tag)null!==a.memoizedState&&vj(a,c,b);else if(19===a.tag)vj(a,c,b);else if(null!==a.child){a.child.return=a;a=a.child;continue}if(a===b)break a;for(;null===a.sibling;){if(null===a.return||a.return===b)break a;a=a.return}a.sibling.return=a.return;a=a.sibling}d&=1}G(L,d);if(0===(b.mode&1))b.memoizedState=\nnull;else switch(e){case \"forwards\":c=b.child;for(e=null;null!==c;)a=c.alternate,null!==a&&null===Ch(a)&&(e=c),c=c.sibling;c=e;null===c?(e=b.child,b.child=null):(e=c.sibling,c.sibling=null);wj(b,!1,e,c,f);break;case \"backwards\":c=null;e=b.child;for(b.child=null;null!==e;){a=e.alternate;if(null!==a&&null===Ch(a)){b.child=e;break}a=e.sibling;e.sibling=c;c=e;e=a}wj(b,!0,c,null,f);break;case \"together\":wj(b,!1,null,null,void 0);break;default:b.memoizedState=null}return b.child}\nfunction ij(a,b){0===(b.mode&1)&&null!==a&&(a.alternate=null,b.alternate=null,b.flags|=2)}function Zi(a,b,c){null!==a&&(b.dependencies=a.dependencies);rh|=b.lanes;if(0===(c&b.childLanes))return null;if(null!==a&&b.child!==a.child)throw Error(p(153));if(null!==b.child){a=b.child;c=Pg(a,a.pendingProps);b.child=c;for(c.return=b;null!==a.sibling;)a=a.sibling,c=c.sibling=Pg(a,a.pendingProps),c.return=b;c.sibling=null}return b.child}\nfunction yj(a,b,c){switch(b.tag){case 3:kj(b);Ig();break;case 5:Ah(b);break;case 1:Zf(b.type)&&cg(b);break;case 4:yh(b,b.stateNode.containerInfo);break;case 10:var d=b.type._context,e=b.memoizedProps.value;G(Wg,d._currentValue);d._currentValue=e;break;case 13:d=b.memoizedState;if(null!==d){if(null!==d.dehydrated)return G(L,L.current&1),b.flags|=128,null;if(0!==(c&b.child.childLanes))return oj(a,b,c);G(L,L.current&1);a=Zi(a,b,c);return null!==a?a.sibling:null}G(L,L.current&1);break;case 19:d=0!==(c&\nb.childLanes);if(0!==(a.flags&128)){if(d)return xj(a,b,c);b.flags|=128}e=b.memoizedState;null!==e&&(e.rendering=null,e.tail=null,e.lastEffect=null);G(L,L.current);if(d)break;else return null;case 22:case 23:return b.lanes=0,dj(a,b,c)}return Zi(a,b,c)}var zj,Aj,Bj,Cj;\nzj=function(a,b){for(var c=b.child;null!==c;){if(5===c.tag||6===c.tag)a.appendChild(c.stateNode);else if(4!==c.tag&&null!==c.child){c.child.return=c;c=c.child;continue}if(c===b)break;for(;null===c.sibling;){if(null===c.return||c.return===b)return;c=c.return}c.sibling.return=c.return;c=c.sibling}};Aj=function(){};\nBj=function(a,b,c,d){var e=a.memoizedProps;if(e!==d){a=b.stateNode;xh(uh.current);var f=null;switch(c){case \"input\":e=Ya(a,e);d=Ya(a,d);f=[];break;case \"select\":e=A({},e,{value:void 0});d=A({},d,{value:void 0});f=[];break;case \"textarea\":e=gb(a,e);d=gb(a,d);f=[];break;default:\"function\"!==typeof e.onClick&&\"function\"===typeof d.onClick&&(a.onclick=Bf)}ub(c,d);var g;c=null;for(l in e)if(!d.hasOwnProperty(l)&&e.hasOwnProperty(l)&&null!=e[l])if(\"style\"===l){var h=e[l];for(g in h)h.hasOwnProperty(g)&&\n(c||(c={}),c[g]=\"\")}else\"dangerouslySetInnerHTML\"!==l&&\"children\"!==l&&\"suppressContentEditableWarning\"!==l&&\"suppressHydrationWarning\"!==l&&\"autoFocus\"!==l&&(ea.hasOwnProperty(l)?f||(f=[]):(f=f||[]).push(l,null));for(l in d){var k=d[l];h=null!=e?e[l]:void 0;if(d.hasOwnProperty(l)&&k!==h&&(null!=k||null!=h))if(\"style\"===l)if(h){for(g in h)!h.hasOwnProperty(g)||k&&k.hasOwnProperty(g)||(c||(c={}),c[g]=\"\");for(g in k)k.hasOwnProperty(g)&&h[g]!==k[g]&&(c||(c={}),c[g]=k[g])}else c||(f||(f=[]),f.push(l,\nc)),c=k;else\"dangerouslySetInnerHTML\"===l?(k=k?k.__html:void 0,h=h?h.__html:void 0,null!=k&&h!==k&&(f=f||[]).push(l,k)):\"children\"===l?\"string\"!==typeof k&&\"number\"!==typeof k||(f=f||[]).push(l,\"\"+k):\"suppressContentEditableWarning\"!==l&&\"suppressHydrationWarning\"!==l&&(ea.hasOwnProperty(l)?(null!=k&&\"onScroll\"===l&&D(\"scroll\",a),f||h===k||(f=[])):(f=f||[]).push(l,k))}c&&(f=f||[]).push(\"style\",c);var l=f;if(b.updateQueue=l)b.flags|=4}};Cj=function(a,b,c,d){c!==d&&(b.flags|=4)};\nfunction Dj(a,b){if(!I)switch(a.tailMode){case \"hidden\":b=a.tail;for(var c=null;null!==b;)null!==b.alternate&&(c=b),b=b.sibling;null===c?a.tail=null:c.sibling=null;break;case \"collapsed\":c=a.tail;for(var d=null;null!==c;)null!==c.alternate&&(d=c),c=c.sibling;null===d?b||null===a.tail?a.tail=null:a.tail.sibling=null:d.sibling=null}}\nfunction S(a){var b=null!==a.alternate&&a.alternate.child===a.child,c=0,d=0;if(b)for(var e=a.child;null!==e;)c|=e.lanes|e.childLanes,d|=e.subtreeFlags&14680064,d|=e.flags&14680064,e.return=a,e=e.sibling;else for(e=a.child;null!==e;)c|=e.lanes|e.childLanes,d|=e.subtreeFlags,d|=e.flags,e.return=a,e=e.sibling;a.subtreeFlags|=d;a.childLanes=c;return b}\nfunction Ej(a,b,c){var d=b.pendingProps;wg(b);switch(b.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S(b),null;case 1:return Zf(b.type)&&$f(),S(b),null;case 3:d=b.stateNode;zh();E(Wf);E(H);Eh();d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null);if(null===a||null===a.child)Gg(b)?b.flags|=4:null===a||a.memoizedState.isDehydrated&&0===(b.flags&256)||(b.flags|=1024,null!==zg&&(Fj(zg),zg=null));Aj(a,b);S(b);return null;case 5:Bh(b);var e=xh(wh.current);\nc=b.type;if(null!==a&&null!=b.stateNode)Bj(a,b,c,d,e),a.ref!==b.ref&&(b.flags|=512,b.flags|=2097152);else{if(!d){if(null===b.stateNode)throw Error(p(166));S(b);return null}a=xh(uh.current);if(Gg(b)){d=b.stateNode;c=b.type;var f=b.memoizedProps;d[Of]=b;d[Pf]=f;a=0!==(b.mode&1);switch(c){case \"dialog\":D(\"cancel\",d);D(\"close\",d);break;case \"iframe\":case \"object\":case \"embed\":D(\"load\",d);break;case \"video\":case \"audio\":for(e=0;e<lf.length;e++)D(lf[e],d);break;case \"source\":D(\"error\",d);break;case \"img\":case \"image\":case \"link\":D(\"error\",\nd);D(\"load\",d);break;case \"details\":D(\"toggle\",d);break;case \"input\":Za(d,f);D(\"invalid\",d);break;case \"select\":d._wrapperState={wasMultiple:!!f.multiple};D(\"invalid\",d);break;case \"textarea\":hb(d,f),D(\"invalid\",d)}ub(c,f);e=null;for(var g in f)if(f.hasOwnProperty(g)){var h=f[g];\"children\"===g?\"string\"===typeof h?d.textContent!==h&&(!0!==f.suppressHydrationWarning&&Af(d.textContent,h,a),e=[\"children\",h]):\"number\"===typeof h&&d.textContent!==\"\"+h&&(!0!==f.suppressHydrationWarning&&Af(d.textContent,\nh,a),e=[\"children\",\"\"+h]):ea.hasOwnProperty(g)&&null!=h&&\"onScroll\"===g&&D(\"scroll\",d)}switch(c){case \"input\":Va(d);db(d,f,!0);break;case \"textarea\":Va(d);jb(d);break;case \"select\":case \"option\":break;default:\"function\"===typeof f.onClick&&(d.onclick=Bf)}d=e;b.updateQueue=d;null!==d&&(b.flags|=4)}else{g=9===e.nodeType?e:e.ownerDocument;\"http://www.w3.org/1999/xhtml\"===a&&(a=kb(c));\"http://www.w3.org/1999/xhtml\"===a?\"script\"===c?(a=g.createElement(\"div\"),a.innerHTML=\"<script>\\x3c/script>\",a=a.removeChild(a.firstChild)):\n\"string\"===typeof d.is?a=g.createElement(c,{is:d.is}):(a=g.createElement(c),\"select\"===c&&(g=a,d.multiple?g.multiple=!0:d.size&&(g.size=d.size))):a=g.createElementNS(a,c);a[Of]=b;a[Pf]=d;zj(a,b,!1,!1);b.stateNode=a;a:{g=vb(c,d);switch(c){case \"dialog\":D(\"cancel\",a);D(\"close\",a);e=d;break;case \"iframe\":case \"object\":case \"embed\":D(\"load\",a);e=d;break;case \"video\":case \"audio\":for(e=0;e<lf.length;e++)D(lf[e],a);e=d;break;case \"source\":D(\"error\",a);e=d;break;case \"img\":case \"image\":case \"link\":D(\"error\",\na);D(\"load\",a);e=d;break;case \"details\":D(\"toggle\",a);e=d;break;case \"input\":Za(a,d);e=Ya(a,d);D(\"invalid\",a);break;case \"option\":e=d;break;case \"select\":a._wrapperState={wasMultiple:!!d.multiple};e=A({},d,{value:void 0});D(\"invalid\",a);break;case \"textarea\":hb(a,d);e=gb(a,d);D(\"invalid\",a);break;default:e=d}ub(c,e);h=e;for(f in h)if(h.hasOwnProperty(f)){var k=h[f];\"style\"===f?sb(a,k):\"dangerouslySetInnerHTML\"===f?(k=k?k.__html:void 0,null!=k&&nb(a,k)):\"children\"===f?\"string\"===typeof k?(\"textarea\"!==\nc||\"\"!==k)&&ob(a,k):\"number\"===typeof k&&ob(a,\"\"+k):\"suppressContentEditableWarning\"!==f&&\"suppressHydrationWarning\"!==f&&\"autoFocus\"!==f&&(ea.hasOwnProperty(f)?null!=k&&\"onScroll\"===f&&D(\"scroll\",a):null!=k&&ta(a,f,k,g))}switch(c){case \"input\":Va(a);db(a,d,!1);break;case \"textarea\":Va(a);jb(a);break;case \"option\":null!=d.value&&a.setAttribute(\"value\",\"\"+Sa(d.value));break;case \"select\":a.multiple=!!d.multiple;f=d.value;null!=f?fb(a,!!d.multiple,f,!1):null!=d.defaultValue&&fb(a,!!d.multiple,d.defaultValue,\n!0);break;default:\"function\"===typeof e.onClick&&(a.onclick=Bf)}switch(c){case \"button\":case \"input\":case \"select\":case \"textarea\":d=!!d.autoFocus;break a;case \"img\":d=!0;break a;default:d=!1}}d&&(b.flags|=4)}null!==b.ref&&(b.flags|=512,b.flags|=2097152)}S(b);return null;case 6:if(a&&null!=b.stateNode)Cj(a,b,a.memoizedProps,d);else{if(\"string\"!==typeof d&&null===b.stateNode)throw Error(p(166));c=xh(wh.current);xh(uh.current);if(Gg(b)){d=b.stateNode;c=b.memoizedProps;d[Of]=b;if(f=d.nodeValue!==c)if(a=\nxg,null!==a)switch(a.tag){case 3:Af(d.nodeValue,c,0!==(a.mode&1));break;case 5:!0!==a.memoizedProps.suppressHydrationWarning&&Af(d.nodeValue,c,0!==(a.mode&1))}f&&(b.flags|=4)}else d=(9===c.nodeType?c:c.ownerDocument).createTextNode(d),d[Of]=b,b.stateNode=d}S(b);return null;case 13:E(L);d=b.memoizedState;if(null===a||null!==a.memoizedState&&null!==a.memoizedState.dehydrated){if(I&&null!==yg&&0!==(b.mode&1)&&0===(b.flags&128))Hg(),Ig(),b.flags|=98560,f=!1;else if(f=Gg(b),null!==d&&null!==d.dehydrated){if(null===\na){if(!f)throw Error(p(318));f=b.memoizedState;f=null!==f?f.dehydrated:null;if(!f)throw Error(p(317));f[Of]=b}else Ig(),0===(b.flags&128)&&(b.memoizedState=null),b.flags|=4;S(b);f=!1}else null!==zg&&(Fj(zg),zg=null),f=!0;if(!f)return b.flags&65536?b:null}if(0!==(b.flags&128))return b.lanes=c,b;d=null!==d;d!==(null!==a&&null!==a.memoizedState)&&d&&(b.child.flags|=8192,0!==(b.mode&1)&&(null===a||0!==(L.current&1)?0===T&&(T=3):tj()));null!==b.updateQueue&&(b.flags|=4);S(b);return null;case 4:return zh(),\nAj(a,b),null===a&&sf(b.stateNode.containerInfo),S(b),null;case 10:return ah(b.type._context),S(b),null;case 17:return Zf(b.type)&&$f(),S(b),null;case 19:E(L);f=b.memoizedState;if(null===f)return S(b),null;d=0!==(b.flags&128);g=f.rendering;if(null===g)if(d)Dj(f,!1);else{if(0!==T||null!==a&&0!==(a.flags&128))for(a=b.child;null!==a;){g=Ch(a);if(null!==g){b.flags|=128;Dj(f,!1);d=g.updateQueue;null!==d&&(b.updateQueue=d,b.flags|=4);b.subtreeFlags=0;d=c;for(c=b.child;null!==c;)f=c,a=d,f.flags&=14680066,\ng=f.alternate,null===g?(f.childLanes=0,f.lanes=a,f.child=null,f.subtreeFlags=0,f.memoizedProps=null,f.memoizedState=null,f.updateQueue=null,f.dependencies=null,f.stateNode=null):(f.childLanes=g.childLanes,f.lanes=g.lanes,f.child=g.child,f.subtreeFlags=0,f.deletions=null,f.memoizedProps=g.memoizedProps,f.memoizedState=g.memoizedState,f.updateQueue=g.updateQueue,f.type=g.type,a=g.dependencies,f.dependencies=null===a?null:{lanes:a.lanes,firstContext:a.firstContext}),c=c.sibling;G(L,L.current&1|2);return b.child}a=\na.sibling}null!==f.tail&&B()>Gj&&(b.flags|=128,d=!0,Dj(f,!1),b.lanes=4194304)}else{if(!d)if(a=Ch(g),null!==a){if(b.flags|=128,d=!0,c=a.updateQueue,null!==c&&(b.updateQueue=c,b.flags|=4),Dj(f,!0),null===f.tail&&\"hidden\"===f.tailMode&&!g.alternate&&!I)return S(b),null}else 2*B()-f.renderingStartTime>Gj&&1073741824!==c&&(b.flags|=128,d=!0,Dj(f,!1),b.lanes=4194304);f.isBackwards?(g.sibling=b.child,b.child=g):(c=f.last,null!==c?c.sibling=g:b.child=g,f.last=g)}if(null!==f.tail)return b=f.tail,f.rendering=\nb,f.tail=b.sibling,f.renderingStartTime=B(),b.sibling=null,c=L.current,G(L,d?c&1|2:c&1),b;S(b);return null;case 22:case 23:return Hj(),d=null!==b.memoizedState,null!==a&&null!==a.memoizedState!==d&&(b.flags|=8192),d&&0!==(b.mode&1)?0!==(fj&1073741824)&&(S(b),b.subtreeFlags&6&&(b.flags|=8192)):S(b),null;case 24:return null;case 25:return null}throw Error(p(156,b.tag));}\nfunction Ij(a,b){wg(b);switch(b.tag){case 1:return Zf(b.type)&&$f(),a=b.flags,a&65536?(b.flags=a&-65537|128,b):null;case 3:return zh(),E(Wf),E(H),Eh(),a=b.flags,0!==(a&65536)&&0===(a&128)?(b.flags=a&-65537|128,b):null;case 5:return Bh(b),null;case 13:E(L);a=b.memoizedState;if(null!==a&&null!==a.dehydrated){if(null===b.alternate)throw Error(p(340));Ig()}a=b.flags;return a&65536?(b.flags=a&-65537|128,b):null;case 19:return E(L),null;case 4:return zh(),null;case 10:return ah(b.type._context),null;case 22:case 23:return Hj(),\nnull;case 24:return null;default:return null}}var Jj=!1,U=!1,Kj=\"function\"===typeof WeakSet?WeakSet:Set,V=null;function Lj(a,b){var c=a.ref;if(null!==c)if(\"function\"===typeof c)try{c(null)}catch(d){W(a,b,d)}else c.current=null}function Mj(a,b,c){try{c()}catch(d){W(a,b,d)}}var Nj=!1;\nfunction Oj(a,b){Cf=dd;a=Me();if(Ne(a)){if(\"selectionStart\"in a)var c={start:a.selectionStart,end:a.selectionEnd};else a:{c=(c=a.ownerDocument)&&c.defaultView||window;var d=c.getSelection&&c.getSelection();if(d&&0!==d.rangeCount){c=d.anchorNode;var e=d.anchorOffset,f=d.focusNode;d=d.focusOffset;try{c.nodeType,f.nodeType}catch(F){c=null;break a}var g=0,h=-1,k=-1,l=0,m=0,q=a,r=null;b:for(;;){for(var y;;){q!==c||0!==e&&3!==q.nodeType||(h=g+e);q!==f||0!==d&&3!==q.nodeType||(k=g+d);3===q.nodeType&&(g+=\nq.nodeValue.length);if(null===(y=q.firstChild))break;r=q;q=y}for(;;){if(q===a)break b;r===c&&++l===e&&(h=g);r===f&&++m===d&&(k=g);if(null!==(y=q.nextSibling))break;q=r;r=q.parentNode}q=y}c=-1===h||-1===k?null:{start:h,end:k}}else c=null}c=c||{start:0,end:0}}else c=null;Df={focusedElem:a,selectionRange:c};dd=!1;for(V=b;null!==V;)if(b=V,a=b.child,0!==(b.subtreeFlags&1028)&&null!==a)a.return=b,V=a;else for(;null!==V;){b=V;try{var n=b.alternate;if(0!==(b.flags&1024))switch(b.tag){case 0:case 11:case 15:break;\ncase 1:if(null!==n){var t=n.memoizedProps,J=n.memoizedState,x=b.stateNode,w=x.getSnapshotBeforeUpdate(b.elementType===b.type?t:Ci(b.type,t),J);x.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var u=b.stateNode.containerInfo;1===u.nodeType?u.textContent=\"\":9===u.nodeType&&u.documentElement&&u.removeChild(u.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p(163));}}catch(F){W(b,b.return,F)}a=b.sibling;if(null!==a){a.return=b.return;V=a;break}V=b.return}n=Nj;Nj=!1;return n}\nfunction Pj(a,b,c){var d=b.updateQueue;d=null!==d?d.lastEffect:null;if(null!==d){var e=d=d.next;do{if((e.tag&a)===a){var f=e.destroy;e.destroy=void 0;void 0!==f&&Mj(b,c,f)}e=e.next}while(e!==d)}}function Qj(a,b){b=b.updateQueue;b=null!==b?b.lastEffect:null;if(null!==b){var c=b=b.next;do{if((c.tag&a)===a){var d=c.create;c.destroy=d()}c=c.next}while(c!==b)}}function Rj(a){var b=a.ref;if(null!==b){var c=a.stateNode;switch(a.tag){case 5:a=c;break;default:a=c}\"function\"===typeof b?b(a):b.current=a}}\nfunction Sj(a){var b=a.alternate;null!==b&&(a.alternate=null,Sj(b));a.child=null;a.deletions=null;a.sibling=null;5===a.tag&&(b=a.stateNode,null!==b&&(delete b[Of],delete b[Pf],delete b[of],delete b[Qf],delete b[Rf]));a.stateNode=null;a.return=null;a.dependencies=null;a.memoizedProps=null;a.memoizedState=null;a.pendingProps=null;a.stateNode=null;a.updateQueue=null}function Tj(a){return 5===a.tag||3===a.tag||4===a.tag}\nfunction Uj(a){a:for(;;){for(;null===a.sibling;){if(null===a.return||Tj(a.return))return null;a=a.return}a.sibling.return=a.return;for(a=a.sibling;5!==a.tag&&6!==a.tag&&18!==a.tag;){if(a.flags&2)continue a;if(null===a.child||4===a.tag)continue a;else a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}\nfunction Vj(a,b,c){var d=a.tag;if(5===d||6===d)a=a.stateNode,b?8===c.nodeType?c.parentNode.insertBefore(a,b):c.insertBefore(a,b):(8===c.nodeType?(b=c.parentNode,b.insertBefore(a,c)):(b=c,b.appendChild(a)),c=c._reactRootContainer,null!==c&&void 0!==c||null!==b.onclick||(b.onclick=Bf));else if(4!==d&&(a=a.child,null!==a))for(Vj(a,b,c),a=a.sibling;null!==a;)Vj(a,b,c),a=a.sibling}\nfunction Wj(a,b,c){var d=a.tag;if(5===d||6===d)a=a.stateNode,b?c.insertBefore(a,b):c.appendChild(a);else if(4!==d&&(a=a.child,null!==a))for(Wj(a,b,c),a=a.sibling;null!==a;)Wj(a,b,c),a=a.sibling}var X=null,Xj=!1;function Yj(a,b,c){for(c=c.child;null!==c;)Zj(a,b,c),c=c.sibling}\nfunction Zj(a,b,c){if(lc&&\"function\"===typeof lc.onCommitFiberUnmount)try{lc.onCommitFiberUnmount(kc,c)}catch(h){}switch(c.tag){case 5:U||Lj(c,b);case 6:var d=X,e=Xj;X=null;Yj(a,b,c);X=d;Xj=e;null!==X&&(Xj?(a=X,c=c.stateNode,8===a.nodeType?a.parentNode.removeChild(c):a.removeChild(c)):X.removeChild(c.stateNode));break;case 18:null!==X&&(Xj?(a=X,c=c.stateNode,8===a.nodeType?Kf(a.parentNode,c):1===a.nodeType&&Kf(a,c),bd(a)):Kf(X,c.stateNode));break;case 4:d=X;e=Xj;X=c.stateNode.containerInfo;Xj=!0;\nYj(a,b,c);X=d;Xj=e;break;case 0:case 11:case 14:case 15:if(!U&&(d=c.updateQueue,null!==d&&(d=d.lastEffect,null!==d))){e=d=d.next;do{var f=e,g=f.destroy;f=f.tag;void 0!==g&&(0!==(f&2)?Mj(c,b,g):0!==(f&4)&&Mj(c,b,g));e=e.next}while(e!==d)}Yj(a,b,c);break;case 1:if(!U&&(Lj(c,b),d=c.stateNode,\"function\"===typeof d.componentWillUnmount))try{d.props=c.memoizedProps,d.state=c.memoizedState,d.componentWillUnmount()}catch(h){W(c,b,h)}Yj(a,b,c);break;case 21:Yj(a,b,c);break;case 22:c.mode&1?(U=(d=U)||null!==\nc.memoizedState,Yj(a,b,c),U=d):Yj(a,b,c);break;default:Yj(a,b,c)}}function ak(a){var b=a.updateQueue;if(null!==b){a.updateQueue=null;var c=a.stateNode;null===c&&(c=a.stateNode=new Kj);b.forEach(function(b){var d=bk.bind(null,a,b);c.has(b)||(c.add(b),b.then(d,d))})}}\nfunction ck(a,b){var c=b.deletions;if(null!==c)for(var d=0;d<c.length;d++){var e=c[d];try{var f=a,g=b,h=g;a:for(;null!==h;){switch(h.tag){case 5:X=h.stateNode;Xj=!1;break a;case 3:X=h.stateNode.containerInfo;Xj=!0;break a;case 4:X=h.stateNode.containerInfo;Xj=!0;break a}h=h.return}if(null===X)throw Error(p(160));Zj(f,g,e);X=null;Xj=!1;var k=e.alternate;null!==k&&(k.return=null);e.return=null}catch(l){W(e,b,l)}}if(b.subtreeFlags&12854)for(b=b.child;null!==b;)dk(b,a),b=b.sibling}\nfunction dk(a,b){var c=a.alternate,d=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:ck(b,a);ek(a);if(d&4){try{Pj(3,a,a.return),Qj(3,a)}catch(t){W(a,a.return,t)}try{Pj(5,a,a.return)}catch(t){W(a,a.return,t)}}break;case 1:ck(b,a);ek(a);d&512&&null!==c&&Lj(c,c.return);break;case 5:ck(b,a);ek(a);d&512&&null!==c&&Lj(c,c.return);if(a.flags&32){var e=a.stateNode;try{ob(e,\"\")}catch(t){W(a,a.return,t)}}if(d&4&&(e=a.stateNode,null!=e)){var f=a.memoizedProps,g=null!==c?c.memoizedProps:f,h=a.type,k=a.updateQueue;\na.updateQueue=null;if(null!==k)try{\"input\"===h&&\"radio\"===f.type&&null!=f.name&&ab(e,f);vb(h,g);var l=vb(h,f);for(g=0;g<k.length;g+=2){var m=k[g],q=k[g+1];\"style\"===m?sb(e,q):\"dangerouslySetInnerHTML\"===m?nb(e,q):\"children\"===m?ob(e,q):ta(e,m,q,l)}switch(h){case \"input\":bb(e,f);break;case \"textarea\":ib(e,f);break;case \"select\":var r=e._wrapperState.wasMultiple;e._wrapperState.wasMultiple=!!f.multiple;var y=f.value;null!=y?fb(e,!!f.multiple,y,!1):r!==!!f.multiple&&(null!=f.defaultValue?fb(e,!!f.multiple,\nf.defaultValue,!0):fb(e,!!f.multiple,f.multiple?[]:\"\",!1))}e[Pf]=f}catch(t){W(a,a.return,t)}}break;case 6:ck(b,a);ek(a);if(d&4){if(null===a.stateNode)throw Error(p(162));e=a.stateNode;f=a.memoizedProps;try{e.nodeValue=f}catch(t){W(a,a.return,t)}}break;case 3:ck(b,a);ek(a);if(d&4&&null!==c&&c.memoizedState.isDehydrated)try{bd(b.containerInfo)}catch(t){W(a,a.return,t)}break;case 4:ck(b,a);ek(a);break;case 13:ck(b,a);ek(a);e=a.child;e.flags&8192&&(f=null!==e.memoizedState,e.stateNode.isHidden=f,!f||\nnull!==e.alternate&&null!==e.alternate.memoizedState||(fk=B()));d&4&&ak(a);break;case 22:m=null!==c&&null!==c.memoizedState;a.mode&1?(U=(l=U)||m,ck(b,a),U=l):ck(b,a);ek(a);if(d&8192){l=null!==a.memoizedState;if((a.stateNode.isHidden=l)&&!m&&0!==(a.mode&1))for(V=a,m=a.child;null!==m;){for(q=V=m;null!==V;){r=V;y=r.child;switch(r.tag){case 0:case 11:case 14:case 15:Pj(4,r,r.return);break;case 1:Lj(r,r.return);var n=r.stateNode;if(\"function\"===typeof n.componentWillUnmount){d=r;c=r.return;try{b=d,n.props=\nb.memoizedProps,n.state=b.memoizedState,n.componentWillUnmount()}catch(t){W(d,c,t)}}break;case 5:Lj(r,r.return);break;case 22:if(null!==r.memoizedState){gk(q);continue}}null!==y?(y.return=r,V=y):gk(q)}m=m.sibling}a:for(m=null,q=a;;){if(5===q.tag){if(null===m){m=q;try{e=q.stateNode,l?(f=e.style,\"function\"===typeof f.setProperty?f.setProperty(\"display\",\"none\",\"important\"):f.display=\"none\"):(h=q.stateNode,k=q.memoizedProps.style,g=void 0!==k&&null!==k&&k.hasOwnProperty(\"display\")?k.display:null,h.style.display=\nrb(\"display\",g))}catch(t){W(a,a.return,t)}}}else if(6===q.tag){if(null===m)try{q.stateNode.nodeValue=l?\"\":q.memoizedProps}catch(t){W(a,a.return,t)}}else if((22!==q.tag&&23!==q.tag||null===q.memoizedState||q===a)&&null!==q.child){q.child.return=q;q=q.child;continue}if(q===a)break a;for(;null===q.sibling;){if(null===q.return||q.return===a)break a;m===q&&(m=null);q=q.return}m===q&&(m=null);q.sibling.return=q.return;q=q.sibling}}break;case 19:ck(b,a);ek(a);d&4&&ak(a);break;case 21:break;default:ck(b,\na),ek(a)}}function ek(a){var b=a.flags;if(b&2){try{a:{for(var c=a.return;null!==c;){if(Tj(c)){var d=c;break a}c=c.return}throw Error(p(160));}switch(d.tag){case 5:var e=d.stateNode;d.flags&32&&(ob(e,\"\"),d.flags&=-33);var f=Uj(a);Wj(a,f,e);break;case 3:case 4:var g=d.stateNode.containerInfo,h=Uj(a);Vj(a,h,g);break;default:throw Error(p(161));}}catch(k){W(a,a.return,k)}a.flags&=-3}b&4096&&(a.flags&=-4097)}function hk(a,b,c){V=a;ik(a,b,c)}\nfunction ik(a,b,c){for(var d=0!==(a.mode&1);null!==V;){var e=V,f=e.child;if(22===e.tag&&d){var g=null!==e.memoizedState||Jj;if(!g){var h=e.alternate,k=null!==h&&null!==h.memoizedState||U;h=Jj;var l=U;Jj=g;if((U=k)&&!l)for(V=e;null!==V;)g=V,k=g.child,22===g.tag&&null!==g.memoizedState?jk(e):null!==k?(k.return=g,V=k):jk(e);for(;null!==f;)V=f,ik(f,b,c),f=f.sibling;V=e;Jj=h;U=l}kk(a,b,c)}else 0!==(e.subtreeFlags&8772)&&null!==f?(f.return=e,V=f):kk(a,b,c)}}\nfunction kk(a){for(;null!==V;){var b=V;if(0!==(b.flags&8772)){var c=b.alternate;try{if(0!==(b.flags&8772))switch(b.tag){case 0:case 11:case 15:U||Qj(5,b);break;case 1:var d=b.stateNode;if(b.flags&4&&!U)if(null===c)d.componentDidMount();else{var e=b.elementType===b.type?c.memoizedProps:Ci(b.type,c.memoizedProps);d.componentDidUpdate(e,c.memoizedState,d.__reactInternalSnapshotBeforeUpdate)}var f=b.updateQueue;null!==f&&sh(b,f,d);break;case 3:var g=b.updateQueue;if(null!==g){c=null;if(null!==b.child)switch(b.child.tag){case 5:c=\nb.child.stateNode;break;case 1:c=b.child.stateNode}sh(b,g,c)}break;case 5:var h=b.stateNode;if(null===c&&b.flags&4){c=h;var k=b.memoizedProps;switch(b.type){case \"button\":case \"input\":case \"select\":case \"textarea\":k.autoFocus&&c.focus();break;case \"img\":k.src&&(c.src=k.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(null===b.memoizedState){var l=b.alternate;if(null!==l){var m=l.memoizedState;if(null!==m){var q=m.dehydrated;null!==q&&bd(q)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;\ndefault:throw Error(p(163));}U||b.flags&512&&Rj(b)}catch(r){W(b,b.return,r)}}if(b===a){V=null;break}c=b.sibling;if(null!==c){c.return=b.return;V=c;break}V=b.return}}function gk(a){for(;null!==V;){var b=V;if(b===a){V=null;break}var c=b.sibling;if(null!==c){c.return=b.return;V=c;break}V=b.return}}\nfunction jk(a){for(;null!==V;){var b=V;try{switch(b.tag){case 0:case 11:case 15:var c=b.return;try{Qj(4,b)}catch(k){W(b,c,k)}break;case 1:var d=b.stateNode;if(\"function\"===typeof d.componentDidMount){var e=b.return;try{d.componentDidMount()}catch(k){W(b,e,k)}}var f=b.return;try{Rj(b)}catch(k){W(b,f,k)}break;case 5:var g=b.return;try{Rj(b)}catch(k){W(b,g,k)}}}catch(k){W(b,b.return,k)}if(b===a){V=null;break}var h=b.sibling;if(null!==h){h.return=b.return;V=h;break}V=b.return}}\nvar lk=Math.ceil,mk=ua.ReactCurrentDispatcher,nk=ua.ReactCurrentOwner,ok=ua.ReactCurrentBatchConfig,K=0,Q=null,Y=null,Z=0,fj=0,ej=Uf(0),T=0,pk=null,rh=0,qk=0,rk=0,sk=null,tk=null,fk=0,Gj=Infinity,uk=null,Oi=!1,Pi=null,Ri=null,vk=!1,wk=null,xk=0,yk=0,zk=null,Ak=-1,Bk=0;function R(){return 0!==(K&6)?B():-1!==Ak?Ak:Ak=B()}\nfunction yi(a){if(0===(a.mode&1))return 1;if(0!==(K&2)&&0!==Z)return Z&-Z;if(null!==Kg.transition)return 0===Bk&&(Bk=yc()),Bk;a=C;if(0!==a)return a;a=window.event;a=void 0===a?16:jd(a.type);return a}function gi(a,b,c,d){if(50<yk)throw yk=0,zk=null,Error(p(185));Ac(a,c,d);if(0===(K&2)||a!==Q)a===Q&&(0===(K&2)&&(qk|=c),4===T&&Ck(a,Z)),Dk(a,d),1===c&&0===K&&0===(b.mode&1)&&(Gj=B()+500,fg&&jg())}\nfunction Dk(a,b){var c=a.callbackNode;wc(a,b);var d=uc(a,a===Q?Z:0);if(0===d)null!==c&&bc(c),a.callbackNode=null,a.callbackPriority=0;else if(b=d&-d,a.callbackPriority!==b){null!=c&&bc(c);if(1===b)0===a.tag?ig(Ek.bind(null,a)):hg(Ek.bind(null,a)),Jf(function(){0===(K&6)&&jg()}),c=null;else{switch(Dc(d)){case 1:c=fc;break;case 4:c=gc;break;case 16:c=hc;break;case 536870912:c=jc;break;default:c=hc}c=Fk(c,Gk.bind(null,a))}a.callbackPriority=b;a.callbackNode=c}}\nfunction Gk(a,b){Ak=-1;Bk=0;if(0!==(K&6))throw Error(p(327));var c=a.callbackNode;if(Hk()&&a.callbackNode!==c)return null;var d=uc(a,a===Q?Z:0);if(0===d)return null;if(0!==(d&30)||0!==(d&a.expiredLanes)||b)b=Ik(a,d);else{b=d;var e=K;K|=2;var f=Jk();if(Q!==a||Z!==b)uk=null,Gj=B()+500,Kk(a,b);do try{Lk();break}catch(h){Mk(a,h)}while(1);$g();mk.current=f;K=e;null!==Y?b=0:(Q=null,Z=0,b=T)}if(0!==b){2===b&&(e=xc(a),0!==e&&(d=e,b=Nk(a,e)));if(1===b)throw c=pk,Kk(a,0),Ck(a,d),Dk(a,B()),c;if(6===b)Ck(a,d);\nelse{e=a.current.alternate;if(0===(d&30)&&!Ok(e)&&(b=Ik(a,d),2===b&&(f=xc(a),0!==f&&(d=f,b=Nk(a,f))),1===b))throw c=pk,Kk(a,0),Ck(a,d),Dk(a,B()),c;a.finishedWork=e;a.finishedLanes=d;switch(b){case 0:case 1:throw Error(p(345));case 2:Pk(a,tk,uk);break;case 3:Ck(a,d);if((d&130023424)===d&&(b=fk+500-B(),10<b)){if(0!==uc(a,0))break;e=a.suspendedLanes;if((e&d)!==d){R();a.pingedLanes|=a.suspendedLanes&e;break}a.timeoutHandle=Ff(Pk.bind(null,a,tk,uk),b);break}Pk(a,tk,uk);break;case 4:Ck(a,d);if((d&4194240)===\nd)break;b=a.eventTimes;for(e=-1;0<d;){var g=31-oc(d);f=1<<g;g=b[g];g>e&&(e=g);d&=~f}d=e;d=B()-d;d=(120>d?120:480>d?480:1080>d?1080:1920>d?1920:3E3>d?3E3:4320>d?4320:1960*lk(d/1960))-d;if(10<d){a.timeoutHandle=Ff(Pk.bind(null,a,tk,uk),d);break}Pk(a,tk,uk);break;case 5:Pk(a,tk,uk);break;default:throw Error(p(329));}}}Dk(a,B());return a.callbackNode===c?Gk.bind(null,a):null}\nfunction Nk(a,b){var c=sk;a.current.memoizedState.isDehydrated&&(Kk(a,b).flags|=256);a=Ik(a,b);2!==a&&(b=tk,tk=c,null!==b&&Fj(b));return a}function Fj(a){null===tk?tk=a:tk.push.apply(tk,a)}\nfunction Ok(a){for(var b=a;;){if(b.flags&16384){var c=b.updateQueue;if(null!==c&&(c=c.stores,null!==c))for(var d=0;d<c.length;d++){var e=c[d],f=e.getSnapshot;e=e.value;try{if(!He(f(),e))return!1}catch(g){return!1}}}c=b.child;if(b.subtreeFlags&16384&&null!==c)c.return=b,b=c;else{if(b===a)break;for(;null===b.sibling;){if(null===b.return||b.return===a)return!0;b=b.return}b.sibling.return=b.return;b=b.sibling}}return!0}\nfunction Ck(a,b){b&=~rk;b&=~qk;a.suspendedLanes|=b;a.pingedLanes&=~b;for(a=a.expirationTimes;0<b;){var c=31-oc(b),d=1<<c;a[c]=-1;b&=~d}}function Ek(a){if(0!==(K&6))throw Error(p(327));Hk();var b=uc(a,0);if(0===(b&1))return Dk(a,B()),null;var c=Ik(a,b);if(0!==a.tag&&2===c){var d=xc(a);0!==d&&(b=d,c=Nk(a,d))}if(1===c)throw c=pk,Kk(a,0),Ck(a,b),Dk(a,B()),c;if(6===c)throw Error(p(345));a.finishedWork=a.current.alternate;a.finishedLanes=b;Pk(a,tk,uk);Dk(a,B());return null}\nfunction Qk(a,b){var c=K;K|=1;try{return a(b)}finally{K=c,0===K&&(Gj=B()+500,fg&&jg())}}function Rk(a){null!==wk&&0===wk.tag&&0===(K&6)&&Hk();var b=K;K|=1;var c=ok.transition,d=C;try{if(ok.transition=null,C=1,a)return a()}finally{C=d,ok.transition=c,K=b,0===(K&6)&&jg()}}function Hj(){fj=ej.current;E(ej)}\nfunction Kk(a,b){a.finishedWork=null;a.finishedLanes=0;var c=a.timeoutHandle;-1!==c&&(a.timeoutHandle=-1,Gf(c));if(null!==Y)for(c=Y.return;null!==c;){var d=c;wg(d);switch(d.tag){case 1:d=d.type.childContextTypes;null!==d&&void 0!==d&&$f();break;case 3:zh();E(Wf);E(H);Eh();break;case 5:Bh(d);break;case 4:zh();break;case 13:E(L);break;case 19:E(L);break;case 10:ah(d.type._context);break;case 22:case 23:Hj()}c=c.return}Q=a;Y=a=Pg(a.current,null);Z=fj=b;T=0;pk=null;rk=qk=rh=0;tk=sk=null;if(null!==fh){for(b=\n0;b<fh.length;b++)if(c=fh[b],d=c.interleaved,null!==d){c.interleaved=null;var e=d.next,f=c.pending;if(null!==f){var g=f.next;f.next=e;d.next=g}c.pending=d}fh=null}return a}\nfunction Mk(a,b){do{var c=Y;try{$g();Fh.current=Rh;if(Ih){for(var d=M.memoizedState;null!==d;){var e=d.queue;null!==e&&(e.pending=null);d=d.next}Ih=!1}Hh=0;O=N=M=null;Jh=!1;Kh=0;nk.current=null;if(null===c||null===c.return){T=1;pk=b;Y=null;break}a:{var f=a,g=c.return,h=c,k=b;b=Z;h.flags|=32768;if(null!==k&&\"object\"===typeof k&&\"function\"===typeof k.then){var l=k,m=h,q=m.tag;if(0===(m.mode&1)&&(0===q||11===q||15===q)){var r=m.alternate;r?(m.updateQueue=r.updateQueue,m.memoizedState=r.memoizedState,\nm.lanes=r.lanes):(m.updateQueue=null,m.memoizedState=null)}var y=Ui(g);if(null!==y){y.flags&=-257;Vi(y,g,h,f,b);y.mode&1&&Si(f,l,b);b=y;k=l;var n=b.updateQueue;if(null===n){var t=new Set;t.add(k);b.updateQueue=t}else n.add(k);break a}else{if(0===(b&1)){Si(f,l,b);tj();break a}k=Error(p(426))}}else if(I&&h.mode&1){var J=Ui(g);if(null!==J){0===(J.flags&65536)&&(J.flags|=256);Vi(J,g,h,f,b);Jg(Ji(k,h));break a}}f=k=Ji(k,h);4!==T&&(T=2);null===sk?sk=[f]:sk.push(f);f=g;do{switch(f.tag){case 3:f.flags|=65536;\nb&=-b;f.lanes|=b;var x=Ni(f,k,b);ph(f,x);break a;case 1:h=k;var w=f.type,u=f.stateNode;if(0===(f.flags&128)&&(\"function\"===typeof w.getDerivedStateFromError||null!==u&&\"function\"===typeof u.componentDidCatch&&(null===Ri||!Ri.has(u)))){f.flags|=65536;b&=-b;f.lanes|=b;var F=Qi(f,h,b);ph(f,F);break a}}f=f.return}while(null!==f)}Sk(c)}catch(na){b=na;Y===c&&null!==c&&(Y=c=c.return);continue}break}while(1)}function Jk(){var a=mk.current;mk.current=Rh;return null===a?Rh:a}\nfunction tj(){if(0===T||3===T||2===T)T=4;null===Q||0===(rh&268435455)&&0===(qk&268435455)||Ck(Q,Z)}function Ik(a,b){var c=K;K|=2;var d=Jk();if(Q!==a||Z!==b)uk=null,Kk(a,b);do try{Tk();break}catch(e){Mk(a,e)}while(1);$g();K=c;mk.current=d;if(null!==Y)throw Error(p(261));Q=null;Z=0;return T}function Tk(){for(;null!==Y;)Uk(Y)}function Lk(){for(;null!==Y&&!cc();)Uk(Y)}function Uk(a){var b=Vk(a.alternate,a,fj);a.memoizedProps=a.pendingProps;null===b?Sk(a):Y=b;nk.current=null}\nfunction Sk(a){var b=a;do{var c=b.alternate;a=b.return;if(0===(b.flags&32768)){if(c=Ej(c,b,fj),null!==c){Y=c;return}}else{c=Ij(c,b);if(null!==c){c.flags&=32767;Y=c;return}if(null!==a)a.flags|=32768,a.subtreeFlags=0,a.deletions=null;else{T=6;Y=null;return}}b=b.sibling;if(null!==b){Y=b;return}Y=b=a}while(null!==b);0===T&&(T=5)}function Pk(a,b,c){var d=C,e=ok.transition;try{ok.transition=null,C=1,Wk(a,b,c,d)}finally{ok.transition=e,C=d}return null}\nfunction Wk(a,b,c,d){do Hk();while(null!==wk);if(0!==(K&6))throw Error(p(327));c=a.finishedWork;var e=a.finishedLanes;if(null===c)return null;a.finishedWork=null;a.finishedLanes=0;if(c===a.current)throw Error(p(177));a.callbackNode=null;a.callbackPriority=0;var f=c.lanes|c.childLanes;Bc(a,f);a===Q&&(Y=Q=null,Z=0);0===(c.subtreeFlags&2064)&&0===(c.flags&2064)||vk||(vk=!0,Fk(hc,function(){Hk();return null}));f=0!==(c.flags&15990);if(0!==(c.subtreeFlags&15990)||f){f=ok.transition;ok.transition=null;\nvar g=C;C=1;var h=K;K|=4;nk.current=null;Oj(a,c);dk(c,a);Oe(Df);dd=!!Cf;Df=Cf=null;a.current=c;hk(c,a,e);dc();K=h;C=g;ok.transition=f}else a.current=c;vk&&(vk=!1,wk=a,xk=e);f=a.pendingLanes;0===f&&(Ri=null);mc(c.stateNode,d);Dk(a,B());if(null!==b)for(d=a.onRecoverableError,c=0;c<b.length;c++)e=b[c],d(e.value,{componentStack:e.stack,digest:e.digest});if(Oi)throw Oi=!1,a=Pi,Pi=null,a;0!==(xk&1)&&0!==a.tag&&Hk();f=a.pendingLanes;0!==(f&1)?a===zk?yk++:(yk=0,zk=a):yk=0;jg();return null}\nfunction Hk(){if(null!==wk){var a=Dc(xk),b=ok.transition,c=C;try{ok.transition=null;C=16>a?16:a;if(null===wk)var d=!1;else{a=wk;wk=null;xk=0;if(0!==(K&6))throw Error(p(331));var e=K;K|=4;for(V=a.current;null!==V;){var f=V,g=f.child;if(0!==(V.flags&16)){var h=f.deletions;if(null!==h){for(var k=0;k<h.length;k++){var l=h[k];for(V=l;null!==V;){var m=V;switch(m.tag){case 0:case 11:case 15:Pj(8,m,f)}var q=m.child;if(null!==q)q.return=m,V=q;else for(;null!==V;){m=V;var r=m.sibling,y=m.return;Sj(m);if(m===\nl){V=null;break}if(null!==r){r.return=y;V=r;break}V=y}}}var n=f.alternate;if(null!==n){var t=n.child;if(null!==t){n.child=null;do{var J=t.sibling;t.sibling=null;t=J}while(null!==t)}}V=f}}if(0!==(f.subtreeFlags&2064)&&null!==g)g.return=f,V=g;else b:for(;null!==V;){f=V;if(0!==(f.flags&2048))switch(f.tag){case 0:case 11:case 15:Pj(9,f,f.return)}var x=f.sibling;if(null!==x){x.return=f.return;V=x;break b}V=f.return}}var w=a.current;for(V=w;null!==V;){g=V;var u=g.child;if(0!==(g.subtreeFlags&2064)&&null!==\nu)u.return=g,V=u;else b:for(g=w;null!==V;){h=V;if(0!==(h.flags&2048))try{switch(h.tag){case 0:case 11:case 15:Qj(9,h)}}catch(na){W(h,h.return,na)}if(h===g){V=null;break b}var F=h.sibling;if(null!==F){F.return=h.return;V=F;break b}V=h.return}}K=e;jg();if(lc&&\"function\"===typeof lc.onPostCommitFiberRoot)try{lc.onPostCommitFiberRoot(kc,a)}catch(na){}d=!0}return d}finally{C=c,ok.transition=b}}return!1}function Xk(a,b,c){b=Ji(c,b);b=Ni(a,b,1);a=nh(a,b,1);b=R();null!==a&&(Ac(a,1,b),Dk(a,b))}\nfunction W(a,b,c){if(3===a.tag)Xk(a,a,c);else for(;null!==b;){if(3===b.tag){Xk(b,a,c);break}else if(1===b.tag){var d=b.stateNode;if(\"function\"===typeof b.type.getDerivedStateFromError||\"function\"===typeof d.componentDidCatch&&(null===Ri||!Ri.has(d))){a=Ji(c,a);a=Qi(b,a,1);b=nh(b,a,1);a=R();null!==b&&(Ac(b,1,a),Dk(b,a));break}}b=b.return}}\nfunction Ti(a,b,c){var d=a.pingCache;null!==d&&d.delete(b);b=R();a.pingedLanes|=a.suspendedLanes&c;Q===a&&(Z&c)===c&&(4===T||3===T&&(Z&130023424)===Z&&500>B()-fk?Kk(a,0):rk|=c);Dk(a,b)}function Yk(a,b){0===b&&(0===(a.mode&1)?b=1:(b=sc,sc<<=1,0===(sc&130023424)&&(sc=4194304)));var c=R();a=ih(a,b);null!==a&&(Ac(a,b,c),Dk(a,c))}function uj(a){var b=a.memoizedState,c=0;null!==b&&(c=b.retryLane);Yk(a,c)}\nfunction bk(a,b){var c=0;switch(a.tag){case 13:var d=a.stateNode;var e=a.memoizedState;null!==e&&(c=e.retryLane);break;case 19:d=a.stateNode;break;default:throw Error(p(314));}null!==d&&d.delete(b);Yk(a,c)}var Vk;\nVk=function(a,b,c){if(null!==a)if(a.memoizedProps!==b.pendingProps||Wf.current)dh=!0;else{if(0===(a.lanes&c)&&0===(b.flags&128))return dh=!1,yj(a,b,c);dh=0!==(a.flags&131072)?!0:!1}else dh=!1,I&&0!==(b.flags&1048576)&&ug(b,ng,b.index);b.lanes=0;switch(b.tag){case 2:var d=b.type;ij(a,b);a=b.pendingProps;var e=Yf(b,H.current);ch(b,c);e=Nh(null,b,d,a,e,c);var f=Sh();b.flags|=1;\"object\"===typeof e&&null!==e&&\"function\"===typeof e.render&&void 0===e.$$typeof?(b.tag=1,b.memoizedState=null,b.updateQueue=\nnull,Zf(d)?(f=!0,cg(b)):f=!1,b.memoizedState=null!==e.state&&void 0!==e.state?e.state:null,kh(b),e.updater=Ei,b.stateNode=e,e._reactInternals=b,Ii(b,d,a,c),b=jj(null,b,d,!0,f,c)):(b.tag=0,I&&f&&vg(b),Xi(null,b,e,c),b=b.child);return b;case 16:d=b.elementType;a:{ij(a,b);a=b.pendingProps;e=d._init;d=e(d._payload);b.type=d;e=b.tag=Zk(d);a=Ci(d,a);switch(e){case 0:b=cj(null,b,d,a,c);break a;case 1:b=hj(null,b,d,a,c);break a;case 11:b=Yi(null,b,d,a,c);break a;case 14:b=$i(null,b,d,Ci(d.type,a),c);break a}throw Error(p(306,\nd,\"\"));}return b;case 0:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:Ci(d,e),cj(a,b,d,e,c);case 1:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:Ci(d,e),hj(a,b,d,e,c);case 3:a:{kj(b);if(null===a)throw Error(p(387));d=b.pendingProps;f=b.memoizedState;e=f.element;lh(a,b);qh(b,d,null,c);var g=b.memoizedState;d=g.element;if(f.isDehydrated)if(f={element:d,isDehydrated:!1,cache:g.cache,pendingSuspenseBoundaries:g.pendingSuspenseBoundaries,transitions:g.transitions},b.updateQueue.baseState=\nf,b.memoizedState=f,b.flags&256){e=Ji(Error(p(423)),b);b=lj(a,b,d,c,e);break a}else if(d!==e){e=Ji(Error(p(424)),b);b=lj(a,b,d,c,e);break a}else for(yg=Lf(b.stateNode.containerInfo.firstChild),xg=b,I=!0,zg=null,c=Vg(b,null,d,c),b.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{Ig();if(d===e){b=Zi(a,b,c);break a}Xi(a,b,d,c)}b=b.child}return b;case 5:return Ah(b),null===a&&Eg(b),d=b.type,e=b.pendingProps,f=null!==a?a.memoizedProps:null,g=e.children,Ef(d,e)?g=null:null!==f&&Ef(d,f)&&(b.flags|=32),\ngj(a,b),Xi(a,b,g,c),b.child;case 6:return null===a&&Eg(b),null;case 13:return oj(a,b,c);case 4:return yh(b,b.stateNode.containerInfo),d=b.pendingProps,null===a?b.child=Ug(b,null,d,c):Xi(a,b,d,c),b.child;case 11:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:Ci(d,e),Yi(a,b,d,e,c);case 7:return Xi(a,b,b.pendingProps,c),b.child;case 8:return Xi(a,b,b.pendingProps.children,c),b.child;case 12:return Xi(a,b,b.pendingProps.children,c),b.child;case 10:a:{d=b.type._context;e=b.pendingProps;f=b.memoizedProps;\ng=e.value;G(Wg,d._currentValue);d._currentValue=g;if(null!==f)if(He(f.value,g)){if(f.children===e.children&&!Wf.current){b=Zi(a,b,c);break a}}else for(f=b.child,null!==f&&(f.return=b);null!==f;){var h=f.dependencies;if(null!==h){g=f.child;for(var k=h.firstContext;null!==k;){if(k.context===d){if(1===f.tag){k=mh(-1,c&-c);k.tag=2;var l=f.updateQueue;if(null!==l){l=l.shared;var m=l.pending;null===m?k.next=k:(k.next=m.next,m.next=k);l.pending=k}}f.lanes|=c;k=f.alternate;null!==k&&(k.lanes|=c);bh(f.return,\nc,b);h.lanes|=c;break}k=k.next}}else if(10===f.tag)g=f.type===b.type?null:f.child;else if(18===f.tag){g=f.return;if(null===g)throw Error(p(341));g.lanes|=c;h=g.alternate;null!==h&&(h.lanes|=c);bh(g,c,b);g=f.sibling}else g=f.child;if(null!==g)g.return=f;else for(g=f;null!==g;){if(g===b){g=null;break}f=g.sibling;if(null!==f){f.return=g.return;g=f;break}g=g.return}f=g}Xi(a,b,e.children,c);b=b.child}return b;case 9:return e=b.type,d=b.pendingProps.children,ch(b,c),e=eh(e),d=d(e),b.flags|=1,Xi(a,b,d,c),\nb.child;case 14:return d=b.type,e=Ci(d,b.pendingProps),e=Ci(d.type,e),$i(a,b,d,e,c);case 15:return bj(a,b,b.type,b.pendingProps,c);case 17:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:Ci(d,e),ij(a,b),b.tag=1,Zf(d)?(a=!0,cg(b)):a=!1,ch(b,c),Gi(b,d,e),Ii(b,d,e,c),jj(null,b,d,!0,a,c);case 19:return xj(a,b,c);case 22:return dj(a,b,c)}throw Error(p(156,b.tag));};function Fk(a,b){return ac(a,b)}\nfunction $k(a,b,c,d){this.tag=a;this.key=c;this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null;this.index=0;this.ref=null;this.pendingProps=b;this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null;this.mode=d;this.subtreeFlags=this.flags=0;this.deletions=null;this.childLanes=this.lanes=0;this.alternate=null}function Bg(a,b,c,d){return new $k(a,b,c,d)}function aj(a){a=a.prototype;return!(!a||!a.isReactComponent)}\nfunction Zk(a){if(\"function\"===typeof a)return aj(a)?1:0;if(void 0!==a&&null!==a){a=a.$$typeof;if(a===Da)return 11;if(a===Ga)return 14}return 2}\nfunction Pg(a,b){var c=a.alternate;null===c?(c=Bg(a.tag,b,a.key,a.mode),c.elementType=a.elementType,c.type=a.type,c.stateNode=a.stateNode,c.alternate=a,a.alternate=c):(c.pendingProps=b,c.type=a.type,c.flags=0,c.subtreeFlags=0,c.deletions=null);c.flags=a.flags&14680064;c.childLanes=a.childLanes;c.lanes=a.lanes;c.child=a.child;c.memoizedProps=a.memoizedProps;c.memoizedState=a.memoizedState;c.updateQueue=a.updateQueue;b=a.dependencies;c.dependencies=null===b?null:{lanes:b.lanes,firstContext:b.firstContext};\nc.sibling=a.sibling;c.index=a.index;c.ref=a.ref;return c}\nfunction Rg(a,b,c,d,e,f){var g=2;d=a;if(\"function\"===typeof a)aj(a)&&(g=1);else if(\"string\"===typeof a)g=5;else a:switch(a){case ya:return Tg(c.children,e,f,b);case za:g=8;e|=8;break;case Aa:return a=Bg(12,c,b,e|2),a.elementType=Aa,a.lanes=f,a;case Ea:return a=Bg(13,c,b,e),a.elementType=Ea,a.lanes=f,a;case Fa:return a=Bg(19,c,b,e),a.elementType=Fa,a.lanes=f,a;case Ia:return pj(c,e,f,b);default:if(\"object\"===typeof a&&null!==a)switch(a.$$typeof){case Ba:g=10;break a;case Ca:g=9;break a;case Da:g=11;\nbreak a;case Ga:g=14;break a;case Ha:g=16;d=null;break a}throw Error(p(130,null==a?a:typeof a,\"\"));}b=Bg(g,c,b,e);b.elementType=a;b.type=d;b.lanes=f;return b}function Tg(a,b,c,d){a=Bg(7,a,d,b);a.lanes=c;return a}function pj(a,b,c,d){a=Bg(22,a,d,b);a.elementType=Ia;a.lanes=c;a.stateNode={isHidden:!1};return a}function Qg(a,b,c){a=Bg(6,a,null,b);a.lanes=c;return a}\nfunction Sg(a,b,c){b=Bg(4,null!==a.children?a.children:[],a.key,b);b.lanes=c;b.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation};return b}\nfunction al(a,b,c,d,e){this.tag=b;this.containerInfo=a;this.finishedWork=this.pingCache=this.current=this.pendingChildren=null;this.timeoutHandle=-1;this.callbackNode=this.pendingContext=this.context=null;this.callbackPriority=0;this.eventTimes=zc(0);this.expirationTimes=zc(-1);this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0;this.entanglements=zc(0);this.identifierPrefix=d;this.onRecoverableError=e;this.mutableSourceEagerHydrationData=\nnull}function bl(a,b,c,d,e,f,g,h,k){a=new al(a,b,c,h,k);1===b?(b=1,!0===f&&(b|=8)):b=0;f=Bg(3,null,null,b);a.current=f;f.stateNode=a;f.memoizedState={element:d,isDehydrated:c,cache:null,transitions:null,pendingSuspenseBoundaries:null};kh(f);return a}function cl(a,b,c){var d=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:wa,key:null==d?null:\"\"+d,children:a,containerInfo:b,implementation:c}}\nfunction dl(a){if(!a)return Vf;a=a._reactInternals;a:{if(Vb(a)!==a||1!==a.tag)throw Error(p(170));var b=a;do{switch(b.tag){case 3:b=b.stateNode.context;break a;case 1:if(Zf(b.type)){b=b.stateNode.__reactInternalMemoizedMergedChildContext;break a}}b=b.return}while(null!==b);throw Error(p(171));}if(1===a.tag){var c=a.type;if(Zf(c))return bg(a,c,b)}return b}\nfunction el(a,b,c,d,e,f,g,h,k){a=bl(c,d,!0,a,e,f,g,h,k);a.context=dl(null);c=a.current;d=R();e=yi(c);f=mh(d,e);f.callback=void 0!==b&&null!==b?b:null;nh(c,f,e);a.current.lanes=e;Ac(a,e,d);Dk(a,d);return a}function fl(a,b,c,d){var e=b.current,f=R(),g=yi(e);c=dl(c);null===b.context?b.context=c:b.pendingContext=c;b=mh(f,g);b.payload={element:a};d=void 0===d?null:d;null!==d&&(b.callback=d);a=nh(e,b,g);null!==a&&(gi(a,e,g,f),oh(a,e,g));return g}\nfunction gl(a){a=a.current;if(!a.child)return null;switch(a.child.tag){case 5:return a.child.stateNode;default:return a.child.stateNode}}function hl(a,b){a=a.memoizedState;if(null!==a&&null!==a.dehydrated){var c=a.retryLane;a.retryLane=0!==c&&c<b?c:b}}function il(a,b){hl(a,b);(a=a.alternate)&&hl(a,b)}function jl(){return null}var kl=\"function\"===typeof reportError?reportError:function(a){console.error(a)};function ll(a){this._internalRoot=a}\nml.prototype.render=ll.prototype.render=function(a){var b=this._internalRoot;if(null===b)throw Error(p(409));fl(a,b,null,null)};ml.prototype.unmount=ll.prototype.unmount=function(){var a=this._internalRoot;if(null!==a){this._internalRoot=null;var b=a.containerInfo;Rk(function(){fl(null,a,null,null)});b[uf]=null}};function ml(a){this._internalRoot=a}\nml.prototype.unstable_scheduleHydration=function(a){if(a){var b=Hc();a={blockedOn:null,target:a,priority:b};for(var c=0;c<Qc.length&&0!==b&&b<Qc[c].priority;c++);Qc.splice(c,0,a);0===c&&Vc(a)}};function nl(a){return!(!a||1!==a.nodeType&&9!==a.nodeType&&11!==a.nodeType)}function ol(a){return!(!a||1!==a.nodeType&&9!==a.nodeType&&11!==a.nodeType&&(8!==a.nodeType||\" react-mount-point-unstable \"!==a.nodeValue))}function pl(){}\nfunction ql(a,b,c,d,e){if(e){if(\"function\"===typeof d){var f=d;d=function(){var a=gl(g);f.call(a)}}var g=el(b,d,a,0,null,!1,!1,\"\",pl);a._reactRootContainer=g;a[uf]=g.current;sf(8===a.nodeType?a.parentNode:a);Rk();return g}for(;e=a.lastChild;)a.removeChild(e);if(\"function\"===typeof d){var h=d;d=function(){var a=gl(k);h.call(a)}}var k=bl(a,0,!1,null,null,!1,!1,\"\",pl);a._reactRootContainer=k;a[uf]=k.current;sf(8===a.nodeType?a.parentNode:a);Rk(function(){fl(b,k,c,d)});return k}\nfunction rl(a,b,c,d,e){var f=c._reactRootContainer;if(f){var g=f;if(\"function\"===typeof e){var h=e;e=function(){var a=gl(g);h.call(a)}}fl(b,g,a,e)}else g=ql(c,b,a,e,d);return gl(g)}Ec=function(a){switch(a.tag){case 3:var b=a.stateNode;if(b.current.memoizedState.isDehydrated){var c=tc(b.pendingLanes);0!==c&&(Cc(b,c|1),Dk(b,B()),0===(K&6)&&(Gj=B()+500,jg()))}break;case 13:Rk(function(){var b=ih(a,1);if(null!==b){var c=R();gi(b,a,1,c)}}),il(a,1)}};\nFc=function(a){if(13===a.tag){var b=ih(a,134217728);if(null!==b){var c=R();gi(b,a,134217728,c)}il(a,134217728)}};Gc=function(a){if(13===a.tag){var b=yi(a),c=ih(a,b);if(null!==c){var d=R();gi(c,a,b,d)}il(a,b)}};Hc=function(){return C};Ic=function(a,b){var c=C;try{return C=a,b()}finally{C=c}};\nyb=function(a,b,c){switch(b){case \"input\":bb(a,c);b=c.name;if(\"radio\"===c.type&&null!=b){for(c=a;c.parentNode;)c=c.parentNode;c=c.querySelectorAll(\"input[name=\"+JSON.stringify(\"\"+b)+'][type=\"radio\"]');for(b=0;b<c.length;b++){var d=c[b];if(d!==a&&d.form===a.form){var e=Db(d);if(!e)throw Error(p(90));Wa(d);bb(d,e)}}}break;case \"textarea\":ib(a,c);break;case \"select\":b=c.value,null!=b&&fb(a,!!c.multiple,b,!1)}};Gb=Qk;Hb=Rk;\nvar sl={usingClientEntryPoint:!1,Events:[Cb,ue,Db,Eb,Fb,Qk]},tl={findFiberByHostInstance:Wc,bundleType:0,version:\"18.3.1\",rendererPackageName:\"react-dom\"};\nvar ul={bundleType:tl.bundleType,version:tl.version,rendererPackageName:tl.rendererPackageName,rendererConfig:tl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua.ReactCurrentDispatcher,findHostInstanceByFiber:function(a){a=Zb(a);return null===a?null:a.stateNode},findFiberByHostInstance:tl.findFiberByHostInstance||\njl,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:\"18.3.1-next-f1338f8080-20240426\"};if(\"undefined\"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var vl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vl.isDisabled&&vl.supportsFiber)try{kc=vl.inject(ul),lc=vl}catch(a){}}exports.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sl;\nexports.createPortal=function(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!nl(b))throw Error(p(200));return cl(a,b,null,c)};exports.createRoot=function(a,b){if(!nl(a))throw Error(p(299));var c=!1,d=\"\",e=kl;null!==b&&void 0!==b&&(!0===b.unstable_strictMode&&(c=!0),void 0!==b.identifierPrefix&&(d=b.identifierPrefix),void 0!==b.onRecoverableError&&(e=b.onRecoverableError));b=bl(a,1,!1,null,null,c,!1,d,e);a[uf]=b.current;sf(8===a.nodeType?a.parentNode:a);return new ll(b)};\nexports.findDOMNode=function(a){if(null==a)return null;if(1===a.nodeType)return a;var b=a._reactInternals;if(void 0===b){if(\"function\"===typeof a.render)throw Error(p(188));a=Object.keys(a).join(\",\");throw Error(p(268,a));}a=Zb(b);a=null===a?null:a.stateNode;return a};exports.flushSync=function(a){return Rk(a)};exports.hydrate=function(a,b,c){if(!ol(b))throw Error(p(200));return rl(null,a,b,!0,c)};\nexports.hydrateRoot=function(a,b,c){if(!nl(a))throw Error(p(405));var d=null!=c&&c.hydratedSources||null,e=!1,f=\"\",g=kl;null!==c&&void 0!==c&&(!0===c.unstable_strictMode&&(e=!0),void 0!==c.identifierPrefix&&(f=c.identifierPrefix),void 0!==c.onRecoverableError&&(g=c.onRecoverableError));b=el(b,null,a,1,null!=c?c:null,e,!1,f,g);a[uf]=b.current;sf(a);if(d)for(a=0;a<d.length;a++)c=d[a],e=c._getVersion,e=e(c._source),null==b.mutableSourceEagerHydrationData?b.mutableSourceEagerHydrationData=[c,e]:b.mutableSourceEagerHydrationData.push(c,\ne);return new ml(b)};exports.render=function(a,b,c){if(!ol(b))throw Error(p(200));return rl(null,a,b,!1,c)};exports.unmountComponentAtNode=function(a){if(!ol(a))throw Error(p(40));return a._reactRootContainer?(Rk(function(){rl(null,null,a,!1,function(){a._reactRootContainer=null;a[uf]=null})}),!0):!1};exports.unstable_batchedUpdates=Qk;\nexports.unstable_renderSubtreeIntoContainer=function(a,b,c,d){if(!ol(c))throw Error(p(200));if(null==a||void 0===a._reactInternals)throw Error(p(38));return rl(a,b,c,!1,d)};exports.version=\"18.3.1-next-f1338f8080-20240426\";\n","'use strict';\n\nfunction checkDCE() {\n  /* global __REACT_DEVTOOLS_GLOBAL_HOOK__ */\n  if (\n    typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ === 'undefined' ||\n    typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE !== 'function'\n  ) {\n    return;\n  }\n  if (process.env.NODE_ENV !== 'production') {\n    // This branch is unreachable because this function is only called\n    // in production, but the condition is true only in development.\n    // Therefore if the branch is still here, dead code elimination wasn't\n    // properly applied.\n    // Don't change the message. React DevTools relies on it. Also make sure\n    // this message doesn't occur elsewhere in this function, or it will cause\n    // a false positive.\n    throw new Error('^_^');\n  }\n  try {\n    // Verify that the code above has been dead code eliminated (DCE'd).\n    __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE);\n  } catch (err) {\n    // DevTools shouldn't crash React, no matter what.\n    // We should still report in case we break this code.\n    console.error(err);\n  }\n}\n\nif (process.env.NODE_ENV === 'production') {\n  // DCE check should happen before ReactDOM bundle executes so that\n  // DevTools can report bad minification during injection.\n  checkDCE();\n  module.exports = require('./cjs/react-dom.production.min.js');\n} else {\n  module.exports = require('./cjs/react-dom.development.js');\n}\n","'use strict';\n\nvar m = require('react-dom');\nif (process.env.NODE_ENV === 'production') {\n  exports.createRoot = m.createRoot;\n  exports.hydrateRoot = m.hydrateRoot;\n} else {\n  var i = m.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;\n  exports.createRoot = function(c, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.createRoot(c, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n  exports.hydrateRoot = function(c, h, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.hydrateRoot(c, h, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n}\n","// src/subscribable.ts\nvar Subscribable = class {\n  constructor() {\n    this.listeners = /* @__PURE__ */ new Set();\n    this.subscribe = this.subscribe.bind(this);\n  }\n  subscribe(listener) {\n    this.listeners.add(listener);\n    this.onSubscribe();\n    return () => {\n      this.listeners.delete(listener);\n      this.onUnsubscribe();\n    };\n  }\n  hasListeners() {\n    return this.listeners.size > 0;\n  }\n  onSubscribe() {\n  }\n  onUnsubscribe() {\n  }\n};\nexport {\n  Subscribable\n};\n//# sourceMappingURL=subscribable.js.map","// src/timeoutManager.ts\nvar defaultTimeoutProvider = {\n  // We need the wrapper function syntax below instead of direct references to\n  // global setTimeout etc.\n  //\n  // BAD: `setTimeout: setTimeout`\n  // GOOD: `setTimeout: (cb, delay) => setTimeout(cb, delay)`\n  //\n  // If we use direct references here, then anything that wants to spy on or\n  // replace the global setTimeout (like tests) won't work since we'll already\n  // have a hard reference to the original implementation at the time when this\n  // file was imported.\n  setTimeout: (callback, delay) => setTimeout(callback, delay),\n  clearTimeout: (timeoutId) => clearTimeout(timeoutId),\n  setInterval: (callback, delay) => setInterval(callback, delay),\n  clearInterval: (intervalId) => clearInterval(intervalId)\n};\nvar TimeoutManager = class {\n  // We cannot have TimeoutManager<T> as we must instantiate it with a concrete\n  // type at app boot; and if we leave that type, then any new timer provider\n  // would need to support ReturnType<typeof setTimeout>, which is infeasible.\n  //\n  // We settle for type safety for the TimeoutProvider type, and accept that\n  // this class is unsafe internally to allow for extension.\n  #provider = defaultTimeoutProvider;\n  #providerCalled = false;\n  setTimeoutProvider(provider) {\n    if (process.env.NODE_ENV !== \"production\") {\n      if (this.#providerCalled && provider !== this.#provider) {\n        console.error(\n          `[timeoutManager]: Switching provider after calls to previous provider might result in unexpected behavior.`,\n          { previous: this.#provider, provider }\n        );\n      }\n    }\n    this.#provider = provider;\n    if (process.env.NODE_ENV !== \"production\") {\n      this.#providerCalled = false;\n    }\n  }\n  setTimeout(callback, delay) {\n    if (process.env.NODE_ENV !== \"production\") {\n      this.#providerCalled = true;\n    }\n    return this.#provider.setTimeout(callback, delay);\n  }\n  clearTimeout(timeoutId) {\n    this.#provider.clearTimeout(timeoutId);\n  }\n  setInterval(callback, delay) {\n    if (process.env.NODE_ENV !== \"production\") {\n      this.#providerCalled = true;\n    }\n    return this.#provider.setInterval(callback, delay);\n  }\n  clearInterval(intervalId) {\n    this.#provider.clearInterval(intervalId);\n  }\n};\nvar timeoutManager = new TimeoutManager();\nfunction systemSetTimeoutZero(callback) {\n  setTimeout(callback, 0);\n}\nexport {\n  TimeoutManager,\n  defaultTimeoutProvider,\n  systemSetTimeoutZero,\n  timeoutManager\n};\n//# sourceMappingURL=timeoutManager.js.map","// src/utils.ts\nimport { timeoutManager } from \"./timeoutManager.js\";\nvar isServer = typeof window === \"undefined\" || \"Deno\" in globalThis;\nfunction noop() {\n}\nfunction functionalUpdate(updater, input) {\n  return typeof updater === \"function\" ? updater(input) : updater;\n}\nfunction isValidTimeout(value) {\n  return typeof value === \"number\" && value >= 0 && value !== Infinity;\n}\nfunction timeUntilStale(updatedAt, staleTime) {\n  return Math.max(updatedAt + (staleTime || 0) - Date.now(), 0);\n}\nfunction resolveStaleTime(staleTime, query) {\n  return typeof staleTime === \"function\" ? staleTime(query) : staleTime;\n}\nfunction resolveEnabled(enabled, query) {\n  return typeof enabled === \"function\" ? enabled(query) : enabled;\n}\nfunction matchQuery(filters, query) {\n  const {\n    type = \"all\",\n    exact,\n    fetchStatus,\n    predicate,\n    queryKey,\n    stale\n  } = filters;\n  if (queryKey) {\n    if (exact) {\n      if (query.queryHash !== hashQueryKeyByOptions(queryKey, query.options)) {\n        return false;\n      }\n    } else if (!partialMatchKey(query.queryKey, queryKey)) {\n      return false;\n    }\n  }\n  if (type !== \"all\") {\n    const isActive = query.isActive();\n    if (type === \"active\" && !isActive) {\n      return false;\n    }\n    if (type === \"inactive\" && isActive) {\n      return false;\n    }\n  }\n  if (typeof stale === \"boolean\" && query.isStale() !== stale) {\n    return false;\n  }\n  if (fetchStatus && fetchStatus !== query.state.fetchStatus) {\n    return false;\n  }\n  if (predicate && !predicate(query)) {\n    return false;\n  }\n  return true;\n}\nfunction matchMutation(filters, mutation) {\n  const { exact, status, predicate, mutationKey } = filters;\n  if (mutationKey) {\n    if (!mutation.options.mutationKey) {\n      return false;\n    }\n    if (exact) {\n      if (hashKey(mutation.options.mutationKey) !== hashKey(mutationKey)) {\n        return false;\n      }\n    } else if (!partialMatchKey(mutation.options.mutationKey, mutationKey)) {\n      return false;\n    }\n  }\n  if (status && mutation.state.status !== status) {\n    return false;\n  }\n  if (predicate && !predicate(mutation)) {\n    return false;\n  }\n  return true;\n}\nfunction hashQueryKeyByOptions(queryKey, options) {\n  const hashFn = options?.queryKeyHashFn || hashKey;\n  return hashFn(queryKey);\n}\nfunction hashKey(queryKey) {\n  return JSON.stringify(\n    queryKey,\n    (_, val) => isPlainObject(val) ? Object.keys(val).sort().reduce((result, key) => {\n      result[key] = val[key];\n      return result;\n    }, {}) : val\n  );\n}\nfunction partialMatchKey(a, b) {\n  if (a === b) {\n    return true;\n  }\n  if (typeof a !== typeof b) {\n    return false;\n  }\n  if (a && b && typeof a === \"object\" && typeof b === \"object\") {\n    return Object.keys(b).every((key) => partialMatchKey(a[key], b[key]));\n  }\n  return false;\n}\nvar hasOwn = Object.prototype.hasOwnProperty;\nfunction replaceEqualDeep(a, b) {\n  if (a === b) {\n    return a;\n  }\n  const array = isPlainArray(a) && isPlainArray(b);\n  if (!array && !(isPlainObject(a) && isPlainObject(b))) return b;\n  const aItems = array ? a : Object.keys(a);\n  const aSize = aItems.length;\n  const bItems = array ? b : Object.keys(b);\n  const bSize = bItems.length;\n  const copy = array ? new Array(bSize) : {};\n  let equalItems = 0;\n  for (let i = 0; i < bSize; i++) {\n    const key = array ? i : bItems[i];\n    const aItem = a[key];\n    const bItem = b[key];\n    if (aItem === bItem) {\n      copy[key] = aItem;\n      if (array ? i < aSize : hasOwn.call(a, key)) equalItems++;\n      continue;\n    }\n    if (aItem === null || bItem === null || typeof aItem !== \"object\" || typeof bItem !== \"object\") {\n      copy[key] = bItem;\n      continue;\n    }\n    const v = replaceEqualDeep(aItem, bItem);\n    copy[key] = v;\n    if (v === aItem) equalItems++;\n  }\n  return aSize === bSize && equalItems === aSize ? a : copy;\n}\nfunction shallowEqualObjects(a, b) {\n  if (!b || Object.keys(a).length !== Object.keys(b).length) {\n    return false;\n  }\n  for (const key in a) {\n    if (a[key] !== b[key]) {\n      return false;\n    }\n  }\n  return true;\n}\nfunction isPlainArray(value) {\n  return Array.isArray(value) && value.length === Object.keys(value).length;\n}\nfunction isPlainObject(o) {\n  if (!hasObjectPrototype(o)) {\n    return false;\n  }\n  const ctor = o.constructor;\n  if (ctor === void 0) {\n    return true;\n  }\n  const prot = ctor.prototype;\n  if (!hasObjectPrototype(prot)) {\n    return false;\n  }\n  if (!prot.hasOwnProperty(\"isPrototypeOf\")) {\n    return false;\n  }\n  if (Object.getPrototypeOf(o) !== Object.prototype) {\n    return false;\n  }\n  return true;\n}\nfunction hasObjectPrototype(o) {\n  return Object.prototype.toString.call(o) === \"[object Object]\";\n}\nfunction sleep(timeout) {\n  return new Promise((resolve) => {\n    timeoutManager.setTimeout(resolve, timeout);\n  });\n}\nfunction replaceData(prevData, data, options) {\n  if (typeof options.structuralSharing === \"function\") {\n    return options.structuralSharing(prevData, data);\n  } else if (options.structuralSharing !== false) {\n    if (process.env.NODE_ENV !== \"production\") {\n      try {\n        return replaceEqualDeep(prevData, data);\n      } catch (error) {\n        console.error(\n          `Structural sharing requires data to be JSON serializable. To fix this, turn off structuralSharing or return JSON-serializable data from your queryFn. [${options.queryHash}]: ${error}`\n        );\n        throw error;\n      }\n    }\n    return replaceEqualDeep(prevData, data);\n  }\n  return data;\n}\nfunction keepPreviousData(previousData) {\n  return previousData;\n}\nfunction addToEnd(items, item, max = 0) {\n  const newItems = [...items, item];\n  return max && newItems.length > max ? newItems.slice(1) : newItems;\n}\nfunction addToStart(items, item, max = 0) {\n  const newItems = [item, ...items];\n  return max && newItems.length > max ? newItems.slice(0, -1) : newItems;\n}\nvar skipToken = Symbol();\nfunction ensureQueryFn(options, fetchOptions) {\n  if (process.env.NODE_ENV !== \"production\") {\n    if (options.queryFn === skipToken) {\n      console.error(\n        `Attempted to invoke queryFn when set to skipToken. This is likely a configuration error. Query hash: '${options.queryHash}'`\n      );\n    }\n  }\n  if (!options.queryFn && fetchOptions?.initialPromise) {\n    return () => fetchOptions.initialPromise;\n  }\n  if (!options.queryFn || options.queryFn === skipToken) {\n    return () => Promise.reject(new Error(`Missing queryFn: '${options.queryHash}'`));\n  }\n  return options.queryFn;\n}\nfunction shouldThrowError(throwOnError, params) {\n  if (typeof throwOnError === \"function\") {\n    return throwOnError(...params);\n  }\n  return !!throwOnError;\n}\nexport {\n  addToEnd,\n  addToStart,\n  ensureQueryFn,\n  functionalUpdate,\n  hashKey,\n  hashQueryKeyByOptions,\n  isPlainArray,\n  isPlainObject,\n  isServer,\n  isValidTimeout,\n  keepPreviousData,\n  matchMutation,\n  matchQuery,\n  noop,\n  partialMatchKey,\n  replaceData,\n  replaceEqualDeep,\n  resolveEnabled,\n  resolveStaleTime,\n  shallowEqualObjects,\n  shouldThrowError,\n  skipToken,\n  sleep,\n  timeUntilStale\n};\n//# sourceMappingURL=utils.js.map","// src/focusManager.ts\nimport { Subscribable } from \"./subscribable.js\";\nimport { isServer } from \"./utils.js\";\nvar FocusManager = class extends Subscribable {\n  #focused;\n  #cleanup;\n  #setup;\n  constructor() {\n    super();\n    this.#setup = (onFocus) => {\n      if (!isServer && window.addEventListener) {\n        const listener = () => onFocus();\n        window.addEventListener(\"visibilitychange\", listener, false);\n        return () => {\n          window.removeEventListener(\"visibilitychange\", listener);\n        };\n      }\n      return;\n    };\n  }\n  onSubscribe() {\n    if (!this.#cleanup) {\n      this.setEventListener(this.#setup);\n    }\n  }\n  onUnsubscribe() {\n    if (!this.hasListeners()) {\n      this.#cleanup?.();\n      this.#cleanup = void 0;\n    }\n  }\n  setEventListener(setup) {\n    this.#setup = setup;\n    this.#cleanup?.();\n    this.#cleanup = setup((focused) => {\n      if (typeof focused === \"boolean\") {\n        this.setFocused(focused);\n      } else {\n        this.onFocus();\n      }\n    });\n  }\n  setFocused(focused) {\n    const changed = this.#focused !== focused;\n    if (changed) {\n      this.#focused = focused;\n      this.onFocus();\n    }\n  }\n  onFocus() {\n    const isFocused = this.isFocused();\n    this.listeners.forEach((listener) => {\n      listener(isFocused);\n    });\n  }\n  isFocused() {\n    if (typeof this.#focused === \"boolean\") {\n      return this.#focused;\n    }\n    return globalThis.document?.visibilityState !== \"hidden\";\n  }\n};\nvar focusManager = new FocusManager();\nexport {\n  FocusManager,\n  focusManager\n};\n//# sourceMappingURL=focusManager.js.map","// src/thenable.ts\nimport { noop } from \"./utils.js\";\nfunction pendingThenable() {\n  let resolve;\n  let reject;\n  const thenable = new Promise((_resolve, _reject) => {\n    resolve = _resolve;\n    reject = _reject;\n  });\n  thenable.status = \"pending\";\n  thenable.catch(() => {\n  });\n  function finalize(data) {\n    Object.assign(thenable, data);\n    delete thenable.resolve;\n    delete thenable.reject;\n  }\n  thenable.resolve = (value) => {\n    finalize({\n      status: \"fulfilled\",\n      value\n    });\n    resolve(value);\n  };\n  thenable.reject = (reason) => {\n    finalize({\n      status: \"rejected\",\n      reason\n    });\n    reject(reason);\n  };\n  return thenable;\n}\nfunction tryResolveSync(promise) {\n  let data;\n  promise.then((result) => {\n    data = result;\n    return result;\n  }, noop)?.catch(noop);\n  if (data !== void 0) {\n    return { data };\n  }\n  return void 0;\n}\nexport {\n  pendingThenable,\n  tryResolveSync\n};\n//# sourceMappingURL=thenable.js.map","// src/notifyManager.ts\nimport { systemSetTimeoutZero } from \"./timeoutManager.js\";\nvar defaultScheduler = systemSetTimeoutZero;\nfunction createNotifyManager() {\n  let queue = [];\n  let transactions = 0;\n  let notifyFn = (callback) => {\n    callback();\n  };\n  let batchNotifyFn = (callback) => {\n    callback();\n  };\n  let scheduleFn = defaultScheduler;\n  const schedule = (callback) => {\n    if (transactions) {\n      queue.push(callback);\n    } else {\n      scheduleFn(() => {\n        notifyFn(callback);\n      });\n    }\n  };\n  const flush = () => {\n    const originalQueue = queue;\n    queue = [];\n    if (originalQueue.length) {\n      scheduleFn(() => {\n        batchNotifyFn(() => {\n          originalQueue.forEach((callback) => {\n            notifyFn(callback);\n          });\n        });\n      });\n    }\n  };\n  return {\n    batch: (callback) => {\n      let result;\n      transactions++;\n      try {\n        result = callback();\n      } finally {\n        transactions--;\n        if (!transactions) {\n          flush();\n        }\n      }\n      return result;\n    },\n    /**\n     * All calls to the wrapped function will be batched.\n     */\n    batchCalls: (callback) => {\n      return (...args) => {\n        schedule(() => {\n          callback(...args);\n        });\n      };\n    },\n    schedule,\n    /**\n     * Use this method to set a custom notify function.\n     * This can be used to for example wrap notifications with `React.act` while running tests.\n     */\n    setNotifyFunction: (fn) => {\n      notifyFn = fn;\n    },\n    /**\n     * Use this method to set a custom function to batch notifications together into a single tick.\n     * By default React Query will use the batch function provided by ReactDOM or React Native.\n     */\n    setBatchNotifyFunction: (fn) => {\n      batchNotifyFn = fn;\n    },\n    setScheduler: (fn) => {\n      scheduleFn = fn;\n    }\n  };\n}\nvar notifyManager = createNotifyManager();\nexport {\n  createNotifyManager,\n  defaultScheduler,\n  notifyManager\n};\n//# sourceMappingURL=notifyManager.js.map","// src/onlineManager.ts\nimport { Subscribable } from \"./subscribable.js\";\nimport { isServer } from \"./utils.js\";\nvar OnlineManager = class extends Subscribable {\n  #online = true;\n  #cleanup;\n  #setup;\n  constructor() {\n    super();\n    this.#setup = (onOnline) => {\n      if (!isServer && window.addEventListener) {\n        const onlineListener = () => onOnline(true);\n        const offlineListener = () => onOnline(false);\n        window.addEventListener(\"online\", onlineListener, false);\n        window.addEventListener(\"offline\", offlineListener, false);\n        return () => {\n          window.removeEventListener(\"online\", onlineListener);\n          window.removeEventListener(\"offline\", offlineListener);\n        };\n      }\n      return;\n    };\n  }\n  onSubscribe() {\n    if (!this.#cleanup) {\n      this.setEventListener(this.#setup);\n    }\n  }\n  onUnsubscribe() {\n    if (!this.hasListeners()) {\n      this.#cleanup?.();\n      this.#cleanup = void 0;\n    }\n  }\n  setEventListener(setup) {\n    this.#setup = setup;\n    this.#cleanup?.();\n    this.#cleanup = setup(this.setOnline.bind(this));\n  }\n  setOnline(online) {\n    const changed = this.#online !== online;\n    if (changed) {\n      this.#online = online;\n      this.listeners.forEach((listener) => {\n        listener(online);\n      });\n    }\n  }\n  isOnline() {\n    return this.#online;\n  }\n};\nvar onlineManager = new OnlineManager();\nexport {\n  OnlineManager,\n  onlineManager\n};\n//# sourceMappingURL=onlineManager.js.map","// src/retryer.ts\nimport { focusManager } from \"./focusManager.js\";\nimport { onlineManager } from \"./onlineManager.js\";\nimport { pendingThenable } from \"./thenable.js\";\nimport { isServer, sleep } from \"./utils.js\";\nfunction defaultRetryDelay(failureCount) {\n  return Math.min(1e3 * 2 ** failureCount, 3e4);\n}\nfunction canFetch(networkMode) {\n  return (networkMode ?? \"online\") === \"online\" ? onlineManager.isOnline() : true;\n}\nvar CancelledError = class extends Error {\n  constructor(options) {\n    super(\"CancelledError\");\n    this.revert = options?.revert;\n    this.silent = options?.silent;\n  }\n};\nfunction isCancelledError(value) {\n  return value instanceof CancelledError;\n}\nfunction createRetryer(config) {\n  let isRetryCancelled = false;\n  let failureCount = 0;\n  let continueFn;\n  const thenable = pendingThenable();\n  const isResolved = () => thenable.status !== \"pending\";\n  const cancel = (cancelOptions) => {\n    if (!isResolved()) {\n      const error = new CancelledError(cancelOptions);\n      reject(error);\n      config.onCancel?.(error);\n    }\n  };\n  const cancelRetry = () => {\n    isRetryCancelled = true;\n  };\n  const continueRetry = () => {\n    isRetryCancelled = false;\n  };\n  const canContinue = () => focusManager.isFocused() && (config.networkMode === \"always\" || onlineManager.isOnline()) && config.canRun();\n  const canStart = () => canFetch(config.networkMode) && config.canRun();\n  const resolve = (value) => {\n    if (!isResolved()) {\n      continueFn?.();\n      thenable.resolve(value);\n    }\n  };\n  const reject = (value) => {\n    if (!isResolved()) {\n      continueFn?.();\n      thenable.reject(value);\n    }\n  };\n  const pause = () => {\n    return new Promise((continueResolve) => {\n      continueFn = (value) => {\n        if (isResolved() || canContinue()) {\n          continueResolve(value);\n        }\n      };\n      config.onPause?.();\n    }).then(() => {\n      continueFn = void 0;\n      if (!isResolved()) {\n        config.onContinue?.();\n      }\n    });\n  };\n  const run = () => {\n    if (isResolved()) {\n      return;\n    }\n    let promiseOrValue;\n    const initialPromise = failureCount === 0 ? config.initialPromise : void 0;\n    try {\n      promiseOrValue = initialPromise ?? config.fn();\n    } catch (error) {\n      promiseOrValue = Promise.reject(error);\n    }\n    Promise.resolve(promiseOrValue).then(resolve).catch((error) => {\n      if (isResolved()) {\n        return;\n      }\n      const retry = config.retry ?? (isServer ? 0 : 3);\n      const retryDelay = config.retryDelay ?? defaultRetryDelay;\n      const delay = typeof retryDelay === \"function\" ? retryDelay(failureCount, error) : retryDelay;\n      const shouldRetry = retry === true || typeof retry === \"number\" && failureCount < retry || typeof retry === \"function\" && retry(failureCount, error);\n      if (isRetryCancelled || !shouldRetry) {\n        reject(error);\n        return;\n      }\n      failureCount++;\n      config.onFail?.(failureCount, error);\n      sleep(delay).then(() => {\n        return canContinue() ? void 0 : pause();\n      }).then(() => {\n        if (isRetryCancelled) {\n          reject(error);\n        } else {\n          run();\n        }\n      });\n    });\n  };\n  return {\n    promise: thenable,\n    status: () => thenable.status,\n    cancel,\n    continue: () => {\n      continueFn?.();\n      return thenable;\n    },\n    cancelRetry,\n    continueRetry,\n    canStart,\n    start: () => {\n      if (canStart()) {\n        run();\n      } else {\n        pause().then(run);\n      }\n      return thenable;\n    }\n  };\n}\nexport {\n  CancelledError,\n  canFetch,\n  createRetryer,\n  isCancelledError\n};\n//# sourceMappingURL=retryer.js.map","// src/removable.ts\nimport { timeoutManager } from \"./timeoutManager.js\";\nimport { isServer, isValidTimeout } from \"./utils.js\";\nvar Removable = class {\n  #gcTimeout;\n  destroy() {\n    this.clearGcTimeout();\n  }\n  scheduleGc() {\n    this.clearGcTimeout();\n    if (isValidTimeout(this.gcTime)) {\n      this.#gcTimeout = timeoutManager.setTimeout(() => {\n        this.optionalRemove();\n      }, this.gcTime);\n    }\n  }\n  updateGcTime(newGcTime) {\n    this.gcTime = Math.max(\n      this.gcTime || 0,\n      newGcTime ?? (isServer ? Infinity : 5 * 60 * 1e3)\n    );\n  }\n  clearGcTimeout() {\n    if (this.#gcTimeout) {\n      timeoutManager.clearTimeout(this.#gcTimeout);\n      this.#gcTimeout = void 0;\n    }\n  }\n};\nexport {\n  Removable\n};\n//# sourceMappingURL=removable.js.map","// src/query.ts\nimport {\n  ensureQueryFn,\n  noop,\n  replaceData,\n  resolveEnabled,\n  resolveStaleTime,\n  skipToken,\n  timeUntilStale\n} from \"./utils.js\";\nimport { notifyManager } from \"./notifyManager.js\";\nimport { CancelledError, canFetch, createRetryer } from \"./retryer.js\";\nimport { Removable } from \"./removable.js\";\nvar Query = class extends Removable {\n  #initialState;\n  #revertState;\n  #cache;\n  #client;\n  #retryer;\n  #defaultOptions;\n  #abortSignalConsumed;\n  constructor(config) {\n    super();\n    this.#abortSignalConsumed = false;\n    this.#defaultOptions = config.defaultOptions;\n    this.setOptions(config.options);\n    this.observers = [];\n    this.#client = config.client;\n    this.#cache = this.#client.getQueryCache();\n    this.queryKey = config.queryKey;\n    this.queryHash = config.queryHash;\n    this.#initialState = getDefaultState(this.options);\n    this.state = config.state ?? this.#initialState;\n    this.scheduleGc();\n  }\n  get meta() {\n    return this.options.meta;\n  }\n  get promise() {\n    return this.#retryer?.promise;\n  }\n  setOptions(options) {\n    this.options = { ...this.#defaultOptions, ...options };\n    this.updateGcTime(this.options.gcTime);\n    if (this.state && this.state.data === void 0) {\n      const defaultState = getDefaultState(this.options);\n      if (defaultState.data !== void 0) {\n        this.setData(defaultState.data, {\n          updatedAt: defaultState.dataUpdatedAt,\n          manual: true\n        });\n        this.#initialState = defaultState;\n      }\n    }\n  }\n  optionalRemove() {\n    if (!this.observers.length && this.state.fetchStatus === \"idle\") {\n      this.#cache.remove(this);\n    }\n  }\n  setData(newData, options) {\n    const data = replaceData(this.state.data, newData, this.options);\n    this.#dispatch({\n      data,\n      type: \"success\",\n      dataUpdatedAt: options?.updatedAt,\n      manual: options?.manual\n    });\n    return data;\n  }\n  setState(state, setStateOptions) {\n    this.#dispatch({ type: \"setState\", state, setStateOptions });\n  }\n  cancel(options) {\n    const promise = this.#retryer?.promise;\n    this.#retryer?.cancel(options);\n    return promise ? promise.then(noop).catch(noop) : Promise.resolve();\n  }\n  destroy() {\n    super.destroy();\n    this.cancel({ silent: true });\n  }\n  reset() {\n    this.destroy();\n    this.setState(this.#initialState);\n  }\n  isActive() {\n    return this.observers.some(\n      (observer) => resolveEnabled(observer.options.enabled, this) !== false\n    );\n  }\n  isDisabled() {\n    if (this.getObserversCount() > 0) {\n      return !this.isActive();\n    }\n    return this.options.queryFn === skipToken || this.state.dataUpdateCount + this.state.errorUpdateCount === 0;\n  }\n  isStatic() {\n    if (this.getObserversCount() > 0) {\n      return this.observers.some(\n        (observer) => resolveStaleTime(observer.options.staleTime, this) === \"static\"\n      );\n    }\n    return false;\n  }\n  isStale() {\n    if (this.getObserversCount() > 0) {\n      return this.observers.some(\n        (observer) => observer.getCurrentResult().isStale\n      );\n    }\n    return this.state.data === void 0 || this.state.isInvalidated;\n  }\n  isStaleByTime(staleTime = 0) {\n    if (this.state.data === void 0) {\n      return true;\n    }\n    if (staleTime === \"static\") {\n      return false;\n    }\n    if (this.state.isInvalidated) {\n      return true;\n    }\n    return !timeUntilStale(this.state.dataUpdatedAt, staleTime);\n  }\n  onFocus() {\n    const observer = this.observers.find((x) => x.shouldFetchOnWindowFocus());\n    observer?.refetch({ cancelRefetch: false });\n    this.#retryer?.continue();\n  }\n  onOnline() {\n    const observer = this.observers.find((x) => x.shouldFetchOnReconnect());\n    observer?.refetch({ cancelRefetch: false });\n    this.#retryer?.continue();\n  }\n  addObserver(observer) {\n    if (!this.observers.includes(observer)) {\n      this.observers.push(observer);\n      this.clearGcTimeout();\n      this.#cache.notify({ type: \"observerAdded\", query: this, observer });\n    }\n  }\n  removeObserver(observer) {\n    if (this.observers.includes(observer)) {\n      this.observers = this.observers.filter((x) => x !== observer);\n      if (!this.observers.length) {\n        if (this.#retryer) {\n          if (this.#abortSignalConsumed) {\n            this.#retryer.cancel({ revert: true });\n          } else {\n            this.#retryer.cancelRetry();\n          }\n        }\n        this.scheduleGc();\n      }\n      this.#cache.notify({ type: \"observerRemoved\", query: this, observer });\n    }\n  }\n  getObserversCount() {\n    return this.observers.length;\n  }\n  invalidate() {\n    if (!this.state.isInvalidated) {\n      this.#dispatch({ type: \"invalidate\" });\n    }\n  }\n  async fetch(options, fetchOptions) {\n    if (this.state.fetchStatus !== \"idle\" && // If the promise in the retyer is already rejected, we have to definitely\n    // re-start the fetch; there is a chance that the query is still in a\n    // pending state when that happens\n    this.#retryer?.status() !== \"rejected\") {\n      if (this.state.data !== void 0 && fetchOptions?.cancelRefetch) {\n        this.cancel({ silent: true });\n      } else if (this.#retryer) {\n        this.#retryer.continueRetry();\n        return this.#retryer.promise;\n      }\n    }\n    if (options) {\n      this.setOptions(options);\n    }\n    if (!this.options.queryFn) {\n      const observer = this.observers.find((x) => x.options.queryFn);\n      if (observer) {\n        this.setOptions(observer.options);\n      }\n    }\n    if (process.env.NODE_ENV !== \"production\") {\n      if (!Array.isArray(this.options.queryKey)) {\n        console.error(\n          `As of v4, queryKey needs to be an Array. If you are using a string like 'repoData', please change it to an Array, e.g. ['repoData']`\n        );\n      }\n    }\n    const abortController = new AbortController();\n    const addSignalProperty = (object) => {\n      Object.defineProperty(object, \"signal\", {\n        enumerable: true,\n        get: () => {\n          this.#abortSignalConsumed = true;\n          return abortController.signal;\n        }\n      });\n    };\n    const fetchFn = () => {\n      const queryFn = ensureQueryFn(this.options, fetchOptions);\n      const createQueryFnContext = () => {\n        const queryFnContext2 = {\n          client: this.#client,\n          queryKey: this.queryKey,\n          meta: this.meta\n        };\n        addSignalProperty(queryFnContext2);\n        return queryFnContext2;\n      };\n      const queryFnContext = createQueryFnContext();\n      this.#abortSignalConsumed = false;\n      if (this.options.persister) {\n        return this.options.persister(\n          queryFn,\n          queryFnContext,\n          this\n        );\n      }\n      return queryFn(queryFnContext);\n    };\n    const createFetchContext = () => {\n      const context2 = {\n        fetchOptions,\n        options: this.options,\n        queryKey: this.queryKey,\n        client: this.#client,\n        state: this.state,\n        fetchFn\n      };\n      addSignalProperty(context2);\n      return context2;\n    };\n    const context = createFetchContext();\n    this.options.behavior?.onFetch(context, this);\n    this.#revertState = this.state;\n    if (this.state.fetchStatus === \"idle\" || this.state.fetchMeta !== context.fetchOptions?.meta) {\n      this.#dispatch({ type: \"fetch\", meta: context.fetchOptions?.meta });\n    }\n    this.#retryer = createRetryer({\n      initialPromise: fetchOptions?.initialPromise,\n      fn: context.fetchFn,\n      onCancel: (error) => {\n        if (error instanceof CancelledError && error.revert) {\n          this.setState({\n            ...this.#revertState,\n            fetchStatus: \"idle\"\n          });\n        }\n        abortController.abort();\n      },\n      onFail: (failureCount, error) => {\n        this.#dispatch({ type: \"failed\", failureCount, error });\n      },\n      onPause: () => {\n        this.#dispatch({ type: \"pause\" });\n      },\n      onContinue: () => {\n        this.#dispatch({ type: \"continue\" });\n      },\n      retry: context.options.retry,\n      retryDelay: context.options.retryDelay,\n      networkMode: context.options.networkMode,\n      canRun: () => true\n    });\n    try {\n      const data = await this.#retryer.start();\n      if (data === void 0) {\n        if (process.env.NODE_ENV !== \"production\") {\n          console.error(\n            `Query data cannot be undefined. Please make sure to return a value other than undefined from your query function. Affected query key: ${this.queryHash}`\n          );\n        }\n        throw new Error(`${this.queryHash} data is undefined`);\n      }\n      this.setData(data);\n      this.#cache.config.onSuccess?.(data, this);\n      this.#cache.config.onSettled?.(\n        data,\n        this.state.error,\n        this\n      );\n      return data;\n    } catch (error) {\n      if (error instanceof CancelledError) {\n        if (error.silent) {\n          return this.#retryer.promise;\n        } else if (error.revert) {\n          if (this.state.data === void 0) {\n            throw error;\n          }\n          return this.state.data;\n        }\n      }\n      this.#dispatch({\n        type: \"error\",\n        error\n      });\n      this.#cache.config.onError?.(\n        error,\n        this\n      );\n      this.#cache.config.onSettled?.(\n        this.state.data,\n        error,\n        this\n      );\n      throw error;\n    } finally {\n      this.scheduleGc();\n    }\n  }\n  #dispatch(action) {\n    const reducer = (state) => {\n      switch (action.type) {\n        case \"failed\":\n          return {\n            ...state,\n            fetchFailureCount: action.failureCount,\n            fetchFailureReason: action.error\n          };\n        case \"pause\":\n          return {\n            ...state,\n            fetchStatus: \"paused\"\n          };\n        case \"continue\":\n          return {\n            ...state,\n            fetchStatus: \"fetching\"\n          };\n        case \"fetch\":\n          return {\n            ...state,\n            ...fetchState(state.data, this.options),\n            fetchMeta: action.meta ?? null\n          };\n        case \"success\":\n          const newState = {\n            ...state,\n            data: action.data,\n            dataUpdateCount: state.dataUpdateCount + 1,\n            dataUpdatedAt: action.dataUpdatedAt ?? Date.now(),\n            error: null,\n            isInvalidated: false,\n            status: \"success\",\n            ...!action.manual && {\n              fetchStatus: \"idle\",\n              fetchFailureCount: 0,\n              fetchFailureReason: null\n            }\n          };\n          this.#revertState = action.manual ? newState : void 0;\n          return newState;\n        case \"error\":\n          const error = action.error;\n          return {\n            ...state,\n            error,\n            errorUpdateCount: state.errorUpdateCount + 1,\n            errorUpdatedAt: Date.now(),\n            fetchFailureCount: state.fetchFailureCount + 1,\n            fetchFailureReason: error,\n            fetchStatus: \"idle\",\n            status: \"error\"\n          };\n        case \"invalidate\":\n          return {\n            ...state,\n            isInvalidated: true\n          };\n        case \"setState\":\n          return {\n            ...state,\n            ...action.state\n          };\n      }\n    };\n    this.state = reducer(this.state);\n    notifyManager.batch(() => {\n      this.observers.forEach((observer) => {\n        observer.onQueryUpdate();\n      });\n      this.#cache.notify({ query: this, type: \"updated\", action });\n    });\n  }\n};\nfunction fetchState(data, options) {\n  return {\n    fetchFailureCount: 0,\n    fetchFailureReason: null,\n    fetchStatus: canFetch(options.networkMode) ? \"fetching\" : \"paused\",\n    ...data === void 0 && {\n      error: null,\n      status: \"pending\"\n    }\n  };\n}\nfunction getDefaultState(options) {\n  const data = typeof options.initialData === \"function\" ? options.initialData() : options.initialData;\n  const hasData = data !== void 0;\n  const initialDataUpdatedAt = hasData ? typeof options.initialDataUpdatedAt === \"function\" ? options.initialDataUpdatedAt() : options.initialDataUpdatedAt : 0;\n  return {\n    data,\n    dataUpdateCount: 0,\n    dataUpdatedAt: hasData ? initialDataUpdatedAt ?? Date.now() : 0,\n    error: null,\n    errorUpdateCount: 0,\n    errorUpdatedAt: 0,\n    fetchFailureCount: 0,\n    fetchFailureReason: null,\n    fetchMeta: null,\n    isInvalidated: false,\n    status: hasData ? \"success\" : \"pending\",\n    fetchStatus: \"idle\"\n  };\n}\nexport {\n  Query,\n  fetchState\n};\n//# sourceMappingURL=query.js.map","// src/queryObserver.ts\nimport { focusManager } from \"./focusManager.js\";\nimport { notifyManager } from \"./notifyManager.js\";\nimport { fetchState } from \"./query.js\";\nimport { Subscribable } from \"./subscribable.js\";\nimport { pendingThenable } from \"./thenable.js\";\nimport {\n  isServer,\n  isValidTimeout,\n  noop,\n  replaceData,\n  resolveEnabled,\n  resolveStaleTime,\n  shallowEqualObjects,\n  timeUntilStale\n} from \"./utils.js\";\nimport { timeoutManager } from \"./timeoutManager.js\";\nvar QueryObserver = class extends Subscribable {\n  constructor(client, options) {\n    super();\n    this.options = options;\n    this.#client = client;\n    this.#selectError = null;\n    this.#currentThenable = pendingThenable();\n    this.bindMethods();\n    this.setOptions(options);\n  }\n  #client;\n  #currentQuery = void 0;\n  #currentQueryInitialState = void 0;\n  #currentResult = void 0;\n  #currentResultState;\n  #currentResultOptions;\n  #currentThenable;\n  #selectError;\n  #selectFn;\n  #selectResult;\n  // This property keeps track of the last query with defined data.\n  // It will be used to pass the previous data and query to the placeholder function between renders.\n  #lastQueryWithDefinedData;\n  #staleTimeoutId;\n  #refetchIntervalId;\n  #currentRefetchInterval;\n  #trackedProps = /* @__PURE__ */ new Set();\n  bindMethods() {\n    this.refetch = this.refetch.bind(this);\n  }\n  onSubscribe() {\n    if (this.listeners.size === 1) {\n      this.#currentQuery.addObserver(this);\n      if (shouldFetchOnMount(this.#currentQuery, this.options)) {\n        this.#executeFetch();\n      } else {\n        this.updateResult();\n      }\n      this.#updateTimers();\n    }\n  }\n  onUnsubscribe() {\n    if (!this.hasListeners()) {\n      this.destroy();\n    }\n  }\n  shouldFetchOnReconnect() {\n    return shouldFetchOn(\n      this.#currentQuery,\n      this.options,\n      this.options.refetchOnReconnect\n    );\n  }\n  shouldFetchOnWindowFocus() {\n    return shouldFetchOn(\n      this.#currentQuery,\n      this.options,\n      this.options.refetchOnWindowFocus\n    );\n  }\n  destroy() {\n    this.listeners = /* @__PURE__ */ new Set();\n    this.#clearStaleTimeout();\n    this.#clearRefetchInterval();\n    this.#currentQuery.removeObserver(this);\n  }\n  setOptions(options) {\n    const prevOptions = this.options;\n    const prevQuery = this.#currentQuery;\n    this.options = this.#client.defaultQueryOptions(options);\n    if (this.options.enabled !== void 0 && typeof this.options.enabled !== \"boolean\" && typeof this.options.enabled !== \"function\" && typeof resolveEnabled(this.options.enabled, this.#currentQuery) !== \"boolean\") {\n      throw new Error(\n        \"Expected enabled to be a boolean or a callback that returns a boolean\"\n      );\n    }\n    this.#updateQuery();\n    this.#currentQuery.setOptions(this.options);\n    if (prevOptions._defaulted && !shallowEqualObjects(this.options, prevOptions)) {\n      this.#client.getQueryCache().notify({\n        type: \"observerOptionsUpdated\",\n        query: this.#currentQuery,\n        observer: this\n      });\n    }\n    const mounted = this.hasListeners();\n    if (mounted && shouldFetchOptionally(\n      this.#currentQuery,\n      prevQuery,\n      this.options,\n      prevOptions\n    )) {\n      this.#executeFetch();\n    }\n    this.updateResult();\n    if (mounted && (this.#currentQuery !== prevQuery || resolveEnabled(this.options.enabled, this.#currentQuery) !== resolveEnabled(prevOptions.enabled, this.#currentQuery) || resolveStaleTime(this.options.staleTime, this.#currentQuery) !== resolveStaleTime(prevOptions.staleTime, this.#currentQuery))) {\n      this.#updateStaleTimeout();\n    }\n    const nextRefetchInterval = this.#computeRefetchInterval();\n    if (mounted && (this.#currentQuery !== prevQuery || resolveEnabled(this.options.enabled, this.#currentQuery) !== resolveEnabled(prevOptions.enabled, this.#currentQuery) || nextRefetchInterval !== this.#currentRefetchInterval)) {\n      this.#updateRefetchInterval(nextRefetchInterval);\n    }\n  }\n  getOptimisticResult(options) {\n    const query = this.#client.getQueryCache().build(this.#client, options);\n    const result = this.createResult(query, options);\n    if (shouldAssignObserverCurrentProperties(this, result)) {\n      this.#currentResult = result;\n      this.#currentResultOptions = this.options;\n      this.#currentResultState = this.#currentQuery.state;\n    }\n    return result;\n  }\n  getCurrentResult() {\n    return this.#currentResult;\n  }\n  trackResult(result, onPropTracked) {\n    return new Proxy(result, {\n      get: (target, key) => {\n        this.trackProp(key);\n        onPropTracked?.(key);\n        if (key === \"promise\" && !this.options.experimental_prefetchInRender && this.#currentThenable.status === \"pending\") {\n          this.#currentThenable.reject(\n            new Error(\n              \"experimental_prefetchInRender feature flag is not enabled\"\n            )\n          );\n        }\n        return Reflect.get(target, key);\n      }\n    });\n  }\n  trackProp(key) {\n    this.#trackedProps.add(key);\n  }\n  getCurrentQuery() {\n    return this.#currentQuery;\n  }\n  refetch({ ...options } = {}) {\n    return this.fetch({\n      ...options\n    });\n  }\n  fetchOptimistic(options) {\n    const defaultedOptions = this.#client.defaultQueryOptions(options);\n    const query = this.#client.getQueryCache().build(this.#client, defaultedOptions);\n    return query.fetch().then(() => this.createResult(query, defaultedOptions));\n  }\n  fetch(fetchOptions) {\n    return this.#executeFetch({\n      ...fetchOptions,\n      cancelRefetch: fetchOptions.cancelRefetch ?? true\n    }).then(() => {\n      this.updateResult();\n      return this.#currentResult;\n    });\n  }\n  #executeFetch(fetchOptions) {\n    this.#updateQuery();\n    let promise = this.#currentQuery.fetch(\n      this.options,\n      fetchOptions\n    );\n    if (!fetchOptions?.throwOnError) {\n      promise = promise.catch(noop);\n    }\n    return promise;\n  }\n  #updateStaleTimeout() {\n    this.#clearStaleTimeout();\n    const staleTime = resolveStaleTime(\n      this.options.staleTime,\n      this.#currentQuery\n    );\n    if (isServer || this.#currentResult.isStale || !isValidTimeout(staleTime)) {\n      return;\n    }\n    const time = timeUntilStale(this.#currentResult.dataUpdatedAt, staleTime);\n    const timeout = time + 1;\n    this.#staleTimeoutId = timeoutManager.setTimeout(() => {\n      if (!this.#currentResult.isStale) {\n        this.updateResult();\n      }\n    }, timeout);\n  }\n  #computeRefetchInterval() {\n    return (typeof this.options.refetchInterval === \"function\" ? this.options.refetchInterval(this.#currentQuery) : this.options.refetchInterval) ?? false;\n  }\n  #updateRefetchInterval(nextInterval) {\n    this.#clearRefetchInterval();\n    this.#currentRefetchInterval = nextInterval;\n    if (isServer || resolveEnabled(this.options.enabled, this.#currentQuery) === false || !isValidTimeout(this.#currentRefetchInterval) || this.#currentRefetchInterval === 0) {\n      return;\n    }\n    this.#refetchIntervalId = timeoutManager.setInterval(() => {\n      if (this.options.refetchIntervalInBackground || focusManager.isFocused()) {\n        this.#executeFetch();\n      }\n    }, this.#currentRefetchInterval);\n  }\n  #updateTimers() {\n    this.#updateStaleTimeout();\n    this.#updateRefetchInterval(this.#computeRefetchInterval());\n  }\n  #clearStaleTimeout() {\n    if (this.#staleTimeoutId) {\n      timeoutManager.clearTimeout(this.#staleTimeoutId);\n      this.#staleTimeoutId = void 0;\n    }\n  }\n  #clearRefetchInterval() {\n    if (this.#refetchIntervalId) {\n      timeoutManager.clearInterval(this.#refetchIntervalId);\n      this.#refetchIntervalId = void 0;\n    }\n  }\n  createResult(query, options) {\n    const prevQuery = this.#currentQuery;\n    const prevOptions = this.options;\n    const prevResult = this.#currentResult;\n    const prevResultState = this.#currentResultState;\n    const prevResultOptions = this.#currentResultOptions;\n    const queryChange = query !== prevQuery;\n    const queryInitialState = queryChange ? query.state : this.#currentQueryInitialState;\n    const { state } = query;\n    let newState = { ...state };\n    let isPlaceholderData = false;\n    let data;\n    if (options._optimisticResults) {\n      const mounted = this.hasListeners();\n      const fetchOnMount = !mounted && shouldFetchOnMount(query, options);\n      const fetchOptionally = mounted && shouldFetchOptionally(query, prevQuery, options, prevOptions);\n      if (fetchOnMount || fetchOptionally) {\n        newState = {\n          ...newState,\n          ...fetchState(state.data, query.options)\n        };\n      }\n      if (options._optimisticResults === \"isRestoring\") {\n        newState.fetchStatus = \"idle\";\n      }\n    }\n    let { error, errorUpdatedAt, status } = newState;\n    data = newState.data;\n    let skipSelect = false;\n    if (options.placeholderData !== void 0 && data === void 0 && status === \"pending\") {\n      let placeholderData;\n      if (prevResult?.isPlaceholderData && options.placeholderData === prevResultOptions?.placeholderData) {\n        placeholderData = prevResult.data;\n        skipSelect = true;\n      } else {\n        placeholderData = typeof options.placeholderData === \"function\" ? options.placeholderData(\n          this.#lastQueryWithDefinedData?.state.data,\n          this.#lastQueryWithDefinedData\n        ) : options.placeholderData;\n      }\n      if (placeholderData !== void 0) {\n        status = \"success\";\n        data = replaceData(\n          prevResult?.data,\n          placeholderData,\n          options\n        );\n        isPlaceholderData = true;\n      }\n    }\n    if (options.select && data !== void 0 && !skipSelect) {\n      if (prevResult && data === prevResultState?.data && options.select === this.#selectFn) {\n        data = this.#selectResult;\n      } else {\n        try {\n          this.#selectFn = options.select;\n          data = options.select(data);\n          data = replaceData(prevResult?.data, data, options);\n          this.#selectResult = data;\n          this.#selectError = null;\n        } catch (selectError) {\n          this.#selectError = selectError;\n        }\n      }\n    }\n    if (this.#selectError) {\n      error = this.#selectError;\n      data = this.#selectResult;\n      errorUpdatedAt = Date.now();\n      status = \"error\";\n    }\n    const isFetching = newState.fetchStatus === \"fetching\";\n    const isPending = status === \"pending\";\n    const isError = status === \"error\";\n    const isLoading = isPending && isFetching;\n    const hasData = data !== void 0;\n    const result = {\n      status,\n      fetchStatus: newState.fetchStatus,\n      isPending,\n      isSuccess: status === \"success\",\n      isError,\n      isInitialLoading: isLoading,\n      isLoading,\n      data,\n      dataUpdatedAt: newState.dataUpdatedAt,\n      error,\n      errorUpdatedAt,\n      failureCount: newState.fetchFailureCount,\n      failureReason: newState.fetchFailureReason,\n      errorUpdateCount: newState.errorUpdateCount,\n      isFetched: newState.dataUpdateCount > 0 || newState.errorUpdateCount > 0,\n      isFetchedAfterMount: newState.dataUpdateCount > queryInitialState.dataUpdateCount || newState.errorUpdateCount > queryInitialState.errorUpdateCount,\n      isFetching,\n      isRefetching: isFetching && !isPending,\n      isLoadingError: isError && !hasData,\n      isPaused: newState.fetchStatus === \"paused\",\n      isPlaceholderData,\n      isRefetchError: isError && hasData,\n      isStale: isStale(query, options),\n      refetch: this.refetch,\n      promise: this.#currentThenable,\n      isEnabled: resolveEnabled(options.enabled, query) !== false\n    };\n    const nextResult = result;\n    if (this.options.experimental_prefetchInRender) {\n      const finalizeThenableIfPossible = (thenable) => {\n        if (nextResult.status === \"error\") {\n          thenable.reject(nextResult.error);\n        } else if (nextResult.data !== void 0) {\n          thenable.resolve(nextResult.data);\n        }\n      };\n      const recreateThenable = () => {\n        const pending = this.#currentThenable = nextResult.promise = pendingThenable();\n        finalizeThenableIfPossible(pending);\n      };\n      const prevThenable = this.#currentThenable;\n      switch (prevThenable.status) {\n        case \"pending\":\n          if (query.queryHash === prevQuery.queryHash) {\n            finalizeThenableIfPossible(prevThenable);\n          }\n          break;\n        case \"fulfilled\":\n          if (nextResult.status === \"error\" || nextResult.data !== prevThenable.value) {\n            recreateThenable();\n          }\n          break;\n        case \"rejected\":\n          if (nextResult.status !== \"error\" || nextResult.error !== prevThenable.reason) {\n            recreateThenable();\n          }\n          break;\n      }\n    }\n    return nextResult;\n  }\n  updateResult() {\n    const prevResult = this.#currentResult;\n    const nextResult = this.createResult(this.#currentQuery, this.options);\n    this.#currentResultState = this.#currentQuery.state;\n    this.#currentResultOptions = this.options;\n    if (this.#currentResultState.data !== void 0) {\n      this.#lastQueryWithDefinedData = this.#currentQuery;\n    }\n    if (shallowEqualObjects(nextResult, prevResult)) {\n      return;\n    }\n    this.#currentResult = nextResult;\n    const shouldNotifyListeners = () => {\n      if (!prevResult) {\n        return true;\n      }\n      const { notifyOnChangeProps } = this.options;\n      const notifyOnChangePropsValue = typeof notifyOnChangeProps === \"function\" ? notifyOnChangeProps() : notifyOnChangeProps;\n      if (notifyOnChangePropsValue === \"all\" || !notifyOnChangePropsValue && !this.#trackedProps.size) {\n        return true;\n      }\n      const includedProps = new Set(\n        notifyOnChangePropsValue ?? this.#trackedProps\n      );\n      if (this.options.throwOnError) {\n        includedProps.add(\"error\");\n      }\n      return Object.keys(this.#currentResult).some((key) => {\n        const typedKey = key;\n        const changed = this.#currentResult[typedKey] !== prevResult[typedKey];\n        return changed && includedProps.has(typedKey);\n      });\n    };\n    this.#notify({ listeners: shouldNotifyListeners() });\n  }\n  #updateQuery() {\n    const query = this.#client.getQueryCache().build(this.#client, this.options);\n    if (query === this.#currentQuery) {\n      return;\n    }\n    const prevQuery = this.#currentQuery;\n    this.#currentQuery = query;\n    this.#currentQueryInitialState = query.state;\n    if (this.hasListeners()) {\n      prevQuery?.removeObserver(this);\n      query.addObserver(this);\n    }\n  }\n  onQueryUpdate() {\n    this.updateResult();\n    if (this.hasListeners()) {\n      this.#updateTimers();\n    }\n  }\n  #notify(notifyOptions) {\n    notifyManager.batch(() => {\n      if (notifyOptions.listeners) {\n        this.listeners.forEach((listener) => {\n          listener(this.#currentResult);\n        });\n      }\n      this.#client.getQueryCache().notify({\n        query: this.#currentQuery,\n        type: \"observerResultsUpdated\"\n      });\n    });\n  }\n};\nfunction shouldLoadOnMount(query, options) {\n  return resolveEnabled(options.enabled, query) !== false && query.state.data === void 0 && !(query.state.status === \"error\" && options.retryOnMount === false);\n}\nfunction shouldFetchOnMount(query, options) {\n  return shouldLoadOnMount(query, options) || query.state.data !== void 0 && shouldFetchOn(query, options, options.refetchOnMount);\n}\nfunction shouldFetchOn(query, options, field) {\n  if (resolveEnabled(options.enabled, query) !== false && resolveStaleTime(options.staleTime, query) !== \"static\") {\n    const value = typeof field === \"function\" ? field(query) : field;\n    return value === \"always\" || value !== false && isStale(query, options);\n  }\n  return false;\n}\nfunction shouldFetchOptionally(query, prevQuery, options, prevOptions) {\n  return (query !== prevQuery || resolveEnabled(prevOptions.enabled, query) === false) && (!options.suspense || query.state.status !== \"error\") && isStale(query, options);\n}\nfunction isStale(query, options) {\n  return resolveEnabled(options.enabled, query) !== false && query.isStaleByTime(resolveStaleTime(options.staleTime, query));\n}\nfunction shouldAssignObserverCurrentProperties(observer, optimisticResult) {\n  if (!shallowEqualObjects(observer.getCurrentResult(), optimisticResult)) {\n    return true;\n  }\n  return false;\n}\nexport {\n  QueryObserver\n};\n//# sourceMappingURL=queryObserver.js.map","// src/infiniteQueryBehavior.ts\nimport { addToEnd, addToStart, ensureQueryFn } from \"./utils.js\";\nfunction infiniteQueryBehavior(pages) {\n  return {\n    onFetch: (context, query) => {\n      const options = context.options;\n      const direction = context.fetchOptions?.meta?.fetchMore?.direction;\n      const oldPages = context.state.data?.pages || [];\n      const oldPageParams = context.state.data?.pageParams || [];\n      let result = { pages: [], pageParams: [] };\n      let currentPage = 0;\n      const fetchFn = async () => {\n        let cancelled = false;\n        const addSignalProperty = (object) => {\n          Object.defineProperty(object, \"signal\", {\n            enumerable: true,\n            get: () => {\n              if (context.signal.aborted) {\n                cancelled = true;\n              } else {\n                context.signal.addEventListener(\"abort\", () => {\n                  cancelled = true;\n                });\n              }\n              return context.signal;\n            }\n          });\n        };\n        const queryFn = ensureQueryFn(context.options, context.fetchOptions);\n        const fetchPage = async (data, param, previous) => {\n          if (cancelled) {\n            return Promise.reject();\n          }\n          if (param == null && data.pages.length) {\n            return Promise.resolve(data);\n          }\n          const createQueryFnContext = () => {\n            const queryFnContext2 = {\n              client: context.client,\n              queryKey: context.queryKey,\n              pageParam: param,\n              direction: previous ? \"backward\" : \"forward\",\n              meta: context.options.meta\n            };\n            addSignalProperty(queryFnContext2);\n            return queryFnContext2;\n          };\n          const queryFnContext = createQueryFnContext();\n          const page = await queryFn(queryFnContext);\n          const { maxPages } = context.options;\n          const addTo = previous ? addToStart : addToEnd;\n          return {\n            pages: addTo(data.pages, page, maxPages),\n            pageParams: addTo(data.pageParams, param, maxPages)\n          };\n        };\n        if (direction && oldPages.length) {\n          const previous = direction === \"backward\";\n          const pageParamFn = previous ? getPreviousPageParam : getNextPageParam;\n          const oldData = {\n            pages: oldPages,\n            pageParams: oldPageParams\n          };\n          const param = pageParamFn(options, oldData);\n          result = await fetchPage(oldData, param, previous);\n        } else {\n          const remainingPages = pages ?? oldPages.length;\n          do {\n            const param = currentPage === 0 ? oldPageParams[0] ?? options.initialPageParam : getNextPageParam(options, result);\n            if (currentPage > 0 && param == null) {\n              break;\n            }\n            result = await fetchPage(result, param);\n            currentPage++;\n          } while (currentPage < remainingPages);\n        }\n        return result;\n      };\n      if (context.options.persister) {\n        context.fetchFn = () => {\n          return context.options.persister?.(\n            fetchFn,\n            {\n              client: context.client,\n              queryKey: context.queryKey,\n              meta: context.options.meta,\n              signal: context.signal\n            },\n            query\n          );\n        };\n      } else {\n        context.fetchFn = fetchFn;\n      }\n    }\n  };\n}\nfunction getNextPageParam(options, { pages, pageParams }) {\n  const lastIndex = pages.length - 1;\n  return pages.length > 0 ? options.getNextPageParam(\n    pages[lastIndex],\n    pages,\n    pageParams[lastIndex],\n    pageParams\n  ) : void 0;\n}\nfunction getPreviousPageParam(options, { pages, pageParams }) {\n  return pages.length > 0 ? options.getPreviousPageParam?.(pages[0], pages, pageParams[0], pageParams) : void 0;\n}\nfunction hasNextPage(options, data) {\n  if (!data) return false;\n  return getNextPageParam(options, data) != null;\n}\nfunction hasPreviousPage(options, data) {\n  if (!data || !options.getPreviousPageParam) return false;\n  return getPreviousPageParam(options, data) != null;\n}\nexport {\n  hasNextPage,\n  hasPreviousPage,\n  infiniteQueryBehavior\n};\n//# sourceMappingURL=infiniteQueryBehavior.js.map","// src/mutation.ts\nimport { notifyManager } from \"./notifyManager.js\";\nimport { Removable } from \"./removable.js\";\nimport { createRetryer } from \"./retryer.js\";\nvar Mutation = class extends Removable {\n  #client;\n  #observers;\n  #mutationCache;\n  #retryer;\n  constructor(config) {\n    super();\n    this.#client = config.client;\n    this.mutationId = config.mutationId;\n    this.#mutationCache = config.mutationCache;\n    this.#observers = [];\n    this.state = config.state || getDefaultState();\n    this.setOptions(config.options);\n    this.scheduleGc();\n  }\n  setOptions(options) {\n    this.options = options;\n    this.updateGcTime(this.options.gcTime);\n  }\n  get meta() {\n    return this.options.meta;\n  }\n  addObserver(observer) {\n    if (!this.#observers.includes(observer)) {\n      this.#observers.push(observer);\n      this.clearGcTimeout();\n      this.#mutationCache.notify({\n        type: \"observerAdded\",\n        mutation: this,\n        observer\n      });\n    }\n  }\n  removeObserver(observer) {\n    this.#observers = this.#observers.filter((x) => x !== observer);\n    this.scheduleGc();\n    this.#mutationCache.notify({\n      type: \"observerRemoved\",\n      mutation: this,\n      observer\n    });\n  }\n  optionalRemove() {\n    if (!this.#observers.length) {\n      if (this.state.status === \"pending\") {\n        this.scheduleGc();\n      } else {\n        this.#mutationCache.remove(this);\n      }\n    }\n  }\n  continue() {\n    return this.#retryer?.continue() ?? // continuing a mutation assumes that variables are set, mutation must have been dehydrated before\n    this.execute(this.state.variables);\n  }\n  async execute(variables) {\n    const onContinue = () => {\n      this.#dispatch({ type: \"continue\" });\n    };\n    const mutationFnContext = {\n      client: this.#client,\n      meta: this.options.meta,\n      mutationKey: this.options.mutationKey\n    };\n    this.#retryer = createRetryer({\n      fn: () => {\n        if (!this.options.mutationFn) {\n          return Promise.reject(new Error(\"No mutationFn found\"));\n        }\n        return this.options.mutationFn(variables, mutationFnContext);\n      },\n      onFail: (failureCount, error) => {\n        this.#dispatch({ type: \"failed\", failureCount, error });\n      },\n      onPause: () => {\n        this.#dispatch({ type: \"pause\" });\n      },\n      onContinue,\n      retry: this.options.retry ?? 0,\n      retryDelay: this.options.retryDelay,\n      networkMode: this.options.networkMode,\n      canRun: () => this.#mutationCache.canRun(this)\n    });\n    const restored = this.state.status === \"pending\";\n    const isPaused = !this.#retryer.canStart();\n    try {\n      if (restored) {\n        onContinue();\n      } else {\n        this.#dispatch({ type: \"pending\", variables, isPaused });\n        await this.#mutationCache.config.onMutate?.(\n          variables,\n          this,\n          mutationFnContext\n        );\n        const context = await this.options.onMutate?.(\n          variables,\n          mutationFnContext\n        );\n        if (context !== this.state.context) {\n          this.#dispatch({\n            type: \"pending\",\n            context,\n            variables,\n            isPaused\n          });\n        }\n      }\n      const data = await this.#retryer.start();\n      await this.#mutationCache.config.onSuccess?.(\n        data,\n        variables,\n        this.state.context,\n        this,\n        mutationFnContext\n      );\n      await this.options.onSuccess?.(\n        data,\n        variables,\n        this.state.context,\n        mutationFnContext\n      );\n      await this.#mutationCache.config.onSettled?.(\n        data,\n        null,\n        this.state.variables,\n        this.state.context,\n        this,\n        mutationFnContext\n      );\n      await this.options.onSettled?.(\n        data,\n        null,\n        variables,\n        this.state.context,\n        mutationFnContext\n      );\n      this.#dispatch({ type: \"success\", data });\n      return data;\n    } catch (error) {\n      try {\n        await this.#mutationCache.config.onError?.(\n          error,\n          variables,\n          this.state.context,\n          this,\n          mutationFnContext\n        );\n        await this.options.onError?.(\n          error,\n          variables,\n          this.state.context,\n          mutationFnContext\n        );\n        await this.#mutationCache.config.onSettled?.(\n          void 0,\n          error,\n          this.state.variables,\n          this.state.context,\n          this,\n          mutationFnContext\n        );\n        await this.options.onSettled?.(\n          void 0,\n          error,\n          variables,\n          this.state.context,\n          mutationFnContext\n        );\n        throw error;\n      } finally {\n        this.#dispatch({ type: \"error\", error });\n      }\n    } finally {\n      this.#mutationCache.runNext(this);\n    }\n  }\n  #dispatch(action) {\n    const reducer = (state) => {\n      switch (action.type) {\n        case \"failed\":\n          return {\n            ...state,\n            failureCount: action.failureCount,\n            failureReason: action.error\n          };\n        case \"pause\":\n          return {\n            ...state,\n            isPaused: true\n          };\n        case \"continue\":\n          return {\n            ...state,\n            isPaused: false\n          };\n        case \"pending\":\n          return {\n            ...state,\n            context: action.context,\n            data: void 0,\n            failureCount: 0,\n            failureReason: null,\n            error: null,\n            isPaused: action.isPaused,\n            status: \"pending\",\n            variables: action.variables,\n            submittedAt: Date.now()\n          };\n        case \"success\":\n          return {\n            ...state,\n            data: action.data,\n            failureCount: 0,\n            failureReason: null,\n            error: null,\n            status: \"success\",\n            isPaused: false\n          };\n        case \"error\":\n          return {\n            ...state,\n            data: void 0,\n            error: action.error,\n            failureCount: state.failureCount + 1,\n            failureReason: action.error,\n            isPaused: false,\n            status: \"error\"\n          };\n      }\n    };\n    this.state = reducer(this.state);\n    notifyManager.batch(() => {\n      this.#observers.forEach((observer) => {\n        observer.onMutationUpdate(action);\n      });\n      this.#mutationCache.notify({\n        mutation: this,\n        type: \"updated\",\n        action\n      });\n    });\n  }\n};\nfunction getDefaultState() {\n  return {\n    context: void 0,\n    data: void 0,\n    error: null,\n    failureCount: 0,\n    failureReason: null,\n    isPaused: false,\n    status: \"idle\",\n    variables: void 0,\n    submittedAt: 0\n  };\n}\nexport {\n  Mutation,\n  getDefaultState\n};\n//# sourceMappingURL=mutation.js.map","// src/mutationCache.ts\nimport { notifyManager } from \"./notifyManager.js\";\nimport { Mutation } from \"./mutation.js\";\nimport { matchMutation, noop } from \"./utils.js\";\nimport { Subscribable } from \"./subscribable.js\";\nvar MutationCache = class extends Subscribable {\n  constructor(config = {}) {\n    super();\n    this.config = config;\n    this.#mutations = /* @__PURE__ */ new Set();\n    this.#scopes = /* @__PURE__ */ new Map();\n    this.#mutationId = 0;\n  }\n  #mutations;\n  #scopes;\n  #mutationId;\n  build(client, options, state) {\n    const mutation = new Mutation({\n      client,\n      mutationCache: this,\n      mutationId: ++this.#mutationId,\n      options: client.defaultMutationOptions(options),\n      state\n    });\n    this.add(mutation);\n    return mutation;\n  }\n  add(mutation) {\n    this.#mutations.add(mutation);\n    const scope = scopeFor(mutation);\n    if (typeof scope === \"string\") {\n      const scopedMutations = this.#scopes.get(scope);\n      if (scopedMutations) {\n        scopedMutations.push(mutation);\n      } else {\n        this.#scopes.set(scope, [mutation]);\n      }\n    }\n    this.notify({ type: \"added\", mutation });\n  }\n  remove(mutation) {\n    if (this.#mutations.delete(mutation)) {\n      const scope = scopeFor(mutation);\n      if (typeof scope === \"string\") {\n        const scopedMutations = this.#scopes.get(scope);\n        if (scopedMutations) {\n          if (scopedMutations.length > 1) {\n            const index = scopedMutations.indexOf(mutation);\n            if (index !== -1) {\n              scopedMutations.splice(index, 1);\n            }\n          } else if (scopedMutations[0] === mutation) {\n            this.#scopes.delete(scope);\n          }\n        }\n      }\n    }\n    this.notify({ type: \"removed\", mutation });\n  }\n  canRun(mutation) {\n    const scope = scopeFor(mutation);\n    if (typeof scope === \"string\") {\n      const mutationsWithSameScope = this.#scopes.get(scope);\n      const firstPendingMutation = mutationsWithSameScope?.find(\n        (m) => m.state.status === \"pending\"\n      );\n      return !firstPendingMutation || firstPendingMutation === mutation;\n    } else {\n      return true;\n    }\n  }\n  runNext(mutation) {\n    const scope = scopeFor(mutation);\n    if (typeof scope === \"string\") {\n      const foundMutation = this.#scopes.get(scope)?.find((m) => m !== mutation && m.state.isPaused);\n      return foundMutation?.continue() ?? Promise.resolve();\n    } else {\n      return Promise.resolve();\n    }\n  }\n  clear() {\n    notifyManager.batch(() => {\n      this.#mutations.forEach((mutation) => {\n        this.notify({ type: \"removed\", mutation });\n      });\n      this.#mutations.clear();\n      this.#scopes.clear();\n    });\n  }\n  getAll() {\n    return Array.from(this.#mutations);\n  }\n  find(filters) {\n    const defaultedFilters = { exact: true, ...filters };\n    return this.getAll().find(\n      (mutation) => matchMutation(defaultedFilters, mutation)\n    );\n  }\n  findAll(filters = {}) {\n    return this.getAll().filter((mutation) => matchMutation(filters, mutation));\n  }\n  notify(event) {\n    notifyManager.batch(() => {\n      this.listeners.forEach((listener) => {\n        listener(event);\n      });\n    });\n  }\n  resumePausedMutations() {\n    const pausedMutations = this.getAll().filter((x) => x.state.isPaused);\n    return notifyManager.batch(\n      () => Promise.all(\n        pausedMutations.map((mutation) => mutation.continue().catch(noop))\n      )\n    );\n  }\n};\nfunction scopeFor(mutation) {\n  return mutation.options.scope?.id;\n}\nexport {\n  MutationCache\n};\n//# sourceMappingURL=mutationCache.js.map","// src/mutationObserver.ts\nimport { getDefaultState } from \"./mutation.js\";\nimport { notifyManager } from \"./notifyManager.js\";\nimport { Subscribable } from \"./subscribable.js\";\nimport { hashKey, shallowEqualObjects } from \"./utils.js\";\nvar MutationObserver = class extends Subscribable {\n  #client;\n  #currentResult = void 0;\n  #currentMutation;\n  #mutateOptions;\n  constructor(client, options) {\n    super();\n    this.#client = client;\n    this.setOptions(options);\n    this.bindMethods();\n    this.#updateResult();\n  }\n  bindMethods() {\n    this.mutate = this.mutate.bind(this);\n    this.reset = this.reset.bind(this);\n  }\n  setOptions(options) {\n    const prevOptions = this.options;\n    this.options = this.#client.defaultMutationOptions(options);\n    if (!shallowEqualObjects(this.options, prevOptions)) {\n      this.#client.getMutationCache().notify({\n        type: \"observerOptionsUpdated\",\n        mutation: this.#currentMutation,\n        observer: this\n      });\n    }\n    if (prevOptions?.mutationKey && this.options.mutationKey && hashKey(prevOptions.mutationKey) !== hashKey(this.options.mutationKey)) {\n      this.reset();\n    } else if (this.#currentMutation?.state.status === \"pending\") {\n      this.#currentMutation.setOptions(this.options);\n    }\n  }\n  onUnsubscribe() {\n    if (!this.hasListeners()) {\n      this.#currentMutation?.removeObserver(this);\n    }\n  }\n  onMutationUpdate(action) {\n    this.#updateResult();\n    this.#notify(action);\n  }\n  getCurrentResult() {\n    return this.#currentResult;\n  }\n  reset() {\n    this.#currentMutation?.removeObserver(this);\n    this.#currentMutation = void 0;\n    this.#updateResult();\n    this.#notify();\n  }\n  mutate(variables, options) {\n    this.#mutateOptions = options;\n    this.#currentMutation?.removeObserver(this);\n    this.#currentMutation = this.#client.getMutationCache().build(this.#client, this.options);\n    this.#currentMutation.addObserver(this);\n    return this.#currentMutation.execute(variables);\n  }\n  #updateResult() {\n    const state = this.#currentMutation?.state ?? getDefaultState();\n    this.#currentResult = {\n      ...state,\n      isPending: state.status === \"pending\",\n      isSuccess: state.status === \"success\",\n      isError: state.status === \"error\",\n      isIdle: state.status === \"idle\",\n      mutate: this.mutate,\n      reset: this.reset\n    };\n  }\n  #notify(action) {\n    notifyManager.batch(() => {\n      if (this.#mutateOptions && this.hasListeners()) {\n        const variables = this.#currentResult.variables;\n        const onMutateResult = this.#currentResult.context;\n        const context = {\n          client: this.#client,\n          meta: this.options.meta,\n          mutationKey: this.options.mutationKey\n        };\n        if (action?.type === \"success\") {\n          this.#mutateOptions.onSuccess?.(\n            action.data,\n            variables,\n            onMutateResult,\n            context\n          );\n          this.#mutateOptions.onSettled?.(\n            action.data,\n            null,\n            variables,\n            onMutateResult,\n            context\n          );\n        } else if (action?.type === \"error\") {\n          this.#mutateOptions.onError?.(\n            action.error,\n            variables,\n            onMutateResult,\n            context\n          );\n          this.#mutateOptions.onSettled?.(\n            void 0,\n            action.error,\n            variables,\n            onMutateResult,\n            context\n          );\n        }\n      }\n      this.listeners.forEach((listener) => {\n        listener(this.#currentResult);\n      });\n    });\n  }\n};\nexport {\n  MutationObserver\n};\n//# sourceMappingURL=mutationObserver.js.map","// src/queryCache.ts\nimport { hashQueryKeyByOptions, matchQuery } from \"./utils.js\";\nimport { Query } from \"./query.js\";\nimport { notifyManager } from \"./notifyManager.js\";\nimport { Subscribable } from \"./subscribable.js\";\nvar QueryCache = class extends Subscribable {\n  constructor(config = {}) {\n    super();\n    this.config = config;\n    this.#queries = /* @__PURE__ */ new Map();\n  }\n  #queries;\n  build(client, options, state) {\n    const queryKey = options.queryKey;\n    const queryHash = options.queryHash ?? hashQueryKeyByOptions(queryKey, options);\n    let query = this.get(queryHash);\n    if (!query) {\n      query = new Query({\n        client,\n        queryKey,\n        queryHash,\n        options: client.defaultQueryOptions(options),\n        state,\n        defaultOptions: client.getQueryDefaults(queryKey)\n      });\n      this.add(query);\n    }\n    return query;\n  }\n  add(query) {\n    if (!this.#queries.has(query.queryHash)) {\n      this.#queries.set(query.queryHash, query);\n      this.notify({\n        type: \"added\",\n        query\n      });\n    }\n  }\n  remove(query) {\n    const queryInMap = this.#queries.get(query.queryHash);\n    if (queryInMap) {\n      query.destroy();\n      if (queryInMap === query) {\n        this.#queries.delete(query.queryHash);\n      }\n      this.notify({ type: \"removed\", query });\n    }\n  }\n  clear() {\n    notifyManager.batch(() => {\n      this.getAll().forEach((query) => {\n        this.remove(query);\n      });\n    });\n  }\n  get(queryHash) {\n    return this.#queries.get(queryHash);\n  }\n  getAll() {\n    return [...this.#queries.values()];\n  }\n  find(filters) {\n    const defaultedFilters = { exact: true, ...filters };\n    return this.getAll().find(\n      (query) => matchQuery(defaultedFilters, query)\n    );\n  }\n  findAll(filters = {}) {\n    const queries = this.getAll();\n    return Object.keys(filters).length > 0 ? queries.filter((query) => matchQuery(filters, query)) : queries;\n  }\n  notify(event) {\n    notifyManager.batch(() => {\n      this.listeners.forEach((listener) => {\n        listener(event);\n      });\n    });\n  }\n  onFocus() {\n    notifyManager.batch(() => {\n      this.getAll().forEach((query) => {\n        query.onFocus();\n      });\n    });\n  }\n  onOnline() {\n    notifyManager.batch(() => {\n      this.getAll().forEach((query) => {\n        query.onOnline();\n      });\n    });\n  }\n};\nexport {\n  QueryCache\n};\n//# sourceMappingURL=queryCache.js.map","// src/queryClient.ts\nimport {\n  functionalUpdate,\n  hashKey,\n  hashQueryKeyByOptions,\n  noop,\n  partialMatchKey,\n  resolveStaleTime,\n  skipToken\n} from \"./utils.js\";\nimport { QueryCache } from \"./queryCache.js\";\nimport { MutationCache } from \"./mutationCache.js\";\nimport { focusManager } from \"./focusManager.js\";\nimport { onlineManager } from \"./onlineManager.js\";\nimport { notifyManager } from \"./notifyManager.js\";\nimport { infiniteQueryBehavior } from \"./infiniteQueryBehavior.js\";\nvar QueryClient = class {\n  #queryCache;\n  #mutationCache;\n  #defaultOptions;\n  #queryDefaults;\n  #mutationDefaults;\n  #mountCount;\n  #unsubscribeFocus;\n  #unsubscribeOnline;\n  constructor(config = {}) {\n    this.#queryCache = config.queryCache || new QueryCache();\n    this.#mutationCache = config.mutationCache || new MutationCache();\n    this.#defaultOptions = config.defaultOptions || {};\n    this.#queryDefaults = /* @__PURE__ */ new Map();\n    this.#mutationDefaults = /* @__PURE__ */ new Map();\n    this.#mountCount = 0;\n  }\n  mount() {\n    this.#mountCount++;\n    if (this.#mountCount !== 1) return;\n    this.#unsubscribeFocus = focusManager.subscribe(async (focused) => {\n      if (focused) {\n        await this.resumePausedMutations();\n        this.#queryCache.onFocus();\n      }\n    });\n    this.#unsubscribeOnline = onlineManager.subscribe(async (online) => {\n      if (online) {\n        await this.resumePausedMutations();\n        this.#queryCache.onOnline();\n      }\n    });\n  }\n  unmount() {\n    this.#mountCount--;\n    if (this.#mountCount !== 0) return;\n    this.#unsubscribeFocus?.();\n    this.#unsubscribeFocus = void 0;\n    this.#unsubscribeOnline?.();\n    this.#unsubscribeOnline = void 0;\n  }\n  isFetching(filters) {\n    return this.#queryCache.findAll({ ...filters, fetchStatus: \"fetching\" }).length;\n  }\n  isMutating(filters) {\n    return this.#mutationCache.findAll({ ...filters, status: \"pending\" }).length;\n  }\n  /**\n   * Imperative (non-reactive) way to retrieve data for a QueryKey.\n   * Should only be used in callbacks or functions where reading the latest data is necessary, e.g. for optimistic updates.\n   *\n   * Hint: Do not use this function inside a component, because it won't receive updates.\n   * Use `useQuery` to create a `QueryObserver` that subscribes to changes.\n   */\n  getQueryData(queryKey) {\n    const options = this.defaultQueryOptions({ queryKey });\n    return this.#queryCache.get(options.queryHash)?.state.data;\n  }\n  ensureQueryData(options) {\n    const defaultedOptions = this.defaultQueryOptions(options);\n    const query = this.#queryCache.build(this, defaultedOptions);\n    const cachedData = query.state.data;\n    if (cachedData === void 0) {\n      return this.fetchQuery(options);\n    }\n    if (options.revalidateIfStale && query.isStaleByTime(resolveStaleTime(defaultedOptions.staleTime, query))) {\n      void this.prefetchQuery(defaultedOptions);\n    }\n    return Promise.resolve(cachedData);\n  }\n  getQueriesData(filters) {\n    return this.#queryCache.findAll(filters).map(({ queryKey, state }) => {\n      const data = state.data;\n      return [queryKey, data];\n    });\n  }\n  setQueryData(queryKey, updater, options) {\n    const defaultedOptions = this.defaultQueryOptions({ queryKey });\n    const query = this.#queryCache.get(\n      defaultedOptions.queryHash\n    );\n    const prevData = query?.state.data;\n    const data = functionalUpdate(updater, prevData);\n    if (data === void 0) {\n      return void 0;\n    }\n    return this.#queryCache.build(this, defaultedOptions).setData(data, { ...options, manual: true });\n  }\n  setQueriesData(filters, updater, options) {\n    return notifyManager.batch(\n      () => this.#queryCache.findAll(filters).map(({ queryKey }) => [\n        queryKey,\n        this.setQueryData(queryKey, updater, options)\n      ])\n    );\n  }\n  getQueryState(queryKey) {\n    const options = this.defaultQueryOptions({ queryKey });\n    return this.#queryCache.get(\n      options.queryHash\n    )?.state;\n  }\n  removeQueries(filters) {\n    const queryCache = this.#queryCache;\n    notifyManager.batch(() => {\n      queryCache.findAll(filters).forEach((query) => {\n        queryCache.remove(query);\n      });\n    });\n  }\n  resetQueries(filters, options) {\n    const queryCache = this.#queryCache;\n    return notifyManager.batch(() => {\n      queryCache.findAll(filters).forEach((query) => {\n        query.reset();\n      });\n      return this.refetchQueries(\n        {\n          type: \"active\",\n          ...filters\n        },\n        options\n      );\n    });\n  }\n  cancelQueries(filters, cancelOptions = {}) {\n    const defaultedCancelOptions = { revert: true, ...cancelOptions };\n    const promises = notifyManager.batch(\n      () => this.#queryCache.findAll(filters).map((query) => query.cancel(defaultedCancelOptions))\n    );\n    return Promise.all(promises).then(noop).catch(noop);\n  }\n  invalidateQueries(filters, options = {}) {\n    return notifyManager.batch(() => {\n      this.#queryCache.findAll(filters).forEach((query) => {\n        query.invalidate();\n      });\n      if (filters?.refetchType === \"none\") {\n        return Promise.resolve();\n      }\n      return this.refetchQueries(\n        {\n          ...filters,\n          type: filters?.refetchType ?? filters?.type ?? \"active\"\n        },\n        options\n      );\n    });\n  }\n  refetchQueries(filters, options = {}) {\n    const fetchOptions = {\n      ...options,\n      cancelRefetch: options.cancelRefetch ?? true\n    };\n    const promises = notifyManager.batch(\n      () => this.#queryCache.findAll(filters).filter((query) => !query.isDisabled() && !query.isStatic()).map((query) => {\n        let promise = query.fetch(void 0, fetchOptions);\n        if (!fetchOptions.throwOnError) {\n          promise = promise.catch(noop);\n        }\n        return query.state.fetchStatus === \"paused\" ? Promise.resolve() : promise;\n      })\n    );\n    return Promise.all(promises).then(noop);\n  }\n  fetchQuery(options) {\n    const defaultedOptions = this.defaultQueryOptions(options);\n    if (defaultedOptions.retry === void 0) {\n      defaultedOptions.retry = false;\n    }\n    const query = this.#queryCache.build(this, defaultedOptions);\n    return query.isStaleByTime(\n      resolveStaleTime(defaultedOptions.staleTime, query)\n    ) ? query.fetch(defaultedOptions) : Promise.resolve(query.state.data);\n  }\n  prefetchQuery(options) {\n    return this.fetchQuery(options).then(noop).catch(noop);\n  }\n  fetchInfiniteQuery(options) {\n    options.behavior = infiniteQueryBehavior(options.pages);\n    return this.fetchQuery(options);\n  }\n  prefetchInfiniteQuery(options) {\n    return this.fetchInfiniteQuery(options).then(noop).catch(noop);\n  }\n  ensureInfiniteQueryData(options) {\n    options.behavior = infiniteQueryBehavior(options.pages);\n    return this.ensureQueryData(options);\n  }\n  resumePausedMutations() {\n    if (onlineManager.isOnline()) {\n      return this.#mutationCache.resumePausedMutations();\n    }\n    return Promise.resolve();\n  }\n  getQueryCache() {\n    return this.#queryCache;\n  }\n  getMutationCache() {\n    return this.#mutationCache;\n  }\n  getDefaultOptions() {\n    return this.#defaultOptions;\n  }\n  setDefaultOptions(options) {\n    this.#defaultOptions = options;\n  }\n  setQueryDefaults(queryKey, options) {\n    this.#queryDefaults.set(hashKey(queryKey), {\n      queryKey,\n      defaultOptions: options\n    });\n  }\n  getQueryDefaults(queryKey) {\n    const defaults = [...this.#queryDefaults.values()];\n    const result = {};\n    defaults.forEach((queryDefault) => {\n      if (partialMatchKey(queryKey, queryDefault.queryKey)) {\n        Object.assign(result, queryDefault.defaultOptions);\n      }\n    });\n    return result;\n  }\n  setMutationDefaults(mutationKey, options) {\n    this.#mutationDefaults.set(hashKey(mutationKey), {\n      mutationKey,\n      defaultOptions: options\n    });\n  }\n  getMutationDefaults(mutationKey) {\n    const defaults = [...this.#mutationDefaults.values()];\n    const result = {};\n    defaults.forEach((queryDefault) => {\n      if (partialMatchKey(mutationKey, queryDefault.mutationKey)) {\n        Object.assign(result, queryDefault.defaultOptions);\n      }\n    });\n    return result;\n  }\n  defaultQueryOptions(options) {\n    if (options._defaulted) {\n      return options;\n    }\n    const defaultedOptions = {\n      ...this.#defaultOptions.queries,\n      ...this.getQueryDefaults(options.queryKey),\n      ...options,\n      _defaulted: true\n    };\n    if (!defaultedOptions.queryHash) {\n      defaultedOptions.queryHash = hashQueryKeyByOptions(\n        defaultedOptions.queryKey,\n        defaultedOptions\n      );\n    }\n    if (defaultedOptions.refetchOnReconnect === void 0) {\n      defaultedOptions.refetchOnReconnect = defaultedOptions.networkMode !== \"always\";\n    }\n    if (defaultedOptions.throwOnError === void 0) {\n      defaultedOptions.throwOnError = !!defaultedOptions.suspense;\n    }\n    if (!defaultedOptions.networkMode && defaultedOptions.persister) {\n      defaultedOptions.networkMode = \"offlineFirst\";\n    }\n    if (defaultedOptions.queryFn === skipToken) {\n      defaultedOptions.enabled = false;\n    }\n    return defaultedOptions;\n  }\n  defaultMutationOptions(options) {\n    if (options?._defaulted) {\n      return options;\n    }\n    return {\n      ...this.#defaultOptions.mutations,\n      ...options?.mutationKey && this.getMutationDefaults(options.mutationKey),\n      ...options,\n      _defaulted: true\n    };\n  }\n  clear() {\n    this.#queryCache.clear();\n    this.#mutationCache.clear();\n  }\n};\nexport {\n  QueryClient\n};\n//# sourceMappingURL=queryClient.js.map","\"use client\";\n\n// src/QueryClientProvider.tsx\nimport * as React from \"react\";\nimport { jsx } from \"react/jsx-runtime\";\nvar QueryClientContext = React.createContext(\n  void 0\n);\nvar useQueryClient = (queryClient) => {\n  const client = React.useContext(QueryClientContext);\n  if (queryClient) {\n    return queryClient;\n  }\n  if (!client) {\n    throw new Error(\"No QueryClient set, use QueryClientProvider to set one\");\n  }\n  return client;\n};\nvar QueryClientProvider = ({\n  client,\n  children\n}) => {\n  React.useEffect(() => {\n    client.mount();\n    return () => {\n      client.unmount();\n    };\n  }, [client]);\n  return /* @__PURE__ */ jsx(QueryClientContext.Provider, { value: client, children });\n};\nexport {\n  QueryClientContext,\n  QueryClientProvider,\n  useQueryClient\n};\n//# sourceMappingURL=QueryClientProvider.js.map","\"use client\";\n\n// src/IsRestoringProvider.ts\nimport * as React from \"react\";\nvar IsRestoringContext = React.createContext(false);\nvar useIsRestoring = () => React.useContext(IsRestoringContext);\nvar IsRestoringProvider = IsRestoringContext.Provider;\nexport {\n  IsRestoringProvider,\n  useIsRestoring\n};\n//# sourceMappingURL=IsRestoringProvider.js.map","\"use client\";\n\n// src/QueryErrorResetBoundary.tsx\nimport * as React from \"react\";\nimport { jsx } from \"react/jsx-runtime\";\nfunction createValue() {\n  let isReset = false;\n  return {\n    clearReset: () => {\n      isReset = false;\n    },\n    reset: () => {\n      isReset = true;\n    },\n    isReset: () => {\n      return isReset;\n    }\n  };\n}\nvar QueryErrorResetBoundaryContext = React.createContext(createValue());\nvar useQueryErrorResetBoundary = () => React.useContext(QueryErrorResetBoundaryContext);\nvar QueryErrorResetBoundary = ({\n  children\n}) => {\n  const [value] = React.useState(() => createValue());\n  return /* @__PURE__ */ jsx(QueryErrorResetBoundaryContext.Provider, { value, children: typeof children === \"function\" ? children(value) : children });\n};\nexport {\n  QueryErrorResetBoundary,\n  useQueryErrorResetBoundary\n};\n//# sourceMappingURL=QueryErrorResetBoundary.js.map","\"use client\";\n\n// src/errorBoundaryUtils.ts\nimport * as React from \"react\";\nimport { shouldThrowError } from \"@tanstack/query-core\";\nvar ensurePreventErrorBoundaryRetry = (options, errorResetBoundary) => {\n  if (options.suspense || options.throwOnError || options.experimental_prefetchInRender) {\n    if (!errorResetBoundary.isReset()) {\n      options.retryOnMount = false;\n    }\n  }\n};\nvar useClearResetErrorBoundary = (errorResetBoundary) => {\n  React.useEffect(() => {\n    errorResetBoundary.clearReset();\n  }, [errorResetBoundary]);\n};\nvar getHasError = ({\n  result,\n  errorResetBoundary,\n  throwOnError,\n  query,\n  suspense\n}) => {\n  return result.isError && !errorResetBoundary.isReset() && !result.isFetching && query && (suspense && result.data === void 0 || shouldThrowError(throwOnError, [result.error, query]));\n};\nexport {\n  ensurePreventErrorBoundaryRetry,\n  getHasError,\n  useClearResetErrorBoundary\n};\n//# sourceMappingURL=errorBoundaryUtils.js.map","// src/suspense.ts\nvar defaultThrowOnError = (_error, query) => query.state.data === void 0;\nvar ensureSuspenseTimers = (defaultedOptions) => {\n  if (defaultedOptions.suspense) {\n    const MIN_SUSPENSE_TIME_MS = 1e3;\n    const clamp = (value) => value === \"static\" ? value : Math.max(value ?? MIN_SUSPENSE_TIME_MS, MIN_SUSPENSE_TIME_MS);\n    const originalStaleTime = defaultedOptions.staleTime;\n    defaultedOptions.staleTime = typeof originalStaleTime === \"function\" ? (...args) => clamp(originalStaleTime(...args)) : clamp(originalStaleTime);\n    if (typeof defaultedOptions.gcTime === \"number\") {\n      defaultedOptions.gcTime = Math.max(\n        defaultedOptions.gcTime,\n        MIN_SUSPENSE_TIME_MS\n      );\n    }\n  }\n};\nvar willFetch = (result, isRestoring) => result.isLoading && result.isFetching && !isRestoring;\nvar shouldSuspend = (defaultedOptions, result) => defaultedOptions?.suspense && result.isPending;\nvar fetchOptimistic = (defaultedOptions, observer, errorResetBoundary) => observer.fetchOptimistic(defaultedOptions).catch(() => {\n  errorResetBoundary.clearReset();\n});\nexport {\n  defaultThrowOnError,\n  ensureSuspenseTimers,\n  fetchOptimistic,\n  shouldSuspend,\n  willFetch\n};\n//# sourceMappingURL=suspense.js.map","\"use client\";\n\n// src/useBaseQuery.ts\nimport * as React from \"react\";\nimport { isServer, noop, notifyManager } from \"@tanstack/query-core\";\nimport { useQueryClient } from \"./QueryClientProvider.js\";\nimport { useQueryErrorResetBoundary } from \"./QueryErrorResetBoundary.js\";\nimport {\n  ensurePreventErrorBoundaryRetry,\n  getHasError,\n  useClearResetErrorBoundary\n} from \"./errorBoundaryUtils.js\";\nimport { useIsRestoring } from \"./IsRestoringProvider.js\";\nimport {\n  ensureSuspenseTimers,\n  fetchOptimistic,\n  shouldSuspend,\n  willFetch\n} from \"./suspense.js\";\nfunction useBaseQuery(options, Observer, queryClient) {\n  if (process.env.NODE_ENV !== \"production\") {\n    if (typeof options !== \"object\" || Array.isArray(options)) {\n      throw new Error(\n        'Bad argument type. Starting with v5, only the \"Object\" form is allowed when calling query related functions. Please use the error stack to find the culprit call. More info here: https://tanstack.com/query/latest/docs/react/guides/migrating-to-v5#supports-a-single-signature-one-object'\n      );\n    }\n  }\n  const isRestoring = useIsRestoring();\n  const errorResetBoundary = useQueryErrorResetBoundary();\n  const client = useQueryClient(queryClient);\n  const defaultedOptions = client.defaultQueryOptions(options);\n  client.getDefaultOptions().queries?._experimental_beforeQuery?.(\n    defaultedOptions\n  );\n  if (process.env.NODE_ENV !== \"production\") {\n    if (!defaultedOptions.queryFn) {\n      console.error(\n        `[${defaultedOptions.queryHash}]: No queryFn was passed as an option, and no default queryFn was found. The queryFn parameter is only optional when using a default queryFn. More info here: https://tanstack.com/query/latest/docs/framework/react/guides/default-query-function`\n      );\n    }\n  }\n  defaultedOptions._optimisticResults = isRestoring ? \"isRestoring\" : \"optimistic\";\n  ensureSuspenseTimers(defaultedOptions);\n  ensurePreventErrorBoundaryRetry(defaultedOptions, errorResetBoundary);\n  useClearResetErrorBoundary(errorResetBoundary);\n  const isNewCacheEntry = !client.getQueryCache().get(defaultedOptions.queryHash);\n  const [observer] = React.useState(\n    () => new Observer(\n      client,\n      defaultedOptions\n    )\n  );\n  const result = observer.getOptimisticResult(defaultedOptions);\n  const shouldSubscribe = !isRestoring && options.subscribed !== false;\n  React.useSyncExternalStore(\n    React.useCallback(\n      (onStoreChange) => {\n        const unsubscribe = shouldSubscribe ? observer.subscribe(notifyManager.batchCalls(onStoreChange)) : noop;\n        observer.updateResult();\n        return unsubscribe;\n      },\n      [observer, shouldSubscribe]\n    ),\n    () => observer.getCurrentResult(),\n    () => observer.getCurrentResult()\n  );\n  React.useEffect(() => {\n    observer.setOptions(defaultedOptions);\n  }, [defaultedOptions, observer]);\n  if (shouldSuspend(defaultedOptions, result)) {\n    throw fetchOptimistic(defaultedOptions, observer, errorResetBoundary);\n  }\n  if (getHasError({\n    result,\n    errorResetBoundary,\n    throwOnError: defaultedOptions.throwOnError,\n    query: client.getQueryCache().get(defaultedOptions.queryHash),\n    suspense: defaultedOptions.suspense\n  })) {\n    throw result.error;\n  }\n  ;\n  client.getDefaultOptions().queries?._experimental_afterQuery?.(\n    defaultedOptions,\n    result\n  );\n  if (defaultedOptions.experimental_prefetchInRender && !isServer && willFetch(result, isRestoring)) {\n    const promise = isNewCacheEntry ? (\n      // Fetch immediately on render in order to ensure `.promise` is resolved even if the component is unmounted\n      fetchOptimistic(defaultedOptions, observer, errorResetBoundary)\n    ) : (\n      // subscribe to the \"cache promise\" so that we can finalize the currentThenable once data comes in\n      client.getQueryCache().get(defaultedOptions.queryHash)?.promise\n    );\n    promise?.catch(noop).finally(() => {\n      observer.updateResult();\n    });\n  }\n  return !defaultedOptions.notifyOnChangeProps ? observer.trackResult(result) : result;\n}\nexport {\n  useBaseQuery\n};\n//# sourceMappingURL=useBaseQuery.js.map","\"use client\";\n\n// src/useQuery.ts\nimport { QueryObserver } from \"@tanstack/query-core\";\nimport { useBaseQuery } from \"./useBaseQuery.js\";\nfunction useQuery(options, queryClient) {\n  return useBaseQuery(options, QueryObserver, queryClient);\n}\nexport {\n  useQuery\n};\n//# sourceMappingURL=useQuery.js.map","\"use client\";\n\n// src/useMutation.ts\nimport * as React from \"react\";\nimport {\n  MutationObserver,\n  noop,\n  notifyManager,\n  shouldThrowError\n} from \"@tanstack/query-core\";\nimport { useQueryClient } from \"./QueryClientProvider.js\";\nfunction useMutation(options, queryClient) {\n  const client = useQueryClient(queryClient);\n  const [observer] = React.useState(\n    () => new MutationObserver(\n      client,\n      options\n    )\n  );\n  React.useEffect(() => {\n    observer.setOptions(options);\n  }, [observer, options]);\n  const result = React.useSyncExternalStore(\n    React.useCallback(\n      (onStoreChange) => observer.subscribe(notifyManager.batchCalls(onStoreChange)),\n      [observer]\n    ),\n    () => observer.getCurrentResult(),\n    () => observer.getCurrentResult()\n  );\n  const mutate = React.useCallback(\n    (variables, mutateOptions) => {\n      observer.mutate(variables, mutateOptions).catch(noop);\n    },\n    [observer]\n  );\n  if (result.error && shouldThrowError(observer.options.throwOnError, [result.error])) {\n    throw result.error;\n  }\n  return { ...result, mutate, mutateAsync: result.mutate };\n}\nexport {\n  useMutation\n};\n//# sourceMappingURL=useMutation.js.map","import { useReducer, useRef, useDebugValue, useEffect, useLayoutEffect } from 'react';\n\nfunction createStore(createState) {\n  let state;\n  const listeners = /* @__PURE__ */ new Set();\n  const setState = (partial, replace) => {\n    const nextState = typeof partial === \"function\" ? partial(state) : partial;\n    if (nextState !== state) {\n      const previousState = state;\n      state = replace ? nextState : Object.assign({}, state, nextState);\n      listeners.forEach((listener) => listener(state, previousState));\n    }\n  };\n  const getState = () => state;\n  const subscribeWithSelector = (listener, selector = getState, equalityFn = Object.is) => {\n    console.warn(\"[DEPRECATED] Please use `subscribeWithSelector` middleware\");\n    let currentSlice = selector(state);\n    function listenerToAdd() {\n      const nextSlice = selector(state);\n      if (!equalityFn(currentSlice, nextSlice)) {\n        const previousSlice = currentSlice;\n        listener(currentSlice = nextSlice, previousSlice);\n      }\n    }\n    listeners.add(listenerToAdd);\n    return () => listeners.delete(listenerToAdd);\n  };\n  const subscribe = (listener, selector, equalityFn) => {\n    if (selector || equalityFn) {\n      return subscribeWithSelector(listener, selector, equalityFn);\n    }\n    listeners.add(listener);\n    return () => listeners.delete(listener);\n  };\n  const destroy = () => listeners.clear();\n  const api = { setState, getState, subscribe, destroy };\n  state = createState(setState, getState, api);\n  return api;\n}\n\nconst isSSR = typeof window === \"undefined\" || !window.navigator || /ServerSideRendering|^Deno\\//.test(window.navigator.userAgent);\nconst useIsomorphicLayoutEffect = isSSR ? useEffect : useLayoutEffect;\nfunction create(createState) {\n  const api = typeof createState === \"function\" ? createStore(createState) : createState;\n  const useStore = (selector = api.getState, equalityFn = Object.is) => {\n    const [, forceUpdate] = useReducer((c) => c + 1, 0);\n    const state = api.getState();\n    const stateRef = useRef(state);\n    const selectorRef = useRef(selector);\n    const equalityFnRef = useRef(equalityFn);\n    const erroredRef = useRef(false);\n    const currentSliceRef = useRef();\n    if (currentSliceRef.current === void 0) {\n      currentSliceRef.current = selector(state);\n    }\n    let newStateSlice;\n    let hasNewStateSlice = false;\n    if (stateRef.current !== state || selectorRef.current !== selector || equalityFnRef.current !== equalityFn || erroredRef.current) {\n      newStateSlice = selector(state);\n      hasNewStateSlice = !equalityFn(currentSliceRef.current, newStateSlice);\n    }\n    useIsomorphicLayoutEffect(() => {\n      if (hasNewStateSlice) {\n        currentSliceRef.current = newStateSlice;\n      }\n      stateRef.current = state;\n      selectorRef.current = selector;\n      equalityFnRef.current = equalityFn;\n      erroredRef.current = false;\n    });\n    const stateBeforeSubscriptionRef = useRef(state);\n    useIsomorphicLayoutEffect(() => {\n      const listener = () => {\n        try {\n          const nextState = api.getState();\n          const nextStateSlice = selectorRef.current(nextState);\n          if (!equalityFnRef.current(currentSliceRef.current, nextStateSlice)) {\n            stateRef.current = nextState;\n            currentSliceRef.current = nextStateSlice;\n            forceUpdate();\n          }\n        } catch (error) {\n          erroredRef.current = true;\n          forceUpdate();\n        }\n      };\n      const unsubscribe = api.subscribe(listener);\n      if (api.getState() !== stateBeforeSubscriptionRef.current) {\n        listener();\n      }\n      return unsubscribe;\n    }, []);\n    const sliceToReturn = hasNewStateSlice ? newStateSlice : currentSliceRef.current;\n    useDebugValue(sliceToReturn);\n    return sliceToReturn;\n  };\n  Object.assign(useStore, api);\n  useStore[Symbol.iterator] = function() {\n    console.warn(\"[useStore, api] = create() is deprecated and will be removed in v4\");\n    const items = [useStore, api];\n    return {\n      next() {\n        const done = items.length <= 0;\n        return { value: items.shift(), done };\n      }\n    };\n  };\n  return useStore;\n}\n\nexport { create as default };\n","import { createContext as createContext$1, useRef, createElement, useContext, useMemo } from 'react';\n\nfunction createContext() {\n  const ZustandContext = createContext$1(void 0);\n  const Provider = ({\n    initialStore,\n    createStore,\n    children\n  }) => {\n    const storeRef = useRef();\n    if (!storeRef.current) {\n      if (initialStore) {\n        console.warn(\"Provider initialStore is deprecated and will be removed in the next version.\");\n        if (!createStore) {\n          createStore = () => initialStore;\n        }\n      }\n      storeRef.current = createStore();\n    }\n    return createElement(ZustandContext.Provider, { value: storeRef.current }, children);\n  };\n  const useStore = (selector, equalityFn = Object.is) => {\n    const useProviderStore = useContext(ZustandContext);\n    if (!useProviderStore) {\n      throw new Error(\"Seems like you have not used zustand provider as an ancestor.\");\n    }\n    return useProviderStore(selector, equalityFn);\n  };\n  const useStoreApi = () => {\n    const useProviderStore = useContext(ZustandContext);\n    if (!useProviderStore) {\n      throw new Error(\"Seems like you have not used zustand provider as an ancestor.\");\n    }\n    return useMemo(() => ({\n      getState: useProviderStore.getState,\n      setState: useProviderStore.setState,\n      subscribe: useProviderStore.subscribe,\n      destroy: useProviderStore.destroy\n    }), [useProviderStore]);\n  };\n  return {\n    Provider,\n    useStore,\n    useStoreApi\n  };\n}\n\nexport { createContext as default };\n","var noop = {value: () => {}};\n\nfunction dispatch() {\n  for (var i = 0, n = arguments.length, _ = {}, t; i < n; ++i) {\n    if (!(t = arguments[i] + \"\") || (t in _) || /[\\s.]/.test(t)) throw new Error(\"illegal type: \" + t);\n    _[t] = [];\n  }\n  return new Dispatch(_);\n}\n\nfunction Dispatch(_) {\n  this._ = _;\n}\n\nfunction parseTypenames(typenames, types) {\n  return typenames.trim().split(/^|\\s+/).map(function(t) {\n    var name = \"\", i = t.indexOf(\".\");\n    if (i >= 0) name = t.slice(i + 1), t = t.slice(0, i);\n    if (t && !types.hasOwnProperty(t)) throw new Error(\"unknown type: \" + t);\n    return {type: t, name: name};\n  });\n}\n\nDispatch.prototype = dispatch.prototype = {\n  constructor: Dispatch,\n  on: function(typename, callback) {\n    var _ = this._,\n        T = parseTypenames(typename + \"\", _),\n        t,\n        i = -1,\n        n = T.length;\n\n    // If no callback was specified, return the callback of the given type and name.\n    if (arguments.length < 2) {\n      while (++i < n) if ((t = (typename = T[i]).type) && (t = get(_[t], typename.name))) return t;\n      return;\n    }\n\n    // If a type was specified, set the callback for the given type and name.\n    // Otherwise, if a null callback was specified, remove callbacks of the given name.\n    if (callback != null && typeof callback !== \"function\") throw new Error(\"invalid callback: \" + callback);\n    while (++i < n) {\n      if (t = (typename = T[i]).type) _[t] = set(_[t], typename.name, callback);\n      else if (callback == null) for (t in _) _[t] = set(_[t], typename.name, null);\n    }\n\n    return this;\n  },\n  copy: function() {\n    var copy = {}, _ = this._;\n    for (var t in _) copy[t] = _[t].slice();\n    return new Dispatch(copy);\n  },\n  call: function(type, that) {\n    if ((n = arguments.length - 2) > 0) for (var args = new Array(n), i = 0, n, t; i < n; ++i) args[i] = arguments[i + 2];\n    if (!this._.hasOwnProperty(type)) throw new Error(\"unknown type: \" + type);\n    for (t = this._[type], i = 0, n = t.length; i < n; ++i) t[i].value.apply(that, args);\n  },\n  apply: function(type, that, args) {\n    if (!this._.hasOwnProperty(type)) throw new Error(\"unknown type: \" + type);\n    for (var t = this._[type], i = 0, n = t.length; i < n; ++i) t[i].value.apply(that, args);\n  }\n};\n\nfunction get(type, name) {\n  for (var i = 0, n = type.length, c; i < n; ++i) {\n    if ((c = type[i]).name === name) {\n      return c.value;\n    }\n  }\n}\n\nfunction set(type, name, callback) {\n  for (var i = 0, n = type.length; i < n; ++i) {\n    if (type[i].name === name) {\n      type[i] = noop, type = type.slice(0, i).concat(type.slice(i + 1));\n      break;\n    }\n  }\n  if (callback != null) type.push({name: name, value: callback});\n  return type;\n}\n\nexport default dispatch;\n","export var xhtml = \"http://www.w3.org/1999/xhtml\";\n\nexport default {\n  svg: \"http://www.w3.org/2000/svg\",\n  xhtml: xhtml,\n  xlink: \"http://www.w3.org/1999/xlink\",\n  xml: \"http://www.w3.org/XML/1998/namespace\",\n  xmlns: \"http://www.w3.org/2000/xmlns/\"\n};\n","import namespaces from \"./namespaces.js\";\n\nexport default function(name) {\n  var prefix = name += \"\", i = prefix.indexOf(\":\");\n  if (i >= 0 && (prefix = name.slice(0, i)) !== \"xmlns\") name = name.slice(i + 1);\n  return namespaces.hasOwnProperty(prefix) ? {space: namespaces[prefix], local: name} : name; // eslint-disable-line no-prototype-builtins\n}\n","import namespace from \"./namespace.js\";\nimport {xhtml} from \"./namespaces.js\";\n\nfunction creatorInherit(name) {\n  return function() {\n    var document = this.ownerDocument,\n        uri = this.namespaceURI;\n    return uri === xhtml && document.documentElement.namespaceURI === xhtml\n        ? document.createElement(name)\n        : document.createElementNS(uri, name);\n  };\n}\n\nfunction creatorFixed(fullname) {\n  return function() {\n    return this.ownerDocument.createElementNS(fullname.space, fullname.local);\n  };\n}\n\nexport default function(name) {\n  var fullname = namespace(name);\n  return (fullname.local\n      ? creatorFixed\n      : creatorInherit)(fullname);\n}\n","function none() {}\n\nexport default function(selector) {\n  return selector == null ? none : function() {\n    return this.querySelector(selector);\n  };\n}\n","import {Selection} from \"./index.js\";\nimport selector from \"../selector.js\";\n\nexport default function(select) {\n  if (typeof select !== \"function\") select = selector(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = new Array(n), node, subnode, i = 0; i < n; ++i) {\n      if ((node = group[i]) && (subnode = select.call(node, node.__data__, i, group))) {\n        if (\"__data__\" in node) subnode.__data__ = node.__data__;\n        subgroup[i] = subnode;\n      }\n    }\n  }\n\n  return new Selection(subgroups, this._parents);\n}\n","// Given something array like (or null), returns something that is strictly an\n// array. This is used to ensure that array-like objects passed to d3.selectAll\n// or selection.selectAll are converted into proper arrays when creating a\n// selection; we dont ever want to create a selection backed by a live\n// HTMLCollection or NodeList. However, note that selection.selectAll will use a\n// static NodeList as a group, since it safely derived from querySelectorAll.\nexport default function array(x) {\n  return x == null ? [] : Array.isArray(x) ? x : Array.from(x);\n}\n","function empty() {\n  return [];\n}\n\nexport default function(selector) {\n  return selector == null ? empty : function() {\n    return this.querySelectorAll(selector);\n  };\n}\n","import {Selection} from \"./index.js\";\nimport array from \"../array.js\";\nimport selectorAll from \"../selectorAll.js\";\n\nfunction arrayAll(select) {\n  return function() {\n    return array(select.apply(this, arguments));\n  };\n}\n\nexport default function(select) {\n  if (typeof select === \"function\") select = arrayAll(select);\n  else select = selectorAll(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = [], parents = [], j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        subgroups.push(select.call(node, node.__data__, i, group));\n        parents.push(node);\n      }\n    }\n  }\n\n  return new Selection(subgroups, parents);\n}\n","export default function(selector) {\n  return function() {\n    return this.matches(selector);\n  };\n}\n\nexport function childMatcher(selector) {\n  return function(node) {\n    return node.matches(selector);\n  };\n}\n\n","import {childMatcher} from \"../matcher.js\";\n\nvar find = Array.prototype.find;\n\nfunction childFind(match) {\n  return function() {\n    return find.call(this.children, match);\n  };\n}\n\nfunction childFirst() {\n  return this.firstElementChild;\n}\n\nexport default function(match) {\n  return this.select(match == null ? childFirst\n      : childFind(typeof match === \"function\" ? match : childMatcher(match)));\n}\n","import {childMatcher} from \"../matcher.js\";\n\nvar filter = Array.prototype.filter;\n\nfunction children() {\n  return Array.from(this.children);\n}\n\nfunction childrenFilter(match) {\n  return function() {\n    return filter.call(this.children, match);\n  };\n}\n\nexport default function(match) {\n  return this.selectAll(match == null ? children\n      : childrenFilter(typeof match === \"function\" ? match : childMatcher(match)));\n}\n","import {Selection} from \"./index.js\";\nimport matcher from \"../matcher.js\";\n\nexport default function(match) {\n  if (typeof match !== \"function\") match = matcher(match);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = [], node, i = 0; i < n; ++i) {\n      if ((node = group[i]) && match.call(node, node.__data__, i, group)) {\n        subgroup.push(node);\n      }\n    }\n  }\n\n  return new Selection(subgroups, this._parents);\n}\n","export default function(update) {\n  return new Array(update.length);\n}\n","import sparse from \"./sparse.js\";\nimport {Selection} from \"./index.js\";\n\nexport default function() {\n  return new Selection(this._enter || this._groups.map(sparse), this._parents);\n}\n\nexport function EnterNode(parent, datum) {\n  this.ownerDocument = parent.ownerDocument;\n  this.namespaceURI = parent.namespaceURI;\n  this._next = null;\n  this._parent = parent;\n  this.__data__ = datum;\n}\n\nEnterNode.prototype = {\n  constructor: EnterNode,\n  appendChild: function(child) { return this._parent.insertBefore(child, this._next); },\n  insertBefore: function(child, next) { return this._parent.insertBefore(child, next); },\n  querySelector: function(selector) { return this._parent.querySelector(selector); },\n  querySelectorAll: function(selector) { return this._parent.querySelectorAll(selector); }\n};\n","export default function(x) {\n  return function() {\n    return x;\n  };\n}\n","import {Selection} from \"./index.js\";\nimport {EnterNode} from \"./enter.js\";\nimport constant from \"../constant.js\";\n\nfunction bindIndex(parent, group, enter, update, exit, data) {\n  var i = 0,\n      node,\n      groupLength = group.length,\n      dataLength = data.length;\n\n  // Put any non-null nodes that fit into update.\n  // Put any null nodes into enter.\n  // Put any remaining data into enter.\n  for (; i < dataLength; ++i) {\n    if (node = group[i]) {\n      node.__data__ = data[i];\n      update[i] = node;\n    } else {\n      enter[i] = new EnterNode(parent, data[i]);\n    }\n  }\n\n  // Put any non-null nodes that dont fit into exit.\n  for (; i < groupLength; ++i) {\n    if (node = group[i]) {\n      exit[i] = node;\n    }\n  }\n}\n\nfunction bindKey(parent, group, enter, update, exit, data, key) {\n  var i,\n      node,\n      nodeByKeyValue = new Map,\n      groupLength = group.length,\n      dataLength = data.length,\n      keyValues = new Array(groupLength),\n      keyValue;\n\n  // Compute the key for each node.\n  // If multiple nodes have the same key, the duplicates are added to exit.\n  for (i = 0; i < groupLength; ++i) {\n    if (node = group[i]) {\n      keyValues[i] = keyValue = key.call(node, node.__data__, i, group) + \"\";\n      if (nodeByKeyValue.has(keyValue)) {\n        exit[i] = node;\n      } else {\n        nodeByKeyValue.set(keyValue, node);\n      }\n    }\n  }\n\n  // Compute the key for each datum.\n  // If there a node associated with this key, join and add it to update.\n  // If there is not (or the key is a duplicate), add it to enter.\n  for (i = 0; i < dataLength; ++i) {\n    keyValue = key.call(parent, data[i], i, data) + \"\";\n    if (node = nodeByKeyValue.get(keyValue)) {\n      update[i] = node;\n      node.__data__ = data[i];\n      nodeByKeyValue.delete(keyValue);\n    } else {\n      enter[i] = new EnterNode(parent, data[i]);\n    }\n  }\n\n  // Add any remaining nodes that were not bound to data to exit.\n  for (i = 0; i < groupLength; ++i) {\n    if ((node = group[i]) && (nodeByKeyValue.get(keyValues[i]) === node)) {\n      exit[i] = node;\n    }\n  }\n}\n\nfunction datum(node) {\n  return node.__data__;\n}\n\nexport default function(value, key) {\n  if (!arguments.length) return Array.from(this, datum);\n\n  var bind = key ? bindKey : bindIndex,\n      parents = this._parents,\n      groups = this._groups;\n\n  if (typeof value !== \"function\") value = constant(value);\n\n  for (var m = groups.length, update = new Array(m), enter = new Array(m), exit = new Array(m), j = 0; j < m; ++j) {\n    var parent = parents[j],\n        group = groups[j],\n        groupLength = group.length,\n        data = arraylike(value.call(parent, parent && parent.__data__, j, parents)),\n        dataLength = data.length,\n        enterGroup = enter[j] = new Array(dataLength),\n        updateGroup = update[j] = new Array(dataLength),\n        exitGroup = exit[j] = new Array(groupLength);\n\n    bind(parent, group, enterGroup, updateGroup, exitGroup, data, key);\n\n    // Now connect the enter nodes to their following update node, such that\n    // appendChild can insert the materialized enter node before this node,\n    // rather than at the end of the parent node.\n    for (var i0 = 0, i1 = 0, previous, next; i0 < dataLength; ++i0) {\n      if (previous = enterGroup[i0]) {\n        if (i0 >= i1) i1 = i0 + 1;\n        while (!(next = updateGroup[i1]) && ++i1 < dataLength);\n        previous._next = next || null;\n      }\n    }\n  }\n\n  update = new Selection(update, parents);\n  update._enter = enter;\n  update._exit = exit;\n  return update;\n}\n\n// Given some data, this returns an array-like view of it: an object that\n// exposes a length property and allows numeric indexing. Note that unlike\n// selectAll, this isnt worried about live collections because the resulting\n// array will only be used briefly while data is being bound. (It is possible to\n// cause the data to change while iterating by using a key function, but please\n// dont; wed rather avoid a gratuitous copy.)\nfunction arraylike(data) {\n  return typeof data === \"object\" && \"length\" in data\n    ? data // Array, TypedArray, NodeList, array-like\n    : Array.from(data); // Map, Set, iterable, string, or anything else\n}\n","import sparse from \"./sparse.js\";\nimport {Selection} from \"./index.js\";\n\nexport default function() {\n  return new Selection(this._exit || this._groups.map(sparse), this._parents);\n}\n","export default function(onenter, onupdate, onexit) {\n  var enter = this.enter(), update = this, exit = this.exit();\n  if (typeof onenter === \"function\") {\n    enter = onenter(enter);\n    if (enter) enter = enter.selection();\n  } else {\n    enter = enter.append(onenter + \"\");\n  }\n  if (onupdate != null) {\n    update = onupdate(update);\n    if (update) update = update.selection();\n  }\n  if (onexit == null) exit.remove(); else onexit(exit);\n  return enter && update ? enter.merge(update).order() : update;\n}\n","import {Selection} from \"./index.js\";\n\nexport default function(context) {\n  var selection = context.selection ? context.selection() : context;\n\n  for (var groups0 = this._groups, groups1 = selection._groups, m0 = groups0.length, m1 = groups1.length, m = Math.min(m0, m1), merges = new Array(m0), j = 0; j < m; ++j) {\n    for (var group0 = groups0[j], group1 = groups1[j], n = group0.length, merge = merges[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group0[i] || group1[i]) {\n        merge[i] = node;\n      }\n    }\n  }\n\n  for (; j < m0; ++j) {\n    merges[j] = groups0[j];\n  }\n\n  return new Selection(merges, this._parents);\n}\n","export default function() {\n\n  for (var groups = this._groups, j = -1, m = groups.length; ++j < m;) {\n    for (var group = groups[j], i = group.length - 1, next = group[i], node; --i >= 0;) {\n      if (node = group[i]) {\n        if (next && node.compareDocumentPosition(next) ^ 4) next.parentNode.insertBefore(node, next);\n        next = node;\n      }\n    }\n  }\n\n  return this;\n}\n","import {Selection} from \"./index.js\";\n\nexport default function(compare) {\n  if (!compare) compare = ascending;\n\n  function compareNode(a, b) {\n    return a && b ? compare(a.__data__, b.__data__) : !a - !b;\n  }\n\n  for (var groups = this._groups, m = groups.length, sortgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, sortgroup = sortgroups[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        sortgroup[i] = node;\n      }\n    }\n    sortgroup.sort(compareNode);\n  }\n\n  return new Selection(sortgroups, this._parents).order();\n}\n\nfunction ascending(a, b) {\n  return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n}\n","export default function() {\n  var callback = arguments[0];\n  arguments[0] = this;\n  callback.apply(null, arguments);\n  return this;\n}\n","export default function() {\n  return Array.from(this);\n}\n","export default function() {\n\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length; i < n; ++i) {\n      var node = group[i];\n      if (node) return node;\n    }\n  }\n\n  return null;\n}\n","export default function() {\n  let size = 0;\n  for (const node of this) ++size; // eslint-disable-line no-unused-vars\n  return size;\n}\n","export default function() {\n  return !this.node();\n}\n","export default function(callback) {\n\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length, node; i < n; ++i) {\n      if (node = group[i]) callback.call(node, node.__data__, i, group);\n    }\n  }\n\n  return this;\n}\n","import namespace from \"../namespace.js\";\n\nfunction attrRemove(name) {\n  return function() {\n    this.removeAttribute(name);\n  };\n}\n\nfunction attrRemoveNS(fullname) {\n  return function() {\n    this.removeAttributeNS(fullname.space, fullname.local);\n  };\n}\n\nfunction attrConstant(name, value) {\n  return function() {\n    this.setAttribute(name, value);\n  };\n}\n\nfunction attrConstantNS(fullname, value) {\n  return function() {\n    this.setAttributeNS(fullname.space, fullname.local, value);\n  };\n}\n\nfunction attrFunction(name, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.removeAttribute(name);\n    else this.setAttribute(name, v);\n  };\n}\n\nfunction attrFunctionNS(fullname, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.removeAttributeNS(fullname.space, fullname.local);\n    else this.setAttributeNS(fullname.space, fullname.local, v);\n  };\n}\n\nexport default function(name, value) {\n  var fullname = namespace(name);\n\n  if (arguments.length < 2) {\n    var node = this.node();\n    return fullname.local\n        ? node.getAttributeNS(fullname.space, fullname.local)\n        : node.getAttribute(fullname);\n  }\n\n  return this.each((value == null\n      ? (fullname.local ? attrRemoveNS : attrRemove) : (typeof value === \"function\"\n      ? (fullname.local ? attrFunctionNS : attrFunction)\n      : (fullname.local ? attrConstantNS : attrConstant)))(fullname, value));\n}\n","export default function(node) {\n  return (node.ownerDocument && node.ownerDocument.defaultView) // node is a Node\n      || (node.document && node) // node is a Window\n      || node.defaultView; // node is a Document\n}\n","import defaultView from \"../window.js\";\n\nfunction styleRemove(name) {\n  return function() {\n    this.style.removeProperty(name);\n  };\n}\n\nfunction styleConstant(name, value, priority) {\n  return function() {\n    this.style.setProperty(name, value, priority);\n  };\n}\n\nfunction styleFunction(name, value, priority) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.style.removeProperty(name);\n    else this.style.setProperty(name, v, priority);\n  };\n}\n\nexport default function(name, value, priority) {\n  return arguments.length > 1\n      ? this.each((value == null\n            ? styleRemove : typeof value === \"function\"\n            ? styleFunction\n            : styleConstant)(name, value, priority == null ? \"\" : priority))\n      : styleValue(this.node(), name);\n}\n\nexport function styleValue(node, name) {\n  return node.style.getPropertyValue(name)\n      || defaultView(node).getComputedStyle(node, null).getPropertyValue(name);\n}\n","function propertyRemove(name) {\n  return function() {\n    delete this[name];\n  };\n}\n\nfunction propertyConstant(name, value) {\n  return function() {\n    this[name] = value;\n  };\n}\n\nfunction propertyFunction(name, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) delete this[name];\n    else this[name] = v;\n  };\n}\n\nexport default function(name, value) {\n  return arguments.length > 1\n      ? this.each((value == null\n          ? propertyRemove : typeof value === \"function\"\n          ? propertyFunction\n          : propertyConstant)(name, value))\n      : this.node()[name];\n}\n","function classArray(string) {\n  return string.trim().split(/^|\\s+/);\n}\n\nfunction classList(node) {\n  return node.classList || new ClassList(node);\n}\n\nfunction ClassList(node) {\n  this._node = node;\n  this._names = classArray(node.getAttribute(\"class\") || \"\");\n}\n\nClassList.prototype = {\n  add: function(name) {\n    var i = this._names.indexOf(name);\n    if (i < 0) {\n      this._names.push(name);\n      this._node.setAttribute(\"class\", this._names.join(\" \"));\n    }\n  },\n  remove: function(name) {\n    var i = this._names.indexOf(name);\n    if (i >= 0) {\n      this._names.splice(i, 1);\n      this._node.setAttribute(\"class\", this._names.join(\" \"));\n    }\n  },\n  contains: function(name) {\n    return this._names.indexOf(name) >= 0;\n  }\n};\n\nfunction classedAdd(node, names) {\n  var list = classList(node), i = -1, n = names.length;\n  while (++i < n) list.add(names[i]);\n}\n\nfunction classedRemove(node, names) {\n  var list = classList(node), i = -1, n = names.length;\n  while (++i < n) list.remove(names[i]);\n}\n\nfunction classedTrue(names) {\n  return function() {\n    classedAdd(this, names);\n  };\n}\n\nfunction classedFalse(names) {\n  return function() {\n    classedRemove(this, names);\n  };\n}\n\nfunction classedFunction(names, value) {\n  return function() {\n    (value.apply(this, arguments) ? classedAdd : classedRemove)(this, names);\n  };\n}\n\nexport default function(name, value) {\n  var names = classArray(name + \"\");\n\n  if (arguments.length < 2) {\n    var list = classList(this.node()), i = -1, n = names.length;\n    while (++i < n) if (!list.contains(names[i])) return false;\n    return true;\n  }\n\n  return this.each((typeof value === \"function\"\n      ? classedFunction : value\n      ? classedTrue\n      : classedFalse)(names, value));\n}\n","function textRemove() {\n  this.textContent = \"\";\n}\n\nfunction textConstant(value) {\n  return function() {\n    this.textContent = value;\n  };\n}\n\nfunction textFunction(value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    this.textContent = v == null ? \"\" : v;\n  };\n}\n\nexport default function(value) {\n  return arguments.length\n      ? this.each(value == null\n          ? textRemove : (typeof value === \"function\"\n          ? textFunction\n          : textConstant)(value))\n      : this.node().textContent;\n}\n","function htmlRemove() {\n  this.innerHTML = \"\";\n}\n\nfunction htmlConstant(value) {\n  return function() {\n    this.innerHTML = value;\n  };\n}\n\nfunction htmlFunction(value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    this.innerHTML = v == null ? \"\" : v;\n  };\n}\n\nexport default function(value) {\n  return arguments.length\n      ? this.each(value == null\n          ? htmlRemove : (typeof value === \"function\"\n          ? htmlFunction\n          : htmlConstant)(value))\n      : this.node().innerHTML;\n}\n","function raise() {\n  if (this.nextSibling) this.parentNode.appendChild(this);\n}\n\nexport default function() {\n  return this.each(raise);\n}\n","function lower() {\n  if (this.previousSibling) this.parentNode.insertBefore(this, this.parentNode.firstChild);\n}\n\nexport default function() {\n  return this.each(lower);\n}\n","import creator from \"../creator.js\";\n\nexport default function(name) {\n  var create = typeof name === \"function\" ? name : creator(name);\n  return this.select(function() {\n    return this.appendChild(create.apply(this, arguments));\n  });\n}\n","import creator from \"../creator.js\";\nimport selector from \"../selector.js\";\n\nfunction constantNull() {\n  return null;\n}\n\nexport default function(name, before) {\n  var create = typeof name === \"function\" ? name : creator(name),\n      select = before == null ? constantNull : typeof before === \"function\" ? before : selector(before);\n  return this.select(function() {\n    return this.insertBefore(create.apply(this, arguments), select.apply(this, arguments) || null);\n  });\n}\n","function remove() {\n  var parent = this.parentNode;\n  if (parent) parent.removeChild(this);\n}\n\nexport default function() {\n  return this.each(remove);\n}\n","function selection_cloneShallow() {\n  var clone = this.cloneNode(false), parent = this.parentNode;\n  return parent ? parent.insertBefore(clone, this.nextSibling) : clone;\n}\n\nfunction selection_cloneDeep() {\n  var clone = this.cloneNode(true), parent = this.parentNode;\n  return parent ? parent.insertBefore(clone, this.nextSibling) : clone;\n}\n\nexport default function(deep) {\n  return this.select(deep ? selection_cloneDeep : selection_cloneShallow);\n}\n","export default function(value) {\n  return arguments.length\n      ? this.property(\"__data__\", value)\n      : this.node().__data__;\n}\n","function contextListener(listener) {\n  return function(event) {\n    listener.call(this, event, this.__data__);\n  };\n}\n\nfunction parseTypenames(typenames) {\n  return typenames.trim().split(/^|\\s+/).map(function(t) {\n    var name = \"\", i = t.indexOf(\".\");\n    if (i >= 0) name = t.slice(i + 1), t = t.slice(0, i);\n    return {type: t, name: name};\n  });\n}\n\nfunction onRemove(typename) {\n  return function() {\n    var on = this.__on;\n    if (!on) return;\n    for (var j = 0, i = -1, m = on.length, o; j < m; ++j) {\n      if (o = on[j], (!typename.type || o.type === typename.type) && o.name === typename.name) {\n        this.removeEventListener(o.type, o.listener, o.options);\n      } else {\n        on[++i] = o;\n      }\n    }\n    if (++i) on.length = i;\n    else delete this.__on;\n  };\n}\n\nfunction onAdd(typename, value, options) {\n  return function() {\n    var on = this.__on, o, listener = contextListener(value);\n    if (on) for (var j = 0, m = on.length; j < m; ++j) {\n      if ((o = on[j]).type === typename.type && o.name === typename.name) {\n        this.removeEventListener(o.type, o.listener, o.options);\n        this.addEventListener(o.type, o.listener = listener, o.options = options);\n        o.value = value;\n        return;\n      }\n    }\n    this.addEventListener(typename.type, listener, options);\n    o = {type: typename.type, name: typename.name, value: value, listener: listener, options: options};\n    if (!on) this.__on = [o];\n    else on.push(o);\n  };\n}\n\nexport default function(typename, value, options) {\n  var typenames = parseTypenames(typename + \"\"), i, n = typenames.length, t;\n\n  if (arguments.length < 2) {\n    var on = this.node().__on;\n    if (on) for (var j = 0, m = on.length, o; j < m; ++j) {\n      for (i = 0, o = on[j]; i < n; ++i) {\n        if ((t = typenames[i]).type === o.type && t.name === o.name) {\n          return o.value;\n        }\n      }\n    }\n    return;\n  }\n\n  on = value ? onAdd : onRemove;\n  for (i = 0; i < n; ++i) this.each(on(typenames[i], value, options));\n  return this;\n}\n","import defaultView from \"../window.js\";\n\nfunction dispatchEvent(node, type, params) {\n  var window = defaultView(node),\n      event = window.CustomEvent;\n\n  if (typeof event === \"function\") {\n    event = new event(type, params);\n  } else {\n    event = window.document.createEvent(\"Event\");\n    if (params) event.initEvent(type, params.bubbles, params.cancelable), event.detail = params.detail;\n    else event.initEvent(type, false, false);\n  }\n\n  node.dispatchEvent(event);\n}\n\nfunction dispatchConstant(type, params) {\n  return function() {\n    return dispatchEvent(this, type, params);\n  };\n}\n\nfunction dispatchFunction(type, params) {\n  return function() {\n    return dispatchEvent(this, type, params.apply(this, arguments));\n  };\n}\n\nexport default function(type, params) {\n  return this.each((typeof params === \"function\"\n      ? dispatchFunction\n      : dispatchConstant)(type, params));\n}\n","export default function*() {\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length, node; i < n; ++i) {\n      if (node = group[i]) yield node;\n    }\n  }\n}\n","import selection_select from \"./select.js\";\nimport selection_selectAll from \"./selectAll.js\";\nimport selection_selectChild from \"./selectChild.js\";\nimport selection_selectChildren from \"./selectChildren.js\";\nimport selection_filter from \"./filter.js\";\nimport selection_data from \"./data.js\";\nimport selection_enter from \"./enter.js\";\nimport selection_exit from \"./exit.js\";\nimport selection_join from \"./join.js\";\nimport selection_merge from \"./merge.js\";\nimport selection_order from \"./order.js\";\nimport selection_sort from \"./sort.js\";\nimport selection_call from \"./call.js\";\nimport selection_nodes from \"./nodes.js\";\nimport selection_node from \"./node.js\";\nimport selection_size from \"./size.js\";\nimport selection_empty from \"./empty.js\";\nimport selection_each from \"./each.js\";\nimport selection_attr from \"./attr.js\";\nimport selection_style from \"./style.js\";\nimport selection_property from \"./property.js\";\nimport selection_classed from \"./classed.js\";\nimport selection_text from \"./text.js\";\nimport selection_html from \"./html.js\";\nimport selection_raise from \"./raise.js\";\nimport selection_lower from \"./lower.js\";\nimport selection_append from \"./append.js\";\nimport selection_insert from \"./insert.js\";\nimport selection_remove from \"./remove.js\";\nimport selection_clone from \"./clone.js\";\nimport selection_datum from \"./datum.js\";\nimport selection_on from \"./on.js\";\nimport selection_dispatch from \"./dispatch.js\";\nimport selection_iterator from \"./iterator.js\";\n\nexport var root = [null];\n\nexport function Selection(groups, parents) {\n  this._groups = groups;\n  this._parents = parents;\n}\n\nfunction selection() {\n  return new Selection([[document.documentElement]], root);\n}\n\nfunction selection_selection() {\n  return this;\n}\n\nSelection.prototype = selection.prototype = {\n  constructor: Selection,\n  select: selection_select,\n  selectAll: selection_selectAll,\n  selectChild: selection_selectChild,\n  selectChildren: selection_selectChildren,\n  filter: selection_filter,\n  data: selection_data,\n  enter: selection_enter,\n  exit: selection_exit,\n  join: selection_join,\n  merge: selection_merge,\n  selection: selection_selection,\n  order: selection_order,\n  sort: selection_sort,\n  call: selection_call,\n  nodes: selection_nodes,\n  node: selection_node,\n  size: selection_size,\n  empty: selection_empty,\n  each: selection_each,\n  attr: selection_attr,\n  style: selection_style,\n  property: selection_property,\n  classed: selection_classed,\n  text: selection_text,\n  html: selection_html,\n  raise: selection_raise,\n  lower: selection_lower,\n  append: selection_append,\n  insert: selection_insert,\n  remove: selection_remove,\n  clone: selection_clone,\n  datum: selection_datum,\n  on: selection_on,\n  dispatch: selection_dispatch,\n  [Symbol.iterator]: selection_iterator\n};\n\nexport default selection;\n","import {Selection, root} from \"./selection/index.js\";\n\nexport default function(selector) {\n  return typeof selector === \"string\"\n      ? new Selection([[document.querySelector(selector)]], [document.documentElement])\n      : new Selection([[selector]], root);\n}\n","export default function(event) {\n  let sourceEvent;\n  while (sourceEvent = event.sourceEvent) event = sourceEvent;\n  return event;\n}\n","import sourceEvent from \"./sourceEvent.js\";\n\nexport default function(event, node) {\n  event = sourceEvent(event);\n  if (node === undefined) node = event.currentTarget;\n  if (node) {\n    var svg = node.ownerSVGElement || node;\n    if (svg.createSVGPoint) {\n      var point = svg.createSVGPoint();\n      point.x = event.clientX, point.y = event.clientY;\n      point = point.matrixTransform(node.getScreenCTM().inverse());\n      return [point.x, point.y];\n    }\n    if (node.getBoundingClientRect) {\n      var rect = node.getBoundingClientRect();\n      return [event.clientX - rect.left - node.clientLeft, event.clientY - rect.top - node.clientTop];\n    }\n  }\n  return [event.pageX, event.pageY];\n}\n","// These are typically used in conjunction with noevent to ensure that we can\n// preventDefault on the event.\nexport const nonpassive = {passive: false};\nexport const nonpassivecapture = {capture: true, passive: false};\n\nexport function nopropagation(event) {\n  event.stopImmediatePropagation();\n}\n\nexport default function(event) {\n  event.preventDefault();\n  event.stopImmediatePropagation();\n}\n","import {select} from \"d3-selection\";\nimport noevent, {nonpassivecapture} from \"./noevent.js\";\n\nexport default function(view) {\n  var root = view.document.documentElement,\n      selection = select(view).on(\"dragstart.drag\", noevent, nonpassivecapture);\n  if (\"onselectstart\" in root) {\n    selection.on(\"selectstart.drag\", noevent, nonpassivecapture);\n  } else {\n    root.__noselect = root.style.MozUserSelect;\n    root.style.MozUserSelect = \"none\";\n  }\n}\n\nexport function yesdrag(view, noclick) {\n  var root = view.document.documentElement,\n      selection = select(view).on(\"dragstart.drag\", null);\n  if (noclick) {\n    selection.on(\"click.drag\", noevent, nonpassivecapture);\n    setTimeout(function() { selection.on(\"click.drag\", null); }, 0);\n  }\n  if (\"onselectstart\" in root) {\n    selection.on(\"selectstart.drag\", null);\n  } else {\n    root.style.MozUserSelect = root.__noselect;\n    delete root.__noselect;\n  }\n}\n","export default x => () => x;\n","export default function DragEvent(type, {\n  sourceEvent,\n  subject,\n  target,\n  identifier,\n  active,\n  x, y, dx, dy,\n  dispatch\n}) {\n  Object.defineProperties(this, {\n    type: {value: type, enumerable: true, configurable: true},\n    sourceEvent: {value: sourceEvent, enumerable: true, configurable: true},\n    subject: {value: subject, enumerable: true, configurable: true},\n    target: {value: target, enumerable: true, configurable: true},\n    identifier: {value: identifier, enumerable: true, configurable: true},\n    active: {value: active, enumerable: true, configurable: true},\n    x: {value: x, enumerable: true, configurable: true},\n    y: {value: y, enumerable: true, configurable: true},\n    dx: {value: dx, enumerable: true, configurable: true},\n    dy: {value: dy, enumerable: true, configurable: true},\n    _: {value: dispatch}\n  });\n}\n\nDragEvent.prototype.on = function() {\n  var value = this._.on.apply(this._, arguments);\n  return value === this._ ? this : value;\n};\n","import {dispatch} from \"d3-dispatch\";\nimport {select, pointer} from \"d3-selection\";\nimport nodrag, {yesdrag} from \"./nodrag.js\";\nimport noevent, {nonpassive, nonpassivecapture, nopropagation} from \"./noevent.js\";\nimport constant from \"./constant.js\";\nimport DragEvent from \"./event.js\";\n\n// Ignore right-click, since that should open the context menu.\nfunction defaultFilter(event) {\n  return !event.ctrlKey && !event.button;\n}\n\nfunction defaultContainer() {\n  return this.parentNode;\n}\n\nfunction defaultSubject(event, d) {\n  return d == null ? {x: event.x, y: event.y} : d;\n}\n\nfunction defaultTouchable() {\n  return navigator.maxTouchPoints || (\"ontouchstart\" in this);\n}\n\nexport default function() {\n  var filter = defaultFilter,\n      container = defaultContainer,\n      subject = defaultSubject,\n      touchable = defaultTouchable,\n      gestures = {},\n      listeners = dispatch(\"start\", \"drag\", \"end\"),\n      active = 0,\n      mousedownx,\n      mousedowny,\n      mousemoving,\n      touchending,\n      clickDistance2 = 0;\n\n  function drag(selection) {\n    selection\n        .on(\"mousedown.drag\", mousedowned)\n      .filter(touchable)\n        .on(\"touchstart.drag\", touchstarted)\n        .on(\"touchmove.drag\", touchmoved, nonpassive)\n        .on(\"touchend.drag touchcancel.drag\", touchended)\n        .style(\"touch-action\", \"none\")\n        .style(\"-webkit-tap-highlight-color\", \"rgba(0,0,0,0)\");\n  }\n\n  function mousedowned(event, d) {\n    if (touchending || !filter.call(this, event, d)) return;\n    var gesture = beforestart(this, container.call(this, event, d), event, d, \"mouse\");\n    if (!gesture) return;\n    select(event.view)\n      .on(\"mousemove.drag\", mousemoved, nonpassivecapture)\n      .on(\"mouseup.drag\", mouseupped, nonpassivecapture);\n    nodrag(event.view);\n    nopropagation(event);\n    mousemoving = false;\n    mousedownx = event.clientX;\n    mousedowny = event.clientY;\n    gesture(\"start\", event);\n  }\n\n  function mousemoved(event) {\n    noevent(event);\n    if (!mousemoving) {\n      var dx = event.clientX - mousedownx, dy = event.clientY - mousedowny;\n      mousemoving = dx * dx + dy * dy > clickDistance2;\n    }\n    gestures.mouse(\"drag\", event);\n  }\n\n  function mouseupped(event) {\n    select(event.view).on(\"mousemove.drag mouseup.drag\", null);\n    yesdrag(event.view, mousemoving);\n    noevent(event);\n    gestures.mouse(\"end\", event);\n  }\n\n  function touchstarted(event, d) {\n    if (!filter.call(this, event, d)) return;\n    var touches = event.changedTouches,\n        c = container.call(this, event, d),\n        n = touches.length, i, gesture;\n\n    for (i = 0; i < n; ++i) {\n      if (gesture = beforestart(this, c, event, d, touches[i].identifier, touches[i])) {\n        nopropagation(event);\n        gesture(\"start\", event, touches[i]);\n      }\n    }\n  }\n\n  function touchmoved(event) {\n    var touches = event.changedTouches,\n        n = touches.length, i, gesture;\n\n    for (i = 0; i < n; ++i) {\n      if (gesture = gestures[touches[i].identifier]) {\n        noevent(event);\n        gesture(\"drag\", event, touches[i]);\n      }\n    }\n  }\n\n  function touchended(event) {\n    var touches = event.changedTouches,\n        n = touches.length, i, gesture;\n\n    if (touchending) clearTimeout(touchending);\n    touchending = setTimeout(function() { touchending = null; }, 500); // Ghost clicks are delayed!\n    for (i = 0; i < n; ++i) {\n      if (gesture = gestures[touches[i].identifier]) {\n        nopropagation(event);\n        gesture(\"end\", event, touches[i]);\n      }\n    }\n  }\n\n  function beforestart(that, container, event, d, identifier, touch) {\n    var dispatch = listeners.copy(),\n        p = pointer(touch || event, container), dx, dy,\n        s;\n\n    if ((s = subject.call(that, new DragEvent(\"beforestart\", {\n        sourceEvent: event,\n        target: drag,\n        identifier,\n        active,\n        x: p[0],\n        y: p[1],\n        dx: 0,\n        dy: 0,\n        dispatch\n      }), d)) == null) return;\n\n    dx = s.x - p[0] || 0;\n    dy = s.y - p[1] || 0;\n\n    return function gesture(type, event, touch) {\n      var p0 = p, n;\n      switch (type) {\n        case \"start\": gestures[identifier] = gesture, n = active++; break;\n        case \"end\": delete gestures[identifier], --active; // falls through\n        case \"drag\": p = pointer(touch || event, container), n = active; break;\n      }\n      dispatch.call(\n        type,\n        that,\n        new DragEvent(type, {\n          sourceEvent: event,\n          subject: s,\n          target: drag,\n          identifier,\n          active: n,\n          x: p[0] + dx,\n          y: p[1] + dy,\n          dx: p[0] - p0[0],\n          dy: p[1] - p0[1],\n          dispatch\n        }),\n        d\n      );\n    };\n  }\n\n  drag.filter = function(_) {\n    return arguments.length ? (filter = typeof _ === \"function\" ? _ : constant(!!_), drag) : filter;\n  };\n\n  drag.container = function(_) {\n    return arguments.length ? (container = typeof _ === \"function\" ? _ : constant(_), drag) : container;\n  };\n\n  drag.subject = function(_) {\n    return arguments.length ? (subject = typeof _ === \"function\" ? _ : constant(_), drag) : subject;\n  };\n\n  drag.touchable = function(_) {\n    return arguments.length ? (touchable = typeof _ === \"function\" ? _ : constant(!!_), drag) : touchable;\n  };\n\n  drag.on = function() {\n    var value = listeners.on.apply(listeners, arguments);\n    return value === listeners ? drag : value;\n  };\n\n  drag.clickDistance = function(_) {\n    return arguments.length ? (clickDistance2 = (_ = +_) * _, drag) : Math.sqrt(clickDistance2);\n  };\n\n  return drag;\n}\n","export default function(constructor, factory, prototype) {\n  constructor.prototype = factory.prototype = prototype;\n  prototype.constructor = constructor;\n}\n\nexport function extend(parent, definition) {\n  var prototype = Object.create(parent.prototype);\n  for (var key in definition) prototype[key] = definition[key];\n  return prototype;\n}\n","import define, {extend} from \"./define.js\";\n\nexport function Color() {}\n\nexport var darker = 0.7;\nexport var brighter = 1 / darker;\n\nvar reI = \"\\\\s*([+-]?\\\\d+)\\\\s*\",\n    reN = \"\\\\s*([+-]?(?:\\\\d*\\\\.)?\\\\d+(?:[eE][+-]?\\\\d+)?)\\\\s*\",\n    reP = \"\\\\s*([+-]?(?:\\\\d*\\\\.)?\\\\d+(?:[eE][+-]?\\\\d+)?)%\\\\s*\",\n    reHex = /^#([0-9a-f]{3,8})$/,\n    reRgbInteger = new RegExp(`^rgb\\\\(${reI},${reI},${reI}\\\\)$`),\n    reRgbPercent = new RegExp(`^rgb\\\\(${reP},${reP},${reP}\\\\)$`),\n    reRgbaInteger = new RegExp(`^rgba\\\\(${reI},${reI},${reI},${reN}\\\\)$`),\n    reRgbaPercent = new RegExp(`^rgba\\\\(${reP},${reP},${reP},${reN}\\\\)$`),\n    reHslPercent = new RegExp(`^hsl\\\\(${reN},${reP},${reP}\\\\)$`),\n    reHslaPercent = new RegExp(`^hsla\\\\(${reN},${reP},${reP},${reN}\\\\)$`);\n\nvar named = {\n  aliceblue: 0xf0f8ff,\n  antiquewhite: 0xfaebd7,\n  aqua: 0x00ffff,\n  aquamarine: 0x7fffd4,\n  azure: 0xf0ffff,\n  beige: 0xf5f5dc,\n  bisque: 0xffe4c4,\n  black: 0x000000,\n  blanchedalmond: 0xffebcd,\n  blue: 0x0000ff,\n  blueviolet: 0x8a2be2,\n  brown: 0xa52a2a,\n  burlywood: 0xdeb887,\n  cadetblue: 0x5f9ea0,\n  chartreuse: 0x7fff00,\n  chocolate: 0xd2691e,\n  coral: 0xff7f50,\n  cornflowerblue: 0x6495ed,\n  cornsilk: 0xfff8dc,\n  crimson: 0xdc143c,\n  cyan: 0x00ffff,\n  darkblue: 0x00008b,\n  darkcyan: 0x008b8b,\n  darkgoldenrod: 0xb8860b,\n  darkgray: 0xa9a9a9,\n  darkgreen: 0x006400,\n  darkgrey: 0xa9a9a9,\n  darkkhaki: 0xbdb76b,\n  darkmagenta: 0x8b008b,\n  darkolivegreen: 0x556b2f,\n  darkorange: 0xff8c00,\n  darkorchid: 0x9932cc,\n  darkred: 0x8b0000,\n  darksalmon: 0xe9967a,\n  darkseagreen: 0x8fbc8f,\n  darkslateblue: 0x483d8b,\n  darkslategray: 0x2f4f4f,\n  darkslategrey: 0x2f4f4f,\n  darkturquoise: 0x00ced1,\n  darkviolet: 0x9400d3,\n  deeppink: 0xff1493,\n  deepskyblue: 0x00bfff,\n  dimgray: 0x696969,\n  dimgrey: 0x696969,\n  dodgerblue: 0x1e90ff,\n  firebrick: 0xb22222,\n  floralwhite: 0xfffaf0,\n  forestgreen: 0x228b22,\n  fuchsia: 0xff00ff,\n  gainsboro: 0xdcdcdc,\n  ghostwhite: 0xf8f8ff,\n  gold: 0xffd700,\n  goldenrod: 0xdaa520,\n  gray: 0x808080,\n  green: 0x008000,\n  greenyellow: 0xadff2f,\n  grey: 0x808080,\n  honeydew: 0xf0fff0,\n  hotpink: 0xff69b4,\n  indianred: 0xcd5c5c,\n  indigo: 0x4b0082,\n  ivory: 0xfffff0,\n  khaki: 0xf0e68c,\n  lavender: 0xe6e6fa,\n  lavenderblush: 0xfff0f5,\n  lawngreen: 0x7cfc00,\n  lemonchiffon: 0xfffacd,\n  lightblue: 0xadd8e6,\n  lightcoral: 0xf08080,\n  lightcyan: 0xe0ffff,\n  lightgoldenrodyellow: 0xfafad2,\n  lightgray: 0xd3d3d3,\n  lightgreen: 0x90ee90,\n  lightgrey: 0xd3d3d3,\n  lightpink: 0xffb6c1,\n  lightsalmon: 0xffa07a,\n  lightseagreen: 0x20b2aa,\n  lightskyblue: 0x87cefa,\n  lightslategray: 0x778899,\n  lightslategrey: 0x778899,\n  lightsteelblue: 0xb0c4de,\n  lightyellow: 0xffffe0,\n  lime: 0x00ff00,\n  limegreen: 0x32cd32,\n  linen: 0xfaf0e6,\n  magenta: 0xff00ff,\n  maroon: 0x800000,\n  mediumaquamarine: 0x66cdaa,\n  mediumblue: 0x0000cd,\n  mediumorchid: 0xba55d3,\n  mediumpurple: 0x9370db,\n  mediumseagreen: 0x3cb371,\n  mediumslateblue: 0x7b68ee,\n  mediumspringgreen: 0x00fa9a,\n  mediumturquoise: 0x48d1cc,\n  mediumvioletred: 0xc71585,\n  midnightblue: 0x191970,\n  mintcream: 0xf5fffa,\n  mistyrose: 0xffe4e1,\n  moccasin: 0xffe4b5,\n  navajowhite: 0xffdead,\n  navy: 0x000080,\n  oldlace: 0xfdf5e6,\n  olive: 0x808000,\n  olivedrab: 0x6b8e23,\n  orange: 0xffa500,\n  orangered: 0xff4500,\n  orchid: 0xda70d6,\n  palegoldenrod: 0xeee8aa,\n  palegreen: 0x98fb98,\n  paleturquoise: 0xafeeee,\n  palevioletred: 0xdb7093,\n  papayawhip: 0xffefd5,\n  peachpuff: 0xffdab9,\n  peru: 0xcd853f,\n  pink: 0xffc0cb,\n  plum: 0xdda0dd,\n  powderblue: 0xb0e0e6,\n  purple: 0x800080,\n  rebeccapurple: 0x663399,\n  red: 0xff0000,\n  rosybrown: 0xbc8f8f,\n  royalblue: 0x4169e1,\n  saddlebrown: 0x8b4513,\n  salmon: 0xfa8072,\n  sandybrown: 0xf4a460,\n  seagreen: 0x2e8b57,\n  seashell: 0xfff5ee,\n  sienna: 0xa0522d,\n  silver: 0xc0c0c0,\n  skyblue: 0x87ceeb,\n  slateblue: 0x6a5acd,\n  slategray: 0x708090,\n  slategrey: 0x708090,\n  snow: 0xfffafa,\n  springgreen: 0x00ff7f,\n  steelblue: 0x4682b4,\n  tan: 0xd2b48c,\n  teal: 0x008080,\n  thistle: 0xd8bfd8,\n  tomato: 0xff6347,\n  turquoise: 0x40e0d0,\n  violet: 0xee82ee,\n  wheat: 0xf5deb3,\n  white: 0xffffff,\n  whitesmoke: 0xf5f5f5,\n  yellow: 0xffff00,\n  yellowgreen: 0x9acd32\n};\n\ndefine(Color, color, {\n  copy(channels) {\n    return Object.assign(new this.constructor, this, channels);\n  },\n  displayable() {\n    return this.rgb().displayable();\n  },\n  hex: color_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: color_formatHex,\n  formatHex8: color_formatHex8,\n  formatHsl: color_formatHsl,\n  formatRgb: color_formatRgb,\n  toString: color_formatRgb\n});\n\nfunction color_formatHex() {\n  return this.rgb().formatHex();\n}\n\nfunction color_formatHex8() {\n  return this.rgb().formatHex8();\n}\n\nfunction color_formatHsl() {\n  return hslConvert(this).formatHsl();\n}\n\nfunction color_formatRgb() {\n  return this.rgb().formatRgb();\n}\n\nexport default function color(format) {\n  var m, l;\n  format = (format + \"\").trim().toLowerCase();\n  return (m = reHex.exec(format)) ? (l = m[1].length, m = parseInt(m[1], 16), l === 6 ? rgbn(m) // #ff0000\n      : l === 3 ? new Rgb((m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), ((m & 0xf) << 4) | (m & 0xf), 1) // #f00\n      : l === 8 ? rgba(m >> 24 & 0xff, m >> 16 & 0xff, m >> 8 & 0xff, (m & 0xff) / 0xff) // #ff000000\n      : l === 4 ? rgba((m >> 12 & 0xf) | (m >> 8 & 0xf0), (m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), (((m & 0xf) << 4) | (m & 0xf)) / 0xff) // #f000\n      : null) // invalid hex\n      : (m = reRgbInteger.exec(format)) ? new Rgb(m[1], m[2], m[3], 1) // rgb(255, 0, 0)\n      : (m = reRgbPercent.exec(format)) ? new Rgb(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, 1) // rgb(100%, 0%, 0%)\n      : (m = reRgbaInteger.exec(format)) ? rgba(m[1], m[2], m[3], m[4]) // rgba(255, 0, 0, 1)\n      : (m = reRgbaPercent.exec(format)) ? rgba(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, m[4]) // rgb(100%, 0%, 0%, 1)\n      : (m = reHslPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, 1) // hsl(120, 50%, 50%)\n      : (m = reHslaPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, m[4]) // hsla(120, 50%, 50%, 1)\n      : named.hasOwnProperty(format) ? rgbn(named[format]) // eslint-disable-line no-prototype-builtins\n      : format === \"transparent\" ? new Rgb(NaN, NaN, NaN, 0)\n      : null;\n}\n\nfunction rgbn(n) {\n  return new Rgb(n >> 16 & 0xff, n >> 8 & 0xff, n & 0xff, 1);\n}\n\nfunction rgba(r, g, b, a) {\n  if (a <= 0) r = g = b = NaN;\n  return new Rgb(r, g, b, a);\n}\n\nexport function rgbConvert(o) {\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Rgb;\n  o = o.rgb();\n  return new Rgb(o.r, o.g, o.b, o.opacity);\n}\n\nexport function rgb(r, g, b, opacity) {\n  return arguments.length === 1 ? rgbConvert(r) : new Rgb(r, g, b, opacity == null ? 1 : opacity);\n}\n\nexport function Rgb(r, g, b, opacity) {\n  this.r = +r;\n  this.g = +g;\n  this.b = +b;\n  this.opacity = +opacity;\n}\n\ndefine(Rgb, rgb, extend(Color, {\n  brighter(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  darker(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  rgb() {\n    return this;\n  },\n  clamp() {\n    return new Rgb(clampi(this.r), clampi(this.g), clampi(this.b), clampa(this.opacity));\n  },\n  displayable() {\n    return (-0.5 <= this.r && this.r < 255.5)\n        && (-0.5 <= this.g && this.g < 255.5)\n        && (-0.5 <= this.b && this.b < 255.5)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  hex: rgb_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: rgb_formatHex,\n  formatHex8: rgb_formatHex8,\n  formatRgb: rgb_formatRgb,\n  toString: rgb_formatRgb\n}));\n\nfunction rgb_formatHex() {\n  return `#${hex(this.r)}${hex(this.g)}${hex(this.b)}`;\n}\n\nfunction rgb_formatHex8() {\n  return `#${hex(this.r)}${hex(this.g)}${hex(this.b)}${hex((isNaN(this.opacity) ? 1 : this.opacity) * 255)}`;\n}\n\nfunction rgb_formatRgb() {\n  const a = clampa(this.opacity);\n  return `${a === 1 ? \"rgb(\" : \"rgba(\"}${clampi(this.r)}, ${clampi(this.g)}, ${clampi(this.b)}${a === 1 ? \")\" : `, ${a})`}`;\n}\n\nfunction clampa(opacity) {\n  return isNaN(opacity) ? 1 : Math.max(0, Math.min(1, opacity));\n}\n\nfunction clampi(value) {\n  return Math.max(0, Math.min(255, Math.round(value) || 0));\n}\n\nfunction hex(value) {\n  value = clampi(value);\n  return (value < 16 ? \"0\" : \"\") + value.toString(16);\n}\n\nfunction hsla(h, s, l, a) {\n  if (a <= 0) h = s = l = NaN;\n  else if (l <= 0 || l >= 1) h = s = NaN;\n  else if (s <= 0) h = NaN;\n  return new Hsl(h, s, l, a);\n}\n\nexport function hslConvert(o) {\n  if (o instanceof Hsl) return new Hsl(o.h, o.s, o.l, o.opacity);\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Hsl;\n  if (o instanceof Hsl) return o;\n  o = o.rgb();\n  var r = o.r / 255,\n      g = o.g / 255,\n      b = o.b / 255,\n      min = Math.min(r, g, b),\n      max = Math.max(r, g, b),\n      h = NaN,\n      s = max - min,\n      l = (max + min) / 2;\n  if (s) {\n    if (r === max) h = (g - b) / s + (g < b) * 6;\n    else if (g === max) h = (b - r) / s + 2;\n    else h = (r - g) / s + 4;\n    s /= l < 0.5 ? max + min : 2 - max - min;\n    h *= 60;\n  } else {\n    s = l > 0 && l < 1 ? 0 : h;\n  }\n  return new Hsl(h, s, l, o.opacity);\n}\n\nexport function hsl(h, s, l, opacity) {\n  return arguments.length === 1 ? hslConvert(h) : new Hsl(h, s, l, opacity == null ? 1 : opacity);\n}\n\nfunction Hsl(h, s, l, opacity) {\n  this.h = +h;\n  this.s = +s;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\ndefine(Hsl, hsl, extend(Color, {\n  brighter(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  darker(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  rgb() {\n    var h = this.h % 360 + (this.h < 0) * 360,\n        s = isNaN(h) || isNaN(this.s) ? 0 : this.s,\n        l = this.l,\n        m2 = l + (l < 0.5 ? l : 1 - l) * s,\n        m1 = 2 * l - m2;\n    return new Rgb(\n      hsl2rgb(h >= 240 ? h - 240 : h + 120, m1, m2),\n      hsl2rgb(h, m1, m2),\n      hsl2rgb(h < 120 ? h + 240 : h - 120, m1, m2),\n      this.opacity\n    );\n  },\n  clamp() {\n    return new Hsl(clamph(this.h), clampt(this.s), clampt(this.l), clampa(this.opacity));\n  },\n  displayable() {\n    return (0 <= this.s && this.s <= 1 || isNaN(this.s))\n        && (0 <= this.l && this.l <= 1)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  formatHsl() {\n    const a = clampa(this.opacity);\n    return `${a === 1 ? \"hsl(\" : \"hsla(\"}${clamph(this.h)}, ${clampt(this.s) * 100}%, ${clampt(this.l) * 100}%${a === 1 ? \")\" : `, ${a})`}`;\n  }\n}));\n\nfunction clamph(value) {\n  value = (value || 0) % 360;\n  return value < 0 ? value + 360 : value;\n}\n\nfunction clampt(value) {\n  return Math.max(0, Math.min(1, value || 0));\n}\n\n/* From FvD 13.37, CSS Color Module Level 3 */\nfunction hsl2rgb(h, m1, m2) {\n  return (h < 60 ? m1 + (m2 - m1) * h / 60\n      : h < 180 ? m2\n      : h < 240 ? m1 + (m2 - m1) * (240 - h) / 60\n      : m1) * 255;\n}\n","export default x => () => x;\n","import constant from \"./constant.js\";\n\nfunction linear(a, d) {\n  return function(t) {\n    return a + t * d;\n  };\n}\n\nfunction exponential(a, b, y) {\n  return a = Math.pow(a, y), b = Math.pow(b, y) - a, y = 1 / y, function(t) {\n    return Math.pow(a + t * b, y);\n  };\n}\n\nexport function hue(a, b) {\n  var d = b - a;\n  return d ? linear(a, d > 180 || d < -180 ? d - 360 * Math.round(d / 360) : d) : constant(isNaN(a) ? b : a);\n}\n\nexport function gamma(y) {\n  return (y = +y) === 1 ? nogamma : function(a, b) {\n    return b - a ? exponential(a, b, y) : constant(isNaN(a) ? b : a);\n  };\n}\n\nexport default function nogamma(a, b) {\n  var d = b - a;\n  return d ? linear(a, d) : constant(isNaN(a) ? b : a);\n}\n","import {rgb as colorRgb} from \"d3-color\";\nimport basis from \"./basis.js\";\nimport basisClosed from \"./basisClosed.js\";\nimport nogamma, {gamma} from \"./color.js\";\n\nexport default (function rgbGamma(y) {\n  var color = gamma(y);\n\n  function rgb(start, end) {\n    var r = color((start = colorRgb(start)).r, (end = colorRgb(end)).r),\n        g = color(start.g, end.g),\n        b = color(start.b, end.b),\n        opacity = nogamma(start.opacity, end.opacity);\n    return function(t) {\n      start.r = r(t);\n      start.g = g(t);\n      start.b = b(t);\n      start.opacity = opacity(t);\n      return start + \"\";\n    };\n  }\n\n  rgb.gamma = rgbGamma;\n\n  return rgb;\n})(1);\n\nfunction rgbSpline(spline) {\n  return function(colors) {\n    var n = colors.length,\n        r = new Array(n),\n        g = new Array(n),\n        b = new Array(n),\n        i, color;\n    for (i = 0; i < n; ++i) {\n      color = colorRgb(colors[i]);\n      r[i] = color.r || 0;\n      g[i] = color.g || 0;\n      b[i] = color.b || 0;\n    }\n    r = spline(r);\n    g = spline(g);\n    b = spline(b);\n    color.opacity = 1;\n    return function(t) {\n      color.r = r(t);\n      color.g = g(t);\n      color.b = b(t);\n      return color + \"\";\n    };\n  };\n}\n\nexport var rgbBasis = rgbSpline(basis);\nexport var rgbBasisClosed = rgbSpline(basisClosed);\n","export default function(a, b) {\n  return a = +a, b = +b, function(t) {\n    return a * (1 - t) + b * t;\n  };\n}\n","import number from \"./number.js\";\n\nvar reA = /[-+]?(?:\\d+\\.?\\d*|\\.?\\d+)(?:[eE][-+]?\\d+)?/g,\n    reB = new RegExp(reA.source, \"g\");\n\nfunction zero(b) {\n  return function() {\n    return b;\n  };\n}\n\nfunction one(b) {\n  return function(t) {\n    return b(t) + \"\";\n  };\n}\n\nexport default function(a, b) {\n  var bi = reA.lastIndex = reB.lastIndex = 0, // scan index for next number in b\n      am, // current match in a\n      bm, // current match in b\n      bs, // string preceding current number in b, if any\n      i = -1, // index in s\n      s = [], // string constants and placeholders\n      q = []; // number interpolators\n\n  // Coerce inputs to strings.\n  a = a + \"\", b = b + \"\";\n\n  // Interpolate pairs of numbers in a & b.\n  while ((am = reA.exec(a))\n      && (bm = reB.exec(b))) {\n    if ((bs = bm.index) > bi) { // a string precedes the next number in b\n      bs = b.slice(bi, bs);\n      if (s[i]) s[i] += bs; // coalesce with previous string\n      else s[++i] = bs;\n    }\n    if ((am = am[0]) === (bm = bm[0])) { // numbers in a & b match\n      if (s[i]) s[i] += bm; // coalesce with previous string\n      else s[++i] = bm;\n    } else { // interpolate non-matching numbers\n      s[++i] = null;\n      q.push({i: i, x: number(am, bm)});\n    }\n    bi = reB.lastIndex;\n  }\n\n  // Add remains of b.\n  if (bi < b.length) {\n    bs = b.slice(bi);\n    if (s[i]) s[i] += bs; // coalesce with previous string\n    else s[++i] = bs;\n  }\n\n  // Special optimization for only a single match.\n  // Otherwise, interpolate each of the numbers and rejoin the string.\n  return s.length < 2 ? (q[0]\n      ? one(q[0].x)\n      : zero(b))\n      : (b = q.length, function(t) {\n          for (var i = 0, o; i < b; ++i) s[(o = q[i]).i] = o.x(t);\n          return s.join(\"\");\n        });\n}\n","var degrees = 180 / Math.PI;\n\nexport var identity = {\n  translateX: 0,\n  translateY: 0,\n  rotate: 0,\n  skewX: 0,\n  scaleX: 1,\n  scaleY: 1\n};\n\nexport default function(a, b, c, d, e, f) {\n  var scaleX, scaleY, skewX;\n  if (scaleX = Math.sqrt(a * a + b * b)) a /= scaleX, b /= scaleX;\n  if (skewX = a * c + b * d) c -= a * skewX, d -= b * skewX;\n  if (scaleY = Math.sqrt(c * c + d * d)) c /= scaleY, d /= scaleY, skewX /= scaleY;\n  if (a * d < b * c) a = -a, b = -b, skewX = -skewX, scaleX = -scaleX;\n  return {\n    translateX: e,\n    translateY: f,\n    rotate: Math.atan2(b, a) * degrees,\n    skewX: Math.atan(skewX) * degrees,\n    scaleX: scaleX,\n    scaleY: scaleY\n  };\n}\n","import decompose, {identity} from \"./decompose.js\";\n\nvar svgNode;\n\n/* eslint-disable no-undef */\nexport function parseCss(value) {\n  const m = new (typeof DOMMatrix === \"function\" ? DOMMatrix : WebKitCSSMatrix)(value + \"\");\n  return m.isIdentity ? identity : decompose(m.a, m.b, m.c, m.d, m.e, m.f);\n}\n\nexport function parseSvg(value) {\n  if (value == null) return identity;\n  if (!svgNode) svgNode = document.createElementNS(\"http://www.w3.org/2000/svg\", \"g\");\n  svgNode.setAttribute(\"transform\", value);\n  if (!(value = svgNode.transform.baseVal.consolidate())) return identity;\n  value = value.matrix;\n  return decompose(value.a, value.b, value.c, value.d, value.e, value.f);\n}\n","import number from \"../number.js\";\nimport {parseCss, parseSvg} from \"./parse.js\";\n\nfunction interpolateTransform(parse, pxComma, pxParen, degParen) {\n\n  function pop(s) {\n    return s.length ? s.pop() + \" \" : \"\";\n  }\n\n  function translate(xa, ya, xb, yb, s, q) {\n    if (xa !== xb || ya !== yb) {\n      var i = s.push(\"translate(\", null, pxComma, null, pxParen);\n      q.push({i: i - 4, x: number(xa, xb)}, {i: i - 2, x: number(ya, yb)});\n    } else if (xb || yb) {\n      s.push(\"translate(\" + xb + pxComma + yb + pxParen);\n    }\n  }\n\n  function rotate(a, b, s, q) {\n    if (a !== b) {\n      if (a - b > 180) b += 360; else if (b - a > 180) a += 360; // shortest path\n      q.push({i: s.push(pop(s) + \"rotate(\", null, degParen) - 2, x: number(a, b)});\n    } else if (b) {\n      s.push(pop(s) + \"rotate(\" + b + degParen);\n    }\n  }\n\n  function skewX(a, b, s, q) {\n    if (a !== b) {\n      q.push({i: s.push(pop(s) + \"skewX(\", null, degParen) - 2, x: number(a, b)});\n    } else if (b) {\n      s.push(pop(s) + \"skewX(\" + b + degParen);\n    }\n  }\n\n  function scale(xa, ya, xb, yb, s, q) {\n    if (xa !== xb || ya !== yb) {\n      var i = s.push(pop(s) + \"scale(\", null, \",\", null, \")\");\n      q.push({i: i - 4, x: number(xa, xb)}, {i: i - 2, x: number(ya, yb)});\n    } else if (xb !== 1 || yb !== 1) {\n      s.push(pop(s) + \"scale(\" + xb + \",\" + yb + \")\");\n    }\n  }\n\n  return function(a, b) {\n    var s = [], // string constants and placeholders\n        q = []; // number interpolators\n    a = parse(a), b = parse(b);\n    translate(a.translateX, a.translateY, b.translateX, b.translateY, s, q);\n    rotate(a.rotate, b.rotate, s, q);\n    skewX(a.skewX, b.skewX, s, q);\n    scale(a.scaleX, a.scaleY, b.scaleX, b.scaleY, s, q);\n    a = b = null; // gc\n    return function(t) {\n      var i = -1, n = q.length, o;\n      while (++i < n) s[(o = q[i]).i] = o.x(t);\n      return s.join(\"\");\n    };\n  };\n}\n\nexport var interpolateTransformCss = interpolateTransform(parseCss, \"px, \", \"px)\", \"deg)\");\nexport var interpolateTransformSvg = interpolateTransform(parseSvg, \", \", \")\", \")\");\n","var epsilon2 = 1e-12;\n\nfunction cosh(x) {\n  return ((x = Math.exp(x)) + 1 / x) / 2;\n}\n\nfunction sinh(x) {\n  return ((x = Math.exp(x)) - 1 / x) / 2;\n}\n\nfunction tanh(x) {\n  return ((x = Math.exp(2 * x)) - 1) / (x + 1);\n}\n\nexport default (function zoomRho(rho, rho2, rho4) {\n\n  // p0 = [ux0, uy0, w0]\n  // p1 = [ux1, uy1, w1]\n  function zoom(p0, p1) {\n    var ux0 = p0[0], uy0 = p0[1], w0 = p0[2],\n        ux1 = p1[0], uy1 = p1[1], w1 = p1[2],\n        dx = ux1 - ux0,\n        dy = uy1 - uy0,\n        d2 = dx * dx + dy * dy,\n        i,\n        S;\n\n    // Special case for u0  u1.\n    if (d2 < epsilon2) {\n      S = Math.log(w1 / w0) / rho;\n      i = function(t) {\n        return [\n          ux0 + t * dx,\n          uy0 + t * dy,\n          w0 * Math.exp(rho * t * S)\n        ];\n      }\n    }\n\n    // General case.\n    else {\n      var d1 = Math.sqrt(d2),\n          b0 = (w1 * w1 - w0 * w0 + rho4 * d2) / (2 * w0 * rho2 * d1),\n          b1 = (w1 * w1 - w0 * w0 - rho4 * d2) / (2 * w1 * rho2 * d1),\n          r0 = Math.log(Math.sqrt(b0 * b0 + 1) - b0),\n          r1 = Math.log(Math.sqrt(b1 * b1 + 1) - b1);\n      S = (r1 - r0) / rho;\n      i = function(t) {\n        var s = t * S,\n            coshr0 = cosh(r0),\n            u = w0 / (rho2 * d1) * (coshr0 * tanh(rho * s + r0) - sinh(r0));\n        return [\n          ux0 + u * dx,\n          uy0 + u * dy,\n          w0 * coshr0 / cosh(rho * s + r0)\n        ];\n      }\n    }\n\n    i.duration = S * 1000 * rho / Math.SQRT2;\n\n    return i;\n  }\n\n  zoom.rho = function(_) {\n    var _1 = Math.max(1e-3, +_), _2 = _1 * _1, _4 = _2 * _2;\n    return zoomRho(_1, _2, _4);\n  };\n\n  return zoom;\n})(Math.SQRT2, 2, 4);\n","var frame = 0, // is an animation frame pending?\n    timeout = 0, // is a timeout pending?\n    interval = 0, // are any timers active?\n    pokeDelay = 1000, // how frequently we check for clock skew\n    taskHead,\n    taskTail,\n    clockLast = 0,\n    clockNow = 0,\n    clockSkew = 0,\n    clock = typeof performance === \"object\" && performance.now ? performance : Date,\n    setFrame = typeof window === \"object\" && window.requestAnimationFrame ? window.requestAnimationFrame.bind(window) : function(f) { setTimeout(f, 17); };\n\nexport function now() {\n  return clockNow || (setFrame(clearNow), clockNow = clock.now() + clockSkew);\n}\n\nfunction clearNow() {\n  clockNow = 0;\n}\n\nexport function Timer() {\n  this._call =\n  this._time =\n  this._next = null;\n}\n\nTimer.prototype = timer.prototype = {\n  constructor: Timer,\n  restart: function(callback, delay, time) {\n    if (typeof callback !== \"function\") throw new TypeError(\"callback is not a function\");\n    time = (time == null ? now() : +time) + (delay == null ? 0 : +delay);\n    if (!this._next && taskTail !== this) {\n      if (taskTail) taskTail._next = this;\n      else taskHead = this;\n      taskTail = this;\n    }\n    this._call = callback;\n    this._time = time;\n    sleep();\n  },\n  stop: function() {\n    if (this._call) {\n      this._call = null;\n      this._time = Infinity;\n      sleep();\n    }\n  }\n};\n\nexport function timer(callback, delay, time) {\n  var t = new Timer;\n  t.restart(callback, delay, time);\n  return t;\n}\n\nexport function timerFlush() {\n  now(); // Get the current time, if not already set.\n  ++frame; // Pretend weve set an alarm, if we havent already.\n  var t = taskHead, e;\n  while (t) {\n    if ((e = clockNow - t._time) >= 0) t._call.call(undefined, e);\n    t = t._next;\n  }\n  --frame;\n}\n\nfunction wake() {\n  clockNow = (clockLast = clock.now()) + clockSkew;\n  frame = timeout = 0;\n  try {\n    timerFlush();\n  } finally {\n    frame = 0;\n    nap();\n    clockNow = 0;\n  }\n}\n\nfunction poke() {\n  var now = clock.now(), delay = now - clockLast;\n  if (delay > pokeDelay) clockSkew -= delay, clockLast = now;\n}\n\nfunction nap() {\n  var t0, t1 = taskHead, t2, time = Infinity;\n  while (t1) {\n    if (t1._call) {\n      if (time > t1._time) time = t1._time;\n      t0 = t1, t1 = t1._next;\n    } else {\n      t2 = t1._next, t1._next = null;\n      t1 = t0 ? t0._next = t2 : taskHead = t2;\n    }\n  }\n  taskTail = t0;\n  sleep(time);\n}\n\nfunction sleep(time) {\n  if (frame) return; // Soonest alarm already set, or will be.\n  if (timeout) timeout = clearTimeout(timeout);\n  var delay = time - clockNow; // Strictly less than if we recomputed clockNow.\n  if (delay > 24) {\n    if (time < Infinity) timeout = setTimeout(wake, time - clock.now() - clockSkew);\n    if (interval) interval = clearInterval(interval);\n  } else {\n    if (!interval) clockLast = clock.now(), interval = setInterval(poke, pokeDelay);\n    frame = 1, setFrame(wake);\n  }\n}\n","import {Timer} from \"./timer.js\";\n\nexport default function(callback, delay, time) {\n  var t = new Timer;\n  delay = delay == null ? 0 : +delay;\n  t.restart(elapsed => {\n    t.stop();\n    callback(elapsed + delay);\n  }, delay, time);\n  return t;\n}\n","import {dispatch} from \"d3-dispatch\";\nimport {timer, timeout} from \"d3-timer\";\n\nvar emptyOn = dispatch(\"start\", \"end\", \"cancel\", \"interrupt\");\nvar emptyTween = [];\n\nexport var CREATED = 0;\nexport var SCHEDULED = 1;\nexport var STARTING = 2;\nexport var STARTED = 3;\nexport var RUNNING = 4;\nexport var ENDING = 5;\nexport var ENDED = 6;\n\nexport default function(node, name, id, index, group, timing) {\n  var schedules = node.__transition;\n  if (!schedules) node.__transition = {};\n  else if (id in schedules) return;\n  create(node, id, {\n    name: name,\n    index: index, // For context during callback.\n    group: group, // For context during callback.\n    on: emptyOn,\n    tween: emptyTween,\n    time: timing.time,\n    delay: timing.delay,\n    duration: timing.duration,\n    ease: timing.ease,\n    timer: null,\n    state: CREATED\n  });\n}\n\nexport function init(node, id) {\n  var schedule = get(node, id);\n  if (schedule.state > CREATED) throw new Error(\"too late; already scheduled\");\n  return schedule;\n}\n\nexport function set(node, id) {\n  var schedule = get(node, id);\n  if (schedule.state > STARTED) throw new Error(\"too late; already running\");\n  return schedule;\n}\n\nexport function get(node, id) {\n  var schedule = node.__transition;\n  if (!schedule || !(schedule = schedule[id])) throw new Error(\"transition not found\");\n  return schedule;\n}\n\nfunction create(node, id, self) {\n  var schedules = node.__transition,\n      tween;\n\n  // Initialize the self timer when the transition is created.\n  // Note the actual delay is not known until the first callback!\n  schedules[id] = self;\n  self.timer = timer(schedule, 0, self.time);\n\n  function schedule(elapsed) {\n    self.state = SCHEDULED;\n    self.timer.restart(start, self.delay, self.time);\n\n    // If the elapsed delay is less than our first sleep, start immediately.\n    if (self.delay <= elapsed) start(elapsed - self.delay);\n  }\n\n  function start(elapsed) {\n    var i, j, n, o;\n\n    // If the state is not SCHEDULED, then we previously errored on start.\n    if (self.state !== SCHEDULED) return stop();\n\n    for (i in schedules) {\n      o = schedules[i];\n      if (o.name !== self.name) continue;\n\n      // While this element already has a starting transition during this frame,\n      // defer starting an interrupting transition until that transition has a\n      // chance to tick (and possibly end); see d3/d3-transition#54!\n      if (o.state === STARTED) return timeout(start);\n\n      // Interrupt the active transition, if any.\n      if (o.state === RUNNING) {\n        o.state = ENDED;\n        o.timer.stop();\n        o.on.call(\"interrupt\", node, node.__data__, o.index, o.group);\n        delete schedules[i];\n      }\n\n      // Cancel any pre-empted transitions.\n      else if (+i < id) {\n        o.state = ENDED;\n        o.timer.stop();\n        o.on.call(\"cancel\", node, node.__data__, o.index, o.group);\n        delete schedules[i];\n      }\n    }\n\n    // Defer the first tick to end of the current frame; see d3/d3#1576.\n    // Note the transition may be canceled after start and before the first tick!\n    // Note this must be scheduled before the start event; see d3/d3-transition#16!\n    // Assuming this is successful, subsequent callbacks go straight to tick.\n    timeout(function() {\n      if (self.state === STARTED) {\n        self.state = RUNNING;\n        self.timer.restart(tick, self.delay, self.time);\n        tick(elapsed);\n      }\n    });\n\n    // Dispatch the start event.\n    // Note this must be done before the tween are initialized.\n    self.state = STARTING;\n    self.on.call(\"start\", node, node.__data__, self.index, self.group);\n    if (self.state !== STARTING) return; // interrupted\n    self.state = STARTED;\n\n    // Initialize the tween, deleting null tween.\n    tween = new Array(n = self.tween.length);\n    for (i = 0, j = -1; i < n; ++i) {\n      if (o = self.tween[i].value.call(node, node.__data__, self.index, self.group)) {\n        tween[++j] = o;\n      }\n    }\n    tween.length = j + 1;\n  }\n\n  function tick(elapsed) {\n    var t = elapsed < self.duration ? self.ease.call(null, elapsed / self.duration) : (self.timer.restart(stop), self.state = ENDING, 1),\n        i = -1,\n        n = tween.length;\n\n    while (++i < n) {\n      tween[i].call(node, t);\n    }\n\n    // Dispatch the end event.\n    if (self.state === ENDING) {\n      self.on.call(\"end\", node, node.__data__, self.index, self.group);\n      stop();\n    }\n  }\n\n  function stop() {\n    self.state = ENDED;\n    self.timer.stop();\n    delete schedules[id];\n    for (var i in schedules) return; // eslint-disable-line no-unused-vars\n    delete node.__transition;\n  }\n}\n","import {STARTING, ENDING, ENDED} from \"./transition/schedule.js\";\n\nexport default function(node, name) {\n  var schedules = node.__transition,\n      schedule,\n      active,\n      empty = true,\n      i;\n\n  if (!schedules) return;\n\n  name = name == null ? null : name + \"\";\n\n  for (i in schedules) {\n    if ((schedule = schedules[i]).name !== name) { empty = false; continue; }\n    active = schedule.state > STARTING && schedule.state < ENDING;\n    schedule.state = ENDED;\n    schedule.timer.stop();\n    schedule.on.call(active ? \"interrupt\" : \"cancel\", node, node.__data__, schedule.index, schedule.group);\n    delete schedules[i];\n  }\n\n  if (empty) delete node.__transition;\n}\n","import interrupt from \"../interrupt.js\";\n\nexport default function(name) {\n  return this.each(function() {\n    interrupt(this, name);\n  });\n}\n","import {get, set} from \"./schedule.js\";\n\nfunction tweenRemove(id, name) {\n  var tween0, tween1;\n  return function() {\n    var schedule = set(this, id),\n        tween = schedule.tween;\n\n    // If this node shared tween with the previous node,\n    // just assign the updated shared tween and were done!\n    // Otherwise, copy-on-write.\n    if (tween !== tween0) {\n      tween1 = tween0 = tween;\n      for (var i = 0, n = tween1.length; i < n; ++i) {\n        if (tween1[i].name === name) {\n          tween1 = tween1.slice();\n          tween1.splice(i, 1);\n          break;\n        }\n      }\n    }\n\n    schedule.tween = tween1;\n  };\n}\n\nfunction tweenFunction(id, name, value) {\n  var tween0, tween1;\n  if (typeof value !== \"function\") throw new Error;\n  return function() {\n    var schedule = set(this, id),\n        tween = schedule.tween;\n\n    // If this node shared tween with the previous node,\n    // just assign the updated shared tween and were done!\n    // Otherwise, copy-on-write.\n    if (tween !== tween0) {\n      tween1 = (tween0 = tween).slice();\n      for (var t = {name: name, value: value}, i = 0, n = tween1.length; i < n; ++i) {\n        if (tween1[i].name === name) {\n          tween1[i] = t;\n          break;\n        }\n      }\n      if (i === n) tween1.push(t);\n    }\n\n    schedule.tween = tween1;\n  };\n}\n\nexport default function(name, value) {\n  var id = this._id;\n\n  name += \"\";\n\n  if (arguments.length < 2) {\n    var tween = get(this.node(), id).tween;\n    for (var i = 0, n = tween.length, t; i < n; ++i) {\n      if ((t = tween[i]).name === name) {\n        return t.value;\n      }\n    }\n    return null;\n  }\n\n  return this.each((value == null ? tweenRemove : tweenFunction)(id, name, value));\n}\n\nexport function tweenValue(transition, name, value) {\n  var id = transition._id;\n\n  transition.each(function() {\n    var schedule = set(this, id);\n    (schedule.value || (schedule.value = {}))[name] = value.apply(this, arguments);\n  });\n\n  return function(node) {\n    return get(node, id).value[name];\n  };\n}\n","import {color} from \"d3-color\";\nimport {interpolateNumber, interpolateRgb, interpolateString} from \"d3-interpolate\";\n\nexport default function(a, b) {\n  var c;\n  return (typeof b === \"number\" ? interpolateNumber\n      : b instanceof color ? interpolateRgb\n      : (c = color(b)) ? (b = c, interpolateRgb)\n      : interpolateString)(a, b);\n}\n","import {interpolateTransformSvg as interpolateTransform} from \"d3-interpolate\";\nimport {namespace} from \"d3-selection\";\nimport {tweenValue} from \"./tween.js\";\nimport interpolate from \"./interpolate.js\";\n\nfunction attrRemove(name) {\n  return function() {\n    this.removeAttribute(name);\n  };\n}\n\nfunction attrRemoveNS(fullname) {\n  return function() {\n    this.removeAttributeNS(fullname.space, fullname.local);\n  };\n}\n\nfunction attrConstant(name, interpolate, value1) {\n  var string00,\n      string1 = value1 + \"\",\n      interpolate0;\n  return function() {\n    var string0 = this.getAttribute(name);\n    return string0 === string1 ? null\n        : string0 === string00 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, value1);\n  };\n}\n\nfunction attrConstantNS(fullname, interpolate, value1) {\n  var string00,\n      string1 = value1 + \"\",\n      interpolate0;\n  return function() {\n    var string0 = this.getAttributeNS(fullname.space, fullname.local);\n    return string0 === string1 ? null\n        : string0 === string00 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, value1);\n  };\n}\n\nfunction attrFunction(name, interpolate, value) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0, value1 = value(this), string1;\n    if (value1 == null) return void this.removeAttribute(name);\n    string0 = this.getAttribute(name);\n    string1 = value1 + \"\";\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));\n  };\n}\n\nfunction attrFunctionNS(fullname, interpolate, value) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0, value1 = value(this), string1;\n    if (value1 == null) return void this.removeAttributeNS(fullname.space, fullname.local);\n    string0 = this.getAttributeNS(fullname.space, fullname.local);\n    string1 = value1 + \"\";\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));\n  };\n}\n\nexport default function(name, value) {\n  var fullname = namespace(name), i = fullname === \"transform\" ? interpolateTransform : interpolate;\n  return this.attrTween(name, typeof value === \"function\"\n      ? (fullname.local ? attrFunctionNS : attrFunction)(fullname, i, tweenValue(this, \"attr.\" + name, value))\n      : value == null ? (fullname.local ? attrRemoveNS : attrRemove)(fullname)\n      : (fullname.local ? attrConstantNS : attrConstant)(fullname, i, value));\n}\n","import {namespace} from \"d3-selection\";\n\nfunction attrInterpolate(name, i) {\n  return function(t) {\n    this.setAttribute(name, i.call(this, t));\n  };\n}\n\nfunction attrInterpolateNS(fullname, i) {\n  return function(t) {\n    this.setAttributeNS(fullname.space, fullname.local, i.call(this, t));\n  };\n}\n\nfunction attrTweenNS(fullname, value) {\n  var t0, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t0 = (i0 = i) && attrInterpolateNS(fullname, i);\n    return t0;\n  }\n  tween._value = value;\n  return tween;\n}\n\nfunction attrTween(name, value) {\n  var t0, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t0 = (i0 = i) && attrInterpolate(name, i);\n    return t0;\n  }\n  tween._value = value;\n  return tween;\n}\n\nexport default function(name, value) {\n  var key = \"attr.\" + name;\n  if (arguments.length < 2) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error;\n  var fullname = namespace(name);\n  return this.tween(key, (fullname.local ? attrTweenNS : attrTween)(fullname, value));\n}\n","import {get, init} from \"./schedule.js\";\n\nfunction delayFunction(id, value) {\n  return function() {\n    init(this, id).delay = +value.apply(this, arguments);\n  };\n}\n\nfunction delayConstant(id, value) {\n  return value = +value, function() {\n    init(this, id).delay = value;\n  };\n}\n\nexport default function(value) {\n  var id = this._id;\n\n  return arguments.length\n      ? this.each((typeof value === \"function\"\n          ? delayFunction\n          : delayConstant)(id, value))\n      : get(this.node(), id).delay;\n}\n","import {get, set} from \"./schedule.js\";\n\nfunction durationFunction(id, value) {\n  return function() {\n    set(this, id).duration = +value.apply(this, arguments);\n  };\n}\n\nfunction durationConstant(id, value) {\n  return value = +value, function() {\n    set(this, id).duration = value;\n  };\n}\n\nexport default function(value) {\n  var id = this._id;\n\n  return arguments.length\n      ? this.each((typeof value === \"function\"\n          ? durationFunction\n          : durationConstant)(id, value))\n      : get(this.node(), id).duration;\n}\n","import {get, set} from \"./schedule.js\";\n\nfunction easeConstant(id, value) {\n  if (typeof value !== \"function\") throw new Error;\n  return function() {\n    set(this, id).ease = value;\n  };\n}\n\nexport default function(value) {\n  var id = this._id;\n\n  return arguments.length\n      ? this.each(easeConstant(id, value))\n      : get(this.node(), id).ease;\n}\n","import {set} from \"./schedule.js\";\n\nfunction easeVarying(id, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (typeof v !== \"function\") throw new Error;\n    set(this, id).ease = v;\n  };\n}\n\nexport default function(value) {\n  if (typeof value !== \"function\") throw new Error;\n  return this.each(easeVarying(this._id, value));\n}\n","import {matcher} from \"d3-selection\";\nimport {Transition} from \"./index.js\";\n\nexport default function(match) {\n  if (typeof match !== \"function\") match = matcher(match);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = [], node, i = 0; i < n; ++i) {\n      if ((node = group[i]) && match.call(node, node.__data__, i, group)) {\n        subgroup.push(node);\n      }\n    }\n  }\n\n  return new Transition(subgroups, this._parents, this._name, this._id);\n}\n","import {Transition} from \"./index.js\";\n\nexport default function(transition) {\n  if (transition._id !== this._id) throw new Error;\n\n  for (var groups0 = this._groups, groups1 = transition._groups, m0 = groups0.length, m1 = groups1.length, m = Math.min(m0, m1), merges = new Array(m0), j = 0; j < m; ++j) {\n    for (var group0 = groups0[j], group1 = groups1[j], n = group0.length, merge = merges[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group0[i] || group1[i]) {\n        merge[i] = node;\n      }\n    }\n  }\n\n  for (; j < m0; ++j) {\n    merges[j] = groups0[j];\n  }\n\n  return new Transition(merges, this._parents, this._name, this._id);\n}\n","import {get, set, init} from \"./schedule.js\";\n\nfunction start(name) {\n  return (name + \"\").trim().split(/^|\\s+/).every(function(t) {\n    var i = t.indexOf(\".\");\n    if (i >= 0) t = t.slice(0, i);\n    return !t || t === \"start\";\n  });\n}\n\nfunction onFunction(id, name, listener) {\n  var on0, on1, sit = start(name) ? init : set;\n  return function() {\n    var schedule = sit(this, id),\n        on = schedule.on;\n\n    // If this node shared a dispatch with the previous node,\n    // just assign the updated shared dispatch and were done!\n    // Otherwise, copy-on-write.\n    if (on !== on0) (on1 = (on0 = on).copy()).on(name, listener);\n\n    schedule.on = on1;\n  };\n}\n\nexport default function(name, listener) {\n  var id = this._id;\n\n  return arguments.length < 2\n      ? get(this.node(), id).on.on(name)\n      : this.each(onFunction(id, name, listener));\n}\n","function removeFunction(id) {\n  return function() {\n    var parent = this.parentNode;\n    for (var i in this.__transition) if (+i !== id) return;\n    if (parent) parent.removeChild(this);\n  };\n}\n\nexport default function() {\n  return this.on(\"end.remove\", removeFunction(this._id));\n}\n","import {selector} from \"d3-selection\";\nimport {Transition} from \"./index.js\";\nimport schedule, {get} from \"./schedule.js\";\n\nexport default function(select) {\n  var name = this._name,\n      id = this._id;\n\n  if (typeof select !== \"function\") select = selector(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = new Array(n), node, subnode, i = 0; i < n; ++i) {\n      if ((node = group[i]) && (subnode = select.call(node, node.__data__, i, group))) {\n        if (\"__data__\" in node) subnode.__data__ = node.__data__;\n        subgroup[i] = subnode;\n        schedule(subgroup[i], name, id, i, subgroup, get(node, id));\n      }\n    }\n  }\n\n  return new Transition(subgroups, this._parents, name, id);\n}\n","import {selectorAll} from \"d3-selection\";\nimport {Transition} from \"./index.js\";\nimport schedule, {get} from \"./schedule.js\";\n\nexport default function(select) {\n  var name = this._name,\n      id = this._id;\n\n  if (typeof select !== \"function\") select = selectorAll(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = [], parents = [], j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        for (var children = select.call(node, node.__data__, i, group), child, inherit = get(node, id), k = 0, l = children.length; k < l; ++k) {\n          if (child = children[k]) {\n            schedule(child, name, id, k, children, inherit);\n          }\n        }\n        subgroups.push(children);\n        parents.push(node);\n      }\n    }\n  }\n\n  return new Transition(subgroups, parents, name, id);\n}\n","import {selection} from \"d3-selection\";\n\nvar Selection = selection.prototype.constructor;\n\nexport default function() {\n  return new Selection(this._groups, this._parents);\n}\n","import {interpolateTransformCss as interpolateTransform} from \"d3-interpolate\";\nimport {style} from \"d3-selection\";\nimport {set} from \"./schedule.js\";\nimport {tweenValue} from \"./tween.js\";\nimport interpolate from \"./interpolate.js\";\n\nfunction styleNull(name, interpolate) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0 = style(this, name),\n        string1 = (this.style.removeProperty(name), style(this, name));\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, string10 = string1);\n  };\n}\n\nfunction styleRemove(name) {\n  return function() {\n    this.style.removeProperty(name);\n  };\n}\n\nfunction styleConstant(name, interpolate, value1) {\n  var string00,\n      string1 = value1 + \"\",\n      interpolate0;\n  return function() {\n    var string0 = style(this, name);\n    return string0 === string1 ? null\n        : string0 === string00 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, value1);\n  };\n}\n\nfunction styleFunction(name, interpolate, value) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0 = style(this, name),\n        value1 = value(this),\n        string1 = value1 + \"\";\n    if (value1 == null) string1 = value1 = (this.style.removeProperty(name), style(this, name));\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));\n  };\n}\n\nfunction styleMaybeRemove(id, name) {\n  var on0, on1, listener0, key = \"style.\" + name, event = \"end.\" + key, remove;\n  return function() {\n    var schedule = set(this, id),\n        on = schedule.on,\n        listener = schedule.value[key] == null ? remove || (remove = styleRemove(name)) : undefined;\n\n    // If this node shared a dispatch with the previous node,\n    // just assign the updated shared dispatch and were done!\n    // Otherwise, copy-on-write.\n    if (on !== on0 || listener0 !== listener) (on1 = (on0 = on).copy()).on(event, listener0 = listener);\n\n    schedule.on = on1;\n  };\n}\n\nexport default function(name, value, priority) {\n  var i = (name += \"\") === \"transform\" ? interpolateTransform : interpolate;\n  return value == null ? this\n      .styleTween(name, styleNull(name, i))\n      .on(\"end.style.\" + name, styleRemove(name))\n    : typeof value === \"function\" ? this\n      .styleTween(name, styleFunction(name, i, tweenValue(this, \"style.\" + name, value)))\n      .each(styleMaybeRemove(this._id, name))\n    : this\n      .styleTween(name, styleConstant(name, i, value), priority)\n      .on(\"end.style.\" + name, null);\n}\n","function styleInterpolate(name, i, priority) {\n  return function(t) {\n    this.style.setProperty(name, i.call(this, t), priority);\n  };\n}\n\nfunction styleTween(name, value, priority) {\n  var t, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t = (i0 = i) && styleInterpolate(name, i, priority);\n    return t;\n  }\n  tween._value = value;\n  return tween;\n}\n\nexport default function(name, value, priority) {\n  var key = \"style.\" + (name += \"\");\n  if (arguments.length < 2) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error;\n  return this.tween(key, styleTween(name, value, priority == null ? \"\" : priority));\n}\n","import {tweenValue} from \"./tween.js\";\n\nfunction textConstant(value) {\n  return function() {\n    this.textContent = value;\n  };\n}\n\nfunction textFunction(value) {\n  return function() {\n    var value1 = value(this);\n    this.textContent = value1 == null ? \"\" : value1;\n  };\n}\n\nexport default function(value) {\n  return this.tween(\"text\", typeof value === \"function\"\n      ? textFunction(tweenValue(this, \"text\", value))\n      : textConstant(value == null ? \"\" : value + \"\"));\n}\n","function textInterpolate(i) {\n  return function(t) {\n    this.textContent = i.call(this, t);\n  };\n}\n\nfunction textTween(value) {\n  var t0, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t0 = (i0 = i) && textInterpolate(i);\n    return t0;\n  }\n  tween._value = value;\n  return tween;\n}\n\nexport default function(value) {\n  var key = \"text\";\n  if (arguments.length < 1) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error;\n  return this.tween(key, textTween(value));\n}\n","import {Transition, newId} from \"./index.js\";\nimport schedule, {get} from \"./schedule.js\";\n\nexport default function() {\n  var name = this._name,\n      id0 = this._id,\n      id1 = newId();\n\n  for (var groups = this._groups, m = groups.length, j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        var inherit = get(node, id0);\n        schedule(node, name, id1, i, group, {\n          time: inherit.time + inherit.delay + inherit.duration,\n          delay: 0,\n          duration: inherit.duration,\n          ease: inherit.ease\n        });\n      }\n    }\n  }\n\n  return new Transition(groups, this._parents, name, id1);\n}\n","import {set} from \"./schedule.js\";\n\nexport default function() {\n  var on0, on1, that = this, id = that._id, size = that.size();\n  return new Promise(function(resolve, reject) {\n    var cancel = {value: reject},\n        end = {value: function() { if (--size === 0) resolve(); }};\n\n    that.each(function() {\n      var schedule = set(this, id),\n          on = schedule.on;\n\n      // If this node shared a dispatch with the previous node,\n      // just assign the updated shared dispatch and were done!\n      // Otherwise, copy-on-write.\n      if (on !== on0) {\n        on1 = (on0 = on).copy();\n        on1._.cancel.push(cancel);\n        on1._.interrupt.push(cancel);\n        on1._.end.push(end);\n      }\n\n      schedule.on = on1;\n    });\n\n    // The selection was empty, resolve end immediately\n    if (size === 0) resolve();\n  });\n}\n","import {selection} from \"d3-selection\";\nimport transition_attr from \"./attr.js\";\nimport transition_attrTween from \"./attrTween.js\";\nimport transition_delay from \"./delay.js\";\nimport transition_duration from \"./duration.js\";\nimport transition_ease from \"./ease.js\";\nimport transition_easeVarying from \"./easeVarying.js\";\nimport transition_filter from \"./filter.js\";\nimport transition_merge from \"./merge.js\";\nimport transition_on from \"./on.js\";\nimport transition_remove from \"./remove.js\";\nimport transition_select from \"./select.js\";\nimport transition_selectAll from \"./selectAll.js\";\nimport transition_selection from \"./selection.js\";\nimport transition_style from \"./style.js\";\nimport transition_styleTween from \"./styleTween.js\";\nimport transition_text from \"./text.js\";\nimport transition_textTween from \"./textTween.js\";\nimport transition_transition from \"./transition.js\";\nimport transition_tween from \"./tween.js\";\nimport transition_end from \"./end.js\";\n\nvar id = 0;\n\nexport function Transition(groups, parents, name, id) {\n  this._groups = groups;\n  this._parents = parents;\n  this._name = name;\n  this._id = id;\n}\n\nexport default function transition(name) {\n  return selection().transition(name);\n}\n\nexport function newId() {\n  return ++id;\n}\n\nvar selection_prototype = selection.prototype;\n\nTransition.prototype = transition.prototype = {\n  constructor: Transition,\n  select: transition_select,\n  selectAll: transition_selectAll,\n  selectChild: selection_prototype.selectChild,\n  selectChildren: selection_prototype.selectChildren,\n  filter: transition_filter,\n  merge: transition_merge,\n  selection: transition_selection,\n  transition: transition_transition,\n  call: selection_prototype.call,\n  nodes: selection_prototype.nodes,\n  node: selection_prototype.node,\n  size: selection_prototype.size,\n  empty: selection_prototype.empty,\n  each: selection_prototype.each,\n  on: transition_on,\n  attr: transition_attr,\n  attrTween: transition_attrTween,\n  style: transition_style,\n  styleTween: transition_styleTween,\n  text: transition_text,\n  textTween: transition_textTween,\n  remove: transition_remove,\n  tween: transition_tween,\n  delay: transition_delay,\n  duration: transition_duration,\n  ease: transition_ease,\n  easeVarying: transition_easeVarying,\n  end: transition_end,\n  [Symbol.iterator]: selection_prototype[Symbol.iterator]\n};\n","export function cubicIn(t) {\n  return t * t * t;\n}\n\nexport function cubicOut(t) {\n  return --t * t * t + 1;\n}\n\nexport function cubicInOut(t) {\n  return ((t *= 2) <= 1 ? t * t * t : (t -= 2) * t * t + 2) / 2;\n}\n","import {Transition, newId} from \"../transition/index.js\";\nimport schedule from \"../transition/schedule.js\";\nimport {easeCubicInOut} from \"d3-ease\";\nimport {now} from \"d3-timer\";\n\nvar defaultTiming = {\n  time: null, // Set on use.\n  delay: 0,\n  duration: 250,\n  ease: easeCubicInOut\n};\n\nfunction inherit(node, id) {\n  var timing;\n  while (!(timing = node.__transition) || !(timing = timing[id])) {\n    if (!(node = node.parentNode)) {\n      throw new Error(`transition ${id} not found`);\n    }\n  }\n  return timing;\n}\n\nexport default function(name) {\n  var id,\n      timing;\n\n  if (name instanceof Transition) {\n    id = name._id, name = name._name;\n  } else {\n    id = newId(), (timing = defaultTiming).time = now(), name = name == null ? null : name + \"\";\n  }\n\n  for (var groups = this._groups, m = groups.length, j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        schedule(node, name, id, i, group, timing || inherit(node, id));\n      }\n    }\n  }\n\n  return new Transition(groups, this._parents, name, id);\n}\n","import {selection} from \"d3-selection\";\nimport selection_interrupt from \"./interrupt.js\";\nimport selection_transition from \"./transition.js\";\n\nselection.prototype.interrupt = selection_interrupt;\nselection.prototype.transition = selection_transition;\n","export default x => () => x;\n","export default function ZoomEvent(type, {\n  sourceEvent,\n  target,\n  transform,\n  dispatch\n}) {\n  Object.defineProperties(this, {\n    type: {value: type, enumerable: true, configurable: true},\n    sourceEvent: {value: sourceEvent, enumerable: true, configurable: true},\n    target: {value: target, enumerable: true, configurable: true},\n    transform: {value: transform, enumerable: true, configurable: true},\n    _: {value: dispatch}\n  });\n}\n","export function Transform(k, x, y) {\n  this.k = k;\n  this.x = x;\n  this.y = y;\n}\n\nTransform.prototype = {\n  constructor: Transform,\n  scale: function(k) {\n    return k === 1 ? this : new Transform(this.k * k, this.x, this.y);\n  },\n  translate: function(x, y) {\n    return x === 0 & y === 0 ? this : new Transform(this.k, this.x + this.k * x, this.y + this.k * y);\n  },\n  apply: function(point) {\n    return [point[0] * this.k + this.x, point[1] * this.k + this.y];\n  },\n  applyX: function(x) {\n    return x * this.k + this.x;\n  },\n  applyY: function(y) {\n    return y * this.k + this.y;\n  },\n  invert: function(location) {\n    return [(location[0] - this.x) / this.k, (location[1] - this.y) / this.k];\n  },\n  invertX: function(x) {\n    return (x - this.x) / this.k;\n  },\n  invertY: function(y) {\n    return (y - this.y) / this.k;\n  },\n  rescaleX: function(x) {\n    return x.copy().domain(x.range().map(this.invertX, this).map(x.invert, x));\n  },\n  rescaleY: function(y) {\n    return y.copy().domain(y.range().map(this.invertY, this).map(y.invert, y));\n  },\n  toString: function() {\n    return \"translate(\" + this.x + \",\" + this.y + \") scale(\" + this.k + \")\";\n  }\n};\n\nexport var identity = new Transform(1, 0, 0);\n\ntransform.prototype = Transform.prototype;\n\nexport default function transform(node) {\n  while (!node.__zoom) if (!(node = node.parentNode)) return identity;\n  return node.__zoom;\n}\n","export function nopropagation(event) {\n  event.stopImmediatePropagation();\n}\n\nexport default function(event) {\n  event.preventDefault();\n  event.stopImmediatePropagation();\n}\n","import {dispatch} from \"d3-dispatch\";\nimport {dragDisable, dragEnable} from \"d3-drag\";\nimport {interpolateZoom} from \"d3-interpolate\";\nimport {select, pointer} from \"d3-selection\";\nimport {interrupt} from \"d3-transition\";\nimport constant from \"./constant.js\";\nimport ZoomEvent from \"./event.js\";\nimport {Transform, identity} from \"./transform.js\";\nimport noevent, {nopropagation} from \"./noevent.js\";\n\n// Ignore right-click, since that should open the context menu.\n// except for pinch-to-zoom, which is sent as a wheel+ctrlKey event\nfunction defaultFilter(event) {\n  return (!event.ctrlKey || event.type === 'wheel') && !event.button;\n}\n\nfunction defaultExtent() {\n  var e = this;\n  if (e instanceof SVGElement) {\n    e = e.ownerSVGElement || e;\n    if (e.hasAttribute(\"viewBox\")) {\n      e = e.viewBox.baseVal;\n      return [[e.x, e.y], [e.x + e.width, e.y + e.height]];\n    }\n    return [[0, 0], [e.width.baseVal.value, e.height.baseVal.value]];\n  }\n  return [[0, 0], [e.clientWidth, e.clientHeight]];\n}\n\nfunction defaultTransform() {\n  return this.__zoom || identity;\n}\n\nfunction defaultWheelDelta(event) {\n  return -event.deltaY * (event.deltaMode === 1 ? 0.05 : event.deltaMode ? 1 : 0.002) * (event.ctrlKey ? 10 : 1);\n}\n\nfunction defaultTouchable() {\n  return navigator.maxTouchPoints || (\"ontouchstart\" in this);\n}\n\nfunction defaultConstrain(transform, extent, translateExtent) {\n  var dx0 = transform.invertX(extent[0][0]) - translateExtent[0][0],\n      dx1 = transform.invertX(extent[1][0]) - translateExtent[1][0],\n      dy0 = transform.invertY(extent[0][1]) - translateExtent[0][1],\n      dy1 = transform.invertY(extent[1][1]) - translateExtent[1][1];\n  return transform.translate(\n    dx1 > dx0 ? (dx0 + dx1) / 2 : Math.min(0, dx0) || Math.max(0, dx1),\n    dy1 > dy0 ? (dy0 + dy1) / 2 : Math.min(0, dy0) || Math.max(0, dy1)\n  );\n}\n\nexport default function() {\n  var filter = defaultFilter,\n      extent = defaultExtent,\n      constrain = defaultConstrain,\n      wheelDelta = defaultWheelDelta,\n      touchable = defaultTouchable,\n      scaleExtent = [0, Infinity],\n      translateExtent = [[-Infinity, -Infinity], [Infinity, Infinity]],\n      duration = 250,\n      interpolate = interpolateZoom,\n      listeners = dispatch(\"start\", \"zoom\", \"end\"),\n      touchstarting,\n      touchfirst,\n      touchending,\n      touchDelay = 500,\n      wheelDelay = 150,\n      clickDistance2 = 0,\n      tapDistance = 10;\n\n  function zoom(selection) {\n    selection\n        .property(\"__zoom\", defaultTransform)\n        .on(\"wheel.zoom\", wheeled, {passive: false})\n        .on(\"mousedown.zoom\", mousedowned)\n        .on(\"dblclick.zoom\", dblclicked)\n      .filter(touchable)\n        .on(\"touchstart.zoom\", touchstarted)\n        .on(\"touchmove.zoom\", touchmoved)\n        .on(\"touchend.zoom touchcancel.zoom\", touchended)\n        .style(\"-webkit-tap-highlight-color\", \"rgba(0,0,0,0)\");\n  }\n\n  zoom.transform = function(collection, transform, point, event) {\n    var selection = collection.selection ? collection.selection() : collection;\n    selection.property(\"__zoom\", defaultTransform);\n    if (collection !== selection) {\n      schedule(collection, transform, point, event);\n    } else {\n      selection.interrupt().each(function() {\n        gesture(this, arguments)\n          .event(event)\n          .start()\n          .zoom(null, typeof transform === \"function\" ? transform.apply(this, arguments) : transform)\n          .end();\n      });\n    }\n  };\n\n  zoom.scaleBy = function(selection, k, p, event) {\n    zoom.scaleTo(selection, function() {\n      var k0 = this.__zoom.k,\n          k1 = typeof k === \"function\" ? k.apply(this, arguments) : k;\n      return k0 * k1;\n    }, p, event);\n  };\n\n  zoom.scaleTo = function(selection, k, p, event) {\n    zoom.transform(selection, function() {\n      var e = extent.apply(this, arguments),\n          t0 = this.__zoom,\n          p0 = p == null ? centroid(e) : typeof p === \"function\" ? p.apply(this, arguments) : p,\n          p1 = t0.invert(p0),\n          k1 = typeof k === \"function\" ? k.apply(this, arguments) : k;\n      return constrain(translate(scale(t0, k1), p0, p1), e, translateExtent);\n    }, p, event);\n  };\n\n  zoom.translateBy = function(selection, x, y, event) {\n    zoom.transform(selection, function() {\n      return constrain(this.__zoom.translate(\n        typeof x === \"function\" ? x.apply(this, arguments) : x,\n        typeof y === \"function\" ? y.apply(this, arguments) : y\n      ), extent.apply(this, arguments), translateExtent);\n    }, null, event);\n  };\n\n  zoom.translateTo = function(selection, x, y, p, event) {\n    zoom.transform(selection, function() {\n      var e = extent.apply(this, arguments),\n          t = this.__zoom,\n          p0 = p == null ? centroid(e) : typeof p === \"function\" ? p.apply(this, arguments) : p;\n      return constrain(identity.translate(p0[0], p0[1]).scale(t.k).translate(\n        typeof x === \"function\" ? -x.apply(this, arguments) : -x,\n        typeof y === \"function\" ? -y.apply(this, arguments) : -y\n      ), e, translateExtent);\n    }, p, event);\n  };\n\n  function scale(transform, k) {\n    k = Math.max(scaleExtent[0], Math.min(scaleExtent[1], k));\n    return k === transform.k ? transform : new Transform(k, transform.x, transform.y);\n  }\n\n  function translate(transform, p0, p1) {\n    var x = p0[0] - p1[0] * transform.k, y = p0[1] - p1[1] * transform.k;\n    return x === transform.x && y === transform.y ? transform : new Transform(transform.k, x, y);\n  }\n\n  function centroid(extent) {\n    return [(+extent[0][0] + +extent[1][0]) / 2, (+extent[0][1] + +extent[1][1]) / 2];\n  }\n\n  function schedule(transition, transform, point, event) {\n    transition\n        .on(\"start.zoom\", function() { gesture(this, arguments).event(event).start(); })\n        .on(\"interrupt.zoom end.zoom\", function() { gesture(this, arguments).event(event).end(); })\n        .tween(\"zoom\", function() {\n          var that = this,\n              args = arguments,\n              g = gesture(that, args).event(event),\n              e = extent.apply(that, args),\n              p = point == null ? centroid(e) : typeof point === \"function\" ? point.apply(that, args) : point,\n              w = Math.max(e[1][0] - e[0][0], e[1][1] - e[0][1]),\n              a = that.__zoom,\n              b = typeof transform === \"function\" ? transform.apply(that, args) : transform,\n              i = interpolate(a.invert(p).concat(w / a.k), b.invert(p).concat(w / b.k));\n          return function(t) {\n            if (t === 1) t = b; // Avoid rounding error on end.\n            else { var l = i(t), k = w / l[2]; t = new Transform(k, p[0] - l[0] * k, p[1] - l[1] * k); }\n            g.zoom(null, t);\n          };\n        });\n  }\n\n  function gesture(that, args, clean) {\n    return (!clean && that.__zooming) || new Gesture(that, args);\n  }\n\n  function Gesture(that, args) {\n    this.that = that;\n    this.args = args;\n    this.active = 0;\n    this.sourceEvent = null;\n    this.extent = extent.apply(that, args);\n    this.taps = 0;\n  }\n\n  Gesture.prototype = {\n    event: function(event) {\n      if (event) this.sourceEvent = event;\n      return this;\n    },\n    start: function() {\n      if (++this.active === 1) {\n        this.that.__zooming = this;\n        this.emit(\"start\");\n      }\n      return this;\n    },\n    zoom: function(key, transform) {\n      if (this.mouse && key !== \"mouse\") this.mouse[1] = transform.invert(this.mouse[0]);\n      if (this.touch0 && key !== \"touch\") this.touch0[1] = transform.invert(this.touch0[0]);\n      if (this.touch1 && key !== \"touch\") this.touch1[1] = transform.invert(this.touch1[0]);\n      this.that.__zoom = transform;\n      this.emit(\"zoom\");\n      return this;\n    },\n    end: function() {\n      if (--this.active === 0) {\n        delete this.that.__zooming;\n        this.emit(\"end\");\n      }\n      return this;\n    },\n    emit: function(type) {\n      var d = select(this.that).datum();\n      listeners.call(\n        type,\n        this.that,\n        new ZoomEvent(type, {\n          sourceEvent: this.sourceEvent,\n          target: zoom,\n          type,\n          transform: this.that.__zoom,\n          dispatch: listeners\n        }),\n        d\n      );\n    }\n  };\n\n  function wheeled(event, ...args) {\n    if (!filter.apply(this, arguments)) return;\n    var g = gesture(this, args).event(event),\n        t = this.__zoom,\n        k = Math.max(scaleExtent[0], Math.min(scaleExtent[1], t.k * Math.pow(2, wheelDelta.apply(this, arguments)))),\n        p = pointer(event);\n\n    // If the mouse is in the same location as before, reuse it.\n    // If there were recent wheel events, reset the wheel idle timeout.\n    if (g.wheel) {\n      if (g.mouse[0][0] !== p[0] || g.mouse[0][1] !== p[1]) {\n        g.mouse[1] = t.invert(g.mouse[0] = p);\n      }\n      clearTimeout(g.wheel);\n    }\n\n    // If this wheel event wont trigger a transform change, ignore it.\n    else if (t.k === k) return;\n\n    // Otherwise, capture the mouse point and location at the start.\n    else {\n      g.mouse = [p, t.invert(p)];\n      interrupt(this);\n      g.start();\n    }\n\n    noevent(event);\n    g.wheel = setTimeout(wheelidled, wheelDelay);\n    g.zoom(\"mouse\", constrain(translate(scale(t, k), g.mouse[0], g.mouse[1]), g.extent, translateExtent));\n\n    function wheelidled() {\n      g.wheel = null;\n      g.end();\n    }\n  }\n\n  function mousedowned(event, ...args) {\n    if (touchending || !filter.apply(this, arguments)) return;\n    var currentTarget = event.currentTarget,\n        g = gesture(this, args, true).event(event),\n        v = select(event.view).on(\"mousemove.zoom\", mousemoved, true).on(\"mouseup.zoom\", mouseupped, true),\n        p = pointer(event, currentTarget),\n        x0 = event.clientX,\n        y0 = event.clientY;\n\n    dragDisable(event.view);\n    nopropagation(event);\n    g.mouse = [p, this.__zoom.invert(p)];\n    interrupt(this);\n    g.start();\n\n    function mousemoved(event) {\n      noevent(event);\n      if (!g.moved) {\n        var dx = event.clientX - x0, dy = event.clientY - y0;\n        g.moved = dx * dx + dy * dy > clickDistance2;\n      }\n      g.event(event)\n       .zoom(\"mouse\", constrain(translate(g.that.__zoom, g.mouse[0] = pointer(event, currentTarget), g.mouse[1]), g.extent, translateExtent));\n    }\n\n    function mouseupped(event) {\n      v.on(\"mousemove.zoom mouseup.zoom\", null);\n      dragEnable(event.view, g.moved);\n      noevent(event);\n      g.event(event).end();\n    }\n  }\n\n  function dblclicked(event, ...args) {\n    if (!filter.apply(this, arguments)) return;\n    var t0 = this.__zoom,\n        p0 = pointer(event.changedTouches ? event.changedTouches[0] : event, this),\n        p1 = t0.invert(p0),\n        k1 = t0.k * (event.shiftKey ? 0.5 : 2),\n        t1 = constrain(translate(scale(t0, k1), p0, p1), extent.apply(this, args), translateExtent);\n\n    noevent(event);\n    if (duration > 0) select(this).transition().duration(duration).call(schedule, t1, p0, event);\n    else select(this).call(zoom.transform, t1, p0, event);\n  }\n\n  function touchstarted(event, ...args) {\n    if (!filter.apply(this, arguments)) return;\n    var touches = event.touches,\n        n = touches.length,\n        g = gesture(this, args, event.changedTouches.length === n).event(event),\n        started, i, t, p;\n\n    nopropagation(event);\n    for (i = 0; i < n; ++i) {\n      t = touches[i], p = pointer(t, this);\n      p = [p, this.__zoom.invert(p), t.identifier];\n      if (!g.touch0) g.touch0 = p, started = true, g.taps = 1 + !!touchstarting;\n      else if (!g.touch1 && g.touch0[2] !== p[2]) g.touch1 = p, g.taps = 0;\n    }\n\n    if (touchstarting) touchstarting = clearTimeout(touchstarting);\n\n    if (started) {\n      if (g.taps < 2) touchfirst = p[0], touchstarting = setTimeout(function() { touchstarting = null; }, touchDelay);\n      interrupt(this);\n      g.start();\n    }\n  }\n\n  function touchmoved(event, ...args) {\n    if (!this.__zooming) return;\n    var g = gesture(this, args).event(event),\n        touches = event.changedTouches,\n        n = touches.length, i, t, p, l;\n\n    noevent(event);\n    for (i = 0; i < n; ++i) {\n      t = touches[i], p = pointer(t, this);\n      if (g.touch0 && g.touch0[2] === t.identifier) g.touch0[0] = p;\n      else if (g.touch1 && g.touch1[2] === t.identifier) g.touch1[0] = p;\n    }\n    t = g.that.__zoom;\n    if (g.touch1) {\n      var p0 = g.touch0[0], l0 = g.touch0[1],\n          p1 = g.touch1[0], l1 = g.touch1[1],\n          dp = (dp = p1[0] - p0[0]) * dp + (dp = p1[1] - p0[1]) * dp,\n          dl = (dl = l1[0] - l0[0]) * dl + (dl = l1[1] - l0[1]) * dl;\n      t = scale(t, Math.sqrt(dp / dl));\n      p = [(p0[0] + p1[0]) / 2, (p0[1] + p1[1]) / 2];\n      l = [(l0[0] + l1[0]) / 2, (l0[1] + l1[1]) / 2];\n    }\n    else if (g.touch0) p = g.touch0[0], l = g.touch0[1];\n    else return;\n\n    g.zoom(\"touch\", constrain(translate(t, p, l), g.extent, translateExtent));\n  }\n\n  function touchended(event, ...args) {\n    if (!this.__zooming) return;\n    var g = gesture(this, args).event(event),\n        touches = event.changedTouches,\n        n = touches.length, i, t;\n\n    nopropagation(event);\n    if (touchending) clearTimeout(touchending);\n    touchending = setTimeout(function() { touchending = null; }, touchDelay);\n    for (i = 0; i < n; ++i) {\n      t = touches[i];\n      if (g.touch0 && g.touch0[2] === t.identifier) delete g.touch0;\n      else if (g.touch1 && g.touch1[2] === t.identifier) delete g.touch1;\n    }\n    if (g.touch1 && !g.touch0) g.touch0 = g.touch1, delete g.touch1;\n    if (g.touch0) g.touch0[1] = this.__zoom.invert(g.touch0[0]);\n    else {\n      g.end();\n      // If this was a dbltap, reroute to the (optional) dblclick.zoom handler.\n      if (g.taps === 2) {\n        t = pointer(t, this);\n        if (Math.hypot(touchfirst[0] - t[0], touchfirst[1] - t[1]) < tapDistance) {\n          var p = select(this).on(\"dblclick.zoom\");\n          if (p) p.apply(this, arguments);\n        }\n      }\n    }\n  }\n\n  zoom.wheelDelta = function(_) {\n    return arguments.length ? (wheelDelta = typeof _ === \"function\" ? _ : constant(+_), zoom) : wheelDelta;\n  };\n\n  zoom.filter = function(_) {\n    return arguments.length ? (filter = typeof _ === \"function\" ? _ : constant(!!_), zoom) : filter;\n  };\n\n  zoom.touchable = function(_) {\n    return arguments.length ? (touchable = typeof _ === \"function\" ? _ : constant(!!_), zoom) : touchable;\n  };\n\n  zoom.extent = function(_) {\n    return arguments.length ? (extent = typeof _ === \"function\" ? _ : constant([[+_[0][0], +_[0][1]], [+_[1][0], +_[1][1]]]), zoom) : extent;\n  };\n\n  zoom.scaleExtent = function(_) {\n    return arguments.length ? (scaleExtent[0] = +_[0], scaleExtent[1] = +_[1], zoom) : [scaleExtent[0], scaleExtent[1]];\n  };\n\n  zoom.translateExtent = function(_) {\n    return arguments.length ? (translateExtent[0][0] = +_[0][0], translateExtent[1][0] = +_[1][0], translateExtent[0][1] = +_[0][1], translateExtent[1][1] = +_[1][1], zoom) : [[translateExtent[0][0], translateExtent[0][1]], [translateExtent[1][0], translateExtent[1][1]]];\n  };\n\n  zoom.constrain = function(_) {\n    return arguments.length ? (constrain = _, zoom) : constrain;\n  };\n\n  zoom.duration = function(_) {\n    return arguments.length ? (duration = +_, zoom) : duration;\n  };\n\n  zoom.interpolate = function(_) {\n    return arguments.length ? (interpolate = _, zoom) : interpolate;\n  };\n\n  zoom.on = function() {\n    var value = listeners.on.apply(listeners, arguments);\n    return value === listeners ? zoom : value;\n  };\n\n  zoom.clickDistance = function(_) {\n    return arguments.length ? (clickDistance2 = (_ = +_) * _, zoom) : Math.sqrt(clickDistance2);\n  };\n\n  zoom.tapDistance = function(_) {\n    return arguments.length ? (tapDistance = +_, zoom) : tapDistance;\n  };\n\n  return zoom;\n}\n","import create from 'zustand';\nimport createContext from 'zustand/context';\nimport { zoomIdentity } from 'd3-zoom';\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"];\n\n  if (_i == null) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n\n  var _s, _e;\n\n  try {\n    for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest();\n}\n\nvar ConnectionMode;\n\n(function (ConnectionMode) {\n  ConnectionMode[\"Strict\"] = \"strict\";\n  ConnectionMode[\"Loose\"] = \"loose\";\n})(ConnectionMode || (ConnectionMode = {}));\n\nvar BackgroundVariant;\n\n(function (BackgroundVariant) {\n  BackgroundVariant[\"Lines\"] = \"lines\";\n  BackgroundVariant[\"Dots\"] = \"dots\";\n})(BackgroundVariant || (BackgroundVariant = {}));\n\nvar PanOnScrollMode;\n\n(function (PanOnScrollMode) {\n  PanOnScrollMode[\"Free\"] = \"free\";\n  PanOnScrollMode[\"Vertical\"] = \"vertical\";\n  PanOnScrollMode[\"Horizontal\"] = \"horizontal\";\n})(PanOnScrollMode || (PanOnScrollMode = {}));\n\nvar ConnectionLineType;\n\n(function (ConnectionLineType) {\n  ConnectionLineType[\"Bezier\"] = \"default\";\n  ConnectionLineType[\"Straight\"] = \"straight\";\n  ConnectionLineType[\"Step\"] = \"step\";\n  ConnectionLineType[\"SmoothStep\"] = \"smoothstep\";\n  ConnectionLineType[\"SimpleBezier\"] = \"simplebezier\";\n})(ConnectionLineType || (ConnectionLineType = {}));\n\nvar MarkerType;\n\n(function (MarkerType) {\n  MarkerType[\"Arrow\"] = \"arrow\";\n  MarkerType[\"ArrowClosed\"] = \"arrowclosed\";\n})(MarkerType || (MarkerType = {}));\n\nvar Position;\n\n(function (Position) {\n  Position[\"Left\"] = \"left\";\n  Position[\"Top\"] = \"top\";\n  Position[\"Right\"] = \"right\";\n  Position[\"Bottom\"] = \"bottom\";\n})(Position || (Position = {}));\n\nvar getDimensions = function getDimensions(node) {\n  return {\n    width: node.offsetWidth,\n    height: node.offsetHeight\n  };\n};\nvar clamp = function clamp(val) {\n  var min = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  var max = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;\n  return Math.min(Math.max(val, min), max);\n};\nvar clampPosition = function clampPosition(position, extent) {\n  return {\n    x: clamp(position.x, extent[0][0], extent[1][0]),\n    y: clamp(position.y, extent[0][1], extent[1][1])\n  };\n};\nvar getHostForElement = function getHostForElement(element) {\n  var _element$getRootNode, _window;\n\n  return ((_element$getRootNode = element.getRootNode) === null || _element$getRootNode === void 0 ? void 0 : _element$getRootNode.call(element)) || ((_window = window) === null || _window === void 0 ? void 0 : _window.document);\n};\nvar getBoundsOfBoxes = function getBoundsOfBoxes(box1, box2) {\n  return {\n    x: Math.min(box1.x, box2.x),\n    y: Math.min(box1.y, box2.y),\n    x2: Math.max(box1.x2, box2.x2),\n    y2: Math.max(box1.y2, box2.y2)\n  };\n};\nvar rectToBox = function rectToBox(_ref) {\n  var x = _ref.x,\n      y = _ref.y,\n      width = _ref.width,\n      height = _ref.height;\n  return {\n    x: x,\n    y: y,\n    x2: x + width,\n    y2: y + height\n  };\n};\nvar boxToRect = function boxToRect(_ref2) {\n  var x = _ref2.x,\n      y = _ref2.y,\n      x2 = _ref2.x2,\n      y2 = _ref2.y2;\n  return {\n    x: x,\n    y: y,\n    width: x2 - x,\n    height: y2 - y\n  };\n};\nvar getBoundsofRects = function getBoundsofRects(rect1, rect2) {\n  return boxToRect(getBoundsOfBoxes(rectToBox(rect1), rectToBox(rect2)));\n};\nvar isNumeric = function isNumeric(n) {\n  return !isNaN(n) && isFinite(n);\n};\nvar internalsSymbol = Symbol('internals');\n\nfunction ownKeys$4(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread$4(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys$4(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys$4(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction handleParentExpand(res, updateItem) {\n  var parent = res.find(function (e) {\n    return e.id === updateItem.parentNode;\n  });\n\n  if (parent) {\n    var extendWidth = updateItem.position.x + updateItem.width - parent.width;\n    var extendHeight = updateItem.position.y + updateItem.height - parent.height;\n\n    if (extendWidth > 0 || extendHeight > 0 || updateItem.position.x < 0 || updateItem.position.y < 0) {\n      var _parent$style$width, _parent$style$height;\n\n      parent.style = _objectSpread$4({}, parent.style) || {};\n      parent.style.width = (_parent$style$width = parent.style.width) !== null && _parent$style$width !== void 0 ? _parent$style$width : parent.width;\n      parent.style.height = (_parent$style$height = parent.style.height) !== null && _parent$style$height !== void 0 ? _parent$style$height : parent.height;\n\n      if (extendWidth > 0) {\n        parent.style.width += extendWidth;\n      }\n\n      if (extendHeight > 0) {\n        parent.style.height += extendHeight;\n      }\n\n      if (updateItem.position.x < 0) {\n        var xDiff = Math.abs(updateItem.position.x);\n        parent.position.x = parent.position.x - xDiff;\n        parent.style.width += xDiff;\n        updateItem.position.x = 0;\n      }\n\n      if (updateItem.position.y < 0) {\n        var yDiff = Math.abs(updateItem.position.y);\n        parent.position.y = parent.position.y - yDiff;\n        parent.style.height += yDiff;\n        updateItem.position.y = 0;\n      }\n\n      parent.width = parent.style.width;\n      parent.height = parent.style.height;\n    }\n  }\n}\n\nfunction applyChanges(changes, elements) {\n  // we need this hack to handle the setNodes and setEdges function of the useReactFlow hook for controlled flows\n  if (changes.some(function (c) {\n    return c.type === 'reset';\n  })) {\n    return changes.filter(function (c) {\n      return c.type === 'reset';\n    }).map(function (c) {\n      return c.item;\n    });\n  }\n\n  var initElements = changes.filter(function (c) {\n    return c.type === 'add';\n  }).map(function (c) {\n    return c.item;\n  });\n  return elements.reduce(function (res, item) {\n    var currentChange = changes.find(function (c) {\n      return c.id === item.id;\n    });\n\n    if (currentChange) {\n      switch (currentChange.type) {\n        case 'select':\n          {\n            res.push(_objectSpread$4(_objectSpread$4({}, item), {}, {\n              selected: currentChange.selected\n            }));\n            return res;\n          }\n\n        case 'position':\n          {\n            var updateItem = _objectSpread$4({}, item);\n\n            if (typeof currentChange.position !== 'undefined') {\n              updateItem.position = currentChange.position;\n            }\n\n            if (typeof currentChange.positionAbsolute !== 'undefined') {\n              updateItem.positionAbsolute = currentChange.positionAbsolute;\n            }\n\n            if (typeof currentChange.dragging !== 'undefined') {\n              updateItem.dragging = currentChange.dragging;\n            }\n\n            if (updateItem.expandParent) {\n              handleParentExpand(res, updateItem);\n            }\n\n            res.push(updateItem);\n            return res;\n          }\n\n        case 'dimensions':\n          {\n            var _updateItem = _objectSpread$4({}, item);\n\n            if (typeof currentChange.dimensions !== 'undefined') {\n              _updateItem.width = currentChange.dimensions.width;\n              _updateItem.height = currentChange.dimensions.height;\n            }\n\n            if (_updateItem.expandParent) {\n              handleParentExpand(res, _updateItem);\n            }\n\n            res.push(_updateItem);\n            return res;\n          }\n\n        case 'remove':\n          {\n            return res;\n          }\n      }\n    }\n\n    res.push(item);\n    return res;\n  }, initElements);\n}\n\nfunction applyNodeChanges(changes, nodes) {\n  return applyChanges(changes, nodes);\n}\nfunction applyEdgeChanges(changes, edges) {\n  return applyChanges(changes, edges);\n}\nvar createSelectionChange = function createSelectionChange(id, selected) {\n  return {\n    id: id,\n    type: 'select',\n    selected: selected\n  };\n};\nfunction getSelectionChanges(items, selectedIds) {\n  return items.reduce(function (res, item) {\n    var willBeSelected = selectedIds.includes(item.id);\n\n    if (!item.selected && willBeSelected) {\n      item.selected = true;\n      res.push(createSelectionChange(item.id, true));\n    } else if (item.selected && !willBeSelected) {\n      item.selected = false;\n      res.push(createSelectionChange(item.id, false));\n    }\n\n    return res;\n  }, []);\n}\n\nfunction ownKeys$3(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread$3(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys$3(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys$3(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nvar getHandleBounds = function getHandleBounds(selector, nodeElement, zoom) {\n  var handles = nodeElement.querySelectorAll(selector);\n\n  if (!handles || !handles.length) {\n    return null;\n  }\n\n  var handlesArray = Array.from(handles);\n  var nodeBounds = nodeElement.getBoundingClientRect();\n  return handlesArray.map(function (handle) {\n    var handleBounds = handle.getBoundingClientRect();\n    return _objectSpread$3({\n      id: handle.getAttribute('data-handleid'),\n      position: handle.getAttribute('data-handlepos'),\n      x: (handleBounds.left - nodeBounds.left) / zoom,\n      y: (handleBounds.top - nodeBounds.top) / zoom\n    }, getDimensions(handle));\n  });\n};\nfunction getMouseHandler(id, getState, handler) {\n  return handler === undefined ? handler : function (event) {\n    var node = getState().nodeInternals.get(id);\n    handler(event, _objectSpread$3({}, node));\n  };\n} // this handler is called by\n// 1. the click handler when node is not draggable or selectNodesOnDrag = false\n// or\n// 2. the on drag start handler when node is draggable and selectNodesOnDrag = true\n\nfunction handleNodeClick(_ref) {\n  var id = _ref.id,\n      store = _ref.store;\n\n  var _store$getState = store.getState(),\n      addSelectedNodes = _store$getState.addSelectedNodes,\n      unselectNodesAndEdges = _store$getState.unselectNodesAndEdges,\n      multiSelectionActive = _store$getState.multiSelectionActive,\n      nodeInternals = _store$getState.nodeInternals;\n\n  var node = nodeInternals.get(id);\n  store.setState({\n    nodesSelectionActive: false\n  });\n\n  if (!node.selected) {\n    addSelectedNodes([id]);\n  } else if (node.selected && multiSelectionActive) {\n    unselectNodesAndEdges({\n      nodes: [node]\n    });\n  }\n}\n\nfunction ownKeys$2(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread$2(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys$2(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys$2(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nvar isEdge = function isEdge(element) {\n  return 'id' in element && 'source' in element && 'target' in element;\n};\nvar isNode = function isNode(element) {\n  return 'id' in element && !('source' in element) && !('target' in element);\n};\nvar getOutgoers = function getOutgoers(node, nodes, edges) {\n  if (!isNode(node)) {\n    return [];\n  }\n\n  var outgoerIds = edges.filter(function (e) {\n    return e.source === node.id;\n  }).map(function (e) {\n    return e.target;\n  });\n  return nodes.filter(function (n) {\n    return outgoerIds.includes(n.id);\n  });\n};\nvar getIncomers = function getIncomers(node, nodes, edges) {\n  if (!isNode(node)) {\n    return [];\n  }\n\n  var incomersIds = edges.filter(function (e) {\n    return e.target === node.id;\n  }).map(function (e) {\n    return e.source;\n  });\n  return nodes.filter(function (n) {\n    return incomersIds.includes(n.id);\n  });\n};\n\nvar getEdgeId = function getEdgeId(_ref) {\n  var source = _ref.source,\n      sourceHandle = _ref.sourceHandle,\n      target = _ref.target,\n      targetHandle = _ref.targetHandle;\n  return \"reactflow__edge-\".concat(source).concat(sourceHandle || '', \"-\").concat(target).concat(targetHandle || '');\n};\n\nvar getMarkerId = function getMarkerId(marker, rfId) {\n  if (typeof marker === 'undefined') {\n    return '';\n  }\n\n  if (typeof marker === 'string') {\n    return marker;\n  }\n\n  var idPrefix = rfId ? \"\".concat(rfId, \"__\") : '';\n  return \"\".concat(idPrefix).concat(Object.keys(marker).sort().map(function (key) {\n    return \"\".concat(key, \"=\").concat(marker[key]);\n  }).join('&'));\n};\n\nvar connectionExists = function connectionExists(edge, edges) {\n  return edges.some(function (el) {\n    return el.source === edge.source && el.target === edge.target && (el.sourceHandle === edge.sourceHandle || !el.sourceHandle && !edge.sourceHandle) && (el.targetHandle === edge.targetHandle || !el.targetHandle && !edge.targetHandle);\n  });\n};\n\nvar addEdge = function addEdge(edgeParams, edges) {\n  if (!edgeParams.source || !edgeParams.target) {\n    // @ts-ignore\n    if (process.env.NODE_ENV === 'development') {\n      console.warn(\"[React Flow]: Can't create edge. An edge needs a source and a target. Help: https://reactflow.dev/error#600\");\n    }\n\n    return edges;\n  }\n\n  var edge;\n\n  if (isEdge(edgeParams)) {\n    edge = _objectSpread$2({}, edgeParams);\n  } else {\n    edge = _objectSpread$2(_objectSpread$2({}, edgeParams), {}, {\n      id: getEdgeId(edgeParams)\n    });\n  }\n\n  if (connectionExists(edge, edges)) {\n    return edges;\n  }\n\n  return edges.concat(edge);\n};\nvar updateEdge = function updateEdge(oldEdge, newConnection, edges) {\n  if (!newConnection.source || !newConnection.target) {\n    // @ts-ignore\n    if (process.env.NODE_ENV === 'development') {\n      console.warn(\"[React Flow]: Can't create a new edge. An edge needs a source and a target. Help: https://reactflow.dev/error#600\");\n    }\n\n    return edges;\n  }\n\n  var foundEdge = edges.find(function (e) {\n    return e.id === oldEdge.id;\n  });\n\n  if (!foundEdge) {\n    // @ts-ignore\n    if (process.env.NODE_ENV === 'development') {\n      console.warn(\"[React Flow]: The old edge with id=\".concat(oldEdge.id, \" does not exist. Help: https://reactflow.dev/error#700\"));\n    }\n\n    return edges;\n  } // Remove old edge and create the new edge with parameters of old edge.\n\n\n  var edge = _objectSpread$2(_objectSpread$2({}, oldEdge), {}, {\n    id: getEdgeId(newConnection),\n    source: newConnection.source,\n    target: newConnection.target,\n    sourceHandle: newConnection.sourceHandle,\n    targetHandle: newConnection.targetHandle\n  });\n\n  return edges.filter(function (e) {\n    return e.id !== oldEdge.id;\n  }).concat(edge);\n};\nvar pointToRendererPoint = function pointToRendererPoint(_ref2, _ref3, snapToGrid, _ref4) {\n  var x = _ref2.x,\n      y = _ref2.y;\n\n  var _ref5 = _slicedToArray(_ref3, 3),\n      tx = _ref5[0],\n      ty = _ref5[1],\n      tScale = _ref5[2];\n\n  var _ref6 = _slicedToArray(_ref4, 2),\n      snapX = _ref6[0],\n      snapY = _ref6[1];\n\n  var position = {\n    x: (x - tx) / tScale,\n    y: (y - ty) / tScale\n  };\n\n  if (snapToGrid) {\n    return {\n      x: snapX * Math.round(position.x / snapX),\n      y: snapY * Math.round(position.y / snapY)\n    };\n  }\n\n  return position;\n};\nvar getRectOfNodes = function getRectOfNodes(nodes) {\n  if (nodes.length === 0) {\n    return {\n      x: 0,\n      y: 0,\n      width: 0,\n      height: 0\n    };\n  }\n\n  var box = nodes.reduce(function (currBox, _ref7) {\n    var positionAbsolute = _ref7.positionAbsolute,\n        position = _ref7.position,\n        width = _ref7.width,\n        height = _ref7.height;\n    return getBoundsOfBoxes(currBox, rectToBox({\n      x: positionAbsolute ? positionAbsolute.x : position.x,\n      y: positionAbsolute ? positionAbsolute.y : position.y,\n      width: width || 0,\n      height: height || 0\n    }));\n  }, {\n    x: Infinity,\n    y: Infinity,\n    x2: -Infinity,\n    y2: -Infinity\n  });\n  return boxToRect(box);\n};\nvar getNodesInside = function getNodesInside(nodeInternals, rect) {\n  var _ref8 = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [0, 0, 1],\n      _ref9 = _slicedToArray(_ref8, 3),\n      tx = _ref9[0],\n      ty = _ref9[1],\n      tScale = _ref9[2];\n\n  var partially = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n  var excludeNonSelectableNodes = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : false;\n  var rBox = rectToBox({\n    x: (rect.x - tx) / tScale,\n    y: (rect.y - ty) / tScale,\n    width: rect.width / tScale,\n    height: rect.height / tScale\n  });\n  var visibleNodes = [];\n  nodeInternals.forEach(function (node) {\n    var positionAbsolute = node.positionAbsolute,\n        width = node.width,\n        height = node.height,\n        _node$selectable = node.selectable,\n        selectable = _node$selectable === void 0 ? true : _node$selectable;\n\n    if (excludeNonSelectableNodes && !selectable) {\n      return false;\n    }\n\n    var nBox = rectToBox(_objectSpread$2(_objectSpread$2({}, positionAbsolute), {}, {\n      width: width || 0,\n      height: height || 0\n    }));\n    var xOverlap = Math.max(0, Math.min(rBox.x2, nBox.x2) - Math.max(rBox.x, nBox.x));\n    var yOverlap = Math.max(0, Math.min(rBox.y2, nBox.y2) - Math.max(rBox.y, nBox.y));\n    var overlappingArea = Math.ceil(xOverlap * yOverlap);\n    var notInitialized = typeof width === 'undefined' || typeof height === 'undefined' || width === null || height === null;\n    var partiallyVisible = partially && overlappingArea > 0;\n    var area = (width || 0) * (height || 0);\n    var isVisible = notInitialized || partiallyVisible || overlappingArea >= area;\n\n    if (isVisible) {\n      visibleNodes.push(node);\n    }\n  });\n  return visibleNodes;\n};\nvar getConnectedEdges = function getConnectedEdges(nodes, edges) {\n  var nodeIds = nodes.map(function (node) {\n    return node.id;\n  });\n  return edges.filter(function (edge) {\n    return nodeIds.includes(edge.source) || nodeIds.includes(edge.target);\n  });\n};\nvar getTransformForBounds = function getTransformForBounds(bounds, width, height, minZoom, maxZoom) {\n  var padding = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : 0.1;\n  var xZoom = width / (bounds.width * (1 + padding));\n  var yZoom = height / (bounds.height * (1 + padding));\n  var zoom = Math.min(xZoom, yZoom);\n  var clampedZoom = clamp(zoom, minZoom, maxZoom);\n  var boundsCenterX = bounds.x + bounds.width / 2;\n  var boundsCenterY = bounds.y + bounds.height / 2;\n  var x = width / 2 - boundsCenterX * clampedZoom;\n  var y = height / 2 - boundsCenterY * clampedZoom;\n  return [x, y, clampedZoom];\n};\nvar getD3Transition = function getD3Transition(selection) {\n  var duration = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  return selection.transition().duration(duration);\n};\n\nfunction ownKeys$1(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread$1(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys$1(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys$1(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction calculateXYZPosition(node, nodeInternals, parentNodes, result) {\n  var _result$x, _parentNode$position$, _parentNode$position, _result$y, _parentNode$position$2, _parentNode$position2, _parentNode$internals, _parentNode$internals2, _result$z, _parentNode$internals3, _parentNode$internals4, _result$z2;\n\n  if (!node.parentNode) {\n    return result;\n  }\n\n  var parentNode = nodeInternals.get(node.parentNode);\n  return calculateXYZPosition(parentNode, nodeInternals, parentNodes, {\n    x: ((_result$x = result.x) !== null && _result$x !== void 0 ? _result$x : 0) + ((_parentNode$position$ = (_parentNode$position = parentNode.position) === null || _parentNode$position === void 0 ? void 0 : _parentNode$position.x) !== null && _parentNode$position$ !== void 0 ? _parentNode$position$ : 0),\n    y: ((_result$y = result.y) !== null && _result$y !== void 0 ? _result$y : 0) + ((_parentNode$position$2 = (_parentNode$position2 = parentNode.position) === null || _parentNode$position2 === void 0 ? void 0 : _parentNode$position2.y) !== null && _parentNode$position$2 !== void 0 ? _parentNode$position$2 : 0),\n    z: ((_parentNode$internals = (_parentNode$internals2 = parentNode[internalsSymbol]) === null || _parentNode$internals2 === void 0 ? void 0 : _parentNode$internals2.z) !== null && _parentNode$internals !== void 0 ? _parentNode$internals : 0) > ((_result$z = result.z) !== null && _result$z !== void 0 ? _result$z : 0) ? (_parentNode$internals3 = (_parentNode$internals4 = parentNode[internalsSymbol]) === null || _parentNode$internals4 === void 0 ? void 0 : _parentNode$internals4.z) !== null && _parentNode$internals3 !== void 0 ? _parentNode$internals3 : 0 : (_result$z2 = result.z) !== null && _result$z2 !== void 0 ? _result$z2 : 0\n  });\n}\n\nfunction createNodeInternals(nodes, nodeInternals) {\n  var nextNodeInternals = new Map();\n  var parentNodes = {};\n  nodes.forEach(function (node) {\n    var _currInternals$intern;\n\n    var z = isNumeric(node.zIndex) ? node.zIndex : node.selected ? 1000 : 0;\n    var currInternals = nodeInternals.get(node.id);\n\n    var internals = _objectSpread$1(_objectSpread$1({\n      width: currInternals === null || currInternals === void 0 ? void 0 : currInternals.width,\n      height: currInternals === null || currInternals === void 0 ? void 0 : currInternals.height\n    }, node), {}, {\n      positionAbsolute: {\n        x: node.position.x,\n        y: node.position.y\n      }\n    });\n\n    if (node.parentNode) {\n      internals.parentNode = node.parentNode;\n      parentNodes[node.parentNode] = true;\n    }\n\n    Object.defineProperty(internals, internalsSymbol, {\n      enumerable: false,\n      value: {\n        handleBounds: currInternals === null || currInternals === void 0 ? void 0 : (_currInternals$intern = currInternals[internalsSymbol]) === null || _currInternals$intern === void 0 ? void 0 : _currInternals$intern.handleBounds,\n        z: z\n      }\n    });\n    nextNodeInternals.set(node.id, internals);\n  });\n  nextNodeInternals.forEach(function (node) {\n    if (node.parentNode && !nextNodeInternals.has(node.parentNode)) {\n      throw new Error(\"Parent node \".concat(node.parentNode, \" not found\"));\n    }\n\n    if (node.parentNode || parentNodes[node.id]) {\n      var _node$internalsSymbol, _node$internalsSymbol2;\n\n      var _calculateXYZPosition = calculateXYZPosition(node, nextNodeInternals, parentNodes, _objectSpread$1(_objectSpread$1({}, node.position), {}, {\n        z: (_node$internalsSymbol = (_node$internalsSymbol2 = node[internalsSymbol]) === null || _node$internalsSymbol2 === void 0 ? void 0 : _node$internalsSymbol2.z) !== null && _node$internalsSymbol !== void 0 ? _node$internalsSymbol : 0\n      })),\n          x = _calculateXYZPosition.x,\n          y = _calculateXYZPosition.y,\n          z = _calculateXYZPosition.z;\n\n      node.positionAbsolute = {\n        x: x,\n        y: y\n      };\n      node[internalsSymbol].z = z;\n\n      if (parentNodes[node.id]) {\n        node[internalsSymbol].isParent = true;\n      }\n    }\n  });\n  return nextNodeInternals;\n}\nfunction fitView(get) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  var _get = get(),\n      nodeInternals = _get.nodeInternals,\n      width = _get.width,\n      height = _get.height,\n      minZoom = _get.minZoom,\n      maxZoom = _get.maxZoom,\n      d3Zoom = _get.d3Zoom,\n      d3Selection = _get.d3Selection,\n      fitViewOnInitDone = _get.fitViewOnInitDone,\n      fitViewOnInit = _get.fitViewOnInit;\n\n  if (options.initial && !fitViewOnInitDone && fitViewOnInit || !options.initial) {\n    if (d3Zoom && d3Selection) {\n      var nodes = Array.from(nodeInternals.values()).filter(function (n) {\n        return options.includeHiddenNodes ? n.width && n.height : !n.hidden;\n      });\n      var nodesInitialized = nodes.every(function (n) {\n        return n.width && n.height;\n      });\n\n      if (nodes.length > 0 && nodesInitialized) {\n        var _options$minZoom, _options$maxZoom, _options$padding;\n\n        var bounds = getRectOfNodes(nodes);\n\n        var _getTransformForBound = getTransformForBounds(bounds, width, height, (_options$minZoom = options.minZoom) !== null && _options$minZoom !== void 0 ? _options$minZoom : minZoom, (_options$maxZoom = options.maxZoom) !== null && _options$maxZoom !== void 0 ? _options$maxZoom : maxZoom, (_options$padding = options.padding) !== null && _options$padding !== void 0 ? _options$padding : 0.1),\n            _getTransformForBound2 = _slicedToArray(_getTransformForBound, 3),\n            x = _getTransformForBound2[0],\n            y = _getTransformForBound2[1],\n            zoom = _getTransformForBound2[2];\n\n        var nextTransform = zoomIdentity.translate(x, y).scale(zoom);\n\n        if (typeof options.duration === 'number' && options.duration > 0) {\n          d3Zoom.transform(getD3Transition(d3Selection, options.duration), nextTransform);\n        } else {\n          d3Zoom.transform(d3Selection, nextTransform);\n        }\n\n        return true;\n      }\n    }\n  }\n\n  return false;\n}\nfunction handleControlledNodeSelectionChange(nodeChanges, nodeInternals) {\n  nodeChanges.forEach(function (change) {\n    var node = nodeInternals.get(change.id);\n\n    if (node) {\n      var _objectSpread2;\n\n      nodeInternals.set(node.id, _objectSpread$1(_objectSpread$1({}, node), {}, (_objectSpread2 = {}, _defineProperty(_objectSpread2, internalsSymbol, node[internalsSymbol]), _defineProperty(_objectSpread2, \"selected\", change.selected), _objectSpread2)));\n    }\n  });\n  return new Map(nodeInternals);\n}\nfunction handleControlledEdgeSelectionChange(edgeChanges, edges) {\n  return edges.map(function (e) {\n    var change = edgeChanges.find(function (change) {\n      return change.id === e.id;\n    });\n\n    if (change) {\n      e.selected = change.selected;\n    }\n\n    return e;\n  });\n}\nfunction updateNodesAndEdgesSelections(_ref) {\n  var changedNodes = _ref.changedNodes,\n      changedEdges = _ref.changedEdges,\n      get = _ref.get,\n      set = _ref.set;\n\n  var _get2 = get(),\n      nodeInternals = _get2.nodeInternals,\n      edges = _get2.edges,\n      onNodesChange = _get2.onNodesChange,\n      onEdgesChange = _get2.onEdgesChange,\n      hasDefaultNodes = _get2.hasDefaultNodes,\n      hasDefaultEdges = _get2.hasDefaultEdges;\n\n  if (changedNodes !== null && changedNodes !== void 0 && changedNodes.length) {\n    if (hasDefaultNodes) {\n      set({\n        nodeInternals: handleControlledNodeSelectionChange(changedNodes, nodeInternals)\n      });\n    }\n\n    onNodesChange === null || onNodesChange === void 0 ? void 0 : onNodesChange(changedNodes);\n  }\n\n  if (changedEdges !== null && changedEdges !== void 0 && changedEdges.length) {\n    if (hasDefaultEdges) {\n      set({\n        edges: handleControlledEdgeSelectionChange(changedEdges, edges)\n      });\n    }\n\n    onEdgesChange === null || onEdgesChange === void 0 ? void 0 : onEdgesChange(changedEdges);\n  }\n}\n\nvar infiniteExtent = [[Number.NEGATIVE_INFINITY, Number.NEGATIVE_INFINITY], [Number.POSITIVE_INFINITY, Number.POSITIVE_INFINITY]];\nvar initialState = {\n  width: 0,\n  height: 0,\n  transform: [0, 0, 1],\n  nodeInternals: new Map(),\n  edges: [],\n  onNodesChange: null,\n  onEdgesChange: null,\n  hasDefaultNodes: false,\n  hasDefaultEdges: false,\n  d3Zoom: null,\n  d3Selection: null,\n  d3ZoomHandler: undefined,\n  minZoom: 0.5,\n  maxZoom: 2,\n  translateExtent: infiniteExtent,\n  nodeExtent: infiniteExtent,\n  nodesSelectionActive: false,\n  userSelectionActive: false,\n  connectionNodeId: null,\n  connectionHandleId: null,\n  connectionHandleType: 'source',\n  connectionPosition: {\n    x: 0,\n    y: 0\n  },\n  connectionMode: ConnectionMode.Strict,\n  domNode: null,\n  snapGrid: [15, 15],\n  snapToGrid: false,\n  nodesDraggable: true,\n  nodesConnectable: true,\n  elementsSelectable: true,\n  fitViewOnInit: false,\n  fitViewOnInitDone: false,\n  fitViewOnInitOptions: undefined,\n  multiSelectionActive: false,\n  reactFlowVersion: \"10.3.17\" ,\n  connectionStartHandle: null,\n  connectOnClick: true\n};\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nvar _createContext = createContext(),\n    Provider = _createContext.Provider,\n    useStore = _createContext.useStore,\n    useStoreApi = _createContext.useStoreApi;\n\nvar createStore = function createStore() {\n  return create(function (set, get) {\n    return _objectSpread(_objectSpread({}, initialState), {}, {\n      setNodes: function setNodes(nodes) {\n        set({\n          nodeInternals: createNodeInternals(nodes, get().nodeInternals)\n        });\n      },\n      setEdges: function setEdges(edges) {\n        var _get = get(),\n            _get$defaultEdgeOptio = _get.defaultEdgeOptions,\n            defaultEdgeOptions = _get$defaultEdgeOptio === void 0 ? {} : _get$defaultEdgeOptio;\n\n        set({\n          edges: edges.map(function (e) {\n            return _objectSpread(_objectSpread({}, defaultEdgeOptions), e);\n          })\n        });\n      },\n      setDefaultNodesAndEdges: function setDefaultNodesAndEdges(nodes, edges) {\n        var hasDefaultNodes = typeof nodes !== 'undefined';\n        var hasDefaultEdges = typeof edges !== 'undefined';\n        var nodeInternals = hasDefaultNodes ? createNodeInternals(nodes, new Map()) : new Map();\n        var nextEdges = hasDefaultEdges ? edges : [];\n        set({\n          nodeInternals: nodeInternals,\n          edges: nextEdges,\n          hasDefaultNodes: hasDefaultNodes,\n          hasDefaultEdges: hasDefaultEdges\n        });\n      },\n      updateNodeDimensions: function updateNodeDimensions(updates) {\n        var _get2 = get(),\n            onNodesChange = _get2.onNodesChange,\n            nodeInternals = _get2.nodeInternals,\n            fitViewOnInit = _get2.fitViewOnInit,\n            fitViewOnInitDone = _get2.fitViewOnInitDone,\n            fitViewOnInitOptions = _get2.fitViewOnInitOptions,\n            domNode = _get2.domNode;\n\n        var viewportNode = domNode === null || domNode === void 0 ? void 0 : domNode.querySelector('.react-flow__viewport');\n\n        if (!viewportNode) {\n          return;\n        }\n\n        var style = window.getComputedStyle(viewportNode);\n\n        var _window$DOMMatrixRead = new window.DOMMatrixReadOnly(style.transform),\n            zoom = _window$DOMMatrixRead.m22;\n\n        var changes = updates.reduce(function (res, update) {\n          var node = nodeInternals.get(update.id);\n\n          if (node) {\n            var dimensions = getDimensions(update.nodeElement);\n            var doUpdate = !!(dimensions.width && dimensions.height && (node.width !== dimensions.width || node.height !== dimensions.height || update.forceUpdate));\n\n            if (doUpdate) {\n              nodeInternals.set(node.id, _objectSpread(_objectSpread({}, node), {}, _defineProperty({}, internalsSymbol, _objectSpread(_objectSpread({}, node[internalsSymbol]), {}, {\n                handleBounds: {\n                  source: getHandleBounds('.source', update.nodeElement, zoom),\n                  target: getHandleBounds('.target', update.nodeElement, zoom)\n                }\n              })), dimensions));\n              res.push({\n                id: node.id,\n                type: 'dimensions',\n                dimensions: dimensions\n              });\n            }\n          }\n\n          return res;\n        }, []);\n        var nextFitViewOnInitDone = fitViewOnInitDone || fitViewOnInit && !fitViewOnInitDone && fitView(get, _objectSpread({\n          initial: true\n        }, fitViewOnInitOptions));\n        set({\n          nodeInternals: new Map(nodeInternals),\n          fitViewOnInitDone: nextFitViewOnInitDone\n        });\n\n        if ((changes === null || changes === void 0 ? void 0 : changes.length) > 0) {\n          onNodesChange === null || onNodesChange === void 0 ? void 0 : onNodesChange(changes);\n        }\n      },\n      updateNodePositions: function updateNodePositions(nodeDragItems) {\n        var positionChanged = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n        var dragging = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n        var _get3 = get(),\n            onNodesChange = _get3.onNodesChange,\n            nodeInternals = _get3.nodeInternals,\n            hasDefaultNodes = _get3.hasDefaultNodes;\n\n        if (hasDefaultNodes || onNodesChange) {\n          var changes = nodeDragItems.map(function (node) {\n            var change = {\n              id: node.id,\n              type: 'position',\n              dragging: dragging\n            };\n\n            if (positionChanged) {\n              change.positionAbsolute = node.positionAbsolute;\n              change.position = node.position;\n            }\n\n            return change;\n          });\n\n          if (changes !== null && changes !== void 0 && changes.length) {\n            if (hasDefaultNodes) {\n              var nodes = applyNodeChanges(changes, Array.from(nodeInternals.values()));\n              var nextNodeInternals = createNodeInternals(nodes, nodeInternals);\n              set({\n                nodeInternals: nextNodeInternals\n              });\n            }\n\n            onNodesChange === null || onNodesChange === void 0 ? void 0 : onNodesChange(changes);\n          }\n        }\n      },\n      addSelectedNodes: function addSelectedNodes(selectedNodeIds) {\n        var _get4 = get(),\n            multiSelectionActive = _get4.multiSelectionActive,\n            nodeInternals = _get4.nodeInternals,\n            edges = _get4.edges;\n\n        var changedNodes;\n        var changedEdges = null;\n\n        if (multiSelectionActive) {\n          changedNodes = selectedNodeIds.map(function (nodeId) {\n            return createSelectionChange(nodeId, true);\n          });\n        } else {\n          changedNodes = getSelectionChanges(Array.from(nodeInternals.values()), selectedNodeIds);\n          changedEdges = getSelectionChanges(edges, []);\n        }\n\n        updateNodesAndEdgesSelections({\n          changedNodes: changedNodes,\n          changedEdges: changedEdges,\n          get: get,\n          set: set\n        });\n      },\n      addSelectedEdges: function addSelectedEdges(selectedEdgeIds) {\n        var _get5 = get(),\n            multiSelectionActive = _get5.multiSelectionActive,\n            edges = _get5.edges,\n            nodeInternals = _get5.nodeInternals;\n\n        var changedEdges;\n        var changedNodes = null;\n\n        if (multiSelectionActive) {\n          changedEdges = selectedEdgeIds.map(function (edgeId) {\n            return createSelectionChange(edgeId, true);\n          });\n        } else {\n          changedEdges = getSelectionChanges(edges, selectedEdgeIds);\n          changedNodes = getSelectionChanges(Array.from(nodeInternals.values()), []);\n        }\n\n        updateNodesAndEdgesSelections({\n          changedNodes: changedNodes,\n          changedEdges: changedEdges,\n          get: get,\n          set: set\n        });\n      },\n      unselectNodesAndEdges: function unselectNodesAndEdges() {\n        var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n            nodes = _ref.nodes,\n            edges = _ref.edges;\n\n        var _get6 = get(),\n            nodeInternals = _get6.nodeInternals,\n            storeEdges = _get6.edges;\n\n        var nodesToUnselect = nodes ? nodes : Array.from(nodeInternals.values());\n        var edgesToUnselect = edges ? edges : storeEdges;\n        var changedNodes = nodesToUnselect.map(function (n) {\n          n.selected = false;\n          return createSelectionChange(n.id, false);\n        });\n        var changedEdges = edgesToUnselect.map(function (edge) {\n          return createSelectionChange(edge.id, false);\n        });\n        updateNodesAndEdgesSelections({\n          changedNodes: changedNodes,\n          changedEdges: changedEdges,\n          get: get,\n          set: set\n        });\n      },\n      setMinZoom: function setMinZoom(minZoom) {\n        var _get7 = get(),\n            d3Zoom = _get7.d3Zoom,\n            maxZoom = _get7.maxZoom;\n\n        d3Zoom === null || d3Zoom === void 0 ? void 0 : d3Zoom.scaleExtent([minZoom, maxZoom]);\n        set({\n          minZoom: minZoom\n        });\n      },\n      setMaxZoom: function setMaxZoom(maxZoom) {\n        var _get8 = get(),\n            d3Zoom = _get8.d3Zoom,\n            minZoom = _get8.minZoom;\n\n        d3Zoom === null || d3Zoom === void 0 ? void 0 : d3Zoom.scaleExtent([minZoom, maxZoom]);\n        set({\n          maxZoom: maxZoom\n        });\n      },\n      setTranslateExtent: function setTranslateExtent(translateExtent) {\n        var _get9 = get(),\n            d3Zoom = _get9.d3Zoom;\n\n        d3Zoom === null || d3Zoom === void 0 ? void 0 : d3Zoom.translateExtent(translateExtent);\n        set({\n          translateExtent: translateExtent\n        });\n      },\n      resetSelectedElements: function resetSelectedElements() {\n        var _get10 = get(),\n            nodeInternals = _get10.nodeInternals,\n            edges = _get10.edges;\n\n        var nodes = Array.from(nodeInternals.values());\n        var nodesToUnselect = nodes.filter(function (e) {\n          return e.selected;\n        }).map(function (n) {\n          return createSelectionChange(n.id, false);\n        });\n        var edgesToUnselect = edges.filter(function (e) {\n          return e.selected;\n        }).map(function (e) {\n          return createSelectionChange(e.id, false);\n        });\n        updateNodesAndEdgesSelections({\n          changedNodes: nodesToUnselect,\n          changedEdges: edgesToUnselect,\n          get: get,\n          set: set\n        });\n      },\n      setNodeExtent: function setNodeExtent(nodeExtent) {\n        var _get11 = get(),\n            nodeInternals = _get11.nodeInternals;\n\n        nodeInternals.forEach(function (node) {\n          node.positionAbsolute = clampPosition(node.position, nodeExtent);\n        });\n        set({\n          nodeExtent: nodeExtent,\n          nodeInternals: new Map(nodeInternals)\n        });\n      },\n      reset: function reset() {\n        return set(_objectSpread({}, initialState));\n      }\n    });\n  });\n};\n\nexport { isNode as A, isEdge as B, ConnectionMode as C, getOutgoers as D, getIncomers as E, updateEdge as F, getTransformForBounds as G, BackgroundVariant as H, getBoundsofRects as I, _arrayLikeToArray as J, _unsupportedIterableToArray as K, getD3Transition as L, MarkerType as M, fitView as N, Position as P, _slicedToArray as _, _defineProperty as a, useStore as b, addEdge as c, getMarkerId as d, getConnectedEdges as e, getDimensions as f, getHostForElement as g, PanOnScrollMode as h, internalsSymbol as i, clamp as j, getNodesInside as k, getSelectionChanges as l, clampPosition as m, handleNodeClick as n, getRectOfNodes as o, pointToRendererPoint as p, ConnectionLineType as q, rectToBox as r, isNumeric as s, getMouseHandler as t, useStoreApi as u, Provider as v, createStore as w, infiniteExtent as x, applyNodeChanges as y, applyEdgeChanges as z };\n//# sourceMappingURL=index-a12c80bd.js.map\n","export default function cc(names) {\n  if (typeof names === \"string\" || typeof names === \"number\") return \"\" + names\n\n  let out = \"\"\n\n  if (Array.isArray(names)) {\n    for (let i = 0, tmp; i < names.length; i++) {\n      if ((tmp = cc(names[i])) !== \"\") {\n        out += (out && \" \") + tmp\n      }\n    }\n  } else {\n    for (let k in names) {\n      if (names[k]) out += (out && \" \") + k\n    }\n  }\n\n  return out\n}\n","function shallow(objA, objB) {\n  if (Object.is(objA, objB)) {\n    return true;\n  }\n  if (typeof objA !== \"object\" || objA === null || typeof objB !== \"object\" || objB === null) {\n    return false;\n  }\n  const keysA = Object.keys(objA);\n  if (keysA.length !== Object.keys(objB).length) {\n    return false;\n  }\n  for (let i = 0; i < keysA.length; i++) {\n    if (!Object.prototype.hasOwnProperty.call(objB, keysA[i]) || !Object.is(objA[keysA[i]], objB[keysA[i]])) {\n      return false;\n    }\n  }\n  return true;\n}\n\nexport { shallow as default };\n","import { J as _arrayLikeToArray, K as _unsupportedIterableToArray, u as useStoreApi, b as useStore, L as getD3Transition, _ as _slicedToArray, N as fitView, G as getTransformForBounds, p as pointToRendererPoint, a as _defineProperty } from './index-a12c80bd.js';\nimport { useMemo, useCallback } from 'react';\nimport { zoomIdentity } from 'd3-zoom';\nimport shallow from 'zustand/shallow';\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n}\n\nfunction _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n}\n\nvar initialViewportHelper = {\n  zoomIn: function zoomIn() {},\n  zoomOut: function zoomOut() {},\n  zoomTo: function zoomTo(_) {},\n  getZoom: function getZoom() {\n    return 1;\n  },\n  setViewport: function setViewport(_) {},\n  getViewport: function getViewport() {\n    return {\n      x: 0,\n      y: 0,\n      zoom: 1\n    };\n  },\n  fitView: function fitView() {\n  },\n  setCenter: function setCenter(_, __) {},\n  fitBounds: function fitBounds(_) {},\n  project: function project(position) {\n    return position;\n  },\n  viewportInitialized: false\n};\n\nvar selector = function selector(s) {\n  return {\n    d3Zoom: s.d3Zoom,\n    d3Selection: s.d3Selection\n  };\n};\n\nvar useViewportHelper = function useViewportHelper() {\n  var store = useStoreApi();\n\n  var _useStore = useStore(selector, shallow),\n      d3Zoom = _useStore.d3Zoom,\n      d3Selection = _useStore.d3Selection;\n\n  var viewportHelperFunctions = useMemo(function () {\n    if (d3Selection && d3Zoom) {\n      return {\n        zoomIn: function zoomIn(options) {\n          return d3Zoom.scaleBy(getD3Transition(d3Selection, options === null || options === void 0 ? void 0 : options.duration), 1.2);\n        },\n        zoomOut: function zoomOut(options) {\n          return d3Zoom.scaleBy(getD3Transition(d3Selection, options === null || options === void 0 ? void 0 : options.duration), 1 / 1.2);\n        },\n        zoomTo: function zoomTo(zoomLevel, options) {\n          return d3Zoom.scaleTo(getD3Transition(d3Selection, options === null || options === void 0 ? void 0 : options.duration), zoomLevel);\n        },\n        getZoom: function getZoom() {\n          return store.getState().transform[2];\n        },\n        setViewport: function setViewport(transform, options) {\n          var _transform$x, _transform$y, _transform$zoom;\n\n          var _store$getState$trans = _slicedToArray(store.getState().transform, 3),\n              x = _store$getState$trans[0],\n              y = _store$getState$trans[1],\n              zoom = _store$getState$trans[2];\n\n          var nextTransform = zoomIdentity.translate((_transform$x = transform.x) !== null && _transform$x !== void 0 ? _transform$x : x, (_transform$y = transform.y) !== null && _transform$y !== void 0 ? _transform$y : y).scale((_transform$zoom = transform.zoom) !== null && _transform$zoom !== void 0 ? _transform$zoom : zoom);\n          d3Zoom.transform(getD3Transition(d3Selection, options === null || options === void 0 ? void 0 : options.duration), nextTransform);\n        },\n        getViewport: function getViewport() {\n          var _store$getState$trans2 = _slicedToArray(store.getState().transform, 3),\n              x = _store$getState$trans2[0],\n              y = _store$getState$trans2[1],\n              zoom = _store$getState$trans2[2];\n\n          return {\n            x: x,\n            y: y,\n            zoom: zoom\n          };\n        },\n        fitView: function fitView$1(options) {\n          return fitView(store.getState, options);\n        },\n        setCenter: function setCenter(x, y, options) {\n          var _store$getState = store.getState(),\n              width = _store$getState.width,\n              height = _store$getState.height,\n              maxZoom = _store$getState.maxZoom;\n\n          var nextZoom = typeof (options === null || options === void 0 ? void 0 : options.zoom) !== 'undefined' ? options.zoom : maxZoom;\n          var centerX = width / 2 - x * nextZoom;\n          var centerY = height / 2 - y * nextZoom;\n          var transform = zoomIdentity.translate(centerX, centerY).scale(nextZoom);\n          d3Zoom.transform(getD3Transition(d3Selection, options === null || options === void 0 ? void 0 : options.duration), transform);\n        },\n        fitBounds: function fitBounds(bounds, options) {\n          var _options$padding;\n\n          var _store$getState2 = store.getState(),\n              width = _store$getState2.width,\n              height = _store$getState2.height,\n              minZoom = _store$getState2.minZoom,\n              maxZoom = _store$getState2.maxZoom;\n\n          var _getTransformForBound = getTransformForBounds(bounds, width, height, minZoom, maxZoom, (_options$padding = options === null || options === void 0 ? void 0 : options.padding) !== null && _options$padding !== void 0 ? _options$padding : 0.1),\n              _getTransformForBound2 = _slicedToArray(_getTransformForBound, 3),\n              x = _getTransformForBound2[0],\n              y = _getTransformForBound2[1],\n              zoom = _getTransformForBound2[2];\n\n          var transform = zoomIdentity.translate(x, y).scale(zoom);\n          d3Zoom.transform(getD3Transition(d3Selection, options === null || options === void 0 ? void 0 : options.duration), transform);\n        },\n        project: function project(position) {\n          var _store$getState3 = store.getState(),\n              transform = _store$getState3.transform,\n              snapToGrid = _store$getState3.snapToGrid,\n              snapGrid = _store$getState3.snapGrid;\n\n          return pointToRendererPoint(position, transform, snapToGrid, snapGrid);\n        },\n        viewportInitialized: true\n      };\n    }\n\n    return initialViewportHelper;\n  }, [d3Zoom, d3Selection]);\n  return viewportHelperFunctions;\n};\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nfunction useReactFlow() {\n  var viewportHelper = useViewportHelper();\n  var store = useStoreApi();\n  var getNodes = useCallback(function () {\n    var _store$getState = store.getState(),\n        nodeInternals = _store$getState.nodeInternals;\n\n    var nodes = Array.from(nodeInternals.values());\n    return nodes.map(function (n) {\n      return _objectSpread({}, n);\n    });\n  }, []);\n  var getNode = useCallback(function (id) {\n    var _store$getState2 = store.getState(),\n        nodeInternals = _store$getState2.nodeInternals;\n\n    return nodeInternals.get(id);\n  }, []);\n  var getEdges = useCallback(function () {\n    var _store$getState3 = store.getState(),\n        _store$getState3$edge = _store$getState3.edges,\n        edges = _store$getState3$edge === void 0 ? [] : _store$getState3$edge;\n\n    return edges.map(function (e) {\n      return _objectSpread({}, e);\n    });\n  }, []);\n  var getEdge = useCallback(function (id) {\n    var _store$getState4 = store.getState(),\n        _store$getState4$edge = _store$getState4.edges,\n        edges = _store$getState4$edge === void 0 ? [] : _store$getState4$edge;\n\n    return edges.find(function (e) {\n      return e.id === id;\n    });\n  }, []);\n  var setNodes = useCallback(function (payload) {\n    var _store$getState5 = store.getState(),\n        nodeInternals = _store$getState5.nodeInternals,\n        setNodes = _store$getState5.setNodes,\n        hasDefaultNodes = _store$getState5.hasDefaultNodes,\n        onNodesChange = _store$getState5.onNodesChange;\n\n    var nodes = Array.from(nodeInternals.values());\n    var nextNodes = typeof payload === 'function' ? payload(nodes) : payload;\n\n    if (hasDefaultNodes) {\n      setNodes(nextNodes);\n    } else if (onNodesChange) {\n      var changes = nextNodes.length === 0 ? nodes.map(function (node) {\n        return {\n          type: 'remove',\n          id: node.id\n        };\n      }) : nextNodes.map(function (node) {\n        return {\n          item: node,\n          type: 'reset'\n        };\n      });\n      onNodesChange(changes);\n    }\n  }, []);\n  var setEdges = useCallback(function (payload) {\n    var _store$getState6 = store.getState(),\n        _store$getState6$edge = _store$getState6.edges,\n        edges = _store$getState6$edge === void 0 ? [] : _store$getState6$edge,\n        setEdges = _store$getState6.setEdges,\n        hasDefaultEdges = _store$getState6.hasDefaultEdges,\n        onEdgesChange = _store$getState6.onEdgesChange;\n\n    var nextEdges = typeof payload === 'function' ? payload(edges) : payload;\n\n    if (hasDefaultEdges) {\n      setEdges(nextEdges);\n    } else if (onEdgesChange) {\n      var changes = nextEdges.length === 0 ? edges.map(function (edge) {\n        return {\n          type: 'remove',\n          id: edge.id\n        };\n      }) : nextEdges.map(function (edge) {\n        return {\n          item: edge,\n          type: 'reset'\n        };\n      });\n      onEdgesChange(changes);\n    }\n  }, []);\n  var addNodes = useCallback(function (payload) {\n    var nodes = Array.isArray(payload) ? payload : [payload];\n\n    var _store$getState7 = store.getState(),\n        nodeInternals = _store$getState7.nodeInternals,\n        setNodes = _store$getState7.setNodes,\n        hasDefaultNodes = _store$getState7.hasDefaultNodes,\n        onNodesChange = _store$getState7.onNodesChange;\n\n    if (hasDefaultNodes) {\n      var currentNodes = Array.from(nodeInternals.values());\n      var nextNodes = [].concat(currentNodes, _toConsumableArray(nodes));\n      setNodes(nextNodes);\n    } else if (onNodesChange) {\n      var changes = nodes.map(function (node) {\n        return {\n          item: node,\n          type: 'add'\n        };\n      });\n      onNodesChange(changes);\n    }\n  }, []);\n  var addEdges = useCallback(function (payload) {\n    var nextEdges = Array.isArray(payload) ? payload : [payload];\n\n    var _store$getState8 = store.getState(),\n        _store$getState8$edge = _store$getState8.edges,\n        edges = _store$getState8$edge === void 0 ? [] : _store$getState8$edge,\n        setEdges = _store$getState8.setEdges,\n        hasDefaultEdges = _store$getState8.hasDefaultEdges,\n        onEdgesChange = _store$getState8.onEdgesChange;\n\n    if (hasDefaultEdges) {\n      setEdges([].concat(_toConsumableArray(edges), _toConsumableArray(nextEdges)));\n    } else if (onEdgesChange) {\n      var changes = nextEdges.map(function (edge) {\n        return {\n          item: edge,\n          type: 'add'\n        };\n      });\n      onEdgesChange(changes);\n    }\n  }, []);\n  var toObject = useCallback(function () {\n    var _store$getState9 = store.getState(),\n        nodeInternals = _store$getState9.nodeInternals,\n        _store$getState9$edge = _store$getState9.edges,\n        edges = _store$getState9$edge === void 0 ? [] : _store$getState9$edge,\n        transform = _store$getState9.transform;\n\n    var nodes = Array.from(nodeInternals.values());\n\n    var _transform = _slicedToArray(transform, 3),\n        x = _transform[0],\n        y = _transform[1],\n        zoom = _transform[2];\n\n    return {\n      nodes: nodes.map(function (n) {\n        return _objectSpread({}, n);\n      }),\n      edges: edges.map(function (e) {\n        return _objectSpread({}, e);\n      }),\n      viewport: {\n        x: x,\n        y: y,\n        zoom: zoom\n      }\n    };\n  }, []);\n  return useMemo(function () {\n    return _objectSpread(_objectSpread({}, viewportHelper), {}, {\n      getNodes: getNodes,\n      getNode: getNode,\n      getEdges: getEdges,\n      getEdge: getEdge,\n      setNodes: setNodes,\n      setEdges: setEdges,\n      addNodes: addNodes,\n      addEdges: addEdges,\n      toObject: toObject\n    });\n  }, [viewportHelper, getNodes, getNode, getEdges, getEdge, setNodes, setEdges, addNodes, addEdges, toObject]);\n}\n\nexport { _toConsumableArray as _, useReactFlow as u };\n//# sourceMappingURL=useReactFlow-993c30ca.js.map\n","import { u as useStoreApi, _ as _slicedToArray, b as useStore, a as _defineProperty } from './index-a12c80bd.js';\nimport React, { memo, useState, useEffect } from 'react';\nimport cc from 'classcat';\nimport { u as useReactFlow } from './useReactFlow-993c30ca.js';\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nfunction PlusIcon() {\n  return /*#__PURE__*/React.createElement(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 32 32\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z\"\n  }));\n}\n\nfunction MinusIcon() {\n  return /*#__PURE__*/React.createElement(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 32 5\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M0 0h32v4.2H0z\"\n  }));\n}\n\nfunction FitViewIcon() {\n  return /*#__PURE__*/React.createElement(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 32 30\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z\"\n  }));\n}\n\nfunction LockIcon() {\n  return /*#__PURE__*/React.createElement(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 25 32\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z\"\n  }));\n}\n\nfunction UnlockIcon() {\n  return /*#__PURE__*/React.createElement(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 25 32\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z\"\n  }));\n}\n\nvar _excluded = [\"children\", \"className\"];\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nvar ControlButton = function ControlButton(_ref) {\n  var children = _ref.children,\n      className = _ref.className,\n      rest = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"button\", _objectSpread({\n    type: \"button\",\n    className: cc(['react-flow__controls-button', className])\n  }, rest), children);\n};\n\nvar isInteractiveSelector = function isInteractiveSelector(s) {\n  return s.nodesDraggable && s.nodesConnectable && s.elementsSelectable;\n};\n\nvar Controls = function Controls(_ref2) {\n  var style = _ref2.style,\n      _ref2$showZoom = _ref2.showZoom,\n      showZoom = _ref2$showZoom === void 0 ? true : _ref2$showZoom,\n      _ref2$showFitView = _ref2.showFitView,\n      showFitView = _ref2$showFitView === void 0 ? true : _ref2$showFitView,\n      _ref2$showInteractive = _ref2.showInteractive,\n      showInteractive = _ref2$showInteractive === void 0 ? true : _ref2$showInteractive,\n      fitViewOptions = _ref2.fitViewOptions,\n      onZoomIn = _ref2.onZoomIn,\n      onZoomOut = _ref2.onZoomOut,\n      onFitView = _ref2.onFitView,\n      onInteractiveChange = _ref2.onInteractiveChange,\n      className = _ref2.className,\n      children = _ref2.children;\n  var store = useStoreApi();\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      isVisible = _useState2[0],\n      setIsVisible = _useState2[1];\n\n  var isInteractive = useStore(isInteractiveSelector);\n\n  var _useReactFlow = useReactFlow(),\n      zoomIn = _useReactFlow.zoomIn,\n      zoomOut = _useReactFlow.zoomOut,\n      fitView = _useReactFlow.fitView;\n\n  useEffect(function () {\n    setIsVisible(true);\n  }, []);\n\n  if (!isVisible) {\n    return null;\n  }\n\n  var onZoomInHandler = function onZoomInHandler() {\n    zoomIn === null || zoomIn === void 0 ? void 0 : zoomIn();\n    onZoomIn === null || onZoomIn === void 0 ? void 0 : onZoomIn();\n  };\n\n  var onZoomOutHandler = function onZoomOutHandler() {\n    zoomOut === null || zoomOut === void 0 ? void 0 : zoomOut();\n    onZoomOut === null || onZoomOut === void 0 ? void 0 : onZoomOut();\n  };\n\n  var onFitViewHandler = function onFitViewHandler() {\n    fitView === null || fitView === void 0 ? void 0 : fitView(fitViewOptions);\n    onFitView === null || onFitView === void 0 ? void 0 : onFitView();\n  };\n\n  var onToggleInteractivity = function onToggleInteractivity() {\n    store.setState({\n      nodesDraggable: !isInteractive,\n      nodesConnectable: !isInteractive,\n      elementsSelectable: !isInteractive\n    });\n    onInteractiveChange === null || onInteractiveChange === void 0 ? void 0 : onInteractiveChange(!isInteractive);\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: cc(['react-flow__controls', className]),\n    style: style\n  }, showZoom && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(ControlButton, {\n    onClick: onZoomInHandler,\n    className: \"react-flow__controls-zoomin\",\n    title: \"zoom in\",\n    \"aria-label\": \"zoom in\"\n  }, /*#__PURE__*/React.createElement(PlusIcon, null)), /*#__PURE__*/React.createElement(ControlButton, {\n    onClick: onZoomOutHandler,\n    className: \"react-flow__controls-zoomout\",\n    title: \"zoom out\",\n    \"aria-label\": \"zoom out\"\n  }, /*#__PURE__*/React.createElement(MinusIcon, null))), showFitView && /*#__PURE__*/React.createElement(ControlButton, {\n    className: \"react-flow__controls-fitview\",\n    onClick: onFitViewHandler,\n    title: \"fit view\",\n    \"aria-label\": \"fit view\"\n  }, /*#__PURE__*/React.createElement(FitViewIcon, null)), showInteractive && /*#__PURE__*/React.createElement(ControlButton, {\n    className: \"react-flow__controls-interactive\",\n    onClick: onToggleInteractivity,\n    title: \"toggle interactivity\",\n    \"aria-label\": \"toggle interactivity\"\n  }, isInteractive ? /*#__PURE__*/React.createElement(UnlockIcon, null) : /*#__PURE__*/React.createElement(LockIcon, null)), children);\n};\n\nControls.displayName = 'Controls';\nvar index = /*#__PURE__*/memo(Controls);\n\nexport { ControlButton as C, _objectWithoutProperties as _, index as i };\n//# sourceMappingURL=index-20df97c0.js.map\n","import { a as _defineProperty, H as BackgroundVariant, _ as _slicedToArray, b as useStore } from './index-a12c80bd.js';\nimport React, { memo, useRef, useState, useEffect } from 'react';\nimport cc from 'classcat';\nimport 'zustand';\nimport 'zustand/context';\nimport 'd3-zoom';\n\nvar createGridLinesPath = function createGridLinesPath(size, strokeWidth, stroke) {\n  return /*#__PURE__*/React.createElement(\"path\", {\n    stroke: stroke,\n    strokeWidth: strokeWidth,\n    d: \"M\".concat(size / 2, \" 0 V\").concat(size, \" M0 \").concat(size / 2, \" H\").concat(size)\n  });\n};\nvar createGridDotsPath = function createGridDotsPath(size, fill) {\n  return /*#__PURE__*/React.createElement(\"circle\", {\n    cx: size,\n    cy: size,\n    r: size,\n    fill: fill\n  });\n};\n\nvar _defaultColors;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nvar defaultColors = (_defaultColors = {}, _defineProperty(_defaultColors, BackgroundVariant.Dots, '#81818a'), _defineProperty(_defaultColors, BackgroundVariant.Lines, '#eee'), _defaultColors);\n\nvar transformSelector = function transformSelector(s) {\n  return s.transform;\n};\n\nvar Background = function Background(_ref) {\n  var _ref$variant = _ref.variant,\n      variant = _ref$variant === void 0 ? BackgroundVariant.Dots : _ref$variant,\n      _ref$gap = _ref.gap,\n      gap = _ref$gap === void 0 ? 15 : _ref$gap,\n      _ref$size = _ref.size,\n      size = _ref$size === void 0 ? 0.4 : _ref$size,\n      color = _ref.color,\n      style = _ref.style,\n      className = _ref.className;\n  var ref = useRef(null);\n\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      patternId = _useState2[0],\n      setPatternId = _useState2[1];\n\n  var _useStore = useStore(transformSelector),\n      _useStore2 = _slicedToArray(_useStore, 3),\n      tX = _useStore2[0],\n      tY = _useStore2[1],\n      tScale = _useStore2[2];\n\n  useEffect(function () {\n    // when there are multiple flows on a page we need to make sure that every background gets its own pattern.\n    var bgs = document.querySelectorAll('.react-flow__background');\n    var index = Array.from(bgs).findIndex(function (bg) {\n      return bg === ref.current;\n    });\n    setPatternId(\"pattern-\".concat(index));\n  }, []);\n  var scaledGap = gap * tScale || 1;\n  var xOffset = tX % scaledGap;\n  var yOffset = tY % scaledGap;\n  var isLines = variant === BackgroundVariant.Lines;\n  var bgColor = color ? color : defaultColors[variant];\n  var path = isLines ? createGridLinesPath(scaledGap, size, bgColor) : createGridDotsPath(size * tScale, bgColor);\n  return /*#__PURE__*/React.createElement(\"svg\", {\n    className: cc(['react-flow__background', 'react-flow__container', className]),\n    style: _objectSpread(_objectSpread({}, style), {}, {\n      width: '100%',\n      height: '100%'\n    }),\n    ref: ref\n  }, patternId && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"pattern\", {\n    id: patternId,\n    x: xOffset,\n    y: yOffset,\n    width: scaledGap,\n    height: scaledGap,\n    patternUnits: \"userSpaceOnUse\"\n  }, path), /*#__PURE__*/React.createElement(\"rect\", {\n    x: \"0\",\n    y: \"0\",\n    width: \"100%\",\n    height: \"100%\",\n    fill: \"url(#\".concat(patternId, \")\")\n  })));\n};\n\nBackground.displayName = 'Background';\nvar index = /*#__PURE__*/memo(Background);\n\nexport { index as default };\n//# sourceMappingURL=index3.js.map\n","import { useCallback } from 'react';\nimport { u as useStoreApi, b as useStore } from './index-a12c80bd.js';\nimport 'zustand';\nimport 'zustand/context';\nimport 'd3-zoom';\n\nvar selector = function selector(state) {\n  return state.updateNodeDimensions;\n};\n\nfunction useUpdateNodeInternals() {\n  var store = useStoreApi();\n  var updateNodeDimensions = useStore(selector);\n  return useCallback(function (id) {\n    var _store$getState$domNo;\n\n    var nodeElement = (_store$getState$domNo = store.getState().domNode) === null || _store$getState$domNo === void 0 ? void 0 : _store$getState$domNo.querySelector(\".react-flow__node[data-id=\\\"\".concat(id, \"\\\"]\"));\n\n    if (nodeElement) {\n      requestAnimationFrame(function () {\n        return updateNodeDimensions([{\n          id: id,\n          nodeElement: nodeElement,\n          forceUpdate: true\n        }]);\n      });\n    }\n  }, []);\n}\n\nexport { useUpdateNodeInternals as default };\n//# sourceMappingURL=useUpdateNodeInternals.js.map\n","import { _ as _slicedToArray, a as _defineProperty, P as Position, C as ConnectionMode, g as getHostForElement, u as useStoreApi, b as useStore, c as addEdge, d as getMarkerId, i as internalsSymbol, r as rectToBox, e as getConnectedEdges, f as getDimensions, h as PanOnScrollMode, j as clamp, k as getNodesInside, l as getSelectionChanges, m as clampPosition, p as pointToRendererPoint, n as handleNodeClick, o as getRectOfNodes, q as ConnectionLineType, M as MarkerType, s as isNumeric, t as getMouseHandler$1, v as Provider$1, w as createStore, x as infiniteExtent, y as applyNodeChanges, z as applyEdgeChanges } from './index-a12c80bd.js';\nexport { H as BackgroundVariant, q as ConnectionLineType, C as ConnectionMode, M as MarkerType, h as PanOnScrollMode, P as Position, c as addEdge, z as applyEdgeChanges, y as applyNodeChanges, e as getConnectedEdges, E as getIncomers, D as getOutgoers, o as getRectOfNodes, G as getTransformForBounds, i as internalsSymbol, B as isEdge, A as isNode, F as updateEdge, b as useStore, u as useStoreApi } from './index-a12c80bd.js';\nimport { _ as _objectWithoutProperties } from './index-20df97c0.js';\nexport { C as ControlButton, i as Controls } from './index-20df97c0.js';\nimport React, { memo, useRef, useState, useEffect, createContext, forwardRef, useContext, useMemo, useCallback } from 'react';\nimport cc from 'classcat';\nimport { _ as _toConsumableArray, u as useReactFlow } from './useReactFlow-993c30ca.js';\nexport { u as useReactFlow } from './useReactFlow-993c30ca.js';\nimport shallow from 'zustand/shallow';\nimport { zoom, zoomIdentity } from 'd3-zoom';\nimport { select, pointer } from 'd3-selection';\nimport { drag } from 'd3-drag';\nexport { default as MiniMap } from './index2.js';\nexport { default as Background } from './index3.js';\nexport { default as useUpdateNodeInternals } from './useUpdateNodeInternals.js';\nexport { default as useNodes } from './useNodes.js';\nexport { default as useEdges } from './useEdges.js';\nexport { default as useViewport } from './useViewport.js';\nimport 'zustand';\nimport 'zustand/context';\n\nvar accounts = ['paid-pro', 'paid-sponsor', 'paid-enterprise', 'paid-custom'];\n\nfunction Attribution(_ref) {\n  var proOptions = _ref.proOptions,\n      _ref$position = _ref.position,\n      position = _ref$position === void 0 ? 'bottom-right' : _ref$position;\n\n  if (proOptions !== null && proOptions !== void 0 && proOptions.account && accounts.includes(proOptions === null || proOptions === void 0 ? void 0 : proOptions.account) && proOptions !== null && proOptions !== void 0 && proOptions.hideAttribution) {\n    return null;\n  }\n\n  var positionClasses = \"\".concat(position).split('-');\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: cc(['react-flow__attribution'].concat(_toConsumableArray(positionClasses))),\n    \"data-message\": \"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev/pricing\"\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    href: \"https://reactflow.dev\",\n    target: \"_blank\",\n    rel: \"noopener noreferrer\"\n  }, \"React Flow\"));\n}\n\nvar _excluded$2 = [\"x\", \"y\", \"label\", \"labelStyle\", \"labelShowBg\", \"labelBgStyle\", \"labelBgPadding\", \"labelBgBorderRadius\", \"children\", \"className\"];\n\nfunction ownKeys$c(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread$c(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys$c(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys$c(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nvar EdgeText = function EdgeText(_ref) {\n  var x = _ref.x,\n      y = _ref.y,\n      label = _ref.label,\n      _ref$labelStyle = _ref.labelStyle,\n      labelStyle = _ref$labelStyle === void 0 ? {} : _ref$labelStyle,\n      _ref$labelShowBg = _ref.labelShowBg,\n      labelShowBg = _ref$labelShowBg === void 0 ? true : _ref$labelShowBg,\n      _ref$labelBgStyle = _ref.labelBgStyle,\n      labelBgStyle = _ref$labelBgStyle === void 0 ? {} : _ref$labelBgStyle,\n      _ref$labelBgPadding = _ref.labelBgPadding,\n      labelBgPadding = _ref$labelBgPadding === void 0 ? [2, 4] : _ref$labelBgPadding,\n      _ref$labelBgBorderRad = _ref.labelBgBorderRadius,\n      labelBgBorderRadius = _ref$labelBgBorderRad === void 0 ? 2 : _ref$labelBgBorderRad,\n      children = _ref.children,\n      className = _ref.className,\n      rest = _objectWithoutProperties(_ref, _excluded$2);\n\n  var edgeRef = useRef(null);\n\n  var _useState = useState({\n    x: 0,\n    y: 0,\n    width: 0,\n    height: 0\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      edgeTextBbox = _useState2[0],\n      setEdgeTextBbox = _useState2[1];\n\n  var edgeTextClasses = cc(['react-flow__edge-textwrapper', className]);\n  useEffect(function () {\n    if (edgeRef.current) {\n      var textBbox = edgeRef.current.getBBox();\n      setEdgeTextBbox({\n        x: textBbox.x,\n        y: textBbox.y,\n        width: textBbox.width,\n        height: textBbox.height\n      });\n    }\n  }, [label]);\n\n  if (typeof label === 'undefined' || !label) {\n    return null;\n  }\n\n  return /*#__PURE__*/React.createElement(\"g\", _objectSpread$c({\n    transform: \"translate(\".concat(x - edgeTextBbox.width / 2, \" \").concat(y - edgeTextBbox.height / 2, \")\"),\n    className: edgeTextClasses\n  }, rest), labelShowBg && /*#__PURE__*/React.createElement(\"rect\", {\n    width: edgeTextBbox.width + 2 * labelBgPadding[0],\n    x: -labelBgPadding[0],\n    y: -labelBgPadding[1],\n    height: edgeTextBbox.height + 2 * labelBgPadding[1],\n    className: \"react-flow__edge-textbg\",\n    style: labelBgStyle,\n    rx: labelBgBorderRadius,\n    ry: labelBgBorderRadius\n  }), /*#__PURE__*/React.createElement(\"text\", {\n    className: \"react-flow__edge-text\",\n    y: edgeTextBbox.height / 2,\n    dy: \"0.3em\",\n    ref: edgeRef,\n    style: labelStyle\n  }, label), children);\n};\n\nvar EdgeText$1 = /*#__PURE__*/memo(EdgeText);\n\nvar BaseEdge = (function (_ref) {\n  var path = _ref.path,\n      centerX = _ref.centerX,\n      centerY = _ref.centerY,\n      label = _ref.label,\n      labelStyle = _ref.labelStyle,\n      labelShowBg = _ref.labelShowBg,\n      labelBgStyle = _ref.labelBgStyle,\n      labelBgPadding = _ref.labelBgPadding,\n      labelBgBorderRadius = _ref.labelBgBorderRadius,\n      style = _ref.style,\n      markerEnd = _ref.markerEnd,\n      markerStart = _ref.markerStart;\n  var text = label ? /*#__PURE__*/React.createElement(EdgeText$1, {\n    x: centerX,\n    y: centerY,\n    label: label,\n    labelStyle: labelStyle,\n    labelShowBg: labelShowBg,\n    labelBgStyle: labelBgStyle,\n    labelBgPadding: labelBgPadding,\n    labelBgBorderRadius: labelBgBorderRadius\n  }) : null;\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"path\", {\n    style: style,\n    d: path,\n    className: \"react-flow__edge-path\",\n    markerEnd: markerEnd,\n    markerStart: markerStart\n  }), text);\n});\n\nfunction getControl(_ref) {\n  var pos = _ref.pos,\n      x1 = _ref.x1,\n      y1 = _ref.y1,\n      x2 = _ref.x2,\n      y2 = _ref.y2;\n  var ctX, ctY;\n\n  switch (pos) {\n    case Position.Left:\n    case Position.Right:\n      {\n        ctX = 0.5 * (x1 + x2);\n        ctY = y1;\n      }\n      break;\n\n    case Position.Top:\n    case Position.Bottom:\n      {\n        ctX = x1;\n        ctY = 0.5 * (y1 + y2);\n      }\n      break;\n  }\n\n  return [ctX, ctY];\n}\n\nfunction getSimpleBezierPath(_ref2) {\n  var sourceX = _ref2.sourceX,\n      sourceY = _ref2.sourceY,\n      _ref2$sourcePosition = _ref2.sourcePosition,\n      sourcePosition = _ref2$sourcePosition === void 0 ? Position.Bottom : _ref2$sourcePosition,\n      targetX = _ref2.targetX,\n      targetY = _ref2.targetY,\n      _ref2$targetPosition = _ref2.targetPosition,\n      targetPosition = _ref2$targetPosition === void 0 ? Position.Top : _ref2$targetPosition;\n\n  var _getControl = getControl({\n    pos: sourcePosition,\n    x1: sourceX,\n    y1: sourceY,\n    x2: targetX,\n    y2: targetY\n  }),\n      _getControl2 = _slicedToArray(_getControl, 2),\n      sourceControlX = _getControl2[0],\n      sourceControlY = _getControl2[1];\n\n  var _getControl3 = getControl({\n    pos: targetPosition,\n    x1: targetX,\n    y1: targetY,\n    x2: sourceX,\n    y2: sourceY\n  }),\n      _getControl4 = _slicedToArray(_getControl3, 2),\n      targetControlX = _getControl4[0],\n      targetControlY = _getControl4[1];\n\n  return \"M\".concat(sourceX, \",\").concat(sourceY, \" C\").concat(sourceControlX, \",\").concat(sourceControlY, \" \").concat(targetControlX, \",\").concat(targetControlY, \" \").concat(targetX, \",\").concat(targetY);\n} // @TODO: this function will recalculate the control points\n// one option is to let getXXXPath() return center points\n// but will introduce breaking changes\n// the getCenter() of other types of edges might need to change, too\n\nfunction getSimpleBezierCenter(_ref3) {\n  var sourceX = _ref3.sourceX,\n      sourceY = _ref3.sourceY,\n      _ref3$sourcePosition = _ref3.sourcePosition,\n      sourcePosition = _ref3$sourcePosition === void 0 ? Position.Bottom : _ref3$sourcePosition,\n      targetX = _ref3.targetX,\n      targetY = _ref3.targetY,\n      _ref3$targetPosition = _ref3.targetPosition,\n      targetPosition = _ref3$targetPosition === void 0 ? Position.Top : _ref3$targetPosition;\n\n  var _getControl5 = getControl({\n    pos: sourcePosition,\n    x1: sourceX,\n    y1: sourceY,\n    x2: targetX,\n    y2: targetY\n  }),\n      _getControl6 = _slicedToArray(_getControl5, 2),\n      sourceControlX = _getControl6[0],\n      sourceControlY = _getControl6[1];\n\n  var _getControl7 = getControl({\n    pos: targetPosition,\n    x1: targetX,\n    y1: targetY,\n    x2: sourceX,\n    y2: sourceY\n  }),\n      _getControl8 = _slicedToArray(_getControl7, 2),\n      targetControlX = _getControl8[0],\n      targetControlY = _getControl8[1]; // cubic bezier t=0.5 mid point, not the actual mid point, but easy to calculate\n  // https://stackoverflow.com/questions/67516101/how-to-find-distance-mid-point-of-bezier-curve\n\n\n  var centerX = sourceX * 0.125 + sourceControlX * 0.375 + targetControlX * 0.375 + targetX * 0.125;\n  var centerY = sourceY * 0.125 + sourceControlY * 0.375 + targetControlY * 0.375 + targetY * 0.125;\n  var xOffset = Math.abs(centerX - sourceX);\n  var yOffset = Math.abs(centerY - sourceY);\n  return [centerX, centerY, xOffset, yOffset];\n}\nvar SimpleBezierEdge = /*#__PURE__*/memo(function (_ref4) {\n  var sourceX = _ref4.sourceX,\n      sourceY = _ref4.sourceY,\n      targetX = _ref4.targetX,\n      targetY = _ref4.targetY,\n      _ref4$sourcePosition = _ref4.sourcePosition,\n      sourcePosition = _ref4$sourcePosition === void 0 ? Position.Bottom : _ref4$sourcePosition,\n      _ref4$targetPosition = _ref4.targetPosition,\n      targetPosition = _ref4$targetPosition === void 0 ? Position.Top : _ref4$targetPosition,\n      label = _ref4.label,\n      labelStyle = _ref4.labelStyle,\n      labelShowBg = _ref4.labelShowBg,\n      labelBgStyle = _ref4.labelBgStyle,\n      labelBgPadding = _ref4.labelBgPadding,\n      labelBgBorderRadius = _ref4.labelBgBorderRadius,\n      style = _ref4.style,\n      markerEnd = _ref4.markerEnd,\n      markerStart = _ref4.markerStart;\n  var params = {\n    sourceX: sourceX,\n    sourceY: sourceY,\n    sourcePosition: sourcePosition,\n    targetX: targetX,\n    targetY: targetY,\n    targetPosition: targetPosition\n  };\n  var path = getSimpleBezierPath(params);\n\n  var _getSimpleBezierCente = getSimpleBezierCenter(params),\n      _getSimpleBezierCente2 = _slicedToArray(_getSimpleBezierCente, 2),\n      centerX = _getSimpleBezierCente2[0],\n      centerY = _getSimpleBezierCente2[1];\n\n  return /*#__PURE__*/React.createElement(BaseEdge, {\n    path: path,\n    centerX: centerX,\n    centerY: centerY,\n    label: label,\n    labelStyle: labelStyle,\n    labelShowBg: labelShowBg,\n    labelBgStyle: labelBgStyle,\n    labelBgPadding: labelBgPadding,\n    labelBgBorderRadius: labelBgBorderRadius,\n    style: style,\n    markerEnd: markerEnd,\n    markerStart: markerStart\n  });\n});\n\nfunction ownKeys$b(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread$b(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys$b(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys$b(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nvar getMarkerEnd = function getMarkerEnd(markerType, markerEndId) {\n  if (typeof markerEndId !== 'undefined' && markerEndId) {\n    return \"url(#\".concat(markerEndId, \")\");\n  }\n\n  return typeof markerType !== 'undefined' ? \"url(#react-flow__\".concat(markerType, \")\") : 'none';\n};\nvar LeftOrRight = [Position.Left, Position.Right];\nvar getCenter = function getCenter(_ref) {\n  var sourceX = _ref.sourceX,\n      sourceY = _ref.sourceY,\n      targetX = _ref.targetX,\n      targetY = _ref.targetY,\n      _ref$sourcePosition = _ref.sourcePosition,\n      sourcePosition = _ref$sourcePosition === void 0 ? Position.Bottom : _ref$sourcePosition,\n      _ref$targetPosition = _ref.targetPosition,\n      targetPosition = _ref$targetPosition === void 0 ? Position.Top : _ref$targetPosition;\n  var sourceIsLeftOrRight = LeftOrRight.includes(sourcePosition);\n  var targetIsLeftOrRight = LeftOrRight.includes(targetPosition); // we expect flows to be horizontal or vertical (all handles left or right respectively top or bottom)\n  // a mixed edge is when one the source is on the left and the target is on the top for example.\n\n  var mixedEdge = sourceIsLeftOrRight && !targetIsLeftOrRight || targetIsLeftOrRight && !sourceIsLeftOrRight;\n\n  if (mixedEdge) {\n    var _xOffset = sourceIsLeftOrRight ? Math.abs(targetX - sourceX) : 0;\n\n    var _centerX = sourceX > targetX ? sourceX - _xOffset : sourceX + _xOffset;\n\n    var _yOffset = sourceIsLeftOrRight ? 0 : Math.abs(targetY - sourceY);\n\n    var _centerY = sourceY < targetY ? sourceY + _yOffset : sourceY - _yOffset;\n\n    return [_centerX, _centerY, _xOffset, _yOffset];\n  }\n\n  var xOffset = Math.abs(targetX - sourceX) / 2;\n  var centerX = targetX < sourceX ? targetX + xOffset : targetX - xOffset;\n  var yOffset = Math.abs(targetY - sourceY) / 2;\n  var centerY = targetY < sourceY ? targetY + yOffset : targetY - yOffset;\n  return [centerX, centerY, xOffset, yOffset];\n};\nfunction getMouseHandler(id, getState, handler) {\n  return handler === undefined ? handler : function (event) {\n    var edge = getState().edges.find(function (e) {\n      return e.id === id;\n    });\n    handler(event, _objectSpread$b({}, edge));\n  };\n}\n\n// The name indicates the direction of the path. \"bottomLeftCorner\" goes\n// from bottom to the left and \"leftBottomCorner\" goes from left to the bottom.\n// We have to consider the direction of the paths because of the animated lines.\n\nvar bottomLeftCorner = function bottomLeftCorner(x, y, size) {\n  return \"L \".concat(x, \",\").concat(y - size, \"Q \").concat(x, \",\").concat(y, \" \").concat(x + size, \",\").concat(y);\n};\n\nvar leftBottomCorner = function leftBottomCorner(x, y, size) {\n  return \"L \".concat(x + size, \",\").concat(y, \"Q \").concat(x, \",\").concat(y, \" \").concat(x, \",\").concat(y - size);\n};\n\nvar bottomRightCorner = function bottomRightCorner(x, y, size) {\n  return \"L \".concat(x, \",\").concat(y - size, \"Q \").concat(x, \",\").concat(y, \" \").concat(x - size, \",\").concat(y);\n};\n\nvar rightBottomCorner = function rightBottomCorner(x, y, size) {\n  return \"L \".concat(x - size, \",\").concat(y, \"Q \").concat(x, \",\").concat(y, \" \").concat(x, \",\").concat(y - size);\n};\n\nvar leftTopCorner = function leftTopCorner(x, y, size) {\n  return \"L \".concat(x + size, \",\").concat(y, \"Q \").concat(x, \",\").concat(y, \" \").concat(x, \",\").concat(y + size);\n};\n\nvar topLeftCorner = function topLeftCorner(x, y, size) {\n  return \"L \".concat(x, \",\").concat(y + size, \"Q \").concat(x, \",\").concat(y, \" \").concat(x + size, \",\").concat(y);\n};\n\nvar topRightCorner = function topRightCorner(x, y, size) {\n  return \"L \".concat(x, \",\").concat(y + size, \"Q \").concat(x, \",\").concat(y, \" \").concat(x - size, \",\").concat(y);\n};\n\nvar rightTopCorner = function rightTopCorner(x, y, size) {\n  return \"L \".concat(x - size, \",\").concat(y, \"Q \").concat(x, \",\").concat(y, \" \").concat(x, \",\").concat(y + size);\n};\n\nfunction getSmoothStepPath(_ref) {\n  var sourceX = _ref.sourceX,\n      sourceY = _ref.sourceY,\n      _ref$sourcePosition = _ref.sourcePosition,\n      sourcePosition = _ref$sourcePosition === void 0 ? Position.Bottom : _ref$sourcePosition,\n      targetX = _ref.targetX,\n      targetY = _ref.targetY,\n      _ref$targetPosition = _ref.targetPosition,\n      targetPosition = _ref$targetPosition === void 0 ? Position.Top : _ref$targetPosition,\n      _ref$borderRadius = _ref.borderRadius,\n      borderRadius = _ref$borderRadius === void 0 ? 5 : _ref$borderRadius,\n      centerX = _ref.centerX,\n      centerY = _ref.centerY;\n\n  var _getCenter = getCenter({\n    sourceX: sourceX,\n    sourceY: sourceY,\n    targetX: targetX,\n    targetY: targetY\n  }),\n      _getCenter2 = _slicedToArray(_getCenter, 4),\n      _centerX = _getCenter2[0],\n      _centerY = _getCenter2[1],\n      offsetX = _getCenter2[2],\n      offsetY = _getCenter2[3];\n\n  var cornerWidth = Math.min(borderRadius, Math.abs(targetX - sourceX));\n  var cornerHeight = Math.min(borderRadius, Math.abs(targetY - sourceY));\n  var cornerSize = Math.min(cornerWidth, cornerHeight, offsetX, offsetY);\n  var leftAndRight = [Position.Left, Position.Right];\n  var cX = typeof centerX !== 'undefined' ? centerX : _centerX;\n  var cY = typeof centerY !== 'undefined' ? centerY : _centerY;\n  var firstCornerPath = null;\n  var secondCornerPath = null;\n\n  if (sourceX <= targetX) {\n    firstCornerPath = sourceY <= targetY ? bottomLeftCorner(sourceX, cY, cornerSize) : topLeftCorner(sourceX, cY, cornerSize);\n    secondCornerPath = sourceY <= targetY ? rightTopCorner(targetX, cY, cornerSize) : rightBottomCorner(targetX, cY, cornerSize);\n  } else {\n    firstCornerPath = sourceY < targetY ? bottomRightCorner(sourceX, cY, cornerSize) : topRightCorner(sourceX, cY, cornerSize);\n    secondCornerPath = sourceY < targetY ? leftTopCorner(targetX, cY, cornerSize) : leftBottomCorner(targetX, cY, cornerSize);\n  }\n\n  if (leftAndRight.includes(sourcePosition) && leftAndRight.includes(targetPosition)) {\n    if (sourceX <= targetX) {\n      firstCornerPath = sourceY <= targetY ? rightTopCorner(cX, sourceY, cornerSize) : rightBottomCorner(cX, sourceY, cornerSize);\n      secondCornerPath = sourceY <= targetY ? bottomLeftCorner(cX, targetY, cornerSize) : topLeftCorner(cX, targetY, cornerSize);\n    } else if (sourcePosition === Position.Right && targetPosition === Position.Left || sourcePosition === Position.Left && targetPosition === Position.Right || sourcePosition === Position.Left && targetPosition === Position.Left) {\n      // and sourceX > targetX\n      firstCornerPath = sourceY <= targetY ? leftTopCorner(cX, sourceY, cornerSize) : leftBottomCorner(cX, sourceY, cornerSize);\n      secondCornerPath = sourceY <= targetY ? bottomRightCorner(cX, targetY, cornerSize) : topRightCorner(cX, targetY, cornerSize);\n    }\n  } else if (leftAndRight.includes(sourcePosition) && !leftAndRight.includes(targetPosition)) {\n    if (sourceX <= targetX) {\n      firstCornerPath = sourceY <= targetY ? rightTopCorner(targetX, sourceY, cornerSize) : rightBottomCorner(targetX, sourceY, cornerSize);\n    } else {\n      firstCornerPath = sourceY <= targetY ? leftTopCorner(targetX, sourceY, cornerSize) : leftBottomCorner(targetX, sourceY, cornerSize);\n    }\n\n    secondCornerPath = '';\n  } else if (!leftAndRight.includes(sourcePosition) && leftAndRight.includes(targetPosition)) {\n    if (sourceX <= targetX) {\n      firstCornerPath = sourceY <= targetY ? bottomLeftCorner(sourceX, targetY, cornerSize) : topLeftCorner(sourceX, targetY, cornerSize);\n    } else {\n      firstCornerPath = sourceY <= targetY ? bottomRightCorner(sourceX, targetY, cornerSize) : topRightCorner(sourceX, targetY, cornerSize);\n    }\n\n    secondCornerPath = '';\n  }\n\n  return \"M \".concat(sourceX, \",\").concat(sourceY).concat(firstCornerPath).concat(secondCornerPath, \"L \").concat(targetX, \",\").concat(targetY);\n}\nvar SmoothStepEdge = /*#__PURE__*/memo(function (_ref2) {\n  var sourceX = _ref2.sourceX,\n      sourceY = _ref2.sourceY,\n      targetX = _ref2.targetX,\n      targetY = _ref2.targetY,\n      label = _ref2.label,\n      labelStyle = _ref2.labelStyle,\n      labelShowBg = _ref2.labelShowBg,\n      labelBgStyle = _ref2.labelBgStyle,\n      labelBgPadding = _ref2.labelBgPadding,\n      labelBgBorderRadius = _ref2.labelBgBorderRadius,\n      style = _ref2.style,\n      _ref2$sourcePosition = _ref2.sourcePosition,\n      sourcePosition = _ref2$sourcePosition === void 0 ? Position.Bottom : _ref2$sourcePosition,\n      _ref2$targetPosition = _ref2.targetPosition,\n      targetPosition = _ref2$targetPosition === void 0 ? Position.Top : _ref2$targetPosition,\n      markerEnd = _ref2.markerEnd,\n      markerStart = _ref2.markerStart,\n      _ref2$borderRadius = _ref2.borderRadius,\n      borderRadius = _ref2$borderRadius === void 0 ? 5 : _ref2$borderRadius;\n\n  var _getCenter3 = getCenter({\n    sourceX: sourceX,\n    sourceY: sourceY,\n    targetX: targetX,\n    targetY: targetY,\n    sourcePosition: sourcePosition,\n    targetPosition: targetPosition\n  }),\n      _getCenter4 = _slicedToArray(_getCenter3, 2),\n      centerX = _getCenter4[0],\n      centerY = _getCenter4[1];\n\n  var path = getSmoothStepPath({\n    sourceX: sourceX,\n    sourceY: sourceY,\n    sourcePosition: sourcePosition,\n    targetX: targetX,\n    targetY: targetY,\n    targetPosition: targetPosition,\n    borderRadius: borderRadius\n  });\n  return /*#__PURE__*/React.createElement(BaseEdge, {\n    path: path,\n    centerX: centerX,\n    centerY: centerY,\n    label: label,\n    labelStyle: labelStyle,\n    labelShowBg: labelShowBg,\n    labelBgStyle: labelBgStyle,\n    labelBgPadding: labelBgPadding,\n    labelBgBorderRadius: labelBgBorderRadius,\n    style: style,\n    markerEnd: markerEnd,\n    markerStart: markerStart\n  });\n});\n\nfunction ownKeys$a(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread$a(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys$a(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys$a(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nvar StepEdge = /*#__PURE__*/memo(function (props) {\n  return /*#__PURE__*/React.createElement(SmoothStepEdge, _objectSpread$a(_objectSpread$a({}, props), {}, {\n    borderRadius: 0\n  }));\n});\n\nvar StraightEdge = /*#__PURE__*/memo(function (_ref) {\n  var sourceX = _ref.sourceX,\n      sourceY = _ref.sourceY,\n      targetX = _ref.targetX,\n      targetY = _ref.targetY,\n      label = _ref.label,\n      labelStyle = _ref.labelStyle,\n      labelShowBg = _ref.labelShowBg,\n      labelBgStyle = _ref.labelBgStyle,\n      labelBgPadding = _ref.labelBgPadding,\n      labelBgBorderRadius = _ref.labelBgBorderRadius,\n      style = _ref.style,\n      markerEnd = _ref.markerEnd,\n      markerStart = _ref.markerStart;\n  var yOffset = Math.abs(targetY - sourceY) / 2;\n  var centerY = targetY < sourceY ? targetY + yOffset : targetY - yOffset;\n  var xOffset = Math.abs(targetX - sourceX) / 2;\n  var centerX = targetX < sourceX ? targetX + xOffset : targetX - xOffset;\n  var path = \"M \".concat(sourceX, \",\").concat(sourceY, \"L \").concat(targetX, \",\").concat(targetY);\n  return /*#__PURE__*/React.createElement(BaseEdge, {\n    path: path,\n    centerX: centerX,\n    centerY: centerY,\n    label: label,\n    labelStyle: labelStyle,\n    labelShowBg: labelShowBg,\n    labelBgStyle: labelBgStyle,\n    labelBgPadding: labelBgPadding,\n    labelBgBorderRadius: labelBgBorderRadius,\n    style: style,\n    markerEnd: markerEnd,\n    markerStart: markerStart\n  });\n});\n\nfunction calculateControlOffset(distance, curvature) {\n  if (distance >= 0) {\n    return 0.5 * distance;\n  } else {\n    return curvature * 25 * Math.sqrt(-distance);\n  }\n}\n\nfunction getControlWithCurvature(_ref) {\n  var pos = _ref.pos,\n      x1 = _ref.x1,\n      y1 = _ref.y1,\n      x2 = _ref.x2,\n      y2 = _ref.y2,\n      c = _ref.c;\n  var ctX, ctY;\n\n  switch (pos) {\n    case Position.Left:\n      {\n        ctX = x1 - calculateControlOffset(x1 - x2, c);\n        ctY = y1;\n      }\n      break;\n\n    case Position.Right:\n      {\n        ctX = x1 + calculateControlOffset(x2 - x1, c);\n        ctY = y1;\n      }\n      break;\n\n    case Position.Top:\n      {\n        ctX = x1;\n        ctY = y1 - calculateControlOffset(y1 - y2, c);\n      }\n      break;\n\n    case Position.Bottom:\n      {\n        ctX = x1;\n        ctY = y1 + calculateControlOffset(y2 - y1, c);\n      }\n      break;\n  }\n\n  return [ctX, ctY];\n}\n\nfunction getBezierPath(_ref2) {\n  var sourceX = _ref2.sourceX,\n      sourceY = _ref2.sourceY,\n      _ref2$sourcePosition = _ref2.sourcePosition,\n      sourcePosition = _ref2$sourcePosition === void 0 ? Position.Bottom : _ref2$sourcePosition,\n      targetX = _ref2.targetX,\n      targetY = _ref2.targetY,\n      _ref2$targetPosition = _ref2.targetPosition,\n      targetPosition = _ref2$targetPosition === void 0 ? Position.Top : _ref2$targetPosition,\n      _ref2$curvature = _ref2.curvature,\n      curvature = _ref2$curvature === void 0 ? 0.25 : _ref2$curvature;\n\n  var _getControlWithCurvat = getControlWithCurvature({\n    pos: sourcePosition,\n    x1: sourceX,\n    y1: sourceY,\n    x2: targetX,\n    y2: targetY,\n    c: curvature\n  }),\n      _getControlWithCurvat2 = _slicedToArray(_getControlWithCurvat, 2),\n      sourceControlX = _getControlWithCurvat2[0],\n      sourceControlY = _getControlWithCurvat2[1];\n\n  var _getControlWithCurvat3 = getControlWithCurvature({\n    pos: targetPosition,\n    x1: targetX,\n    y1: targetY,\n    x2: sourceX,\n    y2: sourceY,\n    c: curvature\n  }),\n      _getControlWithCurvat4 = _slicedToArray(_getControlWithCurvat3, 2),\n      targetControlX = _getControlWithCurvat4[0],\n      targetControlY = _getControlWithCurvat4[1];\n\n  return \"M\".concat(sourceX, \",\").concat(sourceY, \" C\").concat(sourceControlX, \",\").concat(sourceControlY, \" \").concat(targetControlX, \",\").concat(targetControlY, \" \").concat(targetX, \",\").concat(targetY);\n} // @TODO: this function will recalculate the control points\n// one option is to let getXXXPath() return center points\n// but will introduce breaking changes\n// the getCenter() of other types of edges might need to change, too\n\nfunction getBezierCenter(_ref3) {\n  var sourceX = _ref3.sourceX,\n      sourceY = _ref3.sourceY,\n      _ref3$sourcePosition = _ref3.sourcePosition,\n      sourcePosition = _ref3$sourcePosition === void 0 ? Position.Bottom : _ref3$sourcePosition,\n      targetX = _ref3.targetX,\n      targetY = _ref3.targetY,\n      _ref3$targetPosition = _ref3.targetPosition,\n      targetPosition = _ref3$targetPosition === void 0 ? Position.Top : _ref3$targetPosition,\n      _ref3$curvature = _ref3.curvature,\n      curvature = _ref3$curvature === void 0 ? 0.25 : _ref3$curvature;\n\n  var _getControlWithCurvat5 = getControlWithCurvature({\n    pos: sourcePosition,\n    x1: sourceX,\n    y1: sourceY,\n    x2: targetX,\n    y2: targetY,\n    c: curvature\n  }),\n      _getControlWithCurvat6 = _slicedToArray(_getControlWithCurvat5, 2),\n      sourceControlX = _getControlWithCurvat6[0],\n      sourceControlY = _getControlWithCurvat6[1];\n\n  var _getControlWithCurvat7 = getControlWithCurvature({\n    pos: targetPosition,\n    x1: targetX,\n    y1: targetY,\n    x2: sourceX,\n    y2: sourceY,\n    c: curvature\n  }),\n      _getControlWithCurvat8 = _slicedToArray(_getControlWithCurvat7, 2),\n      targetControlX = _getControlWithCurvat8[0],\n      targetControlY = _getControlWithCurvat8[1]; // cubic bezier t=0.5 mid point, not the actual mid point, but easy to calculate\n  // https://stackoverflow.com/questions/67516101/how-to-find-distance-mid-point-of-bezier-curve\n\n\n  var centerX = sourceX * 0.125 + sourceControlX * 0.375 + targetControlX * 0.375 + targetX * 0.125;\n  var centerY = sourceY * 0.125 + sourceControlY * 0.375 + targetControlY * 0.375 + targetY * 0.125;\n  var xOffset = Math.abs(centerX - sourceX);\n  var yOffset = Math.abs(centerY - sourceY);\n  return [centerX, centerY, xOffset, yOffset];\n}\nvar BezierEdge = /*#__PURE__*/memo(function (_ref4) {\n  var sourceX = _ref4.sourceX,\n      sourceY = _ref4.sourceY,\n      targetX = _ref4.targetX,\n      targetY = _ref4.targetY,\n      _ref4$sourcePosition = _ref4.sourcePosition,\n      sourcePosition = _ref4$sourcePosition === void 0 ? Position.Bottom : _ref4$sourcePosition,\n      _ref4$targetPosition = _ref4.targetPosition,\n      targetPosition = _ref4$targetPosition === void 0 ? Position.Top : _ref4$targetPosition,\n      label = _ref4.label,\n      labelStyle = _ref4.labelStyle,\n      labelShowBg = _ref4.labelShowBg,\n      labelBgStyle = _ref4.labelBgStyle,\n      labelBgPadding = _ref4.labelBgPadding,\n      labelBgBorderRadius = _ref4.labelBgBorderRadius,\n      style = _ref4.style,\n      markerEnd = _ref4.markerEnd,\n      markerStart = _ref4.markerStart,\n      curvature = _ref4.curvature;\n  var params = {\n    sourceX: sourceX,\n    sourceY: sourceY,\n    sourcePosition: sourcePosition,\n    targetX: targetX,\n    targetY: targetY,\n    targetPosition: targetPosition,\n    curvature: curvature\n  };\n  var path = getBezierPath(params);\n\n  var _getBezierCenter = getBezierCenter(params),\n      _getBezierCenter2 = _slicedToArray(_getBezierCenter, 2),\n      centerX = _getBezierCenter2[0],\n      centerY = _getBezierCenter2[1];\n\n  return /*#__PURE__*/React.createElement(BaseEdge, {\n    path: path,\n    centerX: centerX,\n    centerY: centerY,\n    label: label,\n    labelStyle: labelStyle,\n    labelShowBg: labelShowBg,\n    labelBgStyle: labelBgStyle,\n    labelBgPadding: labelBgPadding,\n    labelBgBorderRadius: labelBgBorderRadius,\n    style: style,\n    markerEnd: markerEnd,\n    markerStart: markerStart\n  });\n});\n\nvar NodeIdContext = /*#__PURE__*/createContext(null);\nvar Provider = NodeIdContext.Provider;\nNodeIdContext.Consumer;\n\nfunction checkElementBelowIsValid(event, connectionMode, isTarget, nodeId, handleId, isValidConnection, doc) {\n  var elementBelow = doc.elementFromPoint(event.clientX, event.clientY);\n  var elementBelowIsTarget = (elementBelow === null || elementBelow === void 0 ? void 0 : elementBelow.classList.contains('target')) || false;\n  var elementBelowIsSource = (elementBelow === null || elementBelow === void 0 ? void 0 : elementBelow.classList.contains('source')) || false;\n  var result = {\n    elementBelow: elementBelow,\n    isValid: false,\n    connection: {\n      source: null,\n      target: null,\n      sourceHandle: null,\n      targetHandle: null\n    },\n    isHoveringHandle: false\n  };\n\n  if (elementBelow && (elementBelowIsTarget || elementBelowIsSource)) {\n    result.isHoveringHandle = true;\n    var elementBelowNodeId = elementBelow.getAttribute('data-nodeid');\n    var elementBelowHandleId = elementBelow.getAttribute('data-handleid');\n    var connection = isTarget ? {\n      source: elementBelowNodeId,\n      sourceHandle: elementBelowHandleId,\n      target: nodeId,\n      targetHandle: handleId\n    } : {\n      source: nodeId,\n      sourceHandle: handleId,\n      target: elementBelowNodeId,\n      targetHandle: elementBelowHandleId\n    };\n    result.connection = connection; // in strict mode we don't allow target to target or source to source connections\n\n    var isValid = connectionMode === ConnectionMode.Strict ? isTarget && elementBelowIsSource || !isTarget && elementBelowIsTarget : true;\n\n    if (isValid) {\n      result.isValid = isValidConnection(connection);\n    }\n  }\n\n  return result;\n}\n\nfunction resetRecentHandle(hoveredHandle) {\n  hoveredHandle === null || hoveredHandle === void 0 ? void 0 : hoveredHandle.classList.remove('react-flow__handle-valid');\n  hoveredHandle === null || hoveredHandle === void 0 ? void 0 : hoveredHandle.classList.remove('react-flow__handle-connecting');\n}\n\nfunction handleMouseDown(_ref) {\n  var event = _ref.event,\n      handleId = _ref.handleId,\n      nodeId = _ref.nodeId,\n      onConnect = _ref.onConnect,\n      isTarget = _ref.isTarget,\n      getState = _ref.getState,\n      setState = _ref.setState,\n      isValidConnection = _ref.isValidConnection,\n      elementEdgeUpdaterType = _ref.elementEdgeUpdaterType,\n      onEdgeUpdateEnd = _ref.onEdgeUpdateEnd;\n  var reactFlowNode = event.target.closest('.react-flow'); // when react-flow is used inside a shadow root we can't use document\n\n  var doc = getHostForElement(event.target);\n\n  if (!doc) {\n    return;\n  }\n\n  var elementBelow = doc.elementFromPoint(event.clientX, event.clientY);\n  var elementBelowIsTarget = elementBelow === null || elementBelow === void 0 ? void 0 : elementBelow.classList.contains('target');\n  var elementBelowIsSource = elementBelow === null || elementBelow === void 0 ? void 0 : elementBelow.classList.contains('source');\n\n  if (!reactFlowNode || !elementBelowIsTarget && !elementBelowIsSource && !elementEdgeUpdaterType) {\n    return;\n  }\n\n  var _getState = getState(),\n      onConnectStart = _getState.onConnectStart,\n      connectionMode = _getState.connectionMode;\n\n  var handleType = elementEdgeUpdaterType ? elementEdgeUpdaterType : elementBelowIsTarget ? 'target' : 'source';\n  var containerBounds = reactFlowNode.getBoundingClientRect();\n  var recentHoveredHandle;\n  setState({\n    connectionPosition: {\n      x: event.clientX - containerBounds.left,\n      y: event.clientY - containerBounds.top\n    },\n    connectionNodeId: nodeId,\n    connectionHandleId: handleId,\n    connectionHandleType: handleType\n  });\n  onConnectStart === null || onConnectStart === void 0 ? void 0 : onConnectStart(event, {\n    nodeId: nodeId,\n    handleId: handleId,\n    handleType: handleType\n  });\n\n  function onMouseMove(event) {\n    setState({\n      connectionPosition: {\n        x: event.clientX - containerBounds.left,\n        y: event.clientY - containerBounds.top\n      }\n    });\n\n    var _checkElementBelowIsV = checkElementBelowIsValid(event, connectionMode, isTarget, nodeId, handleId, isValidConnection, doc),\n        connection = _checkElementBelowIsV.connection,\n        elementBelow = _checkElementBelowIsV.elementBelow,\n        isValid = _checkElementBelowIsV.isValid,\n        isHoveringHandle = _checkElementBelowIsV.isHoveringHandle;\n\n    if (!isHoveringHandle) {\n      return resetRecentHandle(recentHoveredHandle);\n    }\n\n    if (connection.source !== connection.target && elementBelow) {\n      resetRecentHandle(recentHoveredHandle);\n      recentHoveredHandle = elementBelow;\n      elementBelow.classList.add('react-flow__handle-connecting');\n      elementBelow.classList.toggle('react-flow__handle-valid', isValid);\n    }\n  }\n\n  function onMouseUp(event) {\n    var _getState2 = getState(),\n        onConnectStop = _getState2.onConnectStop,\n        onConnectEnd = _getState2.onConnectEnd;\n\n    var _checkElementBelowIsV2 = checkElementBelowIsValid(event, connectionMode, isTarget, nodeId, handleId, isValidConnection, doc),\n        connection = _checkElementBelowIsV2.connection,\n        isValid = _checkElementBelowIsV2.isValid;\n\n    onConnectStop === null || onConnectStop === void 0 ? void 0 : onConnectStop(event);\n\n    if (isValid) {\n      onConnect === null || onConnect === void 0 ? void 0 : onConnect(connection);\n    }\n\n    onConnectEnd === null || onConnectEnd === void 0 ? void 0 : onConnectEnd(event);\n\n    if (elementEdgeUpdaterType && onEdgeUpdateEnd) {\n      onEdgeUpdateEnd(event);\n    }\n\n    resetRecentHandle(recentHoveredHandle);\n    setState({\n      connectionNodeId: null,\n      connectionHandleId: null,\n      connectionHandleType: null\n    });\n    doc.removeEventListener('mousemove', onMouseMove);\n    doc.removeEventListener('mouseup', onMouseUp);\n  }\n\n  doc.addEventListener('mousemove', onMouseMove);\n  doc.addEventListener('mouseup', onMouseUp);\n}\n\nvar _excluded$1 = [\"type\", \"position\", \"isValidConnection\", \"isConnectable\", \"id\", \"onConnect\", \"children\", \"className\", \"onMouseDown\"];\n\nfunction ownKeys$9(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread$9(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys$9(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys$9(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nvar alwaysValid = function alwaysValid() {\n  return true;\n};\n\nvar selector$a = function selector(s) {\n  return {\n    connectionStartHandle: s.connectionStartHandle,\n    connectOnClick: s.connectOnClick\n  };\n};\n\nvar Handle = /*#__PURE__*/forwardRef(function (_ref, ref) {\n  var _ref$type = _ref.type,\n      type = _ref$type === void 0 ? 'source' : _ref$type,\n      _ref$position = _ref.position,\n      position = _ref$position === void 0 ? Position.Top : _ref$position,\n      _ref$isValidConnectio = _ref.isValidConnection,\n      isValidConnection = _ref$isValidConnectio === void 0 ? alwaysValid : _ref$isValidConnectio,\n      _ref$isConnectable = _ref.isConnectable,\n      isConnectable = _ref$isConnectable === void 0 ? true : _ref$isConnectable,\n      id = _ref.id,\n      onConnect = _ref.onConnect,\n      children = _ref.children,\n      className = _ref.className,\n      onMouseDown = _ref.onMouseDown,\n      rest = _objectWithoutProperties(_ref, _excluded$1);\n\n  var store = useStoreApi();\n  var nodeId = useContext(NodeIdContext);\n\n  var _useStore = useStore(selector$a, shallow),\n      connectionStartHandle = _useStore.connectionStartHandle,\n      connectOnClick = _useStore.connectOnClick;\n\n  var handleId = id || null;\n  var isTarget = type === 'target';\n\n  var onConnectExtended = function onConnectExtended(params) {\n    var _store$getState = store.getState(),\n        defaultEdgeOptions = _store$getState.defaultEdgeOptions,\n        onConnectAction = _store$getState.onConnect,\n        hasDefaultEdges = _store$getState.hasDefaultEdges;\n\n    var edgeParams = _objectSpread$9(_objectSpread$9({}, defaultEdgeOptions), params);\n\n    if (hasDefaultEdges) {\n      var _store$getState2 = store.getState(),\n          edges = _store$getState2.edges;\n\n      store.setState({\n        edges: addEdge(edgeParams, edges)\n      });\n    }\n\n    onConnectAction === null || onConnectAction === void 0 ? void 0 : onConnectAction(edgeParams);\n    onConnect === null || onConnect === void 0 ? void 0 : onConnect(edgeParams);\n  };\n\n  var onMouseDownHandler = function onMouseDownHandler(event) {\n    if (event.button === 0) {\n      handleMouseDown({\n        event: event,\n        handleId: handleId,\n        nodeId: nodeId,\n        onConnect: onConnectExtended,\n        isTarget: isTarget,\n        getState: store.getState,\n        setState: store.setState,\n        isValidConnection: isValidConnection\n      });\n    }\n\n    onMouseDown === null || onMouseDown === void 0 ? void 0 : onMouseDown(event);\n  };\n\n  var onClick = function onClick(event) {\n    var _store$getState3 = store.getState(),\n        onClickConnectStart = _store$getState3.onClickConnectStart,\n        onClickConnectStop = _store$getState3.onClickConnectStop,\n        onClickConnectEnd = _store$getState3.onClickConnectEnd,\n        connectionMode = _store$getState3.connectionMode;\n\n    if (!connectionStartHandle) {\n      onClickConnectStart === null || onClickConnectStart === void 0 ? void 0 : onClickConnectStart(event, {\n        nodeId: nodeId,\n        handleId: handleId,\n        handleType: type\n      });\n      store.setState({\n        connectionStartHandle: {\n          nodeId: nodeId,\n          type: type,\n          handleId: handleId\n        }\n      });\n      return;\n    }\n\n    var doc = getHostForElement(event.target);\n\n    var _checkElementBelowIsV = checkElementBelowIsValid(event, connectionMode, connectionStartHandle.type === 'target', connectionStartHandle.nodeId, connectionStartHandle.handleId || null, isValidConnection, doc),\n        connection = _checkElementBelowIsV.connection,\n        isValid = _checkElementBelowIsV.isValid;\n\n    onClickConnectStop === null || onClickConnectStop === void 0 ? void 0 : onClickConnectStop(event);\n\n    if (isValid) {\n      onConnectExtended(connection);\n    }\n\n    onClickConnectEnd === null || onClickConnectEnd === void 0 ? void 0 : onClickConnectEnd(event);\n    store.setState({\n      connectionStartHandle: null\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", _objectSpread$9({\n    \"data-handleid\": handleId,\n    \"data-nodeid\": nodeId,\n    \"data-handlepos\": position,\n    className: cc(['react-flow__handle', \"react-flow__handle-\".concat(position), 'nodrag', className, {\n      source: !isTarget,\n      target: isTarget,\n      connectable: isConnectable,\n      connecting: (connectionStartHandle === null || connectionStartHandle === void 0 ? void 0 : connectionStartHandle.nodeId) === nodeId && (connectionStartHandle === null || connectionStartHandle === void 0 ? void 0 : connectionStartHandle.handleId) === handleId && (connectionStartHandle === null || connectionStartHandle === void 0 ? void 0 : connectionStartHandle.type) === type\n    }]),\n    onMouseDown: onMouseDownHandler,\n    onClick: connectOnClick ? onClick : undefined,\n    ref: ref\n  }, rest), children);\n});\nHandle.displayName = 'Handle';\nvar Handle$1 = /*#__PURE__*/memo(Handle);\n\nvar DefaultNode = function DefaultNode(_ref) {\n  var data = _ref.data,\n      isConnectable = _ref.isConnectable,\n      _ref$targetPosition = _ref.targetPosition,\n      targetPosition = _ref$targetPosition === void 0 ? Position.Top : _ref$targetPosition,\n      _ref$sourcePosition = _ref.sourcePosition,\n      sourcePosition = _ref$sourcePosition === void 0 ? Position.Bottom : _ref$sourcePosition;\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Handle$1, {\n    type: \"target\",\n    position: targetPosition,\n    isConnectable: isConnectable\n  }), data === null || data === void 0 ? void 0 : data.label, /*#__PURE__*/React.createElement(Handle$1, {\n    type: \"source\",\n    position: sourcePosition,\n    isConnectable: isConnectable\n  }));\n};\n\nDefaultNode.displayName = 'DefaultNode';\nvar DefaultNode$1 = /*#__PURE__*/memo(DefaultNode);\n\nvar InputNode = function InputNode(_ref) {\n  var data = _ref.data,\n      isConnectable = _ref.isConnectable,\n      _ref$sourcePosition = _ref.sourcePosition,\n      sourcePosition = _ref$sourcePosition === void 0 ? Position.Bottom : _ref$sourcePosition;\n  return /*#__PURE__*/React.createElement(React.Fragment, null, data === null || data === void 0 ? void 0 : data.label, /*#__PURE__*/React.createElement(Handle$1, {\n    type: \"source\",\n    position: sourcePosition,\n    isConnectable: isConnectable\n  }));\n};\n\nInputNode.displayName = 'InputNode';\nvar InputNode$1 = /*#__PURE__*/memo(InputNode);\n\nvar OutputNode = function OutputNode(_ref) {\n  var data = _ref.data,\n      isConnectable = _ref.isConnectable,\n      _ref$targetPosition = _ref.targetPosition,\n      targetPosition = _ref$targetPosition === void 0 ? Position.Top : _ref$targetPosition;\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Handle$1, {\n    type: \"target\",\n    position: targetPosition,\n    isConnectable: isConnectable\n  }), data === null || data === void 0 ? void 0 : data.label);\n};\n\nOutputNode.displayName = 'OutputNode';\nvar OutputNode$1 = /*#__PURE__*/memo(OutputNode);\n\nvar selector$9 = function selector(s) {\n  return {\n    selectedNodes: Array.from(s.nodeInternals.values()).filter(function (n) {\n      return n.selected;\n    }),\n    selectedEdges: s.edges.filter(function (e) {\n      return e.selected;\n    })\n  };\n};\n\nvar areEqual = function areEqual(objA, objB) {\n  var selectedNodeIdsA = objA.selectedNodes.map(function (n) {\n    return n.id;\n  });\n  var selectedNodeIdsB = objB.selectedNodes.map(function (n) {\n    return n.id;\n  });\n  var selectedEdgeIdsA = objA.selectedEdges.map(function (e) {\n    return e.id;\n  });\n  var selectedEdgeIdsB = objB.selectedEdges.map(function (e) {\n    return e.id;\n  });\n  return shallow(selectedNodeIdsA, selectedNodeIdsB) && shallow(selectedEdgeIdsA, selectedEdgeIdsB);\n}; // This is just a helper component for calling the onSelectionChange listener.\n// @TODO: Now that we have the onNodesChange and on EdgesChange listeners, do we still need this component?\n\n\nfunction SelectionListener(_ref) {\n  var onSelectionChange = _ref.onSelectionChange;\n\n  var _useStore = useStore(selector$9, areEqual),\n      selectedNodes = _useStore.selectedNodes,\n      selectedEdges = _useStore.selectedEdges;\n\n  useEffect(function () {\n    onSelectionChange({\n      nodes: selectedNodes,\n      edges: selectedEdges\n    });\n  }, [selectedNodes, selectedEdges]);\n  return null;\n}\n\nvar SelectionListener$1 = /*#__PURE__*/memo(SelectionListener);\n\nvar selector$8 = function selector(s) {\n  return {\n    setNodes: s.setNodes,\n    setEdges: s.setEdges,\n    setDefaultNodesAndEdges: s.setDefaultNodesAndEdges,\n    setMinZoom: s.setMinZoom,\n    setMaxZoom: s.setMaxZoom,\n    setTranslateExtent: s.setTranslateExtent,\n    setNodeExtent: s.setNodeExtent,\n    reset: s.reset\n  };\n};\n\nfunction useStoreUpdater(value, setStoreState) {\n  useEffect(function () {\n    if (typeof value !== 'undefined') {\n      setStoreState(value);\n    }\n  }, [value]);\n}\n\nfunction useDirectStoreUpdater(key, value, setState) {\n  useEffect(function () {\n    if (typeof value !== 'undefined') {\n      // @ts-ignore\n      setState(_defineProperty({}, key, value));\n    }\n  }, [value]);\n}\n\nvar StoreUpdater = function StoreUpdater(_ref) {\n  var nodes = _ref.nodes,\n      edges = _ref.edges,\n      defaultNodes = _ref.defaultNodes,\n      defaultEdges = _ref.defaultEdges,\n      onConnect = _ref.onConnect,\n      onConnectStart = _ref.onConnectStart,\n      onConnectStop = _ref.onConnectStop,\n      onConnectEnd = _ref.onConnectEnd,\n      onClickConnectStart = _ref.onClickConnectStart,\n      onClickConnectStop = _ref.onClickConnectStop,\n      onClickConnectEnd = _ref.onClickConnectEnd,\n      nodesDraggable = _ref.nodesDraggable,\n      nodesConnectable = _ref.nodesConnectable,\n      minZoom = _ref.minZoom,\n      maxZoom = _ref.maxZoom,\n      nodeExtent = _ref.nodeExtent,\n      onNodesChange = _ref.onNodesChange,\n      onEdgesChange = _ref.onEdgesChange,\n      elementsSelectable = _ref.elementsSelectable,\n      connectionMode = _ref.connectionMode,\n      snapGrid = _ref.snapGrid,\n      snapToGrid = _ref.snapToGrid,\n      translateExtent = _ref.translateExtent,\n      connectOnClick = _ref.connectOnClick,\n      defaultEdgeOptions = _ref.defaultEdgeOptions,\n      fitView = _ref.fitView,\n      fitViewOptions = _ref.fitViewOptions,\n      onNodesDelete = _ref.onNodesDelete,\n      onEdgesDelete = _ref.onEdgesDelete,\n      onNodeDrag = _ref.onNodeDrag,\n      onNodeDragStart = _ref.onNodeDragStart,\n      onNodeDragStop = _ref.onNodeDragStop,\n      onSelectionDrag = _ref.onSelectionDrag,\n      onSelectionDragStart = _ref.onSelectionDragStart,\n      onSelectionDragStop = _ref.onSelectionDragStop;\n\n  var _useStore = useStore(selector$8, shallow),\n      setNodes = _useStore.setNodes,\n      setEdges = _useStore.setEdges,\n      setDefaultNodesAndEdges = _useStore.setDefaultNodesAndEdges,\n      setMinZoom = _useStore.setMinZoom,\n      setMaxZoom = _useStore.setMaxZoom,\n      setTranslateExtent = _useStore.setTranslateExtent,\n      setNodeExtent = _useStore.setNodeExtent,\n      reset = _useStore.reset;\n\n  var store = useStoreApi();\n  useEffect(function () {\n    setDefaultNodesAndEdges(defaultNodes, defaultEdges);\n    return function () {\n      reset();\n    };\n  }, []);\n  useDirectStoreUpdater('defaultEdgeOptions', defaultEdgeOptions, store.setState);\n  useDirectStoreUpdater('connectionMode', connectionMode, store.setState);\n  useDirectStoreUpdater('onConnect', onConnect, store.setState);\n  useDirectStoreUpdater('onConnectStart', onConnectStart, store.setState);\n  useDirectStoreUpdater('onConnectStop', onConnectStop, store.setState);\n  useDirectStoreUpdater('onConnectEnd', onConnectEnd, store.setState);\n  useDirectStoreUpdater('onClickConnectStart', onClickConnectStart, store.setState);\n  useDirectStoreUpdater('onClickConnectStop', onClickConnectStop, store.setState);\n  useDirectStoreUpdater('onClickConnectEnd', onClickConnectEnd, store.setState);\n  useDirectStoreUpdater('nodesDraggable', nodesDraggable, store.setState);\n  useDirectStoreUpdater('nodesConnectable', nodesConnectable, store.setState);\n  useDirectStoreUpdater('elementsSelectable', elementsSelectable, store.setState);\n  useDirectStoreUpdater('snapToGrid', snapToGrid, store.setState);\n  useDirectStoreUpdater('snapGrid', snapGrid, store.setState);\n  useDirectStoreUpdater('onNodesChange', onNodesChange, store.setState);\n  useDirectStoreUpdater('onEdgesChange', onEdgesChange, store.setState);\n  useDirectStoreUpdater('connectOnClick', connectOnClick, store.setState);\n  useDirectStoreUpdater('fitViewOnInit', fitView, store.setState);\n  useDirectStoreUpdater('fitViewOnInitOptions', fitViewOptions, store.setState);\n  useDirectStoreUpdater('onNodesDelete', onNodesDelete, store.setState);\n  useDirectStoreUpdater('onEdgesDelete', onEdgesDelete, store.setState);\n  useDirectStoreUpdater('onNodeDrag', onNodeDrag, store.setState);\n  useDirectStoreUpdater('onNodeDragStart', onNodeDragStart, store.setState);\n  useDirectStoreUpdater('onNodeDragStop', onNodeDragStop, store.setState);\n  useDirectStoreUpdater('onSelectionDrag', onSelectionDrag, store.setState);\n  useDirectStoreUpdater('onSelectionDragStart', onSelectionDragStart, store.setState);\n  useDirectStoreUpdater('onSelectionDragStop', onSelectionDragStop, store.setState);\n  useStoreUpdater(nodes, setNodes);\n  useStoreUpdater(edges, setEdges);\n  useStoreUpdater(defaultNodes, setNodes);\n  useStoreUpdater(defaultEdges, setEdges);\n  useStoreUpdater(minZoom, setMinZoom);\n  useStoreUpdater(maxZoom, setMaxZoom);\n  useStoreUpdater(translateExtent, setTranslateExtent);\n  useStoreUpdater(nodeExtent, setNodeExtent);\n  return null;\n};\n\nvar css_248z$1 = \".react-flow{height:100%;overflow:hidden;position:relative;width:100%}.react-flow__container{height:100%;left:0;position:absolute;top:0;width:100%}.react-flow__pane{z-index:1}.react-flow__viewport{pointer-events:none;transform-origin:0 0;z-index:2}.react-flow__renderer{z-index:4}.react-flow__selectionpane{z-index:5}.react-flow .react-flow__edges{overflow:visible;pointer-events:none}.react-flow .react-flow__connectionline{z-index:1001}.react-flow__edge{pointer-events:visibleStroke}.react-flow__edge.inactive{pointer-events:none}@-webkit-keyframes dashdraw{0%{stroke-dashoffset:10}}@keyframes dashdraw{0%{stroke-dashoffset:10}}.react-flow__edge-path{fill:none}.react-flow__edge-textwrapper{pointer-events:all}.react-flow__edge-text{pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.react-flow__connection{pointer-events:none}.react-flow__connection .animated{stroke-dasharray:5;-webkit-animation:dashdraw .5s linear infinite;animation:dashdraw .5s linear infinite}.react-flow__connection-path{fill:none}.react-flow__nodes{pointer-events:none;transform-origin:0 0}.react-flow__node{box-sizing:border-box;pointer-events:all;position:absolute;transform-origin:0 0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.react-flow__nodesselection{pointer-events:none;transform-origin:left top;z-index:3}.react-flow__nodesselection-rect{cursor:-webkit-grab;cursor:grab;pointer-events:all;position:absolute}.react-flow__handle{pointer-events:none;position:absolute}.react-flow__handle.connectable{pointer-events:all}.react-flow__handle-bottom{bottom:-4px;left:50%;top:auto;transform:translate(-50%)}.react-flow__handle-top{left:50%;top:-4px;transform:translate(-50%)}.react-flow__handle-left{left:-4px;top:50%;transform:translateY(-50%)}.react-flow__handle-right{right:-4px;top:50%;transform:translateY(-50%)}.react-flow__edgeupdater{cursor:move;pointer-events:all}.react-flow__controls{bottom:20px;left:15px;position:absolute;z-index:5}.react-flow__controls-button{border:none;height:24px;width:24px}.react-flow__controls-button svg{width:100%}.react-flow__minimap{bottom:20px;position:absolute;right:15px;z-index:5}.react-flow__attribution{background:hsla(0,0%,100%,.5);color:#999;font-size:10px;padding:2px 3px;position:absolute;z-index:1000}.react-flow__attribution a{color:#555;text-decoration:none}.react-flow__attribution.top{top:0}.react-flow__attribution.bottom{bottom:0}.react-flow__attribution.left{left:0}.react-flow__attribution.right{right:0}.react-flow__attribution.center{left:50%;transform:translateX(-50%)}\";\nvar css = css_248z$1;\n\nvar css_248z = \".react-flow__edge.selected .react-flow__edge-path{stroke:#555}.react-flow__edge.animated path{stroke-dasharray:5;-webkit-animation:dashdraw .5s linear infinite;animation:dashdraw .5s linear infinite}.react-flow__edge.updating .react-flow__edge-path{stroke:#777}.react-flow__edge-path{stroke:#b1b1b7;stroke-width:1}.react-flow__edge-text{font-size:10px}.react-flow__edge-textbg{fill:#fff}.react-flow__connection-path{stroke:#b1b1b7;stroke-width:1}.react-flow__node{cursor:-webkit-grab;cursor:grab}.react-flow__node-default,.react-flow__node-group,.react-flow__node-input,.react-flow__node-output{background:#fff;border:1px solid #1a192b;border-radius:3px;color:#222;font-size:12px;padding:10px;text-align:center;width:150px}.react-flow__node-default.selected,.react-flow__node-group.selected,.react-flow__node-input.selected,.react-flow__node-output.selected{box-shadow:0 0 0 .5px #1a192b}.react-flow__node-default .react-flow__handle,.react-flow__node-group .react-flow__handle,.react-flow__node-input .react-flow__handle,.react-flow__node-output .react-flow__handle{background:#1a192b}.react-flow__node-default.selectable:hover,.react-flow__node-group.selectable:hover,.react-flow__node-input.selectable:hover,.react-flow__node-output.selectable:hover{box-shadow:0 1px 4px 1px rgba(0,0,0,.08)}.react-flow__node-default.selectable.selected,.react-flow__node-group.selectable.selected,.react-flow__node-input.selectable.selected,.react-flow__node-output.selectable.selected{box-shadow:0 0 0 .5px #1a192b}.react-flow__node-group{background:hsla(0,0%,94%,.25);border-color:#1a192b}.react-flow__nodesselection-rect,.react-flow__selection{background:rgba(0,89,220,.08);border:1px dotted rgba(0,89,220,.8)}.react-flow__handle{background:#555;border:1px solid #fff;border-radius:100%;height:6px;width:6px}.react-flow__handle.connectable{cursor:crosshair}.react-flow__minimap{background-color:#fff}.react-flow__controls{box-shadow:0 0 2px 1px rgba(0,0,0,.08)}.react-flow__controls-button{align-items:center;background:#fefefe;border-bottom:1px solid #eee;box-sizing:content-box;cursor:pointer;display:flex;height:16px;justify-content:center;padding:5px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:16px}.react-flow__controls-button svg{max-height:12px;max-width:12px}.react-flow__controls-button:hover{background:#f4f4f4}\";\nvar theme = css_248z;\n\nvar shiftX = function shiftX(x, shift, position) {\n  if (position === Position.Left) return x - shift;\n  if (position === Position.Right) return x + shift;\n  return x;\n};\n\nvar shiftY = function shiftY(y, shift, position) {\n  if (position === Position.Top) return y - shift;\n  if (position === Position.Bottom) return y + shift;\n  return y;\n};\n\nvar EdgeAnchor = function EdgeAnchor(_ref) {\n  var className = _ref.className,\n      position = _ref.position,\n      centerX = _ref.centerX,\n      centerY = _ref.centerY,\n      _ref$radius = _ref.radius,\n      radius = _ref$radius === void 0 ? 10 : _ref$radius;\n  return /*#__PURE__*/React.createElement(\"circle\", {\n    className: cc(['react-flow__edgeupdater', className]),\n    cx: shiftX(centerX, radius, position),\n    cy: shiftY(centerY, radius, position),\n    r: radius,\n    stroke: \"transparent\",\n    fill: \"transparent\"\n  });\n};\n\nvar wrapEdge = (function (EdgeComponent) {\n  var EdgeWrapper = function EdgeWrapper(_ref) {\n    var id = _ref.id,\n        className = _ref.className,\n        type = _ref.type,\n        data = _ref.data,\n        onClick = _ref.onClick,\n        onEdgeDoubleClick = _ref.onEdgeDoubleClick,\n        selected = _ref.selected,\n        animated = _ref.animated,\n        label = _ref.label,\n        labelStyle = _ref.labelStyle,\n        labelShowBg = _ref.labelShowBg,\n        labelBgStyle = _ref.labelBgStyle,\n        labelBgPadding = _ref.labelBgPadding,\n        labelBgBorderRadius = _ref.labelBgBorderRadius,\n        style = _ref.style,\n        source = _ref.source,\n        target = _ref.target,\n        sourceX = _ref.sourceX,\n        sourceY = _ref.sourceY,\n        targetX = _ref.targetX,\n        targetY = _ref.targetY,\n        sourcePosition = _ref.sourcePosition,\n        targetPosition = _ref.targetPosition,\n        elementsSelectable = _ref.elementsSelectable,\n        hidden = _ref.hidden,\n        sourceHandleId = _ref.sourceHandleId,\n        targetHandleId = _ref.targetHandleId,\n        onContextMenu = _ref.onContextMenu,\n        onMouseEnter = _ref.onMouseEnter,\n        onMouseMove = _ref.onMouseMove,\n        onMouseLeave = _ref.onMouseLeave,\n        edgeUpdaterRadius = _ref.edgeUpdaterRadius,\n        onEdgeUpdate = _ref.onEdgeUpdate,\n        onEdgeUpdateStart = _ref.onEdgeUpdateStart,\n        onEdgeUpdateEnd = _ref.onEdgeUpdateEnd,\n        markerEnd = _ref.markerEnd,\n        markerStart = _ref.markerStart,\n        rfId = _ref.rfId;\n\n    var _useState = useState(false),\n        _useState2 = _slicedToArray(_useState, 2),\n        updating = _useState2[0],\n        setUpdating = _useState2[1];\n\n    var store = useStoreApi();\n\n    var onEdgeClick = function onEdgeClick(event) {\n      var _store$getState = store.getState(),\n          edges = _store$getState.edges,\n          addSelectedEdges = _store$getState.addSelectedEdges;\n\n      var edge = edges.find(function (e) {\n        return e.id === id;\n      });\n\n      if (elementsSelectable) {\n        store.setState({\n          nodesSelectionActive: false\n        });\n        addSelectedEdges([id]);\n      }\n\n      onClick === null || onClick === void 0 ? void 0 : onClick(event, edge);\n    };\n\n    var onEdgeDoubleClickHandler = getMouseHandler(id, store.getState, onEdgeDoubleClick);\n    var onEdgeContextMenu = getMouseHandler(id, store.getState, onContextMenu);\n    var onEdgeMouseEnter = getMouseHandler(id, store.getState, onMouseEnter);\n    var onEdgeMouseMove = getMouseHandler(id, store.getState, onMouseMove);\n    var onEdgeMouseLeave = getMouseHandler(id, store.getState, onMouseLeave);\n\n    var handleEdgeUpdater = function handleEdgeUpdater(event, isSourceHandle) {\n      var nodeId = isSourceHandle ? target : source;\n      var handleId = (isSourceHandle ? targetHandleId : sourceHandleId) || null;\n      var handleType = isSourceHandle ? 'target' : 'source';\n\n      var isValidConnection = function isValidConnection() {\n        return true;\n      };\n\n      var isTarget = isSourceHandle;\n      var edge = store.getState().edges.find(function (e) {\n        return e.id === id;\n      });\n      onEdgeUpdateStart === null || onEdgeUpdateStart === void 0 ? void 0 : onEdgeUpdateStart(event, edge, handleType);\n\n      var _onEdgeUpdateEnd = onEdgeUpdateEnd ? function (evt) {\n        return onEdgeUpdateEnd(evt, edge, handleType);\n      } : undefined;\n\n      var onConnectEdge = function onConnectEdge(connection) {\n        return onEdgeUpdate === null || onEdgeUpdate === void 0 ? void 0 : onEdgeUpdate(edge, connection);\n      };\n\n      handleMouseDown({\n        event: event,\n        handleId: handleId,\n        nodeId: nodeId,\n        onConnect: onConnectEdge,\n        isTarget: isTarget,\n        getState: store.getState,\n        setState: store.setState,\n        isValidConnection: isValidConnection,\n        elementEdgeUpdaterType: handleType,\n        onEdgeUpdateEnd: _onEdgeUpdateEnd\n      });\n    };\n\n    var onEdgeUpdaterSourceMouseDown = function onEdgeUpdaterSourceMouseDown(event) {\n      return handleEdgeUpdater(event, true);\n    };\n\n    var onEdgeUpdaterTargetMouseDown = function onEdgeUpdaterTargetMouseDown(event) {\n      return handleEdgeUpdater(event, false);\n    };\n\n    var onEdgeUpdaterMouseEnter = function onEdgeUpdaterMouseEnter() {\n      return setUpdating(true);\n    };\n\n    var onEdgeUpdaterMouseOut = function onEdgeUpdaterMouseOut() {\n      return setUpdating(false);\n    };\n\n    var markerStartUrl = useMemo(function () {\n      return \"url(#\".concat(getMarkerId(markerStart, rfId), \")\");\n    }, [markerStart, rfId]);\n    var markerEndUrl = useMemo(function () {\n      return \"url(#\".concat(getMarkerId(markerEnd, rfId), \")\");\n    }, [markerEnd, rfId]);\n\n    if (hidden) {\n      return null;\n    }\n\n    var inactive = !elementsSelectable && !onClick;\n    var handleEdgeUpdate = typeof onEdgeUpdate !== 'undefined';\n    var edgeClasses = cc(['react-flow__edge', \"react-flow__edge-\".concat(type), className, {\n      selected: selected,\n      animated: animated,\n      inactive: inactive,\n      updating: updating\n    }]);\n    return /*#__PURE__*/React.createElement(\"g\", {\n      className: edgeClasses,\n      onClick: onEdgeClick,\n      onDoubleClick: onEdgeDoubleClickHandler,\n      onContextMenu: onEdgeContextMenu,\n      onMouseEnter: onEdgeMouseEnter,\n      onMouseMove: onEdgeMouseMove,\n      onMouseLeave: onEdgeMouseLeave\n    }, /*#__PURE__*/React.createElement(EdgeComponent, {\n      id: id,\n      source: source,\n      target: target,\n      selected: selected,\n      animated: animated,\n      label: label,\n      labelStyle: labelStyle,\n      labelShowBg: labelShowBg,\n      labelBgStyle: labelBgStyle,\n      labelBgPadding: labelBgPadding,\n      labelBgBorderRadius: labelBgBorderRadius,\n      data: data,\n      style: style,\n      sourceX: sourceX,\n      sourceY: sourceY,\n      targetX: targetX,\n      targetY: targetY,\n      sourcePosition: sourcePosition,\n      targetPosition: targetPosition,\n      sourceHandleId: sourceHandleId,\n      targetHandleId: targetHandleId,\n      markerStart: markerStartUrl,\n      markerEnd: markerEndUrl,\n      \"data-testid\": \"rf__edge-\".concat(id)\n    }), handleEdgeUpdate && /*#__PURE__*/React.createElement(\"g\", {\n      onMouseDown: onEdgeUpdaterSourceMouseDown,\n      onMouseEnter: onEdgeUpdaterMouseEnter,\n      onMouseOut: onEdgeUpdaterMouseOut\n    }, /*#__PURE__*/React.createElement(EdgeAnchor, {\n      position: sourcePosition,\n      centerX: sourceX,\n      centerY: sourceY,\n      radius: edgeUpdaterRadius\n    })), handleEdgeUpdate && /*#__PURE__*/React.createElement(\"g\", {\n      onMouseDown: onEdgeUpdaterTargetMouseDown,\n      onMouseEnter: onEdgeUpdaterMouseEnter,\n      onMouseOut: onEdgeUpdaterMouseOut\n    }, /*#__PURE__*/React.createElement(EdgeAnchor, {\n      position: targetPosition,\n      centerX: targetX,\n      centerY: targetY,\n      radius: edgeUpdaterRadius\n    })));\n  };\n\n  EdgeWrapper.displayName = 'EdgeWrapper';\n  return /*#__PURE__*/memo(EdgeWrapper);\n});\n\nfunction ownKeys$8(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread$8(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys$8(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys$8(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nfunction createEdgeTypes(edgeTypes) {\n  var standardTypes = {\n    \"default\": wrapEdge(edgeTypes[\"default\"] || BezierEdge),\n    straight: wrapEdge(edgeTypes.bezier || StraightEdge),\n    step: wrapEdge(edgeTypes.step || StepEdge),\n    smoothstep: wrapEdge(edgeTypes.step || SmoothStepEdge),\n    simplebezier: wrapEdge(edgeTypes.simplebezier || SimpleBezierEdge)\n  };\n  var wrappedTypes = {};\n  var specialTypes = Object.keys(edgeTypes).filter(function (k) {\n    return !['default', 'bezier'].includes(k);\n  }).reduce(function (res, key) {\n    res[key] = wrapEdge(edgeTypes[key] || BezierEdge);\n    return res;\n  }, wrappedTypes);\n  return _objectSpread$8(_objectSpread$8({}, standardTypes), specialTypes);\n}\nfunction getHandlePosition(position, nodeRect) {\n  var handle = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n  var x = ((handle === null || handle === void 0 ? void 0 : handle.x) || 0) + nodeRect.x;\n  var y = ((handle === null || handle === void 0 ? void 0 : handle.y) || 0) + nodeRect.y;\n  var width = (handle === null || handle === void 0 ? void 0 : handle.width) || nodeRect.width;\n  var height = (handle === null || handle === void 0 ? void 0 : handle.height) || nodeRect.height;\n\n  switch (position) {\n    case Position.Top:\n      return {\n        x: x + width / 2,\n        y: y\n      };\n\n    case Position.Right:\n      return {\n        x: x + width,\n        y: y + height / 2\n      };\n\n    case Position.Bottom:\n      return {\n        x: x + width / 2,\n        y: y + height\n      };\n\n    case Position.Left:\n      return {\n        x: x,\n        y: y + height / 2\n      };\n  }\n}\nfunction getHandle(bounds, handleId) {\n  if (!bounds) {\n    return null;\n  } // there is no handleId when there are no multiple handles/ handles with ids\n  // so we just pick the first one\n\n\n  var handle = null;\n\n  if (bounds.length === 1 || !handleId) {\n    handle = bounds[0];\n  } else if (handleId) {\n    handle = bounds.find(function (d) {\n      return d.id === handleId;\n    });\n  }\n\n  return typeof handle === 'undefined' ? null : handle;\n}\nvar getEdgePositions = function getEdgePositions(sourceNodeRect, sourceHandle, sourcePosition, targetNodeRect, targetHandle, targetPosition) {\n  var sourceHandlePos = getHandlePosition(sourcePosition, sourceNodeRect, sourceHandle);\n  var targetHandlePos = getHandlePosition(targetPosition, targetNodeRect, targetHandle);\n  return {\n    sourceX: sourceHandlePos.x,\n    sourceY: sourceHandlePos.y,\n    targetX: targetHandlePos.x,\n    targetY: targetHandlePos.y\n  };\n};\nfunction isEdgeVisible(_ref) {\n  var sourcePos = _ref.sourcePos,\n      targetPos = _ref.targetPos,\n      sourceWidth = _ref.sourceWidth,\n      sourceHeight = _ref.sourceHeight,\n      targetWidth = _ref.targetWidth,\n      targetHeight = _ref.targetHeight,\n      width = _ref.width,\n      height = _ref.height,\n      transform = _ref.transform;\n  var edgeBox = {\n    x: Math.min(sourcePos.x, targetPos.x),\n    y: Math.min(sourcePos.y, targetPos.y),\n    x2: Math.max(sourcePos.x + sourceWidth, targetPos.x + targetWidth),\n    y2: Math.max(sourcePos.y + sourceHeight, targetPos.y + targetHeight)\n  };\n\n  if (edgeBox.x === edgeBox.x2) {\n    edgeBox.x2 += 1;\n  }\n\n  if (edgeBox.y === edgeBox.y2) {\n    edgeBox.y2 += 1;\n  }\n\n  var viewBox = rectToBox({\n    x: (0 - transform[0]) / transform[2],\n    y: (0 - transform[1]) / transform[2],\n    width: width / transform[2],\n    height: height / transform[2]\n  });\n  var xOverlap = Math.max(0, Math.min(viewBox.x2, edgeBox.x2) - Math.max(viewBox.x, edgeBox.x));\n  var yOverlap = Math.max(0, Math.min(viewBox.y2, edgeBox.y2) - Math.max(viewBox.y, edgeBox.y));\n  var overlappingArea = Math.ceil(xOverlap * yOverlap);\n  return overlappingArea > 0;\n}\nfunction getNodeData(nodeInternals, nodeId) {\n  var _node$internalsSymbol, _node$positionAbsolut, _node$positionAbsolut2, _node$positionAbsolut3, _node$positionAbsolut4;\n\n  var node = nodeInternals.get(nodeId);\n  var handleBounds = (node === null || node === void 0 ? void 0 : (_node$internalsSymbol = node[internalsSymbol]) === null || _node$internalsSymbol === void 0 ? void 0 : _node$internalsSymbol.handleBounds) || null;\n  var isInvalid = !node || !handleBounds || !node.width || !node.height || typeof ((_node$positionAbsolut = node.positionAbsolute) === null || _node$positionAbsolut === void 0 ? void 0 : _node$positionAbsolut.x) === 'undefined' || typeof ((_node$positionAbsolut2 = node.positionAbsolute) === null || _node$positionAbsolut2 === void 0 ? void 0 : _node$positionAbsolut2.y) === 'undefined';\n  return [{\n    x: (node === null || node === void 0 ? void 0 : (_node$positionAbsolut3 = node.positionAbsolute) === null || _node$positionAbsolut3 === void 0 ? void 0 : _node$positionAbsolut3.x) || 0,\n    y: (node === null || node === void 0 ? void 0 : (_node$positionAbsolut4 = node.positionAbsolute) === null || _node$positionAbsolut4 === void 0 ? void 0 : _node$positionAbsolut4.y) || 0,\n    width: (node === null || node === void 0 ? void 0 : node.width) || 0,\n    height: (node === null || node === void 0 ? void 0 : node.height) || 0\n  }, handleBounds, !isInvalid];\n}\n\nvar doc = typeof document !== 'undefined' ? document : null; // the keycode can be a string 'a' or an array of strings ['a', 'a+d']\n// a string means a single key 'a' or a combination when '+' is used 'a+d'\n// an array means different possibilites. Explainer: ['a', 'd+s'] here the\n// user can use the single key 'a' or the combination 'd' + 's'\n\nvar useKeyPress = (function () {\n  var keyCode = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n    target: doc\n  };\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      keyPressed = _useState2[0],\n      setKeyPressed = _useState2[1]; // we need to remember the pressed keys in order to support combinations\n\n\n  var pressedKeys = useRef(new Set([])); // keyCodes = array with single keys [['a']] or key combinations [['a', 's']]\n  // keysToWatch = array with all keys flattened ['a', 'd', 'ShiftLeft']\n  // used to check if we store event.code or event.key. When the code is in the list of keysToWatch\n  // we use the code otherwise the key. Explainer: When you press the left \"command\" key, the code is \"MetaLeft\"\n  // and the key is \"Meta\". We want users to be able to pass keys and codes so we assume that the key is meant when\n  // we can't find it in the list of keysToWatch.\n\n  var _useMemo = useMemo(function () {\n    if (keyCode !== null) {\n      var keyCodeArr = Array.isArray(keyCode) ? keyCode : [keyCode];\n      var keys = keyCodeArr.filter(function (kc) {\n        return typeof kc === 'string';\n      }).map(function (kc) {\n        return kc.split('+');\n      });\n      var keysFlat = keys.reduce(function (res, item) {\n        return res.concat.apply(res, _toConsumableArray(item));\n      }, []);\n      return [keys, keysFlat];\n    }\n\n    return [[], []];\n  }, [keyCode]),\n      _useMemo2 = _slicedToArray(_useMemo, 2),\n      keyCodes = _useMemo2[0],\n      keysToWatch = _useMemo2[1];\n\n  useEffect(function () {\n    if (keyCode !== null) {\n      var _options$target, _options$target2;\n\n      var downHandler = function downHandler(event) {\n        if (isInputDOMNode(event)) {\n          return false;\n        }\n\n        var keyOrCode = useKeyOrCode(event.code, keysToWatch);\n        pressedKeys.current.add(event[keyOrCode]);\n\n        if (isMatchingKey(keyCodes, pressedKeys.current, false)) {\n          event.preventDefault();\n          setKeyPressed(true);\n        }\n      };\n\n      var upHandler = function upHandler(event) {\n        if (isInputDOMNode(event)) {\n          return false;\n        }\n\n        var keyOrCode = useKeyOrCode(event.code, keysToWatch);\n\n        if (isMatchingKey(keyCodes, pressedKeys.current, true)) {\n          setKeyPressed(false);\n          pressedKeys.current.clear();\n        } else {\n          pressedKeys.current[\"delete\"](event[keyOrCode]);\n        }\n      };\n\n      var resetHandler = function resetHandler() {\n        pressedKeys.current.clear();\n        setKeyPressed(false);\n      };\n\n      options === null || options === void 0 ? void 0 : (_options$target = options.target) === null || _options$target === void 0 ? void 0 : _options$target.addEventListener('keydown', downHandler);\n      options === null || options === void 0 ? void 0 : (_options$target2 = options.target) === null || _options$target2 === void 0 ? void 0 : _options$target2.addEventListener('keyup', upHandler);\n      window.addEventListener('blur', resetHandler);\n      return function () {\n        var _options$target3, _options$target4;\n\n        options === null || options === void 0 ? void 0 : (_options$target3 = options.target) === null || _options$target3 === void 0 ? void 0 : _options$target3.removeEventListener('keydown', downHandler);\n        options === null || options === void 0 ? void 0 : (_options$target4 = options.target) === null || _options$target4 === void 0 ? void 0 : _options$target4.removeEventListener('keyup', upHandler);\n        window.removeEventListener('blur', resetHandler);\n      };\n    }\n  }, [keyCode, setKeyPressed]);\n  return keyPressed;\n}); // utils\n\nfunction isMatchingKey(keyCodes, pressedKeys, isUp) {\n  return keyCodes // we only want to compare same sizes of keyCode definitions\n  // and pressed keys. When the user specified 'Meta' as a key somewhere\n  // this would also be truthy without this filter when user presses 'Meta' + 'r'\n  .filter(function (keys) {\n    return isUp || keys.length === pressedKeys.size;\n  }) // since we want to support multiple possibilities only one of the\n  // combinations need to be part of the pressed keys\n  .some(function (keys) {\n    return keys.every(function (k) {\n      return pressedKeys.has(k);\n    });\n  });\n}\n\nfunction useKeyOrCode(eventCode, keysToWatch) {\n  return keysToWatch.includes(eventCode) ? 'code' : 'key';\n}\n\nfunction isInputDOMNode(event) {\n  var _event$composedPath;\n\n  // using composed path for handling shadow dom\n  var target = ((_event$composedPath = event.composedPath) === null || _event$composedPath === void 0 ? void 0 : _event$composedPath.call(event)[0]) || event.target;\n  return ['INPUT', 'SELECT', 'TEXTAREA'].includes(target === null || target === void 0 ? void 0 : target.nodeName) || (target === null || target === void 0 ? void 0 : target.hasAttribute('contenteditable'));\n}\n\nvar selector$7 = function selector(s) {\n  return {\n    onNodesChange: s.onNodesChange,\n    onEdgesChange: s.onEdgesChange\n  };\n};\n\nvar useGlobalKeyHandler = (function (_ref) {\n  var deleteKeyCode = _ref.deleteKeyCode,\n      multiSelectionKeyCode = _ref.multiSelectionKeyCode;\n  var store = useStoreApi();\n\n  var _useStore = useStore(selector$7, shallow),\n      onNodesChange = _useStore.onNodesChange,\n      onEdgesChange = _useStore.onEdgesChange;\n\n  var deleteKeyPressed = useKeyPress(deleteKeyCode);\n  var multiSelectionKeyPressed = useKeyPress(multiSelectionKeyCode);\n  useEffect(function () {\n    var _store$getState = store.getState(),\n        nodeInternals = _store$getState.nodeInternals,\n        edges = _store$getState.edges,\n        hasDefaultNodes = _store$getState.hasDefaultNodes,\n        hasDefaultEdges = _store$getState.hasDefaultEdges,\n        onNodesDelete = _store$getState.onNodesDelete,\n        onEdgesDelete = _store$getState.onEdgesDelete;\n\n    var nodes = Array.from(nodeInternals.values());\n    var nodesToRemove = nodes.reduce(function (res, node) {\n      if (!node.selected && node.parentNode && res.find(function (n) {\n        return n.id === node.parentNode;\n      })) {\n        res.push(node);\n      } else if (node.selected) {\n        res.push(node);\n      }\n\n      return res;\n    }, []);\n    var selectedEdges = edges.filter(function (e) {\n      return e.selected;\n    });\n\n    if (deleteKeyPressed && (nodesToRemove || selectedEdges)) {\n      var connectedEdges = getConnectedEdges(nodesToRemove, edges);\n      var edgesToRemove = [].concat(_toConsumableArray(selectedEdges), _toConsumableArray(connectedEdges));\n      var edgeIdsToRemove = edgesToRemove.reduce(function (res, edge) {\n        if (!res.includes(edge.id)) {\n          res.push(edge.id);\n        }\n\n        return res;\n      }, []);\n\n      if (hasDefaultEdges || hasDefaultNodes) {\n        if (hasDefaultEdges) {\n          store.setState({\n            edges: edges.filter(function (e) {\n              return !edgeIdsToRemove.includes(e.id);\n            })\n          });\n        }\n\n        if (hasDefaultNodes) {\n          nodesToRemove.forEach(function (node) {\n            nodeInternals[\"delete\"](node.id);\n          });\n          store.setState({\n            nodeInternals: new Map(nodeInternals)\n          });\n        }\n      }\n\n      if (edgeIdsToRemove.length > 0) {\n        onEdgesDelete === null || onEdgesDelete === void 0 ? void 0 : onEdgesDelete(edgesToRemove);\n\n        if (onEdgesChange) {\n          var edgeChanges = edgeIdsToRemove.map(function (id) {\n            return {\n              id: id,\n              type: 'remove'\n            };\n          });\n          onEdgesChange(edgeChanges);\n        }\n      }\n\n      if (nodesToRemove.length > 0) {\n        onNodesDelete === null || onNodesDelete === void 0 ? void 0 : onNodesDelete(nodesToRemove);\n\n        if (onNodesChange) {\n          var nodeChanges = nodesToRemove.map(function (n) {\n            return {\n              id: n.id,\n              type: 'remove'\n            };\n          });\n          onNodesChange(nodeChanges);\n        }\n      }\n\n      store.setState({\n        nodesSelectionActive: false\n      });\n    }\n  }, [deleteKeyPressed, onNodesChange, onEdgesChange]);\n  useEffect(function () {\n    store.setState({\n      multiSelectionActive: multiSelectionKeyPressed\n    });\n  }, [multiSelectionKeyPressed]);\n});\n\nfunction useResizeHandler(rendererNode) {\n  var store = useStoreApi();\n  useEffect(function () {\n    var resizeObserver;\n\n    var updateDimensions = function updateDimensions() {\n      if (!rendererNode.current) {\n        return;\n      }\n\n      var size = getDimensions(rendererNode.current); // @ts-ignore\n\n      if (process.env.NODE_ENV === 'development') {\n        if (size.height === 0 || size.width === 0) {\n          console.warn('[React Flow]: The React Flow parent container needs a width and a height to render the graph. Help: https://reactflow.dev/error#400');\n        }\n      }\n\n      store.setState({\n        width: size.width || 500,\n        height: size.height || 500\n      });\n    };\n\n    updateDimensions();\n    window.onresize = updateDimensions;\n\n    if (rendererNode.current) {\n      resizeObserver = new ResizeObserver(function () {\n        return updateDimensions();\n      });\n      resizeObserver.observe(rendererNode.current);\n    }\n\n    return function () {\n      window.onresize = null;\n\n      if (resizeObserver && rendererNode.current) {\n        resizeObserver.unobserve(rendererNode.current);\n      }\n    };\n  }, []);\n}\n\nvar viewChanged = function viewChanged(prevViewport, eventViewport) {\n  return prevViewport.x !== eventViewport.x || prevViewport.y !== eventViewport.y || prevViewport.zoom !== eventViewport.k;\n};\n\nvar eventToFlowTransform = function eventToFlowTransform(eventViewport) {\n  return {\n    x: eventViewport.x,\n    y: eventViewport.y,\n    zoom: eventViewport.k\n  };\n};\n\nvar isWrappedWithClass = function isWrappedWithClass(event, className) {\n  return event.target.closest(\".\".concat(className));\n};\n\nvar selector$6 = function selector(s) {\n  return {\n    d3Zoom: s.d3Zoom,\n    d3Selection: s.d3Selection,\n    d3ZoomHandler: s.d3ZoomHandler\n  };\n};\n\nvar ZoomPane = function ZoomPane(_ref) {\n  var onMove = _ref.onMove,\n      onMoveStart = _ref.onMoveStart,\n      onMoveEnd = _ref.onMoveEnd,\n      _ref$zoomOnScroll = _ref.zoomOnScroll,\n      zoomOnScroll = _ref$zoomOnScroll === void 0 ? true : _ref$zoomOnScroll,\n      _ref$zoomOnPinch = _ref.zoomOnPinch,\n      zoomOnPinch = _ref$zoomOnPinch === void 0 ? true : _ref$zoomOnPinch,\n      _ref$panOnScroll = _ref.panOnScroll,\n      panOnScroll = _ref$panOnScroll === void 0 ? false : _ref$panOnScroll,\n      _ref$panOnScrollSpeed = _ref.panOnScrollSpeed,\n      panOnScrollSpeed = _ref$panOnScrollSpeed === void 0 ? 0.5 : _ref$panOnScrollSpeed,\n      _ref$panOnScrollMode = _ref.panOnScrollMode,\n      panOnScrollMode = _ref$panOnScrollMode === void 0 ? PanOnScrollMode.Free : _ref$panOnScrollMode,\n      _ref$zoomOnDoubleClic = _ref.zoomOnDoubleClick,\n      zoomOnDoubleClick = _ref$zoomOnDoubleClic === void 0 ? true : _ref$zoomOnDoubleClic,\n      selectionKeyPressed = _ref.selectionKeyPressed,\n      elementsSelectable = _ref.elementsSelectable,\n      _ref$panOnDrag = _ref.panOnDrag,\n      panOnDrag = _ref$panOnDrag === void 0 ? true : _ref$panOnDrag,\n      translateExtent = _ref.translateExtent,\n      minZoom = _ref.minZoom,\n      maxZoom = _ref.maxZoom,\n      _ref$defaultZoom = _ref.defaultZoom,\n      defaultZoom = _ref$defaultZoom === void 0 ? 1 : _ref$defaultZoom,\n      _ref$defaultPosition = _ref.defaultPosition,\n      defaultPosition = _ref$defaultPosition === void 0 ? [0, 0] : _ref$defaultPosition,\n      zoomActivationKeyCode = _ref.zoomActivationKeyCode,\n      _ref$preventScrolling = _ref.preventScrolling,\n      preventScrolling = _ref$preventScrolling === void 0 ? true : _ref$preventScrolling,\n      children = _ref.children,\n      noWheelClassName = _ref.noWheelClassName,\n      noPanClassName = _ref.noPanClassName;\n  var store = useStoreApi();\n  var isZoomingOrPanning = useRef(false);\n  var zoomPane = useRef(null);\n  var prevTransform = useRef({\n    x: 0,\n    y: 0,\n    zoom: 0\n  });\n\n  var _useStore = useStore(selector$6, shallow),\n      d3Zoom = _useStore.d3Zoom,\n      d3Selection = _useStore.d3Selection,\n      d3ZoomHandler = _useStore.d3ZoomHandler;\n\n  var zoomActivationKeyPressed = useKeyPress(zoomActivationKeyCode);\n  useResizeHandler(zoomPane);\n  useEffect(function () {\n    if (zoomPane.current) {\n      var _selection$node;\n\n      var d3ZoomInstance = zoom().scaleExtent([minZoom, maxZoom]).translateExtent(translateExtent);\n      var selection = select(zoomPane.current).call(d3ZoomInstance);\n      var clampedX = clamp(defaultPosition[0], translateExtent[0][0], translateExtent[1][0]);\n      var clampedY = clamp(defaultPosition[1], translateExtent[0][1], translateExtent[1][1]);\n      var clampedZoom = clamp(defaultZoom, minZoom, maxZoom);\n      var updatedTransform = zoomIdentity.translate(clampedX, clampedY).scale(clampedZoom);\n      d3ZoomInstance.transform(selection, updatedTransform);\n      store.setState({\n        d3Zoom: d3ZoomInstance,\n        d3Selection: selection,\n        d3ZoomHandler: selection.on('wheel.zoom'),\n        // we need to pass transform because zoom handler is not registered when we set the initial transform\n        transform: [clampedX, clampedY, clampedZoom],\n        domNode: (_selection$node = selection.node()) === null || _selection$node === void 0 ? void 0 : _selection$node.closest('.react-flow')\n      });\n    }\n  }, []);\n  useEffect(function () {\n    if (d3Selection && d3Zoom) {\n      if (panOnScroll && !zoomActivationKeyPressed) {\n        d3Selection.on('wheel', function (event) {\n          if (isWrappedWithClass(event, noWheelClassName)) {\n            return false;\n          }\n\n          event.preventDefault();\n          event.stopImmediatePropagation();\n          var currentZoom = d3Selection.property('__zoom').k || 1;\n\n          if (event.ctrlKey && zoomOnPinch) {\n            var point = pointer(event); // taken from https://github.com/d3/d3-zoom/blob/master/src/zoom.js\n\n            var pinchDelta = -event.deltaY * (event.deltaMode === 1 ? 0.05 : event.deltaMode ? 1 : 0.002) * 10;\n\n            var _zoom = currentZoom * Math.pow(2, pinchDelta);\n\n            d3Zoom.scaleTo(d3Selection, _zoom, point);\n            return;\n          } // increase scroll speed in firefox\n          // firefox: deltaMode === 1; chrome: deltaMode === 0\n\n\n          var deltaNormalize = event.deltaMode === 1 ? 20 : 1;\n          var deltaX = panOnScrollMode === PanOnScrollMode.Vertical ? 0 : event.deltaX * deltaNormalize;\n          var deltaY = panOnScrollMode === PanOnScrollMode.Horizontal ? 0 : event.deltaY * deltaNormalize;\n          d3Zoom.translateBy(d3Selection, -(deltaX / currentZoom) * panOnScrollSpeed, -(deltaY / currentZoom) * panOnScrollSpeed);\n        }).on('wheel.zoom', null);\n      } else if (typeof d3ZoomHandler !== 'undefined') {\n        d3Selection.on('wheel', function (event) {\n          if (!preventScrolling || isWrappedWithClass(event, noWheelClassName)) {\n            return null;\n          }\n\n          event.preventDefault();\n        }).on('wheel.zoom', d3ZoomHandler);\n      }\n    }\n  }, [panOnScroll, panOnScrollMode, d3Selection, d3Zoom, d3ZoomHandler, zoomActivationKeyPressed, zoomOnPinch, preventScrolling, noWheelClassName]);\n  useEffect(function () {\n    if (d3Zoom) {\n      if (selectionKeyPressed && !isZoomingOrPanning.current) {\n        d3Zoom.on('zoom', null);\n      } else if (!selectionKeyPressed) {\n        d3Zoom.on('zoom', function (event) {\n          store.setState({\n            transform: [event.transform.x, event.transform.y, event.transform.k]\n          });\n\n          if (onMove) {\n            var flowTransform = eventToFlowTransform(event.transform);\n            onMove(event.sourceEvent, flowTransform);\n          }\n        });\n      }\n    }\n  }, [selectionKeyPressed, d3Zoom, onMove]);\n  useEffect(function () {\n    if (d3Zoom) {\n      d3Zoom.on('start', function (event) {\n        isZoomingOrPanning.current = true;\n\n        if (onMoveStart) {\n          var flowTransform = eventToFlowTransform(event.transform);\n          prevTransform.current = flowTransform;\n          onMoveStart(event.sourceEvent, flowTransform);\n        }\n      });\n    }\n  }, [d3Zoom, onMoveStart]);\n  useEffect(function () {\n    if (d3Zoom) {\n      d3Zoom.on('end', function (event) {\n        isZoomingOrPanning.current = false;\n\n        if (onMoveEnd && viewChanged(prevTransform.current, event.transform)) {\n          var flowTransform = eventToFlowTransform(event.transform);\n          prevTransform.current = flowTransform;\n          onMoveEnd(event.sourceEvent, flowTransform);\n        }\n      });\n    }\n  }, [d3Zoom, onMoveEnd]);\n  useEffect(function () {\n    if (d3Zoom) {\n      d3Zoom.filter(function (event) {\n        var zoomScroll = zoomActivationKeyPressed || zoomOnScroll;\n        var pinchZoom = zoomOnPinch && event.ctrlKey; // if all interactions are disabled, we prevent all zoom events\n\n        if (!panOnDrag && !zoomScroll && !panOnScroll && !zoomOnDoubleClick && !zoomOnPinch) {\n          return false;\n        } // during a selection we prevent all other interactions\n\n\n        if (selectionKeyPressed) {\n          return false;\n        } // if zoom on double click is disabled, we prevent the double click event\n\n\n        if (!zoomOnDoubleClick && event.type === 'dblclick') {\n          return false;\n        } // if the target element is inside an element with the nowheel class, we prevent zooming\n\n\n        if (isWrappedWithClass(event, noWheelClassName) && event.type === 'wheel') {\n          return false;\n        } // if the target element is inside an element with the nopan class, we prevent panning\n\n\n        if (isWrappedWithClass(event, noPanClassName) && event.type !== 'wheel') {\n          return false;\n        }\n\n        if (!zoomOnPinch && event.ctrlKey && event.type === 'wheel') {\n          return false;\n        } // when there is no scroll handling enabled, we prevent all wheel events\n\n\n        if (!zoomScroll && !panOnScroll && !pinchZoom && event.type === 'wheel') {\n          return false;\n        } // if the pane is not movable, we prevent dragging it with mousestart or touchstart\n\n\n        if (!panOnDrag && (event.type === 'mousedown' || event.type === 'touchstart')) {\n          return false;\n        } // default filter for d3-zoom\n\n\n        return (!event.ctrlKey || event.type === 'wheel') && !event.button;\n      });\n    }\n  }, [d3Zoom, zoomOnScroll, zoomOnPinch, panOnScroll, zoomOnDoubleClick, panOnDrag, selectionKeyPressed, elementsSelectable, zoomActivationKeyPressed]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"react-flow__renderer react-flow__container\",\n    ref: zoomPane\n  }, children);\n};\n\nfunction ownKeys$7(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread$7(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys$7(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys$7(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction getMousePosition(event, containerBounds) {\n  return {\n    x: event.clientX - containerBounds.left,\n    y: event.clientY - containerBounds.top\n  };\n}\n\nvar selector$5 = function selector(s) {\n  return {\n    userSelectionActive: s.userSelectionActive,\n    elementsSelectable: s.elementsSelectable\n  };\n};\n\nvar initialRect = {\n  startX: 0,\n  startY: 0,\n  x: 0,\n  y: 0,\n  width: 0,\n  height: 0,\n  draw: false\n};\nvar UserSelection = /*#__PURE__*/memo(function (_ref) {\n  var selectionKeyPressed = _ref.selectionKeyPressed;\n  var store = useStoreApi();\n  var prevSelectedNodesCount = useRef(0);\n  var prevSelectedEdgesCount = useRef(0);\n  var containerBounds = useRef();\n\n  var _useState = useState(initialRect),\n      _useState2 = _slicedToArray(_useState, 2),\n      userSelectionRect = _useState2[0],\n      setUserSelectionRect = _useState2[1];\n\n  var _useStore = useStore(selector$5, shallow),\n      userSelectionActive = _useStore.userSelectionActive,\n      elementsSelectable = _useStore.elementsSelectable;\n\n  var renderUserSelectionPane = userSelectionActive || selectionKeyPressed;\n\n  if (!elementsSelectable || !renderUserSelectionPane) {\n    return null;\n  }\n\n  var resetUserSelection = function resetUserSelection() {\n    setUserSelectionRect(initialRect);\n    store.setState({\n      userSelectionActive: false\n    });\n    prevSelectedNodesCount.current = 0;\n    prevSelectedEdgesCount.current = 0;\n  };\n\n  var onMouseDown = function onMouseDown(event) {\n    var reactFlowNode = event.target.closest('.react-flow');\n    containerBounds.current = reactFlowNode.getBoundingClientRect();\n    var mousePos = getMousePosition(event, containerBounds.current);\n    setUserSelectionRect({\n      width: 0,\n      height: 0,\n      startX: mousePos.x,\n      startY: mousePos.y,\n      x: mousePos.x,\n      y: mousePos.y,\n      draw: true\n    });\n    store.setState({\n      userSelectionActive: true,\n      nodesSelectionActive: false\n    });\n  };\n\n  var onMouseMove = function onMouseMove(event) {\n    var _userSelectionRect$st, _userSelectionRect$st2;\n\n    if (!selectionKeyPressed || !userSelectionRect.draw || !containerBounds.current) {\n      return;\n    }\n\n    var mousePos = getMousePosition(event, containerBounds.current);\n    var startX = (_userSelectionRect$st = userSelectionRect.startX) !== null && _userSelectionRect$st !== void 0 ? _userSelectionRect$st : 0;\n    var startY = (_userSelectionRect$st2 = userSelectionRect.startY) !== null && _userSelectionRect$st2 !== void 0 ? _userSelectionRect$st2 : 0;\n\n    var nextUserSelectRect = _objectSpread$7(_objectSpread$7({}, userSelectionRect), {}, {\n      x: mousePos.x < startX ? mousePos.x : startX,\n      y: mousePos.y < startY ? mousePos.y : startY,\n      width: Math.abs(mousePos.x - startX),\n      height: Math.abs(mousePos.y - startY)\n    });\n\n    var _store$getState = store.getState(),\n        nodeInternals = _store$getState.nodeInternals,\n        edges = _store$getState.edges,\n        transform = _store$getState.transform,\n        onNodesChange = _store$getState.onNodesChange,\n        onEdgesChange = _store$getState.onEdgesChange;\n\n    var nodes = Array.from(nodeInternals.values());\n    var selectedNodes = getNodesInside(nodeInternals, nextUserSelectRect, transform, false, true);\n    var selectedEdgeIds = getConnectedEdges(selectedNodes, edges).map(function (e) {\n      return e.id;\n    });\n    var selectedNodeIds = selectedNodes.map(function (n) {\n      return n.id;\n    });\n\n    if (prevSelectedNodesCount.current !== selectedNodeIds.length) {\n      prevSelectedNodesCount.current = selectedNodeIds.length;\n      var changes = getSelectionChanges(nodes, selectedNodeIds);\n\n      if (changes.length) {\n        onNodesChange === null || onNodesChange === void 0 ? void 0 : onNodesChange(changes);\n      }\n    }\n\n    if (prevSelectedEdgesCount.current !== selectedEdgeIds.length) {\n      prevSelectedEdgesCount.current = selectedEdgeIds.length;\n\n      var _changes = getSelectionChanges(edges, selectedEdgeIds);\n\n      if (_changes.length) {\n        onEdgesChange === null || onEdgesChange === void 0 ? void 0 : onEdgesChange(_changes);\n      }\n    }\n\n    setUserSelectionRect(nextUserSelectRect);\n  };\n\n  var onMouseUp = function onMouseUp() {\n    store.setState({\n      nodesSelectionActive: prevSelectedNodesCount.current > 0\n    });\n    resetUserSelection();\n  };\n\n  var onMouseLeave = function onMouseLeave() {\n    store.setState({\n      nodesSelectionActive: false\n    });\n    resetUserSelection();\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"react-flow__selectionpane react-flow__container\",\n    onMouseDown: onMouseDown,\n    onMouseMove: onMouseMove,\n    onMouseUp: onMouseUp,\n    onMouseLeave: onMouseLeave\n  }, userSelectionRect.draw && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"react-flow__selection react-flow__container\",\n    style: {\n      width: userSelectionRect.width,\n      height: userSelectionRect.height,\n      transform: \"translate(\".concat(userSelectionRect.x, \"px, \").concat(userSelectionRect.y, \"px)\")\n    }\n  }));\n});\n\nfunction ownKeys$6(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread$6(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys$6(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys$6(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nfunction isParentSelected(node, nodeInternals) {\n  if (!node.parentNode) {\n    return false;\n  }\n\n  var parentNode = nodeInternals.get(node.parentNode);\n\n  if (!parentNode) {\n    return false;\n  }\n\n  if (parentNode.selected) {\n    return true;\n  }\n\n  return isParentSelected(parentNode, nodeInternals);\n}\nfunction hasSelector(target, selector, nodeRef) {\n  var current = target;\n\n  do {\n    var _current;\n\n    if ((_current = current) !== null && _current !== void 0 && _current.matches(selector)) return true;\n    if (current === nodeRef.current) return false;\n    current = current.parentElement;\n  } while (current);\n\n  return false;\n} // looks for all selected nodes and created a NodeDragItem for each of them\n\nfunction getDragItems(nodeInternals, mousePos, nodeId) {\n  return Array.from(nodeInternals.values()).filter(function (n) {\n    return (n.selected || n.id === nodeId) && (!n.parentNode || !isParentSelected(n, nodeInternals));\n  }).map(function (n) {\n    var _n$positionAbsolute$x, _n$positionAbsolute, _n$positionAbsolute$y, _n$positionAbsolute2;\n\n    return {\n      id: n.id,\n      position: n.position || {\n        x: 0,\n        y: 0\n      },\n      positionAbsolute: n.positionAbsolute || {\n        x: 0,\n        y: 0\n      },\n      distance: {\n        x: mousePos.x - ((_n$positionAbsolute$x = (_n$positionAbsolute = n.positionAbsolute) === null || _n$positionAbsolute === void 0 ? void 0 : _n$positionAbsolute.x) !== null && _n$positionAbsolute$x !== void 0 ? _n$positionAbsolute$x : 0),\n        y: mousePos.y - ((_n$positionAbsolute$y = (_n$positionAbsolute2 = n.positionAbsolute) === null || _n$positionAbsolute2 === void 0 ? void 0 : _n$positionAbsolute2.y) !== null && _n$positionAbsolute$y !== void 0 ? _n$positionAbsolute$y : 0)\n      },\n      delta: {\n        x: 0,\n        y: 0\n      },\n      extent: n.extent,\n      parentNode: n.parentNode,\n      width: n.width,\n      height: n.height\n    };\n  });\n}\nfunction updatePosition(dragItem, mousePos, snapToGrid, _ref, nodeInternals, nodeExtent) {\n  var _ref2 = _slicedToArray(_ref, 2),\n      snapX = _ref2[0],\n      snapY = _ref2[1];\n\n  var currentExtent = dragItem.extent || nodeExtent;\n  var nextPosition = {\n    x: mousePos.x - dragItem.distance.x,\n    y: mousePos.y - dragItem.distance.y\n  };\n\n  if (snapToGrid) {\n    nextPosition.x = snapX * Math.round(nextPosition.x / snapX);\n    nextPosition.y = snapY * Math.round(nextPosition.y / snapY);\n  }\n\n  if (dragItem.extent === 'parent') {\n    if (dragItem.parentNode && dragItem.width && dragItem.height) {\n      var parent = nodeInternals.get(dragItem.parentNode);\n      currentExtent = parent !== null && parent !== void 0 && parent.positionAbsolute && parent !== null && parent !== void 0 && parent.width && parent !== null && parent !== void 0 && parent.height ? [[parent.positionAbsolute.x, parent.positionAbsolute.y], [parent.positionAbsolute.x + parent.width - dragItem.width, parent.positionAbsolute.y + parent.height - dragItem.height]] : currentExtent;\n    } else {\n      // @ts-ignore\n      if (process.env.NODE_ENV === 'development') {\n        console.warn('[React Flow]: Only child nodes can use a parent extent. Help: https://reactflow.dev/error#500');\n      }\n\n      currentExtent = nodeExtent;\n    }\n  } else if (dragItem.extent && dragItem.parentNode) {\n    var _parent$positionAbsol, _parent$positionAbsol2, _parent$positionAbsol3, _parent$positionAbsol4;\n\n    var _parent = nodeInternals.get(dragItem.parentNode);\n\n    var parentX = (_parent$positionAbsol = _parent === null || _parent === void 0 ? void 0 : (_parent$positionAbsol2 = _parent.positionAbsolute) === null || _parent$positionAbsol2 === void 0 ? void 0 : _parent$positionAbsol2.x) !== null && _parent$positionAbsol !== void 0 ? _parent$positionAbsol : 0;\n    var parentY = (_parent$positionAbsol3 = _parent === null || _parent === void 0 ? void 0 : (_parent$positionAbsol4 = _parent.positionAbsolute) === null || _parent$positionAbsol4 === void 0 ? void 0 : _parent$positionAbsol4.y) !== null && _parent$positionAbsol3 !== void 0 ? _parent$positionAbsol3 : 0;\n    currentExtent = [[dragItem.extent[0][0] + parentX, dragItem.extent[0][1] + parentY], [dragItem.extent[1][0] + parentX, dragItem.extent[1][1] + parentY]];\n  }\n\n  var parentPosition = {\n    x: 0,\n    y: 0\n  };\n\n  if (dragItem.parentNode) {\n    var _parentNode$positionA, _parentNode$positionA2, _parentNode$positionA3, _parentNode$positionA4;\n\n    var parentNode = nodeInternals.get(dragItem.parentNode);\n    parentPosition = {\n      x: (_parentNode$positionA = parentNode === null || parentNode === void 0 ? void 0 : (_parentNode$positionA2 = parentNode.positionAbsolute) === null || _parentNode$positionA2 === void 0 ? void 0 : _parentNode$positionA2.x) !== null && _parentNode$positionA !== void 0 ? _parentNode$positionA : 0,\n      y: (_parentNode$positionA3 = parentNode === null || parentNode === void 0 ? void 0 : (_parentNode$positionA4 = parentNode.positionAbsolute) === null || _parentNode$positionA4 === void 0 ? void 0 : _parentNode$positionA4.y) !== null && _parentNode$positionA3 !== void 0 ? _parentNode$positionA3 : 0\n    };\n  }\n\n  dragItem.positionAbsolute = currentExtent ? clampPosition(nextPosition, currentExtent) : nextPosition;\n  dragItem.position = {\n    x: dragItem.positionAbsolute.x - parentPosition.x,\n    y: dragItem.positionAbsolute.y - parentPosition.y\n  };\n  return dragItem;\n} // returns two params:\n// 1. the dragged node (or the first of the list, if we are dragging a node selection)\n// 2. array of selected nodes (for multi selections)\n\nfunction getEventHandlerParams(_ref3) {\n  var nodeId = _ref3.nodeId,\n      dragItems = _ref3.dragItems,\n      nodeInternals = _ref3.nodeInternals;\n  var extentedDragItems = dragItems.map(function (n) {\n    var node = nodeInternals.get(n.id);\n    return _objectSpread$6(_objectSpread$6({}, node), {}, {\n      position: n.position,\n      positionAbsolute: n.positionAbsolute\n    });\n  });\n  return [nodeId ? extentedDragItems.find(function (n) {\n    return n.id === nodeId;\n  }) : extentedDragItems[0], extentedDragItems];\n}\n\nfunction wrapSelectionDragFunc(selectionFunc) {\n  return function (event, _, nodes) {\n    return selectionFunc === null || selectionFunc === void 0 ? void 0 : selectionFunc(event, nodes);\n  };\n}\n\nfunction useDrag(_ref) {\n  var nodeRef = _ref.nodeRef,\n      _ref$disabled = _ref.disabled,\n      disabled = _ref$disabled === void 0 ? false : _ref$disabled,\n      noDragClassName = _ref.noDragClassName,\n      handleSelector = _ref.handleSelector,\n      nodeId = _ref.nodeId,\n      isSelectable = _ref.isSelectable,\n      selectNodesOnDrag = _ref.selectNodesOnDrag;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      dragging = _useState2[0],\n      setDragging = _useState2[1];\n\n  var store = useStoreApi();\n  var dragItems = useRef();\n  var lastPos = useRef({\n    x: null,\n    y: null\n  }); // returns the pointer position projected to the RF coordinate system\n\n  var getPointerPosition = useCallback(function (_ref2) {\n    var sourceEvent = _ref2.sourceEvent;\n\n    var _store$getState = store.getState(),\n        transform = _store$getState.transform,\n        snapGrid = _store$getState.snapGrid,\n        snapToGrid = _store$getState.snapToGrid;\n\n    var x = sourceEvent.touches ? sourceEvent.touches[0].clientX : sourceEvent.clientX;\n    var y = sourceEvent.touches ? sourceEvent.touches[0].clientY : sourceEvent.clientY;\n    var pointerPos = pointToRendererPoint({\n      x: x,\n      y: y\n    }, transform, snapToGrid, snapGrid);\n    return pointerPos;\n  }, []);\n  useEffect(function () {\n    if (nodeRef !== null && nodeRef !== void 0 && nodeRef.current) {\n      var selection = select(nodeRef.current);\n\n      if (disabled) {\n        selection.on('.drag', null);\n      } else {\n        var dragHandler = drag().on('start', function (event) {\n          var _store$getState2 = store.getState(),\n              nodeInternals = _store$getState2.nodeInternals,\n              multiSelectionActive = _store$getState2.multiSelectionActive,\n              unselectNodesAndEdges = _store$getState2.unselectNodesAndEdges,\n              onNodeDragStart = _store$getState2.onNodeDragStart,\n              onSelectionDragStart = _store$getState2.onSelectionDragStart;\n\n          var onStart = nodeId ? onNodeDragStart : wrapSelectionDragFunc(onSelectionDragStart);\n\n          if (!selectNodesOnDrag && !multiSelectionActive && nodeId) {\n            var _nodeInternals$get;\n\n            if (!((_nodeInternals$get = nodeInternals.get(nodeId)) !== null && _nodeInternals$get !== void 0 && _nodeInternals$get.selected)) {\n              // we need to reset selected nodes when selectNodesOnDrag=false\n              unselectNodesAndEdges();\n            }\n          }\n\n          if (nodeId && isSelectable && selectNodesOnDrag) {\n            handleNodeClick({\n              id: nodeId,\n              store: store\n            });\n          }\n\n          var pointerPos = getPointerPosition(event);\n          lastPos.current = pointerPos;\n          dragItems.current = getDragItems(nodeInternals, pointerPos, nodeId);\n\n          if (onStart && dragItems.current) {\n            var _getEventHandlerParam = getEventHandlerParams({\n              nodeId: nodeId,\n              dragItems: dragItems.current,\n              nodeInternals: nodeInternals\n            }),\n                _getEventHandlerParam2 = _slicedToArray(_getEventHandlerParam, 2),\n                currentNode = _getEventHandlerParam2[0],\n                nodes = _getEventHandlerParam2[1];\n\n            onStart(event.sourceEvent, currentNode, nodes);\n          }\n        }).on('drag', function (event) {\n          var _store$getState3 = store.getState(),\n              updateNodePositions = _store$getState3.updateNodePositions,\n              snapToGrid = _store$getState3.snapToGrid,\n              snapGrid = _store$getState3.snapGrid,\n              nodeInternals = _store$getState3.nodeInternals,\n              nodeExtent = _store$getState3.nodeExtent,\n              onNodeDrag = _store$getState3.onNodeDrag,\n              onSelectionDrag = _store$getState3.onSelectionDrag;\n\n          var pointerPos = getPointerPosition(event); // skip events without movement\n\n          if ((lastPos.current.x !== pointerPos.x || lastPos.current.y !== pointerPos.y) && dragItems.current) {\n            lastPos.current = pointerPos;\n            dragItems.current = dragItems.current.map(function (n) {\n              return updatePosition(n, pointerPos, snapToGrid, snapGrid, nodeInternals, nodeExtent);\n            });\n            var onDrag = nodeId ? onNodeDrag : wrapSelectionDragFunc(onSelectionDrag);\n            updateNodePositions(dragItems.current, true, true);\n            setDragging(true);\n\n            if (onDrag) {\n              var _getEventHandlerParam3 = getEventHandlerParams({\n                nodeId: nodeId,\n                dragItems: dragItems.current,\n                nodeInternals: nodeInternals\n              }),\n                  _getEventHandlerParam4 = _slicedToArray(_getEventHandlerParam3, 2),\n                  currentNode = _getEventHandlerParam4[0],\n                  nodes = _getEventHandlerParam4[1];\n\n              onDrag(event.sourceEvent, currentNode, nodes);\n            }\n          }\n\n          event.on('end', function (event) {\n            setDragging(false);\n\n            if (dragItems.current) {\n              var _store$getState4 = store.getState(),\n                  _updateNodePositions = _store$getState4.updateNodePositions,\n                  _nodeInternals = _store$getState4.nodeInternals,\n                  onNodeDragStop = _store$getState4.onNodeDragStop,\n                  onSelectionDragStop = _store$getState4.onSelectionDragStop;\n\n              var onStop = nodeId ? onNodeDragStop : wrapSelectionDragFunc(onSelectionDragStop);\n\n              _updateNodePositions(dragItems.current, false, false);\n\n              if (onStop) {\n                var _getEventHandlerParam5 = getEventHandlerParams({\n                  nodeId: nodeId,\n                  dragItems: dragItems.current,\n                  nodeInternals: _nodeInternals\n                }),\n                    _getEventHandlerParam6 = _slicedToArray(_getEventHandlerParam5, 2),\n                    _currentNode = _getEventHandlerParam6[0],\n                    _nodes = _getEventHandlerParam6[1];\n\n                onStop(event.sourceEvent, _currentNode, _nodes);\n              }\n            }\n          });\n        }).filter(function (event) {\n          var target = event.target;\n          var isDraggable = !event.button && (!noDragClassName || !hasSelector(target, \".\".concat(noDragClassName), nodeRef)) && (!handleSelector || hasSelector(target, handleSelector, nodeRef));\n          return isDraggable;\n        });\n        selection.call(dragHandler);\n        return function () {\n          selection.on('.drag', null);\n        };\n      }\n    }\n  }, [nodeRef, disabled, noDragClassName, handleSelector, isSelectable, store, nodeId, selectNodesOnDrag, getPointerPosition]);\n  return dragging;\n}\n\nfunction ownKeys$5(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread$5(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys$5(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys$5(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nvar selector$4 = function selector(s) {\n  return _objectSpread$5({\n    transformString: \"translate(\".concat(s.transform[0], \"px,\").concat(s.transform[1], \"px) scale(\").concat(s.transform[2], \")\"),\n    userSelectionActive: s.userSelectionActive\n  }, getRectOfNodes(Array.from(s.nodeInternals.values()).filter(function (n) {\n    return n.selected;\n  })));\n};\n\nvar bboxSelector = function bboxSelector(s) {\n  var selectedNodes = Array.from(s.nodeInternals.values()).filter(function (n) {\n    return n.selected;\n  });\n  return getRectOfNodes(selectedNodes);\n};\n\nfunction NodesSelection(_ref) {\n  var onSelectionContextMenu = _ref.onSelectionContextMenu,\n      noPanClassName = _ref.noPanClassName;\n  var store = useStoreApi();\n\n  var _useStore = useStore(selector$4, shallow),\n      transformString = _useStore.transformString,\n      userSelectionActive = _useStore.userSelectionActive;\n\n  var _useStore2 = useStore(bboxSelector, shallow),\n      width = _useStore2.width,\n      height = _useStore2.height,\n      left = _useStore2.x,\n      top = _useStore2.y;\n\n  var nodeRef = useRef(null);\n  useDrag({\n    nodeRef: nodeRef\n  });\n\n  if (userSelectionActive || !width || !height) {\n    return null;\n  }\n\n  var onContextMenu = onSelectionContextMenu ? function (event) {\n    var selectedNodes = Array.from(store.getState().nodeInternals.values()).filter(function (n) {\n      return n.selected;\n    });\n    onSelectionContextMenu(event, selectedNodes);\n  } : undefined;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: cc(['react-flow__nodesselection', 'react-flow__container', noPanClassName]),\n    style: {\n      transform: transformString\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    ref: nodeRef,\n    className: \"react-flow__nodesselection-rect\",\n    onContextMenu: onContextMenu,\n    style: {\n      width: width,\n      height: height,\n      top: top,\n      left: left\n    }\n  }));\n}\n\nvar NodesSelection$1 = /*#__PURE__*/memo(NodesSelection);\n\nvar selector$3 = function selector(s) {\n  return s.nodesSelectionActive;\n};\n\nvar FlowRenderer = function FlowRenderer(_ref) {\n  var children = _ref.children,\n      onPaneClick = _ref.onPaneClick,\n      onPaneContextMenu = _ref.onPaneContextMenu,\n      onPaneScroll = _ref.onPaneScroll,\n      deleteKeyCode = _ref.deleteKeyCode,\n      onMove = _ref.onMove,\n      onMoveStart = _ref.onMoveStart,\n      onMoveEnd = _ref.onMoveEnd,\n      selectionKeyCode = _ref.selectionKeyCode,\n      multiSelectionKeyCode = _ref.multiSelectionKeyCode,\n      zoomActivationKeyCode = _ref.zoomActivationKeyCode,\n      elementsSelectable = _ref.elementsSelectable,\n      zoomOnScroll = _ref.zoomOnScroll,\n      zoomOnPinch = _ref.zoomOnPinch,\n      panOnScroll = _ref.panOnScroll,\n      panOnScrollSpeed = _ref.panOnScrollSpeed,\n      panOnScrollMode = _ref.panOnScrollMode,\n      zoomOnDoubleClick = _ref.zoomOnDoubleClick,\n      panOnDrag = _ref.panOnDrag,\n      translateExtent = _ref.translateExtent,\n      minZoom = _ref.minZoom,\n      maxZoom = _ref.maxZoom,\n      defaultZoom = _ref.defaultZoom,\n      defaultPosition = _ref.defaultPosition,\n      preventScrolling = _ref.preventScrolling,\n      onSelectionContextMenu = _ref.onSelectionContextMenu,\n      noWheelClassName = _ref.noWheelClassName,\n      noPanClassName = _ref.noPanClassName;\n  var store = useStoreApi();\n  var nodesSelectionActive = useStore(selector$3);\n  var selectionKeyPressed = useKeyPress(selectionKeyCode);\n  useGlobalKeyHandler({\n    deleteKeyCode: deleteKeyCode,\n    multiSelectionKeyCode: multiSelectionKeyCode\n  });\n\n  var onClick = function onClick(event) {\n    onPaneClick === null || onPaneClick === void 0 ? void 0 : onPaneClick(event);\n    store.getState().resetSelectedElements();\n    store.setState({\n      nodesSelectionActive: false\n    });\n  };\n\n  var onContextMenu = onPaneContextMenu ? function (event) {\n    return onPaneContextMenu(event);\n  } : undefined;\n  var onWheel = onPaneScroll ? function (event) {\n    return onPaneScroll(event);\n  } : undefined;\n  return /*#__PURE__*/React.createElement(ZoomPane, {\n    onMove: onMove,\n    onMoveStart: onMoveStart,\n    onMoveEnd: onMoveEnd,\n    selectionKeyPressed: selectionKeyPressed,\n    elementsSelectable: elementsSelectable,\n    zoomOnScroll: zoomOnScroll,\n    zoomOnPinch: zoomOnPinch,\n    panOnScroll: panOnScroll,\n    panOnScrollSpeed: panOnScrollSpeed,\n    panOnScrollMode: panOnScrollMode,\n    zoomOnDoubleClick: zoomOnDoubleClick,\n    panOnDrag: panOnDrag,\n    translateExtent: translateExtent,\n    minZoom: minZoom,\n    maxZoom: maxZoom,\n    defaultZoom: defaultZoom,\n    defaultPosition: defaultPosition,\n    zoomActivationKeyCode: zoomActivationKeyCode,\n    preventScrolling: preventScrolling,\n    noWheelClassName: noWheelClassName,\n    noPanClassName: noPanClassName\n  }, children, /*#__PURE__*/React.createElement(UserSelection, {\n    selectionKeyPressed: selectionKeyPressed\n  }), nodesSelectionActive && /*#__PURE__*/React.createElement(NodesSelection$1, {\n    onSelectionContextMenu: onSelectionContextMenu,\n    noPanClassName: noPanClassName\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"react-flow__pane react-flow__container\",\n    onClick: onClick,\n    onContextMenu: onContextMenu,\n    onWheel: onWheel\n  }));\n};\n\nFlowRenderer.displayName = 'FlowRenderer';\nvar FlowRenderer$1 = /*#__PURE__*/memo(FlowRenderer);\n\nfunction useVisibleNodes(onlyRenderVisible) {\n  var nodes = useStore(useCallback(function (s) {\n    return onlyRenderVisible ? getNodesInside(s.nodeInternals, {\n      x: 0,\n      y: 0,\n      width: s.width,\n      height: s.height\n    }, s.transform, true) : Array.from(s.nodeInternals.values());\n  }, [onlyRenderVisible]));\n  return nodes;\n}\n\nvar selector$2 = function selector(s) {\n  return {\n    nodesDraggable: s.nodesDraggable,\n    nodesConnectable: s.nodesConnectable,\n    elementsSelectable: s.elementsSelectable,\n    updateNodeDimensions: s.updateNodeDimensions\n  };\n};\n\nvar NodeRenderer = function NodeRenderer(props) {\n  var _useStore = useStore(selector$2, shallow),\n      nodesDraggable = _useStore.nodesDraggable,\n      nodesConnectable = _useStore.nodesConnectable,\n      elementsSelectable = _useStore.elementsSelectable,\n      updateNodeDimensions = _useStore.updateNodeDimensions;\n\n  var nodes = useVisibleNodes(props.onlyRenderVisibleElements);\n  var resizeObserverRef = useRef();\n  var resizeObserver = useMemo(function () {\n    if (typeof ResizeObserver === 'undefined') {\n      return null;\n    }\n\n    var observer = new ResizeObserver(function (entries) {\n      var updates = entries.map(function (entry) {\n        return {\n          id: entry.target.getAttribute('data-id'),\n          nodeElement: entry.target,\n          forceUpdate: true\n        };\n      });\n      updateNodeDimensions(updates);\n    });\n    resizeObserverRef.current = observer;\n    return observer;\n  }, []);\n  useEffect(function () {\n    return function () {\n      var _resizeObserverRef$cu;\n\n      resizeObserverRef === null || resizeObserverRef === void 0 ? void 0 : (_resizeObserverRef$cu = resizeObserverRef.current) === null || _resizeObserverRef$cu === void 0 ? void 0 : _resizeObserverRef$cu.disconnect();\n    };\n  }, []);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"react-flow__nodes react-flow__container\"\n  }, nodes.map(function (node) {\n    var _node$positionAbsolut, _node$positionAbsolut2, _node$positionAbsolut3, _node$positionAbsolut4, _node$internalsSymbol, _node$internalsSymbol2, _node$internalsSymbol3;\n\n    var nodeType = node.type || 'default';\n\n    if (!props.nodeTypes[nodeType]) {\n      // @ts-ignore\n      if (process.env.NODE_ENV === 'development') {\n        console.warn(\"[React Flow]: Node type \\\"\".concat(nodeType, \"\\\" not found. Using fallback type \\\"default\\\". Help: https://reactflow.dev/error#300\"));\n      }\n\n      nodeType = 'default';\n    }\n\n    var NodeComponent = props.nodeTypes[nodeType] || props.nodeTypes[\"default\"];\n    var isDraggable = !!(node.draggable || nodesDraggable && typeof node.draggable === 'undefined');\n    var isSelectable = !!(node.selectable || elementsSelectable && typeof node.selectable === 'undefined');\n    var isConnectable = !!(node.connectable || nodesConnectable && typeof node.connectable === 'undefined');\n    return /*#__PURE__*/React.createElement(NodeComponent, {\n      key: node.id,\n      id: node.id,\n      className: node.className,\n      style: node.style,\n      type: nodeType,\n      data: node.data,\n      sourcePosition: node.sourcePosition || Position.Bottom,\n      targetPosition: node.targetPosition || Position.Top,\n      hidden: node.hidden,\n      xPos: (_node$positionAbsolut = (_node$positionAbsolut2 = node.positionAbsolute) === null || _node$positionAbsolut2 === void 0 ? void 0 : _node$positionAbsolut2.x) !== null && _node$positionAbsolut !== void 0 ? _node$positionAbsolut : 0,\n      yPos: (_node$positionAbsolut3 = (_node$positionAbsolut4 = node.positionAbsolute) === null || _node$positionAbsolut4 === void 0 ? void 0 : _node$positionAbsolut4.y) !== null && _node$positionAbsolut3 !== void 0 ? _node$positionAbsolut3 : 0,\n      selectNodesOnDrag: props.selectNodesOnDrag,\n      onClick: props.onNodeClick,\n      onMouseEnter: props.onNodeMouseEnter,\n      onMouseMove: props.onNodeMouseMove,\n      onMouseLeave: props.onNodeMouseLeave,\n      onContextMenu: props.onNodeContextMenu,\n      onDoubleClick: props.onNodeDoubleClick,\n      selected: !!node.selected,\n      isDraggable: isDraggable,\n      isSelectable: isSelectable,\n      isConnectable: isConnectable,\n      resizeObserver: resizeObserver,\n      dragHandle: node.dragHandle,\n      zIndex: (_node$internalsSymbol = (_node$internalsSymbol2 = node[internalsSymbol]) === null || _node$internalsSymbol2 === void 0 ? void 0 : _node$internalsSymbol2.z) !== null && _node$internalsSymbol !== void 0 ? _node$internalsSymbol : 0,\n      isParent: !!((_node$internalsSymbol3 = node[internalsSymbol]) !== null && _node$internalsSymbol3 !== void 0 && _node$internalsSymbol3.isParent),\n      noDragClassName: props.noDragClassName,\n      noPanClassName: props.noPanClassName,\n      initialized: !!node.width && !!node.height\n    });\n  }));\n};\n\nNodeRenderer.displayName = 'NodeRenderer';\nvar NodeRenderer$1 = /*#__PURE__*/memo(NodeRenderer);\n\nvar _oppositePosition;\n\nfunction ownKeys$4(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread$4(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys$4(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys$4(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nvar oppositePosition = (_oppositePosition = {}, _defineProperty(_oppositePosition, Position.Left, Position.Right), _defineProperty(_oppositePosition, Position.Right, Position.Left), _defineProperty(_oppositePosition, Position.Top, Position.Bottom), _defineProperty(_oppositePosition, Position.Bottom, Position.Top), _oppositePosition);\nvar ConnectionLine = (function (_ref) {\n  var _fromNode$internalsSy, _fromNode$width, _fromNode$height, _fromNode$positionAbs, _fromNode$positionAbs2;\n\n  var connectionNodeId = _ref.connectionNodeId,\n      connectionHandleType = _ref.connectionHandleType,\n      connectionLineStyle = _ref.connectionLineStyle,\n      _ref$connectionLineTy = _ref.connectionLineType,\n      connectionLineType = _ref$connectionLineTy === void 0 ? ConnectionLineType.Bezier : _ref$connectionLineTy,\n      isConnectable = _ref.isConnectable,\n      CustomConnectionLineComponent = _ref.CustomConnectionLineComponent;\n\n  var _useStore = useStore(useCallback(function (s) {\n    return {\n      fromNode: s.nodeInternals.get(connectionNodeId),\n      handleId: s.connectionHandleId,\n      toX: (s.connectionPosition.x - s.transform[0]) / s.transform[2],\n      toY: (s.connectionPosition.y - s.transform[1]) / s.transform[2]\n    };\n  }, [connectionNodeId]), shallow),\n      fromNode = _useStore.fromNode,\n      handleId = _useStore.handleId,\n      toX = _useStore.toX,\n      toY = _useStore.toY;\n\n  var fromHandleBounds = fromNode === null || fromNode === void 0 ? void 0 : (_fromNode$internalsSy = fromNode[internalsSymbol]) === null || _fromNode$internalsSy === void 0 ? void 0 : _fromNode$internalsSy.handleBounds;\n\n  if (!fromNode || !isConnectable || !(fromHandleBounds !== null && fromHandleBounds !== void 0 && fromHandleBounds[connectionHandleType])) {\n    return null;\n  }\n\n  var handleBound = fromHandleBounds[connectionHandleType];\n  var fromHandle = handleId ? handleBound.find(function (d) {\n    return d.id === handleId;\n  }) : handleBound[0];\n  var fromHandleX = fromHandle ? fromHandle.x + fromHandle.width / 2 : ((_fromNode$width = fromNode === null || fromNode === void 0 ? void 0 : fromNode.width) !== null && _fromNode$width !== void 0 ? _fromNode$width : 0) / 2;\n  var fromHandleY = fromHandle ? fromHandle.y + fromHandle.height / 2 : (_fromNode$height = fromNode === null || fromNode === void 0 ? void 0 : fromNode.height) !== null && _fromNode$height !== void 0 ? _fromNode$height : 0;\n  var fromX = ((fromNode === null || fromNode === void 0 ? void 0 : (_fromNode$positionAbs = fromNode.positionAbsolute) === null || _fromNode$positionAbs === void 0 ? void 0 : _fromNode$positionAbs.x) || 0) + fromHandleX;\n  var fromY = ((fromNode === null || fromNode === void 0 ? void 0 : (_fromNode$positionAbs2 = fromNode.positionAbsolute) === null || _fromNode$positionAbs2 === void 0 ? void 0 : _fromNode$positionAbs2.y) || 0) + fromHandleY;\n  var fromPosition = fromHandle === null || fromHandle === void 0 ? void 0 : fromHandle.position;\n\n  if (!fromPosition) {\n    return null;\n  }\n\n  var toPosition = oppositePosition[fromPosition];\n  var sourceX, sourceY, sourcePosition, targetX, targetY, targetPosition;\n\n  switch (connectionHandleType) {\n    case 'source':\n      {\n        sourceX = fromX;\n        sourceY = fromY;\n        sourcePosition = fromPosition;\n        targetX = toX;\n        targetY = toY;\n        targetPosition = toPosition;\n      }\n      break;\n\n    case 'target':\n      {\n        sourceX = toX;\n        sourceY = toY;\n        sourcePosition = toPosition;\n        targetX = fromX;\n        targetY = fromY;\n        targetPosition = fromPosition;\n      }\n      break;\n  }\n\n  if (CustomConnectionLineComponent) {\n    return /*#__PURE__*/React.createElement(\"g\", {\n      className: \"react-flow__connection\"\n    }, /*#__PURE__*/React.createElement(CustomConnectionLineComponent, {\n      connectionLineType: connectionLineType,\n      connectionLineStyle: connectionLineStyle,\n      fromNode: fromNode,\n      fromHandle: fromHandle,\n      fromX: fromX,\n      fromY: fromY,\n      toX: toX,\n      toY: toY,\n      fromPosition: fromPosition,\n      toPosition: toPosition,\n      // remove in v11\n      sourcePosition: sourcePosition,\n      targetPosition: targetPosition,\n      sourceNode: fromNode,\n      sourceHandle: fromHandle,\n      targetX: targetX,\n      targetY: targetY,\n      sourceX: sourceX,\n      sourceY: sourceY\n    }));\n  }\n\n  var dAttr = '';\n  var pathParams = {\n    sourceX: sourceX,\n    sourceY: sourceY,\n    sourcePosition: sourcePosition,\n    targetX: targetX,\n    targetY: targetY,\n    targetPosition: targetPosition\n  };\n\n  if (connectionLineType === ConnectionLineType.Bezier) {\n    // we assume the destination position is opposite to the source position\n    dAttr = getBezierPath(pathParams);\n  } else if (connectionLineType === ConnectionLineType.Step) {\n    dAttr = getSmoothStepPath(_objectSpread$4(_objectSpread$4({}, pathParams), {}, {\n      borderRadius: 0\n    }));\n  } else if (connectionLineType === ConnectionLineType.SmoothStep) {\n    dAttr = getSmoothStepPath(pathParams);\n  } else if (connectionLineType === ConnectionLineType.SimpleBezier) {\n    dAttr = getSimpleBezierPath(pathParams);\n  } else {\n    dAttr = \"M\".concat(sourceX, \",\").concat(sourceY, \" \").concat(targetX, \",\").concat(targetY);\n  }\n\n  return /*#__PURE__*/React.createElement(\"g\", {\n    className: \"react-flow__connection\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: dAttr,\n    className: \"react-flow__connection-path\",\n    style: connectionLineStyle\n  }));\n});\n\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, _typeof(obj);\n}\n\nvar _MarkerSymbols;\n\nvar ArrowSymbol = function ArrowSymbol(_ref) {\n  var _ref$color = _ref.color,\n      color = _ref$color === void 0 ? 'none' : _ref$color,\n      _ref$strokeWidth = _ref.strokeWidth,\n      strokeWidth = _ref$strokeWidth === void 0 ? 1 : _ref$strokeWidth;\n  return /*#__PURE__*/React.createElement(\"polyline\", {\n    stroke: color,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    strokeWidth: strokeWidth,\n    fill: \"none\",\n    points: \"-5,-4 0,0 -5,4\"\n  });\n};\n\nvar ArrowClosedSymbol = function ArrowClosedSymbol(_ref2) {\n  var _ref2$color = _ref2.color,\n      color = _ref2$color === void 0 ? 'none' : _ref2$color,\n      _ref2$strokeWidth = _ref2.strokeWidth,\n      strokeWidth = _ref2$strokeWidth === void 0 ? 1 : _ref2$strokeWidth;\n  return /*#__PURE__*/React.createElement(\"polyline\", {\n    stroke: color,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    strokeWidth: strokeWidth,\n    fill: color,\n    points: \"-5,-4 0,0 -5,4 -5,-4\"\n  });\n};\n\nvar MarkerSymbols = (_MarkerSymbols = {}, _defineProperty(_MarkerSymbols, MarkerType.Arrow, ArrowSymbol), _defineProperty(_MarkerSymbols, MarkerType.ArrowClosed, ArrowClosedSymbol), _MarkerSymbols);\nfunction useMarkerSymbol(type) {\n  var symbol = useMemo(function () {\n    var symbolExists = MarkerSymbols.hasOwnProperty(type);\n\n    if (!symbolExists) {\n      // @ts-ignore\n      if (process.env.NODE_ENV === 'development') {\n        console.warn(\"[React Flow]: Marker type \\\"\".concat(type, \"\\\" doesn't exist. Help: https://reactflow.dev/error#900\"));\n      }\n\n      return function () {\n        return null;\n      };\n    }\n\n    return MarkerSymbols[type];\n  }, [type]);\n  return symbol;\n}\n\nfunction ownKeys$3(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread$3(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys$3(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys$3(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nvar Marker = function Marker(_ref) {\n  var id = _ref.id,\n      type = _ref.type,\n      color = _ref.color,\n      _ref$width = _ref.width,\n      width = _ref$width === void 0 ? 12.5 : _ref$width,\n      _ref$height = _ref.height,\n      height = _ref$height === void 0 ? 12.5 : _ref$height,\n      _ref$markerUnits = _ref.markerUnits,\n      markerUnits = _ref$markerUnits === void 0 ? 'strokeWidth' : _ref$markerUnits,\n      strokeWidth = _ref.strokeWidth,\n      _ref$orient = _ref.orient,\n      orient = _ref$orient === void 0 ? 'auto' : _ref$orient;\n\n  var _Symbol = useMarkerSymbol(type);\n\n  return /*#__PURE__*/React.createElement(\"marker\", {\n    className: \"react-flow__arrowhead\",\n    id: id,\n    markerWidth: \"\".concat(width),\n    markerHeight: \"\".concat(height),\n    viewBox: \"-10 -10 20 20\",\n    markerUnits: markerUnits,\n    orient: orient,\n    refX: \"0\",\n    refY: \"0\"\n  }, /*#__PURE__*/React.createElement(_Symbol, {\n    color: color,\n    strokeWidth: strokeWidth\n  }));\n};\n\nvar markerSelector = function markerSelector(_ref2) {\n  var defaultColor = _ref2.defaultColor,\n      rfId = _ref2.rfId;\n  return function (s) {\n    var ids = [];\n    return s.edges.reduce(function (markers, edge) {\n      [edge.markerStart, edge.markerEnd].forEach(function (marker) {\n        if (marker && _typeof(marker) === 'object') {\n          var markerId = getMarkerId(marker, rfId);\n\n          if (!ids.includes(markerId)) {\n            markers.push(_objectSpread$3({\n              id: markerId,\n              color: marker.color || defaultColor\n            }, marker));\n            ids.push(markerId);\n          }\n        }\n      });\n      return markers;\n    }, []).sort(function (a, b) {\n      return a.id.localeCompare(b.id);\n    });\n  };\n}; // when you have multiple flows on a page and you hide the first one, the other ones have no markers anymore\n// when they do have markers with the same ids. To prevent this the user can pass a unique id to the react flow wrapper\n// that we can then use for creating our unique marker ids\n\n\nvar MarkerDefinitions = function MarkerDefinitions(_ref3) {\n  var defaultColor = _ref3.defaultColor,\n      rfId = _ref3.rfId;\n  var markers = useStore(useCallback(markerSelector({\n    defaultColor: defaultColor,\n    rfId: rfId\n  }), [defaultColor, rfId]), // the id includes all marker options, so we just need to look at that part of the marker\n  function (a, b) {\n    return !(a.length !== b.length || a.some(function (m, i) {\n      return m.id !== b[i].id;\n    }));\n  });\n  return /*#__PURE__*/React.createElement(\"defs\", null, markers.map(function (marker) {\n    return /*#__PURE__*/React.createElement(Marker, {\n      id: marker.id,\n      key: marker.id,\n      type: marker.type,\n      color: marker.color,\n      width: marker.width,\n      height: marker.height,\n      markerUnits: marker.markerUnits,\n      strokeWidth: marker.strokeWidth,\n      orient: marker.orient\n    });\n  }));\n};\n\nMarkerDefinitions.displayName = 'MarkerDefinitions';\nvar MarkerDefinitions$1 = /*#__PURE__*/memo(MarkerDefinitions);\n\nvar defaultEdgeTree = [{\n  level: 0,\n  isMaxLevel: true,\n  edges: []\n}];\n\nfunction groupEdgesByZLevel(edges, nodeInternals) {\n  var elevateEdgesOnSelect = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n  var maxLevel = -1;\n  var levelLookup = edges.reduce(function (tree, edge) {\n    var hasZIndex = isNumeric(edge.zIndex);\n    var z = hasZIndex ? edge.zIndex : 0;\n\n    if (elevateEdgesOnSelect) {\n      var _nodeInternals$get, _nodeInternals$get$in, _nodeInternals$get2, _nodeInternals$get2$i;\n\n      z = hasZIndex ? edge.zIndex : Math.max(((_nodeInternals$get = nodeInternals.get(edge.source)) === null || _nodeInternals$get === void 0 ? void 0 : (_nodeInternals$get$in = _nodeInternals$get[internalsSymbol]) === null || _nodeInternals$get$in === void 0 ? void 0 : _nodeInternals$get$in.z) || 0, ((_nodeInternals$get2 = nodeInternals.get(edge.target)) === null || _nodeInternals$get2 === void 0 ? void 0 : (_nodeInternals$get2$i = _nodeInternals$get2[internalsSymbol]) === null || _nodeInternals$get2$i === void 0 ? void 0 : _nodeInternals$get2$i.z) || 0);\n    }\n\n    if (tree[z]) {\n      tree[z].push(edge);\n    } else {\n      tree[z] = [edge];\n    }\n\n    maxLevel = z > maxLevel ? z : maxLevel;\n    return tree;\n  }, {});\n  var edgeTree = Object.entries(levelLookup).map(function (_ref) {\n    var _ref2 = _slicedToArray(_ref, 2),\n        key = _ref2[0],\n        edges = _ref2[1];\n\n    var level = +key;\n    return {\n      edges: edges,\n      level: level,\n      isMaxLevel: level === maxLevel\n    };\n  });\n\n  if (edgeTree.length === 0) {\n    return defaultEdgeTree;\n  }\n\n  return edgeTree;\n}\n\nfunction useVisibleEdges(onlyRenderVisible, nodeInternals, elevateEdgesOnSelect) {\n  var edges = useStore(useCallback(function (s) {\n    if (!onlyRenderVisible) {\n      return s.edges;\n    }\n\n    return s.edges.filter(function (e) {\n      var sourceNode = nodeInternals.get(e.source);\n      var targetNode = nodeInternals.get(e.target);\n      return (sourceNode === null || sourceNode === void 0 ? void 0 : sourceNode.width) && (sourceNode === null || sourceNode === void 0 ? void 0 : sourceNode.height) && (targetNode === null || targetNode === void 0 ? void 0 : targetNode.width) && (targetNode === null || targetNode === void 0 ? void 0 : targetNode.height) && isEdgeVisible({\n        sourcePos: sourceNode.positionAbsolute || {\n          x: 0,\n          y: 0\n        },\n        targetPos: targetNode.positionAbsolute || {\n          x: 0,\n          y: 0\n        },\n        sourceWidth: sourceNode.width,\n        sourceHeight: sourceNode.height,\n        targetWidth: targetNode.width,\n        targetHeight: targetNode.height,\n        width: s.width,\n        height: s.height,\n        transform: s.transform\n      });\n    });\n  }, [onlyRenderVisible, nodeInternals]));\n  return groupEdgesByZLevel(edges, nodeInternals, elevateEdgesOnSelect);\n}\n\nvar selector$1 = function selector(s) {\n  return {\n    connectionNodeId: s.connectionNodeId,\n    connectionHandleType: s.connectionHandleType,\n    nodesConnectable: s.nodesConnectable,\n    elementsSelectable: s.elementsSelectable,\n    width: s.width,\n    height: s.height,\n    connectionMode: s.connectionMode,\n    nodeInternals: s.nodeInternals\n  };\n};\n\nvar EdgeRenderer = function EdgeRenderer(props) {\n  var _useStore = useStore(selector$1, shallow),\n      connectionNodeId = _useStore.connectionNodeId,\n      connectionHandleType = _useStore.connectionHandleType,\n      nodesConnectable = _useStore.nodesConnectable,\n      elementsSelectable = _useStore.elementsSelectable,\n      width = _useStore.width,\n      height = _useStore.height,\n      connectionMode = _useStore.connectionMode,\n      nodeInternals = _useStore.nodeInternals;\n\n  var edgeTree = useVisibleEdges(props.onlyRenderVisibleElements, nodeInternals, props.elevateEdgesOnSelect);\n\n  if (!width) {\n    return null;\n  }\n\n  var connectionLineType = props.connectionLineType,\n      defaultMarkerColor = props.defaultMarkerColor,\n      connectionLineStyle = props.connectionLineStyle,\n      connectionLineComponent = props.connectionLineComponent,\n      connectionLineContainerStyle = props.connectionLineContainerStyle;\n  var renderConnectionLine = connectionNodeId && connectionHandleType;\n  return /*#__PURE__*/React.createElement(React.Fragment, null, edgeTree.map(function (_ref) {\n    var level = _ref.level,\n        edges = _ref.edges,\n        isMaxLevel = _ref.isMaxLevel;\n    return /*#__PURE__*/React.createElement(\"svg\", {\n      key: level,\n      style: {\n        zIndex: level\n      },\n      width: width,\n      height: height,\n      className: \"react-flow__edges react-flow__container\"\n    }, isMaxLevel && /*#__PURE__*/React.createElement(MarkerDefinitions$1, {\n      defaultColor: defaultMarkerColor,\n      rfId: props.rfId\n    }), /*#__PURE__*/React.createElement(\"g\", null, edges.map(function (edge) {\n      var _getNodeData = getNodeData(nodeInternals, edge.source),\n          _getNodeData2 = _slicedToArray(_getNodeData, 3),\n          sourceNodeRect = _getNodeData2[0],\n          sourceHandleBounds = _getNodeData2[1],\n          sourceIsValid = _getNodeData2[2];\n\n      var _getNodeData3 = getNodeData(nodeInternals, edge.target),\n          _getNodeData4 = _slicedToArray(_getNodeData3, 3),\n          targetNodeRect = _getNodeData4[0],\n          targetHandleBounds = _getNodeData4[1],\n          targetIsValid = _getNodeData4[2];\n\n      if (!sourceIsValid || !targetIsValid) {\n        return null;\n      }\n\n      var edgeType = edge.type || 'default';\n\n      if (!props.edgeTypes[edgeType]) {\n        console.warn(\"[React Flow]: Edge type \\\"\".concat(edgeType, \"\\\" not found. Using fallback type \\\"default\\\". Help: https://reactflow.dev/error#300\"));\n        edgeType = 'default';\n      }\n\n      var EdgeComponent = props.edgeTypes[edgeType] || props.edgeTypes[\"default\"]; // when connection type is loose we can define all handles as sources\n\n      var targetNodeHandles = connectionMode === ConnectionMode.Strict ? targetHandleBounds.target : targetHandleBounds.target || targetHandleBounds.source;\n      var sourceHandle = getHandle(sourceHandleBounds.source, edge.sourceHandle || null);\n      var targetHandle = getHandle(targetNodeHandles, edge.targetHandle || null);\n      var sourcePosition = (sourceHandle === null || sourceHandle === void 0 ? void 0 : sourceHandle.position) || Position.Bottom;\n      var targetPosition = (targetHandle === null || targetHandle === void 0 ? void 0 : targetHandle.position) || Position.Top;\n\n      if (!sourceHandle) {\n        // @ts-ignore\n        if (process.env.NODE_ENV === 'development') {\n          console.warn(\"[React Flow]: Couldn't create edge for source handle id: \".concat(edge.sourceHandle, \"; edge id: \").concat(edge.id, \". Help: https://reactflow.dev/error#800\"));\n        }\n\n        return null;\n      }\n\n      if (!targetHandle) {\n        // @ts-ignore\n        if (process.env.NODE_ENV === 'development') {\n          console.warn(\"[React Flow]: Couldn't create edge for target handle id: \".concat(edge.targetHandle, \"; edge id: \").concat(edge.id, \". Help: https://reactflow.dev/error#800\"));\n        }\n\n        return null;\n      }\n\n      var _getEdgePositions = getEdgePositions(sourceNodeRect, sourceHandle, sourcePosition, targetNodeRect, targetHandle, targetPosition),\n          sourceX = _getEdgePositions.sourceX,\n          sourceY = _getEdgePositions.sourceY,\n          targetX = _getEdgePositions.targetX,\n          targetY = _getEdgePositions.targetY;\n\n      return /*#__PURE__*/React.createElement(EdgeComponent, {\n        key: edge.id,\n        id: edge.id,\n        className: cc([edge.className, props.noPanClassName]),\n        type: edgeType,\n        data: edge.data,\n        selected: !!edge.selected,\n        animated: !!edge.animated,\n        hidden: !!edge.hidden,\n        label: edge.label,\n        labelStyle: edge.labelStyle,\n        labelShowBg: edge.labelShowBg,\n        labelBgStyle: edge.labelBgStyle,\n        labelBgPadding: edge.labelBgPadding,\n        labelBgBorderRadius: edge.labelBgBorderRadius,\n        style: edge.style,\n        source: edge.source,\n        target: edge.target,\n        sourceHandleId: edge.sourceHandle,\n        targetHandleId: edge.targetHandle,\n        markerEnd: edge.markerEnd,\n        markerStart: edge.markerStart,\n        sourceX: sourceX,\n        sourceY: sourceY,\n        targetX: targetX,\n        targetY: targetY,\n        sourcePosition: sourcePosition,\n        targetPosition: targetPosition,\n        elementsSelectable: elementsSelectable,\n        onEdgeUpdate: props.onEdgeUpdate,\n        onContextMenu: props.onEdgeContextMenu,\n        onMouseEnter: props.onEdgeMouseEnter,\n        onMouseMove: props.onEdgeMouseMove,\n        onMouseLeave: props.onEdgeMouseLeave,\n        onClick: props.onEdgeClick,\n        edgeUpdaterRadius: props.edgeUpdaterRadius,\n        onEdgeDoubleClick: props.onEdgeDoubleClick,\n        onEdgeUpdateStart: props.onEdgeUpdateStart,\n        onEdgeUpdateEnd: props.onEdgeUpdateEnd,\n        rfId: props.rfId\n      });\n    })));\n  }), renderConnectionLine && /*#__PURE__*/React.createElement(\"svg\", {\n    style: connectionLineContainerStyle,\n    width: width,\n    height: height,\n    className: \"react-flow__edges react-flow__connectionline react-flow__container\"\n  }, /*#__PURE__*/React.createElement(ConnectionLine, {\n    connectionNodeId: connectionNodeId,\n    connectionHandleType: connectionHandleType,\n    connectionLineStyle: connectionLineStyle,\n    connectionLineType: connectionLineType,\n    isConnectable: nodesConnectable,\n    CustomConnectionLineComponent: connectionLineComponent\n  })));\n};\n\nEdgeRenderer.displayName = 'EdgeRenderer';\nvar EdgeRenderer$1 = /*#__PURE__*/memo(EdgeRenderer);\n\nvar selector = function selector(s) {\n  return \"translate(\".concat(s.transform[0], \"px,\").concat(s.transform[1], \"px) scale(\").concat(s.transform[2], \")\");\n};\n\nfunction Viewport(_ref) {\n  var children = _ref.children;\n  var transform = useStore(selector);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"react-flow__viewport react-flow__container\",\n    style: {\n      transform: transform\n    }\n  }, children);\n}\n\nfunction useOnInitHandler(onInit) {\n  var ReactFlowInstance = useReactFlow();\n  var isInitialized = useRef(false);\n  useEffect(function () {\n    if (!isInitialized.current && ReactFlowInstance.viewportInitialized && onInit) {\n      setTimeout(function () {\n        return onInit(ReactFlowInstance);\n      }, 1);\n      isInitialized.current = true;\n    }\n  }, [onInit, ReactFlowInstance.viewportInitialized]);\n}\n\nvar GraphView = function GraphView(_ref) {\n  var nodeTypes = _ref.nodeTypes,\n      edgeTypes = _ref.edgeTypes,\n      onMove = _ref.onMove,\n      onMoveStart = _ref.onMoveStart,\n      onMoveEnd = _ref.onMoveEnd,\n      onInit = _ref.onInit,\n      onNodeClick = _ref.onNodeClick,\n      onEdgeClick = _ref.onEdgeClick,\n      onNodeDoubleClick = _ref.onNodeDoubleClick,\n      onEdgeDoubleClick = _ref.onEdgeDoubleClick,\n      onNodeMouseEnter = _ref.onNodeMouseEnter,\n      onNodeMouseMove = _ref.onNodeMouseMove,\n      onNodeMouseLeave = _ref.onNodeMouseLeave,\n      onNodeContextMenu = _ref.onNodeContextMenu,\n      onSelectionContextMenu = _ref.onSelectionContextMenu,\n      connectionLineType = _ref.connectionLineType,\n      connectionLineStyle = _ref.connectionLineStyle,\n      connectionLineComponent = _ref.connectionLineComponent,\n      connectionLineContainerStyle = _ref.connectionLineContainerStyle,\n      selectionKeyCode = _ref.selectionKeyCode,\n      multiSelectionKeyCode = _ref.multiSelectionKeyCode,\n      zoomActivationKeyCode = _ref.zoomActivationKeyCode,\n      deleteKeyCode = _ref.deleteKeyCode,\n      onlyRenderVisibleElements = _ref.onlyRenderVisibleElements,\n      elementsSelectable = _ref.elementsSelectable,\n      selectNodesOnDrag = _ref.selectNodesOnDrag,\n      translateExtent = _ref.translateExtent,\n      minZoom = _ref.minZoom,\n      maxZoom = _ref.maxZoom,\n      defaultZoom = _ref.defaultZoom,\n      defaultPosition = _ref.defaultPosition,\n      preventScrolling = _ref.preventScrolling,\n      defaultMarkerColor = _ref.defaultMarkerColor,\n      zoomOnScroll = _ref.zoomOnScroll,\n      zoomOnPinch = _ref.zoomOnPinch,\n      panOnScroll = _ref.panOnScroll,\n      panOnScrollSpeed = _ref.panOnScrollSpeed,\n      panOnScrollMode = _ref.panOnScrollMode,\n      zoomOnDoubleClick = _ref.zoomOnDoubleClick,\n      panOnDrag = _ref.panOnDrag,\n      onPaneClick = _ref.onPaneClick,\n      onPaneScroll = _ref.onPaneScroll,\n      onPaneContextMenu = _ref.onPaneContextMenu,\n      onEdgeUpdate = _ref.onEdgeUpdate,\n      onEdgeContextMenu = _ref.onEdgeContextMenu,\n      onEdgeMouseEnter = _ref.onEdgeMouseEnter,\n      onEdgeMouseMove = _ref.onEdgeMouseMove,\n      onEdgeMouseLeave = _ref.onEdgeMouseLeave,\n      edgeUpdaterRadius = _ref.edgeUpdaterRadius,\n      onEdgeUpdateStart = _ref.onEdgeUpdateStart,\n      onEdgeUpdateEnd = _ref.onEdgeUpdateEnd,\n      noDragClassName = _ref.noDragClassName,\n      noWheelClassName = _ref.noWheelClassName,\n      noPanClassName = _ref.noPanClassName,\n      elevateEdgesOnSelect = _ref.elevateEdgesOnSelect,\n      id = _ref.id;\n  useOnInitHandler(onInit);\n  return /*#__PURE__*/React.createElement(FlowRenderer$1, {\n    onPaneClick: onPaneClick,\n    onPaneContextMenu: onPaneContextMenu,\n    onPaneScroll: onPaneScroll,\n    deleteKeyCode: deleteKeyCode,\n    selectionKeyCode: selectionKeyCode,\n    multiSelectionKeyCode: multiSelectionKeyCode,\n    zoomActivationKeyCode: zoomActivationKeyCode,\n    elementsSelectable: elementsSelectable,\n    onMove: onMove,\n    onMoveStart: onMoveStart,\n    onMoveEnd: onMoveEnd,\n    zoomOnScroll: zoomOnScroll,\n    zoomOnPinch: zoomOnPinch,\n    zoomOnDoubleClick: zoomOnDoubleClick,\n    panOnScroll: panOnScroll,\n    panOnScrollSpeed: panOnScrollSpeed,\n    panOnScrollMode: panOnScrollMode,\n    panOnDrag: panOnDrag,\n    translateExtent: translateExtent,\n    minZoom: minZoom,\n    maxZoom: maxZoom,\n    defaultZoom: defaultZoom,\n    defaultPosition: defaultPosition,\n    onSelectionContextMenu: onSelectionContextMenu,\n    preventScrolling: preventScrolling,\n    noDragClassName: noDragClassName,\n    noWheelClassName: noWheelClassName,\n    noPanClassName: noPanClassName\n  }, /*#__PURE__*/React.createElement(Viewport, null, /*#__PURE__*/React.createElement(EdgeRenderer$1, {\n    edgeTypes: edgeTypes,\n    onEdgeClick: onEdgeClick,\n    onEdgeDoubleClick: onEdgeDoubleClick,\n    connectionLineType: connectionLineType,\n    connectionLineStyle: connectionLineStyle,\n    connectionLineComponent: connectionLineComponent,\n    connectionLineContainerStyle: connectionLineContainerStyle,\n    onEdgeUpdate: onEdgeUpdate,\n    onlyRenderVisibleElements: onlyRenderVisibleElements,\n    onEdgeContextMenu: onEdgeContextMenu,\n    onEdgeMouseEnter: onEdgeMouseEnter,\n    onEdgeMouseMove: onEdgeMouseMove,\n    onEdgeMouseLeave: onEdgeMouseLeave,\n    onEdgeUpdateStart: onEdgeUpdateStart,\n    onEdgeUpdateEnd: onEdgeUpdateEnd,\n    edgeUpdaterRadius: edgeUpdaterRadius,\n    defaultMarkerColor: defaultMarkerColor,\n    noPanClassName: noPanClassName,\n    elevateEdgesOnSelect: !!elevateEdgesOnSelect,\n    rfId: id\n  }), /*#__PURE__*/React.createElement(NodeRenderer$1, {\n    nodeTypes: nodeTypes,\n    onNodeClick: onNodeClick,\n    onNodeDoubleClick: onNodeDoubleClick,\n    onNodeMouseEnter: onNodeMouseEnter,\n    onNodeMouseMove: onNodeMouseMove,\n    onNodeMouseLeave: onNodeMouseLeave,\n    onNodeContextMenu: onNodeContextMenu,\n    selectNodesOnDrag: selectNodesOnDrag,\n    onlyRenderVisibleElements: onlyRenderVisibleElements,\n    noPanClassName: noPanClassName,\n    noDragClassName: noDragClassName\n  })));\n};\n\nGraphView.displayName = 'GraphView';\nvar GraphView$1 = /*#__PURE__*/memo(GraphView);\n\nvar GroupNode = function GroupNode() {\n  return null;\n};\n\nGroupNode.displayName = 'GroupNode';\n\nfunction ownKeys$2(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread$2(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys$2(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys$2(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nvar wrapNode = (function (NodeComponent) {\n  var NodeWrapper = function NodeWrapper(_ref) {\n    var id = _ref.id,\n        type = _ref.type,\n        data = _ref.data,\n        xPos = _ref.xPos,\n        yPos = _ref.yPos,\n        selected = _ref.selected,\n        onClick = _ref.onClick,\n        onMouseEnter = _ref.onMouseEnter,\n        onMouseMove = _ref.onMouseMove,\n        onMouseLeave = _ref.onMouseLeave,\n        onContextMenu = _ref.onContextMenu,\n        onDoubleClick = _ref.onDoubleClick,\n        style = _ref.style,\n        className = _ref.className,\n        isDraggable = _ref.isDraggable,\n        isSelectable = _ref.isSelectable,\n        isConnectable = _ref.isConnectable,\n        selectNodesOnDrag = _ref.selectNodesOnDrag,\n        sourcePosition = _ref.sourcePosition,\n        targetPosition = _ref.targetPosition,\n        hidden = _ref.hidden,\n        resizeObserver = _ref.resizeObserver,\n        dragHandle = _ref.dragHandle,\n        zIndex = _ref.zIndex,\n        isParent = _ref.isParent,\n        noPanClassName = _ref.noPanClassName,\n        noDragClassName = _ref.noDragClassName,\n        initialized = _ref.initialized;\n    var store = useStoreApi();\n    var nodeRef = useRef(null);\n    var prevSourcePosition = useRef(sourcePosition);\n    var prevTargetPosition = useRef(targetPosition);\n    var prevType = useRef(type);\n    var hasPointerEvents = isSelectable || isDraggable || onClick || onMouseEnter || onMouseMove || onMouseLeave;\n    var onMouseEnterHandler = getMouseHandler$1(id, store.getState, onMouseEnter);\n    var onMouseMoveHandler = getMouseHandler$1(id, store.getState, onMouseMove);\n    var onMouseLeaveHandler = getMouseHandler$1(id, store.getState, onMouseLeave);\n    var onContextMenuHandler = getMouseHandler$1(id, store.getState, onContextMenu);\n    var onDoubleClickHandler = getMouseHandler$1(id, store.getState, onDoubleClick);\n\n    var onSelectNodeHandler = function onSelectNodeHandler(event) {\n      if (isSelectable && (!selectNodesOnDrag || !isDraggable)) {\n        // this handler gets called within the drag start event when selectNodesOnDrag=true\n        handleNodeClick({\n          id: id,\n          store: store\n        });\n      }\n\n      if (onClick) {\n        var node = store.getState().nodeInternals.get(id);\n        onClick(event, _objectSpread$2({}, node));\n      }\n    };\n\n    useEffect(function () {\n      if (nodeRef.current && !hidden) {\n        var currNode = nodeRef.current;\n        resizeObserver === null || resizeObserver === void 0 ? void 0 : resizeObserver.observe(currNode);\n        return function () {\n          return resizeObserver === null || resizeObserver === void 0 ? void 0 : resizeObserver.unobserve(currNode);\n        };\n      }\n    }, [hidden]);\n    useEffect(function () {\n      // when the user programmatically changes the source or handle position, we re-initialize the node\n      var typeChanged = prevType.current !== type;\n      var sourcePosChanged = prevSourcePosition.current !== sourcePosition;\n      var targetPosChanged = prevTargetPosition.current !== targetPosition;\n\n      if (nodeRef.current && (typeChanged || sourcePosChanged || targetPosChanged)) {\n        if (typeChanged) {\n          prevType.current = type;\n        }\n\n        if (sourcePosChanged) {\n          prevSourcePosition.current = sourcePosition;\n        }\n\n        if (targetPosChanged) {\n          prevTargetPosition.current = targetPosition;\n        }\n\n        store.getState().updateNodeDimensions([{\n          id: id,\n          nodeElement: nodeRef.current,\n          forceUpdate: true\n        }]);\n      }\n    }, [id, type, sourcePosition, targetPosition]);\n    var dragging = useDrag({\n      nodeRef: nodeRef,\n      disabled: hidden || !isDraggable,\n      noDragClassName: noDragClassName,\n      handleSelector: dragHandle,\n      nodeId: id,\n      isSelectable: isSelectable,\n      selectNodesOnDrag: selectNodesOnDrag\n    });\n\n    if (hidden) {\n      return null;\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: cc(['react-flow__node', \"react-flow__node-\".concat(type), noPanClassName, className, {\n        selected: selected,\n        selectable: isSelectable,\n        parent: isParent\n      }]),\n      ref: nodeRef,\n      style: _objectSpread$2({\n        zIndex: zIndex,\n        transform: \"translate(\".concat(xPos, \"px,\").concat(yPos, \"px)\"),\n        pointerEvents: hasPointerEvents ? 'all' : 'none',\n        visibility: initialized ? 'visible' : 'hidden'\n      }, style),\n      onMouseEnter: onMouseEnterHandler,\n      onMouseMove: onMouseMoveHandler,\n      onMouseLeave: onMouseLeaveHandler,\n      onContextMenu: onContextMenuHandler,\n      onClick: onSelectNodeHandler,\n      onDoubleClick: onDoubleClickHandler,\n      \"data-testid\": \"rf__node-\".concat(id),\n      \"data-id\": id\n    }, /*#__PURE__*/React.createElement(Provider, {\n      value: id\n    }, /*#__PURE__*/React.createElement(NodeComponent, {\n      id: id,\n      data: data,\n      type: type,\n      xPos: xPos,\n      yPos: yPos,\n      selected: selected,\n      isConnectable: isConnectable,\n      sourcePosition: sourcePosition,\n      targetPosition: targetPosition,\n      dragging: dragging,\n      dragHandle: dragHandle,\n      zIndex: zIndex\n    })));\n  };\n\n  NodeWrapper.displayName = 'NodeWrapper';\n  return /*#__PURE__*/memo(NodeWrapper);\n});\n\nfunction ownKeys$1(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread$1(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys$1(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys$1(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nfunction createNodeTypes(nodeTypes) {\n  var standardTypes = {\n    input: wrapNode(nodeTypes.input || InputNode$1),\n    \"default\": wrapNode(nodeTypes[\"default\"] || DefaultNode$1),\n    output: wrapNode(nodeTypes.output || OutputNode$1),\n    group: wrapNode(nodeTypes.group || GroupNode)\n  };\n  var wrappedTypes = {};\n  var specialTypes = Object.keys(nodeTypes).filter(function (k) {\n    return !['input', 'default', 'output', 'group'].includes(k);\n  }).reduce(function (res, key) {\n    res[key] = wrapNode(nodeTypes[key] || DefaultNode$1);\n    return res;\n  }, wrappedTypes);\n  return _objectSpread$1(_objectSpread$1({}, standardTypes), specialTypes);\n}\n\nfunction useNodeOrEdgeTypes(nodeOrEdgeTypes, createTypes) {\n  var typesKeysRef = useRef(null);\n  var typesParsed = useMemo(function () {\n    // @ts-ignore\n    if (process.env.NODE_ENV === 'development') {\n      var typeKeys = Object.keys(nodeOrEdgeTypes);\n\n      if (shallow(typesKeysRef.current, typeKeys)) {\n        console.warn(\"[React Flow]: It looks like you have created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them. Help: https://reactflow.dev/error#200\");\n      }\n\n      typesKeysRef.current = typeKeys;\n    }\n\n    return createTypes(nodeOrEdgeTypes);\n  }, [nodeOrEdgeTypes]);\n  return typesParsed;\n}\nfunction injectStyle(css) {\n  if (!css || typeof document === 'undefined') return;\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  head.appendChild(style);\n  style.appendChild(document.createTextNode(css));\n}\n\nvar Wrapper = function Wrapper(_ref) {\n  var children = _ref.children;\n  var isWrapped = true;\n\n  try {\n    useStoreApi();\n  } catch (e) {\n    isWrapped = false;\n  }\n\n  if (isWrapped) {\n    // we need to wrap it with a fragment because it's not allowed for children to be a ReactNode\n    // https://github.com/DefinitelyTyped/DefinitelyTyped/issues/18051\n    return /*#__PURE__*/React.createElement(React.Fragment, null, children);\n  }\n\n  return /*#__PURE__*/React.createElement(Provider$1, {\n    createStore: createStore\n  }, children);\n};\n\nWrapper.displayName = 'ReactFlowWrapper';\n\nvar _excluded = [\"nodes\", \"edges\", \"defaultNodes\", \"defaultEdges\", \"className\", \"nodeTypes\", \"edgeTypes\", \"onNodeClick\", \"onEdgeClick\", \"onInit\", \"onMove\", \"onMoveStart\", \"onMoveEnd\", \"onConnect\", \"onConnectStart\", \"onConnectStop\", \"onConnectEnd\", \"onClickConnectStart\", \"onClickConnectStop\", \"onClickConnectEnd\", \"onNodeMouseEnter\", \"onNodeMouseMove\", \"onNodeMouseLeave\", \"onNodeContextMenu\", \"onNodeDoubleClick\", \"onNodeDragStart\", \"onNodeDrag\", \"onNodeDragStop\", \"onNodesDelete\", \"onEdgesDelete\", \"onSelectionChange\", \"onSelectionDragStart\", \"onSelectionDrag\", \"onSelectionDragStop\", \"onSelectionContextMenu\", \"connectionMode\", \"connectionLineType\", \"connectionLineStyle\", \"connectionLineComponent\", \"connectionLineContainerStyle\", \"deleteKeyCode\", \"selectionKeyCode\", \"multiSelectionKeyCode\", \"zoomActivationKeyCode\", \"snapToGrid\", \"snapGrid\", \"onlyRenderVisibleElements\", \"selectNodesOnDrag\", \"nodesDraggable\", \"nodesConnectable\", \"elementsSelectable\", \"minZoom\", \"maxZoom\", \"defaultZoom\", \"defaultPosition\", \"translateExtent\", \"preventScrolling\", \"nodeExtent\", \"defaultMarkerColor\", \"zoomOnScroll\", \"zoomOnPinch\", \"panOnScroll\", \"panOnScrollSpeed\", \"panOnScrollMode\", \"zoomOnDoubleClick\", \"panOnDrag\", \"onPaneClick\", \"onPaneScroll\", \"onPaneContextMenu\", \"children\", \"onEdgeUpdate\", \"onEdgeContextMenu\", \"onEdgeDoubleClick\", \"onEdgeMouseEnter\", \"onEdgeMouseMove\", \"onEdgeMouseLeave\", \"onEdgeUpdateStart\", \"onEdgeUpdateEnd\", \"edgeUpdaterRadius\", \"onNodesChange\", \"onEdgesChange\", \"noDragClassName\", \"noWheelClassName\", \"noPanClassName\", \"fitView\", \"fitViewOptions\", \"connectOnClick\", \"attributionPosition\", \"proOptions\", \"defaultEdgeOptions\", \"elevateEdgesOnSelect\"];\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\n{\n  injectStyle(css);\n  injectStyle(theme);\n}\n\nvar defaultNodeTypes = {\n  input: InputNode$1,\n  \"default\": DefaultNode$1,\n  output: OutputNode$1\n};\nvar defaultEdgeTypes = {\n  \"default\": BezierEdge,\n  straight: StraightEdge,\n  step: StepEdge,\n  smoothstep: SmoothStepEdge,\n  simplebezier: SimpleBezierEdge\n};\nvar initSnapGrid = [15, 15];\nvar initDefaultPosition = [0, 0];\nvar ReactFlow = /*#__PURE__*/forwardRef(function (_ref, ref) {\n  var nodes = _ref.nodes,\n      edges = _ref.edges,\n      defaultNodes = _ref.defaultNodes,\n      defaultEdges = _ref.defaultEdges,\n      className = _ref.className,\n      _ref$nodeTypes = _ref.nodeTypes,\n      nodeTypes = _ref$nodeTypes === void 0 ? defaultNodeTypes : _ref$nodeTypes,\n      _ref$edgeTypes = _ref.edgeTypes,\n      edgeTypes = _ref$edgeTypes === void 0 ? defaultEdgeTypes : _ref$edgeTypes,\n      onNodeClick = _ref.onNodeClick,\n      onEdgeClick = _ref.onEdgeClick,\n      onInit = _ref.onInit,\n      onMove = _ref.onMove,\n      onMoveStart = _ref.onMoveStart,\n      onMoveEnd = _ref.onMoveEnd,\n      onConnect = _ref.onConnect,\n      onConnectStart = _ref.onConnectStart,\n      onConnectStop = _ref.onConnectStop,\n      onConnectEnd = _ref.onConnectEnd,\n      onClickConnectStart = _ref.onClickConnectStart,\n      onClickConnectStop = _ref.onClickConnectStop,\n      onClickConnectEnd = _ref.onClickConnectEnd,\n      onNodeMouseEnter = _ref.onNodeMouseEnter,\n      onNodeMouseMove = _ref.onNodeMouseMove,\n      onNodeMouseLeave = _ref.onNodeMouseLeave,\n      onNodeContextMenu = _ref.onNodeContextMenu,\n      onNodeDoubleClick = _ref.onNodeDoubleClick,\n      onNodeDragStart = _ref.onNodeDragStart,\n      onNodeDrag = _ref.onNodeDrag,\n      onNodeDragStop = _ref.onNodeDragStop,\n      onNodesDelete = _ref.onNodesDelete,\n      onEdgesDelete = _ref.onEdgesDelete,\n      onSelectionChange = _ref.onSelectionChange,\n      onSelectionDragStart = _ref.onSelectionDragStart,\n      onSelectionDrag = _ref.onSelectionDrag,\n      onSelectionDragStop = _ref.onSelectionDragStop,\n      onSelectionContextMenu = _ref.onSelectionContextMenu,\n      _ref$connectionMode = _ref.connectionMode,\n      connectionMode = _ref$connectionMode === void 0 ? ConnectionMode.Strict : _ref$connectionMode,\n      _ref$connectionLineTy = _ref.connectionLineType,\n      connectionLineType = _ref$connectionLineTy === void 0 ? ConnectionLineType.Bezier : _ref$connectionLineTy,\n      connectionLineStyle = _ref.connectionLineStyle,\n      connectionLineComponent = _ref.connectionLineComponent,\n      connectionLineContainerStyle = _ref.connectionLineContainerStyle,\n      _ref$deleteKeyCode = _ref.deleteKeyCode,\n      deleteKeyCode = _ref$deleteKeyCode === void 0 ? 'Backspace' : _ref$deleteKeyCode,\n      _ref$selectionKeyCode = _ref.selectionKeyCode,\n      selectionKeyCode = _ref$selectionKeyCode === void 0 ? 'Shift' : _ref$selectionKeyCode,\n      _ref$multiSelectionKe = _ref.multiSelectionKeyCode,\n      multiSelectionKeyCode = _ref$multiSelectionKe === void 0 ? 'Meta' : _ref$multiSelectionKe,\n      _ref$zoomActivationKe = _ref.zoomActivationKeyCode,\n      zoomActivationKeyCode = _ref$zoomActivationKe === void 0 ? 'Meta' : _ref$zoomActivationKe,\n      _ref$snapToGrid = _ref.snapToGrid,\n      snapToGrid = _ref$snapToGrid === void 0 ? false : _ref$snapToGrid,\n      _ref$snapGrid = _ref.snapGrid,\n      snapGrid = _ref$snapGrid === void 0 ? initSnapGrid : _ref$snapGrid,\n      _ref$onlyRenderVisibl = _ref.onlyRenderVisibleElements,\n      onlyRenderVisibleElements = _ref$onlyRenderVisibl === void 0 ? false : _ref$onlyRenderVisibl,\n      _ref$selectNodesOnDra = _ref.selectNodesOnDrag,\n      selectNodesOnDrag = _ref$selectNodesOnDra === void 0 ? true : _ref$selectNodesOnDra,\n      nodesDraggable = _ref.nodesDraggable,\n      nodesConnectable = _ref.nodesConnectable,\n      elementsSelectable = _ref.elementsSelectable,\n      _ref$minZoom = _ref.minZoom,\n      minZoom = _ref$minZoom === void 0 ? 0.5 : _ref$minZoom,\n      _ref$maxZoom = _ref.maxZoom,\n      maxZoom = _ref$maxZoom === void 0 ? 2 : _ref$maxZoom,\n      _ref$defaultZoom = _ref.defaultZoom,\n      defaultZoom = _ref$defaultZoom === void 0 ? 1 : _ref$defaultZoom,\n      _ref$defaultPosition = _ref.defaultPosition,\n      defaultPosition = _ref$defaultPosition === void 0 ? initDefaultPosition : _ref$defaultPosition,\n      _ref$translateExtent = _ref.translateExtent,\n      translateExtent = _ref$translateExtent === void 0 ? infiniteExtent : _ref$translateExtent,\n      _ref$preventScrolling = _ref.preventScrolling,\n      preventScrolling = _ref$preventScrolling === void 0 ? true : _ref$preventScrolling,\n      nodeExtent = _ref.nodeExtent,\n      _ref$defaultMarkerCol = _ref.defaultMarkerColor,\n      defaultMarkerColor = _ref$defaultMarkerCol === void 0 ? '#b1b1b7' : _ref$defaultMarkerCol,\n      _ref$zoomOnScroll = _ref.zoomOnScroll,\n      zoomOnScroll = _ref$zoomOnScroll === void 0 ? true : _ref$zoomOnScroll,\n      _ref$zoomOnPinch = _ref.zoomOnPinch,\n      zoomOnPinch = _ref$zoomOnPinch === void 0 ? true : _ref$zoomOnPinch,\n      _ref$panOnScroll = _ref.panOnScroll,\n      panOnScroll = _ref$panOnScroll === void 0 ? false : _ref$panOnScroll,\n      _ref$panOnScrollSpeed = _ref.panOnScrollSpeed,\n      panOnScrollSpeed = _ref$panOnScrollSpeed === void 0 ? 0.5 : _ref$panOnScrollSpeed,\n      _ref$panOnScrollMode = _ref.panOnScrollMode,\n      panOnScrollMode = _ref$panOnScrollMode === void 0 ? PanOnScrollMode.Free : _ref$panOnScrollMode,\n      _ref$zoomOnDoubleClic = _ref.zoomOnDoubleClick,\n      zoomOnDoubleClick = _ref$zoomOnDoubleClic === void 0 ? true : _ref$zoomOnDoubleClic,\n      _ref$panOnDrag = _ref.panOnDrag,\n      panOnDrag = _ref$panOnDrag === void 0 ? true : _ref$panOnDrag,\n      onPaneClick = _ref.onPaneClick,\n      onPaneScroll = _ref.onPaneScroll,\n      onPaneContextMenu = _ref.onPaneContextMenu,\n      children = _ref.children,\n      onEdgeUpdate = _ref.onEdgeUpdate,\n      onEdgeContextMenu = _ref.onEdgeContextMenu,\n      onEdgeDoubleClick = _ref.onEdgeDoubleClick,\n      onEdgeMouseEnter = _ref.onEdgeMouseEnter,\n      onEdgeMouseMove = _ref.onEdgeMouseMove,\n      onEdgeMouseLeave = _ref.onEdgeMouseLeave,\n      onEdgeUpdateStart = _ref.onEdgeUpdateStart,\n      onEdgeUpdateEnd = _ref.onEdgeUpdateEnd,\n      _ref$edgeUpdaterRadiu = _ref.edgeUpdaterRadius,\n      edgeUpdaterRadius = _ref$edgeUpdaterRadiu === void 0 ? 10 : _ref$edgeUpdaterRadiu,\n      onNodesChange = _ref.onNodesChange,\n      onEdgesChange = _ref.onEdgesChange,\n      _ref$noDragClassName = _ref.noDragClassName,\n      noDragClassName = _ref$noDragClassName === void 0 ? 'nodrag' : _ref$noDragClassName,\n      _ref$noWheelClassName = _ref.noWheelClassName,\n      noWheelClassName = _ref$noWheelClassName === void 0 ? 'nowheel' : _ref$noWheelClassName,\n      _ref$noPanClassName = _ref.noPanClassName,\n      noPanClassName = _ref$noPanClassName === void 0 ? 'nopan' : _ref$noPanClassName,\n      _ref$fitView = _ref.fitView,\n      fitView = _ref$fitView === void 0 ? false : _ref$fitView,\n      fitViewOptions = _ref.fitViewOptions,\n      _ref$connectOnClick = _ref.connectOnClick,\n      connectOnClick = _ref$connectOnClick === void 0 ? true : _ref$connectOnClick,\n      attributionPosition = _ref.attributionPosition,\n      proOptions = _ref.proOptions,\n      defaultEdgeOptions = _ref.defaultEdgeOptions,\n      _ref$elevateEdgesOnSe = _ref.elevateEdgesOnSelect,\n      elevateEdgesOnSelect = _ref$elevateEdgesOnSe === void 0 ? false : _ref$elevateEdgesOnSe,\n      rest = _objectWithoutProperties(_ref, _excluded);\n\n  var nodeTypesWrapped = useNodeOrEdgeTypes(nodeTypes, createNodeTypes);\n  var edgeTypesWrapped = useNodeOrEdgeTypes(edgeTypes, createEdgeTypes);\n  return /*#__PURE__*/React.createElement(\"div\", _objectSpread(_objectSpread({}, rest), {}, {\n    ref: ref,\n    className: cc(['react-flow', className])\n  }), /*#__PURE__*/React.createElement(Wrapper, null, /*#__PURE__*/React.createElement(GraphView$1, {\n    onInit: onInit,\n    onMove: onMove,\n    onMoveStart: onMoveStart,\n    onMoveEnd: onMoveEnd,\n    onNodeClick: onNodeClick,\n    onEdgeClick: onEdgeClick,\n    onNodeMouseEnter: onNodeMouseEnter,\n    onNodeMouseMove: onNodeMouseMove,\n    onNodeMouseLeave: onNodeMouseLeave,\n    onNodeContextMenu: onNodeContextMenu,\n    onNodeDoubleClick: onNodeDoubleClick,\n    nodeTypes: nodeTypesWrapped,\n    edgeTypes: edgeTypesWrapped,\n    connectionLineType: connectionLineType,\n    connectionLineStyle: connectionLineStyle,\n    connectionLineComponent: connectionLineComponent,\n    connectionLineContainerStyle: connectionLineContainerStyle,\n    selectionKeyCode: selectionKeyCode,\n    deleteKeyCode: deleteKeyCode,\n    multiSelectionKeyCode: multiSelectionKeyCode,\n    zoomActivationKeyCode: zoomActivationKeyCode,\n    onlyRenderVisibleElements: onlyRenderVisibleElements,\n    selectNodesOnDrag: selectNodesOnDrag,\n    translateExtent: translateExtent,\n    minZoom: minZoom,\n    maxZoom: maxZoom,\n    defaultZoom: defaultZoom,\n    defaultPosition: defaultPosition,\n    preventScrolling: preventScrolling,\n    zoomOnScroll: zoomOnScroll,\n    zoomOnPinch: zoomOnPinch,\n    zoomOnDoubleClick: zoomOnDoubleClick,\n    panOnScroll: panOnScroll,\n    panOnScrollSpeed: panOnScrollSpeed,\n    panOnScrollMode: panOnScrollMode,\n    panOnDrag: panOnDrag,\n    onPaneClick: onPaneClick,\n    onPaneScroll: onPaneScroll,\n    onPaneContextMenu: onPaneContextMenu,\n    onSelectionContextMenu: onSelectionContextMenu,\n    onEdgeUpdate: onEdgeUpdate,\n    onEdgeContextMenu: onEdgeContextMenu,\n    onEdgeDoubleClick: onEdgeDoubleClick,\n    onEdgeMouseEnter: onEdgeMouseEnter,\n    onEdgeMouseMove: onEdgeMouseMove,\n    onEdgeMouseLeave: onEdgeMouseLeave,\n    onEdgeUpdateStart: onEdgeUpdateStart,\n    onEdgeUpdateEnd: onEdgeUpdateEnd,\n    edgeUpdaterRadius: edgeUpdaterRadius,\n    defaultMarkerColor: defaultMarkerColor,\n    noDragClassName: noDragClassName,\n    noWheelClassName: noWheelClassName,\n    noPanClassName: noPanClassName,\n    elevateEdgesOnSelect: elevateEdgesOnSelect,\n    id: rest === null || rest === void 0 ? void 0 : rest.id\n  }), /*#__PURE__*/React.createElement(StoreUpdater, {\n    nodes: nodes,\n    edges: edges,\n    defaultNodes: defaultNodes,\n    defaultEdges: defaultEdges,\n    onConnect: onConnect,\n    onConnectStart: onConnectStart,\n    onConnectStop: onConnectStop,\n    onConnectEnd: onConnectEnd,\n    onClickConnectStart: onClickConnectStart,\n    onClickConnectStop: onClickConnectStop,\n    onClickConnectEnd: onClickConnectEnd,\n    nodesDraggable: nodesDraggable,\n    nodesConnectable: nodesConnectable,\n    elementsSelectable: elementsSelectable,\n    minZoom: minZoom,\n    maxZoom: maxZoom,\n    nodeExtent: nodeExtent,\n    onNodesChange: onNodesChange,\n    onEdgesChange: onEdgesChange,\n    snapToGrid: snapToGrid,\n    snapGrid: snapGrid,\n    connectionMode: connectionMode,\n    translateExtent: translateExtent,\n    connectOnClick: connectOnClick,\n    defaultEdgeOptions: defaultEdgeOptions,\n    fitView: fitView,\n    fitViewOptions: fitViewOptions,\n    onNodesDelete: onNodesDelete,\n    onEdgesDelete: onEdgesDelete,\n    onNodeDragStart: onNodeDragStart,\n    onNodeDrag: onNodeDrag,\n    onNodeDragStop: onNodeDragStop,\n    onSelectionDrag: onSelectionDrag,\n    onSelectionDragStart: onSelectionDragStart,\n    onSelectionDragStop: onSelectionDragStop\n  }), onSelectionChange && /*#__PURE__*/React.createElement(SelectionListener$1, {\n    onSelectionChange: onSelectionChange\n  }), children, /*#__PURE__*/React.createElement(Attribution, {\n    proOptions: proOptions,\n    position: attributionPosition\n  })));\n});\nReactFlow.displayName = 'ReactFlow';\n\nvar ReactFlowProvider = function ReactFlowProvider(_ref) {\n  var children = _ref.children;\n  return /*#__PURE__*/React.createElement(Provider$1, {\n    createStore: createStore\n  }, children);\n};\n\nReactFlowProvider.displayName = 'ReactFlowProvider';\n\nfunction createUseItemsState(applyChanges) {\n  return function (initialItems) {\n    var _useState = useState(initialItems),\n        _useState2 = _slicedToArray(_useState, 2),\n        items = _useState2[0],\n        setItems = _useState2[1];\n\n    var onItemsChange = useCallback(function (changes) {\n      return setItems(function (items) {\n        return applyChanges(changes, items);\n      });\n    }, []);\n    return [items, setItems, onItemsChange];\n  };\n}\n\nvar useNodesState = createUseItemsState(applyNodeChanges);\nvar useEdgesState = createUseItemsState(applyEdgeChanges);\n\nexport { BezierEdge, EdgeText$1 as EdgeText, Handle$1 as Handle, ReactFlowProvider, SimpleBezierEdge, SmoothStepEdge, StepEdge, StraightEdge, ReactFlow as default, getBezierCenter as getBezierEdgeCenter, getBezierPath, getCenter as getEdgeCenter, getMarkerEnd, getSimpleBezierCenter as getSimpleBezierEdgeCenter, getSimpleBezierPath, getSmoothStepPath, useEdgesState, useKeyPress, useNodesState };\n//# sourceMappingURL=index.js.map\n","import React, { useCallback, useMemo, useState } from 'react';\r\nimport { EdgeProps, useReactFlow } from 'react-flow-renderer';\r\n\r\nconst isFiniteNumber = (value: number) => Number.isFinite(value);\r\n\r\nconst round = (value: number) => Math.round(value * 100) / 100;\r\n\r\nconst buildSmoothPath = (sx: number, sy: number, tx: number, ty: number) => {\r\n  if (sx === tx && sy === ty) {\r\n    return `M ${sx},${sy}`;\r\n  }\r\n\r\n  const horizontalDelta = Math.abs(tx - sx);\r\n  const verticalDelta = Math.abs(ty - sy);\r\n  \r\n  // Calculate adaptive offset based on both horizontal and vertical distance\r\n  const distance = Math.sqrt(horizontalDelta * horizontalDelta + verticalDelta * verticalDelta);\r\n  const baseOffset = Math.max(80, Math.min(distance * 0.4, 280));\r\n  const controlOffset = Number.isFinite(baseOffset) ? baseOffset : 120;\r\n  \r\n  const direction = tx >= sx ? 1 : -1;\r\n  \r\n  // Add vertical adjustment to create more elegant curves\r\n  const verticalAdjustment = Math.min(Math.abs(ty - sy) * 0.2, 50);\r\n\r\n  const c1x = sx + direction * controlOffset;\r\n  const c1y = sy + (ty > sy ? verticalAdjustment : -verticalAdjustment);\r\n  const c2x = tx - direction * controlOffset;\r\n  const c2y = ty - (ty > sy ? verticalAdjustment : -verticalAdjustment);\r\n\r\n  return `M ${sx},${sy} C ${c1x},${c1y} ${c2x},${c2y} ${tx},${ty}`;\r\n};\r\n\r\nconst AnimatedEdge: React.FC<EdgeProps> = ({\r\n  id,\r\n  sourceX,\r\n  sourceY,\r\n  targetX,\r\n  targetY,\r\n  markerEnd,\r\n  style,\r\n}) => {\r\n  const { setEdges } = useReactFlow();\r\n  const [isHovered, setIsHovered] = useState(false);\r\n\r\n  const handleMouseEnter = useCallback(() => {\r\n    setIsHovered(true);\r\n  }, []);\r\n\r\n  const handleMouseLeave = useCallback(() => {\r\n    setIsHovered(false);\r\n  }, []);\r\n  \r\n  const coordinates = useMemo(() => {\r\n    if (![sourceX, sourceY, targetX, targetY].every((value) => isFiniteNumber(value))) {\r\n      console.error(` Edge ${id}: Invalid coordinates`, { sourceX, sourceY, targetX, targetY });\r\n      return null;\r\n    }\r\n\r\n    return {\r\n      sourceX: round(sourceX),\r\n      sourceY: round(sourceY),\r\n      targetX: round(targetX),\r\n      targetY: round(targetY),\r\n    };\r\n  }, [sourceX, sourceY, targetX, targetY, id]);\r\n\r\n  const edgePath = useMemo(() => {\r\n    if (!coordinates) {\r\n      return null;\r\n    }\r\n\r\n    const { sourceX: sx, sourceY: sy, targetX: tx, targetY: ty } = coordinates;\r\n    return buildSmoothPath(sx, sy, tx, ty);\r\n  }, [coordinates]);\r\n\r\n  const gradientId = useMemo(() => `animated-edge-gradient-${id}`, [id]);\r\n\r\n  if (!coordinates || !edgePath) {\r\n    return null;\r\n  }\r\n\r\n  const { sourceX: sx, sourceY: sy, targetX: tx, targetY: ty } = coordinates;\r\n  const midpointX = (sx + tx) / 2;\r\n  const midpointY = (sy + ty) / 2;\r\n  const removeButtonSize = 32;\r\n  const foreignObjectX = midpointX - removeButtonSize / 2;\r\n  const foreignObjectY = midpointY - removeButtonSize / 2;\r\n  const edgeClassName = `animated-edge${isHovered ? ' animated-edge--hovered' : ''}`;\r\n  const removeButtonClassName = `canvas-edge-remove${isHovered ? ' canvas-edge-remove--visible' : ''}`;\r\n\r\n  return (\r\n    <g\r\n      className={edgeClassName}\r\n      onMouseEnter={handleMouseEnter}\r\n      onMouseLeave={handleMouseLeave}\r\n    >\r\n      <defs>\r\n        <linearGradient\r\n          id={gradientId}\r\n          gradientUnits=\"userSpaceOnUse\"\r\n          x1={sx}\r\n          y1={sy}\r\n          x2={tx}\r\n          y2={ty}\r\n        >\r\n          <stop offset=\"0%\" stopColor=\"#38bdf8\" stopOpacity={0.85} />\r\n          <stop offset=\"50%\" stopColor=\"#6366f1\" stopOpacity={0.95} />\r\n          <stop offset=\"100%\" stopColor=\"#a855f7\" stopOpacity={0.9} />\r\n        </linearGradient>\r\n        \r\n        {/* Glow filter for enhanced visual effect */}\r\n        <filter id={`edge-glow-${id}`} x=\"-50%\" y=\"-50%\" width=\"200%\" height=\"200%\">\r\n          <feGaussianBlur stdDeviation=\"2\" result=\"coloredBlur\" />\r\n          <feMerge>\r\n            <feMergeNode in=\"coloredBlur\" />\r\n            <feMergeNode in=\"SourceGraphic\" />\r\n          </feMerge>\r\n        </filter>\r\n      </defs>\r\n\r\n      {/* Invisible interaction layer for better hover detection */}\r\n      <path \r\n        d={edgePath} \r\n        fill=\"none\" \r\n        stroke=\"transparent\"\r\n        strokeWidth={20}\r\n        style={{ cursor: 'pointer' }}\r\n        className=\"animated-edge__interaction\" \r\n      />\r\n\r\n      {/* Glow/shadow base layer */}\r\n      <path\r\n        d={edgePath}\r\n        fill=\"none\"\r\n        stroke={`url(#${gradientId})`}\r\n        strokeWidth={6}\r\n        strokeOpacity={0.2}\r\n        strokeLinecap=\"round\"\r\n        strokeLinejoin=\"round\"\r\n        style={{ filter: `url(#edge-glow-${id})` }}\r\n      />\r\n\r\n      {/* Main edge path */}\r\n      <path\r\n        d={edgePath}\r\n        fill=\"none\"\r\n        stroke={`url(#${gradientId})`}\r\n        strokeWidth={3}\r\n        strokeLinecap=\"round\"\r\n        strokeLinejoin=\"round\"\r\n        markerEnd={markerEnd}\r\n        className=\"animated-edge__base\"\r\n        style={{\r\n          ...style,\r\n          transition: 'stroke-width 0.2s ease',\r\n        }}\r\n      />\r\n\r\n      {/* Animated dash trail */}\r\n      <path\r\n        d={edgePath}\r\n        fill=\"none\"\r\n        stroke={`url(#${gradientId})`}\r\n        strokeWidth={isHovered ? 3.5 : 3}\r\n        strokeLinecap=\"round\"\r\n        strokeLinejoin=\"round\"\r\n        strokeDasharray=\"16 12\"\r\n        className=\"animated-edge__trail\"\r\n        style={{\r\n          transition: 'stroke-width 0.2s ease',\r\n        }}\r\n      />\r\n\r\n      {/* Sparkle effect */}\r\n      <path\r\n        d={edgePath}\r\n        fill=\"none\"\r\n        stroke=\"rgba(248, 250, 252, 0.4)\"\r\n        strokeWidth={1.5}\r\n        strokeDasharray=\"3 8\"\r\n        strokeLinecap=\"round\"\r\n        strokeLinejoin=\"round\"\r\n        className=\"animated-edge__spark\"\r\n      />\r\n\r\n      <foreignObject\r\n        className={removeButtonClassName}\r\n        x={foreignObjectX}\r\n        y={foreignObjectY}\r\n        width={removeButtonSize}\r\n        height={removeButtonSize}\r\n        requiredExtensions=\"http://www.w3.org/1999/xhtml\"\r\n      >\r\n        <div className=\"canvas-edge-remove__wrapper\">\r\n          <button\r\n            type=\"button\"\r\n            className=\"canvas-edge-remove__button\"\r\n            onClick={(event) => {\r\n              event.stopPropagation();\r\n              setEdges((edges) => edges.filter((edge) => edge.id !== id));\r\n            }}\r\n            aria-label=\"Remove connection\"\r\n          >\r\n            \r\n          </button>\r\n        </div>\r\n      </foreignObject>\r\n    </g>\r\n  );\r\n};\r\n\r\nexport default AnimatedEdge;","import React from 'react';\r\nimport { ConnectionLineComponentProps } from 'react-flow-renderer';\r\n\r\nconst buildSmoothPath = (sx: number, sy: number, tx: number, ty: number) => {\r\n  if (sx === tx && sy === ty) {\r\n    return `M ${sx},${sy}`;\r\n  }\r\n\r\n  const horizontalDelta = Math.abs(tx - sx);\r\n  const baseOffset = Math.max(64, Math.min(horizontalDelta * 0.45, 240));\r\n  const controlOffset = Number.isFinite(baseOffset) ? baseOffset : 100;\r\n  const direction = tx >= sx ? 1 : -1;\r\n\r\n  const c1x = sx + direction * controlOffset;\r\n  const c1y = sy;\r\n  const c2x = tx - direction * controlOffset;\r\n  const c2y = ty;\r\n\r\n  return `M ${sx},${sy} C ${c1x},${c1y} ${c2x},${c2y} ${tx},${ty}`;\r\n};\r\n\r\nconst ConnectionLine: React.FC<ConnectionLineComponentProps> = ({\r\n  sourceX,\r\n  sourceY,\r\n  targetX,\r\n  targetY,\r\n  sourcePosition,\r\n  targetPosition,\r\n}) => {\r\n  const path = buildSmoothPath(sourceX, sourceY, targetX, targetY);\r\n  const gradientId = 'connection-line-gradient';\r\n\r\n  return (\r\n    <g>\r\n      <defs>\r\n        <linearGradient\r\n          id={gradientId}\r\n          gradientUnits=\"userSpaceOnUse\"\r\n          x1={sourceX}\r\n          y1={sourceY}\r\n          x2={targetX}\r\n          y2={targetY}\r\n        >\r\n          <stop offset=\"0%\" stopColor=\"#38bdf8\" stopOpacity={0.8} />\r\n          <stop offset=\"50%\" stopColor=\"#6366f1\" stopOpacity={0.9} />\r\n          <stop offset=\"100%\" stopColor=\"#a855f7\" stopOpacity={0.85} />\r\n        </linearGradient>\r\n        \r\n        {/* Glow filter for connection line */}\r\n        <filter id=\"connection-glow\" x=\"-50%\" y=\"-50%\" width=\"200%\" height=\"200%\">\r\n          <feGaussianBlur stdDeviation=\"3\" result=\"coloredBlur\" />\r\n          <feMerge>\r\n            <feMergeNode in=\"coloredBlur\" />\r\n            <feMergeNode in=\"SourceGraphic\" />\r\n          </feMerge>\r\n        </filter>\r\n      </defs>\r\n      \r\n      {/* Glow effect base */}\r\n      <path\r\n        d={path}\r\n        fill=\"none\"\r\n        stroke={`url(#${gradientId})`}\r\n        strokeWidth={8}\r\n        strokeOpacity={0.2}\r\n        strokeLinecap=\"round\"\r\n        style={{ filter: 'url(#connection-glow)' }}\r\n      />\r\n      \r\n      {/* Main connection line */}\r\n      <path\r\n        d={path}\r\n        fill=\"none\"\r\n        stroke={`url(#${gradientId})`}\r\n        strokeWidth={3}\r\n        strokeLinecap=\"round\"\r\n        strokeLinejoin=\"round\"\r\n        style={{\r\n          strokeDasharray: '8 4',\r\n          animation: 'connection-line-dash 1s linear infinite',\r\n        }}\r\n      />\r\n      \r\n      {/* Pulse circle at target */}\r\n      <circle\r\n        cx={targetX}\r\n        cy={targetY}\r\n        r={6}\r\n        fill=\"#a855f7\"\r\n        opacity={0.8}\r\n        style={{\r\n          animation: 'connection-pulse 1.5s ease-in-out infinite',\r\n        }}\r\n      />\r\n    </g>\r\n  );\r\n};\r\n\r\nexport default ConnectionLine;\r\n","import React, { useEffect, useMemo, useState } from 'react';\r\nimport type { FeatureNodeCatalogEntry } from '../api';\r\n\r\ninterface FeatureCanvasSidebarProps {\r\n  nodes: FeatureNodeCatalogEntry[];\r\n  onAddNode?: (node: FeatureNodeCatalogEntry) => void;\r\n}\r\n\r\nconst formatList = (items?: string[]) => {\r\n  if (!items || !items.length) {\r\n    return '';\r\n  }\r\n  return items.join(', ');\r\n};\r\n\r\nexport const FeatureCanvasSidebar: React.FC<FeatureCanvasSidebarProps> = ({ nodes, onAddNode }) => {\r\n  const [query, setQuery] = useState('');\r\n  const [expandedCategories, setExpandedCategories] = useState<string[]>([]);\r\n\r\n  const normalizedQuery = query.trim().toLowerCase();\r\n\r\n  const filteredNodes = useMemo(() => {\r\n    if (!normalizedQuery) {\r\n      return nodes;\r\n    }\r\n\r\n    return nodes.filter((node) => {\r\n      const haystacks: Array<string | undefined | null> = [\r\n        node.label,\r\n        node.type,\r\n        node.description,\r\n      ];\r\n\r\n      if (node.category) {\r\n        haystacks.push(node.category);\r\n      }\r\n\r\n      if (node.tags && node.tags.length) {\r\n        haystacks.push(node.tags.join(' '));\r\n      }\r\n\r\n      return haystacks.some((value) => value?.toLowerCase().includes(normalizedQuery));\r\n    });\r\n  }, [nodes, normalizedQuery]);\r\n\r\n  const groupedNodes = useMemo(() => {\r\n    const groups = new Map<string, FeatureNodeCatalogEntry[]>();\r\n    filteredNodes.forEach((node) => {\r\n      const category = node.category?.trim() || 'Other';\r\n      const collection = groups.get(category) ?? [];\r\n      collection.push(node);\r\n      groups.set(category, collection);\r\n    });\r\n\r\n    return Array.from(groups.entries())\r\n      .sort(([categoryA], [categoryB]) => categoryA.localeCompare(categoryB))\r\n      .map(([category, entries]) => ({\r\n        category,\r\n        entries: entries.sort((a, b) => (a.label || a.type).localeCompare(b.label || b.type)),\r\n      }));\r\n  }, [filteredNodes]);\r\n\r\n  useEffect(() => {\r\n    if (!normalizedQuery) {\r\n      setExpandedCategories([]);\r\n      return;\r\n    }\r\n\r\n    setExpandedCategories((previous) => {\r\n      const next = new Set(previous);\r\n      let changed = false;\r\n      groupedNodes.forEach(({ category }) => {\r\n        if (!next.has(category)) {\r\n          next.add(category);\r\n          changed = true;\r\n        }\r\n      });\r\n      return changed ? Array.from(next) : previous;\r\n    });\r\n  }, [groupedNodes, normalizedQuery]);\r\n\r\n  const toggleCategory = (category: string) => {\r\n    setExpandedCategories((previous) => {\r\n      const next = new Set(previous);\r\n      if (next.has(category)) {\r\n        next.delete(category);\r\n      } else {\r\n        next.add(category);\r\n      }\r\n      return Array.from(next);\r\n    });\r\n  };\r\n\r\n  const totalVisible = filteredNodes.length;\r\n  const hasMatches = totalVisible > 0;\r\n\r\n  return (\r\n    <div className=\"feature-canvas-sidebar\" role=\"presentation\">\r\n      <header className=\"feature-canvas-sidebar__header\">\r\n  <h3>Available steps</h3>\r\n        <div className=\"feature-canvas-sidebar__search\">\r\n          <input\r\n            type=\"search\"\r\n            value={query}\r\n            onChange={(event) => setQuery(event.target.value)}\r\n            placeholder=\"Search by name, tag, or output\"\r\n            className=\"feature-canvas-sidebar__search-input\"\r\n            aria-label=\"Search available steps\"\r\n          />\r\n          {query && (\r\n            <button\r\n              type=\"button\"\r\n              className=\"feature-canvas-sidebar__search-clear\"\r\n              onClick={() => setQuery('')}\r\n              aria-label=\"Clear search\"\r\n            >\r\n              \r\n            </button>\r\n          )}\r\n        </div>\r\n        <span className=\"feature-canvas-sidebar__results\">\r\n          Showing {totalVisible} {totalVisible === 1 ? 'step' : 'steps'}\r\n          {normalizedQuery ? ` matching ${query.trim()}` : ''}\r\n        </span>\r\n      </header>\r\n      {hasMatches ? (\r\n        <div className=\"feature-canvas-sidebar__sections\">\r\n          {groupedNodes.map(({ category, entries }) => {\r\n            const isExpanded = expandedCategories.includes(category);\r\n            return (\r\n              <section key={category} className=\"feature-canvas-sidebar__section\">\r\n                <button\r\n                  type=\"button\"\r\n                  className=\"feature-canvas-sidebar__section-toggle\"\r\n                  onClick={() => toggleCategory(category)}\r\n                  aria-expanded={isExpanded}\r\n                >\r\n                  <span className=\"feature-canvas-sidebar__section-label\">\r\n                    {category.charAt(0).toUpperCase() + category.slice(1)}\r\n                  </span>\r\n                  <span className=\"feature-canvas-sidebar__section-meta\">\r\n                    {entries.length}\r\n                    <span className=\"feature-canvas-sidebar__section-arrow\" data-expanded={isExpanded}>\r\n                      \r\n                    </span>\r\n                  </span>\r\n                </button>\r\n                {isExpanded && (\r\n                  <div className=\"feature-canvas-sidebar__group\">\r\n                    {entries.map((node) => (\r\n                      <button\r\n                        key={node.type}\r\n                        className=\"feature-canvas-sidebar__card\"\r\n                        type=\"button\"\r\n                        onClick={() => onAddNode?.(node)}\r\n                      >\r\n                        <div className=\"feature-canvas-sidebar__card-body\">\r\n                          <span className=\"feature-canvas-sidebar__card-title\">{node.label || node.type}</span>\r\n                          {node.description && (\r\n                            <span className=\"feature-canvas-sidebar__card-description\">{node.description}</span>\r\n                          )}\r\n                          <div className=\"feature-canvas-sidebar__card-tags\">\r\n                            {node.inputs?.length ? (\r\n                              <span className=\"feature-canvas-sidebar__chip\" title={`Inputs: ${formatList(node.inputs)}`}>\r\n                                In: {formatList(node.inputs)}\r\n                              </span>\r\n                            ) : null}\r\n                            {node.outputs?.length ? (\r\n                              <span className=\"feature-canvas-sidebar__chip\" title={`Outputs: ${formatList(node.outputs)}`}>\r\n                                Out: {formatList(node.outputs)}\r\n                              </span>\r\n                            ) : null}\r\n                            {node.parameters && node.parameters.length > 0 ? (\r\n                              <span className=\"feature-canvas-sidebar__chip\">\r\n                                {node.parameters.length} param{node.parameters.length > 1 ? 's' : ''}\r\n                              </span>\r\n                            ) : null}\r\n                          </div>\r\n                        </div>\r\n                      </button>\r\n                    ))}\r\n                  </div>\r\n                )}\r\n              </section>\r\n            );\r\n          })}\r\n        </div>\r\n      ) : (\r\n        <div className=\"feature-canvas-sidebar__empty\">\r\n          <p>No steps match {query.trim()}. Try adjusting your search or browse by category.</p>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n","// @ts-nocheck\r\nimport { FeatureNodeCatalogEntry } from './types';\r\n\r\nexport async function fetchNodeCatalog(): Promise<FeatureNodeCatalogEntry[]> {\r\n  const response = await fetch('/ml-workflow/api/node-catalog');\r\n\r\n  if (!response.ok) {\r\n    throw new Error('Failed to load node catalog');\r\n  }\r\n\r\n  return response.json();\r\n}\r\n","// @ts-nocheck\r\nimport { DatasetSourceSummary } from './types';\r\n\r\nexport async function fetchDatasets(limit = 8): Promise<DatasetSourceSummary[]> {\r\n  const response = await fetch(`/ml-workflow/api/datasets?limit=${encodeURIComponent(String(limit))}`);\r\n\r\n  if (!response.ok) {\r\n    throw new Error('Failed to load datasets');\r\n  }\r\n\r\n  return response.json();\r\n}\r\n","// @ts-nocheck\r\nimport {\r\n  LabelEncodingRecommendationsResponse,\r\n  FetchLabelEncodingRecommendationsOptions,\r\n  OrdinalEncodingRecommendationsResponse,\r\n  FetchOrdinalEncodingRecommendationsOptions,\r\n  TargetEncodingRecommendationsResponse,\r\n  FetchTargetEncodingRecommendationsOptions,\r\n  HashEncodingRecommendationsResponse,\r\n  FetchHashEncodingRecommendationsOptions,\r\n  OneHotEncodingRecommendationsResponse,\r\n  FetchOneHotEncodingRecommendationsOptions,\r\n  DummyEncodingRecommendationsResponse,\r\n  FetchDummyEncodingRecommendationsOptions,\r\n} from '../types';\r\n\r\nexport async function fetchLabelEncodingRecommendations(\r\n  sourceId: string,\r\n  options: FetchLabelEncodingRecommendationsOptions = {}\r\n): Promise<LabelEncodingRecommendationsResponse> {\r\n  const { sampleSize = 500, graph, targetNodeId } = options;\r\n\r\n  const body: any = {\r\n    dataset_source_id: sourceId,\r\n    sample_size: sampleSize,\r\n  };\r\n\r\n  if (graph && Array.isArray(graph.nodes) && Array.isArray(graph.edges)) {\r\n    body.graph = { nodes: graph.nodes, edges: graph.edges };\r\n  }\r\n\r\n  if (targetNodeId) {\r\n    body.target_node_id = targetNodeId;\r\n  }\r\n\r\n  const response = await fetch('/ml-workflow/api/recommendations/label-encoding', {\r\n    method: 'POST',\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n    },\r\n    body: JSON.stringify(body),\r\n  });\r\n\r\n  if (!response.ok) {\r\n    throw new Error('Failed to load label encoding recommendations');\r\n  }\r\n\r\n  return response.json();\r\n}\r\n\r\nexport async function fetchOrdinalEncodingRecommendations(\r\n  sourceId: string,\r\n  options: FetchOrdinalEncodingRecommendationsOptions = {}\r\n): Promise<OrdinalEncodingRecommendationsResponse> {\r\n  const { sampleSize = 500, graph, targetNodeId } = options;\r\n\r\n  const body: any = {\r\n    dataset_source_id: sourceId,\r\n    sample_size: sampleSize,\r\n  };\r\n\r\n  if (graph && Array.isArray(graph.nodes) && Array.isArray(graph.edges)) {\r\n    body.graph = { nodes: graph.nodes, edges: graph.edges };\r\n  }\r\n\r\n  if (targetNodeId) {\r\n    body.target_node_id = targetNodeId;\r\n  }\r\n\r\n  const response = await fetch('/ml-workflow/api/recommendations/ordinal-encoding', {\r\n    method: 'POST',\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n    },\r\n    body: JSON.stringify(body),\r\n  });\r\n\r\n  if (!response.ok) {\r\n    throw new Error('Failed to load ordinal encoding suggestions');\r\n  }\r\n\r\n  return response.json();\r\n}\r\n\r\nexport async function fetchTargetEncodingRecommendations(\r\n  sourceId: string,\r\n  options: FetchTargetEncodingRecommendationsOptions = {}\r\n): Promise<TargetEncodingRecommendationsResponse> {\r\n  const { sampleSize = 500, graph, targetNodeId } = options;\r\n\r\n  const body: any = {\r\n    dataset_source_id: sourceId,\r\n    sample_size: sampleSize,\r\n  };\r\n\r\n  if (graph && Array.isArray(graph.nodes) && Array.isArray(graph.edges)) {\r\n    body.graph = { nodes: graph.nodes, edges: graph.edges };\r\n  }\r\n\r\n  if (targetNodeId) {\r\n    body.target_node_id = targetNodeId;\r\n  }\r\n\r\n  const response = await fetch('/ml-workflow/api/recommendations/target-encoding', {\r\n    method: 'POST',\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n    },\r\n    body: JSON.stringify(body),\r\n  });\r\n\r\n  if (!response.ok) {\r\n    throw new Error('Failed to load target encoding recommendations');\r\n  }\r\n\r\n  return response.json();\r\n}\r\n\r\nexport async function fetchHashEncodingRecommendations(\r\n  sourceId: string,\r\n  options: FetchHashEncodingRecommendationsOptions = {}\r\n): Promise<HashEncodingRecommendationsResponse> {\r\n  const { sampleSize = 500, graph, targetNodeId } = options;\r\n\r\n  const body: any = {\r\n    dataset_source_id: sourceId,\r\n    sample_size: sampleSize,\r\n  };\r\n\r\n  if (graph && Array.isArray(graph.nodes) && Array.isArray(graph.edges)) {\r\n    body.graph = { nodes: graph.nodes, edges: graph.edges };\r\n  }\r\n\r\n  if (targetNodeId) {\r\n    body.target_node_id = targetNodeId;\r\n  }\r\n\r\n  const response = await fetch('/ml-workflow/api/recommendations/hash-encoding', {\r\n    method: 'POST',\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n    },\r\n    body: JSON.stringify(body),\r\n  });\r\n\r\n  if (!response.ok) {\r\n    throw new Error('Failed to load hash encoding recommendations');\r\n  }\r\n\r\n  return response.json();\r\n}\r\n\r\nexport async function fetchOneHotEncodingRecommendations(\r\n  sourceId: string,\r\n  options: FetchOneHotEncodingRecommendationsOptions = {}\r\n): Promise<OneHotEncodingRecommendationsResponse> {\r\n  const { sampleSize = 500, graph, targetNodeId } = options;\r\n\r\n  const body: any = {\r\n    dataset_source_id: sourceId,\r\n    sample_size: sampleSize,\r\n  };\r\n\r\n  if (graph && Array.isArray(graph.nodes) && Array.isArray(graph.edges)) {\r\n    body.graph = { nodes: graph.nodes, edges: graph.edges };\r\n  }\r\n\r\n  if (targetNodeId) {\r\n    body.target_node_id = targetNodeId;\r\n  }\r\n\r\n  const response = await fetch('/ml-workflow/api/recommendations/one-hot-encoding', {\r\n    method: 'POST',\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n    },\r\n    body: JSON.stringify(body),\r\n  });\r\n\r\n  if (!response.ok) {\r\n    throw new Error('Failed to load one-hot encoding recommendations');\r\n  }\r\n\r\n  return response.json();\r\n}\r\n\r\nexport async function fetchDummyEncodingRecommendations(\r\n  sourceId: string,\r\n  options: FetchDummyEncodingRecommendationsOptions = {}\r\n): Promise<DummyEncodingRecommendationsResponse> {\r\n  const { sampleSize = 500, graph, targetNodeId } = options;\r\n\r\n  const body: any = {\r\n    dataset_source_id: sourceId,\r\n    sample_size: sampleSize,\r\n  };\r\n\r\n  if (graph && Array.isArray(graph.nodes) && Array.isArray(graph.edges)) {\r\n    body.graph = { nodes: graph.nodes, edges: graph.edges };\r\n  }\r\n\r\n  if (targetNodeId) {\r\n    body.target_node_id = targetNodeId;\r\n  }\r\n\r\n  const response = await fetch('/ml-workflow/api/recommendations/dummy-encoding', {\r\n    method: 'POST',\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n    },\r\n    body: JSON.stringify(body),\r\n  });\r\n\r\n  if (!response.ok) {\r\n    throw new Error('Failed to load dummy encoding recommendations');\r\n  }\r\n\r\n  return response.json();\r\n}\r\n","// @ts-nocheck\r\nimport {\r\n  DropColumnRecommendationsResponse,\r\n  FetchDropColumnRecommendationsOptions,\r\n  OutlierRecommendationsResponse,\r\n  FetchOutlierRecommendationsOptions,\r\n} from '../types';\r\n\r\nexport async function fetchDropColumnRecommendations(\r\n  sourceId: string,\r\n  options: FetchDropColumnRecommendationsOptions = {}\r\n): Promise<DropColumnRecommendationsResponse> {\r\n  const { sampleSize = 500, graph, targetNodeId } = options;\r\n\r\n  const body: any = {\r\n    dataset_source_id: sourceId,\r\n    sample_size: sampleSize,\r\n  };\r\n\r\n  if (graph && Array.isArray(graph.nodes) && Array.isArray(graph.edges)) {\r\n    body.graph = { nodes: graph.nodes, edges: graph.edges };\r\n  }\r\n\r\n  if (targetNodeId) {\r\n    body.target_node_id = targetNodeId;\r\n  }\r\n\r\n  const response = await fetch('/ml-workflow/api/recommendations/drop-columns', {\r\n    method: 'POST',\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n    },\r\n    body: JSON.stringify(body),\r\n  });\r\n\r\n  if (!response.ok) {\r\n    throw new Error('Failed to load column drop recommendations');\r\n  }\r\n\r\n  return response.json();\r\n}\r\n\r\nexport async function fetchOutlierRecommendations(\r\n  sourceId: string,\r\n  options: FetchOutlierRecommendationsOptions = {}\r\n): Promise<OutlierRecommendationsResponse> {\r\n  const { sampleSize = 500, graph, targetNodeId } = options;\r\n\r\n  const normalizedSampleSize =\r\n    typeof sampleSize === 'number' && Number.isFinite(sampleSize)\r\n      ? Math.min(5000, Math.max(50, Math.round(sampleSize)))\r\n      : 500;\r\n\r\n  const body: any = {\r\n    dataset_source_id: sourceId,\r\n    sample_size: normalizedSampleSize,\r\n  };\r\n\r\n  if (graph && Array.isArray(graph.nodes) && Array.isArray(graph.edges)) {\r\n    body.graph = { nodes: graph.nodes, edges: graph.edges };\r\n  }\r\n\r\n  if (targetNodeId) {\r\n    body.target_node_id = targetNodeId;\r\n  }\r\n\r\n  const response = await fetch('/ml-workflow/api/recommendations/outliers', {\r\n    method: 'POST',\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n    },\r\n    body: JSON.stringify(body),\r\n  });\r\n\r\n  if (!response.ok) {\r\n    throw new Error('Failed to load outlier recommendations');\r\n  }\r\n\r\n  return response.json();\r\n}\r\n","// @ts-nocheck\r\nimport {\r\n  SkewnessRecommendationsResponse,\r\n  FetchSkewnessRecommendationsOptions,\r\n  ScalingRecommendationsResponse,\r\n  FetchScalingRecommendationsOptions,\r\n  BinningRecommendationsResponse,\r\n  FetchBinningRecommendationsOptions,\r\n} from '../types';\r\n\r\nexport async function fetchSkewnessRecommendations(\r\n  sourceId: string,\r\n  options: FetchSkewnessRecommendationsOptions = {}\r\n): Promise<SkewnessRecommendationsResponse> {\r\n  const { sampleSize = 500, transformations, graph, targetNodeId } = options;\r\n\r\n  const body: any = {\r\n    dataset_source_id: sourceId,\r\n    sample_size: sampleSize,\r\n  };\r\n\r\n  if (Array.isArray(transformations)) {\r\n    if (transformations.length > 0) {\r\n      body.transformations = JSON.stringify(transformations);\r\n    }\r\n  } else if (transformations && typeof transformations === 'object') {\r\n    const keys = Object.keys(transformations);\r\n    if (keys.length > 0) {\r\n      body.transformations = JSON.stringify(transformations);\r\n    }\r\n  }\r\n\r\n  if (graph && Array.isArray(graph.nodes) && Array.isArray(graph.edges)) {\r\n    body.graph = { nodes: graph.nodes, edges: graph.edges };\r\n  }\r\n\r\n  if (targetNodeId) {\r\n    body.target_node_id = targetNodeId;\r\n  }\r\n\r\n  const response = await fetch('/ml-workflow/api/recommendations/skewness', {\r\n    method: 'POST',\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n    },\r\n    body: JSON.stringify(body),\r\n  });\r\n\r\n  if (!response.ok) {\r\n    throw new Error('Failed to load skewness recommendations');\r\n  }\r\n\r\n  return response.json();\r\n}\r\n\r\nexport async function fetchScalingRecommendations(\r\n  sourceId: string,\r\n  options: FetchScalingRecommendationsOptions = {}\r\n): Promise<ScalingRecommendationsResponse> {\r\n  const { sampleSize = 500, graph, targetNodeId } = options;\r\n\r\n  const body: any = {\r\n    dataset_source_id: sourceId,\r\n    sample_size: sampleSize,\r\n  };\r\n\r\n  if (graph && Array.isArray(graph.nodes) && Array.isArray(graph.edges)) {\r\n    body.graph = { nodes: graph.nodes, edges: graph.edges };\r\n  }\r\n\r\n  if (targetNodeId) {\r\n    body.target_node_id = targetNodeId;\r\n  }\r\n\r\n  const response = await fetch('/ml-workflow/api/recommendations/scaling', {\r\n    method: 'POST',\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n    },\r\n    body: JSON.stringify(body),\r\n  });\r\n\r\n  if (!response.ok) {\r\n    throw new Error('Failed to load scaling recommendations');\r\n  }\r\n\r\n  return response.json();\r\n}\r\n\r\nexport async function fetchBinningRecommendations(\r\n  sourceId: string,\r\n  options: FetchBinningRecommendationsOptions = {}\r\n): Promise<BinningRecommendationsResponse> {\r\n  const { sampleSize = 500, graph, targetNodeId } = options;\r\n\r\n  const body: any = {\r\n    dataset_source_id: sourceId,\r\n    sample_size: sampleSize,\r\n  };\r\n\r\n  if (graph && Array.isArray(graph.nodes) && Array.isArray(graph.edges)) {\r\n    body.graph = { nodes: graph.nodes, edges: graph.edges };\r\n  }\r\n\r\n  if (targetNodeId) {\r\n    body.target_node_id = targetNodeId;\r\n  }\r\n\r\n  const response = await fetch('/ml-workflow/api/recommendations/binning', {\r\n    method: 'POST',\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n    },\r\n    body: JSON.stringify(body),\r\n  });\r\n\r\n  if (!response.ok) {\r\n    throw new Error('Failed to load binning recommendations');\r\n  }\r\n\r\n  return response.json();\r\n}\r\n","// @ts-nocheck\r\nimport { BinnedDistributionResponse, FetchBinnedDistributionOptions } from '../types';\r\n\r\nexport async function fetchBinnedDistribution(\r\n  sourceId: string,\r\n  options: FetchBinnedDistributionOptions = {}\r\n): Promise<BinnedDistributionResponse> {\r\n  const { sampleSize = 500, graph, targetNodeId } = options;\r\n\r\n  const normalizedSampleSize =\r\n    sampleSize === 'all'\r\n      ? 0\r\n      : typeof sampleSize === 'number' && Number.isFinite(sampleSize)\r\n        ? Math.max(0, Math.round(sampleSize))\r\n        : 500;\r\n\r\n  const body: Record<string, any> = {\r\n    dataset_source_id: sourceId,\r\n    sample_size: normalizedSampleSize,\r\n  };\r\n\r\n  if (graph && Array.isArray(graph.nodes) && Array.isArray(graph.edges)) {\r\n    body.graph = { nodes: graph.nodes, edges: graph.edges };\r\n  }\r\n\r\n  if (targetNodeId) {\r\n    body.target_node_id = targetNodeId;\r\n  }\r\n\r\n  const response = await fetch('/ml-workflow/api/analytics/binned-distribution', {\r\n    method: 'POST',\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n    },\r\n    body: JSON.stringify(body),\r\n  });\r\n\r\n  if (!response.ok) {\r\n    let message = 'Failed to load binned column distributions';\r\n    try {\r\n      const errorPayload = await response.clone().json();\r\n      const detail =\r\n        (typeof errorPayload?.detail === 'string' && errorPayload.detail.trim())\r\n          ? errorPayload.detail.trim()\r\n          : (typeof errorPayload?.error === 'string' && errorPayload.error.trim())\r\n            ? errorPayload.error.trim()\r\n            : (typeof errorPayload?.message === 'string' && errorPayload.message.trim())\r\n              ? errorPayload.message.trim()\r\n              : null;\r\n      if (detail) {\r\n        message = detail;\r\n      }\r\n    } catch {\r\n      try {\r\n        const fallbackText = await response.text();\r\n        const trimmed = fallbackText.trim();\r\n        if (trimmed) {\r\n          message = trimmed;\r\n        }\r\n      } catch {\r\n        // Ignore secondary parsing failures\r\n      }\r\n    }\r\n\r\n    throw new Error(message);\r\n  }\r\n\r\n  return response.json();\r\n}\r\n","// @ts-nocheck\r\nimport { QuickProfileResponse, FetchQuickProfileOptions } from '../types';\r\n\r\nexport async function fetchQuickProfile(\r\n  sourceId: string,\r\n  options: FetchQuickProfileOptions = {}\r\n): Promise<QuickProfileResponse> {\r\n  const { sampleSize = 500, graph, targetNodeId } = options;\r\n\r\n  const normalizedSampleSize =\r\n    sampleSize === 'all'\r\n      ? 0\r\n      : typeof sampleSize === 'number' && Number.isFinite(sampleSize)\r\n        ? Math.max(0, Math.round(sampleSize))\r\n        : 500;\r\n\r\n  const params = new URLSearchParams({\r\n    dataset_source_id: sourceId,\r\n    sample_size: String(normalizedSampleSize),\r\n  });\r\n\r\n  if (graph && Array.isArray(graph.nodes) && Array.isArray(graph.edges)) {\r\n    params.set('graph', JSON.stringify({ nodes: graph.nodes, edges: graph.edges }));\r\n  }\r\n\r\n  if (targetNodeId) {\r\n    params.set('target_node_id', targetNodeId);\r\n  }\r\n\r\n  const response = await fetch(`/ml-workflow/api/analytics/quick-profile?${params.toString()}`);\r\n\r\n  if (!response.ok) {\r\n    let message = 'Failed to generate dataset profile';\r\n    try {\r\n      const errorPayload = await response.clone().json();\r\n      const detail =\r\n        (typeof errorPayload?.detail === 'string' && errorPayload.detail.trim())\r\n          ? errorPayload.detail.trim()\r\n          : (typeof errorPayload?.error === 'string' && errorPayload.error.trim())\r\n            ? errorPayload.error.trim()\r\n            : (typeof errorPayload?.message === 'string' && errorPayload.message.trim())\r\n              ? errorPayload.message.trim()\r\n              : null;\r\n      if (detail) {\r\n        message = detail;\r\n      }\r\n    } catch {\r\n      try {\r\n        const fallbackText = await response.text();\r\n        const trimmed = fallbackText.trim();\r\n        if (trimmed) {\r\n          message = trimmed;\r\n        }\r\n      } catch {\r\n        /* swallow - retain default message */\r\n      }\r\n    }\r\n    throw new Error(message);\r\n  }\r\n\r\n  return response.json();\r\n}\r\n","// @ts-nocheck\r\nimport {\r\n  OutlierDiagnosticsResponse,\r\n  FetchOutlierDiagnosticsOptions,\r\n  ManualOutlierBounds,\r\n} from '../types';\r\n\r\nexport async function fetchOutlierDiagnostics(\r\n  sourceId: string,\r\n  options: FetchOutlierDiagnosticsOptions = {}\r\n): Promise<OutlierDiagnosticsResponse> {\r\n  const { config, sampleSize, graph, targetNodeId } = options;\r\n\r\n  const payload: Record<string, any> = {\r\n    dataset_source_id: sourceId,\r\n    sample_size:\r\n      sampleSize === 'all'\r\n        ? 0\r\n        : typeof sampleSize === 'number' && Number.isFinite(sampleSize)\r\n          ? sampleSize\r\n          : 300,\r\n  };\r\n\r\n  if (config && typeof config === 'object') {\r\n    const clampPercentile = (value: any, fallback: number) => {\r\n      const numeric = Number(value);\r\n      if (!Number.isFinite(numeric)) {\r\n        return fallback;\r\n      }\r\n      if (numeric < 0) {\r\n        return 0;\r\n      }\r\n      if (numeric > 100) {\r\n        return 100;\r\n      }\r\n      return numeric;\r\n    };\r\n\r\n    const sanitizeManualBounds = (raw: any): Record<string, ManualOutlierBounds> => {\r\n      if (!raw || typeof raw !== 'object') {\r\n        return {};\r\n      }\r\n      const result: Record<string, ManualOutlierBounds> = {};\r\n      Object.entries(raw as Record<string, any>).forEach(([key, value]) => {\r\n        const column = String(key ?? '').trim();\r\n        if (!column) {\r\n          return;\r\n        }\r\n\r\n        let lower: number | null = null;\r\n        let upper: number | null = null;\r\n\r\n        if (value && typeof value === 'object') {\r\n          const lowerCandidate = (value as any).lower ?? (value as any).min ?? (value as any).minimum ?? null;\r\n          const upperCandidate = (value as any).upper ?? (value as any).max ?? (value as any).maximum ?? null;\r\n\r\n          const parsedLower = Number(lowerCandidate);\r\n          if (Number.isFinite(parsedLower)) {\r\n            lower = parsedLower;\r\n          }\r\n\r\n          const parsedUpper = Number(upperCandidate);\r\n          if (Number.isFinite(parsedUpper)) {\r\n            upper = parsedUpper;\r\n          }\r\n        }\r\n\r\n        if (lower === null && upper === null) {\r\n          return;\r\n        }\r\n\r\n        if (lower !== null && upper !== null && lower > upper) {\r\n          const temp = lower;\r\n          lower = upper;\r\n          upper = temp;\r\n        }\r\n\r\n        result[column] = { lower, upper };\r\n      });\r\n      return result;\r\n    };\r\n\r\n    const lowerPercentile = clampPercentile((config as any).lower_percentile, 5);\r\n    const upperPercentile = clampPercentile((config as any).upper_percentile, 95);\r\n    payload.config = {\r\n      ...config,\r\n      method: config.method ?? 'z_score',\r\n      columns: Array.isArray(config.columns) ? config.columns : [],\r\n      z_threshold:\r\n        typeof config.z_threshold === 'number' && Number.isFinite(config.z_threshold)\r\n          ? config.z_threshold\r\n          : 3,\r\n      iqr_multiplier:\r\n        typeof config.iqr_multiplier === 'number' && Number.isFinite(config.iqr_multiplier)\r\n          ? config.iqr_multiplier\r\n          : 1.5,\r\n      lower_percentile: lowerPercentile,\r\n      upper_percentile: upperPercentile <= lowerPercentile ? Math.min(lowerPercentile + 1, 100) : upperPercentile,\r\n      manual_bounds: sanitizeManualBounds((config as any).manual_bounds),\r\n    };\r\n  }\r\n\r\n  if (graph && Array.isArray(graph.nodes) && Array.isArray(graph.edges)) {\r\n    payload.graph = {\r\n      nodes: graph.nodes,\r\n      edges: graph.edges,\r\n    };\r\n  }\r\n\r\n  if (targetNodeId) {\r\n    payload.target_node_id = targetNodeId;\r\n  }\r\n\r\n  const response = await fetch('/ml-workflow/api/analytics/outliers', {\r\n    method: 'POST',\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n    },\r\n    body: JSON.stringify(payload),\r\n  });\r\n\r\n  if (!response.ok) {\r\n    const detail = await response.text();\r\n    throw new Error(detail || 'Failed to load outlier diagnostics');\r\n  }\r\n\r\n  return response.json();\r\n}\r\n","// @ts-nocheck\r\nimport { FeaturePipelineResponse, FeaturePipelinePayload } from '../types';\r\n\r\nexport async function fetchPipeline(\r\n  sourceId: string\r\n): Promise<FeaturePipelineResponse | null> {\r\n  const response = await fetch(`/ml-workflow/api/pipelines/${encodeURIComponent(sourceId)}`);\r\n\r\n  if (response.status === 404) {\r\n    return null;\r\n  }\r\n\r\n  if (!response.ok) {\r\n    throw new Error('Failed to load saved pipeline');\r\n  }\r\n\r\n  return response.json();\r\n}\r\n\r\nexport async function savePipeline(\r\n  sourceId: string,\r\n  payload: FeaturePipelinePayload\r\n): Promise<FeaturePipelineResponse> {\r\n  const response = await fetch(`/ml-workflow/api/pipelines/${encodeURIComponent(sourceId)}`, {\r\n    method: 'POST',\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n    },\r\n    body: JSON.stringify(payload),\r\n  });\r\n\r\n  if (!response.ok) {\r\n    throw new Error('Failed to save pipeline');\r\n  }\r\n\r\n  return response.json();\r\n}\r\n\r\nexport async function fetchPipelineHistory(\r\n  sourceId: string,\r\n  limit = 10\r\n): Promise<FeaturePipelineResponse[]> {\r\n  const response = await fetch(\r\n    `/ml-workflow/api/pipelines/${encodeURIComponent(sourceId)}/history?limit=${encodeURIComponent(\r\n      String(limit)\r\n    )}`\r\n  );\r\n\r\n  if (response.status === 404) {\r\n    return [];\r\n  }\r\n\r\n  if (!response.ok) {\r\n    throw new Error('Failed to load pipeline history');\r\n  }\r\n\r\n  return response.json();\r\n}\r\n","// @ts-nocheck\r\nimport {\r\n  FetchPipelinePreviewRowsOptions,\r\n  PipelinePreviewRowsResponse,\r\n  PipelinePreviewRequest,\r\n  PipelinePreviewResponse,\r\n  FullExecutionSignal,\r\n} from '../types';\r\n\r\nexport async function fetchPipelinePreviewRows(\r\n  datasetSourceId: string,\r\n  options: FetchPipelinePreviewRowsOptions = {}\r\n): Promise<PipelinePreviewRowsResponse> {\r\n  const { offset, limit, mode } = options;\r\n\r\n  const params = new URLSearchParams();\r\n\r\n  if (typeof offset === 'number' && Number.isFinite(offset)) {\r\n    params.set('offset', String(offset));\r\n  }\r\n\r\n  if (typeof limit === 'number' && Number.isFinite(limit)) {\r\n    params.set('limit', String(limit));\r\n  }\r\n\r\n  if (mode) {\r\n    params.set('mode', mode);\r\n  }\r\n\r\n  const query = params.toString();\r\n  const url = `/ml-workflow/api/pipelines/${encodeURIComponent(datasetSourceId)}/preview/rows${\r\n    query ? `?${query}` : ''\r\n  }`;\r\n\r\n  const response = await fetch(url);\r\n\r\n  if (!response.ok) {\r\n    const detail = await response.text();\r\n    throw new Error(detail || 'Failed to load preview rows');\r\n  }\r\n\r\n  return response.json();\r\n}\r\n\r\nexport async function fetchPipelinePreview(\r\n  payload: PipelinePreviewRequest\r\n): Promise<PipelinePreviewResponse> {\r\n  const response = await fetch('/ml-workflow/api/pipelines/preview', {\r\n    method: 'POST',\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n    },\r\n    body: JSON.stringify(payload),\r\n  });\r\n\r\n  if (!response.ok) {\r\n    const detail = await response.text();\r\n    throw new Error(detail || 'Failed to load pipeline preview');\r\n  }\r\n\r\n  return response.json();\r\n}\r\n\r\nexport async function triggerFullDatasetExecution(\r\n  payload: PipelinePreviewRequest\r\n): Promise<PipelinePreviewResponse> {\r\n  const fullDatasetPayload = {\r\n    ...payload,\r\n    sample_size: 0,\r\n  };\r\n\r\n  const response = await fetch('/ml-workflow/api/pipelines/preview', {\r\n    method: 'POST',\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n    },\r\n    body: JSON.stringify(fullDatasetPayload),\r\n  });\r\n\r\n  if (!response.ok) {\r\n    const detail = await response.text();\r\n    throw new Error(detail || 'Failed to trigger full dataset execution');\r\n  }\r\n\r\n  return response.json();\r\n}\r\n\r\nexport async function fetchFullExecutionStatus(\r\n  datasetSourceId: string,\r\n  jobId: string\r\n): Promise<FullExecutionSignal> {\r\n  const response = await fetch(\r\n    `/ml-workflow/api/pipelines/${encodeURIComponent(datasetSourceId)}/full-execution/${encodeURIComponent(jobId)}`\r\n  );\r\n\r\n  if (!response.ok) {\r\n    const detail = await response.text();\r\n    throw new Error(detail || 'Failed to fetch full execution status');\r\n  }\r\n\r\n  return response.json();\r\n}\r\n","// @ts-nocheck\r\nimport {\r\n  TrainingJobCreatePayload,\r\n  TrainingJobBatchResponse,\r\n  TrainingJobResponse,\r\n  TrainingJobListResponse,\r\n  FetchTrainingJobsOptions,\r\n} from '../types';\r\n\r\nexport async function createTrainingJob(\r\n  payload: TrainingJobCreatePayload\r\n): Promise<TrainingJobBatchResponse> {\r\n  const response = await fetch('/ml-workflow/api/training-jobs', {\r\n    method: 'POST',\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n    },\r\n    credentials: 'include',\r\n    body: JSON.stringify(payload),\r\n  });\r\n\r\n  if (!response.ok) {\r\n    if (response.status === 401 || response.status === 403) {\r\n      throw new Error('Sign in to launch training jobs.');\r\n    }\r\n    const detail = await response.text();\r\n    throw new Error(detail || 'Failed to enqueue training job');\r\n  }\r\n\r\n  const data = await response.json();\r\n\r\n  if (data && Array.isArray(data?.jobs)) {\r\n    const jobs: TrainingJobResponse[] = data.jobs;\r\n    const total = typeof data.total === 'number' ? data.total : jobs.length;\r\n    return { jobs, total };\r\n  }\r\n\r\n  if (data && data.id) {\r\n    return { jobs: [data as TrainingJobResponse], total: 1 };\r\n  }\r\n\r\n  return { jobs: [], total: 0 };\r\n}\r\n\r\nexport async function fetchTrainingJob(jobId: string): Promise<TrainingJobResponse> {\r\n  if (!jobId) {\r\n    throw new Error('jobId is required');\r\n  }\r\n\r\n  const response = await fetch(`/ml-workflow/api/training-jobs/${encodeURIComponent(jobId)}`, {\r\n    credentials: 'include',\r\n  });\r\n\r\n  if (response.status === 404) {\r\n    throw new Error('Training job not found');\r\n  }\r\n\r\n  if (!response.ok) {\r\n    if (response.status === 401 || response.status === 403) {\r\n      throw new Error('Sign in to view this training job.');\r\n    }\r\n    const detail = await response.text();\r\n    throw new Error(detail || 'Failed to load training job');\r\n  }\r\n\r\n  return response.json();\r\n}\r\n\r\nexport async function fetchTrainingJobs(\r\n  options: FetchTrainingJobsOptions = {}\r\n): Promise<TrainingJobListResponse> {\r\n  const params = new URLSearchParams();\r\n\r\n  if (options.datasetSourceId) {\r\n    params.set('dataset_source_id', options.datasetSourceId);\r\n  }\r\n\r\n  if (options.pipelineId) {\r\n    params.set('pipeline_id', options.pipelineId);\r\n  }\r\n\r\n  if (options.nodeId) {\r\n    params.set('node_id', options.nodeId);\r\n  }\r\n\r\n  if (typeof options.limit === 'number' && Number.isFinite(options.limit)) {\r\n    params.set('limit', String(options.limit));\r\n  }\r\n\r\n  const query = params.toString();\r\n  const response = await fetch(`/ml-workflow/api/training-jobs${query ? `?${query}` : ''}`, {\r\n    credentials: 'include',\r\n  });\r\n\r\n  if (!response.ok) {\r\n    if (response.status === 401 || response.status === 403) {\r\n      throw new Error('Sign in to view training jobs.');\r\n    }\r\n    const detail = await response.text();\r\n    throw new Error(detail || 'Failed to load training jobs');\r\n  }\r\n\r\n  return response.json();\r\n}\r\n","// @ts-nocheck\r\nimport { ModelEvaluationRequest, ModelEvaluationReport } from '../types';\r\n\r\nexport async function evaluateTrainingJob(\r\n  jobId: string,\r\n  payload: ModelEvaluationRequest\r\n): Promise<ModelEvaluationReport> {\r\n  if (!jobId) {\r\n    throw new Error('jobId is required for evaluation');\r\n  }\r\n\r\n  const response = await fetch(\r\n    `/ml-workflow/api/training-jobs/${encodeURIComponent(jobId)}/evaluate`,\r\n    {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n      credentials: 'include',\r\n      body: JSON.stringify(payload ?? {}),\r\n    }\r\n  );\r\n\r\n  if (!response.ok) {\r\n    if (response.status === 401 || response.status === 403) {\r\n      throw new Error('Sign in to evaluate this model.');\r\n    }\r\n    const detail = await response.text();\r\n    throw new Error(detail || 'Failed to evaluate model');\r\n  }\r\n\r\n  return response.json();\r\n}\r\n","// @ts-nocheck\r\nimport {\r\n  HyperparameterTuningJobCreatePayload,\r\n  HyperparameterTuningJobBatchResponse,\r\n  HyperparameterTuningJobResponse,\r\n  HyperparameterTuningJobListResponse,\r\n  FetchHyperparameterTuningJobsOptions,\r\n  ModelHyperparametersResponse,\r\n  BestHyperparametersResponse,\r\n  FetchBestHyperparametersOptions,\r\n} from '../types';\r\n\r\nexport async function createHyperparameterTuningJob(\r\n  payload: HyperparameterTuningJobCreatePayload\r\n): Promise<HyperparameterTuningJobBatchResponse> {\r\n  const response = await fetch('/ml-workflow/api/hyperparameter-tuning-jobs', {\r\n    method: 'POST',\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n    },\r\n    credentials: 'include',\r\n    body: JSON.stringify(payload),\r\n  });\r\n\r\n  if (!response.ok) {\r\n    if (response.status === 401 || response.status === 403) {\r\n      throw new Error('Sign in to launch tuning jobs.');\r\n    }\r\n    const detail = await response.text();\r\n    throw new Error(detail || 'Failed to enqueue tuning job');\r\n  }\r\n\r\n  const data = await response.json();\r\n\r\n  if (data && Array.isArray(data?.jobs)) {\r\n    const jobs: HyperparameterTuningJobResponse[] = data.jobs;\r\n    const total = typeof data.total === 'number' ? data.total : jobs.length;\r\n    return { jobs, total };\r\n  }\r\n\r\n  if (data && data.id) {\r\n    return { jobs: [data as HyperparameterTuningJobResponse], total: 1 };\r\n  }\r\n\r\n  return { jobs: [], total: 0 };\r\n}\r\n\r\nexport async function fetchHyperparameterTuningJob(\r\n  jobId: string\r\n): Promise<HyperparameterTuningJobResponse> {\r\n  if (!jobId) {\r\n    throw new Error('jobId is required');\r\n  }\r\n\r\n  const response = await fetch(\r\n    `/ml-workflow/api/hyperparameter-tuning-jobs/${encodeURIComponent(jobId)}`,\r\n    {\r\n      credentials: 'include',\r\n    }\r\n  );\r\n\r\n  if (response.status === 404) {\r\n    throw new Error('Tuning job not found');\r\n  }\r\n\r\n  if (!response.ok) {\r\n    if (response.status === 401 || response.status === 403) {\r\n      throw new Error('Sign in to view this tuning job.');\r\n    }\r\n    const detail = await response.text();\r\n    throw new Error(detail || 'Failed to load tuning job');\r\n  }\r\n\r\n  return response.json();\r\n}\r\n\r\nexport async function fetchHyperparameterTuningJobs(\r\n  options: FetchHyperparameterTuningJobsOptions = {}\r\n): Promise<HyperparameterTuningJobListResponse> {\r\n  const params = new URLSearchParams();\r\n\r\n  if (options.datasetSourceId) {\r\n    params.set('dataset_source_id', options.datasetSourceId);\r\n  }\r\n\r\n  if (options.pipelineId) {\r\n    params.set('pipeline_id', options.pipelineId);\r\n  }\r\n\r\n  if (options.nodeId) {\r\n    params.set('node_id', options.nodeId);\r\n  }\r\n\r\n  if (typeof options.limit === 'number' && Number.isFinite(options.limit)) {\r\n    params.set('limit', String(options.limit));\r\n  }\r\n\r\n  const query = params.toString();\r\n  const response = await fetch(\r\n    `/ml-workflow/api/hyperparameter-tuning-jobs${query ? `?${query}` : ''}`,\r\n    {\r\n      credentials: 'include',\r\n    }\r\n  );\r\n\r\n  if (!response.ok) {\r\n    if (response.status === 401 || response.status === 403) {\r\n      throw new Error('Sign in to view tuning jobs.');\r\n    }\r\n    const detail = await response.text();\r\n    throw new Error(detail || 'Failed to load tuning jobs');\r\n  }\r\n\r\n  return response.json();\r\n}\r\n\r\nexport async function fetchModelHyperparameters(\r\n  modelType: string\r\n): Promise<ModelHyperparametersResponse> {\r\n  const response = await fetch(`/ml-workflow/api/model-hyperparameters/${encodeURIComponent(modelType)}`);\r\n\r\n  if (!response.ok) {\r\n    if (response.status === 404) {\r\n      throw new Error(`Model type '${modelType}' not found`);\r\n    }\r\n    const detail = await response.text();\r\n    throw new Error(detail || 'Failed to load model hyperparameters');\r\n  }\r\n\r\n  return response.json();\r\n}\r\n\r\nexport async function fetchBestHyperparameters(\r\n  modelType: string,\r\n  options: FetchBestHyperparametersOptions = {}\r\n): Promise<BestHyperparametersResponse> {\r\n  const params = new URLSearchParams();\r\n\r\n  if (options.pipelineId) {\r\n    params.set('pipeline_id', options.pipelineId);\r\n  }\r\n  if (options.datasetSourceId) {\r\n    params.set('dataset_source_id', options.datasetSourceId);\r\n  }\r\n\r\n  const query = params.toString();\r\n  const response = await fetch(\r\n    `/ml-workflow/api/hyperparameter-tuning/best-params/${encodeURIComponent(modelType)}${\r\n      query ? `?${query}` : ''\r\n    }`,\r\n    {\r\n      credentials: 'include',\r\n    }\r\n  );\r\n\r\n  if (!response.ok) {\r\n    if (response.status === 404) {\r\n      throw new Error(`Model type '${modelType}' not found`);\r\n    }\r\n    const detail = await response.text();\r\n    throw new Error(detail || 'Failed to fetch best hyperparameters');\r\n  }\r\n\r\n  return response.json();\r\n}\r\n","// @ts-nocheck\r\nimport { FeatureGraph } from './types';\r\n\r\nconst sortGraphValue = (value: any): any => {\r\n  if (Array.isArray(value)) {\r\n    return value.map((item) => sortGraphValue(item));\r\n  }\r\n  if (value && typeof value === 'object') {\r\n    const sortedKeys = Object.keys(value).sort();\r\n    const result: Record<string, any> = {};\r\n    sortedKeys.forEach((key) => {\r\n      result[key] = sortGraphValue(value[key]);\r\n    });\r\n    return result;\r\n  }\r\n  return value;\r\n};\r\n\r\nconst toHex = (buffer: ArrayBuffer): string => {\r\n  return Array.from(new Uint8Array(buffer))\r\n    .map((byte) => byte.toString(16).padStart(2, '0'))\r\n    .join('');\r\n};\r\n\r\nconst sha256Hex = async (value: string): Promise<string> => {\r\n  if (!globalThis.crypto || !globalThis.crypto.subtle) {\r\n    throw new Error('Secure hashing is not available in this environment');\r\n  }\r\n  const encoder = new TextEncoder();\r\n  const digest = await globalThis.crypto.subtle.digest('SHA-256', encoder.encode(value));\r\n  return toHex(digest);\r\n};\r\n\r\nconst sanitizeGraphForHash = (graph: FeatureGraph | null | undefined): FeatureGraph => {\r\n  const rawNodes = graph && Array.isArray(graph.nodes) ? graph.nodes : [];\r\n  const rawEdges = graph && Array.isArray(graph.edges) ? graph.edges : [];\r\n\r\n  const safeNodes = rawNodes\r\n    .map((node: any) => {\r\n      let config = null;\r\n      if (node && node.data && typeof node.data === 'object') {\r\n        const candidate = node.data.config;\r\n        if (candidate !== undefined) {\r\n          try {\r\n            config = JSON.parse(JSON.stringify(candidate));\r\n          } catch (error) {\r\n            config = candidate;\r\n          }\r\n        }\r\n      }\r\n      return {\r\n        id: node && Object.prototype.hasOwnProperty.call(node, 'id') ? node.id ?? null : null,\r\n        type: node && Object.prototype.hasOwnProperty.call(node, 'type') ? node.type ?? null : null,\r\n        catalogType:\r\n          node && node.data && Object.prototype.hasOwnProperty.call(node.data, 'catalogType')\r\n            ? node.data.catalogType ?? null\r\n            : null,\r\n        config: config,\r\n      };\r\n    })\r\n    .sort((a, b) => {\r\n      const first = typeof a.id === 'string' ? a.id : String(a.id ?? '');\r\n      const second = typeof b.id === 'string' ? b.id : String(b.id ?? '');\r\n      return first.localeCompare(second);\r\n    });\r\n\r\n  const safeEdges = rawEdges\r\n    .map((edge: any) => ({\r\n      source: edge && Object.prototype.hasOwnProperty.call(edge, 'source') ? edge.source ?? null : null,\r\n      target: edge && Object.prototype.hasOwnProperty.call(edge, 'target') ? edge.target ?? null : null,\r\n      sourceHandle:\r\n        edge && Object.prototype.hasOwnProperty.call(edge, 'sourceHandle') ? edge.sourceHandle ?? null : null,\r\n      targetHandle:\r\n        edge && Object.prototype.hasOwnProperty.call(edge, 'targetHandle') ? edge.targetHandle ?? null : null,\r\n    }))\r\n    .sort((a, b) => {\r\n      const sourceCompare = String(a.source ?? '').localeCompare(String(b.source ?? ''));\r\n      if (sourceCompare !== 0) {\r\n        return sourceCompare;\r\n      }\r\n      return String(a.target ?? '').localeCompare(String(b.target ?? ''));\r\n    });\r\n\r\n  return {\r\n    nodes: safeNodes,\r\n    edges: safeEdges,\r\n  };\r\n};\r\n\r\nexport async function generatePipelineId(\r\n  datasetSourceId: string,\r\n  graph: FeatureGraph | null | undefined\r\n): Promise<string> {\r\n  if (!datasetSourceId) {\r\n    throw new Error('datasetSourceId is required to compute pipeline ID');\r\n  }\r\n\r\n  const safeGraph = sanitizeGraphForHash(graph);\r\n  const graphJson = JSON.stringify(sortGraphValue(safeGraph));\r\n  const hash = await sha256Hex(graphJson);\r\n  return `${datasetSourceId}_${hash.slice(0, 8)}`;\r\n}\r\n","import React, { useCallback, useEffect, useMemo, useRef, useState } from 'react';\r\nimport type { Dispatch, SetStateAction } from 'react';\r\nimport type {\r\n  DropColumnCandidate,\r\n  DropColumnRecommendationFilter,\r\n} from '../../../../api';\r\nimport { fetchDropColumnRecommendations } from '../../../../api';\r\n\r\nexport type DropMissingColumnsArgs = {\r\n  hasDropColumnSource: boolean;\r\n  sourceId?: string | null;\r\n  nodeId?: string | null;\r\n  graphContext?: { nodes: any[]; edges: any[] } | null;\r\n  hasReachableSource: boolean;\r\n  columnTypeMap: Record<string, string>;\r\n  setAvailableColumns: Dispatch<SetStateAction<string[]>>;\r\n  setColumnSearch: Dispatch<SetStateAction<string>>;\r\n  setColumnMissingMap: Dispatch<SetStateAction<Record<string, number>>>;\r\n  setColumnTypeMap: Dispatch<SetStateAction<Record<string, string>>>;\r\n  setColumnSuggestions: Dispatch<SetStateAction<Record<string, string[]>>>;\r\n};\r\n\r\nexport type DropMissingColumnsState = {\r\n  hasDropColumnSource: boolean;\r\n  availableFilters: DropColumnRecommendationFilter[];\r\n  activeFilterId: string | null;\r\n  setActiveFilterId: Dispatch<SetStateAction<string | null>>;\r\n  recommendations: DropColumnCandidate[];\r\n  filteredRecommendations: DropColumnCandidate[];\r\n  formatSignalName: (signal?: string | null) => string | null;\r\n  isFetchingRecommendations: boolean;\r\n  recommendationsError: string | null;\r\n  recommendationsGeneratedAt: string | null;\r\n  suggestedThreshold: number | null;\r\n  refreshRecommendations: () => void;\r\n};\r\n\r\nexport const useDropMissingColumns = ({\r\n  hasDropColumnSource,\r\n  sourceId,\r\n  nodeId,\r\n  graphContext,\r\n  hasReachableSource,\r\n  columnTypeMap,\r\n  setAvailableColumns,\r\n  setColumnSearch,\r\n  setColumnMissingMap,\r\n  setColumnTypeMap,\r\n  setColumnSuggestions,\r\n}: DropMissingColumnsArgs): DropMissingColumnsState => {\r\n  const [availableFilters, setAvailableFilters] = useState<DropColumnRecommendationFilter[]>([]);\r\n  const [activeFilterId, setActiveFilterId] = useState<string | null>(null);\r\n  const [recommendations, setRecommendations] = useState<DropColumnCandidate[]>([]);\r\n  const [recommendationsError, setRecommendationsError] = useState<string | null>(null);\r\n  const [isFetchingRecommendations, setIsFetchingRecommendations] = useState(false);\r\n  const [recommendationsGeneratedAt, setRecommendationsGeneratedAt] = useState<string | null>(null);\r\n  const [suggestedThreshold, setSuggestedThreshold] = useState<number | null>(null);\r\n  const [requestId, setRequestId] = useState(0);\r\n\r\n  const columnTypeMapRef = useRef(columnTypeMap);\r\n  useEffect(() => {\r\n    columnTypeMapRef.current = columnTypeMap;\r\n  }, [columnTypeMap]);\r\n\r\n  useEffect(() => {\r\n    let isActive = true;\r\n\r\n    const resetState = (message?: string | null) => {\r\n      setRecommendations([]);\r\n      setRecommendationsError(message ?? null);\r\n      setRecommendationsGeneratedAt(null);\r\n      setSuggestedThreshold(null);\r\n      setIsFetchingRecommendations(false);\r\n      setAvailableFilters([]);\r\n      setActiveFilterId(null);\r\n      setAvailableColumns([]);\r\n      setColumnSearch('');\r\n      setColumnMissingMap({});\r\n      setColumnTypeMap({});\r\n      setColumnSuggestions({});\r\n    };\r\n\r\n    if (!hasDropColumnSource) {\r\n      resetState();\r\n      return () => {\r\n        isActive = false;\r\n      };\r\n    }\r\n\r\n    if (!sourceId) {\r\n      resetState();\r\n      return () => {\r\n        isActive = false;\r\n      };\r\n    }\r\n\r\n    if (!hasReachableSource) {\r\n      resetState('Connect this step to an upstream output to load recommendations.');\r\n      return () => {\r\n        isActive = false;\r\n      };\r\n    }\r\n\r\n    setIsFetchingRecommendations(true);\r\n    setRecommendationsError(null);\r\n\r\n    fetchDropColumnRecommendations(sourceId, {\r\n      graph: graphContext,\r\n      targetNodeId: nodeId ?? null,\r\n    })\r\n      .then((result) => {\r\n        if (!isActive) {\r\n          return;\r\n        }\r\n\r\n        const candidates = Array.isArray(result?.candidates) ? result.candidates : [];\r\n        setRecommendations(candidates);\r\n        setRecommendationsGeneratedAt(result?.generated_at ?? null);\r\n        setSuggestedThreshold(\r\n          typeof result?.suggested_threshold === 'number' ? Number(result.suggested_threshold) : null,\r\n        );\r\n\r\n        const filters = Array.isArray(result?.available_filters) ? result.available_filters : [];\r\n        setAvailableFilters(filters);\r\n        setActiveFilterId((previous) =>\r\n          previous && filters.some((filter) => filter.id === previous) ? previous : null,\r\n        );\r\n\r\n        const sanitizedMissingMap: Record<string, number> = {};\r\n        if (\r\n          result &&\r\n          typeof result === 'object' &&\r\n          result?.column_missing_map &&\r\n          typeof result.column_missing_map === 'object'\r\n        ) {\r\n          Object.entries(result.column_missing_map).forEach(([key, rawValue]) => {\r\n            const trimmedKey = String(key ?? '').trim();\r\n            if (!trimmedKey) {\r\n              return;\r\n            }\r\n            const numericValue = Number(rawValue);\r\n            if (!Number.isFinite(numericValue)) {\r\n              return;\r\n            }\r\n            sanitizedMissingMap[trimmedKey] = Number(numericValue);\r\n          });\r\n        }\r\n\r\n        const columnSet = new Set<string>();\r\n        if (Array.isArray(result?.all_columns)) {\r\n          result.all_columns.forEach((column) => {\r\n            const trimmed = String(column ?? '').trim();\r\n            if (trimmed) {\r\n              columnSet.add(trimmed);\r\n            }\r\n          });\r\n        }\r\n        Object.keys(columnTypeMapRef.current ?? {}).forEach((column) => columnSet.add(column));\r\n\r\n        const orderedColumns = Array.from(columnSet).sort((a, b) => a.localeCompare(b));\r\n        orderedColumns.forEach((column) => {\r\n          if (!Object.prototype.hasOwnProperty.call(sanitizedMissingMap, column)) {\r\n            sanitizedMissingMap[column] = 0;\r\n          }\r\n        });\r\n\r\n        setAvailableColumns(orderedColumns);\r\n        setColumnSearch('');\r\n        setColumnMissingMap(sanitizedMissingMap);\r\n        setColumnTypeMap((previous) => {\r\n          const columnTypePayload = (result as any)?.column_type_map;\r\n          if (!columnTypePayload || typeof columnTypePayload !== 'object') {\r\n            return previous;\r\n          }\r\n          const next = { ...previous } as Record<string, string>;\r\n          Object.entries(columnTypePayload as Record<string, any>).forEach(([key, value]) => {\r\n            const trimmedKey = String(key ?? '').trim();\r\n            if (!trimmedKey) {\r\n              return;\r\n            }\r\n            const trimmedValue = String(value ?? '').trim();\r\n            next[trimmedKey] = trimmedValue || previous[trimmedKey] || '';\r\n          });\r\n          return next;\r\n        });\r\n\r\n        setColumnSuggestions((previous) => {\r\n          const columnRecommendationPayload = (result as any)?.column_recommendations;\r\n          if (!columnRecommendationPayload || typeof columnRecommendationPayload !== 'object') {\r\n            return previous;\r\n          }\r\n          const next: Record<string, string[]> = {};\r\n          Object.entries(columnRecommendationPayload as Record<string, any>).forEach(([key, values]) => {\r\n            const trimmedKey = String(key ?? '').trim();\r\n            if (!trimmedKey) {\r\n              return;\r\n            }\r\n            const list = Array.isArray(values)\r\n              ? values.map((value) => String(value ?? '').trim()).filter(Boolean)\r\n              : [];\r\n            next[trimmedKey] = list;\r\n          });\r\n          return next;\r\n        });\r\n      })\r\n      .catch((error: any) => {\r\n        if (!isActive) {\r\n          return;\r\n        }\r\n        resetState(error?.message ?? 'Unable to load recommendations');\r\n      })\r\n      .finally(() => {\r\n        if (isActive) {\r\n          setIsFetchingRecommendations(false);\r\n        }\r\n      });\r\n\r\n    return () => {\r\n      isActive = false;\r\n    };\r\n  }, [\r\n    columnTypeMapRef,\r\n    graphContext,\r\n    hasDropColumnSource,\r\n    hasReachableSource,\r\n    nodeId,\r\n    requestId,\r\n    setAvailableColumns,\r\n    setColumnMissingMap,\r\n    setColumnSearch,\r\n    setColumnSuggestions,\r\n    setColumnTypeMap,\r\n    sourceId,\r\n  ]);\r\n\r\n  const refreshRecommendations = useCallback(() => {\r\n    if (!hasDropColumnSource || !sourceId || !hasReachableSource) {\r\n      return;\r\n    }\r\n    setRequestId((value) => value + 1);\r\n  }, [hasDropColumnSource, hasReachableSource, sourceId]);\r\n\r\n  const signalLabelMap = useMemo(() => {\r\n    const entries = new Map<string, string>();\r\n    availableFilters.forEach((filter) => {\r\n      if (filter?.id) {\r\n        entries.set(filter.id, filter.label);\r\n      }\r\n    });\r\n    return entries;\r\n  }, [availableFilters]);\r\n\r\n  const formatSignalName = useCallback(\r\n    (signal?: string | null) => {\r\n      if (!signal) {\r\n        return null;\r\n      }\r\n      if (signalLabelMap.has(signal)) {\r\n        return signalLabelMap.get(signal) ?? null;\r\n      }\r\n      const normalized = signal\r\n        .split('_')\r\n        .filter(Boolean)\r\n        .map((segment) => segment.charAt(0).toUpperCase() + segment.slice(1))\r\n        .join(' ');\r\n      return normalized || signal;\r\n    },\r\n    [signalLabelMap],\r\n  );\r\n\r\n  const filteredRecommendations = useMemo(() => {\r\n    if (!activeFilterId) {\r\n      return recommendations;\r\n    }\r\n    return recommendations.filter((candidate) =>\r\n      Array.isArray(candidate?.signals) && candidate.signals.includes(activeFilterId),\r\n    );\r\n  }, [activeFilterId, recommendations]);\r\n\r\n  return {\r\n    hasDropColumnSource,\r\n    availableFilters,\r\n    activeFilterId,\r\n    setActiveFilterId,\r\n    recommendations,\r\n    filteredRecommendations,\r\n    formatSignalName,\r\n    isFetchingRecommendations,\r\n    recommendationsError,\r\n    recommendationsGeneratedAt,\r\n    suggestedThreshold,\r\n    refreshRecommendations,\r\n  };\r\n};\r\n\r\ntype DropMissingColumnsSectionProps = {\r\n  sourceId?: string | null;\r\n  availableFilters: DropColumnRecommendationFilter[];\r\n  activeFilterId: string | null;\r\n  setActiveFilterId: Dispatch<SetStateAction<string | null>>;\r\n  recommendations: DropColumnCandidate[];\r\n  filteredRecommendations: DropColumnCandidate[];\r\n  isFetchingRecommendations: boolean;\r\n  recommendationsError: string | null;\r\n  relativeGeneratedAt: string | null;\r\n  formatSignalName: (signal?: string | null) => string | null;\r\n  formatMissingPercentage: (value?: number | null) => string;\r\n  getPriorityClass: (priority?: string | null) => string | null;\r\n  getPriorityLabel: (priority?: string | null) => string | null;\r\n  handleToggleColumn: (column: string) => void;\r\n  selectedColumns: string[];\r\n};\r\n\r\nexport const DropMissingColumnsSection: React.FC<DropMissingColumnsSectionProps> = ({\r\n  sourceId,\r\n  availableFilters,\r\n  activeFilterId,\r\n  setActiveFilterId,\r\n  recommendations,\r\n  filteredRecommendations,\r\n  isFetchingRecommendations,\r\n  recommendationsError,\r\n  relativeGeneratedAt,\r\n  formatSignalName,\r\n  formatMissingPercentage,\r\n  getPriorityClass,\r\n  getPriorityLabel,\r\n  handleToggleColumn,\r\n  selectedColumns,\r\n}) => {\r\n  const renderRecommendationOption = (candidate: DropColumnCandidate) => {\r\n    if (!candidate?.name) {\r\n      return null;\r\n    }\r\n\r\n    const name = String(candidate.name);\r\n    const checked = selectedColumns.includes(name);\r\n    const priorityClass = getPriorityClass(candidate.priority);\r\n    const priorityLabel = getPriorityLabel(candidate.priority);\r\n    const signalLabels = Array.isArray(candidate?.signals)\r\n      ? candidate.signals\r\n          .map((signal) => formatSignalName(signal))\r\n          .filter((label): label is string => Boolean(label))\r\n      : [];\r\n\r\n    return (\r\n      <label key={name} className=\"canvas-modal__checkbox-item\">\r\n        <input type=\"checkbox\" checked={checked} onChange={() => handleToggleColumn(name)} />\r\n        <div className=\"canvas-modal__checkbox-content\">\r\n          <div className=\"canvas-modal__recommendation-name\">{name}</div>\r\n          <div className=\"canvas-modal__recommendation-meta\">\r\n            {candidate.missing_percentage !== undefined &&\r\n              candidate.missing_percentage !== null && (\r\n                <span>{`Missing: ${formatMissingPercentage(candidate.missing_percentage)}`}</span>\r\n              )}\r\n            {priorityClass && priorityLabel && (\r\n              <span className={`canvas-modal__priority-badge canvas-modal__priority-badge--${priorityClass}`}>\r\n                {priorityLabel}\r\n              </span>\r\n            )}\r\n          </div>\r\n          {signalLabels.length > 0 && (\r\n            <div className=\"canvas-modal__signal-badges\">\r\n              {signalLabels.map((label) => (\r\n                <span key={`${name}-${label}`} className=\"canvas-modal__signal-badge\">\r\n                  {label}\r\n                </span>\r\n              ))}\r\n            </div>\r\n          )}\r\n          {candidate.reason && <p className=\"canvas-modal__recommendation-reason\">{candidate.reason}</p>}\r\n        </div>\r\n      </label>\r\n    );\r\n  };\r\n\r\n  if (!sourceId) {\r\n    return (\r\n      <p className=\"canvas-modal__note canvas-modal__note--warning\">\r\n        Choose a dataset to load EDA-backed column suggestions.\r\n      </p>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {availableFilters.length > 0 && (\r\n        <div className=\"canvas-modal__filter-row\" role=\"group\" aria-label=\"Recommendation filters\">\r\n          <button\r\n            type=\"button\"\r\n            className={`canvas-modal__filter-button${\r\n              !activeFilterId ? ' canvas-modal__filter-button--active' : ''\r\n            }`}\r\n            onClick={() => setActiveFilterId(null)}\r\n          >\r\n            All reasons ({recommendations.length})\r\n          </button>\r\n          {availableFilters.map((filter) => {\r\n            const isActive = activeFilterId === filter.id;\r\n            return (\r\n              <button\r\n                key={filter.id}\r\n                type=\"button\"\r\n                className={`canvas-modal__filter-button${\r\n                  isActive ? ' canvas-modal__filter-button--active' : ''\r\n                }`}\r\n                onClick={() =>\r\n                  setActiveFilterId((current) => (current === filter.id ? null : filter.id))\r\n                }\r\n                title={filter.description ?? undefined}\r\n              >\r\n                {filter.label} ({filter.count})\r\n              </button>\r\n            );\r\n          })}\r\n        </div>\r\n      )}\r\n      {isFetchingRecommendations && (\r\n        <p className=\"canvas-modal__note\">Loading column recommendations</p>\r\n      )}\r\n      {!isFetchingRecommendations && recommendationsError && (\r\n        <p className=\"canvas-modal__note canvas-modal__note--error\">{recommendationsError}</p>\r\n      )}\r\n      {!isFetchingRecommendations && !recommendationsError && (\r\n        <>\r\n          {relativeGeneratedAt && (\r\n            <p className=\"canvas-modal__note\">Recommendations generated {relativeGeneratedAt}.</p>\r\n          )}\r\n          {filteredRecommendations.length ? (\r\n            <div className=\"canvas-modal__checkbox-list\" role=\"group\" aria-label=\"Recommended columns\">\r\n              {filteredRecommendations.map((candidate) => renderRecommendationOption(candidate))}\r\n            </div>\r\n          ) : (\r\n            <p className=\"canvas-modal__note\">\r\n              {activeFilterId\r\n                ? 'No columns matched this filter in the latest quality scan.'\r\n                : 'No columns crossed the missingness threshold in the latest quality scan.'}\r\n            </p>\r\n          )}\r\n        </>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n","import React from 'react';\r\nimport type { FeatureNodeParameter } from '../../../../api';\r\n\r\nexport type DropMissingRowsSectionProps = {\r\n  thresholdParameter: FeatureNodeParameter | null;\r\n  dropIfAnyParameter: FeatureNodeParameter | null;\r\n  renderParameterField: (parameter: FeatureNodeParameter) => React.ReactNode;\r\n};\r\n\r\nexport const DropMissingRowsSection: React.FC<DropMissingRowsSectionProps> = ({\r\n  thresholdParameter,\r\n  dropIfAnyParameter,\r\n  renderParameterField,\r\n}) => {\r\n  if (!thresholdParameter && !dropIfAnyParameter) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <section className=\"canvas-modal__section\">\r\n      <div className=\"canvas-modal__section-header\">\r\n        <h3>Row missingness</h3>\r\n      </div>\r\n      {thresholdParameter && renderParameterField(thresholdParameter)}\r\n      {dropIfAnyParameter && renderParameterField(dropIfAnyParameter)}\r\n    </section>\r\n  );\r\n};\r\n","export type KeepStrategy = 'first' | 'last' | 'none';\r\n\r\nexport const DEFAULT_KEEP_STRATEGY: KeepStrategy = 'first';\r\n\r\nexport const DEDUP_KEEP_OPTIONS: Array<{ value: KeepStrategy; label: string }> = [\r\n  { value: 'first', label: 'Keep first occurrence' },\r\n  { value: 'last', label: 'Keep last occurrence' },\r\n  { value: 'none', label: 'Drop all duplicates' },\r\n];\r\n","import React from 'react';\r\nimport type { FeatureNodeParameter } from '../../../../api';\r\nimport { DEDUP_KEEP_OPTIONS, type KeepStrategy } from './removeDuplicatesSettings';\r\n\r\nexport type RemoveDuplicatesSectionProps = {\r\n  sourceId?: string | null;\r\n  hasReachableSource: boolean;\r\n  removeDuplicatesColumnsParameter: FeatureNodeParameter | null;\r\n  removeDuplicatesKeepParameter: FeatureNodeParameter | null;\r\n  renderMultiSelectField: (parameter: FeatureNodeParameter) => React.ReactNode;\r\n  removeDuplicatesKeepSelectId: string;\r\n  removeDuplicatesKeep: KeepStrategy;\r\n  onKeepChange: (value: KeepStrategy) => void;\r\n};\r\n\r\nexport const RemoveDuplicatesSection: React.FC<RemoveDuplicatesSectionProps> = ({\r\n  sourceId,\r\n  hasReachableSource,\r\n  removeDuplicatesColumnsParameter,\r\n  removeDuplicatesKeepParameter,\r\n  renderMultiSelectField,\r\n  removeDuplicatesKeepSelectId,\r\n  removeDuplicatesKeep,\r\n  onKeepChange,\r\n}) => {\r\n  if (!removeDuplicatesColumnsParameter && !removeDuplicatesKeepParameter) {\r\n    return null;\r\n  }\r\n\r\n  const handleSelectChange = (event: React.ChangeEvent<HTMLSelectElement>) => {\r\n    const rawValue = event.target.value as KeepStrategy;\r\n    const normalized: KeepStrategy = rawValue === 'last' || rawValue === 'none' ? rawValue : 'first';\r\n    onKeepChange(normalized);\r\n  };\r\n\r\n  return (\r\n    <section className=\"canvas-modal__section\">\r\n      <div className=\"canvas-modal__section-header\">\r\n        <h3>Duplicate handling</h3>\r\n      </div>\r\n      <p className=\"canvas-modal__note\">\r\n        Choose comparison columns and decide whether to keep the first row, last row, or drop all duplicates.\r\n      </p>\r\n      {!sourceId ? (\r\n        <p className=\"canvas-modal__note canvas-modal__note--warning\">\r\n          Select a dataset to load the available columns for duplicate checks.\r\n        </p>\r\n      ) : !hasReachableSource ? (\r\n        <p className=\"canvas-modal__note canvas-modal__note--warning\">\r\n          Connect this node to an upstream output to inspect its columns.\r\n        </p>\r\n      ) : null}\r\n      {removeDuplicatesColumnsParameter && (\r\n        <div className=\"canvas-modal__subsection\">\r\n          <h4>Columns to compare</h4>\r\n          {renderMultiSelectField(removeDuplicatesColumnsParameter)}\r\n        </div>\r\n      )}\r\n      {removeDuplicatesKeepParameter && (\r\n        <div className=\"canvas-modal__parameter-field\">\r\n          <label htmlFor={removeDuplicatesKeepSelectId} className=\"canvas-modal__parameter-label\">\r\n            {removeDuplicatesKeepParameter.label ?? 'Keep strategy'}\r\n          </label>\r\n          {removeDuplicatesKeepParameter.description && (\r\n            <p className=\"canvas-modal__parameter-description\">\r\n              {removeDuplicatesKeepParameter.description}\r\n            </p>\r\n          )}\r\n          <div className=\"canvas-modal__parameter-control\">\r\n            <select\r\n              id={removeDuplicatesKeepSelectId}\r\n              value={removeDuplicatesKeep}\r\n              onChange={handleSelectChange}\r\n            >\r\n              {DEDUP_KEEP_OPTIONS.map((option) => (\r\n                <option key={option.value} value={option.value}>\r\n                  {option.label}\r\n                </option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </section>\r\n  );\r\n};\r\n","export const ensureArrayOfString = (value: any): string[] => {\r\n  if (!Array.isArray(value)) {\r\n    return [];\r\n  }\r\n\r\n  return value\r\n    .map((item) => String(item ?? '').trim())\r\n    .filter((item) => item.length > 0);\r\n};\r\n","import React, { useCallback, useMemo } from 'react';\r\nimport type { Dispatch, SetStateAction } from 'react';\r\nimport { ensureArrayOfString } from '../../sharedUtils';\r\n\r\nconst COMMON_DTYPE_OPTIONS = ['float64', 'Int64', 'boolean', 'string', 'category', 'datetime64[ns]', 'object'];\r\n\r\nexport type CastColumnTypesSectionProps = {\r\n  configState: Record<string, any>;\r\n  setConfigState: Dispatch<SetStateAction<Record<string, any>>>;\r\n  availableColumns: string[];\r\n  columnTypeMap: Record<string, string>;\r\n  columnSuggestions: Record<string, string[]>;\r\n  selectedColumns: string[];\r\n  previewColumns: string[];\r\n  previewStatus: 'idle' | 'loading' | 'success' | 'error';\r\n  sourceId?: string | null;\r\n  hasReachableSource: boolean;\r\n};\r\n\r\ntype CastTableRow = {\r\n  column: string;\r\n  originalType: string;\r\n  recommended: string | null;\r\n  currentTarget: string;\r\n  suggestions: string[];\r\n  options: string[];\r\n  hasRecommendationGap: boolean;\r\n  hasOverride: boolean;\r\n  usesDefaultTarget: boolean;\r\n  isRecommendationApplied: boolean;\r\n  isSelected: boolean;\r\n};\r\n\r\nexport const CastColumnTypesSection: React.FC<CastColumnTypesSectionProps> = ({\r\n  configState,\r\n  setConfigState,\r\n  availableColumns,\r\n  columnTypeMap,\r\n  columnSuggestions,\r\n  selectedColumns,\r\n  previewColumns,\r\n  previewStatus,\r\n  sourceId,\r\n  hasReachableSource,\r\n}) => {\r\n  const columnOverrides = useMemo(() => {\r\n    const raw = configState?.column_overrides;\r\n    if (!raw || typeof raw !== 'object' || Array.isArray(raw)) {\r\n      return {} as Record<string, string>;\r\n    }\r\n\r\n    const entries: Record<string, string> = {};\r\n    Object.entries(raw).forEach(([name, value]) => {\r\n      const key = String(name ?? '').trim();\r\n      if (!key) {\r\n        return;\r\n      }\r\n      if (typeof value !== 'string') {\r\n        return;\r\n      }\r\n      const dtype = value.trim();\r\n      if (!dtype) {\r\n        return;\r\n      }\r\n      entries[key] = dtype;\r\n    });\r\n    return entries;\r\n  }, [configState?.column_overrides]);\r\n\r\n  const castDefaultTarget = useMemo(() => {\r\n    const raw = configState?.target_dtype;\r\n    return typeof raw === 'string' ? raw.trim() : '';\r\n  }, [configState?.target_dtype]);\r\n\r\n  const castTableRows = useMemo<CastTableRow[]>(() => {\r\n    const columnSet = new Set<string>();\r\n    availableColumns.forEach((column) => columnSet.add(column));\r\n    Object.keys(columnTypeMap).forEach((column) => columnSet.add(column));\r\n    Object.keys(columnSuggestions).forEach((column) => columnSet.add(column));\r\n    Object.keys(columnOverrides).forEach((column) => columnSet.add(column));\r\n    selectedColumns.forEach((column) => columnSet.add(column));\r\n    previewColumns.forEach((column) => {\r\n      if (typeof column === 'string') {\r\n        columnSet.add(column);\r\n      }\r\n    });\r\n\r\n    const orderedColumns = Array.from(columnSet).sort((a, b) => a.localeCompare(b));\r\n\r\n    return orderedColumns.map((column) => {\r\n      const originalType = columnTypeMap[column] ?? 'Unknown';\r\n      const suggestions = columnSuggestions[column] ?? [];\r\n      const recommended = suggestions.length ? suggestions[0] : null;\r\n      const hasOverride = Object.prototype.hasOwnProperty.call(columnOverrides, column);\r\n      const overrideValue = hasOverride ? columnOverrides[column] : null;\r\n      const normalizedOverride = typeof overrideValue === 'string' ? overrideValue.trim() : '';\r\n      const currentTarget = hasOverride ? normalizedOverride : castDefaultTarget;\r\n      const optionSet = new Set<string>();\r\n\r\n      if (currentTarget) {\r\n        optionSet.add(currentTarget);\r\n      }\r\n      suggestions.forEach((dtype) => optionSet.add(dtype));\r\n      if (originalType && originalType !== 'Unknown') {\r\n        optionSet.add(originalType);\r\n      }\r\n      if (castDefaultTarget) {\r\n        optionSet.add(castDefaultTarget);\r\n      }\r\n      COMMON_DTYPE_OPTIONS.forEach((dtype) => optionSet.add(dtype));\r\n\r\n      const effectiveTarget = currentTarget ?? '';\r\n      const hasRecommendationGap = Boolean(recommended && recommended !== effectiveTarget);\r\n      const isRecommendationApplied = Boolean(recommended && recommended === effectiveTarget);\r\n      const isSelected = selectedColumns.includes(column);\r\n\r\n      const options = Array.from(optionSet).sort((a, b) => a.localeCompare(b));\r\n\r\n      return {\r\n        column,\r\n        originalType,\r\n        recommended,\r\n        currentTarget,\r\n        suggestions,\r\n        options,\r\n        hasRecommendationGap,\r\n        hasOverride,\r\n        usesDefaultTarget: !hasOverride,\r\n        isRecommendationApplied,\r\n        isSelected,\r\n      };\r\n    });\r\n  }, [\r\n    availableColumns,\r\n    castDefaultTarget,\r\n    columnOverrides,\r\n    columnSuggestions,\r\n    columnTypeMap,\r\n    previewColumns,\r\n    selectedColumns,\r\n  ]);\r\n\r\n  const castTableGroups = useMemo(() => {\r\n    const needsAttention = castTableRows.filter((row) => row.hasRecommendationGap);\r\n    const aligned = castTableRows.filter((row) => !row.hasRecommendationGap);\r\n\r\n    const groups: Array<{ key: string; label: string; rows: CastTableRow[] }> = [];\r\n    if (needsAttention.length) {\r\n      groups.push({ key: 'needs-attention', label: 'Needs attention', rows: needsAttention });\r\n    }\r\n    if (aligned.length) {\r\n      groups.push({ key: 'all-columns', label: needsAttention.length ? 'Other columns' : 'All columns', rows: aligned });\r\n    }\r\n    return groups;\r\n  }, [castTableRows]);\r\n\r\n  const castAttentionCount = useMemo(\r\n    () => castTableRows.filter((row) => row.hasRecommendationGap).length,\r\n    [castTableRows]\r\n  );\r\n  const hasCastRecommendations = useMemo(() => castAttentionCount > 0, [castAttentionCount]);\r\n  const castSelectedCount = useMemo(\r\n    () => castTableRows.filter((row) => row.isSelected).length,\r\n    [castTableRows]\r\n  );\r\n\r\n  const handleSetColumnOverride = useCallback(\r\n    (column: string, dtype: string | null) => {\r\n      const normalizedColumn = column.trim();\r\n      if (!normalizedColumn) {\r\n        return;\r\n      }\r\n      setConfigState((previous) => {\r\n        const currentOverrides =\r\n          previous.column_overrides &&\r\n          typeof previous.column_overrides === 'object' &&\r\n          !Array.isArray(previous.column_overrides)\r\n            ? { ...previous.column_overrides }\r\n            : {};\r\n        const trimmedDtype = typeof dtype === 'string' ? dtype.trim() : '';\r\n        const nextColumns = new Set(ensureArrayOfString(previous.columns));\r\n        const skippedColumns = new Set(ensureArrayOfString(previous.skipped_columns));\r\n        const hadSkip = skippedColumns.delete(normalizedColumn);\r\n\r\n        if (!trimmedDtype) {\r\n          delete currentOverrides[normalizedColumn];\r\n        } else {\r\n          currentOverrides[normalizedColumn] = trimmedDtype;\r\n          nextColumns.add(normalizedColumn);\r\n        }\r\n\r\n        const result: Record<string, any> = {\r\n          ...previous,\r\n          columns: Array.from(nextColumns).sort((a, b) => a.localeCompare(b)),\r\n          column_overrides: currentOverrides,\r\n        };\r\n        if (hadSkip) {\r\n          result.skipped_columns = Array.from(skippedColumns).sort((a, b) => a.localeCompare(b));\r\n        }\r\n        return result;\r\n      });\r\n    },\r\n    [setConfigState]\r\n  );\r\n\r\n  const handleApplyAllColumnRecommendations = useCallback(() => {\r\n    const recommendedEntries = Object.entries(columnSuggestions).filter(([, suggestions]) => suggestions.length > 0);\r\n    if (!recommendedEntries.length) {\r\n      return;\r\n    }\r\n    setConfigState((previous) => {\r\n      const nextColumns = new Set(ensureArrayOfString(previous.columns));\r\n      const currentOverrides =\r\n        previous.column_overrides &&\r\n        typeof previous.column_overrides === 'object' &&\r\n        !Array.isArray(previous.column_overrides)\r\n          ? { ...previous.column_overrides }\r\n          : {};\r\n\r\n      recommendedEntries.forEach(([column, suggestions]) => {\r\n        const normalizedColumn = column.trim();\r\n        if (!normalizedColumn) {\r\n          return;\r\n        }\r\n        nextColumns.add(normalizedColumn);\r\n        if (suggestions.length) {\r\n          currentOverrides[normalizedColumn] = suggestions[0];\r\n        }\r\n      });\r\n\r\n      return {\r\n        ...previous,\r\n        columns: Array.from(nextColumns).sort((a, b) => a.localeCompare(b)),\r\n        column_overrides: currentOverrides,\r\n      };\r\n    });\r\n  }, [columnSuggestions, setConfigState]);\r\n\r\n  const handleCastTargetDropdownChange = useCallback(\r\n    (column: string, value: string) => {\r\n      if (value === '__default__') {\r\n        handleSetColumnOverride(column, null);\r\n      } else {\r\n        handleSetColumnOverride(column, value);\r\n      }\r\n    },\r\n    [handleSetColumnOverride]\r\n  );\r\n\r\n  return (\r\n    <section className=\"canvas-modal__section\">\r\n      <div className=\"canvas-modal__section-header\">\r\n        <h3>Column dtype alignment</h3>\r\n        <div className=\"canvas-modal__section-actions\">\r\n          <button\r\n            type=\"button\"\r\n            className=\"btn btn-primary\"\r\n            onClick={handleApplyAllColumnRecommendations}\r\n            disabled={!hasCastRecommendations}\r\n          >\r\n            Apply recommendations\r\n          </button>\r\n        </div>\r\n      </div>\r\n      {!sourceId && (\r\n        <p className=\"canvas-modal__note canvas-modal__note--warning\">\r\n          Select a dataset to analyse current column dtypes and suggestions.\r\n        </p>\r\n      )}\r\n      {sourceId && !hasReachableSource && (\r\n        <p className=\"canvas-modal__note canvas-modal__note--warning\">\r\n          Connect this step to an upstream output to load dtype insights.\r\n        </p>\r\n      )}\r\n      {castDefaultTarget ? (\r\n        <p className=\"canvas-modal__note\">\r\n          Global target dtype: <strong>{castDefaultTarget}</strong>. Columns inherit this unless an override is set.\r\n        </p>\r\n      ) : (\r\n        <p className=\"canvas-modal__note\">Set a global target dtype or override individual columns below.</p>\r\n      )}\r\n      {castTableRows.length > 0 && (\r\n        <p className=\"canvas-modal__note\">\r\n          Tracking {castTableRows.length} column{castTableRows.length === 1 ? '' : 's'}  {castSelectedCount} mapped in node selection.\r\n        </p>\r\n      )}\r\n      {hasCastRecommendations ? (\r\n        <p className=\"canvas-modal__note\">\r\n          {castAttentionCount} column{castAttentionCount === 1 ? '' : 's'} need attention. Apply them in bulk or adjust individually.\r\n        </p>\r\n      ) : (\r\n        castTableRows.length > 0 && (\r\n          <p className=\"canvas-modal__note\">All recommendations are in sync. Fine-tune overrides per column as needed.</p>\r\n        )\r\n      )}\r\n      {previewStatus === 'loading' && !castTableRows.length && (\r\n        <p className=\"canvas-modal__note\">Loading column type insights</p>\r\n      )}\r\n      {castTableRows.length === 0 ? (\r\n        <p className=\"canvas-modal__note\">Add columns or refresh the dataset preview to surface dtype intelligence.</p>\r\n      ) : (\r\n        <div className=\"canvas-cast__body\">\r\n          {castTableGroups.map((group) => (\r\n            <div key={`cast-group-${group.key}`} className=\"canvas-cast__group\">\r\n              {group.label && (\r\n                <div className=\"canvas-cast__group-header\">\r\n                  <h4>{group.label}</h4>\r\n                  <span>\r\n                    {group.rows.length} column{group.rows.length === 1 ? '' : 's'}\r\n                  </span>\r\n                </div>\r\n              )}\r\n              <div className=\"canvas-cast__table-wrapper\">\r\n                <table className=\"canvas-cast__table\">\r\n                  <thead>\r\n                    <tr>\r\n                      <th scope=\"col\">Column</th>\r\n                      <th scope=\"col\">Original dtype</th>\r\n                      <th scope=\"col\">Recommended</th>\r\n                      <th scope=\"col\">Target dtype</th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                    {group.rows.map((row) => {\r\n                      const rowClasses = ['canvas-cast__row'];\r\n                      if (row.hasRecommendationGap) {\r\n                        rowClasses.push('canvas-cast__row--attention');\r\n                      }\r\n                      if (row.hasOverride) {\r\n                        rowClasses.push('canvas-cast__row--override');\r\n                      }\r\n                      const selectValue = row.hasOverride ? row.currentTarget || '' : '__default__';\r\n                      const recommendationApplied = row.isRecommendationApplied;\r\n                      const additionalSuggestions = row.suggestions.slice(1, 4);\r\n                      const helperText = row.hasOverride\r\n                        ? row.currentTarget\r\n                          ? `Override  ${row.currentTarget}`\r\n                          : 'Override cleared (uses original dtype)'\r\n                        : castDefaultTarget\r\n                          ? `Inheriting ${castDefaultTarget}`\r\n                          : 'Retains original dtype until a target is set';\r\n                      return (\r\n                        <tr key={`cast-row-${row.column}`} className={rowClasses.join(' ')}>\r\n                          <th scope=\"row\">\r\n                            <div className=\"canvas-cast__column-cell\">\r\n                              <span className=\"canvas-cast__column-name\">{row.column}</span>\r\n                              <div className=\"canvas-cast__column-meta\">\r\n                                {row.isSelected && (\r\n                                  <span className=\"canvas-cast__badge canvas-cast__badge--selected\">In node</span>\r\n                                )}\r\n                                {row.hasOverride && (\r\n                                  <span className=\"canvas-cast__badge canvas-cast__badge--override\">Override</span>\r\n                                )}\r\n                                {!row.isSelected && !row.hasOverride && (\r\n                                  <span className=\"canvas-cast__muted\">Not yet in node</span>\r\n                                )}\r\n                              </div>\r\n                            </div>\r\n                          </th>\r\n                          <td>\r\n                            <span className=\"canvas-cast__muted\">{row.originalType}</span>\r\n                          </td>\r\n                          <td>\r\n                            {row.recommended ? (\r\n                              <div className=\"canvas-cast__recommendation\">\r\n                                <span\r\n                                  className={`canvas-cast__chip${row.hasRecommendationGap ? ' canvas-cast__chip--attention' : ''}${recommendationApplied ? ' canvas-cast__chip--applied' : ''}`}\r\n                                >\r\n                                  {row.recommended}\r\n                                </span>\r\n                                <span className=\"canvas-cast__recommendation-note\">\r\n                                  {recommendationApplied ? 'Aligned with target' : 'Not applied yet'}\r\n                                </span>\r\n                                {additionalSuggestions.length > 0 && (\r\n                                  <span className=\"canvas-cast__suggestions\">\r\n                                    Other options: {additionalSuggestions.join(', ')}\r\n                                  </span>\r\n                                )}\r\n                              </div>\r\n                            ) : (\r\n                              <span className=\"canvas-cast__muted\">No recommendation</span>\r\n                            )}\r\n                          </td>\r\n                          <td>\r\n                            <div className=\"canvas-cast__target\">\r\n                              <select\r\n                                value={selectValue}\r\n                                onChange={(event) => handleCastTargetDropdownChange(row.column, event.target.value)}\r\n                              >\r\n                                <option value=\"__default__\">\r\n                                  {castDefaultTarget ? `Inherit global (${castDefaultTarget})` : 'No override (use original)'}\r\n                                </option>\r\n                                {row.options.map((option) => (\r\n                                  <option key={`${row.column}-${option}`} value={option}>\r\n                                    {option}\r\n                                  </option>\r\n                                ))}\r\n                              </select>\r\n                              <span className=\"canvas-cast__target-note\">{helperText}</span>\r\n                            </div>\r\n                          </td>\r\n                        </tr>\r\n                      );\r\n                    })}\r\n                  </tbody>\r\n                </table>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      )}\r\n    </section>\r\n  );\r\n};\r\n","import React, { useCallback, useEffect, useMemo, useState } from 'react';\r\nimport {\r\n  fetchPipelinePreviewRows,\r\n  type PipelinePreviewResponse,\r\n  type PipelinePreviewMetrics,\r\n  type PipelinePreviewColumnStat,\r\n  type PipelinePreviewRowStat,\r\n  type FullExecutionSignal,\r\n} from '../../../../api';\r\n\r\nexport type PreviewState = {\r\n  status: 'idle' | 'loading' | 'success' | 'error';\r\n  data: PipelinePreviewResponse | null;\r\n  error: string | null;\r\n};\r\n\r\ntype PreviewPanelProps = {\r\n  preview: PipelinePreviewResponse;\r\n  columns: string[];\r\n  rows: Record<string, any>[];\r\n  tableNote?: string | null;\r\n  formatCellValue: (value: unknown) => string;\r\n  formatMetricValue: (value?: number | null, precision?: number) => string;\r\n  formatMissingPercentage: (value?: number | null) => string;\r\n  formatNumericStat: (value?: number | null) => string;\r\n  formatModeStat: (value?: string | number | null) => string;\r\n  fullExecutionStepLabel?: string | null;\r\n  fullExecutionWarnings?: string[];\r\n};\r\n\r\ntype RowWindowStatus = 'idle' | 'loading' | 'ready' | 'error';\r\n\r\ntype RowWindowState = {\r\n  status: RowWindowStatus;\r\n  columns: string[];\r\n  rows: Record<string, any>[];\r\n  nextOffset: number | null;\r\n  hasMore: boolean;\r\n  totalRows: number | null;\r\n  samplingAdjustments: string[];\r\n  largeDataset: boolean;\r\n  error: string | null;\r\n};\r\n\r\nconst WINDOW_LIMIT = 100;\r\nconst ROW_STATS_DISPLAY_LIMIT = 12;\r\n\r\nconst SAMPLING_ADJUSTMENT_MESSAGES: Record<string, string> = {\r\n  limited_full_sample_for_large_dataset: 'Preview limited because the dataset is large.',\r\n  capped_sample_for_large_dataset: 'Requested sample size capped for a large dataset.',\r\n  switched_to_first_last_for_large_dataset: 'Using first and last rows to summarize the large dataset.',\r\n  default_offset: 'Offset fallback applied; starting from the beginning.',\r\n  normalized_negative_offset: 'Negative offset normalized to zero.',\r\n  default_limit: 'Using the default preview window size.',\r\n  normalized_non_positive_limit: 'Requested preview size too small; using the minimum window.',\r\n  capped_limit_for_sample: 'Preview window capped to stay within safe limits.',\r\n};\r\n\r\ntype FullExecutionIndicatorTone =\r\n  | 'succeeded'\r\n  | 'deferred'\r\n  | 'queued'\r\n  | 'running'\r\n  | 'failed'\r\n  | 'skipped'\r\n  | 'cancelled';\r\n\r\ntype FullExecutionSummary = {\r\n  label: string;\r\n  tone: FullExecutionIndicatorTone;\r\n  details: string[];\r\n  metadata: Array<{ label: string; value: string }>;\r\n  warnings: string[];\r\n  stepLabel: string | null;\r\n  isActive: boolean;\r\n};\r\n\r\nconst FULL_EXECUTION_STATUS_LABELS: Record<string, string> = {\r\n  succeeded: 'Completed',\r\n  deferred: 'Deferred',\r\n  queued: 'Queued',\r\n  running: 'In progress',\r\n  failed: 'Failed',\r\n  skipped: 'Skipped',\r\n  cancelled: 'Cancelled',\r\n};\r\n\r\nconst FULL_EXECUTION_WARNING_MESSAGES: Record<string, string> = {\r\n  dataset_too_large: 'Full dataset run is executing in the background for large datasets.',\r\n  memory_error: 'Full dataset execution failed because the server ran out of memory.',\r\n  background_failure: 'Background job ended unexpectedly. Check server logs for details.',\r\n};\r\n\r\nconst FULL_EXECUTION_JOB_STATUS_LABELS: Record<string, string> = {\r\n  queued: 'Queued',\r\n  running: 'Running',\r\n  succeeded: 'Completed',\r\n  failed: 'Failed',\r\n  cancelled: 'Cancelled',\r\n};\r\n\r\nconst normaliseFullExecutionTone = (value: string | null | undefined): FullExecutionIndicatorTone => {\r\n  switch (value) {\r\n    case 'succeeded':\r\n    case 'deferred':\r\n    case 'queued':\r\n    case 'running':\r\n    case 'failed':\r\n    case 'skipped':\r\n    case 'cancelled':\r\n      return value;\r\n    default:\r\n      return 'deferred';\r\n  }\r\n};\r\n\r\nconst resolveFullExecutionWarning = (value: string): string => {\r\n  if (!value) {\r\n    return '';\r\n  }\r\n  const mapped = FULL_EXECUTION_WARNING_MESSAGES[value];\r\n  if (mapped) {\r\n    return mapped;\r\n  }\r\n  const normalised = value.replace(/_/g, ' ').trim();\r\n  if (!normalised) {\r\n    return value;\r\n  }\r\n  return normalised.charAt(0).toUpperCase() + normalised.slice(1);\r\n};\r\n\r\nconst resolveFullExecutionSummary = (\r\n  signal: FullExecutionSignal | null | undefined,\r\n  formatMetricValue: (value?: number | null, precision?: number) => string,\r\n): FullExecutionSummary | null => {\r\n  if (!signal) {\r\n    return null;\r\n  }\r\n\r\n  const jobStatus = signal.job_status ?? null;\r\n  const tone = normaliseFullExecutionTone(jobStatus ?? signal.status ?? null);\r\n  const statusLabel = FULL_EXECUTION_STATUS_LABELS[jobStatus ?? signal.status ?? tone] ?? FULL_EXECUTION_STATUS_LABELS[tone];\r\n\r\n  const processedRows =\r\n    typeof signal.processed_rows === 'number' && signal.processed_rows >= 0\r\n      ? formatMetricValue(signal.processed_rows)\r\n      : null;\r\n  const totalRows =\r\n    typeof signal.total_rows === 'number' && signal.total_rows >= 0\r\n      ? formatMetricValue(signal.total_rows)\r\n      : null;\r\n\r\n  let label = `Full dataset run: ${statusLabel}`;\r\n  if (tone === 'running' && processedRows && totalRows) {\r\n    label = `Full dataset run: In progress (${processedRows}/${totalRows})`;\r\n  } else if (tone === 'running' && processedRows) {\r\n    label = `Full dataset run: In progress (${processedRows} rows)`;\r\n  } else if (tone === 'succeeded' && processedRows) {\r\n    label = `Full dataset run: Completed (${processedRows} rows)`;\r\n  } else if (tone === 'succeeded' && totalRows) {\r\n    label = `Full dataset run: Completed (${totalRows} rows)`;\r\n  }\r\n\r\n  const detailParts: string[] = [];\r\n  const metadata: Array<{ label: string; value: string }> = [];\r\n  const jobStatusLabel = jobStatus ? FULL_EXECUTION_JOB_STATUS_LABELS[jobStatus] ?? jobStatus : null;\r\n\r\n  if (jobStatus === 'running') {\r\n    if (processedRows && totalRows) {\r\n      detailParts.push(`Processed ${processedRows} of ${totalRows} rows.`);\r\n    } else if (processedRows) {\r\n      detailParts.push(`Processed ${processedRows} rows.`);\r\n    } else if (totalRows) {\r\n      detailParts.push(`Processing ${totalRows} rows.`);\r\n    }\r\n  } else {\r\n    if (processedRows) {\r\n      detailParts.push(`Processed ${processedRows} rows.`);\r\n    } else if (totalRows) {\r\n      detailParts.push(`Total rows ${totalRows}.`);\r\n    }\r\n  }\r\n\r\n  if (signal.reason) {\r\n    detailParts.push(signal.reason);\r\n  }\r\n\r\n  if (jobStatusLabel) {\r\n    metadata.push({ label: 'Background job', value: jobStatusLabel });\r\n  }\r\n  if (signal.job_id) {\r\n    metadata.push({ label: 'Background job ID', value: signal.job_id });\r\n  }\r\n  if (totalRows) {\r\n    metadata.push({ label: 'Dataset rows', value: totalRows });\r\n  }\r\n  if (processedRows && tone !== 'queued' && tone !== 'skipped') {\r\n    metadata.push({ label: 'Processed rows', value: processedRows });\r\n  }\r\n  if (typeof signal.poll_after_seconds === 'number' && signal.poll_after_seconds > 0) {\r\n    metadata.push({ label: 'Next status check', value: `${signal.poll_after_seconds}s` });\r\n  }\r\n  if (signal.last_updated) {\r\n    try {\r\n      const formatted = new Date(signal.last_updated).toLocaleString();\r\n      metadata.push({ label: 'Last updated', value: formatted });\r\n    } catch (error) {\r\n      metadata.push({ label: 'Last updated', value: String(signal.last_updated) });\r\n    }\r\n  }\r\n\r\n  const warnings = Array.isArray(signal.warnings)\r\n    ? signal.warnings.map(resolveFullExecutionWarning).map((warning) => warning.trim()).filter(Boolean)\r\n    : [];\r\n\r\n  let stepLabel: string | null = null;\r\n  switch (tone) {\r\n    case 'queued':\r\n      stepLabel = signal.reason ? signal.reason : 'Full dataset run queued in background.';\r\n      break;\r\n    case 'running':\r\n      stepLabel = signal.reason ? signal.reason : 'Full dataset run in progress.';\r\n      break;\r\n    case 'succeeded':\r\n      if (processedRows) {\r\n        const plural = signal.processed_rows === 1 ? '' : 's';\r\n        stepLabel = `Full dataset run processed ${processedRows} row${plural}.`;\r\n      } else if (totalRows) {\r\n        stepLabel = `Full dataset run completed (${totalRows} rows).`;\r\n      } else {\r\n        stepLabel = 'Full dataset run completed.';\r\n      }\r\n      break;\r\n    case 'failed':\r\n      stepLabel = signal.reason ? `Full dataset run failed: ${signal.reason}` : 'Full dataset run failed.';\r\n      break;\r\n    case 'cancelled':\r\n      stepLabel = 'Full dataset run cancelled.';\r\n      break;\r\n    case 'skipped':\r\n      stepLabel = signal.reason ? `Full dataset run skipped: ${signal.reason}` : 'Full dataset run skipped.';\r\n      break;\r\n    case 'deferred':\r\n      stepLabel = signal.reason ? signal.reason : 'Full dataset run deferred to background processing.';\r\n      break;\r\n    default:\r\n      stepLabel = null;\r\n      break;\r\n  }\r\n\r\n  return {\r\n    label,\r\n    tone,\r\n    details: detailParts,\r\n    metadata,\r\n    warnings,\r\n    stepLabel,\r\n    isActive: jobStatus === 'queued' || jobStatus === 'running',\r\n  };\r\n};\r\n\r\nconst createInitialRowWindowState = (): RowWindowState => ({\r\n  status: 'idle',\r\n  columns: [],\r\n  rows: [],\r\n  nextOffset: null,\r\n  hasMore: false,\r\n  totalRows: null,\r\n  samplingAdjustments: [],\r\n  largeDataset: false,\r\n  error: null,\r\n});\r\n\r\nconst resolveAdjustmentMessage = (value: string): string => {\r\n  if (!value) {\r\n    return '';\r\n  }\r\n  if (value.startsWith('window_mode_fallback:')) {\r\n    const requested = value.split(':', 2)[1] ?? '';\r\n    return requested\r\n      ? `Preview mode \"${requested}\" is not supported; falling back to head sampling.`\r\n      : 'Preview mode fallback applied.';\r\n  }\r\n  const mapped = SAMPLING_ADJUSTMENT_MESSAGES[value];\r\n  if (mapped) {\r\n    return mapped;\r\n  }\r\n  const normalised = value.replace(/_/g, ' ').trim();\r\n  if (!normalised) {\r\n    return value;\r\n  }\r\n  return normalised.charAt(0).toUpperCase() + normalised.slice(1);\r\n};\r\n\r\nexport const PreviewPanel: React.FC<PreviewPanelProps> = ({\r\n  preview,\r\n  columns,\r\n  rows,\r\n  tableNote,\r\n  formatCellValue,\r\n  formatMetricValue,\r\n  formatMissingPercentage,\r\n  formatNumericStat,\r\n  formatModeStat,\r\n  fullExecutionStepLabel,\r\n  fullExecutionWarnings,\r\n}) => {\r\n  const metrics: PipelinePreviewMetrics | undefined = preview?.metrics;\r\n  const columnStats: PipelinePreviewColumnStat[] = Array.isArray(preview?.column_stats)\r\n    ? preview.column_stats\r\n    : [];\r\n  const rowStats: PipelinePreviewRowStat[] = Array.isArray(preview?.row_missing_stats)\r\n    ? preview.row_missing_stats\r\n    : [];\r\n  const appliedSteps = Array.isArray(preview?.applied_steps) ? preview.applied_steps : [];\r\n  let displayedSteps = appliedSteps;\r\n  const displayStep = fullExecutionStepLabel || null;\r\n  if (displayStep) {\r\n    const matchIndex = appliedSteps.findIndex((step) =>\r\n      typeof step === 'string' && step.toLowerCase().startsWith('full dataset run')\r\n    );\r\n    if (matchIndex >= 0) {\r\n      displayedSteps = [...appliedSteps.slice(0, matchIndex), displayStep, ...appliedSteps.slice(matchIndex + 1)];\r\n    } else if (!appliedSteps.includes(displayStep)) {\r\n      displayedSteps = [...appliedSteps, displayStep];\r\n    }\r\n  }\r\n  const sampleRows = Array.isArray(preview?.sample_rows) ? preview.sample_rows : [];\r\n  const rowMissingMap = rowStats.reduce<Record<number, number>>((acc, stat) => {\r\n    if (stat && typeof stat.index === 'number') {\r\n      acc[stat.index] = typeof stat.missing_percentage === 'number' ? stat.missing_percentage : 0;\r\n    }\r\n    return acc;\r\n  }, {});\r\n  const rowStatsDisplay = sampleRows.slice(0, ROW_STATS_DISPLAY_LIMIT);\r\n\r\n  return (\r\n    <div className=\"canvas-preview\">\r\n      {metrics && (\r\n        <div className=\"canvas-preview__metrics\" role=\"list\">\r\n          <div className=\"canvas-preview__metric\" role=\"listitem\">\r\n            <span className=\"canvas-preview__metric-label\">Rows</span>\r\n            <span className=\"canvas-preview__metric-value\">{formatMetricValue(metrics.row_count)}</span>\r\n          </div>\r\n          <div className=\"canvas-preview__metric\" role=\"listitem\">\r\n            <span className=\"canvas-preview__metric-label\">Columns</span>\r\n            <span className=\"canvas-preview__metric-value\">{formatMetricValue(metrics.column_count)}</span>\r\n          </div>\r\n          <div className=\"canvas-preview__metric\" role=\"listitem\">\r\n            <span className=\"canvas-preview__metric-label\">Duplicate rows</span>\r\n            <span className=\"canvas-preview__metric-value\">{formatMetricValue(metrics.duplicate_rows)}</span>\r\n          </div>\r\n          <div className=\"canvas-preview__metric\" role=\"listitem\">\r\n            <span className=\"canvas-preview__metric-label\">Missing cells</span>\r\n            <span className=\"canvas-preview__metric-value\">{formatMetricValue(metrics.missing_cells)}</span>\r\n          </div>\r\n          <div className=\"canvas-preview__metric\" role=\"listitem\">\r\n            <span className=\"canvas-preview__metric-label\">Rows sampled</span>\r\n            <span className=\"canvas-preview__metric-value\">{formatMetricValue(metrics.preview_rows)}</span>\r\n          </div>\r\n          <div className=\"canvas-preview__metric\" role=\"listitem\">\r\n            <span className=\"canvas-preview__metric-label\">Dataset rows</span>\r\n            <span className=\"canvas-preview__metric-value\">{formatMetricValue(metrics.total_rows)}</span>\r\n          </div>\r\n          <div className=\"canvas-preview__metric\" role=\"listitem\">\r\n            <span className=\"canvas-preview__metric-label\">Sample request</span>\r\n            <span className=\"canvas-preview__metric-value\">\r\n              {metrics.requested_sample_size === 0\r\n                ? 'Full dataset'\r\n                : formatMetricValue(metrics.requested_sample_size)}\r\n            </span>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {displayedSteps.length > 0 && (\r\n        <div className=\"canvas-preview__steps\">\r\n          <h4>Applied steps</h4>\r\n          <ol>\r\n            {displayedSteps.map((step, index) => (\r\n              <li key={`${step}-${index}`}>{step}</li>\r\n            ))}\r\n          </ol>\r\n        </div>\r\n      )}\r\n\r\n      {columns.length > 0 && rows.length > 0 ? (\r\n        <div className=\"canvas-preview__table-wrapper\" role=\"region\" aria-label=\"Sample rows\">\r\n          <table className=\"canvas-preview__table\">\r\n            <thead>\r\n              <tr>\r\n                {columns.map((column) => (\r\n                  <th key={column}>{column}</th>\r\n                ))}\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {rows.map((row, rowIndex) => (\r\n                <tr key={`row-${rowIndex}`}>\r\n                  {columns.map((column) => (\r\n                    <td key={`${rowIndex}-${column}`}>{formatCellValue(row?.[column])}</td>\r\n                  ))}\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n          {tableNote ? <p className=\"canvas-modal__note\">{tableNote}</p> : null}\r\n        </div>\r\n      ) : (\r\n        <p className=\"canvas-modal__note\">No sample rows available after applying the upstream steps.</p>\r\n      )}\r\n\r\n      {rowStats.length > 0 && rowStatsDisplay.length > 0 && (\r\n        <div className=\"canvas-preview__row-stats\">\r\n          <h4>Row missingness</h4>\r\n          <div className=\"canvas-preview__row-grid\">\r\n            {rowStatsDisplay.map((_, rowIndex) => {\r\n              const value = rowMissingMap[rowIndex] ?? 0;\r\n              const precision = value % 1 === 0 ? 0 : 1;\r\n              return (\r\n                <div key={`row-missing-${rowIndex}`} className=\"canvas-preview__row-chip\">\r\n                  <span>Row {rowIndex + 1}</span>\r\n                  <strong>{formatMetricValue(value, precision)}%</strong>\r\n                </div>\r\n              );\r\n            })}\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {columnStats.length > 0 && (\r\n        <div className=\"canvas-preview__column-stats\">\r\n          <h4>Column summary</h4>\r\n          <div className=\"canvas-preview__column-grid\">\r\n            {columnStats.map((stat) => (\r\n              <div key={stat.name} className=\"canvas-preview__column-card\">\r\n                <div className=\"canvas-preview__column-name\">{stat.name}</div>\r\n                {stat.dtype && <div className=\"canvas-preview__column-detail\">Type: {stat.dtype}</div>}\r\n                <div className=\"canvas-preview__column-detail\">\r\n                  Missing: {formatMissingPercentage(stat.missing_percentage)} ({formatMetricValue(stat.missing_count)})\r\n                </div>\r\n                {typeof stat.mean === 'number' && !Number.isNaN(stat.mean) && (\r\n                  <div className=\"canvas-preview__column-detail\">Mean: {formatNumericStat(stat.mean)}</div>\r\n                )}\r\n                {typeof stat.median === 'number' && !Number.isNaN(stat.median) && (\r\n                  <div className=\"canvas-preview__column-detail\">Median: {formatNumericStat(stat.median)}</div>\r\n                )}\r\n                {stat.mode !== undefined && stat.mode !== null && stat.mode !== '' && (\r\n                  <div className=\"canvas-preview__column-detail\">Mode: {formatModeStat(stat.mode)}</div>\r\n                )}\r\n                {typeof stat.distinct_count === 'number' && (\r\n                  <div className=\"canvas-preview__column-detail\">\r\n                    Distinct values: {formatMetricValue(stat.distinct_count)}\r\n                  </div>\r\n                )}\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {fullExecutionWarnings && fullExecutionWarnings.length > 0 && (\r\n        <div className=\"canvas-preview__full-execution-warnings\">\r\n          <strong>Full execution notes:</strong>\r\n          <ul>\r\n            {fullExecutionWarnings.map((warning, index) => (\r\n              <li key={`${warning}-${index}`}>{warning}</li>\r\n            ))}\r\n          </ul>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\ntype DataSnapshotSectionProps = {\r\n  previewState: PreviewState;\r\n  datasetSourceId?: string | null;\r\n  canTriggerPreview: boolean;\r\n  onRefresh: () => void;\r\n  formatCellValue: (value: unknown) => string;\r\n  formatMetricValue: (value?: number | null, precision?: number) => string;\r\n  formatMissingPercentage: (value?: number | null) => string;\r\n  formatNumericStat: (value?: number | null) => string;\r\n  formatModeStat: (value?: string | number | null) => string;\r\n};\r\n\r\nexport const DataSnapshotSection: React.FC<DataSnapshotSectionProps> = ({\r\n  previewState,\r\n  datasetSourceId,\r\n  canTriggerPreview,\r\n  onRefresh,\r\n  formatCellValue,\r\n  formatMetricValue,\r\n  formatMissingPercentage,\r\n  formatNumericStat,\r\n  formatModeStat,\r\n}) => {\r\n  const [rowWindow, setRowWindow] = useState<RowWindowState>(() => createInitialRowWindowState());\r\n  const [fullExecutionSummary, setFullExecutionSummary] = useState<FullExecutionSummary | null>(null);\r\n  const [expandedContext, setExpandedContext] = useState<boolean>(false);\r\n\r\n  const isRefreshing = previewState.status === 'loading';\r\n  const isButtonDisabled = isRefreshing || !canTriggerPreview;\r\n\r\n  const baseColumns = useMemo<string[]>(() => {\r\n    const rawColumns = previewState.data?.columns;\r\n    if (!Array.isArray(rawColumns)) {\r\n      return [];\r\n    }\r\n    return rawColumns.filter((column): column is string => typeof column === 'string');\r\n  }, [previewState.data?.columns]);\r\n\r\n  const basePreviewRows = useMemo<Record<string, any>[]>(() => {\r\n    if (!Array.isArray(previewState.data?.sample_rows)) {\r\n      return [];\r\n    }\r\n    // Limit initial display to WINDOW_LIMIT (100 rows) to improve performance\r\n    // User can load more using \"Load next 100 rows\" button\r\n    return previewState.data.sample_rows.slice(0, WINDOW_LIMIT);\r\n  }, [previewState.data?.sample_rows]);\r\n\r\n  const baseRowCount = basePreviewRows.length;\r\n  const totalAvailableInPreview = Array.isArray(previewState.data?.sample_rows) \r\n    ? previewState.data.sample_rows.length \r\n    : 0;\r\n\r\n  const metrics = previewState.data?.metrics;\r\n  const baseHasMore = useMemo(() => {\r\n    if (!metrics) {\r\n      return false;\r\n    }\r\n    // Check if there are more rows in the cached preview data\r\n    if (totalAvailableInPreview > baseRowCount) {\r\n      return true;\r\n    }\r\n    // Check if there are more rows in the full dataset\r\n    if (typeof metrics.total_rows === 'number' && metrics.total_rows > totalAvailableInPreview) {\r\n      return true;\r\n    }\r\n    return false;\r\n  }, [metrics, baseRowCount, totalAvailableInPreview]);\r\n\r\n  useEffect(() => {\r\n    if (previewState.status !== 'success' || !previewState.data) {\r\n      setRowWindow((previous) => {\r\n        if (previous.status === 'idle') {\r\n          return previous;\r\n        }\r\n        return createInitialRowWindowState();\r\n      });\r\n      setFullExecutionSummary(null);\r\n      return;\r\n    }\r\n\r\n    const summary = resolveFullExecutionSummary(\r\n      previewState.data.signals?.full_execution,\r\n      formatMetricValue,\r\n    );\r\n    setFullExecutionSummary(summary);\r\n\r\n    setRowWindow({\r\n      status: 'ready',\r\n      columns: [...baseColumns],\r\n      rows: [...basePreviewRows],\r\n      nextOffset: baseRowCount,\r\n      hasMore: baseHasMore,\r\n      totalRows: typeof metrics?.total_rows === 'number' ? metrics.total_rows : null,\r\n      samplingAdjustments: [],\r\n      largeDataset: false,\r\n      error: null,\r\n    });\r\n  }, [baseColumns, basePreviewRows, baseRowCount, baseHasMore, formatMetricValue, metrics?.total_rows, previewState.data, previewState.status]);\r\n\r\n  // Poll for background job status updates\r\n  useEffect(() => {\r\n    if (!fullExecutionSummary || !fullExecutionSummary.isActive) {\r\n      return;\r\n    }\r\n\r\n    const signal = previewState.data?.signals?.full_execution;\r\n    if (!signal || !signal.job_id || !datasetSourceId) {\r\n      return;\r\n    }\r\n\r\n    const pollInterval = typeof signal.poll_after_seconds === 'number' && signal.poll_after_seconds > 0\r\n      ? signal.poll_after_seconds * 1000\r\n      : 5000;\r\n\r\n    const timer = setTimeout(() => {\r\n      import('../../../../api')\r\n        .then((api) => api.fetchFullExecutionStatus(datasetSourceId, signal.job_id!))\r\n        .then((updatedSignal) => {\r\n          const updatedSummary = resolveFullExecutionSummary(updatedSignal, formatMetricValue);\r\n          setFullExecutionSummary(updatedSummary);\r\n          \r\n          // Update the preview state with the new signal\r\n          if (previewState.data) {\r\n            const updatedPreviewData = {\r\n              ...previewState.data,\r\n              signals: {\r\n                ...previewState.data.signals,\r\n                full_execution: updatedSignal,\r\n              },\r\n            };\r\n            // Note: This assumes previewState can be updated externally\r\n            // If not, you might need to add an onUpdateSignal callback prop\r\n          }\r\n        })\r\n        .catch((error) => {\r\n          console.error('Failed to poll background job status:', error);\r\n        });\r\n    }, pollInterval);\r\n\r\n    return () => clearTimeout(timer);\r\n  }, [fullExecutionSummary, datasetSourceId, formatMetricValue, previewState.data]);\r\n\r\n  const visibleColumns = rowWindow.columns.length > 0 ? rowWindow.columns : baseColumns;\r\n  const visibleRows = rowWindow.rows.length > 0 ? rowWindow.rows : basePreviewRows;\r\n\r\n  const totalRows = rowWindow.totalRows ?? (typeof metrics?.total_rows === 'number' ? metrics.total_rows : null);\r\n\r\n  const effectiveHasMore = rowWindow.status === 'idle' ? baseHasMore : rowWindow.hasMore;\r\n  const isLoadingMore = rowWindow.status === 'loading';\r\n\r\n  const loadedRowCount = visibleRows.length;\r\n\r\n  const tableNote = useMemo(() => {\r\n    if (!loadedRowCount) {\r\n      return null;\r\n    }\r\n\r\n    const formattedLoaded = formatMetricValue(loadedRowCount);\r\n\r\n    if (totalRows !== null && totalRows >= 0) {\r\n      const formattedTotal = formatMetricValue(totalRows);\r\n      const baseMessage = `Loaded ${formattedLoaded} of ${formattedTotal} rows.`;\r\n      if (effectiveHasMore && loadedRowCount < totalRows) {\r\n        return `${baseMessage} Load more rows to continue.`;\r\n      }\r\n      if (!effectiveHasMore && loadedRowCount < totalRows) {\r\n        return `${baseMessage} Preview limited by backend settings.`;\r\n      }\r\n      return baseMessage;\r\n    }\r\n\r\n    return effectiveHasMore\r\n      ? `Loaded ${formattedLoaded} rows. Additional rows available.`\r\n      : `Loaded ${formattedLoaded} rows.`;\r\n  }, [effectiveHasMore, formatMetricValue, loadedRowCount, totalRows]);\r\n\r\n  const samplingAdjustmentMessages = useMemo(() => {\r\n    const adjustments = rowWindow.status === 'idle' ? [] : rowWindow.samplingAdjustments;\r\n    return adjustments\r\n      .map(resolveAdjustmentMessage)\r\n      .map((message) => message.trim())\r\n      .filter(Boolean);\r\n  }, [rowWindow.samplingAdjustments, rowWindow.status]);\r\n\r\n  const showLargeDatasetNote = rowWindow.status === 'idle' ? false : rowWindow.largeDataset;\r\n\r\n  const handleLoadMore = useCallback(() => {\r\n    if (!datasetSourceId) {\r\n      return;\r\n    }\r\n    if (!effectiveHasMore) {\r\n      return;\r\n    }\r\n    if (rowWindow.status === 'loading') {\r\n      return;\r\n    }\r\n\r\n    const currentRows = rowWindow.rows.length > 0 ? rowWindow.rows : basePreviewRows;\r\n    const requestOffset = rowWindow.status === 'idle'\r\n      ? currentRows.length\r\n      : rowWindow.nextOffset ?? currentRows.length;\r\n\r\n    // Check if we have cached rows available in the preview data\r\n    const allPreviewRows = Array.isArray(previewState.data?.sample_rows) ? previewState.data.sample_rows : [];\r\n    if (requestOffset < allPreviewRows.length) {\r\n      // Load from cached preview data without making an API call\r\n      const nextChunk = allPreviewRows.slice(requestOffset, requestOffset + WINDOW_LIMIT);\r\n      const newRows = currentRows.concat(nextChunk);\r\n      const newOffset = requestOffset + nextChunk.length;\r\n      const stillHasMore = newOffset < allPreviewRows.length || \r\n        (typeof metrics?.total_rows === 'number' && metrics.total_rows > allPreviewRows.length);\r\n\r\n      setRowWindow({\r\n        status: 'ready',\r\n        columns: rowWindow.columns.length > 0 ? rowWindow.columns : baseColumns,\r\n        rows: newRows,\r\n        nextOffset: stillHasMore ? newOffset : null,\r\n        hasMore: stillHasMore,\r\n        totalRows: typeof metrics?.total_rows === 'number' ? metrics.total_rows : null,\r\n        samplingAdjustments: rowWindow.samplingAdjustments,\r\n        largeDataset: rowWindow.largeDataset,\r\n        error: null,\r\n      });\r\n      return;\r\n    }\r\n\r\n    // If we've exhausted cached rows, fetch from API\r\n    setRowWindow((previous) => ({\r\n      ...previous,\r\n      status: 'loading',\r\n      error: null,\r\n    }));\r\n\r\n    fetchPipelinePreviewRows(datasetSourceId, {\r\n      offset: requestOffset,\r\n      limit: WINDOW_LIMIT,\r\n    })\r\n      .then((response) => {\r\n        setRowWindow((previous) => {\r\n          const existingRows = previous.rows.length > 0 ? previous.rows : currentRows;\r\n\r\n          const safeColumns = Array.isArray(response.columns) && response.columns.length > 0\r\n            ? response.columns.map((column) => String(column))\r\n            : previous.columns.length > 0\r\n            ? previous.columns\r\n            : baseColumns;\r\n\r\n          const normalizedOffset = typeof response.offset === 'number' && response.offset >= 0 ? response.offset : 0;\r\n          const returnedRows = Array.isArray(response.rows) ? response.rows : [];\r\n          const prefix = normalizedOffset <= existingRows.length\r\n            ? existingRows.slice(0, normalizedOffset)\r\n            : existingRows.slice();\r\n          const mergedRows = normalizedOffset <= existingRows.length\r\n            ? prefix.concat(returnedRows)\r\n            : existingRows.concat(returnedRows);\r\n\r\n          const returnedCount = returnedRows.length;\r\n          const hasMore = Boolean(response.has_more);\r\n          const nextOffsetValue = typeof response.next_offset === 'number'\r\n            ? response.next_offset\r\n            : hasMore\r\n            ? normalizedOffset + returnedCount\r\n            : null;\r\n\r\n          const responseTotal = typeof response.total_rows === 'number' ? response.total_rows : null;\r\n          const fallbackTotal = !hasMore ? mergedRows.length : null;\r\n          const totalRowsValue = responseTotal !== null\r\n            ? responseTotal\r\n            : previous.totalRows !== null\r\n            ? previous.totalRows\r\n            : fallbackTotal;\r\n\r\n          return {\r\n            status: 'ready',\r\n            columns: [...safeColumns],\r\n            rows: mergedRows,\r\n            nextOffset: nextOffsetValue,\r\n            hasMore,\r\n            totalRows: totalRowsValue,\r\n            samplingAdjustments: Array.isArray(response.sampling_adjustments)\r\n              ? response.sampling_adjustments\r\n              : [],\r\n            largeDataset: Boolean(response.large_dataset),\r\n            error: null,\r\n          };\r\n        });\r\n      })\r\n      .catch((error: any) => {\r\n        setRowWindow((previous) => ({\r\n          ...previous,\r\n          status: 'error',\r\n          error: error?.message ?? 'Unable to load additional rows.',\r\n        }));\r\n      });\r\n  }, [baseColumns, basePreviewRows, datasetSourceId, effectiveHasMore, rowWindow, previewState.data?.sample_rows, metrics]);\r\n\r\n  return (\r\n    <section className=\"canvas-modal__section\">\r\n      <div className=\"canvas-modal__section-header\">\r\n        <div className=\"canvas-modal__section-title\">\r\n          <h3>Dataset snapshot</h3>\r\n          {fullExecutionSummary && (\r\n            <div\r\n              className={`canvas-preview__full-execution-badge canvas-preview__full-execution--${fullExecutionSummary.tone}`}\r\n              role=\"status\"\r\n              aria-live={fullExecutionSummary.isActive ? 'polite' : 'off'}\r\n              title={fullExecutionSummary.details.length > 0 ? fullExecutionSummary.details.join(' ') : undefined}\r\n            >\r\n              {fullExecutionSummary.label}\r\n            </div>\r\n          )}\r\n        </div>\r\n        <div className=\"canvas-modal__section-actions\">\r\n          <button\r\n            type=\"button\"\r\n            className=\"btn btn-outline-secondary\"\r\n            onClick={onRefresh}\r\n            disabled={isButtonDisabled}\r\n          >\r\n            {isRefreshing ? 'Refreshing' : 'Refresh'}\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {fullExecutionSummary && (\r\n        <div className=\"canvas-preview__full-execution-context\">\r\n          {fullExecutionSummary.details.length > 0 && (\r\n            <ul className=\"canvas-preview__full-execution-details\">\r\n              {fullExecutionSummary.details.map((detail, index) => (\r\n                <li key={`${detail}-${index}`}>{detail}</li>\r\n              ))}\r\n            </ul>\r\n          )}\r\n          {fullExecutionSummary.metadata.length > 0 && (\r\n            <>\r\n              <button\r\n                type=\"button\"\r\n                className=\"canvas-preview__full-execution-toggle\"\r\n                onClick={() => setExpandedContext(!expandedContext)}\r\n                aria-expanded={expandedContext}\r\n              >\r\n                {expandedContext ? '' : ''} {expandedContext ? 'Hide' : 'Show'} job details\r\n              </button>\r\n              {expandedContext && (\r\n                <dl className=\"canvas-preview__full-execution-meta\">\r\n                  {fullExecutionSummary.metadata.map((item, index) => (\r\n                    <div key={`${item.label}-${item.value}-${index}`} className=\"canvas-preview__full-execution-meta-item\">\r\n                      <dt>{item.label}</dt>\r\n                      <dd>{item.value}</dd>\r\n                    </div>\r\n                  ))}\r\n                </dl>\r\n              )}\r\n            </>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {isRefreshing && <p className=\"canvas-modal__note\">Generating preview</p>}\r\n\r\n      {previewState.status === 'error' && previewState.error && (\r\n        <p className=\"canvas-modal__note canvas-modal__note--error\">{previewState.error}</p>\r\n      )}\r\n\r\n      {previewState.status === 'success' && previewState.data && (\r\n        <PreviewPanel\r\n          preview={previewState.data}\r\n          columns={visibleColumns}\r\n          rows={visibleRows}\r\n          tableNote={tableNote}\r\n          formatCellValue={formatCellValue}\r\n          formatMetricValue={formatMetricValue}\r\n          formatMissingPercentage={formatMissingPercentage}\r\n          formatNumericStat={formatNumericStat}\r\n          formatModeStat={formatModeStat}\r\n          fullExecutionStepLabel={fullExecutionSummary?.stepLabel ?? null}\r\n          fullExecutionWarnings={fullExecutionSummary?.warnings ?? []}\r\n        />\r\n      )}\r\n\r\n      {rowWindow.error && (\r\n        <p className=\"canvas-modal__note canvas-modal__note--error\">{rowWindow.error}</p>\r\n      )}\r\n\r\n      {showLargeDatasetNote && (\r\n        <p className=\"canvas-modal__note\">\r\n          Large dataset detected. Preview windows are capped at {formatMetricValue(WINDOW_LIMIT)} rows to stay responsive.\r\n        </p>\r\n      )}\r\n\r\n      {samplingAdjustmentMessages.length > 0 && (\r\n        <div className=\"canvas-modal__note\">\r\n          <strong>Sampling adjustments:</strong>\r\n          <ul>\r\n            {samplingAdjustmentMessages.map((message, index) => (\r\n              <li key={`${message}-${index}`}>{message}</li>\r\n            ))}\r\n          </ul>\r\n        </div>\r\n      )}\r\n\r\n      {effectiveHasMore && datasetSourceId && (\r\n        <div className=\"canvas-modal__section-actions\">\r\n          <button\r\n            type=\"button\"\r\n            className=\"btn btn-outline-secondary\"\r\n            onClick={handleLoadMore}\r\n            disabled={isLoadingMore}\r\n          >\r\n            {isLoadingMore ? 'Loading rows' : `Load next ${formatMetricValue(WINDOW_LIMIT)} rows`}\r\n          </button>\r\n        </div>\r\n      )}\r\n\r\n      {!effectiveHasMore && !isRefreshing && totalRows !== null && loadedRowCount >= totalRows && loadedRowCount > 0 && (\r\n        <p className=\"canvas-modal__note\">All available rows have been loaded.</p>\r\n      )}\r\n    </section>\r\n  );\r\n};\r\n","import React, { useCallback, useEffect, useMemo, useState } from 'react';\r\nimport type { Node } from 'react-flow-renderer';\r\nimport { fetchQuickProfile, type QuickProfileResponse } from '../../../../api';\r\n\r\nexport type ProfilingSamplePresetValue = '200' | '500' | '1000' | 'all';\r\n\r\nexport const PROFILING_SAMPLE_PRESETS: Array<{ value: ProfilingSamplePresetValue; label: string }> = [\r\n  { value: '200', label: '200 rows' },\r\n  { value: '500', label: '500 rows' },\r\n  { value: '1000', label: '1,000 rows' },\r\n  { value: 'all', label: 'Full dataset' },\r\n];\r\n\r\nexport type ProfilingState = {\r\n  status: 'idle' | 'loading' | 'success' | 'error';\r\n  data: QuickProfileResponse | null;\r\n  error: string | null;\r\n};\r\n\r\ntype DatasetProfileArgs = {\r\n  node: Node;\r\n  isDatasetProfileNode: boolean;\r\n  sourceId?: string | null;\r\n  hasReachableSource: boolean;\r\n  graphContext: { nodes: any[]; edges: any[] } | null;\r\n  profilingGraphSignature: string;\r\n  formatRelativeTime: (value?: string | null) => string | null;\r\n};\r\n\r\nexport type DatasetProfileController = {\r\n  profileState: ProfilingState;\r\n  profileData: QuickProfileResponse | null;\r\n  profilingSamplePreset: ProfilingSamplePresetValue;\r\n  setProfilingSamplePreset: (value: ProfilingSamplePresetValue) => void;\r\n  profilingActiveTab: 'summary' | 'correlations';\r\n  setProfilingActiveTab: (tab: 'summary' | 'correlations') => void;\r\n  isProfilingWarningsOpen: boolean;\r\n  setIsProfilingWarningsOpen: (value: boolean | ((value: boolean) => boolean)) => void;\r\n  handleRefreshDatasetProfile: () => void;\r\n  activeProfilingSamplePreset: { value: ProfilingSamplePresetValue; label: string };\r\n  profilingWarningsListId: string;\r\n  profilingSummaryPanelId: string;\r\n  profilingCorrelationsPanelId: string;\r\n  profilingSummaryTabId: string;\r\n  profilingCorrelationsTabId: string;\r\n  profilingCorrelationCount: number;\r\n  relativeProfilingGeneratedAt: string | null;\r\n};\r\n\r\nexport const useDatasetProfileController = ({\r\n  node,\r\n  isDatasetProfileNode,\r\n  sourceId,\r\n  hasReachableSource,\r\n  graphContext,\r\n  profilingGraphSignature,\r\n  formatRelativeTime,\r\n}: DatasetProfileArgs): DatasetProfileController => {\r\n  const [profileState, setProfileState] = useState<ProfilingState>({\r\n    status: 'idle',\r\n    data: null,\r\n    error: null,\r\n  });\r\n  const [profileRequestId, setProfileRequestId] = useState(0);\r\n  const [profileCache, setProfileCache] = useState<Record<string, QuickProfileResponse>>({});\r\n  const [profilingSamplePreset, setProfilingSamplePreset] = useState<ProfilingSamplePresetValue>('500');\r\n  const [profilingActiveTab, setProfilingActiveTab] = useState<'summary' | 'correlations'>('summary');\r\n  const [isProfilingWarningsOpen, setIsProfilingWarningsOpen] = useState(false);\r\n\r\n  const profilingCacheKey = useMemo(() => {\r\n    if (!isDatasetProfileNode || !sourceId) {\r\n      return null;\r\n    }\r\n    return `${sourceId}::${node?.id ?? ''}::${profilingSamplePreset}::${profilingGraphSignature}`;\r\n  }, [isDatasetProfileNode, node?.id, profilingGraphSignature, profilingSamplePreset, sourceId]);\r\n\r\n  const cachedProfileResult = useMemo(() => {\r\n    if (!profilingCacheKey) {\r\n      return null;\r\n    }\r\n    return profileCache[profilingCacheKey] ?? null;\r\n  }, [profileCache, profilingCacheKey]);\r\n\r\n  useEffect(() => {\r\n    setProfilingSamplePreset('500');\r\n    setProfileState({ status: 'idle', data: null, error: null });\r\n  }, [isDatasetProfileNode, node?.id]);\r\n\r\n  useEffect(() => {\r\n    if (!isDatasetProfileNode) {\r\n      setProfileState({ status: 'idle', data: null, error: null });\r\n      return;\r\n    }\r\n\r\n    if (!sourceId) {\r\n      setProfileState({\r\n        status: 'error',\r\n        data: null,\r\n        error: 'Select a dataset to generate a lightweight profile.',\r\n      });\r\n      return;\r\n    }\r\n\r\n    if (!hasReachableSource) {\r\n      setProfileState({\r\n        status: 'error',\r\n        data: null,\r\n        error: 'Connect this step to an upstream output to generate a profile.',\r\n      });\r\n      return;\r\n    }\r\n\r\n    if (cachedProfileResult) {\r\n      setProfileState({\r\n        status: 'success',\r\n        data: cachedProfileResult,\r\n        error: null,\r\n      });\r\n      return;\r\n    }\r\n\r\n    let isActive = true;\r\n    setProfileState({ status: 'loading', data: null, error: null });\r\n\r\n    const selectedPreset =\r\n      PROFILING_SAMPLE_PRESETS.find((preset) => preset.value === profilingSamplePreset) ??\r\n      PROFILING_SAMPLE_PRESETS[1] ??\r\n      PROFILING_SAMPLE_PRESETS[0];\r\n\r\n    const requestedSampleSize: number | 'all' =\r\n      selectedPreset.value === 'all' ? 'all' : Number(selectedPreset.value);\r\n\r\n    fetchQuickProfile(sourceId, {\r\n      sampleSize: requestedSampleSize,\r\n      graph: graphContext,\r\n      targetNodeId: node?.id ?? null,\r\n    })\r\n      .then((result) => {\r\n        if (!isActive) {\r\n          return;\r\n        }\r\n        if (profilingCacheKey && result) {\r\n          setProfileCache((previous) => ({\r\n            ...previous,\r\n            [profilingCacheKey]: result,\r\n          }));\r\n        }\r\n        setProfileState({\r\n          status: 'success',\r\n          data: result ?? null,\r\n          error: null,\r\n        });\r\n      })\r\n      .catch((error: any) => {\r\n        if (!isActive) {\r\n          return;\r\n        }\r\n        setProfileState({\r\n          status: 'error',\r\n          data: null,\r\n          error: error?.message ?? 'Unable to generate dataset profile',\r\n        });\r\n      });\r\n\r\n    return () => {\r\n      isActive = false;\r\n    };\r\n  }, [\r\n    cachedProfileResult,\r\n    graphContext,\r\n    hasReachableSource,\r\n    isDatasetProfileNode,\r\n    node?.id,\r\n    profileRequestId,\r\n    profilingCacheKey,\r\n    profilingSamplePreset,\r\n    sourceId,\r\n  ]);\r\n\r\n  const profileData = profileState.data;\r\n  const profileGeneratedAtKey = profileData?.generated_at ?? null;\r\n  const profilingCorrelationCount = profileData?.correlations?.length ?? 0;\r\n\r\n  useEffect(() => {\r\n    setIsProfilingWarningsOpen(false);\r\n    setProfilingActiveTab('summary');\r\n  }, [isDatasetProfileNode, profileGeneratedAtKey]);\r\n\r\n  useEffect(() => {\r\n    if (profilingActiveTab === 'correlations' && profilingCorrelationCount === 0) {\r\n      setProfilingActiveTab('summary');\r\n    }\r\n  }, [profilingActiveTab, profilingCorrelationCount]);\r\n\r\n  const handleRefreshDatasetProfile = useCallback(() => {\r\n    if (profilingCacheKey) {\r\n      setProfileCache((previous) => {\r\n        if (!Object.prototype.hasOwnProperty.call(previous, profilingCacheKey)) {\r\n          return previous;\r\n        }\r\n        const next = { ...previous };\r\n        delete next[profilingCacheKey];\r\n        return next;\r\n      });\r\n    }\r\n    setProfileRequestId((value) => value + 1);\r\n  }, [profilingCacheKey]);\r\n\r\n  const profilingWarningsListId = useMemo(\r\n    () => (node?.id ? `profiling-warnings-${node.id}` : 'profiling-warnings'),\r\n    [node?.id],\r\n  );\r\n\r\n  const profilingSummaryPanelId = useMemo(\r\n    () => (node?.id ? `profiling-summary-${node.id}` : 'profiling-summary'),\r\n    [node?.id],\r\n  );\r\n\r\n  const profilingCorrelationsPanelId = useMemo(\r\n    () => (node?.id ? `profiling-correlations-${node.id}` : 'profiling-correlations'),\r\n    [node?.id],\r\n  );\r\n\r\n  const profilingSummaryTabId = useMemo(\r\n    () => (node?.id ? `profiling-summary-tab-${node.id}` : 'profiling-summary-tab'),\r\n    [node?.id],\r\n  );\r\n\r\n  const profilingCorrelationsTabId = useMemo(\r\n    () => (node?.id ? `profiling-correlations-tab-${node.id}` : 'profiling-correlations-tab'),\r\n    [node?.id],\r\n  );\r\n\r\n  const activeProfilingSamplePreset = useMemo(\r\n    () =>\r\n      PROFILING_SAMPLE_PRESETS.find((preset) => preset.value === profilingSamplePreset) ??\r\n      PROFILING_SAMPLE_PRESETS[0],\r\n    [profilingSamplePreset],\r\n  );\r\n\r\n  const relativeProfilingGeneratedAt = useMemo(\r\n    () => formatRelativeTime(profileData?.generated_at ?? null),\r\n    [formatRelativeTime, profileData?.generated_at],\r\n  );\r\n\r\n  return {\r\n    profileState,\r\n    profileData,\r\n    profilingSamplePreset,\r\n    setProfilingSamplePreset,\r\n    profilingActiveTab,\r\n    setProfilingActiveTab,\r\n    isProfilingWarningsOpen,\r\n    setIsProfilingWarningsOpen,\r\n    handleRefreshDatasetProfile,\r\n    activeProfilingSamplePreset,\r\n    profilingWarningsListId,\r\n    profilingSummaryPanelId,\r\n    profilingCorrelationsPanelId,\r\n    profilingSummaryTabId,\r\n    profilingCorrelationsTabId,\r\n    profilingCorrelationCount,\r\n    relativeProfilingGeneratedAt,\r\n  };\r\n};\r\n\r\nexport type DatasetProfileSectionProps = {\r\n  isDatasetProfileNode: boolean;\r\n  controller: DatasetProfileController;\r\n  formatCellValue: (value: any) => string;\r\n  formatNumericStat: (value?: number | null) => string;\r\n  formatMissingPercentage: (value: number) => string;\r\n};\r\n\r\nexport const DatasetProfileSection: React.FC<DatasetProfileSectionProps> = ({\r\n  isDatasetProfileNode,\r\n  controller,\r\n  formatCellValue,\r\n  formatNumericStat,\r\n  formatMissingPercentage,\r\n}) => {\r\n  if (!isDatasetProfileNode) {\r\n    return null;\r\n  }\r\n\r\n  const {\r\n    profileState,\r\n    profileData,\r\n    profilingSamplePreset,\r\n    setProfilingSamplePreset,\r\n    profilingActiveTab,\r\n    setProfilingActiveTab,\r\n    isProfilingWarningsOpen,\r\n    setIsProfilingWarningsOpen,\r\n    handleRefreshDatasetProfile,\r\n    activeProfilingSamplePreset,\r\n    profilingWarningsListId,\r\n    profilingSummaryPanelId,\r\n    profilingCorrelationsPanelId,\r\n    profilingSummaryTabId,\r\n    profilingCorrelationsTabId,\r\n    profilingCorrelationCount,\r\n    relativeProfilingGeneratedAt,\r\n  } = controller;\r\n\r\n  const hasProfileData = profileState.status === 'success' && Boolean(profileData);\r\n\r\n  return (\r\n    <section className=\"canvas-modal__section\">\r\n      <div className=\"canvas-modal__section-header\">\r\n        <h3>Dataset profile</h3>\r\n        <div className=\"canvas-modal__section-actions\">\r\n          <div className=\"canvas-sample__group\">\r\n            <span className=\"canvas-sample__label\">Sample</span>\r\n            <div className=\"canvas-skewness__segmented\" role=\"group\" aria-label=\"Profile sampling presets\">\r\n              {PROFILING_SAMPLE_PRESETS.map((preset) => (\r\n                <button\r\n                  key={preset.value}\r\n                  type=\"button\"\r\n                  className=\"canvas-skewness__segmented-button\"\r\n                  data-active={preset.value === profilingSamplePreset}\r\n                  onClick={() => setProfilingSamplePreset(preset.value)}\r\n                  disabled={profileState.status === 'loading'}\r\n                >\r\n                  {preset.label}\r\n                </button>\r\n              ))}\r\n            </div>\r\n          </div>\r\n          <button\r\n            type=\"button\"\r\n            className=\"btn btn-outline-secondary\"\r\n            onClick={handleRefreshDatasetProfile}\r\n            disabled={profileState.status === 'loading'}\r\n          >\r\n            {profileState.status === 'loading' ? 'Refreshing' : 'Refresh'}\r\n          </button>\r\n        </div>\r\n      </div>\r\n      {relativeProfilingGeneratedAt && (\r\n        <span className=\"canvas-modal__meta\">Updated {relativeProfilingGeneratedAt}</span>\r\n      )}\r\n      <p className=\"canvas-modal__note\">\r\n        Sampling preset: <strong>{activeProfilingSamplePreset.label}</strong>.\r\n      </p>\r\n      {profileState.status === 'loading' && (\r\n        <p className=\"canvas-modal__note\">Generating dataset profile</p>\r\n      )}\r\n      {profileState.status === 'error' && (\r\n        <p className=\"canvas-modal__note canvas-modal__note--error\">{profileState.error}</p>\r\n      )}\r\n      {hasProfileData && profileData && (\r\n        <>\r\n          <div className=\"canvas-profiling__meta\">\r\n            <span>Rows analysed: {profileData.rows_analyzed.toLocaleString()}</span>\r\n            <span>Columns: {profileData.columns_analyzed.toLocaleString()}</span>\r\n            <span>Sample size: {profileData.sample_size.toLocaleString()} rows</span>\r\n            <span>Missing cells: {profileData.metrics.missing_cells.toLocaleString()}</span>\r\n            <span>Duplicate rows: {profileData.metrics.duplicate_rows.toLocaleString()}</span>\r\n          </div>\r\n          <div className=\"canvas-profiling__tabs\" role=\"tablist\" aria-label=\"Dataset profile views\">\r\n            <button\r\n              type=\"button\"\r\n              className=\"canvas-profiling__tab\"\r\n              id={profilingSummaryTabId}\r\n              role=\"tab\"\r\n              data-active={profilingActiveTab === 'summary'}\r\n              aria-selected={profilingActiveTab === 'summary'}\r\n              aria-controls={profilingSummaryPanelId}\r\n              onClick={() => setProfilingActiveTab('summary')}\r\n            >\r\n              Summary\r\n            </button>\r\n            <button\r\n              type=\"button\"\r\n              className=\"canvas-profiling__tab\"\r\n              id={profilingCorrelationsTabId}\r\n              role=\"tab\"\r\n              data-active={profilingActiveTab === 'correlations'}\r\n              aria-selected={profilingActiveTab === 'correlations'}\r\n              aria-controls={profilingCorrelationsPanelId}\r\n              onClick={() => setProfilingActiveTab('correlations')}\r\n              disabled={!profilingCorrelationCount}\r\n            >\r\n              Correlations\r\n            </button>\r\n          </div>\r\n          {profilingActiveTab === 'summary' && (\r\n            <div\r\n              className=\"canvas-profiling__panel\"\r\n              id={profilingSummaryPanelId}\r\n              role=\"tabpanel\"\r\n              aria-labelledby={profilingSummaryTabId}\r\n            >\r\n              {profileData.warnings && profileData.warnings.length > 0 ? (\r\n                <div className=\"canvas-profiling__warnings\">\r\n                  <button\r\n                    type=\"button\"\r\n                    className=\"canvas-profiling__warnings-toggle\"\r\n                    onClick={() => setIsProfilingWarningsOpen((value) => !value)}\r\n                    aria-expanded={isProfilingWarningsOpen}\r\n                    aria-controls={profilingWarningsListId}\r\n                  >\r\n                    {isProfilingWarningsOpen\r\n                      ? 'Hide warnings'\r\n                      : `Show warnings (${profileData.warnings.length})`}\r\n                  </button>\r\n                  {isProfilingWarningsOpen && (\r\n                    <ul className=\"canvas-profiling__warnings-list\" id={profilingWarningsListId}>\r\n                      {profileData.warnings.map((warning, index) => (\r\n                        <li key={`profiling-warning-${index}`}>{warning}</li>\r\n                      ))}\r\n                    </ul>\r\n                  )}\r\n                </div>\r\n              ) : null}\r\n              <div className=\"canvas-quick-profile__columns\">\r\n                {profileData.columns.map((column) => {\r\n                  const numericSummary = column.numeric_summary;\r\n                  const hasNumericSummary = Boolean(numericSummary);\r\n                  const topValues = Array.isArray(column.top_values) ? column.top_values : [];\r\n                  const sampleValues = Array.isArray(column.sample_values) ? column.sample_values : [];\r\n\r\n                  return (\r\n                    <article\r\n                      key={column.name}\r\n                      className=\"canvas-quick-profile__column\"\r\n                      aria-label={`${column.name} summary`}\r\n                    >\r\n                      <header className=\"canvas-quick-profile__column-header\">\r\n                        <h4>{column.name}</h4>\r\n                        <span className=\"canvas-quick-profile__dtype\">\r\n                          {column.semantic_type ?? column.dtype ?? 'Unknown'}\r\n                        </span>\r\n                      </header>\r\n                      <dl className=\"canvas-quick-profile__stats\">\r\n                        <div>\r\n                          <dt>Missing</dt>\r\n                          <dd>\r\n                            {`${formatMissingPercentage(column.missing_percentage)} (${column.missing_count.toLocaleString()})`}\r\n                          </dd>\r\n                        </div>\r\n                        <div>\r\n                          <dt>Distinct</dt>\r\n                          <dd>{column.distinct_count !== null ? column.distinct_count.toLocaleString() : ''}</dd>\r\n                        </div>\r\n                      </dl>\r\n                      {hasNumericSummary ? (\r\n                        <div className=\"canvas-quick-profile__numeric\">\r\n                          <h5>Distribution</h5>\r\n                          <div className=\"canvas-quick-profile__numeric-grid\">\r\n                            <span>\r\n                              <strong>Mean</strong> {formatNumericStat(numericSummary?.mean)}\r\n                            </span>\r\n                            <span>\r\n                              <strong>Std dev</strong> {formatNumericStat(numericSummary?.std)}\r\n                            </span>\r\n                            <span>\r\n                              <strong>Min</strong> {formatNumericStat(numericSummary?.minimum)}\r\n                            </span>\r\n                            <span>\r\n                              <strong>Max</strong> {formatNumericStat(numericSummary?.maximum)}\r\n                            </span>\r\n                            <span>\r\n                              <strong>P25</strong> {formatNumericStat(numericSummary?.percentile_25)}\r\n                            </span>\r\n                            <span>\r\n                              <strong>Median</strong> {formatNumericStat(numericSummary?.percentile_50)}\r\n                            </span>\r\n                            <span>\r\n                              <strong>P75</strong> {formatNumericStat(numericSummary?.percentile_75)}\r\n                            </span>\r\n                          </div>\r\n                        </div>\r\n                      ) : null}\r\n                      {topValues.length > 0 ? (\r\n                        <div className=\"canvas-quick-profile__top-values\">\r\n                          <h5>Top values</h5>\r\n                          <ul>\r\n                            {topValues.map((entry, index) => (\r\n                              <li key={`${column.name}-top-${index}`}>\r\n                                <span className=\"canvas-quick-profile__value\">{formatCellValue(entry.value)}</span>\r\n                                <span className=\"canvas-quick-profile__count\">\r\n                                  {entry.count.toLocaleString()} ({entry.percentage.toFixed(1)}%)\r\n                                </span>\r\n                              </li>\r\n                            ))}\r\n                          </ul>\r\n                        </div>\r\n                      ) : null}\r\n                      {sampleValues.length > 0 ? (\r\n                        <div className=\"canvas-quick-profile__samples\">\r\n                          <h5>Sample values</h5>\r\n                          <ul>\r\n                            {sampleValues.slice(0, 5).map((value, index) => (\r\n                              <li key={`${column.name}-sample-${index}`}>{formatCellValue(value)}</li>\r\n                            ))}\r\n                          </ul>\r\n                        </div>\r\n                      ) : null}\r\n                    </article>\r\n                  );\r\n                })}\r\n              </div>\r\n            </div>\r\n          )}\r\n          {profilingActiveTab === 'correlations' && (\r\n            <div\r\n              className=\"canvas-profiling__panel\"\r\n              id={profilingCorrelationsPanelId}\r\n              role=\"tabpanel\"\r\n              aria-labelledby={profilingCorrelationsTabId}\r\n            >\r\n              <div className=\"canvas-quick-profile__correlations\">\r\n                <h4>Top correlations</h4>\r\n                {profileData.correlations && profileData.correlations.length > 0 ? (\r\n                  <table className=\"canvas-quick-profile__correlation-table\">\r\n                    <thead>\r\n                      <tr>\r\n                        <th scope=\"col\">Column A</th>\r\n                        <th scope=\"col\">Column B</th>\r\n                        <th scope=\"col\">Coefficient</th>\r\n                      </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                      {profileData.correlations.map((entry, index) => {\r\n                        const magnitude = Math.abs(entry.coefficient);\r\n                        let strength: 'low' | 'moderate' | 'strong' | 'extreme' = 'low';\r\n                        if (magnitude >= 0.85) {\r\n                          strength = 'extreme';\r\n                        } else if (magnitude >= 0.7) {\r\n                          strength = 'strong';\r\n                        } else if (magnitude >= 0.55) {\r\n                          strength = 'moderate';\r\n                        }\r\n                        const sign = entry.coefficient >= 0 ? 'positive' : 'negative';\r\n                        return (\r\n                          <tr key={`profile-correlation-${index}`}>\r\n                            <td>{entry.column_a}</td>\r\n                            <td>{entry.column_b}</td>\r\n                            <td\r\n                              className=\"canvas-quick-profile__correlation-coefficient\"\r\n                              data-strength={strength}\r\n                              data-sign={sign}\r\n                            >\r\n                              {entry.coefficient.toFixed(2)}\r\n                            </td>\r\n                          </tr>\r\n                        );\r\n                      })}\r\n                    </tbody>\r\n                  </table>\r\n                ) : (\r\n                  <p className=\"canvas-quick-profile__correlations-empty\">\r\n                    Not enough numeric columns to compute correlations yet.\r\n                  </p>\r\n                )}\r\n              </div>\r\n            </div>\r\n          )}\r\n        </>\r\n      )}\r\n    </section>\r\n  );\r\n};\r\n","import React from 'react';\r\n\r\ntype PlaceholderIconProps = {\r\n  type: 'dataset' | 'default';\r\n};\r\n\r\nconst PlaceholderIcon: React.FC<PlaceholderIconProps> = ({ type }) => (\r\n  <span\r\n    aria-hidden=\"true\"\r\n    className={`canvas-modal__title-glyph${type === 'dataset' ? ' canvas-modal__title-glyph--dataset' : ''}`}\r\n  >\r\n    {type === 'dataset' ? '' : ''}\r\n  </span>\r\n);\r\n\r\ntype NodeSettingsHeaderProps = {\r\n  title: string;\r\n  isDataset: boolean;\r\n  onClose: () => void;\r\n  canResetNode?: boolean;\r\n  onResetNode?: () => void;\r\n};\r\n\r\nexport const NodeSettingsHeader: React.FC<NodeSettingsHeaderProps> = ({\r\n  title,\r\n  isDataset,\r\n  onClose,\r\n  canResetNode = false,\r\n  onResetNode,\r\n}) => (\r\n  <div className=\"canvas-modal__header\">\r\n    <div className=\"canvas-modal__title-group\">\r\n      <PlaceholderIcon type={isDataset ? 'dataset' : 'default'} />\r\n      <div>\r\n        <h2 className=\"canvas-modal__title\" id=\"node-settings-title\">\r\n          {title}\r\n        </h2>\r\n        <p className=\"canvas-modal__subtitle\">\r\n          {isDataset\r\n            ? 'Configure how this dataset feeds the pipeline.'\r\n            : 'Adjust parameters to control this transformation.'}\r\n        </p>\r\n      </div>\r\n    </div>\r\n    <div className=\"canvas-modal__header-actions\">\r\n      {canResetNode && onResetNode && (\r\n        <button\r\n          type=\"button\"\r\n          className=\"btn btn-outline-secondary\"\r\n          onClick={onResetNode}\r\n        >\r\n          Reset node\r\n        </button>\r\n      )}\r\n      <button type=\"button\" className=\"canvas-modal__close\" onClick={onClose} aria-label=\"Close settings\">\r\n        \r\n      </button>\r\n    </div>\r\n  </div>\r\n);\r\n","import React from 'react';\r\n\r\ntype NodeSettingsFooterProps = {\r\n  onClose: () => void;\r\n  canResetNode: boolean;\r\n  onResetNode: () => void;\r\n  showSaveButton: boolean;\r\n  canSave: boolean;\r\n  onSave: () => void;\r\n  isBusy: boolean;\r\n  busyLabel?: string | null;\r\n};\r\n\r\nexport const NodeSettingsFooter: React.FC<NodeSettingsFooterProps> = ({\r\n  onClose,\r\n  canResetNode,\r\n  onResetNode,\r\n  showSaveButton,\r\n  canSave,\r\n  onSave,\r\n  isBusy,\r\n  busyLabel,\r\n}) => (\r\n  <div className=\"canvas-modal__footer\">\r\n    <div\r\n      className=\"canvas-modal__footer-status\"\r\n      role=\"status\"\r\n      aria-live=\"polite\"\r\n      aria-busy={isBusy}\r\n    >\r\n      {isBusy && (\r\n        <>\r\n          <span className=\"canvas-modal__footer-spinner\" aria-hidden=\"true\" />\r\n          <span>{busyLabel ?? 'Processing'}</span>\r\n        </>\r\n      )}\r\n    </div>\r\n    <div className=\"canvas-modal__footer-actions\">\r\n      <button type=\"button\" className=\"btn btn-outline-secondary\" onClick={onClose}>\r\n        Close\r\n      </button>\r\n      {canResetNode && (\r\n        <button\r\n          type=\"button\"\r\n          className=\"btn btn-outline-secondary canvas-modal__reset\"\r\n          onClick={onResetNode}\r\n        >\r\n          Reset node\r\n        </button>\r\n      )}\r\n      {showSaveButton && (\r\n        <button type=\"button\" className=\"btn btn-primary\" onClick={onSave} disabled={!canSave}>\r\n          Save changes\r\n        </button>\r\n      )}\r\n    </div>\r\n  </div>\r\n);\r\n","export const formatMetricValue = (value?: number | null, precision = 0): string => {\r\n  if (value === undefined || value === null) {\r\n    return '';\r\n  }\r\n  const formatter = new Intl.NumberFormat(undefined, {\r\n    maximumFractionDigits: precision,\r\n  });\r\n  return formatter.format(value);\r\n};\r\n\r\nexport const formatMissingPercentage = (value?: number | null): string => {\r\n  if (value === undefined || value === null) {\r\n    return '';\r\n  }\r\n  const numeric = Number(value);\r\n  if (Number.isNaN(numeric)) {\r\n    return '';\r\n  }\r\n  const precision = numeric % 1 === 0 ? 0 : 1;\r\n  return `${numeric.toFixed(precision)}%`;\r\n};\r\n\r\nexport const formatNumericStat = (value?: number | null): string => {\r\n  if (value === undefined || value === null) {\r\n    return '';\r\n  }\r\n  const numeric = Number(value);\r\n  if (Number.isNaN(numeric)) {\r\n    return '';\r\n  }\r\n  const precision = Math.abs(numeric) >= 1 ? 2 : 4;\r\n  return formatMetricValue(numeric, precision);\r\n};\r\n\r\nexport const formatModeStat = (value?: string | number | null): string => {\r\n  if (value === undefined || value === null || value === '') {\r\n    return '';\r\n  }\r\n  if (typeof value === 'number') {\r\n    return formatNumericStat(value);\r\n  }\r\n  return String(value);\r\n};\r\n\r\nexport const getPriorityClass = (priority?: string | null): string | null => {\r\n  if (!priority) {\r\n    return null;\r\n  }\r\n  const normalized = priority.toLowerCase();\r\n  if (normalized === 'critical') {\r\n    return 'critical';\r\n  }\r\n  if (normalized === 'high') {\r\n    return 'high';\r\n  }\r\n  if (normalized === 'medium') {\r\n    return 'medium';\r\n  }\r\n  return null;\r\n};\r\n\r\nexport const getPriorityLabel = (priority?: string | null): string | null => {\r\n  if (!priority) {\r\n    return null;\r\n  }\r\n  const normalized = priority.toLowerCase();\r\n  if (normalized === 'critical') {\r\n    return 'Critical';\r\n  }\r\n  if (normalized === 'high') {\r\n    return 'High';\r\n  }\r\n  if (normalized === 'medium') {\r\n    return 'Medium';\r\n  }\r\n  return priority.charAt(0).toUpperCase() + priority.slice(1);\r\n};\r\n","import { ensureArrayOfString } from '../../sharedUtils';\r\n\r\nexport type BinningStrategy = 'equal_width' | 'equal_frequency' | 'custom' | 'kbins';\r\nexport type BinningLabelFormat = 'range' | 'bin_index' | 'ordinal' | 'column_suffix';\r\nexport type BinningMissingStrategy = 'keep' | 'label';\r\nexport type KBinsStrategy = 'uniform' | 'quantile' | 'kmeans';\r\nexport type KBinsEncode = 'ordinal' | 'onehot' | 'onehot-dense';\r\n\r\nexport type BinningColumnOverride = {\r\n  strategy?: BinningStrategy;\r\n  equalWidthBins?: number;\r\n  equalFrequencyBins?: number;\r\n  kbinsNBins?: number;\r\n  kbinsEncode?: KBinsEncode;\r\n  kbinsStrategy?: KBinsStrategy;\r\n  customBins?: number[];\r\n  customLabels?: string[];\r\n};\r\n\r\nexport type NormalizedBinningConfig = {\r\n  strategy: BinningStrategy;\r\n  columns: string[];\r\n  equalWidthBins: number;\r\n  equalFrequencyBins: number;\r\n  includeLowest: boolean;\r\n  precision: number;\r\n  duplicates: 'raise' | 'drop';\r\n  outputSuffix: string;\r\n  dropOriginal: boolean;\r\n  labelFormat: BinningLabelFormat;\r\n  missingStrategy: BinningMissingStrategy;\r\n  missingLabel: string;\r\n  customBins: Record<string, number[]>;\r\n  customLabels: Record<string, string[]>;\r\n  columnStrategies: Record<string, BinningColumnOverride>;\r\n  // KBinsDiscretizer options\r\n  kbinsNBins: number;\r\n  kbinsEncode: KBinsEncode;\r\n  kbinsStrategy: KBinsStrategy;\r\n};\r\n\r\nexport type BinnedSamplePresetValue = '500' | '10000' | 'all';\r\n\r\nexport type BinnedSamplePreset = {\r\n  value: BinnedSamplePresetValue;\r\n  label: string;\r\n};\r\n\r\nexport type BinnedDistributionBin = {\r\n  label: string;\r\n  count: number;\r\n  percentage: number;\r\n  isMissing: boolean;\r\n};\r\n\r\nexport type BinnedDistributionCard = {\r\n  column: string;\r\n  sourceColumn: string | null;\r\n  totalRows: number;\r\n  missingRows: number;\r\n  distinctBins: number;\r\n  topLabel: string | null;\r\n  topCount: number | null;\r\n  topPercentage: number | null;\r\n  bins: BinnedDistributionBin[];\r\n  hasMoreBins: boolean;\r\n  totalBinCount: number;\r\n};\r\n\r\nexport const BINNING_DEFAULT_EQUAL_WIDTH_BINS = 5;\r\nexport const BINNING_DEFAULT_EQUAL_FREQUENCY_BINS = 4;\r\nexport const BINNING_DEFAULT_PRECISION = 3;\r\nexport const BINNING_DEFAULT_SUFFIX = '_binned';\r\nexport const BINNING_DEFAULT_MISSING_LABEL = 'Missing';\r\nexport const KBINS_DEFAULT_N_BINS = 5;\r\nexport const KBINS_DEFAULT_ENCODE = 'ordinal';\r\nexport const KBINS_DEFAULT_STRATEGY = 'quantile';\r\n\r\nexport type BinningStrategyOption = {\r\n  value: BinningStrategy;\r\n  label: string;\r\n  description: string;\r\n};\r\n\r\nexport const BINNING_STRATEGY_OPTIONS: BinningStrategyOption[] = [\r\n  { value: 'equal_width', label: 'Equal-width', description: 'Uniform bin widths based on min/max range.' },\r\n  {\r\n    value: 'equal_frequency',\r\n    label: 'Equal-frequency',\r\n    description: 'Quantile-based bins with similar row counts in each bucket.',\r\n  },\r\n  { value: 'custom', label: 'Custom edges', description: 'Provide explicit thresholds and optional labels per column.' },\r\n  { value: 'kbins', label: 'KBins (sklearn)', description: 'Use sklearn KBinsDiscretizer with uniform, quantile, or k-means strategies.' },\r\n];\r\n\r\nexport type BinningLabelFormatOption = {\r\n  value: BinningLabelFormat;\r\n  label: string;\r\n};\r\n\r\nexport const BINNING_LABEL_FORMAT_OPTIONS: BinningLabelFormatOption[] = [\r\n  { value: 'range', label: 'Numeric interval (default)' },\r\n  { value: 'bin_index', label: 'Index (bin_0, bin_1, )' },\r\n  { value: 'ordinal', label: 'Ordinal (Bin 1, Bin 2, )' },\r\n  { value: 'column_suffix', label: 'Column suffix (col_binned_1, )' },\r\n];\r\n\r\nexport type BinningDuplicateOption = {\r\n  value: 'raise' | 'drop';\r\n  label: string;\r\n};\r\n\r\nexport const BINNING_DUPLICATE_OPTIONS: BinningDuplicateOption[] = [\r\n  { value: 'raise', label: 'Raise error on duplicate edges' },\r\n  { value: 'drop', label: 'Drop duplicate edges' },\r\n];\r\n\r\nexport const BINNING_STRATEGY_LABELS: Record<BinningStrategy, string> = {\r\n  equal_width: 'Equal-width',\r\n  equal_frequency: 'Equal-frequency',\r\n  custom: 'Custom edges',\r\n  kbins: 'KBins (sklearn)',\r\n};\r\n\r\nexport type BinningMissingOption = {\r\n  value: BinningMissingStrategy;\r\n  label: string;\r\n};\r\n\r\nexport const BINNING_MISSING_OPTIONS: BinningMissingOption[] = [\r\n  { value: 'keep', label: 'Leave as missing' },\r\n  { value: 'label', label: 'Replace with label' },\r\n];\r\n\r\nexport const BINNED_SAMPLE_PRESETS: BinnedSamplePreset[] = [\r\n  { value: '500', label: '500 rows (default)' },\r\n  { value: '10000', label: '10000 rows (detailed)' },\r\n  { value: 'all', label: 'Full dataset' },\r\n];\r\n\r\nexport const normalizeBinningConfigValue = (value: any): NormalizedBinningConfig => {\r\n  const rawStrategy = typeof value?.strategy === 'string' ? value.strategy.trim().toLowerCase() : '';\r\n  const strategy = (['equal_width', 'equal_frequency', 'custom', 'kbins'] as BinningStrategy[]).includes(\r\n    rawStrategy as BinningStrategy,\r\n  )\r\n    ? (rawStrategy as BinningStrategy)\r\n    : 'equal_width';\r\n\r\n  const columns = ensureArrayOfString(value?.columns);\r\n\r\n  const clampInteger = (input: any, fallback: number, minimum: number, maximum: number) => {\r\n    const numeric = Number(input);\r\n    if (!Number.isFinite(numeric)) {\r\n      return fallback;\r\n    }\r\n    const rounded = Math.round(numeric);\r\n    return Math.max(minimum, Math.min(maximum, rounded));\r\n  };\r\n\r\n  const equalWidthBins = clampInteger(value?.equal_width_bins, BINNING_DEFAULT_EQUAL_WIDTH_BINS, 2, 200);\r\n  const equalFrequencyBins = clampInteger(value?.equal_frequency_bins, BINNING_DEFAULT_EQUAL_FREQUENCY_BINS, 2, 200);\r\n  const precision = clampInteger(value?.precision, BINNING_DEFAULT_PRECISION, 0, 8);\r\n\r\n  const duplicates = value?.duplicates === 'drop' ? 'drop' : 'raise';\r\n  const includeLowest = Boolean(value?.include_lowest ?? true);\r\n  const dropOriginal = Boolean(value?.drop_original ?? false);\r\n\r\n  const outputSuffixRaw = typeof value?.output_suffix === 'string' ? value.output_suffix.trim() : '';\r\n  const outputSuffix = outputSuffixRaw || BINNING_DEFAULT_SUFFIX;\r\n\r\n  const rawLabelFormat = typeof value?.label_format === 'string' ? value.label_format.trim().toLowerCase() : '';\r\n  const labelFormat = (['range', 'bin_index', 'ordinal', 'column_suffix'] as BinningLabelFormat[]).includes(\r\n    rawLabelFormat as BinningLabelFormat,\r\n  )\r\n    ? (rawLabelFormat as BinningLabelFormat)\r\n    : 'range';\r\n\r\n  const rawMissingStrategy =\r\n    typeof value?.missing_strategy === 'string' ? value.missing_strategy.trim().toLowerCase() : '';\r\n  const missingStrategy: BinningMissingStrategy = rawMissingStrategy === 'label' ? 'label' : 'keep';\r\n  const missingLabelCandidate = typeof value?.missing_label === 'string' ? value.missing_label.trim() : '';\r\n  const missingLabel =\r\n    missingStrategy === 'label' ? missingLabelCandidate || BINNING_DEFAULT_MISSING_LABEL : BINNING_DEFAULT_MISSING_LABEL;\r\n\r\n  // KBins parameters\r\n  const kbinsNBins = clampInteger(value?.kbins_n_bins, KBINS_DEFAULT_N_BINS, 2, 200);\r\n  \r\n  const rawKbinsEncode = typeof value?.kbins_encode === 'string' ? value.kbins_encode.trim().toLowerCase() : '';\r\n  const kbinsEncode: KBinsEncode = (['ordinal', 'onehot', 'onehot-dense'] as KBinsEncode[]).includes(\r\n    rawKbinsEncode as KBinsEncode,\r\n  )\r\n    ? (rawKbinsEncode as KBinsEncode)\r\n    : KBINS_DEFAULT_ENCODE;\r\n  \r\n  const rawKbinsStrategy = typeof value?.kbins_strategy === 'string' ? value.kbins_strategy.trim().toLowerCase() : '';\r\n  const kbinsStrategy: KBinsStrategy = (['uniform', 'quantile', 'kmeans'] as KBinsStrategy[]).includes(\r\n    rawKbinsStrategy as KBinsStrategy,\r\n  )\r\n    ? (rawKbinsStrategy as KBinsStrategy)\r\n    : KBINS_DEFAULT_STRATEGY;\r\n\r\n  const parseNumberList = (rawBins: any): number[] => {\r\n    if (!Array.isArray(rawBins)) {\r\n      return [];\r\n    }\r\n    const numericBins = rawBins\r\n      .map((entry) => {\r\n        if (typeof entry === 'number') {\r\n          return entry;\r\n        }\r\n        if (entry === null || entry === undefined) {\r\n          return Number.NaN;\r\n        }\r\n        const trimmed = String(entry).trim();\r\n        if (!trimmed) {\r\n          return Number.NaN;\r\n        }\r\n        return Number(trimmed);\r\n      })\r\n      .filter((entry) => Number.isFinite(entry))\r\n      .sort((a, b) => a - b);\r\n    const uniqueBins = numericBins.filter((entry, index, array) => index === 0 || entry !== array[index - 1]);\r\n    return uniqueBins.length >= 2 ? uniqueBins : [];\r\n  };\r\n\r\n  const parseLabelList = (rawLabels: any): string[] => {\r\n    if (Array.isArray(rawLabels)) {\r\n      return rawLabels.map((entry) => String(entry).trim()).filter(Boolean);\r\n    }\r\n    if (typeof rawLabels === 'string') {\r\n      return rawLabels\r\n        .split(/[\\,\\n]/)\r\n        .map((segment) => segment.trim())\r\n        .filter(Boolean);\r\n    }\r\n    return [];\r\n  };\r\n\r\n  const coerceOptionalInteger = (input: any, minimum: number, maximum: number): number | null => {\r\n    if (input === null || input === undefined) {\r\n      return null;\r\n    }\r\n    const numeric = Number(input);\r\n    if (!Number.isFinite(numeric)) {\r\n      return null;\r\n    }\r\n    const rounded = Math.round(numeric);\r\n    return Math.max(minimum, Math.min(maximum, rounded));\r\n  };\r\n\r\n  const customBins: Record<string, number[]> = {};\r\n  if (value?.custom_bins && typeof value.custom_bins === 'object' && !Array.isArray(value.custom_bins)) {\r\n    Object.entries(value.custom_bins as Record<string, any>).forEach(([key, rawBins]) => {\r\n      const column = String(key ?? '').trim();\r\n      if (!column) {\r\n        return;\r\n      }\r\n      const parsed = parseNumberList(rawBins);\r\n      if (parsed.length >= 2) {\r\n        customBins[column] = parsed;\r\n      }\r\n    });\r\n  }\r\n\r\n  const customLabels: Record<string, string[]> = {};\r\n  if (value?.custom_labels && typeof value.custom_labels === 'object' && !Array.isArray(value.custom_labels)) {\r\n    Object.entries(value.custom_labels as Record<string, any>).forEach(([key, rawLabels]) => {\r\n      const column = String(key ?? '').trim();\r\n      if (!column) {\r\n        return;\r\n      }\r\n      const labels = parseLabelList(rawLabels);\r\n      if (labels.length) {\r\n        customLabels[column] = labels;\r\n      }\r\n    });\r\n  }\r\n\r\n  const columnStrategies: Record<string, BinningColumnOverride> = {};\r\n  const rawColumnStrategies = (() => {\r\n    if (value?.column_strategies && typeof value.column_strategies === 'object' && !Array.isArray(value.column_strategies)) {\r\n      return value.column_strategies as Record<string, any>;\r\n    }\r\n    if (value?.column_overrides && typeof value.column_overrides === 'object' && !Array.isArray(value.column_overrides)) {\r\n      return value.column_overrides as Record<string, any>;\r\n    }\r\n    return null;\r\n  })();\r\n\r\n  if (rawColumnStrategies) {\r\n    Object.entries(rawColumnStrategies).forEach(([key, rawOverride]) => {\r\n      const column = String(key ?? '').trim();\r\n      if (!column) {\r\n        return;\r\n      }\r\n      if (!rawOverride || typeof rawOverride !== 'object' || Array.isArray(rawOverride)) {\r\n        return;\r\n      }\r\n\r\n      const overridePayload = rawOverride as Record<string, any>;\r\n      const override: BinningColumnOverride = {};\r\n\r\n      const rawOverrideStrategy = typeof overridePayload.strategy === 'string' ? overridePayload.strategy.trim().toLowerCase() : '';\r\n      if ((['equal_width', 'equal_frequency', 'custom', 'kbins'] as BinningStrategy[]).includes(rawOverrideStrategy as BinningStrategy)) {\r\n        override.strategy = rawOverrideStrategy as BinningStrategy;\r\n      }\r\n\r\n      const overrideEqualWidth = coerceOptionalInteger(overridePayload.equal_width_bins, 2, 200);\r\n      if (overrideEqualWidth !== null) {\r\n        override.equalWidthBins = overrideEqualWidth;\r\n      }\r\n\r\n      const overrideEqualFrequency = coerceOptionalInteger(overridePayload.equal_frequency_bins, 2, 200);\r\n      if (overrideEqualFrequency !== null) {\r\n        override.equalFrequencyBins = overrideEqualFrequency;\r\n      }\r\n\r\n      const overrideKbinsNBins = coerceOptionalInteger(overridePayload.kbins_n_bins, 2, 200);\r\n      if (overrideKbinsNBins !== null) {\r\n        override.kbinsNBins = overrideKbinsNBins;\r\n      }\r\n\r\n      const rawOverrideEncode = typeof overridePayload.kbins_encode === 'string' ? overridePayload.kbins_encode.trim().toLowerCase() : '';\r\n      if ((['ordinal', 'onehot', 'onehot-dense'] as KBinsEncode[]).includes(rawOverrideEncode as KBinsEncode)) {\r\n        override.kbinsEncode = rawOverrideEncode as KBinsEncode;\r\n      }\r\n\r\n      const rawOverrideKbinsStrategy = typeof overridePayload.kbins_strategy === 'string' ? overridePayload.kbins_strategy.trim().toLowerCase() : '';\r\n      if ((['uniform', 'quantile', 'kmeans'] as KBinsStrategy[]).includes(rawOverrideKbinsStrategy as KBinsStrategy)) {\r\n        override.kbinsStrategy = rawOverrideKbinsStrategy as KBinsStrategy;\r\n      }\r\n\r\n      const overrideCustomBins = parseNumberList(overridePayload.custom_bins);\r\n      if (overrideCustomBins.length >= 2) {\r\n        override.customBins = overrideCustomBins;\r\n      }\r\n\r\n      const overrideCustomLabels = parseLabelList(overridePayload.custom_labels);\r\n      if (overrideCustomLabels.length > 0) {\r\n        override.customLabels = overrideCustomLabels;\r\n      }\r\n\r\n      if (Object.keys(override).length > 0) {\r\n        columnStrategies[column] = override;\r\n      }\r\n    });\r\n  }\r\n\r\n  return {\r\n    strategy,\r\n    columns,\r\n    equalWidthBins,\r\n    equalFrequencyBins,\r\n    includeLowest,\r\n    precision,\r\n    duplicates,\r\n    outputSuffix,\r\n    dropOriginal,\r\n    labelFormat,\r\n    missingStrategy,\r\n    missingLabel,\r\n    customBins,\r\n    customLabels,\r\n    columnStrategies,\r\n    kbinsNBins,\r\n    kbinsEncode,\r\n    kbinsStrategy,\r\n  };\r\n};\r\n\r\nexport const buildBinningOverrideSummary = (\r\n  overrideColumns: string[],\r\n  columnStrategies: Record<string, BinningColumnOverride>,\r\n  overrideCount: number,\r\n  strategyLabels: Record<BinningStrategy, string> = BINNING_STRATEGY_LABELS,\r\n): string | null => {\r\n  if (!overrideColumns.length) {\r\n    return null;\r\n  }\r\n\r\n  const parts = overrideColumns.map((column) => {\r\n    const override = columnStrategies[column];\r\n    const strategy = override?.strategy ?? null;\r\n    if (!strategy) {\r\n      return column;\r\n    }\r\n    const label = strategyLabels[strategy] ?? strategy;\r\n    const detailParts: string[] = [];\r\n\r\n    if (strategy === 'equal_width' && override?.equalWidthBins) {\r\n      detailParts.push(`${override.equalWidthBins} bins`);\r\n    } else if (strategy === 'equal_frequency' && override?.equalFrequencyBins) {\r\n      detailParts.push(`${override.equalFrequencyBins} bins`);\r\n    } else if (strategy === 'kbins') {\r\n      if (override?.kbinsNBins) {\r\n        detailParts.push(`${override.kbinsNBins} bins`);\r\n      }\r\n      if (override?.kbinsStrategy) {\r\n        detailParts.push(override.kbinsStrategy);\r\n      }\r\n      if (override?.kbinsEncode) {\r\n        detailParts.push(override.kbinsEncode);\r\n      }\r\n    }\r\n\r\n    const detail = detailParts.length ? ` (${detailParts.join(', ')})` : '';\r\n    return `${column} -> ${label}${detail}`;\r\n  });\r\n\r\n  if (overrideCount > overrideColumns.length) {\r\n    parts.push('');\r\n  }\r\n\r\n  return parts.join(', ');\r\n};\r\n","import React from 'react';\r\nimport {\r\n  BINNING_LABEL_FORMAT_OPTIONS,\r\n  BINNING_MISSING_OPTIONS,\r\n  type BinningLabelFormat,\r\n  type BinningMissingStrategy,\r\n  type NormalizedBinningConfig,\r\n} from './binningSettings';\r\n\r\ntype BinningFieldIds = {\r\n  equalWidth: string;\r\n  equalFrequency: string;\r\n  precision: string;\r\n  suffix: string;\r\n  missingLabel: string;\r\n  includeLowest: string;\r\n  dropOriginal: string;\r\n  labelFormat: string;\r\n  duplicates: string;\r\n  kbinsNBins: string;\r\n  kbinsEncode: string;\r\n  kbinsStrategy: string;\r\n};\r\n\r\ntype BinNumericColumnsSectionProps = {\r\n  config: NormalizedBinningConfig;\r\n  fieldIds: BinningFieldIds;\r\n  onIntegerChange: (\r\n    field: 'equal_width_bins' | 'equal_frequency_bins' | 'precision' | 'kbins_n_bins',\r\n    rawValue: string,\r\n    min: number,\r\n    max: number,\r\n  ) => void;\r\n  onBooleanToggle: (field: 'include_lowest' | 'drop_original', value: boolean) => void;\r\n  onSuffixChange: (value: string) => void;\r\n  onLabelFormatChange: (value: BinningLabelFormat) => void;\r\n  onMissingStrategyChange: (value: BinningMissingStrategy) => void;\r\n  onMissingLabelChange: (value: string) => void;\r\n};\r\n\r\nexport const BinNumericColumnsSection: React.FC<BinNumericColumnsSectionProps> = ({\r\n  config,\r\n  fieldIds,\r\n  onIntegerChange,\r\n  onBooleanToggle,\r\n  onSuffixChange,\r\n  onLabelFormatChange,\r\n  onMissingStrategyChange,\r\n  onMissingLabelChange,\r\n}) => {\r\n  return (\r\n    <section className=\"canvas-modal__section\">\r\n      <div className=\"canvas-modal__subsection\">\r\n        <h4>Global output & labeling</h4>\r\n        <p className=\"canvas-modal__note\">\r\n          Applies to every selected column unless custom bins or labels override the defaults.\r\n        </p>\r\n        <div className=\"canvas-modal__parameter-grid\">\r\n          <div className=\"canvas-modal__parameter-field\">\r\n            <label htmlFor={fieldIds.suffix} className=\"canvas-modal__parameter-label\">\r\n              Output suffix\r\n            </label>\r\n            <div className=\"canvas-modal__parameter-control\">\r\n              <input\r\n                id={fieldIds.suffix}\r\n                type=\"text\"\r\n                className=\"canvas-modal__input\"\r\n                value={config.outputSuffix}\r\n                onChange={(event) => onSuffixChange(event.target.value)}\r\n                placeholder=\"e.g. _binned\"\r\n              />\r\n            </div>\r\n          </div>\r\n          <div className=\"canvas-modal__parameter-field\">\r\n            <label htmlFor={fieldIds.labelFormat} className=\"canvas-modal__parameter-label\">\r\n              Label format\r\n            </label>\r\n            <div className=\"canvas-modal__parameter-control\">\r\n              <select\r\n                id={fieldIds.labelFormat}\r\n                value={config.labelFormat}\r\n                onChange={(event) => onLabelFormatChange((event.target.value as BinningLabelFormat) ?? 'range')}\r\n              >\r\n                {BINNING_LABEL_FORMAT_OPTIONS.map((option) => (\r\n                  <option key={option.value} value={option.value}>\r\n                    {option.label}\r\n                  </option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n            <p className=\"canvas-modal__parameter-description\">\r\n              Controls how new bin values are named when custom labels arent provided.\r\n            </p>\r\n          </div>\r\n          <div className=\"canvas-modal__parameter-field\">\r\n            <label htmlFor={fieldIds.precision} className=\"canvas-modal__parameter-label\">\r\n              Decimal precision\r\n            </label>\r\n            <div className=\"canvas-modal__parameter-control\">\r\n              <input\r\n                id={fieldIds.precision}\r\n                type=\"number\"\r\n                className=\"canvas-modal__input\"\r\n                min={0}\r\n                max={8}\r\n                step={1}\r\n                value={config.precision}\r\n                onChange={(event) => onIntegerChange('precision', event.target.value, 0, 8)}\r\n              />\r\n            </div>\r\n            <p className=\"canvas-modal__parameter-description\">Sets rounding precision for interval labels.</p>\r\n          </div>\r\n        </div>\r\n        <div className=\"canvas-modal__parameter-grid\">\r\n          <div className=\"canvas-modal__parameter-field\">\r\n            <div className=\"canvas-modal__parameter-label\">\r\n              <label htmlFor={fieldIds.includeLowest}>Include lowest edge</label>\r\n            </div>\r\n            <label className=\"canvas-modal__boolean-control\">\r\n              <input\r\n                id={fieldIds.includeLowest}\r\n                type=\"checkbox\"\r\n                checked={config.includeLowest}\r\n                onChange={(event) => onBooleanToggle('include_lowest', event.target.checked)}\r\n              />\r\n              Include the minimum value in the first bin\r\n            </label>\r\n          </div>\r\n          <div className=\"canvas-modal__parameter-field\">\r\n            <div className=\"canvas-modal__parameter-label\">\r\n              <label htmlFor={fieldIds.dropOriginal}>Drop original columns</label>\r\n            </div>\r\n            <label className=\"canvas-modal__boolean-control\">\r\n              <input\r\n                id={fieldIds.dropOriginal}\r\n                type=\"checkbox\"\r\n                checked={config.dropOriginal}\r\n                onChange={(event) => onBooleanToggle('drop_original', event.target.checked)}\r\n              />\r\n              Remove source columns after binning\r\n            </label>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div className=\"canvas-modal__subsection\">\r\n        <h4>Missing values</h4>\r\n        <div className=\"canvas-skewness__segmented\" role=\"radiogroup\" aria-label=\"Missing value handling\">\r\n          {BINNING_MISSING_OPTIONS.map((option) => (\r\n            <button\r\n              key={option.value}\r\n              type=\"button\"\r\n              className=\"canvas-skewness__segmented-button\"\r\n              data-active={config.missingStrategy === option.value}\r\n              onClick={() => onMissingStrategyChange(option.value)}\r\n            >\r\n              {option.label}\r\n            </button>\r\n          ))}\r\n        </div>\r\n        {config.missingStrategy === 'label' && (\r\n          <div className=\"canvas-modal__parameter-field\">\r\n            <label htmlFor={fieldIds.missingLabel} className=\"canvas-modal__parameter-label\">\r\n              Missing label\r\n            </label>\r\n            <div className=\"canvas-modal__parameter-control\">\r\n              <input\r\n                id={fieldIds.missingLabel}\r\n                type=\"text\"\r\n                className=\"canvas-modal__input\"\r\n                value={config.missingLabel}\r\n                onChange={(event) => onMissingLabelChange(event.target.value)}\r\n                placeholder=\"e.g. Missing\"\r\n              />\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </section>\r\n  );\r\n};\r\n","import React, { useMemo } from 'react';\r\nimport type {\r\n  BinningColumnRecommendation,\r\n  BinningExcludedColumn,\r\n} from '../../../../api';\r\nimport {\r\n  BINNING_STRATEGY_LABELS,\r\n  BINNING_STRATEGY_OPTIONS,\r\n  type BinningColumnOverride,\r\n  type BinningStrategy,\r\n  type KBinsEncode,\r\n  type KBinsStrategy,\r\n  type NormalizedBinningConfig,\r\n} from './binningSettings';\r\n\r\nconst formatStrategyLabel = (strategy: string) =>\r\n  BINNING_STRATEGY_LABELS[strategy as BinningStrategy] ?? strategy.replace(/_/g, ' ');\r\n\r\nconst formatConfidenceLabel = (value: string | null | undefined) => {\r\n  switch (value) {\r\n    case 'high':\r\n      return 'High confidence';\r\n    case 'medium':\r\n      return 'Medium confidence';\r\n    case 'low':\r\n      return 'Low confidence';\r\n    default:\r\n      return 'Confidence unknown';\r\n  }\r\n};\r\n\r\nconst renderStatsSummary = (\r\n  stats: BinningColumnRecommendation['stats'] | null | undefined,\r\n  formatMetricValue: (value: number) => string,\r\n  formatNumericStat: (value: number) => string,\r\n) => {\r\n  if (!stats || typeof stats !== 'object') {\r\n    return 'No distribution summary';\r\n  }\r\n  const parts: string[] = [];\r\n  if (typeof stats.valid_count === 'number' && Number.isFinite(stats.valid_count)) {\r\n    parts.push(`${formatMetricValue(stats.valid_count)} valid rows`);\r\n  }\r\n  if (typeof stats.distinct_count === 'number' && Number.isFinite(stats.distinct_count)) {\r\n    parts.push(`${formatMetricValue(stats.distinct_count)} distinct values`);\r\n  }\r\n  const hasMin = typeof stats.minimum === 'number' && Number.isFinite(stats.minimum);\r\n  const hasMax = typeof stats.maximum === 'number' && Number.isFinite(stats.maximum);\r\n  if (hasMin || hasMax) {\r\n    const minDisplay = hasMin ? formatNumericStat(stats.minimum as number) : '';\r\n    const maxDisplay = hasMax ? formatNumericStat(stats.maximum as number) : '';\r\n    parts.push(`Range ${minDisplay}  ${maxDisplay}`);\r\n  }\r\n  if (typeof stats.skewness === 'number' && Number.isFinite(stats.skewness)) {\r\n    parts.push(`Skew ${formatNumericStat(stats.skewness)}`);\r\n  }\r\n  return parts.length ? parts.join('  ') : 'No distribution summary';\r\n};\r\n\r\ntype BinningInsightsSectionProps = {\r\n  hasSource: boolean;\r\n  hasReachableSource: boolean;\r\n  isFetching: boolean;\r\n  error: string | null;\r\n  relativeGeneratedAt: string | null;\r\n  sampleSize: number | null;\r\n  binningConfig: NormalizedBinningConfig;\r\n  binningDefaultLabel: string;\r\n  binningOverrideCount: number;\r\n  binningOverrideSummary: string | null;\r\n  recommendations: BinningColumnRecommendation[];\r\n  excludedColumns: BinningExcludedColumn[];\r\n  numericColumnCount: number;\r\n  canApplyAllNumeric: boolean;\r\n  onApplyAllNumeric?: () => void;\r\n  onApplyStrategies?: () => void;\r\n  onClearOverrides: () => void;\r\n  customEdgeDrafts: Record<string, string>;\r\n  customLabelDrafts: Record<string, string>;\r\n  onOverrideStrategyChange: (\r\n    column: string,\r\n    value: BinningStrategy | '__default__',\r\n    options?: { recommendedBins?: number | null },\r\n  ) => void;\r\n  onOverrideNumberChange: (\r\n    column: string,\r\n    field: 'equal_width_bins' | 'equal_frequency_bins' | 'kbins_n_bins',\r\n    value: string,\r\n  ) => void;\r\n  onOverrideKbinsEncodeChange: (column: string, value: KBinsEncode | null) => void;\r\n  onOverrideKbinsStrategyChange: (column: string, value: KBinsStrategy | null) => void;\r\n  onOverrideClear: (column: string) => void;\r\n  onCustomBinsChange: (column: string, rawValue: string) => void;\r\n  onCustomLabelsChange: (column: string, rawValue: string) => void;\r\n  onClearCustomColumn: (column: string) => void;\r\n  formatMetricValue: (value: number) => string;\r\n  formatNumericStat: (value: number) => string;\r\n};\r\n\r\nexport const BinningInsightsSection: React.FC<BinningInsightsSectionProps> = ({\r\n  hasSource,\r\n  hasReachableSource,\r\n  isFetching,\r\n  error,\r\n  relativeGeneratedAt,\r\n  sampleSize,\r\n  binningConfig,\r\n  binningDefaultLabel,\r\n  binningOverrideCount,\r\n  binningOverrideSummary,\r\n  recommendations,\r\n  excludedColumns,\r\n  numericColumnCount,\r\n  canApplyAllNumeric,\r\n  onApplyAllNumeric,\r\n  onApplyStrategies,\r\n  onClearOverrides,\r\n  customEdgeDrafts,\r\n  customLabelDrafts,\r\n  onOverrideStrategyChange,\r\n  onOverrideNumberChange,\r\n  onOverrideKbinsEncodeChange,\r\n  onOverrideKbinsStrategyChange,\r\n  onOverrideClear,\r\n  onCustomBinsChange,\r\n  onCustomLabelsChange,\r\n  onClearCustomColumn,\r\n  formatMetricValue,\r\n  formatNumericStat,\r\n}) => {\r\n  const summaryLabel = useMemo(() => {\r\n    if (!hasSource) {\r\n      return 'Select a dataset to surface diagnostics.';\r\n    }\r\n    if (!hasReachableSource) {\r\n      return 'Connect this step to an upstream output to surface diagnostics.';\r\n    }\r\n    if (isFetching) {\r\n      return 'Diagnostics are loading';\r\n    }\r\n    if (error) {\r\n      return 'Diagnostics are unavailable at the moment.';\r\n    }\r\n    if (numericColumnCount > 0) {\r\n      return `Detected ${numericColumnCount} numeric column${numericColumnCount === 1 ? '' : 's'} in the current sample.`;\r\n    }\r\n    if (excludedColumns.length > 0) {\r\n      return `Diagnostics skipped ${excludedColumns.length} column${excludedColumns.length === 1 ? '' : 's'} (see details).`;\r\n    }\r\n    return 'No additional diagnostics were produced for the current sample.';\r\n  }, [error, excludedColumns.length, hasReachableSource, hasSource, isFetching, numericColumnCount]);\r\n\r\n  const excludedPreview = useMemo(() => {\r\n    const preview = excludedColumns.slice(0, 6);\r\n    const remaining = Math.max(0, excludedColumns.length - preview.length);\r\n    return {\r\n      preview,\r\n      remaining,\r\n    };\r\n  }, [excludedColumns]);\r\n\r\n  const recommendationMap = useMemo(() => {\r\n    const map = new Map<string, BinningColumnRecommendation>();\r\n    recommendations.forEach((entry) => {\r\n      const column = typeof entry?.column === 'string' ? entry.column.trim() : '';\r\n      if (column) {\r\n        map.set(column, entry);\r\n      }\r\n    });\r\n    return map;\r\n  }, [recommendations]);\r\n\r\n  const allColumns = useMemo(() => {\r\n    const set = new Set<string>();\r\n    binningConfig.columns.forEach((column) => {\r\n      const normalized = String(column ?? '').trim();\r\n      if (normalized) {\r\n        set.add(normalized);\r\n      }\r\n    });\r\n    Object.keys(binningConfig.columnStrategies).forEach((column) => {\r\n      const normalized = String(column ?? '').trim();\r\n      if (normalized) {\r\n        set.add(normalized);\r\n      }\r\n    });\r\n    recommendations.forEach((entry) => {\r\n      const column = typeof entry?.column === 'string' ? entry.column.trim() : '';\r\n      if (column) {\r\n        set.add(column);\r\n      }\r\n    });\r\n    return Array.from(set).sort((a, b) => a.localeCompare(b));\r\n  }, [binningConfig.columnStrategies, binningConfig.columns, recommendations]);\r\n\r\n  const resolveSelectValue = (override: BinningColumnOverride | undefined, defaultStrategy: BinningStrategy) => {\r\n    if (!override || Object.keys(override).length === 0) {\r\n      return '__default__';\r\n    }\r\n    if (override.strategy) {\r\n      return override.strategy;\r\n    }\r\n    if (override.customBins?.length) {\r\n      return 'custom';\r\n    }\r\n    if (override.kbinsNBins || override.kbinsEncode || override.kbinsStrategy) {\r\n      return 'kbins';\r\n    }\r\n    if (override.equalFrequencyBins) {\r\n      return 'equal_frequency';\r\n    }\r\n    if (override.equalWidthBins) {\r\n      return 'equal_width';\r\n    }\r\n    return defaultStrategy;\r\n  };\r\n\r\n  const hasValidContext = hasSource && hasReachableSource;\r\n\r\n  const buildOverrideDetails = (override: BinningColumnOverride | undefined) => {\r\n    if (!override) {\r\n      return [] as string[];\r\n    }\r\n    const parts: string[] = [];\r\n    if (typeof override.equalWidthBins === 'number') {\r\n      parts.push(`${override.equalWidthBins} bins`);\r\n    }\r\n    if (typeof override.equalFrequencyBins === 'number') {\r\n      parts.push(`${override.equalFrequencyBins} bins`);\r\n    }\r\n    if (typeof override.kbinsNBins === 'number') {\r\n      parts.push(`${override.kbinsNBins} bins`);\r\n    }\r\n    if (override.kbinsStrategy) {\r\n      parts.push(override.kbinsStrategy);\r\n    }\r\n    if (override.kbinsEncode) {\r\n      parts.push(override.kbinsEncode);\r\n    }\r\n    if (override.customBins?.length) {\r\n      parts.push('Custom bins');\r\n    }\r\n    if (override.customLabels?.length) {\r\n      parts.push('Custom labels');\r\n    }\r\n    return parts;\r\n  };\r\n\r\n  return (\r\n    <section className=\"canvas-modal__section\">\r\n      <div className=\"canvas-modal__section-header\">\r\n        <h3>Binning diagnostics</h3>\r\n        <div className=\"canvas-modal__section-actions\">\r\n          <button\r\n            type=\"button\"\r\n            className=\"btn btn-outline-secondary\"\r\n            onClick={onClearOverrides}\r\n            disabled={!binningOverrideCount}\r\n          >\r\n            Clear\r\n          </button>\r\n          {onApplyStrategies && (\r\n            <button\r\n              type=\"button\"\r\n              className=\"btn btn-primary\"\r\n              onClick={onApplyStrategies}\r\n              disabled={!recommendations.length}\r\n            >\r\n              Quick apply\r\n            </button>\r\n          )}\r\n        </div>\r\n      </div>\r\n      <p className=\"canvas-modal__note\">{summaryLabel}</p>\r\n      <p className=\"canvas-modal__note\">\r\n        Default strategy <strong>{binningDefaultLabel}</strong>\r\n        {binningOverrideCount > 0\r\n          ? `  Overrides: ${binningOverrideCount}${\r\n              binningOverrideSummary ? ` (${binningOverrideSummary})` : ''\r\n            }`\r\n          : '  No column overrides yet'}\r\n      </p>\r\n      <div className=\"canvas-modal__collapsible\">\r\n        {!hasSource && (\r\n          <p className=\"canvas-modal__note canvas-modal__note--warning\">\r\n            Select a dataset to surface binning insights and column diagnostics.\r\n          </p>\r\n        )}\r\n        {hasSource && !hasReachableSource && (\r\n          <p className=\"canvas-modal__note canvas-modal__note--warning\">\r\n            Connect this step to an upstream output to analyse numeric feature distributions.\r\n          </p>\r\n        )}\r\n        {hasValidContext && (\r\n          <>\r\n            {relativeGeneratedAt && (\r\n              <p className=\"canvas-modal__note\">\r\n                Insights generated {relativeGeneratedAt}\r\n                {sampleSize !== null ? ` on ${formatMetricValue(sampleSize)} row${sampleSize === 1 ? '' : 's'}.` : '.'}\r\n              </p>\r\n            )}\r\n            {onApplyAllNumeric && numericColumnCount > 0 && (\r\n              <div className=\"canvas-modal__section-actions\">\r\n                <button\r\n                  type=\"button\"\r\n                  className=\"btn btn-outline-secondary\"\r\n                  onClick={onApplyAllNumeric}\r\n                  disabled={!canApplyAllNumeric}\r\n                >\r\n                  {`Add all numeric columns (${numericColumnCount})`}\r\n                </button>\r\n              </div>\r\n            )}\r\n            {isFetching && <p className=\"canvas-modal__note\">Loading binning diagnostics</p>}\r\n            {error && !isFetching && (\r\n              <p className=\"canvas-modal__note canvas-modal__note--error\">{error}</p>\r\n            )}\r\n            {!error && (\r\n              <>\r\n                {allColumns.length > 0 && (\r\n                  <div className=\"canvas-cast__body\">\r\n                    <div className=\"canvas-cast__table-wrapper\">\r\n                      <table className=\"canvas-cast__table\">\r\n                        <thead>\r\n                          <tr>\r\n                            <th scope=\"col\">Column</th>\r\n                            <th scope=\"col\">Suggested strategy</th>\r\n                            <th scope=\"col\">Configured strategy</th>\r\n                            <th scope=\"col\">Distribution highlights</th>\r\n                          </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                          {allColumns.map((column) => {\r\n                              const recommendation = recommendationMap.get(column) ?? null;\r\n                              const override = binningConfig.columnStrategies[column];\r\n                              const selectValue = resolveSelectValue(override, binningConfig.strategy);\r\n                              const effectiveStrategy =\r\n                                selectValue === '__default__'\r\n                                  ? binningConfig.strategy\r\n                                  : (selectValue as BinningStrategy);\r\n                              const recommendedStrategy = recommendation?.recommended_strategy ?? null;\r\n                              const needsAttention = Boolean(\r\n                                recommendedStrategy && recommendedStrategy !== effectiveStrategy,\r\n                              );\r\n                              const isOverrideApplied = Boolean(override && Object.keys(override).length);\r\n                              const isSelected = binningConfig.columns.includes(column);\r\n                              const recommendedBinsRaw = recommendation?.recommended_bins;\r\n                              const recommendedBinsNumber =\r\n                                typeof recommendedBinsRaw === 'number'\r\n                                  ? recommendedBinsRaw\r\n                                  : recommendedBinsRaw !== null && recommendedBinsRaw !== undefined\r\n                                  ? Number(recommendedBinsRaw)\r\n                                  : null;\r\n                              const recommendedBins =\r\n                                typeof recommendedBinsNumber === 'number' &&\r\n                                Number.isFinite(recommendedBinsNumber) &&\r\n                                recommendedBinsNumber > 0\r\n                                  ? recommendedBinsNumber\r\n                                  : null;\r\n                              const equalWidthValue = override?.equalWidthBins ?? binningConfig.equalWidthBins;\r\n                              const equalFrequencyValue =\r\n                                override?.equalFrequencyBins ?? binningConfig.equalFrequencyBins;\r\n                              const kbinsNBinsValue = override?.kbinsNBins ?? binningConfig.kbinsNBins;\r\n                              const kbinsEncodeValue = override?.kbinsEncode ?? '__default__';\r\n                              const kbinsStrategyValue = override?.kbinsStrategy ?? '__default__';\r\n                              const rowClasses = ['canvas-cast__row'];\r\n                              if (needsAttention) {\r\n                                rowClasses.push('canvas-cast__row--attention');\r\n                              }\r\n                              if (isOverrideApplied) {\r\n                                rowClasses.push('canvas-cast__row--override');\r\n                              }\r\n                              if (!isSelected) {\r\n                                rowClasses.push('canvas-cast__row--muted');\r\n                              }\r\n                              const statsSummary = renderStatsSummary(\r\n                                recommendation?.stats,\r\n                                formatMetricValue,\r\n                                formatNumericStat,\r\n                              );\r\n                              const reasons = recommendation?.reasons?.filter((reason) => reason && reason.trim()) ?? [];\r\n                              const overrideDetails = (() => {\r\n                                const details = buildOverrideDetails(override);\r\n                                const hasCustomBins = Array.isArray(binningConfig.customBins[column])\r\n                                  ? binningConfig.customBins[column].length >= 2\r\n                                  : false;\r\n                                const hasCustomLabels = Array.isArray(binningConfig.customLabels[column])\r\n                                  ? binningConfig.customLabels[column].length > 0\r\n                                  : false;\r\n                                const merged = [...details];\r\n                                if (hasCustomBins && !merged.includes('Custom bins')) {\r\n                                  merged.push('Custom bins');\r\n                                }\r\n                                if (hasCustomLabels && !merged.includes('Custom labels')) {\r\n                                  merged.push('Custom labels');\r\n                                }\r\n                                return merged;\r\n                              })();\r\n                              const helperText =\r\n                                selectValue === '__default__'\r\n                                  ? `Inheriting ${binningDefaultLabel}`\r\n                                  : `Override  ${formatStrategyLabel(effectiveStrategy)}${\r\n                                      overrideDetails.length ? ` (${overrideDetails.join(', ')})` : ''\r\n                                    }`;\r\n                              const dtype = recommendation?.dtype ?? null;\r\n                              const confidenceLabel = recommendation\r\n                                ? formatConfidenceLabel(recommendation.confidence)\r\n                                : null;\r\n                              const customEdgesDraft = Object.prototype.hasOwnProperty.call(customEdgeDrafts, column)\r\n                                ? customEdgeDrafts[column]\r\n                                : binningConfig.customBins[column]?.join(', ') ?? '';\r\n                              const customLabelsDraft = Object.prototype.hasOwnProperty.call(customLabelDrafts, column)\r\n                                ? customLabelDrafts[column]\r\n                                : binningConfig.customLabels[column]?.join(', ') ?? '';\r\n                              const hasCustomValues = Boolean(\r\n                                (binningConfig.customBins[column]?.length ?? 0) >= 2 ||\r\n                                  (binningConfig.customLabels[column]?.length ?? 0) > 0,\r\n                              );\r\n                              return (\r\n                                <tr key={`binning-insight-${column}`} className={rowClasses.join(' ')}>\r\n                                  <th scope=\"row\">\r\n                                    <div className=\"canvas-cast__column-cell\">\r\n                                      <span className=\"canvas-cast__column-name\">{column}</span>\r\n                                      <div className=\"canvas-cast__column-meta\">\r\n                                        {dtype && <span className=\"canvas-cast__muted\">dtype: {dtype}</span>}\r\n                                        {!isSelected && (\r\n                                          <span className=\"canvas-cast__muted\">Not currently in node</span>\r\n                                        )}\r\n                                        {isOverrideApplied && (\r\n                                          <span className=\"canvas-cast__badge canvas-cast__badge--override\">Override</span>\r\n                                        )}\r\n                                        {needsAttention && (\r\n                                          <span className=\"canvas-cast__badge canvas-cast__badge--attention\">\r\n                                            Needs review\r\n                                          </span>\r\n                                        )}\r\n                                      </div>\r\n                                    </div>\r\n                                  </th>\r\n                                  <td>\r\n                                    <div className=\"canvas-cast__recommendation\">\r\n                                      {recommendation ? (\r\n                                        <>\r\n                                          <span className=\"canvas-cast__chip canvas-cast__chip--applied\">\r\n                                            {formatStrategyLabel(recommendation.recommended_strategy)}\r\n                                          </span>\r\n                                          <span className=\"canvas-cast__recommendation-note\">\r\n                                            {recommendedBins !== null\r\n                                              ? `${recommendedBins} bin${recommendedBins === 1 ? '' : 's'}`\r\n                                              : 'Bins not provided'}\r\n                                            {confidenceLabel ? `  ${confidenceLabel}` : ''}\r\n                                          </span>\r\n                                          {reasons.length > 0 && (\r\n                                            <span className=\"canvas-cast__recommendation-note\">\r\n                                              {reasons.join('; ')}\r\n                                            </span>\r\n                                          )}\r\n                                        </>\r\n                                      ) : (\r\n                                        <span className=\"canvas-cast__muted\">No recommendation</span>\r\n                                      )}\r\n                                    </div>\r\n                                  </td>\r\n                                  <td>\r\n                                    <div className=\"canvas-cast__target\">\r\n                                      <select\r\n                                        value={selectValue}\r\n                                        onChange={(event) =>\r\n                                          onOverrideStrategyChange(\r\n                                            column,\r\n                                            event.target.value as BinningStrategy | '__default__',\r\n                                            { recommendedBins },\r\n                                          )\r\n                                        }\r\n                                      >\r\n                                        <option value=\"__default__\">Inherit default ({binningDefaultLabel})</option>\r\n                                        {BINNING_STRATEGY_OPTIONS.map((option) => (\r\n                                          <option key={`${column}-${option.value}`} value={option.value}>\r\n                                            {option.label}\r\n                                          </option>\r\n                                        ))}\r\n                                      </select>\r\n                                      <span className=\"canvas-cast__target-note\">{helperText}</span>\r\n                                      {selectValue === 'equal_width' && (\r\n                                        <div className=\"canvas-cast__target-note\">\r\n                                          <label>\r\n                                            Integer bins\r\n                                            <input\r\n                                              type=\"number\"\r\n                                              min={2}\r\n                                              max={200}\r\n                                              className=\"canvas-modal__input\"\r\n                                              value={equalWidthValue ?? ''}\r\n                                              onChange={(event) =>\r\n                                                onOverrideNumberChange(column, 'equal_width_bins', event.target.value)\r\n                                              }\r\n                                            />\r\n                                          </label>\r\n                                        </div>\r\n                                      )}\r\n                                      {selectValue === 'equal_frequency' && (\r\n                                        <div className=\"canvas-cast__target-note\">\r\n                                          <label>\r\n                                            Integer bins\r\n                                            <input\r\n                                              type=\"number\"\r\n                                              min={2}\r\n                                              max={200}\r\n                                              className=\"canvas-modal__input\"\r\n                                              value={equalFrequencyValue ?? ''}\r\n                                              onChange={(event) =>\r\n                                                onOverrideNumberChange(\r\n                                                  column,\r\n                                                  'equal_frequency_bins',\r\n                                                  event.target.value,\r\n                                                )\r\n                                              }\r\n                                            />\r\n                                          </label>\r\n                                        </div>\r\n                                      )}\r\n                                      {selectValue === 'kbins' && (\r\n                                        <div className=\"canvas-cast__target-note\">\r\n                                          <label>\r\n                                            Max bins\r\n                                            <input\r\n                                              type=\"number\"\r\n                                              min={2}\r\n                                              max={200}\r\n                                              className=\"canvas-modal__input\"\r\n                                              value={kbinsNBinsValue ?? ''}\r\n                                              onChange={(event) =>\r\n                                                onOverrideNumberChange(column, 'kbins_n_bins', event.target.value)\r\n                                              }\r\n                                            />\r\n                                          </label>\r\n                                          <label>\r\n                                            Encode\r\n                                            <select\r\n                                              value={kbinsEncodeValue}\r\n                                              onChange={(event) =>\r\n                                                onOverrideKbinsEncodeChange(\r\n                                                  column,\r\n                                                  event.target.value === '__default__'\r\n                                                    ? null\r\n                                                    : (event.target.value as KBinsEncode),\r\n                                                )\r\n                                              }\r\n                                            >\r\n                                              <option value=\"__default__\">Default ({binningConfig.kbinsEncode})</option>\r\n                                              <option value=\"ordinal\">Ordinal</option>\r\n                                              <option value=\"onehot\">One-hot (sparse)</option>\r\n                                              <option value=\"onehot-dense\">One-hot (dense)</option>\r\n                                            </select>\r\n                                          </label>\r\n                                          <label>\r\n                                            Strategy\r\n                                            <select\r\n                                              value={kbinsStrategyValue}\r\n                                              onChange={(event) =>\r\n                                                onOverrideKbinsStrategyChange(\r\n                                                  column,\r\n                                                  event.target.value === '__default__'\r\n                                                    ? null\r\n                                                    : (event.target.value as KBinsStrategy),\r\n                                                )\r\n                                              }\r\n                                            >\r\n                                              <option value=\"__default__\">Default ({binningConfig.kbinsStrategy})</option>\r\n                                              <option value=\"uniform\">Uniform</option>\r\n                                              <option value=\"quantile\">Quantile</option>\r\n                                              <option value=\"kmeans\">K-means</option>\r\n                                            </select>\r\n                                          </label>\r\n                                        </div>\r\n                                      )}\r\n                                      {selectValue === 'custom' && (\r\n                                        <div className=\"canvas-cast__target-note\">\r\n                                          <label>\r\n                                            Custom edges\r\n                                            <input\r\n                                              type=\"text\"\r\n                                              className=\"canvas-modal__input\"\r\n                                              value={customEdgesDraft}\r\n                                              placeholder=\"e.g. 0, 50, 100\"\r\n                                              onChange={(event) => onCustomBinsChange(column, event.target.value)}\r\n                                            />\r\n                                          </label>\r\n                                          <label>\r\n                                            Optional labels\r\n                                            <input\r\n                                              type=\"text\"\r\n                                              className=\"canvas-modal__input\"\r\n                                              value={customLabelsDraft}\r\n                                              placeholder=\"e.g. Low, Medium, High\"\r\n                                              onChange={(event) => onCustomLabelsChange(column, event.target.value)}\r\n                                            />\r\n                                          </label>\r\n                                          {hasCustomValues && (\r\n                                            <button\r\n                                              type=\"button\"\r\n                                              className=\"btn btn-link\"\r\n                                              onClick={() => onClearCustomColumn(column)}\r\n                                            >\r\n                                              Clear custom edges\r\n                                            </button>\r\n                                          )}\r\n                                        </div>\r\n                                      )}\r\n                                      {isOverrideApplied && (\r\n                                        <button\r\n                                          type=\"button\"\r\n                                          className=\"btn btn-link\"\r\n                                          onClick={() => onOverrideClear(column)}\r\n                                        >\r\n                                          Clear\r\n                                        </button>\r\n                                      )}\r\n                                    </div>\r\n                                  </td>\r\n                                  <td>\r\n                                    <span>{statsSummary}</span>\r\n                                  </td>\r\n                                </tr>\r\n                              );\r\n                            })}\r\n                          </tbody>\r\n                        </table>\r\n                      </div>\r\n                    </div>\r\n                )}\r\n                {!isFetching && allColumns.length === 0 && (\r\n                  <p className=\"canvas-modal__note\">\r\n                    No columns met the sampling requirements for binning recommendations.\r\n                  </p>\r\n                )}\r\n                {excludedColumns.length > 0 && (\r\n                  <p className=\"canvas-modal__note\">\r\n                    Skipped {excludedColumns.length} column{excludedColumns.length === 1 ? '' : 's'} due to non-numeric values or\r\n                    limited variance\r\n                    {excludedPreview.preview.length > 0 && (\r\n                      <>\r\n                        :{' '}\r\n                        {excludedPreview.preview\r\n                          .map((entry) => `${entry.column}${entry.reason ? ` (${entry.reason})` : ''}`)\r\n                          .join(', ')}\r\n                        {excludedPreview.remaining > 0 ? `,  (+${excludedPreview.remaining} more)` : ''}\r\n                      </>\r\n                    )}\r\n                    .\r\n                  </p>\r\n                )}\r\n              </>\r\n            )}\r\n            </>\r\n          )}\r\n        </div>\r\n    </section>\r\n  );\r\n};\r\n","import React, { useMemo } from 'react';\r\nimport {\r\n  BINNED_SAMPLE_PRESETS,\r\n  type BinnedDistributionCard,\r\n  type BinnedSamplePresetValue,\r\n} from './binningSettings';\r\n\r\ntype BinnedDistributionSectionProps = {\r\n  cards: BinnedDistributionCard[];\r\n  selectedPreset: BinnedSamplePresetValue;\r\n  onSelectPreset: (value: BinnedSamplePresetValue) => void;\r\n  isFetching: boolean;\r\n  sampleSize: number | null;\r\n  relativeGeneratedAt: string | null;\r\n  error: string | null;\r\n  onRefresh: () => void;\r\n  canRefresh: boolean;\r\n};\r\n\r\nexport const BinnedDistributionSection: React.FC<BinnedDistributionSectionProps> = ({\r\n  cards,\r\n  selectedPreset,\r\n  onSelectPreset,\r\n  isFetching,\r\n  sampleSize,\r\n  relativeGeneratedAt,\r\n  error,\r\n  onRefresh,\r\n  canRefresh,\r\n}) => {\r\n  const activePreset = useMemo(() => {\r\n    return BINNED_SAMPLE_PRESETS.find((preset) => preset.value === selectedPreset) ?? BINNED_SAMPLE_PRESETS[0];\r\n  }, [selectedPreset]);\r\n\r\n  return (\r\n    <section className=\"canvas-modal__section\">\r\n      <div className=\"canvas-modal__section-header\">\r\n        <h3>Binned column distributions</h3>\r\n        <div className=\"canvas-modal__section-actions\">\r\n          <div className=\"canvas-sample__group\">\r\n            <span className=\"canvas-sample__label\">Sample</span>\r\n            <div className=\"canvas-skewness__segmented\" role=\"group\" aria-label=\"Binned sampling presets\">\r\n              {BINNED_SAMPLE_PRESETS.map((preset) => (\r\n                <button\r\n                  key={preset.value}\r\n                  type=\"button\"\r\n                  className=\"canvas-skewness__segmented-button\"\r\n                  data-active={preset.value === selectedPreset}\r\n                  onClick={() => onSelectPreset(preset.value)}\r\n                  disabled={isFetching}\r\n                >\r\n                  {preset.label}\r\n                </button>\r\n              ))}\r\n            </div>\r\n          </div>\r\n          {relativeGeneratedAt && <span className=\"canvas-modal__meta\">Updated {relativeGeneratedAt}</span>}\r\n          <button\r\n            type=\"button\"\r\n            className=\"btn btn-outline-secondary\"\r\n            onClick={onRefresh}\r\n            disabled={isFetching || !canRefresh}\r\n          >\r\n            {isFetching ? 'Refreshing' : 'Refresh'}\r\n          </button>\r\n        </div>\r\n      </div>\r\n      {sampleSize !== null && (\r\n        <p className=\"canvas-modal__note\">\r\n          Sampling preset: <strong>{activePreset.label}</strong>.{' '}\r\n          {activePreset.value === 'all'\r\n            ? `Summaries computed from the full dataset (${sampleSize.toLocaleString()} rows).`\r\n            : `Summaries computed from ${sampleSize.toLocaleString()} sampled rows.`}\r\n        </p>\r\n      )}\r\n      {isFetching && <p className=\"canvas-modal__note\">Loading binned distributions</p>}\r\n      {!isFetching && error && <p className=\"canvas-modal__note canvas-modal__note--error\">{error}</p>}\r\n      {!isFetching && !error && (\r\n        cards.length ? (\r\n          <div className=\"canvas-binning__grid\">\r\n            {cards.map((card) => {\r\n              const topPercentageLabel = card.topPercentage !== null ? `${card.topPercentage.toFixed(1)}%` : null;\r\n              const summaryValue = card.topCount !== null\r\n                ? `${card.topCount.toLocaleString()}${topPercentageLabel ? `  ${topPercentageLabel}` : ''}`\r\n                : topPercentageLabel ?? '';\r\n              return (\r\n                <article key={`binned-card-${card.column}`} className=\"canvas-binning__card\">\r\n                  <header className=\"canvas-binning__header\">\r\n                    <div>\r\n                      <h4>{card.column}</h4>\r\n                      {card.sourceColumn && card.sourceColumn !== card.column && (\r\n                        <p className=\"canvas-binning__subtitle\">\r\n                          Derived from <strong>{card.sourceColumn}</strong>\r\n                        </p>\r\n                      )}\r\n                    </div>\r\n                    <div className=\"canvas-binning__summary\" aria-label=\"Top bin summary\">\r\n                      <span className=\"canvas-binning__summary-label\">Top bin</span>\r\n                      <span className=\"canvas-binning__summary-value\">{card.topLabel ?? ''}</span>\r\n                      <span className=\"canvas-binning__summary-meta\">{summaryValue}</span>\r\n                    </div>\r\n                  </header>\r\n                  <div className=\"canvas-binning__meta\">\r\n                    <div>\r\n                      <span className=\"canvas-binning__meta-label\">Sample size</span>\r\n                      <span className=\"canvas-binning__meta-value\">{card.totalRows.toLocaleString()}</span>\r\n                    </div>\r\n                    <div>\r\n                      <span className=\"canvas-binning__meta-label\">Distinct bins</span>\r\n                      <span className=\"canvas-binning__meta-value\">{card.distinctBins.toLocaleString()}</span>\r\n                    </div>\r\n                    <div>\r\n                      <span className=\"canvas-binning__meta-label\">Missing rows</span>\r\n                      <span className=\"canvas-binning__meta-value\">{card.missingRows.toLocaleString()}</span>\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"canvas-binning__bins\">\r\n                    {card.bins.map((bin) => {\r\n                      const labelClass = bin.isMissing\r\n                        ? 'canvas-binning__bin-label canvas-binning__bin-label--missing'\r\n                        : 'canvas-binning__bin-label';\r\n                      const barWidth = Math.min(100, Math.max(0, bin.percentage));\r\n                      return (\r\n                        <div className=\"canvas-binning__bin-row\" key={`${card.column}-${bin.label}`}>\r\n                          <div className={labelClass}>{bin.label}</div>\r\n                          <div className=\"canvas-binning__bin-bar\" aria-hidden=\"true\">\r\n                            <div className=\"canvas-binning__bin-bar-fill\" style={{ width: `${barWidth}%` }} />\r\n                          </div>\r\n                          <div className=\"canvas-binning__bin-stats\">\r\n                            <span>{bin.count.toLocaleString()}</span>\r\n                            <span>{bin.percentage.toFixed(1)}%</span>\r\n                          </div>\r\n                        </div>\r\n                      );\r\n                    })}\r\n                  </div>\r\n                  {card.hasMoreBins && (\r\n                    <p className=\"canvas-binning__note\">\r\n                      Showing top {card.bins.length} of {card.totalBinCount} bins.\r\n                    </p>\r\n                  )}\r\n                </article>\r\n              );\r\n            })}\r\n          </div>\r\n        ) : (\r\n          <p className=\"canvas-modal__note\">\r\n            No binned columns detected upstream. Connect this node after a binning step to view category distributions.\r\n          </p>\r\n        )\r\n      )}\r\n    </section>\r\n  );\r\n};\r\n","export type ImputationStrategyMethod = 'mean' | 'median' | 'mode' | 'knn' | 'regression' | 'mice';\r\n\r\nexport type ImputationStrategyOptions = {\r\n  neighbors?: number | null;\r\n  max_iter?: number | null;\r\n};\r\n\r\nexport type ImputationStrategyConfig = {\r\n  method: ImputationStrategyMethod;\r\n  columns: string[];\r\n  options?: ImputationStrategyOptions;\r\n};\r\n\r\nexport type ImputerColumnOption = {\r\n  name: string;\r\n  missingPercentage: number | null;\r\n  dtype?: string | null;\r\n  mean?: number | null;\r\n  median?: number | null;\r\n  mode?: string | number | null;\r\n};\r\n\r\nexport type ImputationMethodOption = { value: ImputationStrategyMethod; label: string };\r\n\r\nexport const BASIC_IMPUTATION_METHOD_OPTIONS: ImputationMethodOption[] = [\r\n  { value: 'mean', label: 'Mean (numeric)' },\r\n  { value: 'median', label: 'Median (numeric)' },\r\n  { value: 'mode', label: 'Mode (most frequent)' },\r\n];\r\n\r\nexport const ADVANCED_IMPUTATION_METHOD_OPTIONS: ImputationMethodOption[] = [\r\n  { value: 'knn', label: 'K-Nearest Neighbors (KNN)' },\r\n  { value: 'regression', label: 'Iterative regression' },\r\n  { value: 'mice', label: 'MICE (multivariate)' },\r\n];\r\n\r\nexport const IMPUTATION_METHOD_OPTIONS: ImputationMethodOption[] = [\r\n  ...BASIC_IMPUTATION_METHOD_OPTIONS,\r\n  ...ADVANCED_IMPUTATION_METHOD_OPTIONS,\r\n];\r\n\r\nexport const IMPUTER_MISSING_FILTER_PRESETS = [0, 5, 10, 20, 40, 60];\r\n\r\nconst NUMERIC_DTYPE_TOKENS = ['float', 'double', 'int', 'uint', 'long', 'short', 'byte', 'number', 'decimal'];\r\nconst BOOLEAN_DTYPE_TOKENS = ['bool', 'boolean'];\r\nconst NON_NUMERIC_DTYPE_TOKENS = ['object', 'string', 'category', 'datetime', 'date', 'time'];\r\n\r\nexport const isLikelyNumericColumn = (option: ImputerColumnOption) => {\r\n  const rawDtype = typeof option.dtype === 'string' ? option.dtype.trim().toLowerCase() : '';\r\n  if (typeof option.mean === 'number' || typeof option.median === 'number') {\r\n    return true;\r\n  }\r\n  if (!rawDtype) {\r\n    return true;\r\n  }\r\n  if (NON_NUMERIC_DTYPE_TOKENS.some((token) => rawDtype.includes(token))) {\r\n    return false;\r\n  }\r\n  if (\r\n    NUMERIC_DTYPE_TOKENS.some((token) => rawDtype.includes(token)) ||\r\n    BOOLEAN_DTYPE_TOKENS.some((token) => rawDtype.includes(token))\r\n  ) {\r\n    return true;\r\n  }\r\n  return false;\r\n};\r\n\r\nexport const isNumericImputationMethod = (method: ImputationStrategyMethod) => method !== 'mode';\r\n\r\nexport const buildDefaultOptionsForMethod = (\r\n  method: ImputationStrategyMethod,\r\n): ImputationStrategyOptions | undefined => {\r\n  if (method === 'knn') {\r\n    return { neighbors: 5 };\r\n  }\r\n  if (method === 'regression' || method === 'mice') {\r\n    return { max_iter: 10 };\r\n  }\r\n  return undefined;\r\n};\r\n\r\nexport const sanitizeOptionsForMethod = (\r\n  method: ImputationStrategyMethod,\r\n  options?: ImputationStrategyOptions,\r\n): ImputationStrategyOptions | undefined => {\r\n  if (method === 'knn') {\r\n    const candidate = options?.neighbors;\r\n    const numeric = Number(candidate);\r\n    const neighbors = Number.isFinite(numeric) ? Math.max(1, Math.round(numeric)) : 5;\r\n    return { neighbors };\r\n  }\r\n  if (method === 'regression' || method === 'mice') {\r\n    const candidate = options?.max_iter;\r\n    const numeric = Number(candidate);\r\n    const maxIter = Number.isFinite(numeric) ? Math.max(1, Math.round(numeric)) : 10;\r\n    return { max_iter: maxIter };\r\n  }\r\n  return undefined;\r\n};\r\n\r\nexport const normalizeImputationStrategies = (\r\n  value: any,\r\n  allowedMethods: ImputationStrategyMethod[],\r\n): ImputationStrategyConfig[] => {\r\n  if (!Array.isArray(value)) {\r\n    return [];\r\n  }\r\n  const methodFallback = allowedMethods[0] ?? 'mean';\r\n  const allowedSet = new Set(allowedMethods);\r\n  return value\r\n    .map((entry) => {\r\n      if (!entry || typeof entry !== 'object') {\r\n        return null;\r\n      }\r\n      const rawMethod = typeof entry.method === 'string' ? entry.method.trim().toLowerCase() : methodFallback;\r\n      const method = allowedSet.has(rawMethod as ImputationStrategyMethod)\r\n        ? (rawMethod as ImputationStrategyMethod)\r\n        : methodFallback;\r\n\r\n      let columns: string[] = [];\r\n      if (Array.isArray(entry.columns)) {\r\n        columns = entry.columns.map((column: any) => String(column).trim()).filter(Boolean);\r\n      } else if (typeof entry.columns === 'string') {\r\n        columns = entry.columns\r\n          .split(',')\r\n          .map((column: string) => column.trim())\r\n          .filter(Boolean);\r\n      }\r\n\r\n      const rawOptions =\r\n        entry.options && typeof entry.options === 'object'\r\n          ? (entry.options as Record<string, any>)\r\n          : ({} as Record<string, any>);\r\n\r\n      let options: ImputationStrategyOptions | undefined;\r\n      if (method === 'knn') {\r\n        const candidate = rawOptions.neighbors ?? entry.neighbors;\r\n        const numeric = Number(candidate);\r\n        options = {\r\n          neighbors: Number.isFinite(numeric) ? Math.max(1, Math.round(numeric)) : 5,\r\n        };\r\n      } else if (method === 'regression' || method === 'mice') {\r\n        const candidate = rawOptions.max_iter ?? rawOptions.maxIter ?? entry.max_iter ?? entry.maxIter;\r\n        const numeric = Number(candidate);\r\n        options = {\r\n          max_iter: Number.isFinite(numeric) ? Math.max(1, Math.round(numeric)) : 10,\r\n        };\r\n      }\r\n\r\n      const sanitizedOptions = sanitizeOptionsForMethod(method, options ?? buildDefaultOptionsForMethod(method));\r\n\r\n      return {\r\n        method,\r\n        columns,\r\n        options: sanitizedOptions,\r\n      } as ImputationStrategyConfig;\r\n    })\r\n    .filter((strategy): strategy is ImputationStrategyConfig => Boolean(strategy));\r\n};\r\n\r\nexport const serializeImputationStrategies = (strategies: ImputationStrategyConfig[]): any[] =>\r\n  strategies.map((strategy) => {\r\n    const payload: Record<string, any> = {\r\n      method: strategy.method,\r\n      columns: strategy.columns,\r\n    };\r\n    if (strategy.options && Object.keys(strategy.options).length) {\r\n      payload.options = { ...strategy.options };\r\n    }\r\n    return payload;\r\n  });\r\n","import React from 'react';\r\nimport {\r\n  IMPUTER_MISSING_FILTER_PRESETS,\r\n  isLikelyNumericColumn,\r\n  isNumericImputationMethod,\r\n  type ImputationMethodOption,\r\n  type ImputationStrategyConfig,\r\n  type ImputationStrategyMethod,\r\n  type ImputerColumnOption,\r\n} from './imputationSettings';\r\n\r\ntype ImputationSchemaDetail = {\r\n  name: string;\r\n  logical_family: string;\r\n};\r\n\r\nexport type ImputationSchemaDiagnostics = {\r\n  blocked: boolean;\r\n  message: string;\r\n  entries: Array<{\r\n    index: number;\r\n    columns: string[];\r\n    details: ImputationSchemaDetail[];\r\n  }>;\r\n};\r\n\r\ntype ImputationStrategiesSectionProps = {\r\n  hasSource: boolean;\r\n  hasReachableSource: boolean;\r\n  strategies: ImputationStrategyConfig[];\r\n  columnOptions: ImputerColumnOption[];\r\n  methodOptions: ImputationMethodOption[];\r\n  missingFilter: number;\r\n  missingFilterMax: number;\r\n  missingFilterActive: boolean;\r\n  filteredOptionCount: number;\r\n  collapsedStrategies: Set<number>;\r\n  onToggleStrategy: (index: number) => void;\r\n  onRemoveStrategy: (index: number) => void;\r\n  onAddStrategy: () => void;\r\n  onMethodChange: (index: number, method: ImputationStrategyMethod) => void;\r\n  onOptionNumberChange: (index: number, key: 'neighbors' | 'max_iter', value: string) => void;\r\n  onColumnsChange: (index: number, value: string) => void;\r\n  onColumnToggle: (index: number, column: string) => void;\r\n  onMissingFilterChange: (value: number) => void;\r\n  formatMissingPercentage: (value: number | null | undefined) => string;\r\n  formatNumericStat: (value: number | null | undefined) => string;\r\n  formatModeStat: (value: string | number | null | undefined) => string;\r\n  schemaDiagnostics?: ImputationSchemaDiagnostics | null;\r\n};\r\n\r\nexport const ImputationStrategiesSection: React.FC<ImputationStrategiesSectionProps> = ({\r\n  hasSource,\r\n  hasReachableSource,\r\n  strategies,\r\n  columnOptions,\r\n  methodOptions,\r\n  missingFilter,\r\n  missingFilterMax,\r\n  missingFilterActive,\r\n  filteredOptionCount,\r\n  collapsedStrategies,\r\n  onToggleStrategy,\r\n  onRemoveStrategy,\r\n  onAddStrategy,\r\n  onMethodChange,\r\n  onOptionNumberChange,\r\n  onColumnsChange,\r\n  onColumnToggle,\r\n  onMissingFilterChange,\r\n  formatMissingPercentage,\r\n  formatNumericStat,\r\n  formatModeStat,\r\n  schemaDiagnostics,\r\n}) => {\r\n  const schemaDiagnosticsMap = React.useMemo(() => {\r\n    if (!schemaDiagnostics?.entries?.length) {\r\n      return new Map<number, ImputationSchemaDiagnostics['entries'][number]>();\r\n    }\r\n    return new Map(schemaDiagnostics.entries.map((entry) => [entry.index, entry]));\r\n  }, [schemaDiagnostics]);\r\n  const sliderMax = Math.max(missingFilterMax, missingFilter || 0);\r\n  const hasCatalog = columnOptions.length > 0;\r\n\r\n  const renderMethodSummary = (strategy: ImputationStrategyConfig) => {\r\n    const baseLabel = methodOptions.find((option) => option.value === strategy.method)?.label ?? strategy.method;\r\n    if (strategy.method === 'knn' && strategy.options?.neighbors) {\r\n      return `${baseLabel}  k=${strategy.options.neighbors}`;\r\n    }\r\n    if ((strategy.method === 'regression' || strategy.method === 'mice') && strategy.options?.max_iter) {\r\n      return `${baseLabel}  ${strategy.options.max_iter} iter`;\r\n    }\r\n    return baseLabel;\r\n  };\r\n\r\n  return (\r\n    <section className=\"canvas-modal__section\">\r\n      <div className=\"canvas-modal__section-header\">\r\n        <h3>Imputation strategies</h3>\r\n        <div className=\"canvas-modal__section-actions\">\r\n          <button type=\"button\" className=\"btn btn-outline-secondary\" onClick={onAddStrategy}>\r\n            Add strategy\r\n          </button>\r\n        </div>\r\n      </div>\r\n      {!hasSource && (\r\n        <p className=\"canvas-modal__note canvas-modal__note--warning\">\r\n          Select a dataset to surface missingness insights and recommended columns.\r\n        </p>\r\n      )}\r\n      {hasSource && !hasReachableSource && (\r\n        <p className=\"canvas-modal__note canvas-modal__note--warning\">\r\n          Connect this step to an upstream output to load missingness insights.\r\n        </p>\r\n      )}\r\n      {schemaDiagnostics?.blocked && (\r\n        <p className=\"canvas-modal__note canvas-modal__note--warning\">\r\n          {schemaDiagnostics.message}\r\n        </p>\r\n      )}\r\n      {columnOptions.length > 0 && (\r\n        <div className=\"canvas-imputer__filter\" role=\"group\" aria-label=\"Filter columns by missing percentage\">\r\n          <div className=\"canvas-imputer__filter-top\">\r\n            <label htmlFor=\"imputer-missing-filter\">Minimum missing percentage</label>\r\n            <span className=\"canvas-imputer__filter-summary\">\r\n              Showing {filteredOptionCount} of {columnOptions.length} column\r\n              {columnOptions.length === 1 ? '' : 's'}\r\n            </span>\r\n          </div>\r\n          <div className=\"canvas-imputer__filter-controls\">\r\n            <input\r\n              id=\"imputer-missing-filter\"\r\n              type=\"range\"\r\n              min={0}\r\n              max={sliderMax}\r\n              step={1}\r\n              value={missingFilter}\r\n              onChange={(event) => onMissingFilterChange(Number(event.target.value))}\r\n              className=\"canvas-imputer__filter-range\"\r\n            />\r\n            <span className=\"canvas-imputer__filter-value\">\r\n              <strong>{missingFilter}%</strong> missing\r\n            </span>\r\n            <button\r\n              type=\"button\"\r\n              className=\"canvas-imputer__filter-reset\"\r\n              onClick={() => onMissingFilterChange(0)}\r\n              disabled={!missingFilter}\r\n            >\r\n              Clear\r\n            </button>\r\n          </div>\r\n          <div className=\"canvas-imputer__filter-presets\">\r\n            {IMPUTER_MISSING_FILTER_PRESETS.map((preset) => (\r\n              <button\r\n                key={`imputer-missing-preset-${preset}`}\r\n                type=\"button\"\r\n                className={`canvas-imputer__filter-button${\r\n                  missingFilter === preset ? ' canvas-imputer__filter-button--active' : ''\r\n                }`}\r\n                onClick={() => onMissingFilterChange(preset)}\r\n              >\r\n                {preset}%\r\n              </button>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      )}\r\n      {strategies.length ? (\r\n        <div className=\"canvas-imputer__list\">\r\n          {strategies.map((strategy, index) => {\r\n            const columnsValue = strategy.columns.join(', ');\r\n            const requiresNumericColumns = isNumericImputationMethod(strategy.method);\r\n            const columnOptionsForStrategy = columnOptions.filter((option) => {\r\n              if (strategy.columns.includes(option.name)) {\r\n                return true;\r\n              }\r\n              if (requiresNumericColumns && !isLikelyNumericColumn(option)) {\r\n                return false;\r\n              }\r\n              const missingValue = typeof option.missingPercentage === 'number' ? option.missingPercentage : null;\r\n              if (missingValue !== null) {\r\n                if (missingValue <= 0) {\r\n                  return false;\r\n                }\r\n                return missingValue >= missingFilter;\r\n              }\r\n              return missingFilter === 0;\r\n            });\r\n            const methodSummary = renderMethodSummary(strategy);\r\n            const columnSummary = strategy.columns.length\r\n              ? `${strategy.columns.length} column${strategy.columns.length === 1 ? '' : 's'}`\r\n              : 'No columns yet';\r\n            const isCollapsed = collapsedStrategies.has(index);\r\n            const selectAllCandidates = columnOptionsForStrategy.filter(\r\n              (option) => !strategy.columns.includes(option.name),\r\n            );\r\n            const dtypeIssues = schemaDiagnosticsMap.get(index);\r\n            const dtypeSummary = dtypeIssues?.details?.length\r\n              ? dtypeIssues.details\r\n                  .map((detail: ImputationSchemaDetail) =>\r\n                    detail.logical_family ? `${detail.name} (${detail.logical_family})` : detail.name,\r\n                  )\r\n                  .join(', ')\r\n              : '';\r\n\r\n            const handleSelectAllColumns = () => {\r\n              if (!columnOptionsForStrategy.length) {\r\n                return;\r\n              }\r\n              const combined = [...strategy.columns];\r\n              columnOptionsForStrategy.forEach((option) => {\r\n                if (!combined.includes(option.name)) {\r\n                  combined.push(option.name);\r\n                }\r\n              });\r\n              onColumnsChange(index, combined.join(', '));\r\n            };\r\n\r\n            return (\r\n              <div key={`imputer-strategy-${index}`} className=\"canvas-imputer__card\">\r\n                <div className=\"canvas-imputer__card-header\">\r\n                  <button\r\n                    type=\"button\"\r\n                    className=\"canvas-imputer__card-toggle\"\r\n                    onClick={() => onToggleStrategy(index)}\r\n                    aria-expanded={!isCollapsed}\r\n                    aria-controls={`imputer-strategy-body-${index}`}\r\n                  >\r\n                    <span\r\n                      className={`canvas-imputer__toggle-icon${\r\n                        isCollapsed ? '' : ' canvas-imputer__toggle-icon--open'\r\n                      }`}\r\n                      aria-hidden=\"true\"\r\n                    />\r\n                    <span className=\"canvas-imputer__card-text\">\r\n                      <span className=\"canvas-imputer__card-title\">Strategy {index + 1}</span>\r\n                      <span className=\"canvas-imputer__card-summary\">{methodSummary}  {columnSummary}</span>\r\n                    </span>\r\n                  </button>\r\n                  <button\r\n                    type=\"button\"\r\n                    className=\"canvas-imputer__remove\"\r\n                    onClick={() => onRemoveStrategy(index)}\r\n                    aria-label={`Remove strategy ${index + 1}`}\r\n                  >\r\n                    Remove\r\n                  </button>\r\n                </div>\r\n                {!isCollapsed && (\r\n                  <div className=\"canvas-imputer__card-body\" id={`imputer-strategy-body-${index}`}>\r\n                    <div className=\"canvas-imputer__row\">\r\n                      <label>Method</label>\r\n                      <select\r\n                        value={strategy.method}\r\n                        onChange={(event) =>\r\n                          onMethodChange(index, (event.target.value as ImputationStrategyMethod) ?? 'mean')\r\n                        }\r\n                      >\r\n                        {methodOptions.map((option) => (\r\n                          <option key={option.value} value={option.value}>\r\n                            {option.label}\r\n                          </option>\r\n                        ))}\r\n                      </select>\r\n                    </div>\r\n                    {strategy.method === 'knn' && (\r\n                      <div className=\"canvas-imputer__row\">\r\n                        <label>Neighbors (k)</label>\r\n                        <input\r\n                          type=\"number\"\r\n                          className=\"canvas-imputer__columns-input\"\r\n                          min={1}\r\n                          max={50}\r\n                          step={1}\r\n                          value={strategy.options?.neighbors ?? 5}\r\n                          onChange={(event) => onOptionNumberChange(index, 'neighbors', event.target.value)}\r\n                        />\r\n                      </div>\r\n                    )}\r\n                    {(strategy.method === 'regression' || strategy.method === 'mice') && (\r\n                      <div className=\"canvas-imputer__row\">\r\n                        <label>Max iterations</label>\r\n                        <input\r\n                          type=\"number\"\r\n                          className=\"canvas-imputer__columns-input\"\r\n                          min={1}\r\n                          max={100}\r\n                          step={1}\r\n                          value={strategy.options?.max_iter ?? 10}\r\n                          onChange={(event) => onOptionNumberChange(index, 'max_iter', event.target.value)}\r\n                        />\r\n                      </div>\r\n                    )}\r\n                    {strategy.method === 'mice' && (\r\n                      <p className=\"canvas-modal__note\">\r\n                        MICE performs chained regressions with posterior sampling for robust imputations.\r\n                      </p>\r\n                    )}\r\n                    <div className=\"canvas-imputer__row\">\r\n                      <label>Columns</label>\r\n                      {dtypeSummary && (\r\n                        <p className=\"canvas-modal__note canvas-modal__note--warning\">\r\n                          Remove or recast columns before applying this strategy: {dtypeSummary}.\r\n                        </p>\r\n                      )}\r\n                      {columnOptionsForStrategy.length > 0 && selectAllCandidates.length > 0 && (\r\n                        <button\r\n                          type=\"button\"\r\n                          className=\"btn btn-link\"\r\n                          onClick={handleSelectAllColumns}\r\n                        >\r\n                          Select all columns\r\n                        </button>\r\n                      )}\r\n                      {columnOptionsForStrategy.length ? (\r\n                        <div className=\"canvas-imputer__columns-list\" role=\"listbox\" aria-label=\"Columns eligible for imputation\">\r\n                          {columnOptionsForStrategy.map((option) => {\r\n                            const isSelected = strategy.columns.includes(option.name);\r\n                            const missingLabel = formatMissingPercentage(option.missingPercentage);\r\n                            const hasMean = typeof option.mean === 'number';\r\n                            const hasMedian = typeof option.median === 'number';\r\n                            const hasMode = option.mode !== null && option.mode !== undefined && option.mode !== '';\r\n                            const showStats = hasMean || hasMedian || hasMode;\r\n                            return (\r\n                              <button\r\n                                key={option.name}\r\n                                type=\"button\"\r\n                                className={`canvas-imputer__column-pill${\r\n                                  isSelected ? ' canvas-imputer__column-pill--selected' : ''\r\n                                }`}\r\n                                onClick={() => onColumnToggle(index, option.name)}\r\n                                aria-pressed={isSelected}\r\n                              >\r\n                                <span className=\"canvas-imputer__column-pill-name\">{option.name}</span>\r\n                                <div className=\"canvas-imputer__column-pill-meta\">\r\n                                  <span className=\"canvas-imputer__column-pill-metric\">Missing: {missingLabel}</span>\r\n                                  {option.dtype && (\r\n                                    <span className=\"canvas-imputer__column-pill-dtype\">{option.dtype}</span>\r\n                                  )}\r\n                                </div>\r\n                                {showStats && (\r\n                                  <div className=\"canvas-imputer__column-pill-stats\">\r\n                                    {hasMean && <span>Mean: {formatNumericStat(option.mean)}</span>}\r\n                                    {hasMedian && <span>Median: {formatNumericStat(option.median)}</span>}\r\n                                    {hasMode && <span>Mode: {formatModeStat(option.mode)}</span>}\r\n                                  </div>\r\n                                )}\r\n                              </button>\r\n                            );\r\n                          })}\r\n                        </div>\r\n                      ) : (\r\n                        <p className=\"canvas-modal__note\">\r\n                          {hasCatalog\r\n                            ? missingFilterActive\r\n                              ? 'No columns meet the current missingness filter. Lower the threshold or add manual columns below.'\r\n                              : 'No columns with missing values detected. Add columns manually or adjust upstream steps.'\r\n                            : 'Column catalog unavailable; enter names manually below.'}\r\n                        </p>\r\n                      )}\r\n                    </div>\r\n                    <div\r\n                      className={`canvas-imputer__selected${\r\n                        strategy.columns.length ? '' : ' canvas-imputer__selected--empty'\r\n                      }`}\r\n                      aria-live=\"polite\"\r\n                    >\r\n                      {strategy.columns.length ? (\r\n                        strategy.columns.map((column) => (\r\n                          <span key={column} className=\"canvas-imputer__selected-chip\">\r\n                            {column}\r\n                          </span>\r\n                        ))\r\n                      ) : (\r\n                        <span>No columns selected yet.</span>\r\n                      )}\r\n                    </div>\r\n                    <div className=\"canvas-imputer__row\">\r\n                      <label>Manual columns (optional)</label>\r\n                      <input\r\n                        type=\"text\"\r\n                        className=\"canvas-imputer__columns-input\"\r\n                        value={columnsValue}\r\n                        onChange={(event) => onColumnsChange(index, event.target.value)}\r\n                        placeholder=\"Add custom columns, separated by commas\"\r\n                        aria-label=\"Manual column entry\"\r\n                      />\r\n                    </div>\r\n                    <p className=\"canvas-modal__note\">\r\n                      Tap columns above to toggle them. Missing % reflects the latest row-level preview, and manual entry lets you include custom fields.\r\n                    </p>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n      ) : (\r\n        <p className=\"canvas-modal__note\">\r\n          Define one or more strategies to fill missing values. Each strategy targets a set of columns and a method.\r\n        </p>\r\n      )}\r\n    </section>\r\n  );\r\n};\r\n","import type {\r\n  ScalingColumnRecommendation,\r\n  ScalingColumnStats,\r\n  ScalingMethodDetail,\r\n  ScalingMethodName,\r\n} from '../../../../api';\r\n\r\nexport type NormalizedScalingConfig = {\r\n  columns: string[];\r\n  defaultMethod: ScalingMethodName;\r\n  columnMethods: Record<string, ScalingMethodName>;\r\n  autoDetect: boolean;\r\n  skippedColumns: string[];\r\n};\r\n\r\nexport const SCALING_METHOD_ORDER: ScalingMethodName[] = ['standard', 'robust', 'minmax', 'maxabs'];\r\n\r\nexport const SCALING_METHOD_FALLBACK_LABELS: Record<ScalingMethodName, string> = {\r\n  standard: 'Standard scaler',\r\n  robust: 'Robust scaler',\r\n  minmax: 'MinMax scaler',\r\n  maxabs: 'MaxAbs scaler',\r\n};\r\n\r\nexport type ScalingConfidenceLevel = 'high' | 'medium' | 'low';\r\n\r\nexport const SCALING_CONFIDENCE_LABEL: Record<ScalingConfidenceLevel, string> = {\r\n  high: 'High confidence',\r\n  medium: 'Moderate confidence',\r\n  low: 'Exploratory',\r\n};\r\n\r\nconst normalizeColumnList = (value: any): string[] => {\r\n  if (Array.isArray(value)) {\r\n    return Array.from(\r\n      new Set(value.map((column) => String(column ?? '').trim()).filter(Boolean)),\r\n    ).sort((a, b) => a.localeCompare(b));\r\n  }\r\n\r\n  if (typeof value === 'string') {\r\n    return Array.from(\r\n      new Set(\r\n        value\r\n          .split(',')\r\n          .map((segment) => segment.trim())\r\n          .filter(Boolean),\r\n      ),\r\n    ).sort((a, b) => a.localeCompare(b));\r\n  }\r\n\r\n  return [];\r\n};\r\n\r\nexport const normalizeScalingConfigValue = (value: any): NormalizedScalingConfig => {\r\n  const source = value && typeof value === 'object' && !Array.isArray(value) ? value : {};\r\n\r\n  const columns = normalizeColumnList(source.columns);\r\n\r\n  const rawDefaultMethod = typeof source.default_method === 'string' ? source.default_method.trim().toLowerCase() : '';\r\n  const defaultMethod = SCALING_METHOD_ORDER.includes(rawDefaultMethod as ScalingMethodName)\r\n    ? (rawDefaultMethod as ScalingMethodName)\r\n    : 'standard';\r\n\r\n  const columnMethods: Record<string, ScalingMethodName> = {};\r\n  const rawColumnMethods = source.column_methods;\r\n  if (rawColumnMethods && typeof rawColumnMethods === 'object' && !Array.isArray(rawColumnMethods)) {\r\n    Object.entries(rawColumnMethods).forEach(([key, method]) => {\r\n      const column = String(key ?? '').trim();\r\n      const methodKey = typeof method === 'string' ? method.trim().toLowerCase() : '';\r\n      if (!column) {\r\n        return;\r\n      }\r\n      if (SCALING_METHOD_ORDER.includes(methodKey as ScalingMethodName)) {\r\n        columnMethods[column] = methodKey as ScalingMethodName;\r\n      }\r\n    });\r\n  }\r\n\r\n  const autoDetect = typeof source.auto_detect === 'boolean' ? source.auto_detect : true;\r\n  const skippedColumns = normalizeColumnList(source.skipped_columns);\r\n\r\n  return {\r\n    columns,\r\n    defaultMethod,\r\n    columnMethods,\r\n    autoDetect,\r\n    skippedColumns,\r\n  };\r\n};\r\n\r\nexport const createScalingMethodLabelMap = (methods?: ScalingMethodDetail[] | null) => {\r\n  const map: Record<ScalingMethodName, string> = { ...SCALING_METHOD_FALLBACK_LABELS };\r\n  if (Array.isArray(methods)) {\r\n    methods.forEach((detail) => {\r\n      const key = typeof detail?.key === 'string' ? (detail.key.trim().toLowerCase() as ScalingMethodName) : null;\r\n      const label = typeof detail?.label === 'string' ? detail.label.trim() : '';\r\n      if (key && SCALING_METHOD_ORDER.includes(key) && label) {\r\n        map[key] = label;\r\n      }\r\n    });\r\n  }\r\n  return map;\r\n};\r\n\r\nexport const createScalingMethodDetailMap = (methods?: ScalingMethodDetail[] | null) => {\r\n  const map = new Map<ScalingMethodName, ScalingMethodDetail>();\r\n  if (Array.isArray(methods)) {\r\n    methods.forEach((detail) => {\r\n      const key = typeof detail?.key === 'string' ? (detail.key.trim().toLowerCase() as ScalingMethodName) : null;\r\n      if (key && SCALING_METHOD_ORDER.includes(key)) {\r\n        map.set(key, detail);\r\n      }\r\n    });\r\n  }\r\n  return map;\r\n};\r\n\r\nexport type ScalingMethodOption = {\r\n  value: ScalingMethodName;\r\n  label: string;\r\n};\r\n\r\nexport const createScalingMethodOptions = (labelMap: Record<ScalingMethodName, string>): ScalingMethodOption[] =>\r\n  SCALING_METHOD_ORDER.map((method) => ({\r\n    value: method,\r\n    label: labelMap[method] ?? SCALING_METHOD_FALLBACK_LABELS[method] ?? method,\r\n  }));\r\n\r\nexport type ScalingRecommendationRow = {\r\n  column: string;\r\n  dtype: string | null;\r\n  recommendedMethod: ScalingMethodName;\r\n  recommendedLabel: string;\r\n  confidence: ScalingConfidenceLevel;\r\n  confidenceLabel: string;\r\n  reasons: string[];\r\n  fallbackLabels: string[];\r\n  stats: ScalingColumnStats;\r\n  hasMissing: boolean;\r\n  currentOverride: ScalingMethodName | null;\r\n  currentMethod: ScalingMethodName;\r\n  currentMethodLabel: string;\r\n  isOverrideApplied: boolean;\r\n  isSelected: boolean;\r\n  isExcluded: boolean;\r\n  isSkipped: boolean;\r\n};\r\n\r\ntype BuildScalingRowsInput = {\r\n  recommendations: ScalingColumnRecommendation[];\r\n  scalingConfig: NormalizedScalingConfig;\r\n  scalingMethodLabelMap: Record<ScalingMethodName, string>;\r\n  scalingSelectedSet: Set<string>;\r\n  scalingSkippedColumns: Set<string>;\r\n  scalingExcludedColumns: Set<string>;\r\n};\r\n\r\nexport const buildScalingRecommendationRows = ({\r\n  recommendations,\r\n  scalingConfig,\r\n  scalingMethodLabelMap,\r\n  scalingSelectedSet,\r\n  scalingSkippedColumns,\r\n  scalingExcludedColumns,\r\n}: BuildScalingRowsInput): ScalingRecommendationRow[] => {\r\n  if (!recommendations.length) {\r\n    return [];\r\n  }\r\n\r\n  const rows: ScalingRecommendationRow[] = [];\r\n\r\n  recommendations.forEach((entry) => {\r\n    const column = String(entry?.column ?? '').trim();\r\n    if (!column) {\r\n      return;\r\n    }\r\n\r\n    const recommendedMethod = entry.recommended_method;\r\n    const recommendedLabel =\r\n      scalingMethodLabelMap[recommendedMethod] ??\r\n      SCALING_METHOD_FALLBACK_LABELS[recommendedMethod] ??\r\n      recommendedMethod;\r\n\r\n    const fallbackLabels = Array.isArray(entry.fallback_methods)\r\n      ? entry.fallback_methods\r\n          .filter((method): method is ScalingMethodName => SCALING_METHOD_ORDER.includes(method as ScalingMethodName))\r\n          .map((method) => {\r\n            const methodKey = method as ScalingMethodName;\r\n            return scalingMethodLabelMap[methodKey] ?? SCALING_METHOD_FALLBACK_LABELS[methodKey] ?? methodKey;\r\n          })\r\n      : [];\r\n\r\n    const confidence = (entry.confidence as ScalingConfidenceLevel) ?? 'medium';\r\n    const confidenceLabel = SCALING_CONFIDENCE_LABEL[confidence] ?? SCALING_CONFIDENCE_LABEL.medium;\r\n    const columnMethods = scalingConfig.columnMethods;\r\n    const currentOverride = columnMethods[column] ?? null;\r\n    const currentMethod = currentOverride ?? scalingConfig.defaultMethod;\r\n    const currentMethodLabel =\r\n      scalingMethodLabelMap[currentMethod] ??\r\n      SCALING_METHOD_FALLBACK_LABELS[currentMethod] ??\r\n      currentMethod;\r\n\r\n    const isExcluded = scalingExcludedColumns.has(column);\r\n    const isSkipped = scalingSkippedColumns.has(column);\r\n    const isSelected = scalingSelectedSet.has(column);\r\n    const stats = entry.stats;\r\n\r\n    rows.push({\r\n      column,\r\n      dtype: entry.dtype ?? null,\r\n      recommendedMethod,\r\n      recommendedLabel,\r\n      confidence,\r\n      confidenceLabel,\r\n      reasons: Array.isArray(entry.reasons) ? entry.reasons : [],\r\n      fallbackLabels,\r\n      stats,\r\n      hasMissing: Boolean(entry.has_missing),\r\n      currentOverride,\r\n      currentMethod,\r\n      currentMethodLabel,\r\n      isOverrideApplied: currentOverride !== null,\r\n      isSelected,\r\n      isExcluded,\r\n      isSkipped,\r\n    });\r\n  });\r\n\r\n  rows.sort((a, b) => a.column.localeCompare(b.column));\r\n  return rows;\r\n};\r\n\r\nexport const buildScalingOverrideSummary = (\r\n  overrideColumns: string[],\r\n  columnMethods: Record<string, ScalingMethodName>,\r\n  labelMap: Record<ScalingMethodName, string>,\r\n  overrideCount: number,\r\n): string | null => {\r\n  if (!overrideColumns.length) {\r\n    return null;\r\n  }\r\n\r\n  const parts = overrideColumns.map((column) => {\r\n    const method = columnMethods[column];\r\n    const label = method ? labelMap[method] ?? SCALING_METHOD_FALLBACK_LABELS[method] ?? method : null;\r\n  return label ? `${column} -> ${label}` : column;\r\n  });\r\n\r\n  if (overrideCount > overrideColumns.length) {\r\n    parts.push('');\r\n  }\r\n\r\n  return parts.join(', ');\r\n};\r\n","import React from 'react';\r\nimport type { ScalingMethodDetail, ScalingMethodName } from '../../../../api';\r\nimport type {\r\n  NormalizedScalingConfig,\r\n  ScalingMethodOption,\r\n  ScalingRecommendationRow,\r\n} from './scalingSettings';\r\n\r\ntype ScalingInsightsSectionProps = {\r\n  sourceId?: string | null;\r\n  hasReachableSource: boolean;\r\n  isFetchingScaling: boolean;\r\n  scalingConfig: NormalizedScalingConfig;\r\n  scalingMethodOptions: ScalingMethodOption[];\r\n  scalingMethodDetailMap: Map<ScalingMethodName, ScalingMethodDetail>;\r\n  scalingDefaultDetail: ScalingMethodDetail | null;\r\n  scalingAutoDetectEnabled: boolean;\r\n  scalingSelectedCount: number;\r\n  scalingDefaultLabel: string;\r\n  scalingOverrideCount: number;\r\n  scalingOverrideExampleSummary: string | null;\r\n  scalingRecommendationRows: ScalingRecommendationRow[];\r\n  scalingHasRecommendations: boolean;\r\n  scalingStatusMessage: string | null;\r\n  scalingError: string | null;\r\n  scalingSampleSize: number | null;\r\n  relativeScalingGeneratedAt: string | null;\r\n  formatMetricValue: (value: number) => string;\r\n  formatNumericStat: (value: number) => string;\r\n  formatMissingPercentage: (value: number | null) => string;\r\n  onApplyAllRecommendations: () => void;\r\n  onClearOverrides: () => void;\r\n  onDefaultMethodChange: (method: ScalingMethodName) => void;\r\n  onAutoDetectToggle: (checked: boolean) => void;\r\n  onOverrideSelect: (column: string, value: string) => void;\r\n};\r\n\r\nexport const ScalingInsightsSection: React.FC<ScalingInsightsSectionProps> = ({\r\n  sourceId,\r\n  hasReachableSource,\r\n  isFetchingScaling,\r\n  scalingConfig,\r\n  scalingMethodOptions,\r\n  scalingMethodDetailMap,\r\n  scalingDefaultDetail,\r\n  scalingAutoDetectEnabled,\r\n  scalingSelectedCount,\r\n  scalingDefaultLabel,\r\n  scalingOverrideCount,\r\n  scalingOverrideExampleSummary,\r\n  scalingRecommendationRows,\r\n  scalingHasRecommendations,\r\n  scalingStatusMessage,\r\n  scalingError,\r\n  scalingSampleSize,\r\n  relativeScalingGeneratedAt,\r\n  formatMetricValue,\r\n  formatNumericStat,\r\n  formatMissingPercentage,\r\n  onApplyAllRecommendations,\r\n  onClearOverrides,\r\n  onDefaultMethodChange,\r\n  onAutoDetectToggle,\r\n  onOverrideSelect,\r\n}) => {\r\n  const defaultDetail = scalingDefaultDetail ?? scalingMethodDetailMap.get(scalingConfig.defaultMethod) ?? null;\r\n\r\n  return (\r\n    <section className=\"canvas-modal__section\">\r\n      <div className=\"canvas-modal__section-header\">\r\n        <h3>Scaling insights</h3>\r\n        <div className=\"canvas-modal__section-actions\">\r\n          <button\r\n            type=\"button\"\r\n            className=\"btn btn-primary\"\r\n            onClick={onApplyAllRecommendations}\r\n            disabled={!scalingHasRecommendations}\r\n          >\r\n            Apply recommendations\r\n          </button>\r\n          <button\r\n            type=\"button\"\r\n            className=\"btn btn-outline-secondary\"\r\n            onClick={onClearOverrides}\r\n            disabled={!scalingOverrideCount}\r\n          >\r\n            Clear overrides\r\n          </button>\r\n        </div>\r\n      </div>\r\n      <p className=\"canvas-modal__note\">\r\n        Automatically select scaling strategies for numeric features to keep model inputs in comparable ranges. Edits here refresh the preview immediately so you can inspect the effect, but nothing is committed to your pipeline until you click <strong>Save changes</strong> at the bottom of this modal.\r\n      </p>\r\n      {!sourceId && (\r\n        <p className=\"canvas-modal__note canvas-modal__note--warning\">\r\n          Select a dataset to surface scaling insights and column recommendations.\r\n        </p>\r\n      )}\r\n      {sourceId && !hasReachableSource && (\r\n        <p className=\"canvas-modal__note canvas-modal__note--warning\">\r\n          Connect this step to an upstream output to analyse numeric feature distributions.\r\n        </p>\r\n      )}\r\n      {relativeScalingGeneratedAt && (\r\n        <p className=\"canvas-modal__note\">\r\n          Insights generated {relativeScalingGeneratedAt}\r\n          {scalingSampleSize !== null\r\n            ? ` on ${formatMetricValue(scalingSampleSize)} row${scalingSampleSize === 1 ? '' : 's'}.`\r\n            : '.'}\r\n        </p>\r\n      )}\r\n      <div className=\"canvas-modal__parameter-grid\">\r\n        <div className=\"canvas-modal__parameter-field\">\r\n          <div className=\"canvas-modal__parameter-label\">\r\n            <span>Default scaling method</span>\r\n          </div>\r\n          <div className=\"canvas-scaling__method-toggle\" role=\"group\" aria-label=\"Default scaling method\">\r\n            {scalingMethodOptions.map((option) => {\r\n              const methodDetail = scalingMethodDetailMap.get(option.value) ?? null;\r\n              const isActive = option.value === scalingConfig.defaultMethod;\r\n              return (\r\n                <button\r\n                  key={option.value}\r\n                  type=\"button\"\r\n                  className={`canvas-scaling__method-button${isActive ? ' canvas-scaling__method-button--active' : ''}`}\r\n                  aria-pressed={isActive}\r\n                  onClick={() => onDefaultMethodChange(option.value)}\r\n                >\r\n                  <span className=\"canvas-scaling__method-label\">{option.label}</span>\r\n                  {methodDetail?.description && (\r\n                    <span className=\"canvas-scaling__method-description\">{methodDetail.description}</span>\r\n                  )}\r\n                </button>\r\n              );\r\n            })}\r\n          </div>\r\n          {defaultDetail?.description && (\r\n            <p className=\"canvas-modal__parameter-description\">{defaultDetail.description}</p>\r\n          )}\r\n        </div>\r\n        <div className=\"canvas-modal__parameter-field\">\r\n          <div className=\"canvas-modal__parameter-label\">\r\n            <span>Auto-detect numeric columns</span>\r\n          </div>\r\n          <label className=\"canvas-modal__boolean-control\">\r\n            <input\r\n              type=\"checkbox\"\r\n              checked={scalingAutoDetectEnabled}\r\n              onChange={(event) => onAutoDetectToggle(event.target.checked)}\r\n            />\r\n            <span>{scalingAutoDetectEnabled ? 'Enabled' : 'Disabled'}</span>\r\n          </label>\r\n          <p className=\"canvas-modal__parameter-description\">\r\n            When enabled, recommended numeric features join this node automatically after each refresh.\r\n          </p>\r\n        </div>\r\n      </div>\r\n      <p className=\"canvas-modal__note\">\r\n        Tracking <strong>{scalingSelectedCount}</strong> column{scalingSelectedCount === 1 ? '' : 's'} in this node  Default method{' '}\r\n        <strong>{scalingDefaultLabel}</strong>{' '}\r\n        {scalingAutoDetectEnabled ? ' Auto-detect on' : ' Auto-detect off'}\r\n        {scalingOverrideCount > 0\r\n          ? `  Overrides: ${scalingOverrideCount}${\r\n              scalingOverrideExampleSummary ? ` (${scalingOverrideExampleSummary})` : ''\r\n            }`\r\n          : '  No column overrides yet'}\r\n      </p>\r\n      {isFetchingScaling && <p className=\"canvas-modal__note\">Loading scaling diagnostics</p>}\r\n      {!isFetchingScaling && scalingError && sourceId && hasReachableSource && (\r\n        <p className=\"canvas-modal__note canvas-modal__note--error\">{scalingError}</p>\r\n      )}\r\n      {!isFetchingScaling && !scalingError && (\r\n        <>\r\n          {scalingStatusMessage && <p className=\"canvas-modal__note\">{scalingStatusMessage}</p>}\r\n          {scalingRecommendationRows.length > 0 && (\r\n            <div className=\"canvas-cast__body\">\r\n              <div className=\"canvas-cast__table-wrapper\">\r\n                <table className=\"canvas-cast__table canvas-scaling__table\">\r\n                  <thead>\r\n                    <tr>\r\n                      <th scope=\"col\">Column</th>\r\n                      <th scope=\"col\">Recommendation</th>\r\n                      <th scope=\"col\">Distribution</th>\r\n                      <th scope=\"col\">Configured method</th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                    {scalingRecommendationRows.map((row) => {\r\n                      const rowNeedsAttention = !row.isSkipped && row.recommendedMethod !== row.currentMethod;\r\n                      const rowClasses = ['canvas-cast__row'];\r\n                      if (rowNeedsAttention) {\r\n                        rowClasses.push('canvas-cast__row--attention');\r\n                      }\r\n                      if (row.isOverrideApplied) {\r\n                        rowClasses.push('canvas-cast__row--override');\r\n                      }\r\n                      if (row.isSkipped) {\r\n                        rowClasses.push('canvas-cast__row--muted');\r\n                      }\r\n                      const selectValue = row.isSkipped\r\n                        ? '__skip__'\r\n                        : row.isOverrideApplied\r\n                          ? row.currentMethod\r\n                          : '__default__';\r\n                      const overrideHelper = row.isOverrideApplied\r\n                        ? `Override -> ${row.currentMethodLabel}`\r\n                        : row.isSkipped\r\n                          ? 'Skipped (column will not be scaled)'\r\n                          : row.isSelected\r\n                            ? `Inheriting ${scalingDefaultLabel}`\r\n                            : 'Pending inclusion';\r\n                      const stats = row.stats;\r\n                      const statsParts: string[] = [];\r\n                      if (typeof stats.valid_count === 'number' && Number.isFinite(stats.valid_count)) {\r\n                        statsParts.push(`${formatMetricValue(stats.valid_count)} valid rows`);\r\n                      }\r\n                      if (typeof stats.mean === 'number' && Number.isFinite(stats.mean)) {\r\n                        statsParts.push(`Mean ${formatNumericStat(stats.mean)}`);\r\n                      }\r\n                      if (typeof stats.median === 'number' && Number.isFinite(stats.median)) {\r\n                        statsParts.push(`Median ${formatNumericStat(stats.median)}`);\r\n                      }\r\n                      if (typeof stats.stddev === 'number' && Number.isFinite(stats.stddev)) {\r\n                        statsParts.push(` ${formatNumericStat(stats.stddev)}`);\r\n                      }\r\n                      if (typeof stats.iqr === 'number' && Number.isFinite(stats.iqr)) {\r\n                        statsParts.push(`IQR ${formatNumericStat(stats.iqr)}`);\r\n                      }\r\n                      const hasMin = typeof stats.minimum === 'number' && Number.isFinite(stats.minimum);\r\n                      const hasMax = typeof stats.maximum === 'number' && Number.isFinite(stats.maximum);\r\n                      if (hasMin || hasMax) {\r\n                        const minDisplay = hasMin ? formatNumericStat(stats.minimum as number) : '';\r\n                        const maxDisplay = hasMax ? formatNumericStat(stats.maximum as number) : '';\r\n                        statsParts.push(`Range ${minDisplay}  ${maxDisplay}`);\r\n                      }\r\n                      if (typeof stats.skewness === 'number' && Number.isFinite(stats.skewness)) {\r\n                        statsParts.push(`Skew ${formatNumericStat(stats.skewness)}`);\r\n                      }\r\n                      if (\r\n                        typeof stats.outlier_ratio === 'number' &&\r\n                        Number.isFinite(stats.outlier_ratio) &&\r\n                        stats.outlier_ratio > 0\r\n                      ) {\r\n                        statsParts.push(`${formatMissingPercentage(stats.outlier_ratio * 100)} outliers`);\r\n                      }\r\n                      const statsSummary = statsParts.length ? statsParts.join('  ') : null;\r\n                      return (\r\n                        <tr key={`scaling-row-${row.column}`} className={rowClasses.join(' ')}>\r\n                          <th scope=\"row\">\r\n                            <div className=\"canvas-cast__column-cell\">\r\n                              <span className=\"canvas-cast__column-name\">{row.column}</span>\r\n                              <div className=\"canvas-cast__column-meta\">\r\n                                {row.dtype && <span className=\"canvas-cast__muted\">dtype: {row.dtype}</span>}\r\n                                {row.isExcluded && (\r\n                                  <span className=\"canvas-cast__muted\">Excluded from scaling (non-numeric)</span>\r\n                                )}\r\n                                {row.isSelected && !row.isExcluded && (\r\n                                  <span className=\"canvas-cast__badge canvas-cast__badge--selected\">In node</span>\r\n                                )}\r\n                                {row.isSkipped && !row.isExcluded && (\r\n                                  <span className=\"canvas-cast__badge canvas-cast__badge--skipped\">Skipped</span>\r\n                                )}\r\n                                {row.isOverrideApplied && (\r\n                                  <span className=\"canvas-cast__badge canvas-cast__badge--override\">Override</span>\r\n                                )}\r\n                              </div>\r\n                            </div>\r\n                          </th>\r\n                          <td>\r\n                            <div className=\"canvas-cast__recommendation\">\r\n                              <span\r\n                                className={`canvas-cast__chip${\r\n                                  rowNeedsAttention\r\n                                    ? ' canvas-cast__chip--attention'\r\n                                    : ' canvas-cast__chip--applied'\r\n                                }`}\r\n                              >\r\n                                {row.recommendedLabel}\r\n                              </span>\r\n                              <span className=\"canvas-cast__recommendation-note\">{row.confidenceLabel}</span>\r\n                              {row.reasons.length > 0 && (\r\n                                <span className=\"canvas-cast__recommendation-note\">{row.reasons.join('; ')}</span>\r\n                              )}\r\n                            </div>\r\n                          </td>\r\n                          <td>\r\n                            {statsSummary ? (\r\n                              <span>{statsSummary}</span>\r\n                            ) : (\r\n                              <span className=\"canvas-cast__muted\">No distribution summary</span>\r\n                            )}\r\n                          </td>\r\n                          <td>\r\n                            <div className=\"canvas-cast__target\">\r\n                              <select value={selectValue} onChange={(event) => onOverrideSelect(row.column, event.target.value)}>\r\n                                <option value=\"__default__\">Inherit default ({scalingDefaultLabel})</option>\r\n                                <option value=\"__skip__\">Skip scaling for this column</option>\r\n                                {scalingMethodOptions.map((option) => (\r\n                                  <option key={`${row.column}-${option.value}`} value={option.value}>\r\n                                    {option.label}\r\n                                  </option>\r\n                                ))}\r\n                              </select>\r\n                              <span className=\"canvas-cast__target-note\">{overrideHelper}</span>\r\n                            </div>\r\n                          </td>\r\n                        </tr>\r\n                      );\r\n                    })}\r\n                  </tbody>\r\n                </table>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </>\r\n      )}\r\n    </section>\r\n  );\r\n};\r\n","import type { SkewnessColumnRecommendation, SkewnessMethodDetail } from '../../../../api';\r\n\r\nexport type SkewnessTransformationMethod =\r\n  | 'log'\r\n  | 'square_root'\r\n  | 'cube_root'\r\n  | 'reciprocal'\r\n  | 'square'\r\n  | 'exponential'\r\n  | 'box_cox'\r\n  | 'yeo_johnson';\r\n\r\nexport type SkewnessTransformationConfig = {\r\n  column: string;\r\n  method: SkewnessTransformationMethod;\r\n};\r\n\r\nexport type SkewnessViewMode = 'recommended' | 'all';\r\n\r\nexport const SKEWNESS_METHOD_ORDER: SkewnessTransformationMethod[] = [\r\n  'log',\r\n  'square_root',\r\n  'cube_root',\r\n  'reciprocal',\r\n  'square',\r\n  'exponential',\r\n  'box_cox',\r\n  'yeo_johnson',\r\n];\r\n\r\nexport const DEFAULT_SKEWNESS_METHOD: SkewnessTransformationMethod = 'log';\r\n\r\nexport const isSkewnessTransformationMethod = (value: any): value is SkewnessTransformationMethod =>\r\n  typeof value === 'string' && SKEWNESS_METHOD_ORDER.includes(value as SkewnessTransformationMethod);\r\n\r\nexport const normalizeSkewnessTransformations = (value: any): SkewnessTransformationConfig[] => {\r\n  if (!Array.isArray(value)) {\r\n    return [];\r\n  }\r\n\r\n  return value\r\n    .map((entry) => {\r\n      if (!entry || typeof entry !== 'object') {\r\n        return null;\r\n      }\r\n      const rawColumn = typeof entry.column === 'string' ? entry.column.trim() : '';\r\n      const rawMethod = typeof entry.method === 'string' ? entry.method.trim() : '';\r\n      if (!rawColumn) {\r\n        return null;\r\n      }\r\n      const method = isSkewnessTransformationMethod(rawMethod) ? rawMethod : DEFAULT_SKEWNESS_METHOD;\r\n      return {\r\n        column: rawColumn,\r\n        method,\r\n      };\r\n    })\r\n    .filter((item): item is SkewnessTransformationConfig => Boolean(item));\r\n};\r\n\r\nexport const dedupeSkewnessTransformations = (\r\n  entries: SkewnessTransformationConfig[],\r\n): SkewnessTransformationConfig[] => {\r\n  const seen = new Set<string>();\r\n  const result: SkewnessTransformationConfig[] = [];\r\n  entries.forEach((entry) => {\r\n    const key = `${entry.column}__${entry.method}`;\r\n    if (seen.has(key)) {\r\n      return;\r\n    }\r\n    seen.add(key);\r\n    result.push(entry);\r\n  });\r\n  return result;\r\n};\r\n\r\nexport const SKEWNESS_DIRECTION_LABEL: Record<'left' | 'right', string> = {\r\n  left: 'Left skew',\r\n  right: 'Right skew',\r\n};\r\n\r\nexport const FALLBACK_SKEWNESS_LABELS: Record<SkewnessTransformationMethod, string> = {\r\n  log: 'Logarithmic',\r\n  square_root: 'Square Root',\r\n  cube_root: 'Cube Root',\r\n  reciprocal: 'Reciprocal (Inverse)',\r\n  square: 'Square',\r\n  exponential: 'Exponential',\r\n  box_cox: 'BoxCox',\r\n  yeo_johnson: 'YeoJohnson',\r\n};\r\n\r\nexport const createSkewnessMethodLabelMap = (details?: SkewnessMethodDetail[] | null) => {\r\n  const map: Record<SkewnessTransformationMethod, string> = { ...FALLBACK_SKEWNESS_LABELS };\r\n  if (Array.isArray(details)) {\r\n    details.forEach((detail) => {\r\n      const rawKey = typeof detail?.key === 'string' ? detail.key.trim().toLowerCase() : '';\r\n      const label = typeof detail?.label === 'string' ? detail.label.trim() : '';\r\n      if (!rawKey || !label) {\r\n        return;\r\n      }\r\n      if (isSkewnessTransformationMethod(rawKey)) {\r\n        map[rawKey] = label;\r\n      }\r\n    });\r\n  }\r\n  return map;\r\n};\r\n\r\nexport const createSkewnessMethodDetailMap = (details?: SkewnessMethodDetail[] | null) => {\r\n  const map = new Map<SkewnessTransformationMethod, SkewnessMethodDetail>();\r\n  if (Array.isArray(details)) {\r\n    details.forEach((detail) => {\r\n      const rawKey = typeof detail?.key === 'string' ? detail.key.trim().toLowerCase() : '';\r\n      if (isSkewnessTransformationMethod(rawKey)) {\r\n        map.set(rawKey, detail);\r\n      }\r\n    });\r\n  }\r\n  return map;\r\n};\r\n\r\nexport type SkewnessTableRow = {\r\n  column: string;\r\n  recommendedMethods: SkewnessTransformationMethod[];\r\n  primaryMethod: SkewnessTransformationMethod | null;\r\n  directionLabel: string | null;\r\n  magnitudeLabel: string | null;\r\n  skewnessValue: number | null;\r\n  summary: string | null;\r\n  selectedMethod: SkewnessTransformationMethod | null;\r\n};\r\n\r\nexport type SkewnessTableGroup = {\r\n  key: string;\r\n  label: string | null;\r\n  method: SkewnessTransformationMethod | null;\r\n  rows: SkewnessTableRow[];\r\n};\r\n\r\nexport const buildSkewnessRows = ({\r\n  viewMode,\r\n  recommendations,\r\n  columnOptions,\r\n  recommendationMap,\r\n  transformationMap,\r\n}: {\r\n  viewMode: SkewnessViewMode;\r\n  recommendations: SkewnessColumnRecommendation[];\r\n  columnOptions: string[];\r\n  recommendationMap: Map<string, SkewnessColumnRecommendation>;\r\n  transformationMap: Map<string, SkewnessTransformationMethod>;\r\n}): SkewnessTableRow[] => {\r\n  const sourceColumns =\r\n    viewMode === 'recommended'\r\n      ? recommendations\r\n          .map((entry) => (entry?.column ? entry.column : null))\r\n          .filter((column): column is string => Boolean(column))\r\n      : columnOptions;\r\n\r\n  const seen = new Set<string>();\r\n  const rows: SkewnessTableRow[] = [];\r\n\r\n  sourceColumns.forEach((rawColumn) => {\r\n    const normalized = typeof rawColumn === 'string' ? rawColumn.trim() : '';\r\n    if (!normalized || seen.has(normalized)) {\r\n      return;\r\n    }\r\n    seen.add(normalized);\r\n\r\n    const recommendation = recommendationMap.get(normalized) ?? null;\r\n    const recommendedMethods = recommendation\r\n      ? recommendation.recommended_methods.filter(isSkewnessTransformationMethod)\r\n      : [];\r\n    const primaryMethod = recommendedMethods.length ? recommendedMethods[0] : null;\r\n    const directionLabel = recommendation?.direction\r\n      ? SKEWNESS_DIRECTION_LABEL[recommendation.direction] ?? recommendation.direction\r\n      : null;\r\n    const magnitudeLabel = recommendation?.magnitude\r\n      ? `${recommendation.magnitude.charAt(0).toUpperCase()}${recommendation.magnitude.slice(1)}`\r\n      : null;\r\n    const skewnessValue =\r\n      recommendation && typeof recommendation.skewness === 'number' && Number.isFinite(recommendation.skewness)\r\n        ? recommendation.skewness\r\n        : null;\r\n    const summary = recommendation?.summary ?? null;\r\n    const selectedMethod = transformationMap.get(normalized) ?? null;\r\n\r\n    rows.push({\r\n      column: normalized,\r\n      recommendedMethods,\r\n      primaryMethod,\r\n      directionLabel,\r\n      magnitudeLabel,\r\n      skewnessValue,\r\n      summary,\r\n      selectedMethod,\r\n    });\r\n  });\r\n\r\n  rows.sort((a, b) => {\r\n    const aValue = typeof a.skewnessValue === 'number' ? Math.abs(a.skewnessValue) : -Infinity;\r\n    const bValue = typeof b.skewnessValue === 'number' ? Math.abs(b.skewnessValue) : -Infinity;\r\n    if (aValue !== bValue) {\r\n      return bValue - aValue;\r\n    }\r\n    const aHasRecommendation = Boolean(a.primaryMethod);\r\n    const bHasRecommendation = Boolean(b.primaryMethod);\r\n    if (aHasRecommendation !== bHasRecommendation) {\r\n      return aHasRecommendation ? -1 : 1;\r\n    }\r\n    return a.column.localeCompare(b.column);\r\n  });\r\n\r\n  return rows;\r\n};\r\n\r\nexport const buildSkewnessTableGroups = (\r\n  rows: SkewnessTableRow[],\r\n  groupByMethod: boolean,\r\n  resolveLabel: (method: SkewnessTransformationMethod) => string,\r\n): SkewnessTableGroup[] => {\r\n  if (!groupByMethod) {\r\n    return [\r\n      {\r\n        key: 'all',\r\n        label: null,\r\n        method: null,\r\n        rows,\r\n      },\r\n    ];\r\n  }\r\n\r\n  const fallbackKey = 'no-recommendation';\r\n  const bucket = new Map<string, SkewnessTableGroup>();\r\n\r\n  rows.forEach((row) => {\r\n    const method = row.primaryMethod ?? null;\r\n    const key = method ?? fallbackKey;\r\n    const label = method ? resolveLabel(method) : 'No recommended action';\r\n    const entry = bucket.get(key) ?? { key, label, method, rows: [] };\r\n    entry.rows.push(row);\r\n    bucket.set(key, entry);\r\n  });\r\n\r\n  const result = Array.from(bucket.values());\r\n  result.sort((a, b) => {\r\n    const weight = (method: SkewnessTransformationMethod | null) =>\r\n      method ? SKEWNESS_METHOD_ORDER.indexOf(method) : SKEWNESS_METHOD_ORDER.length;\r\n    const diff = weight(a.method) - weight(b.method);\r\n    if (diff !== 0) {\r\n      return diff;\r\n    }\r\n    if (a.rows.length !== b.rows.length) {\r\n      return b.rows.length - a.rows.length;\r\n    }\r\n    const aLabel = a.label ?? '';\r\n    const bLabel = b.label ?? '';\r\n    return aLabel.localeCompare(bLabel);\r\n  });\r\n\r\n  return result;\r\n};\r\n","import React from 'react';\r\nimport type { SkewnessMethodStatus } from '../../../../api';\r\nimport {\r\n  SKEWNESS_METHOD_ORDER,\r\n  type SkewnessTableGroup,\r\n  type SkewnessTableRow,\r\n  type SkewnessTransformationMethod,\r\n  type SkewnessViewMode,\r\n} from './skewnessSettings';\r\n\r\ntype SkewnessInsightsSectionProps = {\r\n  sourceId?: string | null;\r\n  hasReachableSource: boolean;\r\n  isFetchingSkewness: boolean;\r\n  skewnessThreshold: number | null;\r\n  skewnessError: string | null;\r\n  skewnessViewMode: SkewnessViewMode;\r\n  skewnessRecommendedCount: number;\r\n  skewnessNumericCount: number;\r\n  skewnessGroupByMethod: boolean;\r\n  skewnessRows: SkewnessTableRow[];\r\n  skewnessTableGroups: SkewnessTableGroup[];\r\n  hasSkewnessAutoRecommendations: boolean;\r\n  skewnessTransformationsCount: number;\r\n  isFetchingRecommendations: boolean;\r\n  getSkewnessMethodLabel: (method: SkewnessTransformationMethod) => string;\r\n  getSkewnessMethodStatus: (\r\n    column: string,\r\n    method: SkewnessTransformationMethod,\r\n  ) => SkewnessMethodStatus | { status: 'ready'; reason?: string };\r\n  onApplyRecommendations: () => void;\r\n  onViewModeChange: (mode: SkewnessViewMode) => void;\r\n  onGroupByToggle: (checked: boolean) => void;\r\n  onOverrideChange: (column: string, value: string) => void;\r\n  onClearSelections: () => void;\r\n};\r\n\r\nexport const SkewnessInsightsSection: React.FC<SkewnessInsightsSectionProps> = ({\r\n  sourceId,\r\n  hasReachableSource,\r\n  isFetchingSkewness,\r\n  skewnessThreshold,\r\n  skewnessError,\r\n  skewnessViewMode,\r\n  skewnessRecommendedCount,\r\n  skewnessNumericCount,\r\n  skewnessGroupByMethod,\r\n  skewnessRows,\r\n  skewnessTableGroups,\r\n  hasSkewnessAutoRecommendations,\r\n  skewnessTransformationsCount,\r\n  isFetchingRecommendations,\r\n  getSkewnessMethodLabel,\r\n  getSkewnessMethodStatus,\r\n  onApplyRecommendations,\r\n  onViewModeChange,\r\n  onGroupByToggle,\r\n  onOverrideChange,\r\n  onClearSelections,\r\n}) => {\r\n  return (\r\n    <section className=\"canvas-modal__section\">\r\n      <div className=\"canvas-modal__section-header\">\r\n        <h3>Skewness insights</h3>\r\n        <div className=\"canvas-modal__section-actions\">\r\n          <button\r\n            type=\"button\"\r\n            className=\"btn btn-primary\"\r\n            onClick={onApplyRecommendations}\r\n            disabled={isFetchingRecommendations || !hasSkewnessAutoRecommendations}\r\n          >\r\n            Apply recommendations\r\n          </button>\r\n        </div>\r\n      </div>\r\n      {skewnessThreshold !== null && (\r\n        <p className=\"canvas-modal__note\">\r\n          Columns with |skewness|  {skewnessThreshold.toFixed(2)} are surfaced below.\r\n        </p>\r\n      )}\r\n      {isFetchingSkewness && skewnessRows.length === 0 && <p className=\"canvas-modal__note\">Loading skewness diagnostics</p>}\r\n      {!isFetchingSkewness && skewnessError && (\r\n        <p className=\"canvas-modal__note canvas-modal__note--error\">{skewnessError}</p>\r\n      )}\r\n      {(!isFetchingSkewness || skewnessRows.length > 0) && !skewnessError && (\r\n        <div className=\"canvas-skewness__body\">\r\n          <div className=\"canvas-skewness__toolbar\">\r\n            <div className=\"canvas-skewness__segmented\" role=\"group\" aria-label=\"Skewness view\">\r\n              <button\r\n                type=\"button\"\r\n                className=\"canvas-skewness__segmented-button\"\r\n                data-active={skewnessViewMode === 'recommended'}\r\n                onClick={() => onViewModeChange('recommended')}\r\n                disabled={!skewnessRecommendedCount}\r\n              >\r\n                Recommended ({skewnessRecommendedCount})\r\n              </button>\r\n              <button\r\n                type=\"button\"\r\n                className=\"canvas-skewness__segmented-button\"\r\n                data-active={skewnessViewMode === 'all'}\r\n                onClick={() => onViewModeChange('all')}\r\n                disabled={!skewnessNumericCount}\r\n              >\r\n                All numeric ({skewnessNumericCount})\r\n              </button>\r\n            </div>\r\n            <label className=\"canvas-skewness__toggle\">\r\n              <input\r\n                type=\"checkbox\"\r\n                checked={skewnessGroupByMethod}\r\n                onChange={(event) => onGroupByToggle(event.target.checked)}\r\n              />\r\n              Group columns by recommended action\r\n            </label>\r\n          </div>\r\n          {skewnessRows.length === 0 ? (\r\n            <p className=\"canvas-modal__note\">\r\n              {skewnessViewMode === 'recommended'\r\n                ? 'No columns met the skewness threshold for recommendations. Switch to All numeric to configure overrides manually.'\r\n                : 'No numeric columns available for skewness review.'}\r\n            </p>\r\n          ) : (\r\n            <div className=\"canvas-skewness__table-wrapper\">\r\n              {skewnessTableGroups.map((group) => (\r\n                <div key={`skewness-group-${group.key}`} className=\"canvas-skewness__group\">\r\n                  {group.label && (\r\n                    <div className=\"canvas-skewness__group-header\">\r\n                      <h4>{group.label}</h4>\r\n                      <span>\r\n                        {group.rows.length} column{group.rows.length === 1 ? '' : 's'}\r\n                      </span>\r\n                    </div>\r\n                  )}\r\n                  <div className=\"canvas-skewness__table-scroll\">\r\n                    <table className=\"canvas-skewness__table\">\r\n                      <thead>\r\n                        <tr>\r\n                          <th scope=\"col\">Column</th>\r\n                          <th scope=\"col\">Suggested transform</th>\r\n                          <th scope=\"col\">Skewness level</th>\r\n                          <th scope=\"col\">Override</th>\r\n                        </tr>\r\n                      </thead>\r\n                      <tbody>\r\n                        {group.rows.map((row) => {\r\n                          const parts: string[] = [];\r\n                          if (row.directionLabel) {\r\n                            parts.push(row.directionLabel);\r\n                          }\r\n                          if (row.skewnessValue !== null) {\r\n                            parts.push(`(${row.skewnessValue.toFixed(2)})`);\r\n                          }\r\n                          if (row.magnitudeLabel) {\r\n                            parts.push(` ${row.magnitudeLabel}`);\r\n                          }\r\n                          const skewnessText = parts.length ? parts.join(' ') : '';\r\n                          const currentValue = row.selectedMethod ?? '';\r\n                          const recommendedSet = new Set<SkewnessTransformationMethod>(row.recommendedMethods);\r\n\r\n                          type SkewnessOption = {\r\n                            value: string;\r\n                            label: string;\r\n                            status: SkewnessMethodStatus | null;\r\n                            reason: string | null;\r\n                          };\r\n\r\n                          const optionEntries: SkewnessOption[] = [\r\n                            {\r\n                              value: '',\r\n                              label: 'No transform',\r\n                              status: null,\r\n                              reason: null,\r\n                            },\r\n                          ];\r\n\r\n                          row.recommendedMethods.forEach((method) => {\r\n                            const status = getSkewnessMethodStatus(row.column, method);\r\n                            optionEntries.push({\r\n                              value: method,\r\n                              label: `${getSkewnessMethodLabel(method)}${method === row.primaryMethod ? ' (recommended)' : ''}`,\r\n                              status,\r\n                              reason: status?.reason ?? null,\r\n                            });\r\n                          });\r\n\r\n                          SKEWNESS_METHOD_ORDER.forEach((method) => {\r\n                            if (recommendedSet.has(method)) {\r\n                              return;\r\n                            }\r\n                            const status = getSkewnessMethodStatus(row.column, method);\r\n                            optionEntries.push({\r\n                              value: method,\r\n                              label: getSkewnessMethodLabel(method),\r\n                              status,\r\n                              reason: status?.reason ?? null,\r\n                            });\r\n                          });\r\n\r\n                          const currentStatus = row.selectedMethod\r\n                            ? getSkewnessMethodStatus(row.column, row.selectedMethod)\r\n                            : null;\r\n                          const recommendedStatus = !row.selectedMethod && row.primaryMethod\r\n                            ? getSkewnessMethodStatus(row.column, row.primaryMethod)\r\n                            : null;\r\n\r\n                          return (\r\n                            <tr\r\n                              key={`skewness-row-${row.column}`}\r\n                              className={`canvas-skewness__row${row.selectedMethod ? ' canvas-skewness__row--active' : ''}`}\r\n                            >\r\n                              <th scope=\"row\">\r\n                                <div className=\"canvas-skewness__column-cell\">\r\n                                  <span className=\"canvas-skewness__column-name\">{row.column}</span>\r\n                                  {row.summary && (\r\n                                    <span className=\"canvas-skewness__column-summary\">{row.summary}</span>\r\n                                  )}\r\n                                </div>\r\n                              </th>\r\n                              <td>\r\n                                {row.recommendedMethods.length ? (\r\n                                  <span className={`canvas-skewness__chip${row.primaryMethod ? ' canvas-skewness__chip--recommended' : ''}`}>\r\n                                    {row.primaryMethod\r\n                                      ? getSkewnessMethodLabel(row.primaryMethod)\r\n                                      : getSkewnessMethodLabel(row.recommendedMethods[0])}\r\n                                  </span>\r\n                                ) : (\r\n                                  <span className=\"canvas-skewness__muted\">No recommendation</span>\r\n                                )}\r\n                              </td>\r\n                              <td>\r\n                                <span className=\"canvas-skewness__metric\">{skewnessText}</span>\r\n                              </td>\r\n                              <td>\r\n                                <div className=\"canvas-skewness__override\">\r\n                                  <select\r\n                                    value={currentValue}\r\n                                    onChange={(event) => onOverrideChange(row.column, event.target.value)}\r\n                                    disabled={isFetchingRecommendations || !hasReachableSource}\r\n                                  >\r\n                                    {optionEntries.map((option) => {\r\n                                      const labelWithReason = option.reason\r\n                                        ? `${option.label} (caution: ${option.reason})`\r\n                                        : option.label;\r\n                                      const statusToken = option.status?.status ?? 'ready';\r\n                                      return (\r\n                                        <option\r\n                                          key={`skewness-option-${row.column}-${option.value || 'none'}`}\r\n                                          value={option.value}\r\n                                          data-status={statusToken}\r\n                                        >\r\n                                          {labelWithReason}\r\n                                        </option>\r\n                                      );\r\n                                    })}\r\n                                  </select>\r\n                                  {currentStatus && currentStatus.status !== 'ready' && currentStatus.reason && (\r\n                                    <span className=\"canvas-skewness__status canvas-skewness__status--error\">\r\n                                      Selected transform may be incompatible: {currentStatus.reason}\r\n                                    </span>\r\n                                  )}\r\n                                  {!row.selectedMethod && recommendedStatus && recommendedStatus.status !== 'ready' && recommendedStatus.reason && (\r\n                                    <span className=\"canvas-skewness__status\">\r\n                                      Recommended transform flagged: {recommendedStatus.reason}\r\n                                    </span>\r\n                                  )}\r\n                                </div>\r\n                              </td>\r\n                            </tr>\r\n                          );\r\n                        })}\r\n                      </tbody>\r\n                    </table>\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          )}\r\n          <div className=\"canvas-skewness__footer\">\r\n            <span>\r\n              {skewnessTransformationsCount\r\n                ? `${skewnessTransformationsCount} transformation${skewnessTransformationsCount === 1 ? '' : 's'} configured`\r\n                : 'No transformations configured yet.'}\r\n            </span>\r\n            {skewnessTransformationsCount > 0 && (\r\n              <button type=\"button\" className=\"btn btn-outline-secondary\" onClick={onClearSelections}>\r\n                Clear selections\r\n              </button>\r\n            )}\r\n          </div>\r\n        </div>\r\n      )}\r\n    </section>\r\n  );\r\n};\r\n","import { ensureArrayOfString } from '../../sharedUtils';\r\n\r\nconst DEFAULT_SUFFIX = '_was_missing';\r\n\r\nexport type MissingIndicatorInsightRow = {\r\n  column: string;\r\n  missingPercentage: number | null;\r\n  flagColumn: string;\r\n  conflicts: {\r\n    alreadyExists: boolean;\r\n    duplicateFlag: boolean;\r\n  };\r\n};\r\n\r\nexport type MissingIndicatorInsights = {\r\n  rows: MissingIndicatorInsightRow[];\r\n  flaggedColumnsInDataset: string[];\r\n  conflictCount: number;\r\n};\r\n\r\ntype BuildMissingIndicatorInsightsInput = {\r\n  selectedColumns: string[] | null | undefined;\r\n  availableColumns: string[];\r\n  columnMissingMap: Record<string, number>;\r\n  suffix: string;\r\n};\r\n\r\nexport const resolveMissingIndicatorSuffix = (\r\n  primary?: unknown,\r\n  fallback?: unknown,\r\n): string => {\r\n  const normalizedPrimary = typeof primary === 'string' ? primary.trim() : '';\r\n  if (normalizedPrimary) {\r\n    return normalizedPrimary;\r\n  }\r\n  const normalizedFallback = typeof fallback === 'string' ? fallback.trim() : '';\r\n  if (normalizedFallback) {\r\n    return normalizedFallback;\r\n  }\r\n  return DEFAULT_SUFFIX;\r\n};\r\n\r\nexport const isFlaggedColumnName = (column: string, suffix: string): boolean => {\r\n  const normalizedColumn = typeof column === 'string' ? column.trim() : '';\r\n  const normalizedSuffix = typeof suffix === 'string' ? suffix : '';\r\n  if (!normalizedColumn || !normalizedSuffix) {\r\n    return false;\r\n  }\r\n  return normalizedColumn.endsWith(normalizedSuffix);\r\n};\r\n\r\nexport const buildMissingIndicatorInsights = ({\r\n  selectedColumns,\r\n  availableColumns,\r\n  columnMissingMap,\r\n  suffix,\r\n}: BuildMissingIndicatorInsightsInput): MissingIndicatorInsights => {\r\n  const normalizedSuffix = typeof suffix === 'string' ? suffix : '';\r\n  const datasetColumns = ensureArrayOfString(availableColumns);\r\n  const datasetColumnSet = new Set(datasetColumns);\r\n  const uniqueSelectedColumns = Array.from(new Set(ensureArrayOfString(selectedColumns)));\r\n  const rows: MissingIndicatorInsightRow[] = [];\r\n\r\n  uniqueSelectedColumns.forEach((column) => {\r\n    const flagColumn = `${column}${normalizedSuffix}`;\r\n    const rawMissingValue = columnMissingMap[column];\r\n    const missingPercentage =\r\n      typeof rawMissingValue === 'number' && Number.isFinite(rawMissingValue) ? Math.max(0, rawMissingValue) : null;\r\n\r\n    rows.push({\r\n      column,\r\n      missingPercentage,\r\n      flagColumn,\r\n      conflicts: {\r\n        alreadyExists: datasetColumnSet.has(flagColumn),\r\n        duplicateFlag: false,\r\n      },\r\n    });\r\n  });\r\n\r\n  if (rows.length > 0) {\r\n    const flagCounts = new Map<string, number>();\r\n    rows.forEach((row) => {\r\n      flagCounts.set(row.flagColumn, (flagCounts.get(row.flagColumn) ?? 0) + 1);\r\n    });\r\n    rows.forEach((row) => {\r\n      row.conflicts.duplicateFlag = (flagCounts.get(row.flagColumn) ?? 0) > 1;\r\n    });\r\n  }\r\n\r\n  rows.sort((a, b) => {\r\n    const aMissing = a.missingPercentage;\r\n    const bMissing = b.missingPercentage;\r\n    const aHas = typeof aMissing === 'number';\r\n    const bHas = typeof bMissing === 'number';\r\n    if (aHas && bHas && aMissing !== bMissing) {\r\n      return (bMissing as number) - (aMissing as number);\r\n    }\r\n    if (aHas !== bHas) {\r\n      return aHas ? -1 : 1;\r\n    }\r\n    return a.column.localeCompare(b.column);\r\n  });\r\n\r\n  const flaggedColumnsInDataset = normalizedSuffix\r\n    ? Array.from(new Set(datasetColumns.filter((name) => isFlaggedColumnName(name, normalizedSuffix))))\r\n    : [];\r\n\r\n  const conflictCount = rows.reduce((total, row) => {\r\n    if (row.conflicts.alreadyExists || row.conflicts.duplicateFlag) {\r\n      return total + 1;\r\n    }\r\n    return total;\r\n  }, 0);\r\n\r\n  return {\r\n    rows,\r\n    flaggedColumnsInDataset,\r\n    conflictCount,\r\n  };\r\n};\r\n","import React from 'react';\r\nimport type { MissingIndicatorInsights } from './missingIndicatorSettings';\r\n\r\ntype MissingIndicatorInsightsSectionProps = {\r\n  suffix: string;\r\n  insights: MissingIndicatorInsights;\r\n  formatMissingPercentage: (value: number | null) => string;\r\n};\r\n\r\nexport const MissingIndicatorInsightsSection: React.FC<MissingIndicatorInsightsSectionProps> = ({\r\n  suffix,\r\n  insights,\r\n  formatMissingPercentage,\r\n}) => {\r\n  const { rows, flaggedColumnsInDataset, conflictCount } = insights;\r\n  const hasRows = rows.length > 0;\r\n  const suffixDisplay = suffix || '(no suffix)';\r\n  const flaggedPreview = flaggedColumnsInDataset.slice(0, 4);\r\n  const remainingFlagged = Math.max(flaggedColumnsInDataset.length - flaggedPreview.length, 0);\r\n\r\n  return (\r\n    <section className=\"canvas-modal__section\">\r\n      <div className=\"canvas-modal__section-header\">\r\n        <h3>Missing indicator summary</h3>\r\n      </div>\r\n      <p className=\"canvas-modal__note\">\r\n        Generates <strong>{rows.length}</strong> flag column{rows.length === 1 ? '' : 's'} using suffix{' '}\r\n        <strong>{suffixDisplay}</strong>.\r\n      </p>\r\n      {flaggedColumnsInDataset.length > 0 && (\r\n        <p className=\"canvas-modal__note\">\r\n          Detected {flaggedColumnsInDataset.length} existing flag column{flaggedColumnsInDataset.length === 1 ? '' : 's'}{' '}\r\n          with this suffix\r\n          {flaggedPreview.length > 0\r\n            ? ` (examples: ${flaggedPreview.join(', ')}${remainingFlagged > 0 ? ', ' : ''})`\r\n            : ''}.\r\n        </p>\r\n      )}\r\n      {conflictCount > 0 && (\r\n        <p className=\"canvas-modal__note canvas-modal__note--warning\">\r\n          {conflictCount} generated flag column{conflictCount === 1 ? ' has' : 's have'} naming conflicts. Adjust the suffix or remove conflicting columns.\r\n        </p>\r\n      )}\r\n      {!hasRows ? (\r\n        <p className=\"canvas-modal__note\">Select columns below to create missing-value flags.</p>\r\n      ) : (\r\n        <div className=\"canvas-cast__table-wrapper\">\r\n          <table className=\"canvas-cast__table\">\r\n            <thead>\r\n              <tr>\r\n                <th scope=\"col\">Column</th>\r\n                <th scope=\"col\">Missing %</th>\r\n                <th scope=\"col\">Flag column</th>\r\n                <th scope=\"col\">Status</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {rows.map((row) => {\r\n                const statusParts: string[] = [];\r\n                if (row.conflicts.alreadyExists) {\r\n                  statusParts.push('Already exists');\r\n                }\r\n                if (row.conflicts.duplicateFlag) {\r\n                  statusParts.push('Duplicate name');\r\n                }\r\n                const hasConflict = statusParts.length > 0;\r\n                const statusLabel = hasConflict ? statusParts.join('  ') : 'Ready';\r\n                const chipClass = hasConflict\r\n                  ? 'canvas-cast__chip canvas-cast__chip--attention'\r\n                  : 'canvas-cast__chip canvas-cast__chip--applied';\r\n                const rowClass = hasConflict ? 'canvas-cast__row canvas-cast__row--attention' : 'canvas-cast__row';\r\n                return (\r\n                  <tr key={`missing-indicator-${row.column}`} className={rowClass}>\r\n                    <th scope=\"row\">{row.column}</th>\r\n                    <td>{formatMissingPercentage(row.missingPercentage)}</td>\r\n                    <td>{row.flagColumn}</td>\r\n                    <td>\r\n                      <span className={chipClass}>{statusLabel}</span>\r\n                    </td>\r\n                  </tr>\r\n                );\r\n              })}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      )}\r\n    </section>\r\n  );\r\n};\r\n","import { ensureArrayOfString } from '../../sharedUtils';\r\n\r\nconst ALIAS_MODES = [\r\n  'canonicalize_country_codes',\r\n  'normalize_boolean',\r\n  'punctuation',\r\n  'custom',\r\n] as const;\r\n\r\nexport type AliasMode = (typeof ALIAS_MODES)[number];\r\n\r\nexport const DEFAULT_ALIAS_MODE: AliasMode = 'canonicalize_country_codes';\r\n\r\nconst aliasModeSet = new Set<string>(ALIAS_MODES);\r\n\r\nconst TEXTUAL_TYPE_TOKENS = ['string', 'object', 'text', 'category', 'mixed', 'varchar', 'char'];\r\n\r\nconst PREVIEW_PAIR_LIMIT = 4;\r\nconst PREVIEW_COLUMN_LIMIT = 6;\r\nconst PREVIEW_WARNING_LIMIT = 4;\r\nconst PREVIEW_SAMPLE_LIMIT = 3;\r\nconst PREVIEW_SAMPLE_LENGTH = 36;\r\nconst PREVIEW_COLUMN_SAMPLE_LIMIT = 5;\r\n\r\nconst MODE_METADATA: Record<AliasMode, { label: string; guidance: string; examples: string[] }> = {\r\n  canonicalize_country_codes: {\r\n    label: 'Country aliases',\r\n    guidance: 'Maps abbreviations such as \"UK\" or \"UAE\" to canonical country names.',\r\n    examples: ['UK => United Kingdom', 'UAE => United Arab Emirates'],\r\n  },\r\n  normalize_boolean: {\r\n    label: 'Boolean tokens',\r\n    guidance: 'Standardizes yes/no style values so downstream logic sees consistent tokens.',\r\n    examples: ['y => Yes', '0 => No'],\r\n  },\r\n  punctuation: {\r\n    label: 'Punctuation cleanup',\r\n    guidance: 'Strips punctuation and squeezes whitespace to simplify fuzzy matching.',\r\n    examples: ['C.R.M. => CRM', 'Part - Time => Part Time'],\r\n  },\r\n  custom: {\r\n    label: 'Custom mappings',\r\n    guidance: 'Applies the alias pairs you provide. Each entry should follow alias => replacement.',\r\n    examples: ['st => Street', 'rd => Road'],\r\n  },\r\n};\r\n\r\nexport type AliasModeDetails = {\r\n  mode: AliasMode;\r\n  label: string;\r\n  guidance: string;\r\n  examples: string[];\r\n};\r\n\r\nexport type AliasModeOption = {\r\n  value: AliasMode;\r\n  label: string;\r\n};\r\n\r\nexport const ALIAS_MODE_OPTIONS: AliasModeOption[] = ALIAS_MODES.map((mode) => ({\r\n  value: mode,\r\n  label: MODE_METADATA[mode]?.label ?? mode,\r\n}));\r\n\r\nexport type AliasStrategyConfig = {\r\n  mode: AliasMode;\r\n  columns: string[];\r\n  autoDetect: boolean;\r\n};\r\n\r\ntype AliasStrategyFallback = {\r\n  mode: AliasMode;\r\n  columns: string[];\r\n  autoDetect: boolean;\r\n};\r\n\r\nconst TRUE_TOKEN_SET = new Set(['true', '1', 'yes', 'y', 'on']);\r\nconst FALSE_TOKEN_SET = new Set(['false', '0', 'no', 'n', 'off']);\r\n\r\nconst coerceBooleanLike = (value: unknown, fallback: boolean): boolean => {\r\n  if (typeof value === 'boolean') {\r\n    return value;\r\n  }\r\n  if (typeof value === 'number') {\r\n    if (!Number.isFinite(value)) {\r\n      return fallback;\r\n    }\r\n    if (value === 1) {\r\n      return true;\r\n    }\r\n    if (value === 0) {\r\n      return false;\r\n    }\r\n    return fallback;\r\n  }\r\n  if (typeof value === 'string') {\r\n    const normalized = value.trim().toLowerCase();\r\n    if (!normalized) {\r\n      return fallback;\r\n    }\r\n    if (TRUE_TOKEN_SET.has(normalized)) {\r\n      return true;\r\n    }\r\n    if (FALSE_TOKEN_SET.has(normalized)) {\r\n      return false;\r\n    }\r\n  }\r\n  return fallback;\r\n};\r\n\r\nconst coerceColumnList = (value: unknown): string[] => {\r\n  if (Array.isArray(value)) {\r\n    return Array.from(\r\n      new Set(\r\n        value\r\n          .map((entry) => (typeof entry === 'string' ? entry.trim() : String(entry ?? '').trim()))\r\n          .filter((entry) => entry.length > 0)\r\n      )\r\n    ).sort((a, b) => a.localeCompare(b));\r\n  }\r\n  if (typeof value === 'string') {\r\n    return coerceColumnList(value.split(','));\r\n  }\r\n  return [];\r\n};\r\n\r\nconst normalizeAliasStrategy = (\r\n  raw: unknown,\r\n  fallback: AliasStrategyFallback,\r\n): AliasStrategyConfig | null => {\r\n  if (!raw || typeof raw !== 'object') {\r\n    return null;\r\n  }\r\n  const entry = raw as Record<string, unknown>;\r\n  const columns = coerceColumnList(entry.columns);\r\n  const autoDetect = coerceBooleanLike(\r\n    entry.auto_detect ?? entry.autoDetect ?? entry.auto,\r\n    fallback.autoDetect,\r\n  );\r\n  const mode = resolveAliasMode(\r\n    typeof entry.mode === 'string' ? entry.mode : undefined,\r\n    fallback.mode,\r\n  );\r\n  if (!columns.length && !autoDetect) {\r\n    return null;\r\n  }\r\n  return {\r\n    mode,\r\n    columns,\r\n    autoDetect,\r\n  };\r\n};\r\n\r\nexport const normalizeAliasStrategies = (\r\n  raw: unknown,\r\n  fallback: AliasStrategyFallback,\r\n): AliasStrategyConfig[] => {\r\n  const sanitizedFallback: AliasStrategyConfig = {\r\n    mode: fallback.mode,\r\n    columns: coerceColumnList(fallback.columns),\r\n    autoDetect: Boolean(fallback.autoDetect),\r\n  };\r\n\r\n  if (!raw) {\r\n    if (!sanitizedFallback.columns.length && !sanitizedFallback.autoDetect) {\r\n      sanitizedFallback.autoDetect = true;\r\n    }\r\n    return [sanitizedFallback];\r\n  }\r\n\r\n  if (!Array.isArray(raw)) {\r\n    const single = normalizeAliasStrategy(raw, sanitizedFallback);\r\n    if (single) {\r\n      return [single];\r\n    }\r\n    return [sanitizedFallback];\r\n  }\r\n\r\n  const normalized: AliasStrategyConfig[] = [];\r\n  raw.forEach((entry) => {\r\n    const strategy = normalizeAliasStrategy(entry, sanitizedFallback);\r\n    if (strategy) {\r\n      normalized.push(strategy);\r\n    }\r\n  });\r\n\r\n  if (normalized.length === 0) {\r\n    if (!sanitizedFallback.columns.length && !sanitizedFallback.autoDetect) {\r\n      sanitizedFallback.autoDetect = true;\r\n    }\r\n    return [sanitizedFallback];\r\n  }\r\n\r\n  return normalized;\r\n};\r\n\r\nexport const serializeAliasStrategies = (\r\n  strategies: AliasStrategyConfig[],\r\n): Array<{ mode: AliasMode; columns: string[]; auto_detect: boolean }> =>\r\n  strategies.map((strategy) => ({\r\n    mode: strategy.mode,\r\n    columns: [...strategy.columns],\r\n    auto_detect: Boolean(strategy.autoDetect),\r\n  }));\r\n\r\nexport type AliasColumnSummary = {\r\n  selectedColumns: string[];\r\n  nonTextSelected: string[];\r\n  autoDetectionActive: boolean;\r\n  recommendedColumns: string[];\r\n  textColumnCount: number;\r\n  textColumns: string[];\r\n};\r\n\r\nexport type AliasCustomPairSummary = {\r\n  totalPairs: number;\r\n  previewPairs: string[];\r\n  previewOverflow: number;\r\n  duplicates: string[];\r\n  duplicateOverflow: number;\r\n  invalidEntries: string[];\r\n  invalidOverflow: number;\r\n};\r\n\r\nexport type AliasSampleMap = Record<string, string[]>;\r\n\r\nexport type AliasSamplePreview = {\r\n  column: string;\r\n  values: string[];\r\n  overflow: number;\r\n};\r\n\r\nexport type AliasColumnOption = {\r\n  name: string;\r\n  dtype: string | null | undefined;\r\n  samples: string[];\r\n  isRecommended: boolean;\r\n  isTextLike: boolean;\r\n};\r\n\r\nconst normalizeAliasKey = (value: string): string => value.replace(/[\\s\\W_]+/g, '').toLowerCase();\r\n\r\nconst truncateSampleValue = (value: string): string => {\r\n  if (value.length <= PREVIEW_SAMPLE_LENGTH) {\r\n    return value;\r\n  }\r\n  return `${value.slice(0, PREVIEW_SAMPLE_LENGTH - 1)}...`;\r\n};\r\n\r\nconst isAliasMode = (value: string): value is AliasMode => aliasModeSet.has(value);\r\n\r\nconst isTextLikeType = (dtype?: string | null): boolean => {\r\n  if (!dtype) {\r\n    return false;\r\n  }\r\n  const normalized = dtype.toLowerCase();\r\n  return TEXTUAL_TYPE_TOKENS.some((token) => normalized.includes(token));\r\n};\r\n\r\nexport const resolveAliasMode = (primary?: unknown, fallback?: unknown): AliasMode => {\r\n  const normalizedPrimary = typeof primary === 'string' ? primary.trim().toLowerCase() : '';\r\n  if (normalizedPrimary && isAliasMode(normalizedPrimary)) {\r\n    return normalizedPrimary;\r\n  }\r\n  const normalizedFallback = typeof fallback === 'string' ? fallback.trim().toLowerCase() : '';\r\n  if (normalizedFallback && isAliasMode(normalizedFallback)) {\r\n    return normalizedFallback;\r\n  }\r\n  return DEFAULT_ALIAS_MODE;\r\n};\r\n\r\nexport const getAliasModeDetails = (mode: AliasMode): AliasModeDetails => {\r\n  const metadata = MODE_METADATA[mode] ?? MODE_METADATA[DEFAULT_ALIAS_MODE];\r\n  return {\r\n    mode,\r\n    label: metadata.label,\r\n    guidance: metadata.guidance,\r\n    examples: metadata.examples,\r\n  };\r\n};\r\n\r\ntype BuildAliasColumnSummaryInput = {\r\n  selectedColumns: unknown;\r\n  availableColumns: string[];\r\n  columnTypeMap: Record<string, string>;\r\n  autoDetectEnabled?: boolean;\r\n};\r\n\r\nexport const buildAliasColumnSummary = ({\r\n  selectedColumns,\r\n  availableColumns,\r\n  columnTypeMap,\r\n  autoDetectEnabled,\r\n}: BuildAliasColumnSummaryInput): AliasColumnSummary => {\r\n  const uniqueSelected = Array.from(new Set(ensureArrayOfString(selectedColumns)));\r\n  const selectedSet = new Set(uniqueSelected);\r\n  const textColumns = availableColumns.filter((column) => isTextLikeType(columnTypeMap[column] ?? null));\r\n  const recommendedColumns = textColumns.filter((column) => !selectedSet.has(column));\r\n  const nonTextSelected = uniqueSelected.filter((column) => !isTextLikeType(columnTypeMap[column] ?? null));\r\n  const autoDetectionActive =\r\n    typeof autoDetectEnabled === 'boolean' ? autoDetectEnabled : uniqueSelected.length === 0;\r\n\r\n  return {\r\n    selectedColumns: uniqueSelected,\r\n    nonTextSelected,\r\n    autoDetectionActive,\r\n    recommendedColumns,\r\n    textColumnCount: textColumns.length,\r\n    textColumns,\r\n  };\r\n};\r\n\r\nconst ENTRY_SPLIT_REGEX = /[\\n;,]+/;\r\n\r\nconst formatPreviewList = (values: string[], limit: number): string[] => values.slice(0, limit);\r\n\r\nconst splitPairText = (text: string, delimiter: '=>' | ':'): [string, string] | null => {\r\n  const parts = text.split(delimiter);\r\n  if (parts.length < 2) {\r\n    return null;\r\n  }\r\n  const [alias, ...rest] = parts;\r\n  const replacement = rest.join(delimiter);\r\n  return [alias, replacement];\r\n};\r\n\r\nexport const parseCustomAliasPairs = (raw: unknown): AliasCustomPairSummary => {\r\n  if (!raw) {\r\n    return {\r\n      totalPairs: 0,\r\n      previewPairs: [],\r\n      previewOverflow: 0,\r\n      duplicates: [],\r\n      duplicateOverflow: 0,\r\n      invalidEntries: [],\r\n      invalidOverflow: 0,\r\n    };\r\n  }\r\n\r\n  const duplicates = new Set<string>();\r\n  const invalidEntries: string[] = [];\r\n  const previewPairs: string[] = [];\r\n  const seen = new Map<string, string>();\r\n  let totalPairs = 0;\r\n\r\n  const registerPair = (aliasRaw: unknown, replacementRaw: unknown) => {\r\n    const alias = String(aliasRaw ?? '').trim();\r\n    const replacement = String(replacementRaw ?? '').trim();\r\n    if (!alias || !replacement) {\r\n      if (alias || replacement) {\r\n        invalidEntries.push(`${alias} => ${replacement}`.trim());\r\n      }\r\n      return;\r\n    }\r\n    const normalized = normalizeAliasKey(alias);\r\n    if (!normalized) {\r\n      invalidEntries.push(`${alias} => ${replacement}`);\r\n      return;\r\n    }\r\n    if (seen.has(normalized)) {\r\n      duplicates.add(alias);\r\n    } else {\r\n      seen.set(normalized, replacement);\r\n      if (previewPairs.length < PREVIEW_PAIR_LIMIT) {\r\n        previewPairs.push(`${alias} => ${replacement}`);\r\n      }\r\n    }\r\n    totalPairs += 1;\r\n  };\r\n\r\n  if (typeof raw === 'string') {\r\n    const entries = raw.split(ENTRY_SPLIT_REGEX);\r\n    entries.forEach((entry) => {\r\n      const text = entry.trim();\r\n      if (!text) {\r\n        return;\r\n      }\r\n      if (text.includes('=>')) {\r\n        const parsed = splitPairText(text, '=>');\r\n        if (parsed) {\r\n          registerPair(parsed[0], parsed[1]);\r\n        } else {\r\n          invalidEntries.push(text);\r\n        }\r\n        return;\r\n      }\r\n      if (text.includes(':')) {\r\n        const parsed = splitPairText(text, ':');\r\n        if (parsed) {\r\n          registerPair(parsed[0], parsed[1]);\r\n        } else {\r\n          invalidEntries.push(text);\r\n        }\r\n        return;\r\n      }\r\n      invalidEntries.push(text);\r\n    });\r\n    const duplicateList = Array.from(duplicates);\r\n    const duplicatePreview = formatPreviewList(duplicateList, PREVIEW_WARNING_LIMIT);\r\n    const invalidPreview = formatPreviewList(invalidEntries, PREVIEW_WARNING_LIMIT);\r\n    return {\r\n      totalPairs,\r\n      previewPairs,\r\n      previewOverflow: Math.max(totalPairs - previewPairs.length, 0),\r\n      duplicates: duplicatePreview,\r\n      duplicateOverflow: Math.max(duplicateList.length - duplicatePreview.length, 0),\r\n      invalidEntries: invalidPreview,\r\n      invalidOverflow: Math.max(invalidEntries.length - invalidPreview.length, 0),\r\n    };\r\n  }\r\n\r\n  if (Array.isArray(raw)) {\r\n    raw.forEach((entry) => {\r\n      if (!entry) {\r\n        return;\r\n      }\r\n      if (typeof entry === 'string') {\r\n        const text = entry.trim();\r\n        if (!text) {\r\n          return;\r\n        }\r\n        if (text.includes('=>')) {\r\n          const parsed = splitPairText(text, '=>');\r\n          if (parsed) {\r\n            registerPair(parsed[0], parsed[1]);\r\n          } else {\r\n            invalidEntries.push(text);\r\n          }\r\n        } else if (text.includes(':')) {\r\n          const parsed = splitPairText(text, ':');\r\n          if (parsed) {\r\n            registerPair(parsed[0], parsed[1]);\r\n          } else {\r\n            invalidEntries.push(text);\r\n          }\r\n        } else {\r\n          invalidEntries.push(text);\r\n        }\r\n        return;\r\n      }\r\n      if (typeof entry === 'object') {\r\n        const { alias, replacement } = entry as { alias?: unknown; replacement?: unknown };\r\n        registerPair(alias, replacement);\r\n        return;\r\n      }\r\n      invalidEntries.push(String(entry));\r\n    });\r\n    const duplicateList = Array.from(duplicates);\r\n    const duplicatePreview = formatPreviewList(duplicateList, PREVIEW_WARNING_LIMIT);\r\n    const invalidPreview = formatPreviewList(invalidEntries, PREVIEW_WARNING_LIMIT);\r\n    return {\r\n      totalPairs,\r\n      previewPairs,\r\n      previewOverflow: Math.max(totalPairs - previewPairs.length, 0),\r\n      duplicates: duplicatePreview,\r\n      duplicateOverflow: Math.max(duplicateList.length - duplicatePreview.length, 0),\r\n      invalidEntries: invalidPreview,\r\n      invalidOverflow: Math.max(invalidEntries.length - invalidPreview.length, 0),\r\n    };\r\n  }\r\n\r\n  if (typeof raw === 'object') {\r\n    Object.entries(raw as Record<string, unknown>).forEach(([alias, replacement]) => {\r\n      registerPair(alias, replacement);\r\n    });\r\n  }\r\n\r\n  const duplicateList = Array.from(duplicates);\r\n  const duplicatePreview = formatPreviewList(duplicateList, PREVIEW_WARNING_LIMIT);\r\n  const invalidPreview = formatPreviewList(invalidEntries, PREVIEW_WARNING_LIMIT);\r\n  return {\r\n    totalPairs,\r\n    previewPairs,\r\n    previewOverflow: Math.max(totalPairs - previewPairs.length, 0),\r\n    duplicates: duplicatePreview,\r\n    duplicateOverflow: Math.max(duplicateList.length - duplicatePreview.length, 0),\r\n    invalidEntries: invalidPreview,\r\n    invalidOverflow: Math.max(invalidEntries.length - invalidPreview.length, 0),\r\n  };\r\n};\r\n\r\nexport const summarizeRecommendedColumns = (columns: string[]): { preview: string[]; remaining: number } => {\r\n  const preview = columns.slice(0, PREVIEW_COLUMN_LIMIT);\r\n  return {\r\n    preview,\r\n    remaining: Math.max(columns.length - preview.length, 0),\r\n  };\r\n};\r\n\r\nexport const summarizeNonTextColumns = (columns: string[]): { preview: string[]; remaining: number } => {\r\n  const preview = columns.slice(0, PREVIEW_WARNING_LIMIT);\r\n  return {\r\n    preview,\r\n    remaining: Math.max(columns.length - preview.length, 0),\r\n  };\r\n};\r\n\r\nconst formatSampleValue = (value: unknown): string | null => {\r\n  if (value === null || value === undefined) {\r\n    return null;\r\n  }\r\n  if (typeof value === 'number') {\r\n    if (!Number.isFinite(value)) {\r\n      return null;\r\n    }\r\n    return truncateSampleValue(String(value));\r\n  }\r\n  if (typeof value === 'boolean') {\r\n    return value ? 'True' : 'False';\r\n  }\r\n  if (typeof value === 'string') {\r\n    const trimmed = value.trim();\r\n    if (!trimmed) {\r\n      return null;\r\n    }\r\n    return truncateSampleValue(trimmed);\r\n  }\r\n  try {\r\n    const serialized = JSON.stringify(value);\r\n    if (!serialized) {\r\n      return null;\r\n    }\r\n    return truncateSampleValue(serialized);\r\n  } catch (error) {\r\n    return truncateSampleValue(String(value));\r\n  }\r\n};\r\n\r\nexport const buildAliasSampleMap = (\r\n  rows: Array<Record<string, unknown>>,\r\n  limit = PREVIEW_SAMPLE_LIMIT,\r\n): AliasSampleMap => {\r\n  if (!Array.isArray(rows) || !rows.length) {\r\n    return {};\r\n  }\r\n  const map: AliasSampleMap = {};\r\n  rows.forEach((row) => {\r\n    if (!row || typeof row !== 'object') {\r\n      return;\r\n    }\r\n    Object.entries(row).forEach(([rawColumn, rawValue]) => {\r\n      const column = typeof rawColumn === 'string' ? rawColumn.trim() : '';\r\n      if (!column) {\r\n        return;\r\n      }\r\n      const formatted = formatSampleValue(rawValue);\r\n      if (!formatted) {\r\n        return;\r\n      }\r\n      const current = map[column] ?? [];\r\n      if (current.includes(formatted)) {\r\n        return;\r\n      }\r\n      if (current.length >= limit) {\r\n        return;\r\n      }\r\n      map[column] = [...current, formatted];\r\n    });\r\n  });\r\n  return map;\r\n};\r\n\r\nexport const summarizeAliasSamples = (\r\n  sampleMap: AliasSampleMap,\r\n  columns: string[],\r\n  limit = PREVIEW_COLUMN_SAMPLE_LIMIT,\r\n): AliasSamplePreview[] => {\r\n  if (!columns.length) {\r\n    return [];\r\n  }\r\n  const previews: AliasSamplePreview[] = [];\r\n  for (const column of columns) {\r\n    if (previews.length >= limit) {\r\n      break;\r\n    }\r\n    const samples = sampleMap[column];\r\n    if (!samples || !samples.length) {\r\n      continue;\r\n    }\r\n    previews.push({\r\n      column,\r\n      values: samples,\r\n      overflow: 0,\r\n    });\r\n  }\r\n  return previews;\r\n};\r\n","import React, { useCallback, useEffect, useMemo, useState } from 'react';\r\nimport type { FeatureNodeParameter } from '../../../../api';\r\nimport {\r\n  ALIAS_MODE_OPTIONS,\r\n  type AliasColumnOption,\r\n  type AliasColumnSummary,\r\n  type AliasCustomPairSummary,\r\n  type AliasMode,\r\n  type AliasModeOption,\r\n  type AliasSampleMap,\r\n  type AliasStrategyConfig,\r\n  getAliasModeDetails,\r\n  summarizeAliasSamples,\r\n  summarizeNonTextColumns,\r\n  summarizeRecommendedColumns,\r\n} from './replaceAliasesSettings';\r\n\r\nconst normalizePreviewToken = (value: string): string => value.replace(/[^0-9a-zA-Z]+/g, '').toLowerCase();\r\n\r\nconst COUNTRY_ALIAS_PREVIEW: Array<[string, string]> = [\r\n  ['UK', 'United Kingdom'],\r\n  ['UAE', 'United Arab Emirates'],\r\n  ['USA', 'United States'],\r\n  ['PRC', 'China'],\r\n  ['KSA', 'Saudi Arabia'],\r\n  ['Brasil', 'Brazil'],\r\n];\r\n\r\nconst COUNTRY_ALIAS_HINTS = new Set<string>([\r\n  'us',\r\n  'usa',\r\n  'unitedstates',\r\n  'unitedstatesofamerica',\r\n  'uk',\r\n  'unitedkingdom',\r\n  'greatbritain',\r\n  'england',\r\n  'uae',\r\n  'unitedarabemirates',\r\n  'prc',\r\n  'china',\r\n  'southkorea',\r\n  'republicofkorea',\r\n  'ksa',\r\n  'saudiarabia',\r\n  'brasil',\r\n  'brazil',\r\n  'de',\r\n  'germany',\r\n  'fr',\r\n  'france',\r\n  'es',\r\n  'spain',\r\n  'ca',\r\n  'canada',\r\n  'mx',\r\n  'mexico',\r\n  'country',\r\n  'state',\r\n  'province',\r\n]);\r\n\r\nCOUNTRY_ALIAS_PREVIEW.forEach((pair) => {\r\n  pair.forEach((token) => COUNTRY_ALIAS_HINTS.add(normalizePreviewToken(token)));\r\n});\r\n\r\nconst BOOLEAN_ALIAS_PREVIEW: Array<[string, string]> = [\r\n  ['Y', 'Yes'],\r\n  ['1', 'Yes'],\r\n  ['ON', 'Yes'],\r\n  ['N', 'No'],\r\n  ['0', 'No'],\r\n  ['OFF', 'No'],\r\n];\r\n\r\nconst BOOLEAN_ALIAS_HINTS = new Set<string>([\r\n  'yes',\r\n  'y',\r\n  'true',\r\n  't',\r\n  '1',\r\n  'on',\r\n  'enable',\r\n  'enabled',\r\n  'no',\r\n  'n',\r\n  'false',\r\n  'f',\r\n  '0',\r\n  'off',\r\n  'disable',\r\n  'disabled',\r\n  'active',\r\n  'inactive',\r\n  'flag',\r\n]);\r\n\r\nBOOLEAN_ALIAS_PREVIEW.forEach((pair) => {\r\n  pair.forEach((token) => BOOLEAN_ALIAS_HINTS.add(normalizePreviewToken(token)));\r\n});\r\n\r\nconst PUNCTUATION_ALIAS_PREVIEW: Array<[string, string]> = [\r\n  ['C.R.M.', 'CRM'],\r\n  ['Part - Time', 'Part Time'],\r\n  ['end-to-end', 'end to end'],\r\n];\r\n\r\nconst COUNTRY_CODE_REGEX = /^[A-Za-z]{2,3}$/;\r\nconst PUNCTUATION_REGEX = /[^0-9A-Za-z\\s]/;\r\nconst TOKEN_SPLIT_REGEX = /[^0-9A-Za-z]+/;\r\n\r\nconst MODE_REFERENCE_INFO: Record<\r\n  AliasMode,\r\n  {\r\n    title: string;\r\n    description: string;\r\n    preview?: Array<[string, string]>;\r\n  }\r\n> = {\r\n  canonicalize_country_codes: {\r\n    title: 'Country alias map',\r\n    description: 'Common country abbreviations resolve to canonical names or ISO codes.',\r\n    preview: COUNTRY_ALIAS_PREVIEW,\r\n  },\r\n  normalize_boolean: {\r\n    title: 'Boolean token map',\r\n    description: 'Typical yes / no style values are standardized.',\r\n    preview: BOOLEAN_ALIAS_PREVIEW,\r\n  },\r\n  punctuation: {\r\n    title: 'Punctuation cleanup',\r\n    description: 'Removes punctuation and condenses whitespace for easier matching.',\r\n    preview: PUNCTUATION_ALIAS_PREVIEW,\r\n  },\r\n  custom: {\r\n    title: 'Custom mappings',\r\n    description: 'Define your own alias => replacement pairs below.',\r\n  },\r\n};\r\n\r\nconst collectTokens = (samples: string[]): string[] => {\r\n  const tokens: string[] = [];\r\n  samples.forEach((sample) => {\r\n    const pieces = sample.split(TOKEN_SPLIT_REGEX).filter(Boolean);\r\n    pieces.forEach((piece) => {\r\n      tokens.push(piece);\r\n    });\r\n  });\r\n  return tokens;\r\n};\r\n\r\nconst hasModeAffinity = (mode: AliasMode, samples: string[]): boolean => {\r\n  if (!samples.length) {\r\n    return false;\r\n  }\r\n  if (mode === 'punctuation') {\r\n    return samples.some((value) => PUNCTUATION_REGEX.test(value));\r\n  }\r\n\r\n  const tokens = collectTokens(samples).map((token) => normalizePreviewToken(token));\r\n  if (!tokens.length) {\r\n    return false;\r\n  }\r\n\r\n  if (mode === 'canonicalize_country_codes') {\r\n    return tokens.some((token) => COUNTRY_ALIAS_HINTS.has(token)) || samples.some((sample) => COUNTRY_CODE_REGEX.test(sample.trim()));\r\n  }\r\n\r\n  if (mode === 'normalize_boolean') {\r\n    return tokens.some((token) => BOOLEAN_ALIAS_HINTS.has(token));\r\n  }\r\n\r\n  return false;\r\n};\r\n\r\nexport type ReplaceAliasesSectionProps = {\r\n  hasSource: boolean;\r\n  hasReachableSource: boolean;\r\n  strategies: AliasStrategyConfig[];\r\n  columnSummary: AliasColumnSummary;\r\n  columnOptions: AliasColumnOption[];\r\n  sampleMap: AliasSampleMap;\r\n  modeOptions?: AliasModeOption[];\r\n  customPairSummary: AliasCustomPairSummary;\r\n  customPairsParameter: FeatureNodeParameter | null;\r\n  collapsedStrategies: Set<number>;\r\n  onToggleStrategy: (index: number) => void;\r\n  onRemoveStrategy: (index: number) => void;\r\n  onAddStrategy: () => void;\r\n  onModeChange: (index: number, mode: AliasMode) => void;\r\n  onAutoDetectToggle: (index: number, enabled: boolean) => void;\r\n  onColumnToggle: (index: number, column: string) => void;\r\n  onColumnsChange: (index: number, value: string) => void;\r\n  renderParameterField: (parameter: FeatureNodeParameter) => React.ReactNode;\r\n};\r\n\r\nconst formatSamplePreview = (samples: string[]): string | null => {\r\n  if (!samples.length) {\r\n    return null;\r\n  }\r\n  const preview = samples.slice(0, 3);\r\n  const overflow = samples.length - preview.length;\r\n  return overflow > 0 ? `${preview.join(', ')} ...` : preview.join(', ');\r\n};\r\n\r\nexport const ReplaceAliasesSection: React.FC<ReplaceAliasesSectionProps> = ({\r\n  hasSource,\r\n  hasReachableSource,\r\n  strategies,\r\n  columnSummary,\r\n  columnOptions,\r\n  sampleMap,\r\n  modeOptions = ALIAS_MODE_OPTIONS,\r\n  customPairSummary,\r\n  customPairsParameter,\r\n  collapsedStrategies,\r\n  onToggleStrategy,\r\n  onRemoveStrategy,\r\n  onAddStrategy,\r\n  onModeChange,\r\n  onAutoDetectToggle,\r\n  onColumnToggle,\r\n  onColumnsChange,\r\n  renderParameterField,\r\n}) => {\r\n  const hasStrategies = strategies.length > 0;\r\n  const selectedCount = columnSummary.selectedColumns.length;\r\n  const recommendedSummary = useMemo(\r\n    () => summarizeRecommendedColumns(columnSummary.recommendedColumns),\r\n    [columnSummary.recommendedColumns],\r\n  );\r\n  const nonTextSummary = useMemo(\r\n    () => summarizeNonTextColumns(columnSummary.nonTextSelected),\r\n    [columnSummary.nonTextSelected],\r\n  );\r\n  const samplePreviews = useMemo(\r\n    () => summarizeAliasSamples(sampleMap, columnSummary.selectedColumns),\r\n    [columnSummary.selectedColumns, sampleMap],\r\n  );\r\n  const disconnectedWarning = !hasSource || !hasReachableSource;\r\n\r\n  const duplicateCount = customPairSummary.duplicates.length + customPairSummary.duplicateOverflow;\r\n  const invalidCount = customPairSummary.invalidEntries.length + customPairSummary.invalidOverflow;\r\n  const duplicatePreviewText = customPairSummary.duplicates.join(', ');\r\n  const invalidPreviewText = customPairSummary.invalidEntries.join(', ');\r\n\r\n  const hasCustomStrategy = useMemo(\r\n    () => strategies.some((strategy) => strategy.mode === 'custom'),\r\n    [strategies],\r\n  );\r\n\r\n  const columnUsage = useMemo(() => {\r\n    const usage = new Map<string, number>();\r\n    strategies.forEach((strategy) => {\r\n      strategy.columns.forEach((column) => {\r\n        const normalized = column.trim();\r\n        if (!normalized) {\r\n          return;\r\n        }\r\n        usage.set(normalized, (usage.get(normalized) ?? 0) + 1);\r\n      });\r\n    });\r\n    return usage;\r\n  }, [strategies]);\r\n\r\n  const [expandedColumnLists, setExpandedColumnLists] = useState<Set<number>>(() => new Set());\r\n\r\n  const toggleAdditionalColumns = useCallback((index: number) => {\r\n    setExpandedColumnLists((previous) => {\r\n      const next = new Set(previous);\r\n      if (next.has(index)) {\r\n        next.delete(index);\r\n      } else {\r\n        next.add(index);\r\n      }\r\n      return next;\r\n    });\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    setExpandedColumnLists((previous) => {\r\n      const next = new Set<number>();\r\n      previous.forEach((value) => {\r\n        if (value < strategies.length) {\r\n          next.add(value);\r\n        }\r\n      });\r\n      return next.size === previous.size ? previous : next;\r\n    });\r\n  }, [strategies.length]);\r\n\r\n  const [modePreview, setModePreview] = useState<{ index: number | null; mode: AliasMode | null }>(\r\n    () => ({ index: null, mode: null }),\r\n  );\r\n\r\n  const columnSamples = useMemo(() => {\r\n    const cache = new Map<string, string[]>();\r\n    columnOptions.forEach((option) => {\r\n      const baseSamples = Array.isArray(option.samples) ? option.samples : [];\r\n      const extended = Array.isArray(sampleMap[option.name]) ? sampleMap[option.name] : [];\r\n      const combined = [...baseSamples, ...extended]\r\n        .map((entry) => String(entry ?? '').trim())\r\n        .filter((entry) => entry.length > 0);\r\n      cache.set(option.name, combined.slice(0, 12));\r\n    });\r\n    return cache;\r\n  }, [columnOptions, sampleMap]);\r\n\r\n  const modeColumnAffinity = useMemo(() => {\r\n    const affinity = new Map<AliasMode, Set<string>>();\r\n    columnOptions.forEach((option) => {\r\n      const samples = columnSamples.get(option.name) ?? [];\r\n      const inspectionSamples = samples.length ? samples : [option.name];\r\n      (['canonicalize_country_codes', 'normalize_boolean', 'punctuation'] as AliasMode[]).forEach((mode) => {\r\n        if (hasModeAffinity(mode, inspectionSamples)) {\r\n          if (!affinity.has(mode)) {\r\n            affinity.set(mode, new Set());\r\n          }\r\n          affinity.get(mode)!.add(option.name);\r\n        }\r\n      });\r\n    });\r\n    return affinity;\r\n  }, [columnOptions, columnSamples]);\r\n\r\n  useEffect(() => {\r\n    if (modePreview.index === null) {\r\n      return;\r\n    }\r\n    const active = strategies[modePreview.index];\r\n    if (!active || active.mode !== modePreview.mode) {\r\n      setModePreview({ index: null, mode: null });\r\n    }\r\n  }, [modePreview.index, modePreview.mode, strategies]);\r\n\r\n  const handleOpenModePreview = useCallback((index: number, mode: AliasMode) => {\r\n    setModePreview({ index, mode });\r\n  }, []);\r\n\r\n  const handleCloseModePreview = useCallback(() => {\r\n    setModePreview({ index: null, mode: null });\r\n  }, []);\r\n\r\n  let customPairsRendered = false;\r\n\r\n  return (\r\n    <section className=\"canvas-modal__section\">\r\n      <div className=\"canvas-modal__section-header\">\r\n        <h3>Alias cleanup strategies</h3>\r\n        <div className=\"canvas-modal__section-actions\">\r\n          <button type=\"button\" className=\"btn btn-outline-secondary\" onClick={onAddStrategy}>\r\n            Add strategy\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {columnSummary.autoDetectionActive ? (\r\n        <p className=\"canvas-modal__note\">\r\n          Auto-detect is enabled; any remaining text-like columns will be swept into the strategies when this node runs.\r\n        </p>\r\n      ) : (\r\n        <p className=\"canvas-modal__note\">\r\n          Targeting <strong>{selectedCount}</strong> column{selectedCount === 1 ? '' : 's'} across all strategies.\r\n        </p>\r\n      )}\r\n\r\n      {samplePreviews.length > 0 && (\r\n        <p className=\"canvas-modal__note\">\r\n          Samples: {samplePreviews.map((preview) => `${preview.column} (${preview.values.join(', ')})`).join('; ')}.\r\n        </p>\r\n      )}\r\n\r\n      {columnSummary.textColumnCount > 0 && recommendedSummary.preview.length > 0 && (\r\n        <p className=\"canvas-modal__note\">\r\n          Other text columns: {recommendedSummary.preview.join(', ')}\r\n          {recommendedSummary.remaining > 0 ? `, ... (${recommendedSummary.remaining} more)` : ''}.\r\n        </p>\r\n      )}\r\n\r\n      {nonTextSummary.preview.length > 0 && (\r\n        <p className=\"canvas-modal__note canvas-modal__note--warning\">\r\n          {nonTextSummary.preview.join(', ')} {nonTextSummary.preview.length === 1 ? 'is' : 'are'} not text-like.\r\n          {nonTextSummary.remaining > 0\r\n            ? ` ${nonTextSummary.remaining} more column${nonTextSummary.remaining === 1 ? ' is' : 's are'} also non-text.`\r\n            : ' Remove them or double-check the data.'}\r\n        </p>\r\n      )}\r\n\r\n      {disconnectedWarning ? (\r\n        !hasSource ? (\r\n          <p className=\"canvas-modal__note canvas-modal__note--warning\">\r\n            Select a dataset to load available columns for alias cleanup.\r\n          </p>\r\n        ) : (\r\n          <p className=\"canvas-modal__note canvas-modal__note--warning\">\r\n            Connect this node to an upstream output to inspect available columns.\r\n          </p>\r\n        )\r\n      ) : null}\r\n\r\n      {!hasStrategies && (\r\n        <p className=\"canvas-modal__note\">\r\n          No strategies configured yet. Combine presets (countries, booleans, punctuation) or add custom maps to standardize aliases.\r\n        </p>\r\n      )}\r\n\r\n      {hasStrategies && (\r\n        <div className=\"canvas-imputer__list\">\r\n          {strategies.map((strategy, index) => {\r\n            const modeDetails = getAliasModeDetails(strategy.mode);\r\n            const modeLabel =\r\n              modeOptions.find((option) => option.value === strategy.mode)?.label ?? modeDetails.label;\r\n            const columnCount = strategy.columns.length;\r\n            const columnSummaryLabel = columnCount\r\n              ? `${columnCount} column${columnCount === 1 ? '' : 's'}`\r\n              : strategy.autoDetect\r\n                ? 'Auto-detecting columns'\r\n                : 'No columns yet';\r\n            const isCollapsed = collapsedStrategies.has(index);\r\n            const isOtherExpanded = expandedColumnLists.has(index);\r\n            const columnsValue = strategy.columns.join(', ');\r\n            const affinityColumns = modeColumnAffinity.get(strategy.mode) ?? new Set<string>();\r\n            const showCustomPairsField =\r\n              strategy.mode === 'custom' && Boolean(customPairsParameter) && !customPairsRendered;\r\n            const showCustomPairsNotice =\r\n              strategy.mode === 'custom' && Boolean(customPairsParameter) && customPairsRendered;\r\n\r\n            if (showCustomPairsField) {\r\n              customPairsRendered = true;\r\n            }\r\n\r\n            const sortedOptions = columnOptions\r\n              .map((option) => {\r\n                const isSelected = strategy.columns.includes(option.name);\r\n                const hasAffinity = affinityColumns.has(option.name);\r\n                const priority = isSelected\r\n                  ? 0\r\n                  : hasAffinity\r\n                    ? 1\r\n                    : option.isRecommended\r\n                      ? 2\r\n                      : option.isTextLike\r\n                        ? 3\r\n                        : 4;\r\n                return { option, priority };\r\n              })\r\n              .sort((a, b) => {\r\n                if (a.priority !== b.priority) {\r\n                  return a.priority - b.priority;\r\n                }\r\n                return a.option.name.localeCompare(b.option.name);\r\n              })\r\n              .map((entry) => entry.option);\r\n\r\n            const hasAffinitySuggestions = affinityColumns.size > 0;\r\n            const primaryOptions = sortedOptions.filter((option) => {\r\n              if (strategy.columns.includes(option.name)) {\r\n                return true;\r\n              }\r\n              if (hasAffinitySuggestions) {\r\n                return affinityColumns.has(option.name);\r\n              }\r\n              return option.isRecommended || option.isTextLike;\r\n            });\r\n\r\n            const primarySet = new Set(primaryOptions.map((option) => option.name));\r\n            const otherOptions = sortedOptions.filter((option) => !primarySet.has(option.name));\r\n\r\n            return (\r\n              <div key={`alias-strategy-${index}`} className=\"canvas-imputer__card\">\r\n                <div className=\"canvas-imputer__card-header\">\r\n                  <button\r\n                    type=\"button\"\r\n                    className=\"canvas-imputer__card-toggle\"\r\n                    onClick={() => onToggleStrategy(index)}\r\n                    aria-expanded={!isCollapsed}\r\n                    aria-controls={`alias-strategy-body-${index}`}\r\n                  >\r\n                    <span\r\n                      className={`canvas-imputer__toggle-icon${\r\n                        isCollapsed ? '' : ' canvas-imputer__toggle-icon--open'\r\n                      }`}\r\n                      aria-hidden=\"true\"\r\n                    />\r\n                    <span className=\"canvas-imputer__card-text\">\r\n                      <span className=\"canvas-imputer__card-title\">Strategy {index + 1}</span>\r\n                      <span className=\"canvas-imputer__card-summary\">\r\n                        {modeLabel}\r\n                        {strategy.autoDetect ? '  auto-detect' : ''}\r\n                        {columnSummaryLabel ? `  ${columnSummaryLabel}` : ''}\r\n                      </span>\r\n                    </span>\r\n                  </button>\r\n                  <button\r\n                    type=\"button\"\r\n                    className=\"canvas-imputer__remove\"\r\n                    onClick={() => onRemoveStrategy(index)}\r\n                    aria-label={`Remove alias strategy ${index + 1}`}\r\n                  >\r\n                    Remove\r\n                  </button>\r\n                </div>\r\n                {!isCollapsed && (\r\n                  <div className=\"canvas-imputer__card-body\" id={`alias-strategy-body-${index}`}>\r\n                    <div className=\"canvas-imputer__row\">\r\n                      <label>Replacement strategy</label>\r\n                      <div className=\"canvas-imputer__mode-toggle\" role=\"radiogroup\" aria-label=\"Alias replacement strategy\">\r\n                        {modeOptions.map((option) => {\r\n                          const isActive = option.value === strategy.mode;\r\n                          return (\r\n                            <button\r\n                              key={option.value}\r\n                              type=\"button\"\r\n                              className={`btn btn-outline-secondary canvas-imputer__mode-button${\r\n                                isActive ? ' canvas-imputer__mode-button--active active' : ''\r\n                              }`}\r\n                              role=\"radio\"\r\n                              aria-checked={isActive}\r\n                              onClick={() => onModeChange(index, option.value)}\r\n                            >\r\n                              {option.label}\r\n                            </button>\r\n                          );\r\n                        })}\r\n                        <button\r\n                          type=\"button\"\r\n                          className=\"btn btn-link canvas-imputer__mode-info\"\r\n                          onClick={() => handleOpenModePreview(index, strategy.mode)}\r\n                        >\r\n                          View examples\r\n                        </button>\r\n                      </div>\r\n                      <p className=\"canvas-modal__meta\">{modeDetails.guidance}</p>\r\n                    </div>\r\n\r\n                    {modePreview.index === index && modePreview.mode === strategy.mode && (\r\n                      <div className=\"canvas-modal__note canvas-modal__note--info\">\r\n                        <div>\r\n                          <strong>{MODE_REFERENCE_INFO[strategy.mode].title}</strong>\r\n                          <button type=\"button\" className=\"btn btn-link\" onClick={handleCloseModePreview}>\r\n                            Close\r\n                          </button>\r\n                        </div>\r\n                        <p>{MODE_REFERENCE_INFO[strategy.mode].description}</p>\r\n                        {MODE_REFERENCE_INFO[strategy.mode].preview && (\r\n                          <ul>\r\n                            {MODE_REFERENCE_INFO[strategy.mode].preview!.map(([alias, mapped]) => (\r\n                              <li key={`${alias}-${mapped}`}>\r\n                                {alias} <span aria-hidden=\"true\">-&gt;</span> {mapped}\r\n                              </li>\r\n                            ))}\r\n                          </ul>\r\n                        )}\r\n                      </div>\r\n                    )}\r\n\r\n                    <div className=\"canvas-imputer__row\">\r\n                      <label htmlFor={`alias-strategy-${index}-auto-detect`}>Detection</label>\r\n                      <div className=\"canvas-modal__boolean-control\">\r\n                        <input\r\n                          id={`alias-strategy-${index}-auto-detect`}\r\n                          type=\"checkbox\"\r\n                          checked={strategy.autoDetect}\r\n                          onChange={(event) => onAutoDetectToggle(index, event.target.checked)}\r\n                        />\r\n                        <label htmlFor={`alias-strategy-${index}-auto-detect`}>\r\n                          Auto-detect additional text columns\r\n                        </label>\r\n                      </div>\r\n                      <p className=\"canvas-modal__note\">\r\n                        Detected text-like columns not assigned elsewhere will be appended to this strategy.\r\n                      </p>\r\n                    </div>\r\n\r\n                    <div className=\"canvas-imputer__row\">\r\n                      <label>Columns</label>\r\n                      {columnOptions.length ? (\r\n                        <>\r\n                          {affinityColumns.size > 0 && (\r\n                            <p className=\"canvas-modal__note\">\r\n                              Highlighting columns that resemble {modeLabel.toLowerCase()} entries.\r\n                            </p>\r\n                          )}\r\n                          {primaryOptions.length ? (\r\n                            <div\r\n                              className=\"canvas-imputer__columns-list\"\r\n                              role=\"listbox\"\r\n                              aria-label={`Columns assigned to alias strategy ${index + 1}`}\r\n                            >\r\n                              {primaryOptions.map((option) => {\r\n                                const isSelected = strategy.columns.includes(option.name);\r\n                                const preview = formatSamplePreview(\r\n                                  option.samples.length ? option.samples : sampleMap[option.name] ?? [],\r\n                                );\r\n                                const usageCount = columnUsage.get(option.name) ?? 0;\r\n                                const assignedElsewhere = usageCount - (isSelected ? 1 : 0) > 0;\r\n                                const hasAffinity = affinityColumns.has(option.name);\r\n                                return (\r\n                                  <button\r\n                                    key={option.name}\r\n                                    type=\"button\"\r\n                                    className={`canvas-imputer__column-pill${\r\n                                      isSelected ? ' canvas-imputer__column-pill--selected' : ''\r\n                                    }`}\r\n                                    onClick={() => onColumnToggle(index, option.name)}\r\n                                    aria-pressed={isSelected}\r\n                                  >\r\n                                    <span className=\"canvas-imputer__column-pill-name\">{option.name}</span>\r\n                                    <div className=\"canvas-imputer__column-pill-meta\">\r\n                                      {option.dtype && (\r\n                                        <span className=\"canvas-imputer__column-pill-dtype\">{option.dtype}</span>\r\n                                      )}\r\n                                      {option.isRecommended && <span className=\"canvas-modal__meta\">Suggested</span>}\r\n                                      {!option.isTextLike && <span className=\"canvas-modal__meta\">Non-text</span>}\r\n                                      {hasAffinity && <span className=\"canvas-modal__meta\">Likely match</span>}\r\n                                      {assignedElsewhere && <span className=\"canvas-modal__meta\">Used elsewhere</span>}\r\n                                    </div>\r\n                                    {preview && <span className=\"canvas-modal__meta\">e.g. {preview}</span>}\r\n                                  </button>\r\n                                );\r\n                              })}\r\n                            </div>\r\n                          ) : (\r\n                            <p className=\"canvas-modal__note\">\r\n                              No detected or selected columns yet. Expand other columns below to assign manually.\r\n                            </p>\r\n                          )}\r\n\r\n                          {otherOptions.length > 0 && (\r\n                            <div className=\"canvas-imputer__more-columns\">\r\n                              <button\r\n                                type=\"button\"\r\n                                className=\"btn btn-outline-secondary\"\r\n                                onClick={() => toggleAdditionalColumns(index)}\r\n                                aria-expanded={isOtherExpanded}\r\n                                aria-controls={`alias-strategy-${index}-other-columns`}\r\n                              >\r\n                                {isOtherExpanded\r\n                                  ? 'Hide other columns'\r\n                                  : `Show other columns (${otherOptions.length})`}\r\n                              </button>\r\n                              {isOtherExpanded && (\r\n                                <div\r\n                                  id={`alias-strategy-${index}-other-columns`}\r\n                                  className=\"canvas-imputer__columns-list\"\r\n                                  role=\"listbox\"\r\n                                  aria-label={`Other available columns for alias strategy ${index + 1}`}\r\n                                >\r\n                                  {otherOptions.map((option) => {\r\n                                    const isSelected = strategy.columns.includes(option.name);\r\n                                    const preview = formatSamplePreview(\r\n                                      option.samples.length ? option.samples : sampleMap[option.name] ?? [],\r\n                                    );\r\n                                    const usageCount = columnUsage.get(option.name) ?? 0;\r\n                                    const assignedElsewhere = usageCount - (isSelected ? 1 : 0) > 0;\r\n                                    const hasAffinity = affinityColumns.has(option.name);\r\n                                    return (\r\n                                      <button\r\n                                        key={option.name}\r\n                                        type=\"button\"\r\n                                        className={`canvas-imputer__column-pill${\r\n                                          isSelected ? ' canvas-imputer__column-pill--selected' : ''\r\n                                        }`}\r\n                                        onClick={() => onColumnToggle(index, option.name)}\r\n                                        aria-pressed={isSelected}\r\n                                      >\r\n                                        <span className=\"canvas-imputer__column-pill-name\">{option.name}</span>\r\n                                        <div className=\"canvas-imputer__column-pill-meta\">\r\n                                          {option.dtype && (\r\n                                            <span className=\"canvas-imputer__column-pill-dtype\">{option.dtype}</span>\r\n                                          )}\r\n                                          {!option.isTextLike && <span className=\"canvas-modal__meta\">Non-text</span>}\r\n                                          {hasAffinity && <span className=\"canvas-modal__meta\">Likely match</span>}\r\n                                          {assignedElsewhere && <span className=\"canvas-modal__meta\">Used elsewhere</span>}\r\n                                        </div>\r\n                                        {preview && <span className=\"canvas-modal__meta\">e.g. {preview}</span>}\r\n                                      </button>\r\n                                    );\r\n                                  })}\r\n                                </div>\r\n                              )}\r\n                            </div>\r\n                          )}\r\n                        </>\r\n                      ) : (\r\n                        <p className=\"canvas-modal__note\">\r\n                          No catalogued columns yet. Add column names manually below or enable auto-detect to populate this list.\r\n                        </p>\r\n                      )}\r\n                    </div>\r\n\r\n                    <div\r\n                      className={`canvas-imputer__selected${\r\n                        strategy.columns.length ? '' : ' canvas-imputer__selected--empty'\r\n                      }`}\r\n                      aria-live=\"polite\"\r\n                    >\r\n                      {strategy.columns.length ? (\r\n                        strategy.columns.map((column) => (\r\n                          <span key={column} className=\"canvas-imputer__selected-chip\">\r\n                            {column}\r\n                          </span>\r\n                        ))\r\n                      ) : (\r\n                        <span>No manual columns selected yet.</span>\r\n                      )}\r\n                    </div>\r\n\r\n                    <div className=\"canvas-imputer__row\">\r\n                      <label htmlFor={`alias-strategy-${index}-manual-columns`}>\r\n                        Manual columns (optional)\r\n                      </label>\r\n                      <input\r\n                        id={`alias-strategy-${index}-manual-columns`}\r\n                        type=\"text\"\r\n                        className=\"canvas-imputer__columns-input\"\r\n                        value={columnsValue}\r\n                        onChange={(event) => onColumnsChange(index, event.target.value)}\r\n                        placeholder=\"Add custom columns, separated by commas\"\r\n                      />\r\n                    </div>\r\n\r\n                    <p className=\"canvas-modal__note\">\r\n                      Tap suggestions to toggle columns. Manual entries let you set custom fields that are not listed above.\r\n                    </p>\r\n\r\n                    {strategy.mode === 'custom' && customPairsParameter && (\r\n                      <div className=\"canvas-imputer__row\">\r\n                        <label>Custom pairs</label>\r\n                        <p className=\"canvas-modal__meta\">\r\n                          Enter one alias =&gt; replacement per line. These mappings apply to every custom strategy in this node.\r\n                        </p>\r\n                        <div className=\"canvas-modal__parameter-list\">\r\n                          {showCustomPairsField\r\n                            ? renderParameterField(customPairsParameter)\r\n                            : showCustomPairsNotice\r\n                              ? (\r\n                                  <p className=\"canvas-modal__note\">\r\n                                    Edit the custom pairs above to update this strategy.\r\n                                  </p>\r\n                                )\r\n                              : null}\r\n                        </div>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                )}\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n      )}\r\n\r\n      {customPairSummary.totalPairs > 0 && (\r\n        <p className=\"canvas-modal__note\">\r\n          {customPairSummary.totalPairs} custom pair{customPairSummary.totalPairs === 1 ? '' : 's'} captured.\r\n          {hasCustomStrategy\r\n            ? ' They will be applied during execution.'\r\n            : ' Switch a strategy to Custom mappings to apply them.'}\r\n          {customPairSummary.previewPairs.length > 0\r\n            ? ` Examples: ${customPairSummary.previewPairs.join('; ')}${\r\n                customPairSummary.previewOverflow > 0 ? '...' : ''\r\n              }`\r\n            : ''}\r\n        </p>\r\n      )}\r\n\r\n      {customPairSummary.totalPairs === 0 && hasCustomStrategy && (\r\n        <p className=\"canvas-modal__note canvas-modal__note--warning\">\r\n          At least one strategy is set to Custom mappings, but no valid alias pairs were detected.\r\n        </p>\r\n      )}\r\n\r\n      {duplicateCount > 0 && (\r\n        <p className=\"canvas-modal__note canvas-modal__note--warning\">\r\n          Duplicate alias entries{duplicatePreviewText ? `: ${duplicatePreviewText}` : ''}\r\n          {customPairSummary.duplicateOverflow > 0 ? '...' : ''}. Only the first entry for each alias will be used.\r\n        </p>\r\n      )}\r\n\r\n      {invalidCount > 0 && (\r\n        <p className=\"canvas-modal__note canvas-modal__note--warning\">\r\n          Ignored {invalidCount} incomplete pair{invalidCount === 1 ? '' : 's'}.\r\n          {invalidPreviewText\r\n            ? ` Examples: ${invalidPreviewText}${customPairSummary.invalidOverflow > 0 ? '...' : ''}`\r\n            : ''}\r\n        </p>\r\n      )}\r\n    </section>\r\n  );\r\n};\r\n","import { ensureArrayOfString } from '../../sharedUtils';\r\n\r\nconst DATE_MODES = ['iso_date', 'iso_datetime', 'month_day_year', 'day_month_year'] as const;\r\n\r\nexport type DateMode = (typeof DATE_MODES)[number];\r\n\r\nexport const DEFAULT_DATE_MODE: DateMode = 'iso_date';\r\n\r\nconst DATE_TYPE_TOKENS = ['date', 'time', 'timestamp', 'datetime'];\r\n\r\nconst PREVIEW_COLUMN_LIMIT = 6;\r\nconst PREVIEW_WARNING_LIMIT = 4;\r\nconst PREVIEW_SAMPLE_LIMIT = 3;\r\nconst PREVIEW_SAMPLE_LENGTH = 36;\r\nconst PREVIEW_COLUMN_SAMPLE_LIMIT = 5;\r\n\r\nconst MODE_METADATA: Record<DateMode, { label: string; guidance: string; example: string }> = {\r\n  iso_date: {\r\n    label: 'ISO date',\r\n    guidance: 'Formats values as YYYY-MM-DD. Ideal for analytics layers expecting canonical dates.',\r\n    example: '2024-03-19',\r\n  },\r\n  iso_datetime: {\r\n    label: 'ISO datetime',\r\n    guidance: 'Preserves date and time with second precision (YYYY-MM-DD HH:MM:SS).',\r\n    example: '2024-03-19 14:05:42',\r\n  },\r\n  month_day_year: {\r\n    label: 'MM/DD/YYYY',\r\n    guidance: 'Aligns with US-style date formats. Use when downstream tooling expects month/day ordering.',\r\n    example: '03/19/2024',\r\n  },\r\n  day_month_year: {\r\n    label: 'DD/MM/YYYY',\r\n    guidance: 'Suitable for EU-style day-first formats.',\r\n    example: '19/03/2024',\r\n  },\r\n};\r\n\r\nexport type DateModeOption = {\r\n  value: DateMode;\r\n  label: string;\r\n  guidance: string;\r\n  example: string;\r\n};\r\n\r\nexport const DATE_MODE_OPTIONS: DateModeOption[] = DATE_MODES.map((mode) => ({\r\n  value: mode,\r\n  label: MODE_METADATA[mode].label,\r\n  guidance: MODE_METADATA[mode].guidance,\r\n  example: MODE_METADATA[mode].example,\r\n}));\r\n\r\nexport type DateModeDetails = {\r\n  mode: DateMode;\r\n  label: string;\r\n  guidance: string;\r\n  example: string;\r\n};\r\n\r\nexport type DateSampleMap = Record<string, string[]>;\r\n\r\nexport type DateSamplePreview = {\r\n  column: string;\r\n  values: string[];\r\n  overflow: number;\r\n};\r\n\r\nexport type DateColumnSummary = {\r\n  selectedColumns: string[];\r\n  autoDetectionActive: boolean;\r\n  recommendedColumns: string[];\r\n  nonDateSelected: string[];\r\n  dateColumnCount: number;\r\n  sampleCandidateCount: number;\r\n  sampleCandidates: string[];\r\n};\r\n\r\nexport type DateFormatStrategyConfig = {\r\n  mode: DateMode;\r\n  columns: string[];\r\n  autoDetect: boolean;\r\n};\r\n\r\nexport type DateColumnOption = {\r\n  name: string;\r\n  dtype?: string | null;\r\n  samples: string[];\r\n  isRecommended: boolean;\r\n  isSampleCandidate: boolean;\r\n};\r\n\r\ntype DateStrategyFallback = {\r\n  columns: string[];\r\n  mode: DateMode;\r\n  autoDetect: boolean;\r\n};\r\n\r\nconst DATE_SAMPLE_PATTERNS = [\r\n  /^\\d{4}[-\\/]\\d{1,2}[-\\/]\\d{1,2}/,\r\n  /^\\d{1,2}[-\\/]\\d{1,2}[-\\/]\\d{2,4}/,\r\n  /^[A-Za-z]{3,9}\\s+\\d{1,2},\\s*\\d{2,4}/,\r\n  /^\\d{1,2}\\s+[A-Za-z]{3,9}\\s+\\d{2,4}/,\r\n  /^\\d{4}\\d{2}\\d{2}$/,\r\n];\r\n\r\nconst truncateSampleValue = (value: string): string => {\r\n  if (value.length <= PREVIEW_SAMPLE_LENGTH) {\r\n    return value;\r\n  }\r\n  return `${value.slice(0, PREVIEW_SAMPLE_LENGTH - 1)}...`;\r\n};\r\n\r\nconst isDateLikeType = (dtype?: string | null): boolean => {\r\n  if (!dtype) {\r\n    return false;\r\n  }\r\n  const normalized = dtype.toLowerCase();\r\n  return DATE_TYPE_TOKENS.some((token) => normalized.includes(token));\r\n};\r\n\r\nconst matchesDatePattern = (value: string): boolean => DATE_SAMPLE_PATTERNS.some((pattern) => pattern.test(value));\r\n\r\nexport const resolveDateMode = (primary?: unknown, fallback?: unknown): DateMode => {\r\n  const normalizedPrimary = typeof primary === 'string' ? primary.trim().toLowerCase() : '';\r\n  if (normalizedPrimary && (DATE_MODES as readonly string[]).includes(normalizedPrimary)) {\r\n    return normalizedPrimary as DateMode;\r\n  }\r\n  const normalizedFallback = typeof fallback === 'string' ? fallback.trim().toLowerCase() : '';\r\n  if (normalizedFallback && (DATE_MODES as readonly string[]).includes(normalizedFallback)) {\r\n    return normalizedFallback as DateMode;\r\n  }\r\n  return DEFAULT_DATE_MODE;\r\n};\r\n\r\nexport const getDateModeDetails = (mode: DateMode): DateModeDetails => {\r\n  const metadata = MODE_METADATA[mode] ?? MODE_METADATA[DEFAULT_DATE_MODE];\r\n  return {\r\n    mode,\r\n    label: metadata.label,\r\n    guidance: metadata.guidance,\r\n    example: metadata.example,\r\n  };\r\n};\r\n\r\nconst analyzeSampleCandidates = (sampleMap: DateSampleMap): string[] => {\r\n  const candidates: string[] = [];\r\n  Object.entries(sampleMap).forEach(([column, values]) => {\r\n    if (!values || !values.length) {\r\n      return;\r\n    }\r\n    const total = values.length;\r\n    let matches = 0;\r\n    values.forEach((value) => {\r\n      if (matchesDatePattern(value)) {\r\n        matches += 1;\r\n      }\r\n    });\r\n    if (!total) {\r\n      return;\r\n    }\r\n    const share = matches / total;\r\n    if (share >= 0.6 && matches >= 2) {\r\n      candidates.push(column);\r\n    }\r\n  });\r\n  candidates.sort((a, b) => a.localeCompare(b));\r\n  return candidates;\r\n};\r\n\r\ntype BuildDateColumnSummaryInput = {\r\n  selectedColumns: unknown;\r\n  availableColumns: string[];\r\n  columnTypeMap: Record<string, string>;\r\n  sampleMap: DateSampleMap;\r\n};\r\n\r\nexport const buildDateColumnSummary = ({\r\n  selectedColumns,\r\n  availableColumns,\r\n  columnTypeMap,\r\n  sampleMap,\r\n}: BuildDateColumnSummaryInput): DateColumnSummary => {\r\n  const uniqueSelected = Array.from(new Set(ensureArrayOfString(selectedColumns)));\r\n  uniqueSelected.sort((a, b) => a.localeCompare(b));\r\n  const selectedSet = new Set(uniqueSelected);\r\n\r\n  const typeMatchedDates = availableColumns.filter((column) => isDateLikeType(columnTypeMap[column] ?? null));\r\n  const sampleCandidates = analyzeSampleCandidates(sampleMap);\r\n\r\n  const recommendedSet = new Set<string>();\r\n  typeMatchedDates.forEach((column) => {\r\n    if (!selectedSet.has(column)) {\r\n      recommendedSet.add(column);\r\n    }\r\n  });\r\n  sampleCandidates.forEach((column) => {\r\n    if (!selectedSet.has(column)) {\r\n      recommendedSet.add(column);\r\n    }\r\n  });\r\n\r\n  const recommendedColumns = Array.from(recommendedSet);\r\n  recommendedColumns.sort((a, b) => a.localeCompare(b));\r\n\r\n  const nonDateSelected = uniqueSelected.filter((column) => {\r\n    if (isDateLikeType(columnTypeMap[column] ?? null)) {\r\n      return false;\r\n    }\r\n    if (sampleCandidates.includes(column)) {\r\n      return false;\r\n    }\r\n    return true;\r\n  });\r\n\r\n  const sortedSampleCandidates = sampleCandidates.slice().sort((a, b) => a.localeCompare(b));\r\n\r\n  return {\r\n    selectedColumns: uniqueSelected,\r\n    autoDetectionActive: uniqueSelected.length === 0,\r\n    recommendedColumns,\r\n    nonDateSelected,\r\n    dateColumnCount: typeMatchedDates.length,\r\n    sampleCandidateCount: sampleCandidates.length,\r\n    sampleCandidates: sortedSampleCandidates,\r\n  };\r\n};\r\n\r\nconst normalizeDateMode = (value: unknown, fallback: DateMode): DateMode => {\r\n  const normalized = typeof value === 'string' ? value.trim().toLowerCase() : '';\r\n  if (normalized && (DATE_MODES as readonly string[]).includes(normalized)) {\r\n    return normalized as DateMode;\r\n  }\r\n  return fallback;\r\n};\r\n\r\nconst normalizeAutoDetect = (value: unknown): boolean => {\r\n  if (typeof value === 'boolean') {\r\n    return value;\r\n  }\r\n  if (typeof value === 'string') {\r\n    const normalized = value.trim().toLowerCase();\r\n    if (normalized === 'true' || normalized === '1' || normalized === 'yes') {\r\n      return true;\r\n    }\r\n    if (normalized === 'false' || normalized === '0' || normalized === 'no') {\r\n      return false;\r\n    }\r\n  }\r\n  if (typeof value === 'number') {\r\n    return value !== 0;\r\n  }\r\n  return false;\r\n};\r\n\r\nexport const normalizeDateFormatStrategies = (\r\n  value: any,\r\n  fallback: DateStrategyFallback,\r\n): DateFormatStrategyConfig[] => {\r\n  if (!Array.isArray(value)) {\r\n    if (fallback.columns.length || fallback.autoDetect) {\r\n      return [\r\n        {\r\n          mode: fallback.mode,\r\n          columns: [...fallback.columns],\r\n          autoDetect: fallback.autoDetect,\r\n        },\r\n      ];\r\n    }\r\n    return [];\r\n  }\r\n\r\n  const seen = new Set<string>();\r\n  const strategies: DateFormatStrategyConfig[] = value\r\n    .map((entry) => {\r\n      if (!entry || typeof entry !== 'object') {\r\n        return null;\r\n      }\r\n\r\n      const rawColumns = ensureArrayOfString((entry as Record<string, unknown>).columns);\r\n      const columns = Array.from(new Set(rawColumns.map((column) => column.trim()).filter(Boolean))).sort((a, b) =>\r\n        a.localeCompare(b),\r\n      );\r\n\r\n      const mode = normalizeDateMode((entry as Record<string, unknown>).mode, fallback.mode);\r\n      const autoDetect = normalizeAutoDetect(\r\n        (entry as Record<string, unknown>).auto_detect ??\r\n          (entry as Record<string, unknown>).autoDetect ??\r\n          (entry as Record<string, unknown>).auto,\r\n      );\r\n\r\n      const signature = `${mode}|${columns.join(',')}|${autoDetect ? 'auto' : 'manual'}`;\r\n      if (seen.has(signature)) {\r\n        return null;\r\n      }\r\n      seen.add(signature);\r\n\r\n      return {\r\n        mode,\r\n        columns,\r\n        autoDetect,\r\n      } as DateFormatStrategyConfig;\r\n    })\r\n    .filter((strategy): strategy is DateFormatStrategyConfig => Boolean(strategy));\r\n\r\n  if (strategies.length) {\r\n    return strategies;\r\n  }\r\n\r\n  if (fallback.columns.length || fallback.autoDetect) {\r\n    return [\r\n      {\r\n        mode: fallback.mode,\r\n        columns: [...fallback.columns],\r\n        autoDetect: fallback.autoDetect,\r\n      },\r\n    ];\r\n  }\r\n\r\n  return [];\r\n};\r\n\r\nexport const serializeDateFormatStrategies = (strategies: DateFormatStrategyConfig[]): any[] =>\r\n  strategies.map((strategy) => {\r\n    const payload: Record<string, any> = {\r\n      mode: strategy.mode,\r\n      columns: [...strategy.columns],\r\n    };\r\n    if (strategy.autoDetect) {\r\n      payload.auto_detect = true;\r\n    }\r\n    return payload;\r\n  });\r\n\r\nexport const formatDateModeLabel = (mode: DateMode): string => MODE_METADATA[mode]?.label ?? MODE_METADATA.iso_date.label;\r\n\r\nconst formatPreviewList = (values: string[], limit: number): string[] => values.slice(0, limit);\r\n\r\nexport const summarizeDateRecommendations = (columns: string[]): { preview: string[]; remaining: number } => {\r\n  const preview = formatPreviewList(columns, PREVIEW_COLUMN_LIMIT);\r\n  return {\r\n    preview,\r\n    remaining: Math.max(columns.length - preview.length, 0),\r\n  };\r\n};\r\n\r\nexport const summarizeNonDateSelections = (columns: string[]): { preview: string[]; remaining: number } => {\r\n  const preview = formatPreviewList(columns, PREVIEW_WARNING_LIMIT);\r\n  return {\r\n    preview,\r\n    remaining: Math.max(columns.length - preview.length, 0),\r\n  };\r\n};\r\n\r\nexport const summarizeCandidateColumns = (columns: string[]): { preview: string[]; remaining: number } => {\r\n  const preview = formatPreviewList(columns, PREVIEW_COLUMN_LIMIT);\r\n  return {\r\n    preview,\r\n    remaining: Math.max(columns.length - preview.length, 0),\r\n  };\r\n};\r\n\r\nconst formatSampleValue = (value: unknown): string | null => {\r\n  if (value === null || value === undefined) {\r\n    return null;\r\n  }\r\n  if (typeof value === 'number') {\r\n    if (!Number.isFinite(value)) {\r\n      return null;\r\n    }\r\n    return truncateSampleValue(String(value));\r\n  }\r\n  if (typeof value === 'boolean') {\r\n    return value ? 'True' : 'False';\r\n  }\r\n  const text = String(value).trim();\r\n  if (!text) {\r\n    return null;\r\n  }\r\n  return truncateSampleValue(text);\r\n};\r\n\r\nexport const buildDateSampleMap = (\r\n  rows: Array<Record<string, unknown>>,\r\n  limit = PREVIEW_SAMPLE_LIMIT,\r\n): DateSampleMap => {\r\n  if (!Array.isArray(rows) || !rows.length) {\r\n    return {};\r\n  }\r\n  const map: DateSampleMap = {};\r\n  rows.forEach((row) => {\r\n    if (!row || typeof row !== 'object') {\r\n      return;\r\n    }\r\n    Object.entries(row).forEach(([rawColumn, rawValue]) => {\r\n      const column = typeof rawColumn === 'string' ? rawColumn.trim() : '';\r\n      if (!column) {\r\n        return;\r\n      }\r\n      const formatted = formatSampleValue(rawValue);\r\n      if (!formatted) {\r\n        return;\r\n      }\r\n      const current = map[column] ?? [];\r\n      if (current.includes(formatted)) {\r\n        return;\r\n      }\r\n      if (current.length >= limit) {\r\n        return;\r\n      }\r\n      map[column] = [...current, formatted];\r\n    });\r\n  });\r\n  return map;\r\n};\r\n\r\nexport const summarizeDateSamples = (\r\n  sampleMap: DateSampleMap,\r\n  columns: string[],\r\n  limit = PREVIEW_COLUMN_SAMPLE_LIMIT,\r\n): DateSamplePreview[] => {\r\n  if (!columns.length) {\r\n    return [];\r\n  }\r\n  const previews: DateSamplePreview[] = [];\r\n  for (const column of columns) {\r\n    if (previews.length >= limit) {\r\n      break;\r\n    }\r\n    const samples = sampleMap[column];\r\n    if (!samples || !samples.length) {\r\n      continue;\r\n    }\r\n    previews.push({\r\n      column,\r\n      values: samples,\r\n      overflow: 0,\r\n    });\r\n  }\r\n  return previews;\r\n};\r\n\r\nexport const EMPTY_DATE_COLUMN_SUMMARY: DateColumnSummary = {\r\n  selectedColumns: [],\r\n  autoDetectionActive: true,\r\n  recommendedColumns: [],\r\n  nonDateSelected: [],\r\n  dateColumnCount: 0,\r\n  sampleCandidateCount: 0,\r\n  sampleCandidates: [],\r\n};\r\n","import React, { useMemo, useState, useCallback, useEffect } from 'react';\r\nimport type {\r\n  DateColumnOption,\r\n  DateColumnSummary,\r\n  DateFormatStrategyConfig,\r\n  DateMode,\r\n  DateModeOption,\r\n  DateSampleMap,\r\n} from './standardizeDateSettings';\r\nimport { DATE_MODE_OPTIONS, formatDateModeLabel } from './standardizeDateSettings';\r\n\r\nexport type StandardizeDatesSectionProps = {\r\n  hasSource: boolean;\r\n  hasReachableSource: boolean;\r\n  strategies: DateFormatStrategyConfig[];\r\n  columnSummary: DateColumnSummary;\r\n  columnOptions: DateColumnOption[];\r\n  sampleMap: DateSampleMap;\r\n  collapsedStrategies: Set<number>;\r\n  onToggleStrategy: (index: number) => void;\r\n  onRemoveStrategy: (index: number) => void;\r\n  onAddStrategy: () => void;\r\n  onModeChange: (index: number, mode: DateMode) => void;\r\n  onColumnToggle: (index: number, column: string) => void;\r\n  onColumnsChange: (index: number, value: string) => void;\r\n  onAutoDetectToggle: (index: number, enabled: boolean) => void;\r\n  modeOptions?: DateModeOption[];\r\n};\r\n\r\nconst formatSamplePreview = (samples: string[]): string | null => {\r\n  if (!samples.length) {\r\n    return null;\r\n  }\r\n  const preview = samples.slice(0, 3);\r\n  const overflow = samples.length - preview.length;\r\n  return overflow > 0 ? `${preview.join(', ')} ` : preview.join(', ');\r\n};\r\n\r\nexport const StandardizeDatesSection: React.FC<StandardizeDatesSectionProps> = ({\r\n  hasSource,\r\n  hasReachableSource,\r\n  strategies,\r\n  columnSummary,\r\n  columnOptions,\r\n  sampleMap,\r\n  collapsedStrategies,\r\n  onToggleStrategy,\r\n  onRemoveStrategy,\r\n  onAddStrategy,\r\n  onModeChange,\r\n  onColumnToggle,\r\n  onColumnsChange,\r\n  onAutoDetectToggle,\r\n  modeOptions = DATE_MODE_OPTIONS,\r\n}) => {\r\n  const hasStrategies = strategies.length > 0;\r\n  const autoDetectActive = useMemo(\r\n    () => strategies.some((strategy) => strategy.autoDetect),\r\n    [strategies],\r\n  );\r\n\r\n  const [expandedColumnLists, setExpandedColumnLists] = useState<Set<number>>(() => new Set());\r\n\r\n  const toggleAdditionalColumns = useCallback((index: number) => {\r\n    setExpandedColumnLists((previous) => {\r\n      const next = new Set(previous);\r\n      if (next.has(index)) {\r\n        next.delete(index);\r\n      } else {\r\n        next.add(index);\r\n      }\r\n      return next;\r\n    });\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    setExpandedColumnLists((previous) => {\r\n      const next = new Set<number>();\r\n      previous.forEach((value) => {\r\n        if (value < strategies.length) {\r\n          next.add(value);\r\n        }\r\n      });\r\n      return next.size === previous.size ? previous : next;\r\n    });\r\n  }, [strategies.length]);\r\n\r\n  const columnUsage = useMemo(() => {\r\n    const usage = new Map<string, number>();\r\n    strategies.forEach((strategy) => {\r\n      strategy.columns.forEach((column) => {\r\n        const normalized = column.trim();\r\n        if (!normalized) {\r\n          return;\r\n        }\r\n        usage.set(normalized, (usage.get(normalized) ?? 0) + 1);\r\n      });\r\n    });\r\n    return usage;\r\n  }, [strategies]);\r\n\r\n  const recommendedPreview = useMemo(() => {\r\n    const preview = columnSummary.recommendedColumns.slice(0, 6);\r\n    const remaining = Math.max(columnSummary.recommendedColumns.length - preview.length, 0);\r\n    return { preview, remaining };\r\n  }, [columnSummary.recommendedColumns]);\r\n\r\n  const nonDateSummary = useMemo(() => {\r\n    const preview = columnSummary.nonDateSelected.slice(0, 4);\r\n    const remaining = Math.max(columnSummary.nonDateSelected.length - preview.length, 0);\r\n    return { preview, remaining };\r\n  }, [columnSummary.nonDateSelected]);\r\n\r\n  const disconnectedWarning = !hasSource || !hasReachableSource;\r\n\r\n  return (\r\n    <section className=\"canvas-modal__section\">\r\n      <div className=\"canvas-modal__section-header\">\r\n        <h3>Date formatting strategies</h3>\r\n        <div className=\"canvas-modal__section-actions\">\r\n          <button type=\"button\" className=\"btn btn-outline-secondary\" onClick={onAddStrategy}>\r\n            Add strategy\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {disconnectedWarning && (\r\n        <p className=\"canvas-modal__note canvas-modal__note--warning\">\r\n          {hasSource\r\n            ? 'Connect this step to an upstream output to explore detected date columns.'\r\n            : 'Select a dataset to load column samples and suggestions.'}\r\n        </p>\r\n      )}\r\n\r\n      {recommendedPreview.preview.length > 0 && (\r\n        <p className=\"canvas-modal__note\">\r\n          Suggested columns: {recommendedPreview.preview.join(', ')}\r\n          {recommendedPreview.remaining > 0 ? `,  (${recommendedPreview.remaining} more)` : ''}.\r\n          {autoDetectActive\r\n            ? ' Auto-detect strategies will automatically include remaining date-like columns.'\r\n            : ''}\r\n        </p>\r\n      )}\r\n\r\n      {columnSummary.sampleCandidates.length === 0 && !recommendedPreview.preview.length && (\r\n        <p className=\"canvas-modal__note\">\r\n          No clear date candidates yet. Add columns manually or enable auto-detect to sweep for timestamps.\r\n        </p>\r\n      )}\r\n\r\n      {nonDateSummary.preview.length > 0 && (\r\n        <p className=\"canvas-modal__note canvas-modal__note--warning\">\r\n          {nonDateSummary.preview.join(', ')} {nonDateSummary.preview.length === 1 ? 'looks' : 'look'} non-date-like.\r\n          {nonDateSummary.remaining > 0\r\n            ? ` ${nonDateSummary.remaining} more selected column${nonDateSummary.remaining === 1 ? '' : 's'} may require double-checking.`\r\n            : ' Double-check that these values represent consistent dates.'}\r\n        </p>\r\n      )}\r\n\r\n      {autoDetectActive && (\r\n        <p className=\"canvas-modal__note\">\r\n          Auto-detect gathers from {columnSummary.sampleCandidateCount || columnSummary.dateColumnCount} date-like columns that\r\n          are not already assigned.\r\n        </p>\r\n      )}\r\n\r\n      {hasStrategies ? (\r\n        <div className=\"canvas-imputer__list\">\r\n          {strategies.map((strategy, index) => {\r\n            const modeLabel = modeOptions.find((option) => option.value === strategy.mode)?.label ?? formatDateModeLabel(strategy.mode);\r\n            const columnCount = strategy.columns.length;\r\n            const columnSummaryLabel = columnCount\r\n              ? `${columnCount} column${columnCount === 1 ? '' : 's'}`\r\n              : strategy.autoDetect\r\n                ? 'Auto-detecting columns'\r\n                : 'No columns yet';\r\n            const isCollapsed = collapsedStrategies.has(index);\r\n            const columnsValue = strategy.columns.join(', ');\r\n            const toggleId = `date-strategy-${index}-toggle`;\r\n            const autoDetectId = `date-strategy-${index}-auto-detect`;\r\n\r\n            const sortedOptions = columnOptions\r\n              .map((option) => ({\r\n                option,\r\n                priority: option.isRecommended ? 0 : option.isSampleCandidate ? 1 : 2,\r\n              }))\r\n              .sort((a, b) => {\r\n                if (a.priority !== b.priority) {\r\n                  return a.priority - b.priority;\r\n                }\r\n                return a.option.name.localeCompare(b.option.name);\r\n              })\r\n              .map((entry) => entry.option);\r\n\r\n            const primaryOptions = sortedOptions.filter((option) => {\r\n              if (strategy.columns.includes(option.name)) {\r\n                return true;\r\n              }\r\n              return option.isRecommended || option.isSampleCandidate;\r\n            });\r\n            const primarySet = new Set(primaryOptions.map((option) => option.name));\r\n            const otherOptions = sortedOptions.filter((option) => !primarySet.has(option.name));\r\n            const isOtherExpanded = expandedColumnLists.has(index);\r\n\r\n            return (\r\n              <div key={`date-strategy-${index}`} className=\"canvas-imputer__card\">\r\n                <div className=\"canvas-imputer__card-header\">\r\n                  <button\r\n                    type=\"button\"\r\n                    id={toggleId}\r\n                    className=\"canvas-imputer__card-toggle\"\r\n                    onClick={() => onToggleStrategy(index)}\r\n                    aria-expanded={!isCollapsed}\r\n                    aria-controls={`date-strategy-body-${index}`}\r\n                  >\r\n                    <span\r\n                      className={`canvas-imputer__toggle-icon${isCollapsed ? '' : ' canvas-imputer__toggle-icon--open'}`}\r\n                      aria-hidden=\"true\"\r\n                    />\r\n                    <span className=\"canvas-imputer__card-text\">\r\n                      <span className=\"canvas-imputer__card-title\">Strategy {index + 1}</span>\r\n                      <span className=\"canvas-imputer__card-summary\">\r\n                        {modeLabel}\r\n                        {strategy.autoDetect ? '  auto-detect' : ''}\r\n                        {columnSummaryLabel ? `  ${columnSummaryLabel}` : ''}\r\n                      </span>\r\n                    </span>\r\n                  </button>\r\n                  <button\r\n                    type=\"button\"\r\n                    className=\"canvas-imputer__remove\"\r\n                    onClick={() => onRemoveStrategy(index)}\r\n                    aria-label={`Remove date formatting strategy ${index + 1}`}\r\n                  >\r\n                    Remove\r\n                  </button>\r\n                </div>\r\n                {!isCollapsed && (\r\n                  <div className=\"canvas-imputer__card-body\" id={`date-strategy-body-${index}`}>\r\n                    <div className=\"canvas-imputer__row\">\r\n                      <label htmlFor={`date-strategy-${index}-mode`}>Format</label>\r\n                      <select\r\n                        id={`date-strategy-${index}-mode`}\r\n                        value={strategy.mode}\r\n                        onChange={(event) => onModeChange(index, event.target.value as DateMode)}\r\n                      >\r\n                        {modeOptions.map((option) => (\r\n                          <option key={option.value} value={option.value}>\r\n                            {option.label}\r\n                          </option>\r\n                        ))}\r\n                      </select>\r\n                      <p className=\"canvas-modal__meta\">\r\n                        Example: {modeOptions.find((option) => option.value === strategy.mode)?.example ?? '2024-01-23'}\r\n                      </p>\r\n                    </div>\r\n\r\n                    <div className=\"canvas-imputer__row\">\r\n                      <label htmlFor={autoDetectId}>Detection</label>\r\n                      <div className=\"canvas-modal__boolean-control\">\r\n                        <input\r\n                          id={autoDetectId}\r\n                          type=\"checkbox\"\r\n                          checked={strategy.autoDetect}\r\n                          onChange={(event) => onAutoDetectToggle(index, event.target.checked)}\r\n                        />\r\n                        <label htmlFor={autoDetectId}>Auto-detect additional date columns</label>\r\n                      </div>\r\n                      <p className=\"canvas-modal__note\">\r\n                        We will append detected date-like fields that are not assigned to other strategies.\r\n                      </p>\r\n                    </div>\r\n\r\n                    <div className=\"canvas-imputer__row\">\r\n                      <label>Columns</label>\r\n                      {sortedOptions.length ? (\r\n                        <>\r\n                          {primaryOptions.length ? (\r\n                            <div\r\n                              className=\"canvas-imputer__columns-list\"\r\n                              role=\"listbox\"\r\n                              aria-label=\"Detected or selected columns for date formatting\"\r\n                            >\r\n                              {primaryOptions.map((option) => {\r\n                                const isSelected = strategy.columns.includes(option.name);\r\n                                const preview = formatSamplePreview(option.samples.length ? option.samples : sampleMap[option.name] ?? []);\r\n                                const usageCount = columnUsage.get(option.name) ?? 0;\r\n                                const assignedElsewhere = usageCount - (isSelected ? 1 : 0) > 0;\r\n                                return (\r\n                                  <button\r\n                                    key={option.name}\r\n                                    type=\"button\"\r\n                                    className={`canvas-imputer__column-pill${isSelected ? ' canvas-imputer__column-pill--selected' : ''}`}\r\n                                    onClick={() => onColumnToggle(index, option.name)}\r\n                                    aria-pressed={isSelected}\r\n                                  >\r\n                                    <span className=\"canvas-imputer__column-pill-name\">{option.name}</span>\r\n                                    <div className=\"canvas-imputer__column-pill-meta\">\r\n                                      {option.dtype && <span className=\"canvas-imputer__column-pill-dtype\">{option.dtype}</span>}\r\n                                      {option.isRecommended && <span className=\"canvas-modal__meta\">Suggested</span>}\r\n                                      {!option.isRecommended && option.isSampleCandidate && (\r\n                                        <span className=\"canvas-modal__meta\">Detected</span>\r\n                                      )}\r\n                                      {assignedElsewhere && <span className=\"canvas-modal__meta\">Used in another strategy</span>}\r\n                                    </div>\r\n                                    {preview && <span className=\"canvas-modal__meta\">e.g. {preview}</span>}\r\n                                  </button>\r\n                                );\r\n                              })}\r\n                            </div>\r\n                          ) : (\r\n                            <p className=\"canvas-modal__note\">\r\n                              No detected or selected columns yet. Expand other columns below to assign manually.\r\n                            </p>\r\n                          )}\r\n                          {otherOptions.length > 0 && (\r\n                            <div className=\"canvas-imputer__more-columns\">\r\n                              <button\r\n                                type=\"button\"\r\n                                className=\"btn btn-outline-secondary\"\r\n                                onClick={() => toggleAdditionalColumns(index)}\r\n                                aria-expanded={isOtherExpanded}\r\n                                aria-controls={`date-strategy-${index}-other-columns`}\r\n                              >\r\n                                {isOtherExpanded\r\n                                  ? 'Hide other columns'\r\n                                  : `Show other columns (${otherOptions.length})`}\r\n                              </button>\r\n                              {isOtherExpanded && (\r\n                                <div\r\n                                  id={`date-strategy-${index}-other-columns`}\r\n                                  className=\"canvas-imputer__columns-list\"\r\n                                  role=\"listbox\"\r\n                                  aria-label=\"Other available columns for date formatting\"\r\n                                >\r\n                                  {otherOptions.map((option) => {\r\n                                    const isSelected = strategy.columns.includes(option.name);\r\n                                    const preview = formatSamplePreview(option.samples.length ? option.samples : sampleMap[option.name] ?? []);\r\n                                    const usageCount = columnUsage.get(option.name) ?? 0;\r\n                                    const assignedElsewhere = usageCount - (isSelected ? 1 : 0) > 0;\r\n                                    return (\r\n                                      <button\r\n                                        key={option.name}\r\n                                        type=\"button\"\r\n                                        className={`canvas-imputer__column-pill${isSelected ? ' canvas-imputer__column-pill--selected' : ''}`}\r\n                                        onClick={() => onColumnToggle(index, option.name)}\r\n                                        aria-pressed={isSelected}\r\n                                      >\r\n                                        <span className=\"canvas-imputer__column-pill-name\">{option.name}</span>\r\n                                        <div className=\"canvas-imputer__column-pill-meta\">\r\n                                          {option.dtype && <span className=\"canvas-imputer__column-pill-dtype\">{option.dtype}</span>}\r\n                                          {assignedElsewhere && <span className=\"canvas-modal__meta\">Used in another strategy</span>}\r\n                                        </div>\r\n                                        {preview && <span className=\"canvas-modal__meta\">e.g. {preview}</span>}\r\n                                      </button>\r\n                                    );\r\n                                  })}\r\n                                </div>\r\n                              )}\r\n                            </div>\r\n                          )}\r\n                        </>\r\n                      ) : (\r\n                        <p className=\"canvas-modal__note\">\r\n                          No catalogued columns yet. Add column names manually below or enable auto-detect to populate this list.\r\n                        </p>\r\n                      )}\r\n                    </div>\r\n\r\n                    <div\r\n                      className={`canvas-imputer__selected${\r\n                        strategy.columns.length ? '' : ' canvas-imputer__selected--empty'\r\n                      }`}\r\n                      aria-live=\"polite\"\r\n                    >\r\n                      {strategy.columns.length ? (\r\n                        strategy.columns.map((column) => (\r\n                          <span key={column} className=\"canvas-imputer__selected-chip\">\r\n                            {column}\r\n                          </span>\r\n                        ))\r\n                      ) : (\r\n                        <span>No manual columns selected yet.</span>\r\n                      )}\r\n                    </div>\r\n\r\n                    <div className=\"canvas-imputer__row\">\r\n                      <label htmlFor={`date-strategy-${index}-manual-columns`}>Manual columns (optional)</label>\r\n                      <input\r\n                        id={`date-strategy-${index}-manual-columns`}\r\n                        type=\"text\"\r\n                        className=\"canvas-imputer__columns-input\"\r\n                        value={columnsValue}\r\n                        onChange={(event) => onColumnsChange(index, event.target.value)}\r\n                        placeholder=\"Add custom columns, separated by commas\"\r\n                      />\r\n                    </div>\r\n\r\n                    <p className=\"canvas-modal__note\">\r\n                      Tap suggestions to toggle columns. Manual entries let you set custom fields that are not listed above.\r\n                    </p>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n      ) : (\r\n        <p className=\"canvas-modal__note\">\r\n          Add a strategy to standardize one or more columns. You can combine manual selection with auto-detect for any\r\n          remaining date-like fields.\r\n        </p>\r\n      )}\r\n    </section>\r\n  );\r\n};\r\n","import { ensureArrayOfString } from '../../sharedUtils';\r\n\r\nconst TRIM_MODES = ['both', 'leading', 'trailing'] as const;\r\n\r\nexport type TrimMode = (typeof TRIM_MODES)[number];\r\n\r\nexport const DEFAULT_TRIM_MODE: TrimMode = 'both';\r\n\r\nconst TEXTUAL_TYPE_TOKENS = ['string', 'object', 'text', 'category', 'mixed', 'varchar', 'char'];\r\n\r\nconst PREVIEW_SAMPLE_LIMIT = 3;\r\nconst PREVIEW_SAMPLE_LENGTH = 36;\r\nconst PREVIEW_COLUMN_LIMIT = 6;\r\nconst PREVIEW_WARNING_LIMIT = 4;\r\nconst PREVIEW_COLUMN_SAMPLE_LIMIT = 5;\r\n\r\nconst MODE_METADATA: Record<TrimMode, { label: string; guidance: string; example: string }> = {\r\n  both: {\r\n    label: 'Trim both sides',\r\n    guidance: 'Removes whitespace on the left and right side of values. Safe default for messy strings.',\r\n    example: \"' ACME '  'ACME'\",\r\n  },\r\n  leading: {\r\n    label: 'Trim leading whitespace',\r\n    guidance: 'Strips whitespace at the beginning of values while preserving trailing spacing.',\r\n    example: \"' 123 Main'  '123 Main'\",\r\n  },\r\n  trailing: {\r\n    label: 'Trim trailing whitespace',\r\n    guidance: 'Removes whitespace at the end of values while keeping leading spacing intact.',\r\n    example: \"'Suite B  '  'Suite B'\",\r\n  },\r\n};\r\n\r\nexport type TrimModeDetails = {\r\n  mode: TrimMode;\r\n  label: string;\r\n  guidance: string;\r\n  example: string;\r\n};\r\n\r\nexport type TrimSample = {\r\n  value: string;\r\n  hasIssue: boolean;\r\n};\r\n\r\nexport type TrimSampleMap = Record<string, TrimSample[]>;\r\n\r\nexport type TrimSamplePreview = {\r\n  column: string;\r\n  values: string[];\r\n  overflow: number;\r\n};\r\n\r\nexport type TrimColumnSummary = {\r\n  selectedColumns: string[];\r\n  autoDetectionActive: boolean;\r\n  recommendedColumns: string[];\r\n  nonTextSelected: string[];\r\n  textColumnCount: number;\r\n  whitespaceCandidateCount: number;\r\n  whitespaceCandidates: string[];\r\n};\r\n\r\nconst truncateSampleValue = (value: string): string => {\r\n  if (value.length <= PREVIEW_SAMPLE_LENGTH) {\r\n    return value;\r\n  }\r\n  return `${value.slice(0, PREVIEW_SAMPLE_LENGTH - 1)}...`;\r\n};\r\n\r\nconst isTextLikeType = (dtype?: string | null): boolean => {\r\n  if (!dtype) {\r\n    return false;\r\n  }\r\n  const normalized = dtype.toLowerCase();\r\n  return TEXTUAL_TYPE_TOKENS.some((token) => normalized.includes(token));\r\n};\r\n\r\nconst normalizeSampleDisplay = (raw: string): string => {\r\n  const sanitized = raw.replace(/\\r/g, '\\\\r').replace(/\\n/g, '\\\\n').replace(/\\t/g, '\\\\t');\r\n  return `'${truncateSampleValue(sanitized)}'`;\r\n};\r\n\r\nconst detectWhitespaceIssue = (raw: string): boolean => {\r\n  if (!raw.length) {\r\n    return false;\r\n  }\r\n  if (raw.trim() !== raw) {\r\n    return true;\r\n  }\r\n  if (raw.includes('  ')) {\r\n    return true;\r\n  }\r\n  if (raw.includes('\\n') || raw.includes('\\t') || raw.includes('\\r')) {\r\n    return true;\r\n  }\r\n  return false;\r\n};\r\n\r\nexport const resolveTrimMode = (primary?: unknown, fallback?: unknown): TrimMode => {\r\n  const normalizedPrimary = typeof primary === 'string' ? primary.trim().toLowerCase() : '';\r\n  if (normalizedPrimary && (TRIM_MODES as readonly string[]).includes(normalizedPrimary)) {\r\n    return normalizedPrimary as TrimMode;\r\n  }\r\n  const normalizedFallback = typeof fallback === 'string' ? fallback.trim().toLowerCase() : '';\r\n  if (normalizedFallback && (TRIM_MODES as readonly string[]).includes(normalizedFallback)) {\r\n    return normalizedFallback as TrimMode;\r\n  }\r\n  return DEFAULT_TRIM_MODE;\r\n};\r\n\r\nexport const getTrimModeDetails = (mode: TrimMode): TrimModeDetails => {\r\n  const metadata = MODE_METADATA[mode] ?? MODE_METADATA[DEFAULT_TRIM_MODE];\r\n  return {\r\n    mode,\r\n    label: metadata.label,\r\n    guidance: metadata.guidance,\r\n    example: metadata.example,\r\n  };\r\n};\r\n\r\nconst analyzeWhitespaceCandidates = (sampleMap: TrimSampleMap): string[] => {\r\n  const candidates: string[] = [];\r\n  Object.entries(sampleMap).forEach(([column, samples]) => {\r\n    if (!samples.length) {\r\n      return;\r\n    }\r\n    const issueCount = samples.reduce((count, sample) => (sample.hasIssue ? count + 1 : count), 0);\r\n    if (!issueCount) {\r\n      return;\r\n    }\r\n    const share = issueCount / samples.length;\r\n    if (issueCount >= 2 || share >= 0.5) {\r\n      candidates.push(column);\r\n    }\r\n  });\r\n  candidates.sort((a, b) => a.localeCompare(b));\r\n  return candidates;\r\n};\r\n\r\ntype BuildTrimColumnSummaryInput = {\r\n  selectedColumns: unknown;\r\n  availableColumns: string[];\r\n  columnTypeMap: Record<string, string>;\r\n  sampleMap: TrimSampleMap;\r\n};\r\n\r\nexport const buildTrimColumnSummary = ({\r\n  selectedColumns,\r\n  availableColumns,\r\n  columnTypeMap,\r\n  sampleMap,\r\n}: BuildTrimColumnSummaryInput): TrimColumnSummary => {\r\n  const uniqueSelected = Array.from(new Set(ensureArrayOfString(selectedColumns)));\r\n  uniqueSelected.sort((a, b) => a.localeCompare(b));\r\n  const selectedSet = new Set(uniqueSelected);\r\n\r\n  const textColumns = availableColumns.filter((column) => isTextLikeType(columnTypeMap[column] ?? null));\r\n  const whitespaceCandidates = analyzeWhitespaceCandidates(sampleMap);\r\n\r\n  const recommendedSet = new Set<string>();\r\n  textColumns.forEach((column) => {\r\n    if (!selectedSet.has(column)) {\r\n      recommendedSet.add(column);\r\n    }\r\n  });\r\n  whitespaceCandidates.forEach((column) => {\r\n    if (!selectedSet.has(column)) {\r\n      recommendedSet.add(column);\r\n    }\r\n  });\r\n\r\n  const recommendedColumns = Array.from(recommendedSet).sort((a, b) => a.localeCompare(b));\r\n\r\n  const nonTextSelected = uniqueSelected.filter((column) => !isTextLikeType(columnTypeMap[column] ?? null));\r\n\r\n  return {\r\n    selectedColumns: uniqueSelected,\r\n    autoDetectionActive: uniqueSelected.length === 0,\r\n    recommendedColumns,\r\n    nonTextSelected,\r\n    textColumnCount: textColumns.length,\r\n    whitespaceCandidateCount: whitespaceCandidates.length,\r\n    whitespaceCandidates,\r\n  };\r\n};\r\n\r\nconst formatPreviewList = (values: string[], limit: number): string[] => values.slice(0, limit);\r\n\r\nexport const summarizeTrimRecommendations = (columns: string[]): { preview: string[]; remaining: number } => {\r\n  const preview = formatPreviewList(columns, PREVIEW_COLUMN_LIMIT);\r\n  return {\r\n    preview,\r\n    remaining: Math.max(columns.length - preview.length, 0),\r\n  };\r\n};\r\n\r\nexport const summarizeNonTextSelections = (columns: string[]): { preview: string[]; remaining: number } => {\r\n  const preview = formatPreviewList(columns, PREVIEW_WARNING_LIMIT);\r\n  return {\r\n    preview,\r\n    remaining: Math.max(columns.length - preview.length, 0),\r\n  };\r\n};\r\n\r\nexport const summarizeWhitespaceCandidates = (columns: string[]): { preview: string[]; remaining: number } => {\r\n  const preview = formatPreviewList(columns, PREVIEW_COLUMN_LIMIT);\r\n  return {\r\n    preview,\r\n    remaining: Math.max(columns.length - preview.length, 0),\r\n  };\r\n};\r\n\r\nexport const buildTrimSampleMap = (\r\n  rows: Array<Record<string, unknown>>,\r\n  limit = PREVIEW_SAMPLE_LIMIT,\r\n): TrimSampleMap => {\r\n  if (!Array.isArray(rows) || !rows.length) {\r\n    return {};\r\n  }\r\n  const map: TrimSampleMap = {};\r\n  rows.forEach((row) => {\r\n    if (!row || typeof row !== 'object') {\r\n      return;\r\n    }\r\n    Object.entries(row).forEach(([rawColumn, rawValue]) => {\r\n      const column = typeof rawColumn === 'string' ? rawColumn.trim() : '';\r\n      if (!column) {\r\n        return;\r\n      }\r\n      let text = '';\r\n      if (rawValue === null || rawValue === undefined) {\r\n        text = '';\r\n      } else if (typeof rawValue === 'string') {\r\n        text = rawValue;\r\n      } else if (typeof rawValue === 'number' || typeof rawValue === 'boolean') {\r\n        text = String(rawValue);\r\n      } else {\r\n        try {\r\n          text = JSON.stringify(rawValue);\r\n        } catch (error) {\r\n          text = String(rawValue);\r\n        }\r\n      }\r\n      if (!text.length) {\r\n        return;\r\n      }\r\n      const hasIssue = detectWhitespaceIssue(text);\r\n      const display = normalizeSampleDisplay(text);\r\n      const current = map[column] ?? [];\r\n      if (current.find((entry) => entry.value === display)) {\r\n        return;\r\n      }\r\n      if (current.length >= limit) {\r\n        return;\r\n      }\r\n      map[column] = [...current, { value: display, hasIssue }];\r\n    });\r\n  });\r\n  return map;\r\n};\r\n\r\nexport const summarizeTrimSamples = (\r\n  sampleMap: TrimSampleMap,\r\n  columns: string[],\r\n  limit = PREVIEW_COLUMN_SAMPLE_LIMIT,\r\n): TrimSamplePreview[] => {\r\n  if (!columns.length) {\r\n    return [];\r\n  }\r\n  const previews: TrimSamplePreview[] = [];\r\n  for (const column of columns) {\r\n    if (previews.length >= limit) {\r\n      break;\r\n    }\r\n    const samples = sampleMap[column];\r\n    if (!samples || !samples.length) {\r\n      continue;\r\n    }\r\n    previews.push({\r\n      column,\r\n      values: samples.map((entry) => entry.value),\r\n      overflow: 0,\r\n    });\r\n  }\r\n  return previews;\r\n};\r\n\r\nexport const EMPTY_TRIM_COLUMN_SUMMARY: TrimColumnSummary = {\r\n  selectedColumns: [],\r\n  autoDetectionActive: true,\r\n  recommendedColumns: [],\r\n  nonTextSelected: [],\r\n  textColumnCount: 0,\r\n  whitespaceCandidateCount: 0,\r\n  whitespaceCandidates: [],\r\n};\r\n","import React from 'react';\r\nimport type { FeatureNodeParameter } from '../../../../api';\r\nimport {\r\n  type TrimColumnSummary,\r\n  type TrimModeDetails,\r\n  type TrimSampleMap,\r\n  summarizeNonTextSelections,\r\n  summarizeTrimRecommendations,\r\n  summarizeTrimSamples,\r\n  summarizeWhitespaceCandidates,\r\n} from './trimWhitespaceSettings';\r\n\r\nexport type TrimWhitespaceSectionProps = {\r\n  sourceId?: string | null;\r\n  hasReachableSource: boolean;\r\n  columnsParameter: FeatureNodeParameter | null;\r\n  modeParameter: FeatureNodeParameter | null;\r\n  renderMultiSelectField: (parameter: FeatureNodeParameter) => React.ReactNode;\r\n  renderParameterField: (parameter: FeatureNodeParameter) => React.ReactNode;\r\n  columnSummary: TrimColumnSummary;\r\n  modeDetails: TrimModeDetails;\r\n  sampleMap: TrimSampleMap;\r\n};\r\n\r\nexport const TrimWhitespaceSection: React.FC<TrimWhitespaceSectionProps> = ({\r\n  sourceId,\r\n  hasReachableSource,\r\n  columnsParameter,\r\n  modeParameter,\r\n  renderMultiSelectField,\r\n  renderParameterField,\r\n  columnSummary,\r\n  modeDetails,\r\n  sampleMap,\r\n}) => {\r\n  if (!columnsParameter && !modeParameter) {\r\n    return null;\r\n  }\r\n\r\n  const selectedCount = columnSummary.selectedColumns.length;\r\n  const recommendationSummary = summarizeTrimRecommendations(columnSummary.recommendedColumns);\r\n  const nonTextSummary = summarizeNonTextSelections(columnSummary.nonTextSelected);\r\n  const whitespaceSummary = summarizeWhitespaceCandidates(columnSummary.whitespaceCandidates);\r\n  const samplePreviews = summarizeTrimSamples(sampleMap, columnSummary.selectedColumns);\r\n  const hasDatasetContextWarning = !sourceId || !hasReachableSource;\r\n\r\n  return (\r\n    <section className=\"canvas-modal__section\">\r\n      <div className=\"canvas-modal__section-header\">\r\n        <h3>Whitespace trimming</h3>\r\n      </div>\r\n      <p className=\"canvas-modal__note\">\r\n        <strong>{modeDetails.label}</strong> mode. {modeDetails.guidance} Example: {modeDetails.example}.\r\n      </p>\r\n      {columnSummary.autoDetectionActive ? (\r\n        <p className=\"canvas-modal__note\">\r\n          No columns selected&mdash;text columns will be auto-detected when the node runs.\r\n        </p>\r\n      ) : (\r\n        <p className=\"canvas-modal__note\">\r\n          Targeting <strong>{selectedCount}</strong> column{selectedCount === 1 ? '' : 's'} for trimming.\r\n        </p>\r\n      )}\r\n      {samplePreviews.length > 0 && (\r\n        <p className=\"canvas-modal__note\">\r\n          Samples: {samplePreviews.map((preview) => `${preview.column} (${preview.values.join(', ')})`).join('; ')}.\r\n        </p>\r\n      )}\r\n      {whitespaceSummary.preview.length > 0 && (\r\n        <p className=\"canvas-modal__note\">\r\n          Columns with leading/trailing whitespace detected: {whitespaceSummary.preview.join(', ')}\r\n          {whitespaceSummary.remaining > 0 ? `, ... (${whitespaceSummary.remaining} more)` : ''}.\r\n        </p>\r\n      )}\r\n      {recommendationSummary.preview.length > 0 && (\r\n        <p className=\"canvas-modal__note\">\r\n          Other text columns: {recommendationSummary.preview.join(', ')}\r\n          {recommendationSummary.remaining > 0 ? `, ... (${recommendationSummary.remaining} more)` : ''}.\r\n        </p>\r\n      )}\r\n      {nonTextSummary.preview.length > 0 && (\r\n        <p className=\"canvas-modal__note canvas-modal__note--warning\">\r\n          {nonTextSummary.preview.join(', ')} {nonTextSummary.preview.length === 1 ? 'is' : 'are'} not text-like.\r\n          {nonTextSummary.remaining > 0\r\n            ? ` ${nonTextSummary.remaining} more column${nonTextSummary.remaining === 1 ? ' is' : 's are'} also non-text.`\r\n            : ' Consider removing them or confirming whitespace cleanup is intentional.'}\r\n        </p>\r\n      )}\r\n      {hasDatasetContextWarning ? (\r\n        !sourceId ? (\r\n          <p className=\"canvas-modal__note canvas-modal__note--warning\">\r\n            Select a dataset to inspect column samples for trimming opportunities.\r\n          </p>\r\n        ) : (\r\n          <p className=\"canvas-modal__note canvas-modal__note--warning\">\r\n            Connect this node to an upstream output to review column insights.\r\n          </p>\r\n        )\r\n      ) : null}\r\n      {columnsParameter && (\r\n        <div className=\"canvas-modal__subsection\">\r\n          <h4>Columns to trim</h4>\r\n          {renderMultiSelectField(columnsParameter)}\r\n        </div>\r\n      )}\r\n      {modeParameter && (\r\n        <div className=\"canvas-modal__parameter-list\">{renderParameterField(modeParameter)}</div>\r\n      )}\r\n    </section>\r\n  );\r\n};\r\n","import { ensureArrayOfString } from '../../sharedUtils';\r\n\r\nconst REMOVE_SPECIAL_MODES = [\r\n  'keep_alphanumeric',\r\n  'keep_alphanumeric_space',\r\n  'letters_only',\r\n  'digits_only',\r\n] as const;\r\n\r\nexport type RemoveSpecialMode = (typeof REMOVE_SPECIAL_MODES)[number];\r\n\r\nexport const DEFAULT_REMOVE_SPECIAL_MODE: RemoveSpecialMode = 'keep_alphanumeric';\r\n\r\nconst TEXTUAL_TYPE_TOKENS = ['string', 'object', 'text', 'category', 'mixed', 'varchar', 'char'];\r\n\r\nconst PREVIEW_SAMPLE_LIMIT = 3;\r\nconst PREVIEW_SAMPLE_LENGTH = 36;\r\nconst PREVIEW_COLUMN_LIMIT = 6;\r\nconst PREVIEW_WARNING_LIMIT = 4;\r\nconst PREVIEW_COLUMN_SAMPLE_LIMIT = 5;\r\n\r\nconst MODE_METADATA: Record<RemoveSpecialMode, { label: string; guidance: string; example: string }> = {\r\n  keep_alphanumeric: {\r\n    label: 'Letters & digits',\r\n    guidance: 'Removes punctuation and symbols, leaving only letters and numbers.',\r\n    example: 'ACME-Co.  ACMEC o',\r\n  },\r\n  keep_alphanumeric_space: {\r\n    label: 'Letters, digits & spaces',\r\n    guidance: 'Strips punctuation while preserving spaces for readability.',\r\n    example: 'ACME-Co.  ACME Co',\r\n  },\r\n  letters_only: {\r\n    label: 'Letters only',\r\n    guidance: 'Keeps alphabetic characters and removes digits, punctuation, and symbols.',\r\n    example: 'R2-D2  RD',\r\n  },\r\n  digits_only: {\r\n    label: 'Digits only',\r\n    guidance: 'Preserves numbers while removing letters, punctuation, and symbols.',\r\n    example: 'Order #123A  123',\r\n  },\r\n};\r\n\r\nexport type RemoveSpecialModeDetails = {\r\n  mode: RemoveSpecialMode;\r\n  label: string;\r\n  guidance: string;\r\n  example: string;\r\n};\r\n\r\nexport type SpecialSample = {\r\n  value: string;\r\n  hasSpecial: boolean;\r\n  hasDigits: boolean;\r\n  hasLetters: boolean;\r\n};\r\n\r\nexport type SpecialSampleMap = Record<string, SpecialSample[]>;\r\n\r\nexport type SpecialSamplePreview = {\r\n  column: string;\r\n  values: string[];\r\n  overflow: number;\r\n};\r\n\r\nexport type SpecialColumnSummary = {\r\n  selectedColumns: string[];\r\n  autoDetectionActive: boolean;\r\n  recommendedColumns: string[];\r\n  nonTextSelected: string[];\r\n  textColumnCount: number;\r\n  specialCandidateCount: number;\r\n  specialCandidates: string[];\r\n  digitsOnlyCandidates: string[];\r\n  lettersOnlyCandidates: string[];\r\n};\r\n\r\nconst truncateSampleValue = (value: string): string => {\r\n  if (value.length <= PREVIEW_SAMPLE_LENGTH) {\r\n    return value;\r\n  }\r\n  return `${value.slice(0, PREVIEW_SAMPLE_LENGTH - 1)}...`;\r\n};\r\n\r\nconst normalizeSampleDisplay = (raw: string): string => {\r\n  const sanitized = raw.replace(/\\r/g, '\\\\r').replace(/\\n/g, '\\\\n').replace(/\\t/g, '\\\\t');\r\n  return `'${truncateSampleValue(sanitized)}'`;\r\n};\r\n\r\nconst isTextLikeType = (dtype?: string | null): boolean => {\r\n  if (!dtype) {\r\n    return false;\r\n  }\r\n  const normalized = dtype.toLowerCase();\r\n  return TEXTUAL_TYPE_TOKENS.some((token) => normalized.includes(token));\r\n};\r\n\r\nconst hasSpecialCharacter = (value: string): boolean => /[^0-9A-Za-z\\s]/.test(value);\r\nconst hasLetter = (value: string): boolean => /[A-Za-z]/.test(value);\r\nconst hasDigit = (value: string): boolean => /[0-9]/.test(value);\r\n\r\nexport const resolveRemoveSpecialMode = (primary?: unknown, fallback?: unknown): RemoveSpecialMode => {\r\n  const normalizedPrimary = typeof primary === 'string' ? primary.trim().toLowerCase() : '';\r\n  if (normalizedPrimary && (REMOVE_SPECIAL_MODES as readonly string[]).includes(normalizedPrimary)) {\r\n    return normalizedPrimary as RemoveSpecialMode;\r\n  }\r\n  const normalizedFallback = typeof fallback === 'string' ? fallback.trim().toLowerCase() : '';\r\n  if (normalizedFallback && (REMOVE_SPECIAL_MODES as readonly string[]).includes(normalizedFallback)) {\r\n    return normalizedFallback as RemoveSpecialMode;\r\n  }\r\n  return DEFAULT_REMOVE_SPECIAL_MODE;\r\n};\r\n\r\nexport const getRemoveSpecialModeDetails = (mode: RemoveSpecialMode): RemoveSpecialModeDetails => {\r\n  const metadata = MODE_METADATA[mode] ?? MODE_METADATA[DEFAULT_REMOVE_SPECIAL_MODE];\r\n  return {\r\n    mode,\r\n    label: metadata.label,\r\n    guidance: metadata.guidance,\r\n    example: metadata.example,\r\n  };\r\n};\r\n\r\nconst analyzeSpecialCandidates = (sampleMap: SpecialSampleMap) => {\r\n  const specialCandidates = new Set<string>();\r\n  const digitsOnly = new Set<string>();\r\n  const lettersOnly = new Set<string>();\r\n\r\n  Object.entries(sampleMap).forEach(([column, samples]) => {\r\n    if (!samples.length) {\r\n      return;\r\n    }\r\n    let specialCount = 0;\r\n    let digitsCount = 0;\r\n    let lettersCount = 0;\r\n    samples.forEach((sample) => {\r\n      if (sample.hasSpecial) {\r\n        specialCount += 1;\r\n      }\r\n      if (sample.hasDigits) {\r\n        digitsCount += 1;\r\n      }\r\n      if (sample.hasLetters) {\r\n        lettersCount += 1;\r\n      }\r\n    });\r\n    if (specialCount > 0) {\r\n      specialCandidates.add(column);\r\n    }\r\n    if (digitsCount > 0 && lettersCount === 0) {\r\n      digitsOnly.add(column);\r\n    }\r\n    if (lettersCount > 0 && digitsCount === 0) {\r\n      lettersOnly.add(column);\r\n    }\r\n  });\r\n\r\n  const sortedSpecial = Array.from(specialCandidates).sort((a, b) => a.localeCompare(b));\r\n  const sortedDigitsOnly = Array.from(digitsOnly).sort((a, b) => a.localeCompare(b));\r\n  const sortedLettersOnly = Array.from(lettersOnly).sort((a, b) => a.localeCompare(b));\r\n\r\n  return {\r\n    specialCandidates: sortedSpecial,\r\n    digitsOnlyCandidates: sortedDigitsOnly,\r\n    lettersOnlyCandidates: sortedLettersOnly,\r\n  };\r\n};\r\n\r\ntype BuildSpecialColumnSummaryInput = {\r\n  selectedColumns: unknown;\r\n  availableColumns: string[];\r\n  columnTypeMap: Record<string, string>;\r\n  sampleMap: SpecialSampleMap;\r\n};\r\n\r\nexport const buildSpecialColumnSummary = ({\r\n  selectedColumns,\r\n  availableColumns,\r\n  columnTypeMap,\r\n  sampleMap,\r\n}: BuildSpecialColumnSummaryInput): SpecialColumnSummary => {\r\n  const uniqueSelected = Array.from(new Set(ensureArrayOfString(selectedColumns)));\r\n  uniqueSelected.sort((a, b) => a.localeCompare(b));\r\n  const selectedSet = new Set(uniqueSelected);\r\n\r\n  const textColumns = availableColumns.filter((column) => isTextLikeType(columnTypeMap[column] ?? null));\r\n  const { specialCandidates, digitsOnlyCandidates, lettersOnlyCandidates } = analyzeSpecialCandidates(sampleMap);\r\n\r\n  const recommendedSet = new Set<string>();\r\n  textColumns.forEach((column) => {\r\n    if (!selectedSet.has(column)) {\r\n      recommendedSet.add(column);\r\n    }\r\n  });\r\n  specialCandidates.forEach((column) => {\r\n    if (!selectedSet.has(column)) {\r\n      recommendedSet.add(column);\r\n    }\r\n  });\r\n\r\n  const recommendedColumns = Array.from(recommendedSet).sort((a, b) => a.localeCompare(b));\r\n  const nonTextSelected = uniqueSelected.filter((column) => !isTextLikeType(columnTypeMap[column] ?? null));\r\n\r\n  return {\r\n    selectedColumns: uniqueSelected,\r\n    autoDetectionActive: uniqueSelected.length === 0,\r\n    recommendedColumns,\r\n    nonTextSelected,\r\n    textColumnCount: textColumns.length,\r\n    specialCandidateCount: specialCandidates.length,\r\n    specialCandidates,\r\n    digitsOnlyCandidates,\r\n    lettersOnlyCandidates,\r\n  };\r\n};\r\n\r\nconst formatPreviewList = (values: string[], limit: number): string[] => values.slice(0, limit);\r\n\r\nexport const summarizeSpecialRecommendations = (columns: string[]): { preview: string[]; remaining: number } => {\r\n  const preview = formatPreviewList(columns, PREVIEW_COLUMN_LIMIT);\r\n  return {\r\n    preview,\r\n    remaining: Math.max(columns.length - preview.length, 0),\r\n  };\r\n};\r\n\r\nexport const summarizeSpecialWarnings = (columns: string[]): { preview: string[]; remaining: number } => {\r\n  const preview = formatPreviewList(columns, PREVIEW_WARNING_LIMIT);\r\n  return {\r\n    preview,\r\n    remaining: Math.max(columns.length - preview.length, 0),\r\n  };\r\n};\r\n\r\nexport const buildSpecialSampleMap = (\r\n  rows: Array<Record<string, unknown>>,\r\n  limit = PREVIEW_SAMPLE_LIMIT,\r\n): SpecialSampleMap => {\r\n  if (!Array.isArray(rows) || !rows.length) {\r\n    return {};\r\n  }\r\n  const map: SpecialSampleMap = {};\r\n  rows.forEach((row) => {\r\n    if (!row || typeof row !== 'object') {\r\n      return;\r\n    }\r\n    Object.entries(row).forEach(([rawColumn, rawValue]) => {\r\n      const column = typeof rawColumn === 'string' ? rawColumn.trim() : '';\r\n      if (!column) {\r\n        return;\r\n      }\r\n      let text = '';\r\n      if (rawValue === null || rawValue === undefined) {\r\n        text = '';\r\n      } else if (typeof rawValue === 'string') {\r\n        text = rawValue;\r\n      } else if (typeof rawValue === 'number' || typeof rawValue === 'boolean') {\r\n        text = String(rawValue);\r\n      } else {\r\n        try {\r\n          text = JSON.stringify(rawValue);\r\n        } catch (error) {\r\n          text = String(rawValue);\r\n        }\r\n      }\r\n      if (!text.length) {\r\n        return;\r\n      }\r\n      const normalized = normalizeSampleDisplay(text);\r\n      const hasSpecial = hasSpecialCharacter(text);\r\n      const sample: SpecialSample = {\r\n        value: normalized,\r\n        hasSpecial,\r\n        hasDigits: hasDigit(text),\r\n        hasLetters: hasLetter(text),\r\n      };\r\n      const current = map[column] ?? [];\r\n      if (current.find((entry) => entry.value === normalized)) {\r\n        return;\r\n      }\r\n      if (current.length >= limit) {\r\n        return;\r\n      }\r\n      map[column] = [...current, sample];\r\n    });\r\n  });\r\n  return map;\r\n};\r\n\r\nexport const summarizeSpecialSamples = (\r\n  sampleMap: SpecialSampleMap,\r\n  columns: string[],\r\n  limit = PREVIEW_COLUMN_SAMPLE_LIMIT,\r\n): SpecialSamplePreview[] => {\r\n  if (!columns.length) {\r\n    return [];\r\n  }\r\n  const previews: SpecialSamplePreview[] = [];\r\n  for (const column of columns) {\r\n    if (previews.length >= limit) {\r\n      break;\r\n    }\r\n    const samples = sampleMap[column];\r\n    if (!samples || !samples.length) {\r\n      continue;\r\n    }\r\n    previews.push({\r\n      column,\r\n      values: samples.map((entry) => entry.value),\r\n      overflow: 0,\r\n    });\r\n  }\r\n  return previews;\r\n};\r\n\r\nexport const EMPTY_SPECIAL_COLUMN_SUMMARY: SpecialColumnSummary = {\r\n  selectedColumns: [],\r\n  autoDetectionActive: true,\r\n  recommendedColumns: [],\r\n  nonTextSelected: [],\r\n  textColumnCount: 0,\r\n  specialCandidateCount: 0,\r\n  specialCandidates: [],\r\n  digitsOnlyCandidates: [],\r\n  lettersOnlyCandidates: [],\r\n};\r\n","import React from 'react';\r\nimport type { FeatureNodeParameter } from '../../../../api';\r\nimport {\r\n  type SpecialColumnSummary,\r\n  type SpecialSampleMap,\r\n  type RemoveSpecialModeDetails,\r\n  summarizeSpecialRecommendations,\r\n  summarizeSpecialSamples,\r\n  summarizeSpecialWarnings,\r\n} from './removeSpecialCharactersSettings';\r\n\r\nexport type RemoveSpecialCharactersSectionProps = {\r\n  sourceId?: string | null;\r\n  hasReachableSource: boolean;\r\n  columnsParameter: FeatureNodeParameter | null;\r\n  modeParameter: FeatureNodeParameter | null;\r\n  replacementParameter: FeatureNodeParameter | null;\r\n  renderMultiSelectField: (parameter: FeatureNodeParameter) => React.ReactNode;\r\n  renderParameterField: (parameter: FeatureNodeParameter) => React.ReactNode;\r\n  columnSummary: SpecialColumnSummary;\r\n  modeDetails: RemoveSpecialModeDetails;\r\n  sampleMap: SpecialSampleMap;\r\n};\r\n\r\nexport const RemoveSpecialCharactersSection: React.FC<RemoveSpecialCharactersSectionProps> = ({\r\n  sourceId,\r\n  hasReachableSource,\r\n  columnsParameter,\r\n  modeParameter,\r\n  replacementParameter,\r\n  renderMultiSelectField,\r\n  renderParameterField,\r\n  columnSummary,\r\n  modeDetails,\r\n  sampleMap,\r\n}) => {\r\n  if (!columnsParameter && !modeParameter && !replacementParameter) {\r\n    return null;\r\n  }\r\n\r\n  const selectedCount = columnSummary.selectedColumns.length;\r\n  const recommendationSummary = summarizeSpecialRecommendations(columnSummary.recommendedColumns);\r\n  const specialSummary = summarizeSpecialWarnings(columnSummary.specialCandidates);\r\n  const digitsOnlySummary = summarizeSpecialWarnings(columnSummary.digitsOnlyCandidates);\r\n  const lettersOnlySummary = summarizeSpecialWarnings(columnSummary.lettersOnlyCandidates);\r\n  const nonTextSummary = summarizeSpecialWarnings(columnSummary.nonTextSelected);\r\n  const samplePreviews = summarizeSpecialSamples(sampleMap, columnSummary.selectedColumns);\r\n  const hasDatasetContextWarning = !sourceId || !hasReachableSource;\r\n\r\n  return (\r\n    <section className=\"canvas-modal__section\">\r\n      <div className=\"canvas-modal__section-header\">\r\n        <h3>Special character cleanup</h3>\r\n      </div>\r\n      <p className=\"canvas-modal__note\">\r\n        <strong>{modeDetails.label}</strong> mode. {modeDetails.guidance} Example: {modeDetails.example}.\r\n      </p>\r\n      {columnSummary.autoDetectionActive ? (\r\n        <p className=\"canvas-modal__note\">\r\n          No columns selected&mdash;text columns will be auto-detected when the node runs.\r\n        </p>\r\n      ) : (\r\n        <p className=\"canvas-modal__note\">\r\n          Targeting <strong>{selectedCount}</strong> column{selectedCount === 1 ? '' : 's'} for cleanup.\r\n        </p>\r\n      )}\r\n      {samplePreviews.length > 0 && (\r\n        <p className=\"canvas-modal__note\">\r\n          Samples: {samplePreviews.map((preview) => `${preview.column} (${preview.values.join(', ')})`).join('; ')}.\r\n        </p>\r\n      )}\r\n      {specialSummary.preview.length > 0 && (\r\n        <p className=\"canvas-modal__note\">\r\n          Columns containing punctuation or symbols: {specialSummary.preview.join(', ')}\r\n          {specialSummary.remaining > 0 ? `, ... (${specialSummary.remaining} more)` : ''}.\r\n        </p>\r\n      )}\r\n      {digitsOnlySummary.preview.length > 0 && (\r\n        <p className=\"canvas-modal__note\">\r\n          Numeric-only samples detected in: {digitsOnlySummary.preview.join(', ')}\r\n          {digitsOnlySummary.remaining > 0 ? `, ... (${digitsOnlySummary.remaining} more)` : ''}. Consider `digits only` mode.\r\n        </p>\r\n      )}\r\n      {lettersOnlySummary.preview.length > 0 && (\r\n        <p className=\"canvas-modal__note\">\r\n          Letter-only samples detected in: {lettersOnlySummary.preview.join(', ')}\r\n          {lettersOnlySummary.remaining > 0 ? `, ... (${lettersOnlySummary.remaining} more)` : ''}. Consider `letters only` mode.\r\n        </p>\r\n      )}\r\n      {recommendationSummary.preview.length > 0 && (\r\n        <p className=\"canvas-modal__note\">\r\n          Other text columns: {recommendationSummary.preview.join(', ')}\r\n          {recommendationSummary.remaining > 0 ? `, ... (${recommendationSummary.remaining} more)` : ''}.\r\n        </p>\r\n      )}\r\n      {nonTextSummary.preview.length > 0 && (\r\n        <p className=\"canvas-modal__note canvas-modal__note--warning\">\r\n          {nonTextSummary.preview.join(', ')} {nonTextSummary.preview.length === 1 ? 'is' : 'are'} not text-like.\r\n          {nonTextSummary.remaining > 0\r\n            ? ` ${nonTextSummary.remaining} more column${nonTextSummary.remaining === 1 ? ' is' : 's are'} also non-text.`\r\n            : ' Double-check that symbol stripping is necessary for these fields.'}\r\n        </p>\r\n      )}\r\n      {hasDatasetContextWarning ? (\r\n        !sourceId ? (\r\n          <p className=\"canvas-modal__note canvas-modal__note--warning\">\r\n            Select a dataset to inspect column samples before removing characters.\r\n          </p>\r\n        ) : (\r\n          <p className=\"canvas-modal__note canvas-modal__note--warning\">\r\n            Connect this node to an upstream output to review column insights.\r\n          </p>\r\n        )\r\n      ) : null}\r\n      {columnsParameter && (\r\n        <div className=\"canvas-modal__subsection\">\r\n          <h4>Columns to sanitize</h4>\r\n          {renderMultiSelectField(columnsParameter)}\r\n        </div>\r\n      )}\r\n      {(modeParameter || replacementParameter) && (\r\n        <div className=\"canvas-modal__parameter-list\">\r\n          {modeParameter ? renderParameterField(modeParameter) : null}\r\n          {replacementParameter ? renderParameterField(replacementParameter) : null}\r\n        </div>\r\n      )}\r\n    </section>\r\n  );\r\n};\r\n","import { ensureArrayOfString } from '../../sharedUtils';\r\n\r\nconst CASE_MODES = ['lower', 'upper', 'title', 'sentence'] as const;\r\n\r\nexport type CaseMode = (typeof CASE_MODES)[number];\r\n\r\nexport const DEFAULT_CASE_MODE: CaseMode = 'lower';\r\n\r\nconst TEXTUAL_TYPE_TOKENS = ['string', 'object', 'text', 'category', 'mixed', 'varchar', 'char'];\r\n\r\nconst PREVIEW_SAMPLE_LIMIT = 3;\r\nconst PREVIEW_SAMPLE_LENGTH = 60;\r\nconst PREVIEW_COLUMN_LIMIT = 6;\r\nconst PREVIEW_WARNING_LIMIT = 4;\r\nconst PREVIEW_COLUMN_SAMPLE_LIMIT = 5;\r\n\r\nconst MODE_METADATA: Record<CaseMode, { label: string; guidance: string; example: string }> = {\r\n  lower: {\r\n    label: 'Lowercase',\r\n    guidance: 'Converts values to lowercase for consistent comparisons.',\r\n    example: 'Acme Corp  acme corp',\r\n  },\r\n  upper: {\r\n    label: 'Uppercase',\r\n    guidance: 'Transforms text to uppercase, useful for codes or standard identifiers.',\r\n    example: 'Acme Corp  ACME CORP',\r\n  },\r\n  title: {\r\n    label: 'Title case',\r\n    guidance: 'Capitalizes the first letter of each word, ideal for names or titles.',\r\n    example: 'ACME CORP  Acme Corp',\r\n  },\r\n  sentence: {\r\n    label: 'Sentence case',\r\n    guidance: 'Capitalizes the first letter of each sentence while lowercasing the rest.',\r\n    example: 'ACME CORP. DELIVERS.  Acme corp. delivers.',\r\n  },\r\n};\r\n\r\nexport type CaseModeDetails = {\r\n  mode: CaseMode;\r\n  label: string;\r\n  guidance: string;\r\n  example: string;\r\n};\r\n\r\nexport type CaseSample = {\r\n  original: string;\r\n  lower: string;\r\n  upper: string;\r\n  title: string;\r\n  sentence: string;\r\n};\r\n\r\nexport type CaseSampleMap = Record<string, CaseSample[]>;\r\n\r\nexport type CaseSamplePreview = {\r\n  column: string;\r\n  values: string[];\r\n  overflow: number;\r\n};\r\n\r\nexport type CaseColumnSummary = {\r\n  selectedColumns: string[];\r\n  autoDetectionActive: boolean;\r\n  recommendedColumns: string[];\r\n  nonTextSelected: string[];\r\n  textColumnCount: number;\r\n  inconsistentColumns: string[];\r\n};\r\n\r\nconst truncateSampleValue = (value: string): string => {\r\n  if (value.length <= PREVIEW_SAMPLE_LENGTH) {\r\n    return value;\r\n  }\r\n  return `${value.slice(0, PREVIEW_SAMPLE_LENGTH - 1)}...`;\r\n};\r\n\r\nconst isTextLikeType = (dtype?: string | null): boolean => {\r\n  if (!dtype) {\r\n    return false;\r\n  }\r\n  const normalized = dtype.toLowerCase();\r\n  return TEXTUAL_TYPE_TOKENS.some((token) => normalized.includes(token));\r\n};\r\n\r\nconst normalizeDisplay = (value: string): string => {\r\n  const sanitized = value.replace(/\\r/g, '\\\\r').replace(/\\n/g, '\\\\n').replace(/\\t/g, '\\\\t');\r\n  return `'${truncateSampleValue(sanitized)}'`;\r\n};\r\n\r\nconst toTitleCase = (value: string): string =>\r\n  value\r\n    .toLowerCase()\r\n    .split(/([\\s\\-_/]+)/)\r\n    .map((segment) => {\r\n      if (!segment.length || /[\\s\\-_/]+/.test(segment)) {\r\n        return segment;\r\n      }\r\n      return segment.charAt(0).toUpperCase() + segment.slice(1);\r\n    })\r\n    .join('');\r\n\r\nconst toSentenceCase = (value: string): string => {\r\n  const lower = value.toLowerCase();\r\n  return lower.replace(/(^\\s*[a-z])|([\\.\\!\\?]\\s*[a-z])/g, (match) => match.toUpperCase());\r\n};\r\n\r\nexport const resolveCaseMode = (primary?: unknown, fallback?: unknown): CaseMode => {\r\n  const normalizedPrimary = typeof primary === 'string' ? primary.trim().toLowerCase() : '';\r\n  if (normalizedPrimary && (CASE_MODES as readonly string[]).includes(normalizedPrimary)) {\r\n    return normalizedPrimary as CaseMode;\r\n  }\r\n  const normalizedFallback = typeof fallback === 'string' ? fallback.trim().toLowerCase() : '';\r\n  if (normalizedFallback && (CASE_MODES as readonly string[]).includes(normalizedFallback)) {\r\n    return normalizedFallback as CaseMode;\r\n  }\r\n  return DEFAULT_CASE_MODE;\r\n};\r\n\r\nexport const getCaseModeDetails = (mode: CaseMode): CaseModeDetails => {\r\n  const metadata = MODE_METADATA[mode] ?? MODE_METADATA[DEFAULT_CASE_MODE];\r\n  return {\r\n    mode,\r\n    label: metadata.label,\r\n    guidance: metadata.guidance,\r\n    example: metadata.example,\r\n  };\r\n};\r\n\r\ntype BuildCaseColumnSummaryInput = {\r\n  selectedColumns: unknown;\r\n  availableColumns: string[];\r\n  columnTypeMap: Record<string, string>;\r\n  sampleMap: CaseSampleMap;\r\n  mode: CaseMode;\r\n};\r\n\r\nconst detectInconsistentColumns = (sampleMap: CaseSampleMap, mode: CaseMode): string[] => {\r\n  const inconsistent: string[] = [];\r\n  Object.entries(sampleMap).forEach(([column, samples]) => {\r\n    if (!samples.length) {\r\n      return;\r\n    }\r\n    const mismatched = samples.some((sample) => {\r\n      const expected = sample[mode];\r\n      return sample.original !== expected;\r\n    });\r\n    if (mismatched) {\r\n      inconsistent.push(column);\r\n    }\r\n  });\r\n  inconsistent.sort((a, b) => a.localeCompare(b));\r\n  return inconsistent;\r\n};\r\n\r\nexport const buildCaseColumnSummary = ({\r\n  selectedColumns,\r\n  availableColumns,\r\n  columnTypeMap,\r\n  sampleMap,\r\n  mode,\r\n}: BuildCaseColumnSummaryInput): CaseColumnSummary => {\r\n  const uniqueSelected = Array.from(new Set(ensureArrayOfString(selectedColumns)));\r\n  uniqueSelected.sort((a, b) => a.localeCompare(b));\r\n  const selectedSet = new Set(uniqueSelected);\r\n\r\n  const textColumns = availableColumns.filter((column) => isTextLikeType(columnTypeMap[column] ?? null));\r\n  const inconsistentColumns = detectInconsistentColumns(sampleMap, mode);\r\n\r\n  const recommendedSet = new Set<string>();\r\n  textColumns.forEach((column) => {\r\n    if (!selectedSet.has(column)) {\r\n      recommendedSet.add(column);\r\n    }\r\n  });\r\n  inconsistentColumns.forEach((column) => {\r\n    if (!selectedSet.has(column)) {\r\n      recommendedSet.add(column);\r\n    }\r\n  });\r\n\r\n  const recommendedColumns = Array.from(recommendedSet).sort((a, b) => a.localeCompare(b));\r\n  const nonTextSelected = uniqueSelected.filter((column) => !isTextLikeType(columnTypeMap[column] ?? null));\r\n\r\n  return {\r\n    selectedColumns: uniqueSelected,\r\n    autoDetectionActive: uniqueSelected.length === 0,\r\n    recommendedColumns,\r\n    nonTextSelected,\r\n    textColumnCount: textColumns.length,\r\n    inconsistentColumns,\r\n  };\r\n};\r\n\r\nconst formatPreviewList = (values: string[], limit: number): string[] => values.slice(0, limit);\r\n\r\nexport const summarizeCaseRecommendations = (columns: string[]): { preview: string[]; remaining: number } => {\r\n  const preview = formatPreviewList(columns, PREVIEW_COLUMN_LIMIT);\r\n  return {\r\n    preview,\r\n    remaining: Math.max(columns.length - preview.length, 0),\r\n  };\r\n};\r\n\r\nexport const summarizeCaseWarnings = (columns: string[]): { preview: string[]; remaining: number } => {\r\n  const preview = formatPreviewList(columns, PREVIEW_WARNING_LIMIT);\r\n  return {\r\n    preview,\r\n    remaining: Math.max(columns.length - preview.length, 0),\r\n  };\r\n};\r\n\r\nexport const buildCaseSampleMap = (\r\n  rows: Array<Record<string, unknown>>,\r\n  limit = PREVIEW_SAMPLE_LIMIT,\r\n): CaseSampleMap => {\r\n  if (!Array.isArray(rows) || !rows.length) {\r\n    return {};\r\n  }\r\n  const map: CaseSampleMap = {};\r\n  rows.forEach((row) => {\r\n    if (!row || typeof row !== 'object') {\r\n      return;\r\n    }\r\n    Object.entries(row).forEach(([rawColumn, rawValue]) => {\r\n      const column = typeof rawColumn === 'string' ? rawColumn.trim() : '';\r\n      if (!column) {\r\n        return;\r\n      }\r\n      let text = '';\r\n      if (rawValue === null || rawValue === undefined) {\r\n        text = '';\r\n      } else if (typeof rawValue === 'string') {\r\n        text = rawValue;\r\n      } else if (typeof rawValue === 'number' || typeof rawValue === 'boolean') {\r\n        text = String(rawValue);\r\n      } else {\r\n        try {\r\n          text = JSON.stringify(rawValue);\r\n        } catch (error) {\r\n          text = String(rawValue);\r\n        }\r\n      }\r\n      if (!text.length) {\r\n        return;\r\n      }\r\n      const original = normalizeDisplay(text);\r\n      const sample: CaseSample = {\r\n        original,\r\n        lower: normalizeDisplay(text.toLowerCase()),\r\n        upper: normalizeDisplay(text.toUpperCase()),\r\n        title: normalizeDisplay(toTitleCase(text)),\r\n        sentence: normalizeDisplay(toSentenceCase(text)),\r\n      };\r\n      const current = map[column] ?? [];\r\n      if (current.find((entry) => entry.original === original)) {\r\n        return;\r\n      }\r\n      if (current.length >= limit) {\r\n        return;\r\n      }\r\n      map[column] = [...current, sample];\r\n    });\r\n  });\r\n  return map;\r\n};\r\n\r\nexport const summarizeCaseSamples = (\r\n  sampleMap: CaseSampleMap,\r\n  columns: string[],\r\n  mode: CaseMode,\r\n  limit = PREVIEW_COLUMN_SAMPLE_LIMIT,\r\n): CaseSamplePreview[] => {\r\n  if (!columns.length) {\r\n    return [];\r\n  }\r\n  const previews: CaseSamplePreview[] = [];\r\n  for (const column of columns) {\r\n    if (previews.length >= limit) {\r\n      break;\r\n    }\r\n    const samples = sampleMap[column];\r\n    if (!samples || !samples.length) {\r\n      continue;\r\n    }\r\n    const values = samples.map((sample) => `${sample.original}  ${sample[mode]}`);\r\n    previews.push({\r\n      column,\r\n      values,\r\n      overflow: 0,\r\n    });\r\n  }\r\n  return previews;\r\n};\r\n\r\nexport const EMPTY_CASE_COLUMN_SUMMARY: CaseColumnSummary = {\r\n  selectedColumns: [],\r\n  autoDetectionActive: true,\r\n  recommendedColumns: [],\r\n  nonTextSelected: [],\r\n  textColumnCount: 0,\r\n  inconsistentColumns: [],\r\n};\r\n","import React from 'react';\r\nimport type { FeatureNodeParameter } from '../../../../api';\r\nimport {\r\n  type CaseColumnSummary,\r\n  type CaseModeDetails,\r\n  type CaseSampleMap,\r\n  CaseMode,\r\n  summarizeCaseRecommendations,\r\n  summarizeCaseSamples,\r\n  summarizeCaseWarnings,\r\n} from './normalizeTextCaseSettings';\r\n\r\nexport type NormalizeTextCaseSectionProps = {\r\n  sourceId?: string | null;\r\n  hasReachableSource: boolean;\r\n  columnsParameter: FeatureNodeParameter | null;\r\n  modeParameter: FeatureNodeParameter | null;\r\n  renderMultiSelectField: (parameter: FeatureNodeParameter) => React.ReactNode;\r\n  renderParameterField: (parameter: FeatureNodeParameter) => React.ReactNode;\r\n  columnSummary: CaseColumnSummary;\r\n  modeDetails: CaseModeDetails;\r\n  sampleMap: CaseSampleMap;\r\n  selectedMode: CaseMode;\r\n};\r\n\r\nexport const NormalizeTextCaseSection: React.FC<NormalizeTextCaseSectionProps> = ({\r\n  sourceId,\r\n  hasReachableSource,\r\n  columnsParameter,\r\n  modeParameter,\r\n  renderMultiSelectField,\r\n  renderParameterField,\r\n  columnSummary,\r\n  modeDetails,\r\n  sampleMap,\r\n  selectedMode,\r\n}) => {\r\n  if (!columnsParameter && !modeParameter) {\r\n    return null;\r\n  }\r\n\r\n  const selectedCount = columnSummary.selectedColumns.length;\r\n  const recommendationSummary = summarizeCaseRecommendations(columnSummary.recommendedColumns);\r\n  const inconsistentSummary = summarizeCaseWarnings(columnSummary.inconsistentColumns);\r\n  const nonTextSummary = summarizeCaseWarnings(columnSummary.nonTextSelected);\r\n  const samplePreviews = summarizeCaseSamples(sampleMap, columnSummary.selectedColumns, selectedMode);\r\n  const hasDatasetContextWarning = !sourceId || !hasReachableSource;\r\n\r\n  return (\r\n    <section className=\"canvas-modal__section\">\r\n      <div className=\"canvas-modal__section-header\">\r\n        <h3>Text case normalization</h3>\r\n      </div>\r\n      <p className=\"canvas-modal__note\">\r\n        <strong>{modeDetails.label}</strong> mode. {modeDetails.guidance} Example: {modeDetails.example}.\r\n      </p>\r\n      {columnSummary.autoDetectionActive ? (\r\n        <p className=\"canvas-modal__note\">\r\n          No columns selected&mdash;text columns will be auto-detected when the node runs.\r\n        </p>\r\n      ) : (\r\n        <p className=\"canvas-modal__note\">\r\n          Targeting <strong>{selectedCount}</strong> column{selectedCount === 1 ? '' : 's'} for case normalization.\r\n        </p>\r\n      )}\r\n      {samplePreviews.length > 0 && (\r\n        <p className=\"canvas-modal__note\">\r\n          Samples: {samplePreviews.map((preview) => `${preview.column} (${preview.values.join('; ')})`).join(' | ')}.\r\n        </p>\r\n      )}\r\n      {inconsistentSummary.preview.length > 0 && (\r\n        <p className=\"canvas-modal__note\">\r\n          Columns with mixed casing: {inconsistentSummary.preview.join(', ')}\r\n          {inconsistentSummary.remaining > 0 ? `, ... (${inconsistentSummary.remaining} more)` : ''}.\r\n        </p>\r\n      )}\r\n      {recommendationSummary.preview.length > 0 && (\r\n        <p className=\"canvas-modal__note\">\r\n          Other text columns: {recommendationSummary.preview.join(', ')}\r\n          {recommendationSummary.remaining > 0 ? `, ... (${recommendationSummary.remaining} more)` : ''}.\r\n        </p>\r\n      )}\r\n      {nonTextSummary.preview.length > 0 && (\r\n        <p className=\"canvas-modal__note canvas-modal__note--warning\">\r\n          {nonTextSummary.preview.join(', ')} {nonTextSummary.preview.length === 1 ? 'is' : 'are'} not text-like.\r\n          {nonTextSummary.remaining > 0\r\n            ? ` ${nonTextSummary.remaining} more column${nonTextSummary.remaining === 1 ? ' is' : 's are'} also non-text.`\r\n            : ' Confirm case normalization is necessary for these values.'}\r\n        </p>\r\n      )}\r\n      {hasDatasetContextWarning ? (\r\n        !sourceId ? (\r\n          <p className=\"canvas-modal__note canvas-modal__note--warning\">\r\n            Select a dataset to inspect column samples before adjusting case.\r\n          </p>\r\n        ) : (\r\n          <p className=\"canvas-modal__note canvas-modal__note--warning\">\r\n            Connect this node to an upstream output to review column insights.\r\n          </p>\r\n        )\r\n      ) : null}\r\n      {columnsParameter && (\r\n        <div className=\"canvas-modal__subsection\">\r\n          <h4>Columns to normalize</h4>\r\n          {renderMultiSelectField(columnsParameter)}\r\n        </div>\r\n      )}\r\n      {modeParameter && (\r\n        <div className=\"canvas-modal__parameter-list\">{renderParameterField(modeParameter)}</div>\r\n      )}\r\n    </section>\r\n  );\r\n};\r\n","import { ensureArrayOfString } from '../../sharedUtils';\r\n\r\nconst REGEX_MODES = ['preset_digits_only', 'preset_letters_only', 'preset_whitespace_collapse', 'custom'] as const;\r\n\r\nexport type RegexMode = (typeof REGEX_MODES)[number];\r\n\r\nexport const DEFAULT_REGEX_MODE: RegexMode = 'preset_digits_only';\r\n\r\nconst TEXTUAL_TYPE_TOKENS = ['string', 'object', 'text', 'category', 'mixed', 'varchar', 'char'];\r\n\r\nconst PREVIEW_SAMPLE_LIMIT = 3;\r\nconst PREVIEW_SAMPLE_LENGTH = 60;\r\nconst PREVIEW_COLUMN_LIMIT = 6;\r\nconst PREVIEW_WARNING_LIMIT = 4;\r\nconst PREVIEW_COLUMN_SAMPLE_LIMIT = 5;\r\n\r\nconst MODE_METADATA: Record<RegexMode, { label: string; guidance: string; example: string }> = {\r\n  preset_digits_only: {\r\n    label: 'Digits only preset',\r\n    guidance: 'Keeps digits while stripping other characters. Useful for IDs or numeric codes.',\r\n    example: 'Order #123A  123',\r\n  },\r\n  preset_letters_only: {\r\n    label: 'Letters only preset',\r\n    guidance: 'Removes digits and symbols, retaining alphabetical characters.',\r\n    example: 'SKU-45X  SKUX',\r\n  },\r\n  preset_whitespace_collapse: {\r\n    label: 'Collapse whitespace preset',\r\n    guidance: 'Replaces runs of whitespace with a single space, trimming leading/trailing spacing.',\r\n    example: 'ACME\\tCorp\\n ACME Corp',\r\n  },\r\n  custom: {\r\n    label: 'Custom regex',\r\n    guidance: 'Applies your regex and replacement text. Supports JavaScript-style regular expressions.',\r\n    example: 'Pattern: /\\d+/g Replacement: \"#\"',\r\n  },\r\n};\r\n\r\nexport type RegexModeDetails = {\r\n  mode: RegexMode;\r\n  label: string;\r\n  guidance: string;\r\n  example: string;\r\n};\r\n\r\nexport type RegexSample = {\r\n  original: string;\r\n  presetDigits: string;\r\n  presetLetters: string;\r\n  presetWhitespace: string;\r\n  hasDigits: boolean;\r\n  hasLetters: boolean;\r\n  hasWhitespaceRuns: boolean;\r\n};\r\n\r\nexport type RegexSampleMap = Record<string, RegexSample[]>;\r\n\r\nexport type RegexSamplePreview = {\r\n  column: string;\r\n  values: string[];\r\n  overflow: number;\r\n};\r\n\r\nexport type RegexColumnSummary = {\r\n  selectedColumns: string[];\r\n  autoDetectionActive: boolean;\r\n  recommendedColumns: string[];\r\n  nonTextSelected: string[];\r\n  textColumnCount: number;\r\n  digitsCandidates: string[];\r\n  lettersCandidates: string[];\r\n  whitespaceCandidates: string[];\r\n};\r\n\r\nconst truncateSampleValue = (value: string): string => {\r\n  if (value.length <= PREVIEW_SAMPLE_LENGTH) {\r\n    return value;\r\n  }\r\n  return `${value.slice(0, PREVIEW_SAMPLE_LENGTH - 1)}...`;\r\n};\r\n\r\nconst normalizeDisplay = (value: string): string => {\r\n  const sanitized = value.replace(/\\r/g, '\\\\r').replace(/\\n/g, '\\\\n').replace(/\\t/g, '\\\\t');\r\n  return `'${truncateSampleValue(sanitized)}'`;\r\n};\r\n\r\nconst isTextLikeType = (dtype?: string | null): boolean => {\r\n  if (!dtype) {\r\n    return false;\r\n  }\r\n  const normalized = dtype.toLowerCase();\r\n  return TEXTUAL_TYPE_TOKENS.some((token) => normalized.includes(token));\r\n};\r\n\r\nconst collapseWhitespace = (value: string): string => value.replace(/\\s+/g, ' ').trim();\r\n\r\nexport const resolveRegexMode = (primary?: unknown, fallback?: unknown): RegexMode => {\r\n  const normalizedPrimary = typeof primary === 'string' ? primary.trim().toLowerCase() : '';\r\n  if (normalizedPrimary && (REGEX_MODES as readonly string[]).includes(normalizedPrimary)) {\r\n    return normalizedPrimary as RegexMode;\r\n  }\r\n  const normalizedFallback = typeof fallback === 'string' ? fallback.trim().toLowerCase() : '';\r\n  if (normalizedFallback && (REGEX_MODES as readonly string[]).includes(normalizedFallback)) {\r\n    return normalizedFallback as RegexMode;\r\n  }\r\n  return DEFAULT_REGEX_MODE;\r\n};\r\n\r\nexport const getRegexModeDetails = (mode: RegexMode): RegexModeDetails => {\r\n  const metadata = MODE_METADATA[mode] ?? MODE_METADATA[DEFAULT_REGEX_MODE];\r\n  return {\r\n    mode,\r\n    label: metadata.label,\r\n    guidance: metadata.guidance,\r\n    example: metadata.example,\r\n  };\r\n};\r\n\r\nconst analyzeRegexCandidates = (sampleMap: RegexSampleMap) => {\r\n  const digitsCandidates = new Set<string>();\r\n  const lettersCandidates = new Set<string>();\r\n  const whitespaceCandidates = new Set<string>();\r\n\r\n  Object.entries(sampleMap).forEach(([column, samples]) => {\r\n    if (!samples.length) {\r\n      return;\r\n    }\r\n    samples.forEach((sample) => {\r\n      if (sample.hasDigits) {\r\n        digitsCandidates.add(column);\r\n      }\r\n      if (sample.hasLetters) {\r\n        lettersCandidates.add(column);\r\n      }\r\n      if (sample.hasWhitespaceRuns) {\r\n        whitespaceCandidates.add(column);\r\n      }\r\n    });\r\n  });\r\n\r\n  const sort = (values: Set<string>) => Array.from(values).sort((a, b) => a.localeCompare(b));\r\n\r\n  return {\r\n    digits: sort(digitsCandidates),\r\n    letters: sort(lettersCandidates),\r\n    whitespace: sort(whitespaceCandidates),\r\n  };\r\n};\r\n\r\ntype BuildRegexColumnSummaryInput = {\r\n  selectedColumns: unknown;\r\n  availableColumns: string[];\r\n  columnTypeMap: Record<string, string>;\r\n  sampleMap: RegexSampleMap;\r\n};\r\n\r\nexport const buildRegexColumnSummary = ({\r\n  selectedColumns,\r\n  availableColumns,\r\n  columnTypeMap,\r\n  sampleMap,\r\n}: BuildRegexColumnSummaryInput): RegexColumnSummary => {\r\n  const uniqueSelected = Array.from(new Set(ensureArrayOfString(selectedColumns)));\r\n  uniqueSelected.sort((a, b) => a.localeCompare(b));\r\n  const selectedSet = new Set(uniqueSelected);\r\n\r\n  const textColumns = availableColumns.filter((column) => isTextLikeType(columnTypeMap[column] ?? null));\r\n  const { digits, letters, whitespace } = analyzeRegexCandidates(sampleMap);\r\n\r\n  const recommendedSet = new Set<string>();\r\n  textColumns.forEach((column) => {\r\n    if (!selectedSet.has(column)) {\r\n      recommendedSet.add(column);\r\n    }\r\n  });\r\n  [...digits, ...letters, ...whitespace].forEach((column) => {\r\n    if (!selectedSet.has(column)) {\r\n      recommendedSet.add(column);\r\n    }\r\n  });\r\n\r\n  const recommendedColumns = Array.from(recommendedSet).sort((a, b) => a.localeCompare(b));\r\n  const nonTextSelected = uniqueSelected.filter((column) => !isTextLikeType(columnTypeMap[column] ?? null));\r\n\r\n  return {\r\n    selectedColumns: uniqueSelected,\r\n    autoDetectionActive: uniqueSelected.length === 0,\r\n    recommendedColumns,\r\n    nonTextSelected,\r\n    textColumnCount: textColumns.length,\r\n    digitsCandidates: digits,\r\n    lettersCandidates: letters,\r\n    whitespaceCandidates: whitespace,\r\n  };\r\n};\r\n\r\nconst formatPreviewList = (values: string[], limit: number): string[] => values.slice(0, limit);\r\n\r\nexport const summarizeRegexRecommendations = (columns: string[]): { preview: string[]; remaining: number } => {\r\n  const preview = formatPreviewList(columns, PREVIEW_COLUMN_LIMIT);\r\n  return {\r\n    preview,\r\n    remaining: Math.max(columns.length - preview.length, 0),\r\n  };\r\n};\r\n\r\nexport const summarizeRegexWarnings = (columns: string[]): { preview: string[]; remaining: number } => {\r\n  const preview = formatPreviewList(columns, PREVIEW_WARNING_LIMIT);\r\n  return {\r\n    preview,\r\n    remaining: Math.max(columns.length - preview.length, 0),\r\n  };\r\n};\r\n\r\nexport const buildRegexSampleMap = (\r\n  rows: Array<Record<string, unknown>>,\r\n  limit = PREVIEW_SAMPLE_LIMIT,\r\n): RegexSampleMap => {\r\n  if (!Array.isArray(rows) || !rows.length) {\r\n    return {};\r\n  }\r\n  const map: RegexSampleMap = {};\r\n  rows.forEach((row) => {\r\n    if (!row || typeof row !== 'object') {\r\n      return;\r\n    }\r\n    Object.entries(row).forEach(([rawColumn, rawValue]) => {\r\n      const column = typeof rawColumn === 'string' ? rawColumn.trim() : '';\r\n      if (!column) {\r\n        return;\r\n      }\r\n      let text = '';\r\n      if (rawValue === null || rawValue === undefined) {\r\n        text = '';\r\n      } else if (typeof rawValue === 'string') {\r\n        text = rawValue;\r\n      } else if (typeof rawValue === 'number' || typeof rawValue === 'boolean') {\r\n        text = String(rawValue);\r\n      } else {\r\n        try {\r\n          text = JSON.stringify(rawValue);\r\n        } catch (error) {\r\n          text = String(rawValue);\r\n        }\r\n      }\r\n      if (!text.length) {\r\n        return;\r\n      }\r\n      const original = normalizeDisplay(text);\r\n      const sample: RegexSample = {\r\n        original,\r\n        presetDigits: normalizeDisplay(text.replace(/\\D+/g, '')),\r\n        presetLetters: normalizeDisplay(text.replace(/[^A-Za-z]+/g, '')),\r\n        presetWhitespace: normalizeDisplay(collapseWhitespace(text)),\r\n        hasDigits: /\\d/.test(text),\r\n        hasLetters: /[A-Za-z]/.test(text),\r\n        hasWhitespaceRuns: /\\s{2,}/.test(text) || /\\t|\\n|\\r/.test(text),\r\n      };\r\n      const current = map[column] ?? [];\r\n      if (current.find((entry) => entry.original === original)) {\r\n        return;\r\n      }\r\n      if (current.length >= limit) {\r\n        return;\r\n      }\r\n      map[column] = [...current, sample];\r\n    });\r\n  });\r\n  return map;\r\n};\r\n\r\nconst formatSamplePair = (sample: RegexSample, mode: RegexMode, replacement: string | null): string => {\r\n  const replacementText = replacement ?? '';\r\n  const format = (value: string) => (value.length ? value : \"''\");\r\n  switch (mode) {\r\n    case 'preset_letters_only':\r\n      return `${format(sample.original)}  ${format(sample.presetLetters)}`;\r\n    case 'preset_whitespace_collapse':\r\n      return `${format(sample.original)}  ${format(sample.presetWhitespace)}`;\r\n    case 'custom': {\r\n      try {\r\n        const regex = new RegExp(replacementText.split('|||')[0] ?? '', replacementText.split('|||')[1] ?? '');\r\n        const result = normalizeDisplay(sample.original.replace(regex, replacementText.split('|||')[2] ?? ''));\r\n        return `${format(sample.original)}  ${format(result)}`;\r\n      } catch (error) {\r\n        return `${format(sample.original)}  (invalid regex)`;\r\n      }\r\n    }\r\n    case 'preset_digits_only':\r\n    default:\r\n      return `${format(sample.original)}  ${format(sample.presetDigits)}`;\r\n  }\r\n};\r\n\r\nexport const summarizeRegexSamples = (\r\n  sampleMap: RegexSampleMap,\r\n  columns: string[],\r\n  mode: RegexMode,\r\n  replacement: string | null,\r\n  limit = PREVIEW_COLUMN_SAMPLE_LIMIT,\r\n): RegexSamplePreview[] => {\r\n  if (!columns.length) {\r\n    return [];\r\n  }\r\n  const previews: RegexSamplePreview[] = [];\r\n  for (const column of columns) {\r\n    if (previews.length >= limit) {\r\n      break;\r\n    }\r\n    const samples = sampleMap[column];\r\n    if (!samples || !samples.length) {\r\n      continue;\r\n    }\r\n    const values = samples.map((sample) => formatSamplePair(sample, mode, replacement));\r\n    previews.push({\r\n      column,\r\n      values,\r\n      overflow: 0,\r\n    });\r\n  }\r\n  return previews;\r\n};\r\n\r\nexport const EMPTY_REGEX_COLUMN_SUMMARY: RegexColumnSummary = {\r\n  selectedColumns: [],\r\n  autoDetectionActive: true,\r\n  recommendedColumns: [],\r\n  nonTextSelected: [],\r\n  textColumnCount: 0,\r\n  digitsCandidates: [],\r\n  lettersCandidates: [],\r\n  whitespaceCandidates: [],\r\n};\r\n","import React from 'react';\r\nimport type { FeatureNodeParameter } from '../../../../api';\r\nimport {\r\n  type RegexColumnSummary,\r\n  type RegexModeDetails,\r\n  type RegexSampleMap,\r\n  RegexMode,\r\n  summarizeRegexRecommendations,\r\n  summarizeRegexSamples,\r\n  summarizeRegexWarnings,\r\n} from './regexCleanupSettings';\r\n\r\nexport type RegexCleanupSectionProps = {\r\n  sourceId?: string | null;\r\n  hasReachableSource: boolean;\r\n  columnsParameter: FeatureNodeParameter | null;\r\n  modeParameter: FeatureNodeParameter | null;\r\n  patternParameter: FeatureNodeParameter | null;\r\n  replacementParameter: FeatureNodeParameter | null;\r\n  renderMultiSelectField: (parameter: FeatureNodeParameter) => React.ReactNode;\r\n  renderParameterField: (parameter: FeatureNodeParameter) => React.ReactNode;\r\n  columnSummary: RegexColumnSummary;\r\n  modeDetails: RegexModeDetails;\r\n  sampleMap: RegexSampleMap;\r\n  selectedMode: RegexMode;\r\n  replacementValue: string | null;\r\n};\r\n\r\nconst describeReplacementValue = (value: string | null): string | null => {\r\n  if (!value) {\r\n    return null;\r\n  }\r\n  const parts = value.split('|||');\r\n  const pattern = parts[0] ?? '';\r\n  const flags = parts[1] ?? '';\r\n  const replacement = parts[2] ?? '';\r\n  if (!pattern.trim() && !replacement.trim()) {\r\n    return null;\r\n  }\r\n  return `Pattern: /${pattern || '(empty)'}/${flags || '(none)'} Replacement: ${replacement || \"''\"}`;\r\n};\r\n\r\nexport const RegexCleanupSection: React.FC<RegexCleanupSectionProps> = ({\r\n  sourceId,\r\n  hasReachableSource,\r\n  columnsParameter,\r\n  modeParameter,\r\n  patternParameter,\r\n  replacementParameter,\r\n  renderMultiSelectField,\r\n  renderParameterField,\r\n  columnSummary,\r\n  modeDetails,\r\n  sampleMap,\r\n  selectedMode,\r\n  replacementValue,\r\n}) => {\r\n  if (!columnsParameter && !modeParameter && !patternParameter && !replacementParameter) {\r\n    return null;\r\n  }\r\n\r\n  const selectedCount = columnSummary.selectedColumns.length;\r\n  const recommendationSummary = summarizeRegexRecommendations(columnSummary.recommendedColumns);\r\n  const digitsSummary = summarizeRegexWarnings(columnSummary.digitsCandidates);\r\n  const lettersSummary = summarizeRegexWarnings(columnSummary.lettersCandidates);\r\n  const whitespaceSummary = summarizeRegexWarnings(columnSummary.whitespaceCandidates);\r\n  const nonTextSummary = summarizeRegexWarnings(columnSummary.nonTextSelected);\r\n  const replacementDescription = describeReplacementValue(replacementValue);\r\n  const samplePreviews = summarizeRegexSamples(sampleMap, columnSummary.selectedColumns, selectedMode, replacementValue);\r\n  const hasDatasetContextWarning = !sourceId || !hasReachableSource;\r\n  const isCustomMode = selectedMode === 'custom';\r\n\r\n  return (\r\n    <section className=\"canvas-modal__section\">\r\n      <div className=\"canvas-modal__section-header\">\r\n        <h3>Regex cleanup</h3>\r\n      </div>\r\n      <p className=\"canvas-modal__note\">\r\n        <strong>{modeDetails.label}</strong> mode. {modeDetails.guidance} Example: {modeDetails.example}.\r\n      </p>\r\n      {replacementDescription && (\r\n        <p className=\"canvas-modal__note\">{replacementDescription}</p>\r\n      )}\r\n      {columnSummary.autoDetectionActive ? (\r\n        <p className=\"canvas-modal__note\">\r\n          No columns selected&mdash;text columns will be auto-detected when the node runs.\r\n        </p>\r\n      ) : (\r\n        <p className=\"canvas-modal__note\">\r\n          Targeting <strong>{selectedCount}</strong> column{selectedCount === 1 ? '' : 's'} for regex cleanup.\r\n        </p>\r\n      )}\r\n      {samplePreviews.length > 0 && (\r\n        <p className=\"canvas-modal__note\">\r\n          Samples: {samplePreviews.map((preview) => `${preview.column} (${preview.values.join('; ')})`).join(' | ')}.\r\n        </p>\r\n      )}\r\n      {digitsSummary.preview.length > 0 && (\r\n        <p className=\"canvas-modal__note\">\r\n          Columns containing digits: {digitsSummary.preview.join(', ')}\r\n          {digitsSummary.remaining > 0 ? `, ... (${digitsSummary.remaining} more)` : ''}.\r\n        </p>\r\n      )}\r\n      {lettersSummary.preview.length > 0 && (\r\n        <p className=\"canvas-modal__note\">\r\n          Columns containing letters: {lettersSummary.preview.join(', ')}\r\n          {lettersSummary.remaining > 0 ? `, ... (${lettersSummary.remaining} more)` : ''}.\r\n        </p>\r\n      )}\r\n      {whitespaceSummary.preview.length > 0 && (\r\n        <p className=\"canvas-modal__note\">\r\n          Columns with repeated whitespace: {whitespaceSummary.preview.join(', ')}\r\n          {whitespaceSummary.remaining > 0 ? `, ... (${whitespaceSummary.remaining} more)` : ''}.\r\n        </p>\r\n      )}\r\n      {recommendationSummary.preview.length > 0 && (\r\n        <p className=\"canvas-modal__note\">\r\n          Other text columns: {recommendationSummary.preview.join(', ')}\r\n          {recommendationSummary.remaining > 0 ? `, ... (${recommendationSummary.remaining} more)` : ''}.\r\n        </p>\r\n      )}\r\n      {nonTextSummary.preview.length > 0 && (\r\n        <p className=\"canvas-modal__note canvas-modal__note--warning\">\r\n          {nonTextSummary.preview.join(', ')} {nonTextSummary.preview.length === 1 ? 'is' : 'are'} not text-like.\r\n          {nonTextSummary.remaining > 0\r\n            ? ` ${nonTextSummary.remaining} more column${nonTextSummary.remaining === 1 ? ' is' : 's are'} also non-text.`\r\n            : ' Confirm regex cleanup is appropriate for these values.'}\r\n        </p>\r\n      )}\r\n      {isCustomMode && !replacementDescription && (\r\n        <p className=\"canvas-modal__note canvas-modal__note--warning\">\r\n          Custom regex mode is enabled, but no pattern or replacement details were detected. Provide both to avoid no-ops.\r\n        </p>\r\n      )}\r\n      {hasDatasetContextWarning ? (\r\n        !sourceId ? (\r\n          <p className=\"canvas-modal__note canvas-modal__note--warning\">\r\n            Select a dataset to inspect column samples before applying regex transformations.\r\n          </p>\r\n        ) : (\r\n          <p className=\"canvas-modal__note canvas-modal__note--warning\">\r\n            Connect this node to an upstream output to review column insights.\r\n          </p>\r\n        )\r\n      ) : null}\r\n      {columnsParameter && (\r\n        <div className=\"canvas-modal__subsection\">\r\n          <h4>Columns to clean</h4>\r\n          {renderMultiSelectField(columnsParameter)}\r\n        </div>\r\n      )}\r\n      {(modeParameter || patternParameter || replacementParameter) && (\r\n        <div className=\"canvas-modal__parameter-list\">\r\n          {modeParameter ? renderParameterField(modeParameter) : null}\r\n          {patternParameter ? renderParameterField(patternParameter) : null}\r\n          {replacementParameter ? renderParameterField(replacementParameter) : null}\r\n        </div>\r\n      )}\r\n    </section>\r\n  );\r\n};\r\n","import { ensureArrayOfString } from '../../sharedUtils';\r\n\r\nconst INVALID_VALUE_MODES = [\r\n  'negative_to_nan',\r\n  'zero_to_nan',\r\n  'percentage_bounds',\r\n  'age_bounds',\r\n  'custom_range',\r\n] as const;\r\n\r\nexport type InvalidValueMode = (typeof INVALID_VALUE_MODES)[number];\r\n\r\nexport const DEFAULT_INVALID_VALUE_MODE: InvalidValueMode = 'negative_to_nan';\r\n\r\nconst NUMERIC_TYPE_TOKENS = [\r\n  'int',\r\n  'float',\r\n  'double',\r\n  'numeric',\r\n  'number',\r\n  'decimal',\r\n  'real',\r\n  'long',\r\n];\r\n\r\nconst SAMPLE_LIMIT = 3;\r\nconst PREVIEW_COLUMN_LIMIT = 6;\r\nconst WARNING_PREVIEW_LIMIT = 4;\r\nconst SAMPLE_PREVIEW_LIMIT = 5;\r\n\r\nconst MODE_METADATA: Record<InvalidValueMode, { label: string; guidance: string; example: string }> = {\r\n  negative_to_nan: {\r\n    label: 'Negative to missing',\r\n    guidance: 'Sets negative readings to missing. Useful for metrics that cannot drop below zero.',\r\n    example: 'Inventory change 3  missing',\r\n  },\r\n  zero_to_nan: {\r\n    label: 'Zero to missing',\r\n    guidance: 'Treats placeholder zeros as missing values.',\r\n    example: 'Temperature 0  missing',\r\n  },\r\n  percentage_bounds: {\r\n    label: 'Percentage bounds',\r\n    guidance: 'Keeps readings within 0-100% unless you provide custom bounds.',\r\n    example: 'Completion 135%  missing',\r\n  },\r\n  age_bounds: {\r\n    label: 'Age bounds',\r\n    guidance: 'Flags implausible ages outside a typical 0-120 range unless overridden.',\r\n    example: 'Customer age 212  missing',\r\n  },\r\n  custom_range: {\r\n    label: 'Custom bounds',\r\n    guidance: 'Applies your minimum/maximum limits to selected columns.',\r\n    example: 'Metric < 10 or > 75  missing',\r\n  },\r\n};\r\n\r\nexport type InvalidValueModeDetails = {\r\n  mode: InvalidValueMode;\r\n  label: string;\r\n  guidance: string;\r\n  example: string;\r\n};\r\n\r\nexport type InvalidValueSample = {\r\n  originalDisplay: string;\r\n  numericValue: number;\r\n  isNegative: boolean;\r\n  isZero: boolean;\r\n};\r\n\r\nexport type InvalidValueSampleMap = Record<string, InvalidValueSample[]>;\r\n\r\nexport type InvalidValueSamplePreview = {\r\n  column: string;\r\n  values: string[];\r\n  overflow: number;\r\n};\r\n\r\nexport type InvalidValueColumnSummary = {\r\n  selectedColumns: string[];\r\n  autoDetectionActive: boolean;\r\n  recommendedColumns: string[];\r\n  nonNumericSelected: string[];\r\n  numericColumnCount: number;\r\n  negativeCandidates: string[];\r\n  zeroCandidates: string[];\r\n  percentageOutliers: string[];\r\n  ageOutliers: string[];\r\n};\r\n\r\nconst normalizeDisplay = (value: string): string => {\r\n  const sanitized = value.replace(/\\r/g, '\\\\r').replace(/\\n/g, '\\\\n').replace(/\\t/g, '\\\\t');\r\n  return sanitized.length <= 60 ? sanitized : `${sanitized.slice(0, 59)}`;\r\n};\r\n\r\nconst coerceNumber = (value: unknown): number | null => {\r\n  if (value === null || value === undefined) {\r\n    return null;\r\n  }\r\n  if (typeof value === 'number') {\r\n    return Number.isFinite(value) ? value : null;\r\n  }\r\n  if (typeof value === 'boolean') {\r\n    return value ? 1 : 0;\r\n  }\r\n  if (typeof value === 'string') {\r\n    const trimmed = value.trim();\r\n    if (!trimmed) {\r\n      return null;\r\n    }\r\n    const numeric = Number(trimmed);\r\n    return Number.isFinite(numeric) ? numeric : null;\r\n  }\r\n  return null;\r\n};\r\n\r\nconst isNumericType = (dtype?: string | null): boolean => {\r\n  if (!dtype) {\r\n    return false;\r\n  }\r\n  const normalized = dtype.toLowerCase();\r\n  return NUMERIC_TYPE_TOKENS.some((token) => normalized.includes(token));\r\n};\r\n\r\nexport const resolveInvalidValueMode = (primary?: unknown, fallback?: unknown): InvalidValueMode => {\r\n  const first = typeof primary === 'string' ? primary.trim().toLowerCase() : '';\r\n  if (first && (INVALID_VALUE_MODES as readonly string[]).includes(first)) {\r\n    return first as InvalidValueMode;\r\n  }\r\n  const second = typeof fallback === 'string' ? fallback.trim().toLowerCase() : '';\r\n  if (second && (INVALID_VALUE_MODES as readonly string[]).includes(second)) {\r\n    return second as InvalidValueMode;\r\n  }\r\n  return DEFAULT_INVALID_VALUE_MODE;\r\n};\r\n\r\nexport const getInvalidValueModeDetails = (mode: InvalidValueMode): InvalidValueModeDetails => {\r\n  const metadata = MODE_METADATA[mode] ?? MODE_METADATA[DEFAULT_INVALID_VALUE_MODE];\r\n  return {\r\n    mode,\r\n    label: metadata.label,\r\n    guidance: metadata.guidance,\r\n    example: metadata.example,\r\n  };\r\n};\r\n\r\nconst analyzeSampleMap = (sampleMap: InvalidValueSampleMap) => {\r\n  const negative = new Set<string>();\r\n  const zeros = new Set<string>();\r\n  const percentage = new Set<string>();\r\n  const age = new Set<string>();\r\n\r\n  Object.entries(sampleMap).forEach(([column, samples]) => {\r\n    samples.forEach((sample) => {\r\n      if (sample.isNegative) {\r\n        negative.add(column);\r\n      }\r\n      if (sample.isZero) {\r\n        zeros.add(column);\r\n      }\r\n      if (sample.numericValue < 0 || sample.numericValue > 100) {\r\n        percentage.add(column);\r\n      }\r\n      if (sample.numericValue < 0 || sample.numericValue > 120) {\r\n        age.add(column);\r\n      }\r\n    });\r\n  });\r\n\r\n  const sort = (values: Set<string>) => Array.from(values).sort((a, b) => a.localeCompare(b));\r\n\r\n  return {\r\n    negative: sort(negative),\r\n    zeros: sort(zeros),\r\n    percentage: sort(percentage),\r\n    age: sort(age),\r\n  };\r\n};\r\n\r\ntype BuildInvalidColumnSummaryInput = {\r\n  selectedColumns: unknown;\r\n  availableColumns: string[];\r\n  columnTypeMap: Record<string, string>;\r\n  sampleMap: InvalidValueSampleMap;\r\n};\r\n\r\nexport const buildInvalidValueColumnSummary = ({\r\n  selectedColumns,\r\n  availableColumns,\r\n  columnTypeMap,\r\n  sampleMap,\r\n}: BuildInvalidColumnSummaryInput): InvalidValueColumnSummary => {\r\n  const uniqueSelected = Array.from(new Set(ensureArrayOfString(selectedColumns))).sort((a, b) => a.localeCompare(b));\r\n  const selectedSet = new Set(uniqueSelected);\r\n\r\n  const numericColumns = availableColumns.filter((column) => isNumericType(columnTypeMap[column] ?? null));\r\n  const numericSet = new Set(numericColumns);\r\n\r\n  const { negative, zeros, percentage, age } = analyzeSampleMap(sampleMap);\r\n\r\n  const recommendedSet = new Set<string>();\r\n  numericColumns.forEach((column) => {\r\n    if (!selectedSet.has(column)) {\r\n      recommendedSet.add(column);\r\n    }\r\n  });\r\n\r\n  [...negative, ...zeros, ...percentage, ...age].forEach((column) => {\r\n    if (!selectedSet.has(column)) {\r\n      recommendedSet.add(column);\r\n    }\r\n  });\r\n\r\n  const nonNumericSelected = uniqueSelected.filter((column) => !numericSet.has(column));\r\n\r\n  return {\r\n    selectedColumns: uniqueSelected,\r\n    autoDetectionActive: uniqueSelected.length === 0,\r\n    recommendedColumns: Array.from(recommendedSet).sort((a, b) => a.localeCompare(b)),\r\n    nonNumericSelected,\r\n    numericColumnCount: numericColumns.length,\r\n    negativeCandidates: negative,\r\n    zeroCandidates: zeros,\r\n    percentageOutliers: percentage,\r\n    ageOutliers: age,\r\n  };\r\n};\r\n\r\nexport const summarizeInvalidRecommendations = (columns: string[]): { preview: string[]; remaining: number } => {\r\n  const preview = columns.slice(0, PREVIEW_COLUMN_LIMIT);\r\n  return {\r\n    preview,\r\n    remaining: Math.max(columns.length - preview.length, 0),\r\n  };\r\n};\r\n\r\nexport const summarizeInvalidWarnings = (columns: string[]): { preview: string[]; remaining: number } => {\r\n  const preview = columns.slice(0, WARNING_PREVIEW_LIMIT);\r\n  return {\r\n    preview,\r\n    remaining: Math.max(columns.length - preview.length, 0),\r\n  };\r\n};\r\n\r\nexport const buildInvalidValueSampleMap = (\r\n  rows: Array<Record<string, unknown>>,\r\n  limit = SAMPLE_LIMIT,\r\n): InvalidValueSampleMap => {\r\n  if (!Array.isArray(rows) || !rows.length) {\r\n    return {};\r\n  }\r\n  const map: InvalidValueSampleMap = {};\r\n  rows.forEach((row) => {\r\n    if (!row || typeof row !== 'object') {\r\n      return;\r\n    }\r\n    Object.entries(row).forEach(([rawColumn, rawValue]) => {\r\n      const column = typeof rawColumn === 'string' ? rawColumn.trim() : '';\r\n      if (!column) {\r\n        return;\r\n      }\r\n      const numericValue = coerceNumber(rawValue);\r\n      if (numericValue === null) {\r\n        return;\r\n      }\r\n      const display = normalizeDisplay(String(rawValue));\r\n      const sample: InvalidValueSample = {\r\n        originalDisplay: display,\r\n        numericValue,\r\n        isNegative: numericValue < 0,\r\n        isZero: Math.abs(numericValue) <= 1e-9,\r\n      };\r\n      const current = map[column] ?? [];\r\n      if (current.find((entry) => entry.originalDisplay === display)) {\r\n        return;\r\n      }\r\n      if (current.length >= limit) {\r\n        return;\r\n      }\r\n      map[column] = [...current, sample];\r\n    });\r\n  });\r\n  return map;\r\n};\r\n\r\nconst DEFAULT_PERCENTAGE_LOWER = 0;\r\nconst DEFAULT_PERCENTAGE_UPPER = 100;\r\nconst DEFAULT_AGE_LOWER = 0;\r\nconst DEFAULT_AGE_UPPER = 120;\r\n\r\nconst evaluateSampleFlag = (\r\n  sample: InvalidValueSample,\r\n  mode: InvalidValueMode,\r\n  minValue: number | null,\r\n  maxValue: number | null,\r\n): { flagged: boolean; reason: string | null } => {\r\n  switch (mode) {\r\n    case 'negative_to_nan': {\r\n      const threshold = minValue ?? 0;\r\n      if (sample.numericValue < threshold) {\r\n        return { flagged: true, reason: `value < ${threshold}` };\r\n      }\r\n      if (maxValue !== null && sample.numericValue > maxValue) {\r\n        return { flagged: true, reason: `value > ${maxValue}` };\r\n      }\r\n      return { flagged: false, reason: null };\r\n    }\r\n    case 'zero_to_nan':\r\n      return {\r\n        flagged: sample.isZero,\r\n        reason: sample.isZero ? 'zero placeholder' : null,\r\n      };\r\n    case 'percentage_bounds': {\r\n      const lower = minValue ?? DEFAULT_PERCENTAGE_LOWER;\r\n      const upper = maxValue ?? DEFAULT_PERCENTAGE_UPPER;\r\n      if (sample.numericValue < lower) {\r\n        return { flagged: true, reason: `value < ${lower}` };\r\n      }\r\n      if (sample.numericValue > upper) {\r\n        return { flagged: true, reason: `value > ${upper}` };\r\n      }\r\n      return { flagged: false, reason: null };\r\n    }\r\n    case 'age_bounds': {\r\n      const lower = minValue ?? DEFAULT_AGE_LOWER;\r\n      const upper = maxValue ?? DEFAULT_AGE_UPPER;\r\n      if (sample.numericValue < lower) {\r\n        return { flagged: true, reason: `value < ${lower}` };\r\n      }\r\n      if (sample.numericValue > upper) {\r\n        return { flagged: true, reason: `value > ${upper}` };\r\n      }\r\n      return { flagged: false, reason: null };\r\n    }\r\n    case 'custom_range':\r\n    default: {\r\n      const hasLower = minValue !== null && minValue !== undefined;\r\n      const hasUpper = maxValue !== null && maxValue !== undefined;\r\n      if (!hasLower && !hasUpper) {\r\n        return { flagged: false, reason: null };\r\n      }\r\n      if (hasLower && sample.numericValue < (minValue as number)) {\r\n        return { flagged: true, reason: `value < ${minValue}` };\r\n      }\r\n      if (hasUpper && sample.numericValue > (maxValue as number)) {\r\n        return { flagged: true, reason: `value > ${maxValue}` };\r\n      }\r\n      return { flagged: false, reason: null };\r\n    }\r\n  }\r\n};\r\n\r\nconst formatPreviewLine = (\r\n  sample: InvalidValueSample,\r\n  mode: InvalidValueMode,\r\n  minValue: number | null,\r\n  maxValue: number | null,\r\n): string => {\r\n  const { flagged, reason } = evaluateSampleFlag(sample, mode, minValue, maxValue);\r\n  if (!flagged) {\r\n    return `${sample.originalDisplay}  ok`;\r\n  }\r\n  return `${sample.originalDisplay}  flagged (${reason ?? 'rule match'})`;\r\n};\r\n\r\nexport const summarizeInvalidSamples = (\r\n  sampleMap: InvalidValueSampleMap,\r\n  columns: string[],\r\n  mode: InvalidValueMode,\r\n  minValue: number | null,\r\n  maxValue: number | null,\r\n  limit = SAMPLE_PREVIEW_LIMIT,\r\n): InvalidValueSamplePreview[] => {\r\n  if (!columns.length) {\r\n    return [];\r\n  }\r\n  const previews: InvalidValueSamplePreview[] = [];\r\n  for (const column of columns) {\r\n    if (previews.length >= limit) {\r\n      break;\r\n    }\r\n    const samples = sampleMap[column];\r\n    if (!samples || !samples.length) {\r\n      continue;\r\n    }\r\n    previews.push({\r\n      column,\r\n      values: samples.map((sample) => formatPreviewLine(sample, mode, minValue, maxValue)),\r\n      overflow: 0,\r\n    });\r\n  }\r\n  return previews;\r\n};\r\n\r\nexport const EMPTY_INVALID_VALUE_COLUMN_SUMMARY: InvalidValueColumnSummary = {\r\n  selectedColumns: [],\r\n  autoDetectionActive: true,\r\n  recommendedColumns: [],\r\n  nonNumericSelected: [],\r\n  numericColumnCount: 0,\r\n  negativeCandidates: [],\r\n  zeroCandidates: [],\r\n  percentageOutliers: [],\r\n  ageOutliers: [],\r\n};","import React from 'react';\r\nimport type { FeatureNodeParameter } from '../../../../api';\r\nimport {\r\n  type InvalidValueColumnSummary,\r\n  type InvalidValueMode,\r\n  type InvalidValueModeDetails,\r\n  type InvalidValueSampleMap,\r\n  summarizeInvalidRecommendations,\r\n  summarizeInvalidSamples,\r\n  summarizeInvalidWarnings,\r\n} from './replaceInvalidValuesSettings';\r\n\r\nexport type ReplaceInvalidValuesSectionProps = {\r\n  sourceId?: string | null;\r\n  hasReachableSource: boolean;\r\n  columnsParameter: FeatureNodeParameter | null;\r\n  modeParameter: FeatureNodeParameter | null;\r\n  minValueParameter: FeatureNodeParameter | null;\r\n  maxValueParameter: FeatureNodeParameter | null;\r\n  renderMultiSelectField: (parameter: FeatureNodeParameter) => React.ReactNode;\r\n  renderParameterField: (parameter: FeatureNodeParameter) => React.ReactNode;\r\n  columnSummary: InvalidValueColumnSummary;\r\n  modeDetails: InvalidValueModeDetails;\r\n  sampleMap: InvalidValueSampleMap;\r\n  selectedMode: InvalidValueMode;\r\n  minValue: number | null;\r\n  maxValue: number | null;\r\n};\r\n\r\nconst formatBoundsDescription = (mode: InvalidValueMode, minValue: number | null, maxValue: number | null): string | null => {\r\n  if (mode === 'custom_range') {\r\n    if (minValue === null && maxValue === null) {\r\n      return 'Specify a minimum and/or maximum to enable the custom range rule.';\r\n    }\r\n    const lower = minValue === null ? '-' : String(minValue);\r\n    const upper = maxValue === null ? '' : String(maxValue);\r\n    return `Custom bounds active: [${lower}, ${upper}].`;\r\n  }\r\n  if (mode === 'percentage_bounds') {\r\n    const lower = minValue ?? 0;\r\n    const upper = maxValue ?? 100;\r\n    return `Using percentage bounds ${lower}${upper}.`;\r\n  }\r\n  if (mode === 'age_bounds') {\r\n    const lower = minValue ?? 0;\r\n    const upper = maxValue ?? 120;\r\n    return `Using age bounds ${lower}${upper}.`;\r\n  }\r\n  if (mode === 'negative_to_nan' && (minValue !== null || maxValue !== null)) {\r\n    const lower = minValue ?? 0;\r\n    return maxValue === null\r\n      ? `Negative-to-missing rule overrides values below ${lower}.`\r\n      : `Negative-to-missing rule overrides values < ${lower} or > ${maxValue}.`;\r\n  }\r\n  return null;\r\n};\r\n\r\nexport const ReplaceInvalidValuesSection: React.FC<ReplaceInvalidValuesSectionProps> = ({\r\n  sourceId,\r\n  hasReachableSource,\r\n  columnsParameter,\r\n  modeParameter,\r\n  minValueParameter,\r\n  maxValueParameter,\r\n  renderMultiSelectField,\r\n  renderParameterField,\r\n  columnSummary,\r\n  modeDetails,\r\n  sampleMap,\r\n  selectedMode,\r\n  minValue,\r\n  maxValue,\r\n}) => {\r\n  if (!columnsParameter && !modeParameter && !minValueParameter && !maxValueParameter) {\r\n    return null;\r\n  }\r\n\r\n  const { selectedColumns, autoDetectionActive } = columnSummary;\r\n  const selectedCount = selectedColumns.length;\r\n  const recommendationSummary = summarizeInvalidRecommendations(columnSummary.recommendedColumns);\r\n  const negativeSummary = summarizeInvalidWarnings(columnSummary.negativeCandidates);\r\n  const zeroSummary = summarizeInvalidWarnings(columnSummary.zeroCandidates);\r\n  const percentageSummary = summarizeInvalidWarnings(columnSummary.percentageOutliers);\r\n  const ageSummary = summarizeInvalidWarnings(columnSummary.ageOutliers);\r\n  const nonNumericSummary = summarizeInvalidWarnings(columnSummary.nonNumericSelected);\r\n  const samplePreviews = summarizeInvalidSamples(sampleMap, selectedColumns, selectedMode, minValue, maxValue);\r\n  const boundsDescription = formatBoundsDescription(selectedMode, minValue, maxValue);\r\n  const hasDatasetContextWarning = !sourceId || !hasReachableSource;\r\n\r\n  return (\r\n    <section className=\"canvas-modal__section\">\r\n      <div className=\"canvas-modal__section-header\">\r\n        <h3>Replace invalid numeric values</h3>\r\n      </div>\r\n      <p className=\"canvas-modal__note\">\r\n        <strong>{modeDetails.label}</strong> rule. {modeDetails.guidance} Example: {modeDetails.example}.\r\n      </p>\r\n      {boundsDescription && <p className=\"canvas-modal__note\">{boundsDescription}</p>}\r\n      {autoDetectionActive ? (\r\n        <p className=\"canvas-modal__note\">\r\n          No columns selected&mdash;numeric columns will be auto-detected when the node runs.\r\n        </p>\r\n      ) : (\r\n        <p className=\"canvas-modal__note\">\r\n          Targeting <strong>{selectedCount}</strong> column{selectedCount === 1 ? '' : 's'} for invalid value cleanup.\r\n        </p>\r\n      )}\r\n      {samplePreviews.length > 0 && (\r\n        <p className=\"canvas-modal__note\">\r\n          Samples: {samplePreviews.map((preview) => `${preview.column} (${preview.values.join('; ')})`).join(' | ')}.\r\n        </p>\r\n      )}\r\n      {negativeSummary.preview.length > 0 && (\r\n        <p className=\"canvas-modal__note\">\r\n          Columns with negative values: {negativeSummary.preview.join(', ')}\r\n          {negativeSummary.remaining > 0 ? `, ... (${negativeSummary.remaining} more)` : ''}.\r\n        </p>\r\n      )}\r\n      {zeroSummary.preview.length > 0 && (\r\n        <p className=\"canvas-modal__note\">\r\n          Columns with placeholder zeros: {zeroSummary.preview.join(', ')}\r\n          {zeroSummary.remaining > 0 ? `, ... (${zeroSummary.remaining} more)` : ''}.\r\n        </p>\r\n      )}\r\n      {percentageSummary.preview.length > 0 && (\r\n        <p className=\"canvas-modal__note\">\r\n          Percentage candidates with values outside 0-100: {percentageSummary.preview.join(', ')}\r\n          {percentageSummary.remaining > 0 ? `, ... (${percentageSummary.remaining} more)` : ''}.\r\n        </p>\r\n      )}\r\n      {ageSummary.preview.length > 0 && (\r\n        <p className=\"canvas-modal__note\">\r\n          Age-like values outside 0-120: {ageSummary.preview.join(', ')}\r\n          {ageSummary.remaining > 0 ? `, ... (${ageSummary.remaining} more)` : ''}.\r\n        </p>\r\n      )}\r\n      {recommendationSummary.preview.length > 0 && (\r\n        <p className=\"canvas-modal__note\">\r\n          Other numeric columns: {recommendationSummary.preview.join(', ')}\r\n          {recommendationSummary.remaining > 0 ? `, ... (${recommendationSummary.remaining} more)` : ''}.\r\n        </p>\r\n      )}\r\n      {nonNumericSummary.preview.length > 0 && (\r\n        <p className=\"canvas-modal__note canvas-modal__note--warning\">\r\n          {nonNumericSummary.preview.join(', ')} {nonNumericSummary.preview.length === 1 ? 'is' : 'are'} not numeric-type columns.\r\n          {nonNumericSummary.remaining > 0\r\n            ? ` ${nonNumericSummary.remaining} more column${nonNumericSummary.remaining === 1 ? ' is' : 's are'} also non-numeric.`\r\n            : ' Verify the selection or adjust the rule.'}\r\n        </p>\r\n      )}\r\n      {hasDatasetContextWarning ? (\r\n        !sourceId ? (\r\n          <p className=\"canvas-modal__note canvas-modal__note--warning\">\r\n            Select a dataset to inspect numeric samples before applying replacements.\r\n          </p>\r\n        ) : (\r\n          <p className=\"canvas-modal__note canvas-modal__note--warning\">\r\n            Connect this node to an upstream output to review numeric insights.\r\n          </p>\r\n        )\r\n      ) : null}\r\n      {columnsParameter && (\r\n        <div className=\"canvas-modal__subsection\">\r\n          <h4>Columns to clean</h4>\r\n          {renderMultiSelectField(columnsParameter)}\r\n        </div>\r\n      )}\r\n      {(modeParameter || minValueParameter || maxValueParameter) && (\r\n        <div className=\"canvas-modal__parameter-list\">\r\n          {modeParameter ? renderParameterField(modeParameter) : null}\r\n          {minValueParameter ? renderParameterField(minValueParameter) : null}\r\n          {maxValueParameter ? renderParameterField(maxValueParameter) : null}\r\n        </div>\r\n      )}\r\n    </section>\r\n  );\r\n};\r\n","let urlAlphabet =\n  'useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict'\nlet customAlphabet = (alphabet, defaultSize = 21) => {\n  return (size = defaultSize) => {\n    let id = ''\n    let i = size | 0\n    while (i--) {\n      id += alphabet[(Math.random() * alphabet.length) | 0]\n    }\n    return id\n  }\n}\nlet nanoid = (size = 21) => {\n  let id = ''\n  let i = size | 0\n  while (i--) {\n    id += urlAlphabet[(Math.random() * 64) | 0]\n  }\n  return id\n}\nexport { nanoid, customAlphabet }\n","import { nanoid } from 'nanoid/non-secure';\r\nimport type { FeatureMathNodeSignal } from '../../../../api';\r\n\r\nexport type FeatureMathOperationType =\r\n  | 'arithmetic'\r\n  | 'ratio'\r\n  | 'stat'\r\n  | 'similarity'\r\n  | 'datetime_extract';\r\n\r\ntype MethodOption = {\r\n  value: string;\r\n  label: string;\r\n  description?: string;\r\n};\r\n\r\nexport type FeatureMathOperationDraft = {\r\n  id: string;\r\n  type: FeatureMathOperationType;\r\n  method: string;\r\n  inputColumns: string[];\r\n  secondaryColumns: string[];\r\n  constants: number[];\r\n  outputColumn: string;\r\n  outputPrefix: string;\r\n  datetimeFeatures: string[];\r\n  timezone: string;\r\n  fillna: number | null;\r\n  roundDigits: number | null;\r\n  normalize: boolean;\r\n  epsilon: number | null;\r\n  allowOverwrite: boolean | null;\r\n  description?: string;\r\n};\r\n\r\nexport type FeatureMathOperationSummary = {\r\n  id: string;\r\n  label: string;\r\n  status?: FeatureMathNodeSignal['operations'][number]['status'];\r\n  message?: string;\r\n  outputColumns: string[];\r\n};\r\n\r\nconst ARITHMETIC_METHODS: MethodOption[] = [\r\n  { value: 'add', label: 'Addition (+)' },\r\n  { value: 'subtract', label: 'Subtraction ()' },\r\n  { value: 'multiply', label: 'Multiplication ()' },\r\n  { value: 'divide', label: 'Division ()' },\r\n];\r\n\r\nconst STAT_METHODS: MethodOption[] = [\r\n  { value: 'sum', label: 'Sum' },\r\n  { value: 'mean', label: 'Mean' },\r\n  { value: 'min', label: 'Minimum' },\r\n  { value: 'max', label: 'Maximum' },\r\n  { value: 'std', label: 'Standard deviation' },\r\n  { value: 'median', label: 'Median' },\r\n  { value: 'count', label: 'Count (non-missing)' },\r\n  { value: 'range', label: 'Range (max - min)' },\r\n];\r\n\r\nconst SIMILARITY_METHODS: MethodOption[] = [\r\n  {\r\n    value: 'token_sort_ratio',\r\n    label: 'Token Sort  Same words, ignore order',\r\n    description: 'Split into words, sort alphabetically, then compare. Great when the same words appear in different order.',\r\n  },\r\n  {\r\n    value: 'token_set_ratio',\r\n    label: 'Token Set  Unique words, ignore extras',\r\n    description: 'Focus on overlapping unique words and down-weight extras. Best when one string has additional words.',\r\n  },\r\n  {\r\n    value: 'ratio',\r\n    label: 'Character Ratio  Raw string similarity',\r\n    description: 'Compare characters in order using edit distance. Sensitive to spelling differences.',\r\n  },\r\n];\r\n\r\nexport const DATETIME_FEATURE_OPTIONS: Array<{ value: string; label: string }> = [\r\n  { value: 'year', label: 'Year' },\r\n  { value: 'quarter', label: 'Quarter' },\r\n  { value: 'month', label: 'Month' },\r\n  { value: 'month_name', label: 'Month name' },\r\n  { value: 'week', label: 'ISO week number' },\r\n  { value: 'day', label: 'Day of month' },\r\n  { value: 'day_name', label: 'Day name' },\r\n  { value: 'weekday', label: 'Weekday index (Mon=0)' },\r\n  { value: 'is_weekend', label: 'Is weekend' },\r\n  { value: 'hour', label: 'Hour' },\r\n  { value: 'minute', label: 'Minute' },\r\n  { value: 'second', label: 'Second' },\r\n  { value: 'season', label: 'Season' },\r\n  { value: 'time_of_day', label: 'Time of day bucket' },\r\n];\r\n\r\nconst DATETIME_FEATURE_SET = new Set(DATETIME_FEATURE_OPTIONS.map((option) => option.value));\r\n\r\nexport const FEATURE_MATH_TYPE_OPTIONS: Array<{\r\n  value: FeatureMathOperationType;\r\n  label: string;\r\n  description: string;\r\n  defaultMethod: string;\r\n}> = [\r\n  {\r\n    value: 'arithmetic',\r\n    label: 'Arithmetic',\r\n    description: 'Combine columns and constants using addition, subtraction, multiplication, or division.',\r\n    defaultMethod: 'add',\r\n  },\r\n  {\r\n    value: 'ratio',\r\n    label: 'Ratio',\r\n    description: 'Divide one column or group of columns by another with safe zero handling.',\r\n    defaultMethod: 'ratio',\r\n  },\r\n  {\r\n    value: 'stat',\r\n    label: 'Statistics',\r\n    description: 'Compute sums, averages, min/max, or dispersion metrics across columns.',\r\n    defaultMethod: 'mean',\r\n  },\r\n  {\r\n    value: 'similarity',\r\n    label: 'Text similarity',\r\n    description: 'Score two text columns using rapidfuzz token-based similarity.',\r\n    defaultMethod: 'token_sort_ratio',\r\n  },\r\n  {\r\n    value: 'datetime_extract',\r\n    label: 'Datetime extraction',\r\n    description: 'Expand datetime columns into year, month, weekday, season and similar features.',\r\n    defaultMethod: 'datetime_extract',\r\n  },\r\n];\r\n\r\nconst DEFAULT_TIMEZONE = 'UTC';\r\n\r\nconst coerceStringArray = (value: unknown): string[] => {\r\n  if (!value) {\r\n    return [];\r\n  }\r\n  if (Array.isArray(value)) {\r\n    return Array.from(\r\n      new Set(\r\n        value\r\n          .map((entry) => (typeof entry === 'string' ? entry.trim() : String(entry ?? '').trim()))\r\n          .filter((entry) => entry.length > 0),\r\n      ),\r\n    ).sort((a, b) => a.localeCompare(b));\r\n  }\r\n  if (typeof value === 'string') {\r\n    return coerceStringArray(value.split(','));\r\n  }\r\n  return [];\r\n};\r\n\r\nconst coerceNumberArray = (value: unknown): number[] => {\r\n  if (!value) {\r\n    return [];\r\n  }\r\n  if (Array.isArray(value)) {\r\n    const parsed: number[] = [];\r\n    value.forEach((entry) => {\r\n      const numeric = Number(entry);\r\n      if (Number.isFinite(numeric)) {\r\n        parsed.push(numeric);\r\n      }\r\n    });\r\n    return parsed;\r\n  }\r\n  if (typeof value === 'string') {\r\n    return coerceNumberArray(value.split(/[;,]+/));\r\n  }\r\n  const numeric = Number(value);\r\n  return Number.isFinite(numeric) ? [numeric] : [];\r\n};\r\n\r\nconst coerceNumber = (value: unknown): number | null => {\r\n  const numeric = Number(value);\r\n  return Number.isFinite(numeric) ? numeric : null;\r\n};\r\n\r\nconst coerceBoolean = (value: unknown, fallback: boolean): boolean => {\r\n  if (typeof value === 'boolean') {\r\n    return value;\r\n  }\r\n  if (typeof value === 'number') {\r\n    if (!Number.isFinite(value)) {\r\n      return fallback;\r\n    }\r\n    return value !== 0;\r\n  }\r\n  if (typeof value === 'string') {\r\n    const normalized = value.trim().toLowerCase();\r\n    if (!normalized) {\r\n      return fallback;\r\n    }\r\n    if (['true', '1', 'yes', 'y', 'on'].includes(normalized)) {\r\n      return true;\r\n    }\r\n    if (['false', '0', 'no', 'n', 'off'].includes(normalized)) {\r\n      return false;\r\n    }\r\n  }\r\n  return fallback;\r\n};\r\n\r\nconst normalizeMethod = (type: FeatureMathOperationType, method: unknown): string => {\r\n  if (typeof method !== 'string') {\r\n    return FEATURE_MATH_TYPE_OPTIONS.find((option) => option.value === type)?.defaultMethod ?? '';\r\n  }\r\n  const normalized = method.trim().toLowerCase();\r\n  if (!normalized) {\r\n    return FEATURE_MATH_TYPE_OPTIONS.find((option) => option.value === type)?.defaultMethod ?? '';\r\n  }\r\n  if (type === 'arithmetic') {\r\n    return ARITHMETIC_METHODS.find((option) => option.value === normalized)?.value ?? 'add';\r\n  }\r\n  if (type === 'stat') {\r\n    return STAT_METHODS.find((option) => option.value === normalized)?.value ?? 'mean';\r\n  }\r\n  if (type === 'similarity') {\r\n    return SIMILARITY_METHODS.find((option) => option.value === normalized)?.value ?? 'token_sort_ratio';\r\n  }\r\n  if (type === 'ratio') {\r\n    return 'ratio';\r\n  }\r\n  if (type === 'datetime_extract') {\r\n    return 'datetime_extract';\r\n  }\r\n  return normalized;\r\n};\r\n\r\nconst normalizeType = (value: unknown): FeatureMathOperationType => {\r\n  if (typeof value !== 'string') {\r\n    return 'arithmetic';\r\n  }\r\n  const normalized = value.trim().toLowerCase();\r\n  if (\r\n    normalized === 'arithmetic' ||\r\n    normalized === 'ratio' ||\r\n    normalized === 'stat' ||\r\n    normalized === 'similarity' ||\r\n    normalized === 'datetime_extract'\r\n  ) {\r\n    return normalized;\r\n  }\r\n  return 'arithmetic';\r\n};\r\n\r\nconst normalizeDatetimeFeatures = (value: unknown): string[] => {\r\n  const entries = coerceStringArray(value);\r\n  if (!entries.length) {\r\n    return ['year', 'month', 'day'];\r\n  }\r\n  return entries.filter((entry) => DATETIME_FEATURE_SET.has(entry));\r\n};\r\n\r\nconst normalizeTimezone = (value: unknown): string => {\r\n  if (typeof value !== 'string') {\r\n    return DEFAULT_TIMEZONE;\r\n  }\r\n  const normalized = value.trim();\r\n  return normalized || DEFAULT_TIMEZONE;\r\n};\r\n\r\nexport const normalizeFeatureMathOperations = (raw: unknown): FeatureMathOperationDraft[] => {\r\n  if (!Array.isArray(raw)) {\r\n    return [];\r\n  }\r\n\r\n  const operations: FeatureMathOperationDraft[] = [];\r\n  raw.forEach((entry, index) => {\r\n    if (!entry || typeof entry !== 'object') {\r\n      return;\r\n    }\r\n    const payload = entry as Record<string, unknown>;\r\n    const type = normalizeType(payload.operation_type ?? payload.type);\r\n    const idValue = payload.operation_id ?? payload.id ?? `feature_math_${index + 1}`;\r\n    const id = typeof idValue === 'string' && idValue.trim() ? idValue.trim() : `feature_math_${index + 1}`;\r\n    const method = normalizeMethod(type, payload.method);\r\n    const inputColumns = coerceStringArray(payload.input_columns ?? payload.inputs ?? payload.inputColumns);\r\n    const secondaryColumns = coerceStringArray(payload.secondary_columns ?? payload.denominator ?? payload.secondaryColumns);\r\n    const constants = coerceNumberArray(payload.constants);\r\n    const outputColumn = typeof payload.output_column === 'string' ? payload.output_column.trim() : '';\r\n    const outputPrefix = typeof payload.output_prefix === 'string' ? payload.output_prefix.trim() : '';\r\n    const datetimeFeatures =\r\n      type === 'datetime_extract' ? normalizeDatetimeFeatures(payload.datetime_features) : [];\r\n    const timezone =\r\n      type === 'datetime_extract' ? normalizeTimezone(payload.timezone) : DEFAULT_TIMEZONE;\r\n    const fillna = coerceNumber(payload.fillna);\r\n    const roundDigits = (() => {\r\n      const value = coerceNumber(payload.round ?? payload.round_digits);\r\n      return Number.isInteger(value ?? NaN) ? (value as number) : value;\r\n    })();\r\n    const epsilon = coerceNumber(payload.epsilon);\r\n    const normalizeValue = type === 'similarity' ? coerceBoolean(payload.normalize, false) : false;\r\n    const allowOverwrite = payload.allow_overwrite === undefined ? null : coerceBoolean(payload.allow_overwrite, false);\r\n    const description = typeof payload.description === 'string' ? payload.description : undefined;\r\n\r\n    operations.push({\r\n      id,\r\n      type,\r\n      method,\r\n      inputColumns,\r\n      secondaryColumns,\r\n      constants,\r\n      outputColumn,\r\n      outputPrefix,\r\n      datetimeFeatures,\r\n      timezone,\r\n      fillna,\r\n      roundDigits,\r\n      normalize: normalizeValue,\r\n      epsilon,\r\n      allowOverwrite,\r\n      description,\r\n    });\r\n  });\r\n\r\n  return operations;\r\n};\r\n\r\nconst sanitizeOperation = (operation: FeatureMathOperationDraft) => {\r\n  const result: Record<string, unknown> = {\r\n    id: operation.id,\r\n    operation_id: operation.id,\r\n    type: operation.type,\r\n    operation_type: operation.type,\r\n    method: operation.method,\r\n    input_columns: operation.inputColumns,\r\n    secondary_columns: operation.secondaryColumns,\r\n    constants: operation.constants,\r\n    output_column: operation.outputColumn,\r\n    output_prefix: operation.outputPrefix,\r\n  };\r\n\r\n  if (operation.type === 'datetime_extract') {\r\n    result.datetime_features = operation.datetimeFeatures.length\r\n      ? operation.datetimeFeatures\r\n      : ['year', 'month', 'day'];\r\n    result.timezone = operation.timezone || DEFAULT_TIMEZONE;\r\n  } else if (operation.datetimeFeatures.length) {\r\n    result.datetime_features = operation.datetimeFeatures;\r\n  }\r\n\r\n  if (operation.type === 'similarity') {\r\n    result.normalize = operation.normalize;\r\n  }\r\n\r\n  if (operation.fillna !== null && Number.isFinite(operation.fillna)) {\r\n    result.fillna = operation.fillna;\r\n  }\r\n  if (operation.roundDigits !== null && Number.isFinite(operation.roundDigits)) {\r\n    result.round = operation.roundDigits;\r\n    result.round_digits = operation.roundDigits;\r\n  }\r\n  if (operation.epsilon !== null && Number.isFinite(operation.epsilon)) {\r\n    result.epsilon = operation.epsilon;\r\n  }\r\n  if (operation.allowOverwrite !== null) {\r\n    result.allow_overwrite = operation.allowOverwrite;\r\n  }\r\n\r\n  if (operation.description && operation.description.trim()) {\r\n    result.description = operation.description.trim();\r\n  }\r\n\r\n  return result;\r\n};\r\n\r\nexport const serializeFeatureMathOperations = (operations: FeatureMathOperationDraft[]): any[] =>\r\n  operations.map((operation) => sanitizeOperation(operation));\r\n\r\nconst DEFAULT_OPERATION_INIT: Record<FeatureMathOperationType, Partial<FeatureMathOperationDraft>> = {\r\n  arithmetic: {\r\n    method: 'add',\r\n    constants: [],\r\n  },\r\n  ratio: {\r\n    method: 'ratio',\r\n    constants: [],\r\n  },\r\n  stat: {\r\n    method: 'mean',\r\n    constants: [],\r\n  },\r\n  similarity: {\r\n    method: 'token_sort_ratio',\r\n    constants: [],\r\n    normalize: false,\r\n  },\r\n  datetime_extract: {\r\n    method: 'datetime_extract',\r\n    datetimeFeatures: ['year', 'month', 'day'],\r\n  },\r\n};\r\n\r\nexport const createFeatureMathOperation = (\r\n  type: FeatureMathOperationType,\r\n  existingIds: Set<string>,\r\n): FeatureMathOperationDraft => {\r\n  const defaultConfig = DEFAULT_OPERATION_INIT[type] ?? {};\r\n  let id = `math_${type}_${nanoid(6)}`;\r\n  while (existingIds.has(id)) {\r\n    id = `math_${type}_${nanoid(6)}`;\r\n  }\r\n\r\n  return {\r\n    id,\r\n    type,\r\n    method: defaultConfig.method ?? FEATURE_MATH_TYPE_OPTIONS.find((option) => option.value === type)?.defaultMethod ?? 'add',\r\n    inputColumns: [],\r\n    secondaryColumns: [],\r\n    constants: defaultConfig.constants ?? [],\r\n    outputColumn: '',\r\n    outputPrefix: '',\r\n    datetimeFeatures:\r\n      type === 'datetime_extract'\r\n        ? defaultConfig.datetimeFeatures ?? ['year', 'month', 'day']\r\n        : [],\r\n    timezone: DEFAULT_TIMEZONE,\r\n    fillna: null,\r\n    roundDigits: null,\r\n    normalize: defaultConfig.normalize ?? false,\r\n    epsilon: null,\r\n    allowOverwrite: null,\r\n    description: undefined,\r\n  };\r\n};\r\n\r\nexport const buildFeatureMathSummaries = (\r\n  operations: FeatureMathOperationDraft[],\r\n  signals: FeatureMathNodeSignal[] | undefined,\r\n): FeatureMathOperationSummary[] => {\r\n  const signalMap = new Map<string, FeatureMathNodeSignal['operations'][number]>();\r\n  signals?.forEach((signal) => {\r\n    signal.operations.forEach((operation) => {\r\n      if (!signalMap.has(operation.operation_id)) {\r\n        signalMap.set(operation.operation_id, operation);\r\n      }\r\n    });\r\n  });\r\n\r\n  return operations.map((operation, index) => {\r\n    const signal = signalMap.get(operation.id);\r\n    const label = `${index + 1}. ${operation.type.replace('_', ' ')}${operation.method ? `  ${operation.method}` : ''}`;\r\n    return {\r\n      id: operation.id,\r\n      label,\r\n      status: signal?.status,\r\n      message: signal?.message ?? undefined,\r\n      outputColumns: signal?.output_columns ?? [],\r\n    };\r\n  });\r\n};\r\n\r\nexport const getMethodOptions = (type: FeatureMathOperationType): MethodOption[] => {\r\n  if (type === 'arithmetic') {\r\n    return ARITHMETIC_METHODS;\r\n  }\r\n  if (type === 'stat') {\r\n    return STAT_METHODS;\r\n  }\r\n  if (type === 'similarity') {\r\n    return SIMILARITY_METHODS;\r\n  }\r\n  if (type === 'ratio') {\r\n    return [{ value: 'ratio', label: 'Ratio (numerator / denominator)' }];\r\n  }\r\n  return [{ value: 'datetime_extract', label: 'Extract datetime parts' }];\r\n};\r\n\r\nexport const getSimilarityMethodDescription = (method: string): string => {\r\n  const entry = SIMILARITY_METHODS.find((option) => option.value === method);\r\n  if (entry?.description) {\r\n    return entry.description;\r\n  }\r\n  return 'Compare the input text columns using the selected similarity technique.';\r\n};\r\n","import React, { ChangeEvent, useEffect, useMemo, useState } from 'react';\r\nimport type {\r\n  FeatureMathNodeSignal,\r\n  FeatureMathOperationStatus,\r\n  FeatureNodeParameter,\r\n} from '../../../../api';\r\nimport {\r\n  DATETIME_FEATURE_OPTIONS,\r\n  FEATURE_MATH_TYPE_OPTIONS,\r\n  FeatureMathOperationDraft,\r\n  FeatureMathOperationSummary,\r\n  FeatureMathOperationType,\r\n  getMethodOptions,\r\n  getSimilarityMethodDescription,\r\n} from './featureMathSettings';\r\n\r\nconst STATUS_LABELS: Record<FeatureMathOperationStatus, string> = {\r\n  applied: 'Applied',\r\n  skipped: 'Skipped',\r\n  failed: 'Failed',\r\n};\r\n\r\nconst STATUS_CHIP_CLASS: Record<FeatureMathOperationStatus, string> = {\r\n  applied: 'canvas-cast__chip--applied',\r\n  skipped: 'canvas-cast__chip--muted',\r\n  failed: 'canvas-cast__chip--attention',\r\n};\r\n\r\nconst DATETIME_FEATURE_KEY_SET = new Set(DATETIME_FEATURE_OPTIONS.map((option) => option.value));\r\n\r\nconst formatColumnPreview = (columns: string[], limit = 4): string => {\r\n  if (!columns.length) {\r\n    return 'No columns yet';\r\n  }\r\n  const preview = columns.slice(0, limit);\r\n  const remainder = columns.length - preview.length;\r\n  return remainder > 0 ? `${preview.join(', ')}  (${remainder} more)` : preview.join(', ');\r\n};\r\n\r\nconst parseColumnList = (value: string): string[] => {\r\n  if (!value.trim()) {\r\n    return [];\r\n  }\r\n  return Array.from(\r\n    new Set(\r\n      value\r\n        .split(',')\r\n        .map((segment) => segment.trim())\r\n        .filter((segment) => segment.length > 0),\r\n    ),\r\n  ).sort((a, b) => a.localeCompare(b));\r\n};\r\n\r\nconst parseConstantsList = (value: string): number[] => {\r\n  if (!value.trim()) {\r\n    return [];\r\n  }\r\n  return value\r\n    .split(',')\r\n    .map((segment) => Number(segment.trim()))\r\n    .filter((numeric) => Number.isFinite(numeric));\r\n};\r\n\r\nconst getSummaryNoteClass = (status: FeatureMathOperationStatus | undefined): string => {\r\n  if (status === 'failed') {\r\n    return 'canvas-modal__note canvas-modal__note--error';\r\n  }\r\n  if (status === 'skipped') {\r\n    return 'canvas-modal__note canvas-modal__note--warning';\r\n  }\r\n  return 'canvas-modal__note canvas-modal__note--info';\r\n};\r\n\r\ntype FeatureMathOperationCardProps = {\r\n  index: number;\r\n  total: number;\r\n  operation: FeatureMathOperationDraft;\r\n  summary?: FeatureMathOperationSummary;\r\n  availableColumns: string[];\r\n  isCollapsed: boolean;\r\n  onToggleCollapsed: (operationId: string) => void;\r\n  onDuplicate: (operationId: string) => void;\r\n  onRemove: (operationId: string) => void;\r\n  onReorder: (operationId: string, direction: 'up' | 'down') => void;\r\n  onChange: (operationId: string, updates: Partial<FeatureMathOperationDraft>) => void;\r\n};\r\n\r\nconst FeatureMathOperationCard: React.FC<FeatureMathOperationCardProps> = ({\r\n  index,\r\n  total,\r\n  operation,\r\n  summary,\r\n  availableColumns,\r\n  isCollapsed,\r\n  onToggleCollapsed,\r\n  onDuplicate,\r\n  onRemove,\r\n  onReorder,\r\n  onChange,\r\n}) => {\r\n  const methodOptions = useMemo(() => getMethodOptions(operation.type), [operation.type]);\r\n  const typeLabel = useMemo(\r\n    () => FEATURE_MATH_TYPE_OPTIONS.find((option) => option.value === operation.type)?.label ?? operation.type,\r\n    [operation.type],\r\n  );\r\n  const methodLabel = useMemo(\r\n    () => methodOptions.find((option) => option.value === operation.method)?.label ?? operation.method,\r\n    [methodOptions, operation.method],\r\n  );\r\n  const similarityDescription = useMemo(\r\n    () => (operation.type === 'similarity' ? getSimilarityMethodDescription(operation.method) : ''),\r\n    [operation.method, operation.type],\r\n  );\r\n\r\n  const [inputColumnsValue, setInputColumnsValue] = useState(operation.inputColumns.join(', '));\r\n  const [secondaryColumnsValue, setSecondaryColumnsValue] = useState(operation.secondaryColumns.join(', '));\r\n  const [constantsValue, setConstantsValue] = useState(operation.constants.join(', '));\r\n\r\n  useEffect(() => {\r\n    setInputColumnsValue(operation.inputColumns.join(', '));\r\n  }, [operation.inputColumns]);\r\n\r\n  useEffect(() => {\r\n    setSecondaryColumnsValue(operation.secondaryColumns.join(', '));\r\n  }, [operation.secondaryColumns]);\r\n\r\n  useEffect(() => {\r\n    setConstantsValue(operation.constants.join(', '));\r\n  }, [operation.constants]);\r\n\r\n  const handleInputColumnsCommit = () => {\r\n    onChange(operation.id, { inputColumns: parseColumnList(inputColumnsValue) });\r\n  };\r\n\r\n  const handleSecondaryColumnsCommit = () => {\r\n    onChange(operation.id, { secondaryColumns: parseColumnList(secondaryColumnsValue) });\r\n  };\r\n\r\n  const handleConstantsCommit = () => {\r\n    onChange(operation.id, { constants: parseConstantsList(constantsValue) });\r\n  };\r\n\r\n  const toggleId = `feature-math-toggle-${operation.id}`;\r\n  const bodyId = `feature-math-body-${operation.id}`;\r\n  const inputListId = `feature-math-input-columns-${operation.id}`;\r\n  const secondaryListId = `feature-math-secondary-columns-${operation.id}`;\r\n\r\n  const chipStatus = summary?.status;\r\n  const statusChip = chipStatus\r\n    ? (\r\n        <span\r\n          className={`canvas-cast__chip ${STATUS_CHIP_CLASS[chipStatus] ?? ''}`}\r\n          style={{ marginLeft: '0.5rem' }}\r\n        >\r\n          {STATUS_LABELS[chipStatus]}\r\n        </span>\r\n      )\r\n    : null;\r\n\r\n  const summaryMessage = summary?.message ? summary.message.trim() : '';\r\n  const summaryNoteClass = getSummaryNoteClass(chipStatus);\r\n  const outputColumnsPreview = summary?.outputColumns?.length ? summary.outputColumns.join(', ') : '';\r\n  const columnsPreview = formatColumnPreview(operation.inputColumns);\r\n\r\n  const showSecondaryField = operation.type === 'ratio' || operation.type === 'similarity';\r\n  const showConstantsField = operation.type === 'arithmetic' || operation.type === 'stat' || operation.type === 'ratio';\r\n  const showNumericTuning = operation.type === 'arithmetic' || operation.type === 'stat' || operation.type === 'ratio';\r\n  const showSimilarityOptions = operation.type === 'similarity';\r\n  const showDatetimeFields = operation.type === 'datetime_extract';\r\n  const showPrefixField = operation.type === 'stat' || operation.type === 'datetime_extract';\r\n\r\n  const availableColumnsPreview = useMemo(() => {\r\n    if (!availableColumns.length) {\r\n      return '';\r\n    }\r\n    const preview = availableColumns.slice(0, 6);\r\n    const remainder = availableColumns.length - preview.length;\r\n    return remainder > 0 ? `${preview.join(', ')}  (${remainder} more)` : preview.join(', ');\r\n  }, [availableColumns]);\r\n\r\n  const handleDateFeatureToggle = (feature: string) => {\r\n    if (!feature || !DATETIME_FEATURE_KEY_SET.has(feature)) {\r\n      return;\r\n    }\r\n    const next = new Set(operation.datetimeFeatures);\r\n    if (next.has(feature)) {\r\n      next.delete(feature);\r\n    } else {\r\n      next.add(feature);\r\n    }\r\n    onChange(operation.id, { datetimeFeatures: Array.from(next) });\r\n  };\r\n\r\n  const handleNumberChange = (key: 'fillna' | 'roundDigits' | 'epsilon') => (event: ChangeEvent<HTMLInputElement>) => {\r\n    const raw = event.target.value;\r\n    if (raw === '') {\r\n      onChange(operation.id, { [key]: null } as Partial<FeatureMathOperationDraft>);\r\n      return;\r\n    }\r\n    const numeric = Number(raw);\r\n    if (!Number.isFinite(numeric)) {\r\n      return;\r\n    }\r\n    if (key === 'roundDigits') {\r\n      onChange(operation.id, { roundDigits: Math.round(numeric) });\r\n    } else if (key === 'fillna') {\r\n      onChange(operation.id, { fillna: numeric });\r\n    } else {\r\n      onChange(operation.id, { epsilon: numeric });\r\n    }\r\n  };\r\n\r\n  const allowOverwriteValue = operation.allowOverwrite === null\r\n    ? 'inherit'\r\n    : operation.allowOverwrite\r\n      ? 'allow'\r\n      : 'prevent';\r\n\r\n  return (\r\n    <div className=\"canvas-imputer__card\">\r\n      <div className=\"canvas-imputer__card-header\">\r\n        <button\r\n          type=\"button\"\r\n          id={toggleId}\r\n          className=\"canvas-imputer__card-toggle\"\r\n          onClick={() => onToggleCollapsed(operation.id)}\r\n          aria-expanded={!isCollapsed}\r\n          aria-controls={bodyId}\r\n        >\r\n          <span\r\n            className={`canvas-imputer__toggle-icon${isCollapsed ? '' : ' canvas-imputer__toggle-icon--open'}`}\r\n            aria-hidden=\"true\"\r\n          />\r\n          <span className=\"canvas-imputer__card-text\">\r\n            <span className=\"canvas-imputer__card-title\">Operation {index + 1}</span>\r\n            <span className=\"canvas-imputer__card-summary\">\r\n              {typeLabel}\r\n              {methodLabel ? `  ${methodLabel}` : ''}\r\n              {operation.outputColumn ? `   ${operation.outputColumn}` : ''}\r\n              {statusChip}\r\n            </span>\r\n            <span className=\"canvas-modal__meta\">Inputs: {columnsPreview}</span>\r\n          </span>\r\n        </button>\r\n        <button\r\n          type=\"button\"\r\n          className=\"canvas-imputer__remove\"\r\n          onClick={() => onRemove(operation.id)}\r\n          aria-label={`Remove operation ${index + 1}`}\r\n        >\r\n          Remove\r\n        </button>\r\n      </div>\r\n      {!isCollapsed && (\r\n        <div className=\"canvas-imputer__card-body\" id={bodyId}>\r\n          <div className=\"canvas-imputer__row\">\r\n            <div className=\"canvas-modal__section-actions\">\r\n              <button type=\"button\" className=\"btn btn-outline-secondary btn-sm\" onClick={() => onDuplicate(operation.id)}>\r\n                Duplicate\r\n              </button>\r\n              <button\r\n                type=\"button\"\r\n                className=\"btn btn-outline-secondary btn-sm\"\r\n                onClick={() => onReorder(operation.id, 'up')}\r\n                disabled={index === 0}\r\n              >\r\n                Move up\r\n              </button>\r\n              <button\r\n                type=\"button\"\r\n                className=\"btn btn-outline-secondary btn-sm\"\r\n                onClick={() => onReorder(operation.id, 'down')}\r\n                disabled={index >= total - 1}\r\n              >\r\n                Move down\r\n              </button>\r\n            </div>\r\n          </div>\r\n\r\n          {summaryMessage && <p className={summaryNoteClass}>{summaryMessage}</p>}\r\n          {outputColumnsPreview && (\r\n            <p className=\"canvas-modal__note canvas-modal__note--info\">Outputs: {outputColumnsPreview}</p>\r\n          )}\r\n\r\n          <div className=\"canvas-imputer__row\">\r\n            <label htmlFor={`feature-math-${operation.id}-type`}>Operation type</label>\r\n            <select\r\n              id={`feature-math-${operation.id}-type`}\r\n              value={operation.type}\r\n              onChange={(event) => onChange(operation.id, { type: event.target.value as FeatureMathOperationType })}\r\n            >\r\n              {FEATURE_MATH_TYPE_OPTIONS.map((option) => (\r\n                <option key={option.value} value={option.value}>\r\n                  {option.label}\r\n                </option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n\r\n          <div className=\"canvas-imputer__row\">\r\n            <label htmlFor={`feature-math-${operation.id}-method`}>Method</label>\r\n            <select\r\n              id={`feature-math-${operation.id}-method`}\r\n              value={operation.method}\r\n              onChange={(event) => onChange(operation.id, { method: event.target.value })}\r\n            >\r\n              {methodOptions.map((option) => (\r\n                <option key={option.value} value={option.value}>\r\n                  {option.label}\r\n                </option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n          {operation.type === 'similarity' && similarityDescription && (\r\n            <p className=\"canvas-modal__note canvas-modal__note--info\">{similarityDescription}</p>\r\n          )}\r\n\r\n          <div className=\"canvas-imputer__row\">\r\n            <label htmlFor={`feature-math-${operation.id}-input-columns`}>Input columns</label>\r\n            <input\r\n              id={`feature-math-${operation.id}-input-columns`}\r\n              type=\"text\"\r\n              value={inputColumnsValue}\r\n              onChange={(event) => setInputColumnsValue(event.target.value)}\r\n              onBlur={handleInputColumnsCommit}\r\n              onKeyDown={(event) => {\r\n                if (event.key === 'Enter') {\r\n                  event.preventDefault();\r\n                  handleInputColumnsCommit();\r\n                }\r\n              }}\r\n              placeholder=\"col_a, col_b\"\r\n              list={inputListId}\r\n            />\r\n            <datalist id={inputListId}>\r\n              {availableColumns.map((column) => (\r\n                <option key={`${operation.id}-input-option-${column}`} value={column} />\r\n              ))}\r\n            </datalist>\r\n            {availableColumnsPreview && (\r\n              <p className=\"canvas-modal__meta\">Available: {availableColumnsPreview}</p>\r\n            )}\r\n          </div>\r\n\r\n          {showSecondaryField && (\r\n            <div className=\"canvas-imputer__row\">\r\n              <label htmlFor={`feature-math-${operation.id}-secondary-columns`}>\r\n                {operation.type === 'ratio' ? 'Denominator columns' : 'Compare against'}\r\n              </label>\r\n              <input\r\n                id={`feature-math-${operation.id}-secondary-columns`}\r\n                type=\"text\"\r\n                value={secondaryColumnsValue}\r\n                onChange={(event) => setSecondaryColumnsValue(event.target.value)}\r\n                onBlur={handleSecondaryColumnsCommit}\r\n                onKeyDown={(event) => {\r\n                  if (event.key === 'Enter') {\r\n                    event.preventDefault();\r\n                    handleSecondaryColumnsCommit();\r\n                  }\r\n                }}\r\n                placeholder={operation.type === 'ratio' ? 'denominator_col' : 'comparison column'}\r\n                list={secondaryListId}\r\n              />\r\n              <datalist id={secondaryListId}>\r\n                {availableColumns.map((column) => (\r\n                  <option key={`${operation.id}-secondary-option-${column}`} value={column} />\r\n                ))}\r\n              </datalist>\r\n              <p className=\"canvas-modal__meta\">Comma separated list</p>\r\n            </div>\r\n          )}\r\n\r\n          {showConstantsField && (\r\n            <div className=\"canvas-imputer__row\">\r\n              <label htmlFor={`feature-math-${operation.id}-constants`}>Constants (optional)</label>\r\n              <input\r\n                id={`feature-math-${operation.id}-constants`}\r\n                type=\"text\"\r\n                value={constantsValue}\r\n                onChange={(event) => setConstantsValue(event.target.value)}\r\n                onBlur={handleConstantsCommit}\r\n                onKeyDown={(event) => {\r\n                  if (event.key === 'Enter') {\r\n                    event.preventDefault();\r\n                    handleConstantsCommit();\r\n                  }\r\n                }}\r\n                placeholder=\"0.0, 1.5\"\r\n              />\r\n              <p className=\"canvas-modal__meta\">Numbers separated by commas are added alongside the selected columns.</p>\r\n            </div>\r\n          )}\r\n\r\n          <div className=\"canvas-imputer__row\">\r\n            <label htmlFor={`feature-math-${operation.id}-output-column`}>Output column (optional)</label>\r\n            <input\r\n              id={`feature-math-${operation.id}-output-column`}\r\n              type=\"text\"\r\n              value={operation.outputColumn}\r\n              onChange={(event) => onChange(operation.id, { outputColumn: event.target.value })}\r\n              placeholder=\"custom_feature_name\"\r\n            />\r\n            <p className=\"canvas-modal__meta\">Leave blank to derive a name automatically.</p>\r\n          </div>\r\n\r\n          {showPrefixField && (\r\n            <div className=\"canvas-imputer__row\">\r\n              <label htmlFor={`feature-math-${operation.id}-output-prefix`}>Output prefix</label>\r\n              <input\r\n                id={`feature-math-${operation.id}-output-prefix`}\r\n                type=\"text\"\r\n                value={operation.outputPrefix}\r\n                onChange={(event) => onChange(operation.id, { outputPrefix: event.target.value })}\r\n                placeholder=\"prefix_\"\r\n              />\r\n              <p className=\"canvas-modal__meta\">Applied to generated column names (statistics or datetime features).</p>\r\n            </div>\r\n          )}\r\n\r\n          {showNumericTuning && (\r\n            <>\r\n              <div className=\"canvas-imputer__row\">\r\n                <label htmlFor={`feature-math-${operation.id}-fillna`}>Fill missing result with</label>\r\n                <input\r\n                  id={`feature-math-${operation.id}-fillna`}\r\n                  type=\"number\"\r\n                  value={operation.fillna ?? ''}\r\n                  onChange={handleNumberChange('fillna')}\r\n                  placeholder=\"none\"\r\n                />\r\n                <p className=\"canvas-modal__meta\">Applies after computing the operation.</p>\r\n              </div>\r\n              <div className=\"canvas-imputer__row\">\r\n                <label htmlFor={`feature-math-${operation.id}-round`}>Round digits</label>\r\n                <input\r\n                  id={`feature-math-${operation.id}-round`}\r\n                  type=\"number\"\r\n                  value={operation.roundDigits ?? ''}\r\n                  onChange={handleNumberChange('roundDigits')}\r\n                  placeholder=\"none\"\r\n                  step={1}\r\n                />\r\n                <p className=\"canvas-modal__meta\">Leave blank for no rounding.</p>\r\n              </div>\r\n            </>\r\n          )}\r\n\r\n          {operation.type === 'ratio' && (\r\n            <div className=\"canvas-imputer__row\">\r\n              <label htmlFor={`feature-math-${operation.id}-epsilon`}>Division epsilon</label>\r\n              <input\r\n                id={`feature-math-${operation.id}-epsilon`}\r\n                type=\"number\"\r\n                value={operation.epsilon ?? ''}\r\n                onChange={handleNumberChange('epsilon')}\r\n                placeholder=\"inherit\"\r\n                step=\"any\"\r\n              />\r\n              <p className=\"canvas-modal__meta\">Overrides the node-level epsilon for this ratio.</p>\r\n            </div>\r\n          )}\r\n\r\n          {showSimilarityOptions && (\r\n            <div className=\"canvas-imputer__row\">\r\n              <label htmlFor={`feature-math-${operation.id}-normalize`} className=\"canvas-modal__boolean-control\">\r\n                <input\r\n                  id={`feature-math-${operation.id}-normalize`}\r\n                  type=\"checkbox\"\r\n                  checked={operation.normalize}\r\n                  onChange={(event) => onChange(operation.id, { normalize: event.target.checked })}\r\n                />\r\n                <span>Normalize scores to the [0, 1] range</span>\r\n              </label>\r\n              <p className=\"canvas-modal__meta\">Useful when chaining similarity outputs into downstream calculations.</p>\r\n            </div>\r\n          )}\r\n\r\n          {showDatetimeFields && (\r\n            <>\r\n              <div className=\"canvas-imputer__row canvas-imputer__row--wrap\">\r\n                <fieldset>\r\n                  <legend>Datetime features</legend>\r\n                  <div className=\"canvas-modal__checkbox-grid\">\r\n                    {DATETIME_FEATURE_OPTIONS.map((option) => {\r\n                      const checkboxId = `feature-math-${operation.id}-datetime-${option.value}`;\r\n                      const checked = operation.datetimeFeatures.includes(option.value);\r\n                      return (\r\n                        <label key={option.value} className=\"canvas-modal__checkbox-item\" htmlFor={checkboxId}>\r\n                          <input\r\n                            id={checkboxId}\r\n                            type=\"checkbox\"\r\n                            checked={checked}\r\n                            onChange={() => handleDateFeatureToggle(option.value)}\r\n                          />\r\n                          <span className=\"canvas-modal__checkbox-label\">{option.label}</span>\r\n                        </label>\r\n                      );\r\n                    })}\r\n                  </div>\r\n                </fieldset>\r\n              </div>\r\n              <div className=\"canvas-imputer__row\">\r\n                <label htmlFor={`feature-math-${operation.id}-timezone`}>Timezone override</label>\r\n                <input\r\n                  id={`feature-math-${operation.id}-timezone`}\r\n                  type=\"text\"\r\n                  value={operation.timezone}\r\n                  onChange={(event) => onChange(operation.id, { timezone: event.target.value })}\r\n                  placeholder=\"UTC\"\r\n                />\r\n                <p className=\"canvas-modal__meta\">Use an IANA timezone identifier, e.g. America/New_York.</p>\r\n              </div>\r\n            </>\r\n          )}\r\n\r\n          <div className=\"canvas-imputer__row\">\r\n            <label htmlFor={`feature-math-${operation.id}-allow-overwrite`}>Overwrite behavior</label>\r\n            <select\r\n              id={`feature-math-${operation.id}-allow-overwrite`}\r\n              value={allowOverwriteValue}\r\n              onChange={(event) => {\r\n                const value = event.target.value;\r\n                if (value === 'inherit') {\r\n                  onChange(operation.id, { allowOverwrite: null });\r\n                } else {\r\n                  onChange(operation.id, { allowOverwrite: value === 'allow' });\r\n                }\r\n              }}\r\n            >\r\n              <option value=\"inherit\">Inherit node default</option>\r\n              <option value=\"allow\">Always overwrite existing columns</option>\r\n              <option value=\"prevent\">Never overwrite existing columns</option>\r\n            </select>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\ntype FeatureMathSectionProps = {\r\n  operations: FeatureMathOperationDraft[];\r\n  summaries: FeatureMathOperationSummary[];\r\n  collapsed: ReadonlySet<string>;\r\n  onToggleCollapsed: (operationId: string) => void;\r\n  onAddOperation: (type: FeatureMathOperationType) => void;\r\n  onDuplicateOperation: (operationId: string) => void;\r\n  onRemoveOperation: (operationId: string) => void;\r\n  onReorderOperation: (operationId: string, direction: 'up' | 'down') => void;\r\n  onOperationChange: (operationId: string, updates: Partial<FeatureMathOperationDraft>) => void;\r\n  availableColumns: string[];\r\n  signals: FeatureMathNodeSignal[];\r\n  previewStatus: string;\r\n  errorHandlingParameter: FeatureNodeParameter | null;\r\n  allowOverwriteParameter: FeatureNodeParameter | null;\r\n  defaultTimezoneParameter: FeatureNodeParameter | null;\r\n  epsilonParameter: FeatureNodeParameter | null;\r\n  renderParameterField: (parameter: FeatureNodeParameter) => React.ReactNode;\r\n  canResetNode?: boolean;\r\n  onResetNode?: () => void;\r\n};\r\n\r\nexport const FeatureMathSection: React.FC<FeatureMathSectionProps> = ({\r\n  operations,\r\n  summaries,\r\n  collapsed,\r\n  onToggleCollapsed,\r\n  onAddOperation,\r\n  onDuplicateOperation,\r\n  onRemoveOperation,\r\n  onReorderOperation,\r\n  onOperationChange,\r\n  availableColumns,\r\n  signals,\r\n  previewStatus,\r\n  errorHandlingParameter,\r\n  allowOverwriteParameter,\r\n  defaultTimezoneParameter,\r\n  epsilonParameter,\r\n  renderParameterField,\r\n  canResetNode = false,\r\n  onResetNode,\r\n}) => {\r\n  const [pendingType, setPendingType] = useState<FeatureMathOperationType>('arithmetic');\r\n  const summaryMap = useMemo(() => {\r\n    const map = new Map<string, FeatureMathOperationSummary>();\r\n    summaries.forEach((summary) => {\r\n      map.set(summary.id, summary);\r\n    });\r\n    return map;\r\n  }, [summaries]);\r\n\r\n  const latestSignal = useMemo(() => {\r\n    if (!signals.length) {\r\n      return null;\r\n    }\r\n    return signals[signals.length - 1];\r\n  }, [signals]);\r\n\r\n  const latestWarnings = latestSignal?.warnings ?? [];\r\n  const summaryNoteClass = latestSignal && latestSignal.failed_operations > 0\r\n    ? 'canvas-modal__note canvas-modal__note--warning'\r\n    : 'canvas-modal__note canvas-modal__note--info';\r\n\r\n  const handleAddOperation = () => {\r\n    onAddOperation(pendingType);\r\n  };\r\n\r\n  return (\r\n    <section className=\"canvas-modal__section\">\r\n      <div className=\"canvas-modal__section-header\">\r\n        <h3>Feature math operations</h3>\r\n        <div className=\"canvas-modal__section-actions\">\r\n          <select\r\n            value={pendingType}\r\n            onChange={(event) => setPendingType(event.target.value as FeatureMathOperationType)}\r\n          >\r\n            {FEATURE_MATH_TYPE_OPTIONS.map((option) => (\r\n              <option key={option.value} value={option.value}>\r\n                {option.label}\r\n              </option>\r\n            ))}\r\n          </select>\r\n          <button type=\"button\" className=\"btn btn-outline-secondary\" onClick={handleAddOperation}>\r\n            Add operation\r\n          </button>\r\n          {canResetNode && (\r\n            <button\r\n              type=\"button\"\r\n              className=\"btn btn-outline-secondary\"\r\n              onClick={onResetNode}\r\n              disabled={!onResetNode}\r\n            >\r\n              Reset node\r\n            </button>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      <p className=\"canvas-modal__note\">\r\n        Blend columns using arithmetic formulas, ratios, statistics, similarity scores, or datetime extractions. Configure\r\n        each operation below  they execute in order.\r\n      </p>\r\n\r\n      {previewStatus === 'loading' && <p className=\"canvas-modal__note\">Preview updating</p>}\r\n\r\n      {latestSignal && (\r\n        <p className={summaryNoteClass}>\r\n          Preview applied {latestSignal.applied_operations} of {latestSignal.total_operations} operation\r\n          {latestSignal.total_operations === 1 ? '' : 's'} ({latestSignal.skipped_operations} skipped, {latestSignal.failed_operations} failed).\r\n        </p>\r\n      )}\r\n\r\n      {latestWarnings.length > 0 && (\r\n        <ul className=\"canvas-modal__note-list\">\r\n          {latestWarnings.map((warning, index) => (\r\n            <li key={`feature-math-warning-${index}`}>{warning}</li>\r\n          ))}\r\n        </ul>\r\n      )}\r\n\r\n      {operations.length === 0 && (\r\n        <p className=\"canvas-modal__note canvas-modal__note--warning\">\r\n          No feature math steps configured yet. Add an operation to create engineered columns.\r\n        </p>\r\n      )}\r\n\r\n      {operations.map((operation, index) => (\r\n        <FeatureMathOperationCard\r\n          key={operation.id}\r\n          index={index}\r\n          total={operations.length}\r\n          operation={operation}\r\n          summary={summaryMap.get(operation.id)}\r\n          availableColumns={availableColumns}\r\n          isCollapsed={collapsed.has(operation.id)}\r\n          onToggleCollapsed={onToggleCollapsed}\r\n          onDuplicate={onDuplicateOperation}\r\n          onRemove={onRemoveOperation}\r\n          onReorder={onReorderOperation}\r\n          onChange={onOperationChange}\r\n        />\r\n      ))}\r\n\r\n      <div className=\"canvas-modal__parameter-grid\">\r\n        {errorHandlingParameter && renderParameterField(errorHandlingParameter)}\r\n        {allowOverwriteParameter && renderParameterField(allowOverwriteParameter)}\r\n        {defaultTimezoneParameter && renderParameterField(defaultTimezoneParameter)}\r\n        {epsilonParameter && renderParameterField(epsilonParameter)}\r\n      </div>\r\n    </section>\r\n  );\r\n};\r\n","import React, { useMemo } from 'react';\r\nimport type { FeatureNodeParameter, LabelEncodingColumnSuggestion, LabelEncodingSuggestionStatus } from '../../../../api';\r\n\r\ntype LabelEncodingSectionProps = {\r\n  sourceId?: string | null;\r\n  hasReachableSource: boolean;\r\n  isFetching: boolean;\r\n  error: string | null;\r\n  suggestions: LabelEncodingColumnSuggestion[];\r\n  metadata: {\r\n    sampleSize: number | null;\r\n    generatedAt: string | null;\r\n    totalTextColumns: number;\r\n    recommendedCount: number;\r\n    autoDetectDefault: boolean;\r\n    highCardinalityColumns: string[];\r\n    notes: string[];\r\n  };\r\n  columnsParameter: FeatureNodeParameter | null;\r\n  autoDetectParameter: FeatureNodeParameter | null;\r\n  maxUniqueParameter: FeatureNodeParameter | null;\r\n  outputSuffixParameter: FeatureNodeParameter | null;\r\n  dropOriginalParameter: FeatureNodeParameter | null;\r\n  missingStrategyParameter: FeatureNodeParameter | null;\r\n  missingCodeParameter: FeatureNodeParameter | null;\r\n  selectedColumns: string[];\r\n  renderParameterField: (parameter: FeatureNodeParameter) => React.ReactNode;\r\n  onToggleColumn: (column: string) => void;\r\n  onApplyRecommended: (columns: string[]) => void;\r\n  formatMissingPercentage: (value?: number | null) => string;\r\n};\r\n\r\nconst STATUS_LABELS: Record<LabelEncodingSuggestionStatus, string> = {\r\n  recommended: 'Recommended',\r\n  high_cardinality: 'High cardinality',\r\n  identifier: 'Identifier-like',\r\n  free_text: 'Free text',\r\n  single_category: 'Single category',\r\n  too_many_categories: 'Too many categories',\r\n};\r\n\r\nconst STATUS_BADGE_CLASS: Record<LabelEncodingSuggestionStatus, string> = {\r\n  recommended: 'canvas-cast__chip--applied',\r\n  high_cardinality: 'canvas-cast__chip--attention',\r\n  identifier: 'canvas-cast__chip--muted',\r\n  free_text: 'canvas-cast__chip--muted',\r\n  single_category: 'canvas-cast__chip--muted',\r\n  too_many_categories: 'canvas-cast__chip--muted',\r\n};\r\n\r\nconst formatMetric = (value: number | null | undefined): string => {\r\n  if (value === null || value === undefined || Number.isNaN(value)) {\r\n    return '';\r\n  }\r\n  return value.toLocaleString(undefined, { maximumFractionDigits: 2 });\r\n};\r\n\r\nexport const LabelEncodingSection: React.FC<LabelEncodingSectionProps> = ({\r\n  sourceId,\r\n  hasReachableSource,\r\n  isFetching,\r\n  error,\r\n  suggestions,\r\n  metadata,\r\n  columnsParameter,\r\n  autoDetectParameter,\r\n  maxUniqueParameter,\r\n  outputSuffixParameter,\r\n  dropOriginalParameter,\r\n  missingStrategyParameter,\r\n  missingCodeParameter,\r\n  selectedColumns,\r\n  renderParameterField,\r\n  onToggleColumn,\r\n  onApplyRecommended,\r\n  formatMissingPercentage,\r\n}) => {\r\n  const recommendedColumns = useMemo(() => {\r\n    if (!suggestions.length) {\r\n      return [] as string[];\r\n    }\r\n    const aggregate = new Set<string>();\r\n    suggestions.forEach((entry) => {\r\n      if (entry.status === 'recommended' && entry.selectable) {\r\n        aggregate.add(entry.column);\r\n      }\r\n    });\r\n    return Array.from(aggregate);\r\n  }, [suggestions]);\r\n\r\n  const connectionNote = useMemo(() => {\r\n    if (!sourceId) {\r\n      return 'Choose a dataset to surface label encoding suggestions.';\r\n    }\r\n    if (!hasReachableSource) {\r\n      return 'Connect this node to the dataset input to analyse categorical features.';\r\n    }\r\n    return null;\r\n  }, [hasReachableSource, sourceId]);\r\n\r\n  const hasSuggestions = suggestions.length > 0;\r\n  const showErrorMessage = !isFetching && Boolean(error) && Boolean(sourceId) && hasReachableSource;\r\n\r\n  return (\r\n    <section className=\"canvas-modal__section\">\r\n      <div className=\"canvas-modal__section-header\">\r\n        <h3>Label encoding suggestions</h3>\r\n        <div className=\"canvas-modal__section-actions\">\r\n          <button\r\n            type=\"button\"\r\n            className=\"btn btn-primary\"\r\n            onClick={() => onApplyRecommended(recommendedColumns)}\r\n            disabled={!recommendedColumns.length}\r\n          >\r\n            Add recommended\r\n          </button>\r\n        </div>\r\n      </div>\r\n      <p className=\"canvas-modal__note\">\r\n        Convert short-form categorical text into integer labels. Suggestions come from EDA heuristics and the current\r\n        pipeline preview.\r\n      </p>\r\n      {connectionNote && <p className=\"canvas-modal__note canvas-modal__note--warning\">{connectionNote}</p>}\r\n      {metadata.generatedAt && (\r\n        <p className=\"canvas-modal__note\">\r\n          Insights generated {new Date(metadata.generatedAt).toLocaleString()} on{' '}\r\n          {metadata.sampleSize === null ? 'sampled rows' : `${metadata.sampleSize.toLocaleString()} row${metadata.sampleSize === 1 ? '' : 's'}`}.\r\n        </p>\r\n      )}\r\n      {!metadata.generatedAt && metadata.sampleSize !== null && (\r\n        <p className=\"canvas-modal__note\">\r\n          Evaluated {metadata.sampleSize.toLocaleString()} row{metadata.sampleSize === 1 ? '' : 's'} for categorical trends.\r\n        </p>\r\n      )}\r\n      {metadata.totalTextColumns > 0 && (\r\n        <p className=\"canvas-modal__note\">\r\n          Found {metadata.totalTextColumns} text column{metadata.totalTextColumns === 1 ? '' : 's'}; recommendations cover{' '}\r\n          {metadata.recommendedCount} candidate{metadata.recommendedCount === 1 ? '' : 's'}.\r\n        </p>\r\n      )}\r\n      {metadata.autoDetectDefault && (\r\n        <p className=\"canvas-modal__note\">\r\n          Auto-detect is suggested so future categorical columns join without manual updates.\r\n        </p>\r\n      )}\r\n      {metadata.notes.length > 0 && (\r\n        <ul className=\"canvas-modal__note-list\">\r\n          {metadata.notes.map((note, index) => (\r\n            <li key={`label-encoding-note-${index}`}>{note}</li>\r\n          ))}\r\n        </ul>\r\n      )}\r\n      {metadata.highCardinalityColumns.length > 0 && (\r\n        <p className=\"canvas-modal__note\">\r\n          Skipped {metadata.highCardinalityColumns.length} high-cardinality column\r\n          {metadata.highCardinalityColumns.length === 1 ? '' : 's'}:\r\n          {' '}\r\n          {metadata.highCardinalityColumns.slice(0, 4).join(', ')}\r\n          {metadata.highCardinalityColumns.length > 4 ? ', ' : ''}.\r\n        </p>\r\n      )}\r\n      {isFetching && <p className=\"canvas-modal__note\">Loading label encoding insights</p>}\r\n      {showErrorMessage && (\r\n        <p className=\"canvas-modal__note canvas-modal__note--error\">{error ?? ''}</p>\r\n      )}\r\n      {!isFetching && !error && !hasSuggestions && sourceId && hasReachableSource && (\r\n        <p className=\"canvas-modal__note\">No categorical text candidates detected in the current preview.</p>\r\n      )}\r\n      {!isFetching && !error && hasSuggestions && (\r\n        <div className=\"canvas-cast__table-wrapper\">\r\n          <table className=\"canvas-cast__table\">\r\n            <thead>\r\n              <tr>\r\n                <th scope=\"col\">Column</th>\r\n                <th scope=\"col\">Distinct</th>\r\n                <th scope=\"col\">Missing</th>\r\n                <th scope=\"col\">Status</th>\r\n                <th scope=\"col\">Select</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {suggestions.map((suggestion) => {\r\n                const isSelected = selectedColumns.includes(suggestion.column);\r\n                const statusLabel = STATUS_LABELS[suggestion.status];\r\n                const statusClass = STATUS_BADGE_CLASS[suggestion.status] ?? 'canvas-cast__chip--muted';\r\n                const sampleValues = suggestion.sample_values.length\r\n                  ? suggestion.sample_values.join(', ')\r\n                  : '';\r\n                const uniqueDisplay = suggestion.unique_count !== undefined && suggestion.unique_count !== null\r\n                  ? `${formatMetric(suggestion.unique_count)} (${formatMetric(suggestion.unique_percentage)}%)`\r\n                  : '';\r\n                const missingDisplay = formatMissingPercentage(suggestion.missing_percentage);\r\n\r\n                return (\r\n                  <tr key={`label-encoding-row-${suggestion.column}`} className=\"canvas-cast__row\">\r\n                    <th scope=\"row\">\r\n                      <div className=\"canvas-cast__column-cell\">\r\n                        <span className=\"canvas-cast__column-name\">{suggestion.column}</span>\r\n                        <div className=\"canvas-cast__column-meta\">\r\n                          {suggestion.dtype && <span className=\"canvas-cast__muted\">dtype: {suggestion.dtype}</span>}\r\n                          {suggestion.text_category && (\r\n                            <span className=\"canvas-cast__badge canvas-cast__badge--category\">\r\n                              {suggestion.text_category}\r\n                            </span>\r\n                          )}\r\n                        </div>\r\n                        <div className=\"canvas-cast__column-meta\">\r\n                          <span className=\"canvas-cast__muted\">Examples: {sampleValues}</span>\r\n                        </div>\r\n                        <p className=\"canvas-cast__recommendation-note\">{suggestion.reason}</p>\r\n                      </div>\r\n                    </th>\r\n                    <td>{uniqueDisplay}</td>\r\n                    <td>{missingDisplay}</td>\r\n                    <td>\r\n                      <span className={`canvas-cast__chip ${statusClass}`}>{statusLabel}</span>\r\n                    </td>\r\n                    <td>\r\n                      <label className=\"canvas-modal__checkbox-item\">\r\n                        <input\r\n                          type=\"checkbox\"\r\n                          checked={isSelected}\r\n                          onChange={() => onToggleColumn(suggestion.column)}\r\n                          disabled={!suggestion.selectable}\r\n                        />\r\n                        <span className=\"canvas-modal__checkbox-label\">\r\n                          {suggestion.selectable ? (isSelected ? 'In node' : 'Add column') : 'Not eligible'}\r\n                        </span>\r\n                      </label>\r\n                    </td>\r\n                  </tr>\r\n                );\r\n              })}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      )}\r\n      <div className=\"canvas-modal__parameter-grid\">\r\n        {autoDetectParameter && renderParameterField(autoDetectParameter)}\r\n        {maxUniqueParameter && renderParameterField(maxUniqueParameter)}\r\n        {outputSuffixParameter && renderParameterField(outputSuffixParameter)}\r\n        {dropOriginalParameter && renderParameterField(dropOriginalParameter)}\r\n        {missingStrategyParameter && renderParameterField(missingStrategyParameter)}\r\n        {missingCodeParameter && renderParameterField(missingCodeParameter)}\r\n      </div>\r\n      {columnsParameter && (\r\n        <div>\r\n          <h4 className=\"canvas-modal__subheading\">Manual column selection</h4>\r\n          {renderParameterField(columnsParameter)}\r\n        </div>\r\n      )}\r\n    </section>\r\n  );\r\n};\r\n","import React, { useMemo } from 'react';\r\nimport type {\r\n  FeatureNodeParameter,\r\n  TargetEncodingColumnSuggestion,\r\n  TargetEncodingSuggestionStatus,\r\n} from '../../../../api';\r\n\r\ntype TargetEncodingSectionProps = {\r\n  sourceId?: string | null;\r\n  hasReachableSource: boolean;\r\n  isFetching: boolean;\r\n  error: string | null;\r\n  suggestions: TargetEncodingColumnSuggestion[];\r\n  metadata: {\r\n    sampleSize: number | null;\r\n    generatedAt: string | null;\r\n    totalTextColumns: number;\r\n    recommendedCount: number;\r\n    autoDetectDefault: boolean;\r\n    enableGlobalFallbackDefault: boolean;\r\n    highCardinalityColumns: string[];\r\n    notes: string[];\r\n  };\r\n  columnsParameter: FeatureNodeParameter | null;\r\n  targetColumnParameter: FeatureNodeParameter | null;\r\n  autoDetectParameter: FeatureNodeParameter | null;\r\n  maxCategoriesParameter: FeatureNodeParameter | null;\r\n  outputSuffixParameter: FeatureNodeParameter | null;\r\n  dropOriginalParameter: FeatureNodeParameter | null;\r\n  smoothingParameter: FeatureNodeParameter | null;\r\n  encodeMissingParameter: FeatureNodeParameter | null;\r\n  handleUnknownParameter: FeatureNodeParameter | null;\r\n  selectedColumns: string[];\r\n  renderParameterField: (parameter: FeatureNodeParameter) => React.ReactNode;\r\n  onToggleColumn: (column: string) => void;\r\n  onApplyRecommended: (columns: string[]) => void;\r\n  formatMissingPercentage: (value?: number | null) => string;\r\n};\r\n\r\nconst STATUS_LABELS: Record<TargetEncodingSuggestionStatus, string> = {\r\n  recommended: 'Recommended',\r\n  high_cardinality: 'High cardinality',\r\n  identifier: 'Identifier-like',\r\n  free_text: 'Free text',\r\n  single_category: 'Single category',\r\n  too_many_categories: 'Too many categories',\r\n};\r\n\r\nconst STATUS_BADGE_CLASS: Record<TargetEncodingSuggestionStatus, string> = {\r\n  recommended: 'canvas-cast__chip--applied',\r\n  high_cardinality: 'canvas-cast__chip--attention',\r\n  identifier: 'canvas-cast__chip--muted',\r\n  free_text: 'canvas-cast__chip--muted',\r\n  single_category: 'canvas-cast__chip--muted',\r\n  too_many_categories: 'canvas-cast__chip--muted',\r\n};\r\n\r\nconst formatMetric = (value: number | null | undefined): string => {\r\n  if (value === null || value === undefined || Number.isNaN(value)) {\r\n    return '';\r\n  }\r\n  return value.toLocaleString(undefined, { maximumFractionDigits: 2 });\r\n};\r\n\r\nexport const TargetEncodingSection: React.FC<TargetEncodingSectionProps> = ({\r\n  sourceId,\r\n  hasReachableSource,\r\n  isFetching,\r\n  error,\r\n  suggestions,\r\n  metadata,\r\n  columnsParameter,\r\n  targetColumnParameter,\r\n  autoDetectParameter,\r\n  maxCategoriesParameter,\r\n  outputSuffixParameter,\r\n  dropOriginalParameter,\r\n  smoothingParameter,\r\n  encodeMissingParameter,\r\n  handleUnknownParameter,\r\n  selectedColumns,\r\n  renderParameterField,\r\n  onToggleColumn,\r\n  onApplyRecommended,\r\n  formatMissingPercentage,\r\n}) => {\r\n  const recommendedColumns = useMemo(() => {\r\n    if (!suggestions.length) {\r\n      return [] as string[];\r\n    }\r\n    const aggregate = new Set<string>();\r\n    suggestions.forEach((entry) => {\r\n      if (entry.status === 'recommended' && entry.selectable) {\r\n        aggregate.add(entry.column);\r\n      }\r\n    });\r\n    return Array.from(aggregate);\r\n  }, [suggestions]);\r\n\r\n  const connectionNote = useMemo(() => {\r\n    if (!sourceId) {\r\n      return 'Choose a dataset to surface target encoding suggestions.';\r\n    }\r\n    if (!hasReachableSource) {\r\n      return 'Connect this node to the dataset input to analyse categorical features.';\r\n    }\r\n    return null;\r\n  }, [hasReachableSource, sourceId]);\r\n\r\n  const hasSuggestions = suggestions.length > 0;\r\n  const showErrorMessage = !isFetching && Boolean(error) && Boolean(sourceId) && hasReachableSource;\r\n\r\n  return (\r\n    <section className=\"canvas-modal__section\">\r\n      <div className=\"canvas-modal__section-header\">\r\n        <h3>Target encoding suggestions</h3>\r\n        <div className=\"canvas-modal__section-actions\">\r\n          <button\r\n            type=\"button\"\r\n            className=\"btn btn-primary\"\r\n            onClick={() => onApplyRecommended(recommendedColumns)}\r\n            disabled={!recommendedColumns.length}\r\n          >\r\n            Add recommended\r\n          </button>\r\n        </div>\r\n      </div>\r\n      <p className=\"canvas-modal__note\">\r\n        Encode categorical columns by replacing each category with the smoothed mean of a numeric target column. This is\r\n        useful for high-cardinality features when a label or ordinal encoding is too coarse.\r\n      </p>\r\n      {connectionNote && <p className=\"canvas-modal__note canvas-modal__note--warning\">{connectionNote}</p>}\r\n      {!targetColumnParameter && (\r\n        <p className=\"canvas-modal__note canvas-modal__note--warning\">\r\n          Add a target column parameter to unlock target encoding. The backend requires a numeric target to compute averages.\r\n        </p>\r\n      )}\r\n      {metadata.autoDetectDefault && (\r\n        <p className=\"canvas-modal__note\">\r\n          Auto-detect is suggested so future categorical columns join without manual updates.\r\n        </p>\r\n      )}\r\n      {metadata.enableGlobalFallbackDefault && (\r\n        <p className=\"canvas-modal__note canvas-modal__note--info\">\r\n          Enable the global mean fallback so unseen categories and nulls do not break downstream transforms.\r\n        </p>\r\n      )}\r\n      {metadata.generatedAt && (\r\n        <p className=\"canvas-modal__note\">\r\n          Insights generated {new Date(metadata.generatedAt).toLocaleString()} on{' '}\r\n          {metadata.sampleSize === null\r\n            ? 'sampled rows'\r\n            : `${metadata.sampleSize.toLocaleString()} row${metadata.sampleSize === 1 ? '' : 's'}`}.\r\n        </p>\r\n      )}\r\n      {!metadata.generatedAt && metadata.sampleSize !== null && (\r\n        <p className=\"canvas-modal__note\">\r\n          Evaluated {metadata.sampleSize.toLocaleString()} row{metadata.sampleSize === 1 ? '' : 's'} for categorical trends.\r\n        </p>\r\n      )}\r\n      {metadata.totalTextColumns > 0 && (\r\n        <p className=\"canvas-modal__note\">\r\n          Found {metadata.totalTextColumns} text column{metadata.totalTextColumns === 1 ? '' : 's'}; recommendations cover{' '}\r\n          {metadata.recommendedCount} candidate{metadata.recommendedCount === 1 ? '' : 's'}.\r\n        </p>\r\n      )}\r\n      {metadata.notes.length > 0 && (\r\n        <ul className=\"canvas-modal__note-list\">\r\n          {metadata.notes.map((note, index) => (\r\n            <li key={`target-encoding-note-${index}`}>{note}</li>\r\n          ))}\r\n        </ul>\r\n      )}\r\n      {metadata.highCardinalityColumns.length > 0 && (\r\n        <p className=\"canvas-modal__note\">\r\n          Skipped {metadata.highCardinalityColumns.length} high-cardinality column\r\n          {metadata.highCardinalityColumns.length === 1 ? '' : 's'}:\r\n          {' '}\r\n          {metadata.highCardinalityColumns.slice(0, 4).join(', ')}\r\n          {metadata.highCardinalityColumns.length > 4 ? ', ' : ''}.\r\n        </p>\r\n      )}\r\n      {isFetching && <p className=\"canvas-modal__note\">Loading target encoding insights</p>}\r\n      {showErrorMessage && (\r\n        <p className=\"canvas-modal__note canvas-modal__note--error\">{error ?? ''}</p>\r\n      )}\r\n      {!isFetching && !error && !hasSuggestions && sourceId && hasReachableSource && (\r\n        <p className=\"canvas-modal__note\">No categorical text candidates detected in the current preview.</p>\r\n      )}\r\n      {!isFetching && !error && hasSuggestions && (\r\n        <div className=\"canvas-cast__table-wrapper\">\r\n          <table className=\"canvas-cast__table\">\r\n            <thead>\r\n              <tr>\r\n                <th scope=\"col\">Column</th>\r\n                <th scope=\"col\">Distinct</th>\r\n                <th scope=\"col\">Missing</th>\r\n                <th scope=\"col\">Fallback</th>\r\n                <th scope=\"col\">Status</th>\r\n                <th scope=\"col\">Select</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {suggestions.map((suggestion) => {\r\n                const isSelected = selectedColumns.includes(suggestion.column);\r\n                const statusLabel = STATUS_LABELS[suggestion.status];\r\n                const statusClass = STATUS_BADGE_CLASS[suggestion.status] ?? 'canvas-cast__chip--muted';\r\n                const sampleValues = suggestion.sample_values.length\r\n                  ? suggestion.sample_values.join(', ')\r\n                  : '';\r\n                const uniqueDisplay = suggestion.unique_count !== undefined && suggestion.unique_count !== null\r\n                  ? `${formatMetric(suggestion.unique_count)} (${formatMetric(suggestion.unique_percentage)}%)`\r\n                  : '';\r\n                const missingDisplay = formatMissingPercentage(suggestion.missing_percentage);\r\n                const fallbackDisplay = suggestion.recommended_use_global_fallback ? 'Use global mean' : '';\r\n\r\n                return (\r\n                  <tr key={`target-encoding-row-${suggestion.column}`} className=\"canvas-cast__row\">\r\n                    <th scope=\"row\">\r\n                      <div className=\"canvas-cast__column-cell\">\r\n                        <span className=\"canvas-cast__column-name\">{suggestion.column}</span>\r\n                        <div className=\"canvas-cast__column-meta\">\r\n                          {suggestion.dtype && <span className=\"canvas-cast__muted\">dtype: {suggestion.dtype}</span>}\r\n                          {suggestion.text_category && (\r\n                            <span className=\"canvas-cast__badge canvas-cast__badge--category\">\r\n                              {suggestion.text_category}\r\n                            </span>\r\n                          )}\r\n                        </div>\r\n                        <div className=\"canvas-cast__column-meta\">\r\n                          <span className=\"canvas-cast__muted\">Examples: {sampleValues}</span>\r\n                        </div>\r\n                        <p className=\"canvas-cast__recommendation-note\">{suggestion.reason}</p>\r\n                      </div>\r\n                    </th>\r\n                    <td>{uniqueDisplay}</td>\r\n                    <td>{missingDisplay}</td>\r\n                    <td>{fallbackDisplay}</td>\r\n                    <td>\r\n                      <span className={`canvas-cast__chip ${statusClass}`}>{statusLabel}</span>\r\n                    </td>\r\n                    <td>\r\n                      <label className=\"canvas-modal__checkbox-item\">\r\n                        <input\r\n                          type=\"checkbox\"\r\n                          checked={isSelected}\r\n                          onChange={() => onToggleColumn(suggestion.column)}\r\n                          disabled={!suggestion.selectable}\r\n                        />\r\n                        <span className=\"canvas-modal__checkbox-label\">\r\n                          {suggestion.selectable ? (isSelected ? 'In node' : 'Add column') : 'Not eligible'}\r\n                        </span>\r\n                      </label>\r\n                    </td>\r\n                  </tr>\r\n                );\r\n              })}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      )}\r\n      <div className=\"canvas-modal__parameter-grid\">\r\n        {targetColumnParameter && renderParameterField(targetColumnParameter)}\r\n        {autoDetectParameter && renderParameterField(autoDetectParameter)}\r\n        {maxCategoriesParameter && renderParameterField(maxCategoriesParameter)}\r\n        {outputSuffixParameter && renderParameterField(outputSuffixParameter)}\r\n        {dropOriginalParameter && renderParameterField(dropOriginalParameter)}\r\n        {smoothingParameter && renderParameterField(smoothingParameter)}\r\n        {encodeMissingParameter && renderParameterField(encodeMissingParameter)}\r\n        {handleUnknownParameter && renderParameterField(handleUnknownParameter)}\r\n      </div>\r\n      {columnsParameter && (\r\n        <div>\r\n          <h4 className=\"canvas-modal__subheading\">Manual column selection</h4>\r\n          {renderParameterField(columnsParameter)}\r\n        </div>\r\n      )}\r\n    </section>\r\n  );\r\n};\r\n","import React, { useMemo } from 'react';\r\nimport type {\r\n  FeatureNodeParameter,\r\n  HashEncodingColumnSuggestion,\r\n  HashEncodingSuggestionStatus,\r\n} from '../../../../api';\r\n\r\ntype HashEncodingSectionProps = {\r\n  sourceId?: string | null;\r\n  hasReachableSource: boolean;\r\n  isFetching: boolean;\r\n  error: string | null;\r\n  suggestions: HashEncodingColumnSuggestion[];\r\n  metadata: {\r\n    sampleSize: number | null;\r\n    generatedAt: string | null;\r\n    totalTextColumns: number;\r\n    recommendedCount: number;\r\n    autoDetectDefault: boolean;\r\n    suggestedBucketDefault: number;\r\n    highCardinalityColumns: string[];\r\n    notes: string[];\r\n  };\r\n  columnsParameter: FeatureNodeParameter | null;\r\n  autoDetectParameter: FeatureNodeParameter | null;\r\n  maxCategoriesParameter: FeatureNodeParameter | null;\r\n  bucketsParameter: FeatureNodeParameter | null;\r\n  outputSuffixParameter: FeatureNodeParameter | null;\r\n  dropOriginalParameter: FeatureNodeParameter | null;\r\n  encodeMissingParameter: FeatureNodeParameter | null;\r\n  selectedColumns: string[];\r\n  renderParameterField: (parameter: FeatureNodeParameter) => React.ReactNode;\r\n  onToggleColumn: (column: string) => void;\r\n  onApplyRecommended: (columns: string[]) => void;\r\n  canResetNode?: boolean;\r\n  onResetNode?: () => void;\r\n  formatMissingPercentage: (value?: number | null) => string;\r\n};\r\n\r\nconst STATUS_LABELS: Record<HashEncodingSuggestionStatus, string> = {\r\n  recommended: 'Recommended',\r\n  high_cardinality: 'High cardinality',\r\n  identifier: 'Identifier-like',\r\n  free_text: 'Free text',\r\n  single_category: 'Single category',\r\n  too_many_categories: 'Too many categories',\r\n};\r\n\r\nconst STATUS_BADGE_CLASS: Record<HashEncodingSuggestionStatus, string> = {\r\n  recommended: 'canvas-cast__chip--applied',\r\n  high_cardinality: 'canvas-cast__chip--attention',\r\n  identifier: 'canvas-cast__chip--muted',\r\n  free_text: 'canvas-cast__chip--muted',\r\n  single_category: 'canvas-cast__chip--muted',\r\n  too_many_categories: 'canvas-cast__chip--muted',\r\n};\r\n\r\nconst formatMetric = (value: number | null | undefined): string => {\r\n  if (value === null || value === undefined || Number.isNaN(value)) {\r\n    return '';\r\n  }\r\n  return value.toLocaleString(undefined, { maximumFractionDigits: 2 });\r\n};\r\n\r\nexport const HashEncodingSection: React.FC<HashEncodingSectionProps> = ({\r\n  sourceId,\r\n  hasReachableSource,\r\n  isFetching,\r\n  error,\r\n  suggestions,\r\n  metadata,\r\n  columnsParameter,\r\n  autoDetectParameter,\r\n  maxCategoriesParameter,\r\n  bucketsParameter,\r\n  outputSuffixParameter,\r\n  dropOriginalParameter,\r\n  encodeMissingParameter,\r\n  selectedColumns,\r\n  renderParameterField,\r\n  onToggleColumn,\r\n  onApplyRecommended,\r\n  canResetNode = false,\r\n  onResetNode,\r\n  formatMissingPercentage,\r\n}) => {\r\n  const recommendedColumns = useMemo(() => {\r\n    if (!suggestions.length) {\r\n      return [] as string[];\r\n    }\r\n    const aggregate = new Set<string>();\r\n    suggestions.forEach((entry) => {\r\n      if (entry.status === 'recommended' && entry.selectable) {\r\n        aggregate.add(entry.column);\r\n      }\r\n    });\r\n    return Array.from(aggregate);\r\n  }, [suggestions]);\r\n\r\n  const connectionNote = useMemo(() => {\r\n    if (!sourceId) {\r\n      return 'Choose a dataset to surface hash encoding suggestions.';\r\n    }\r\n    if (!hasReachableSource) {\r\n      return 'Connect this node to the dataset input to analyse categorical features.';\r\n    }\r\n    return null;\r\n  }, [hasReachableSource, sourceId]);\r\n\r\n  const hasSuggestions = suggestions.length > 0;\r\n  const bucketDefaultNote = metadata.suggestedBucketDefault > 0\r\n    ? `Default bucket suggestion: ${metadata.suggestedBucketDefault.toLocaleString()}.`\r\n    : null;\r\n  const showErrorMessage = !isFetching && Boolean(error) && Boolean(sourceId) && hasReachableSource;\r\n\r\n  return (\r\n    <section className=\"canvas-modal__section\">\r\n      <div className=\"canvas-modal__section-header\">\r\n        <h3>Hash encoding suggestions</h3>\r\n        <div className=\"canvas-modal__section-actions\">\r\n          <button\r\n            type=\"button\"\r\n            className=\"btn btn-primary\"\r\n            onClick={() => onApplyRecommended(recommendedColumns)}\r\n            disabled={!recommendedColumns.length}\r\n          >\r\n            Add recommended\r\n          </button>\r\n          {canResetNode && (\r\n            <button\r\n              type=\"button\"\r\n              className=\"btn btn-outline-secondary\"\r\n              onClick={onResetNode}\r\n              disabled={!onResetNode}\r\n            >\r\n              Reset node\r\n            </button>\r\n          )}\r\n        </div>\r\n      </div>\r\n      <p className=\"canvas-modal__note\">\r\n        Hash encoding maps categorical labels into a fixed number of numeric buckets, keeping feature width bounded even\r\n        when categories grow over time. Collisions are acceptable for tree models and regularised linear models that can\r\n        tolerate sparse overlaps.\r\n      </p>\r\n      {connectionNote && <p className=\"canvas-modal__note canvas-modal__note--warning\">{connectionNote}</p>}\r\n      {metadata.autoDetectDefault && (\r\n        <p className=\"canvas-modal__note\">\r\n          Auto-detect is suggested so newly ingested categorical columns pick up hashing without manual edits.\r\n        </p>\r\n      )}\r\n      {bucketDefaultNote && <p className=\"canvas-modal__note canvas-modal__note--info\">{bucketDefaultNote}</p>}\r\n      {metadata.generatedAt && (\r\n        <p className=\"canvas-modal__note\">\r\n          Insights generated {new Date(metadata.generatedAt).toLocaleString()} on{' '}\r\n          {metadata.sampleSize === null\r\n            ? 'sampled rows'\r\n            : `${metadata.sampleSize.toLocaleString()} row${metadata.sampleSize === 1 ? '' : 's'}`}.\r\n        </p>\r\n      )}\r\n      {!metadata.generatedAt && metadata.sampleSize !== null && (\r\n        <p className=\"canvas-modal__note\">\r\n          Evaluated {metadata.sampleSize.toLocaleString()} row{metadata.sampleSize === 1 ? '' : 's'} for categorical trends.\r\n        </p>\r\n      )}\r\n      {metadata.totalTextColumns > 0 && (\r\n        <p className=\"canvas-modal__note\">\r\n          Found {metadata.totalTextColumns} text column{metadata.totalTextColumns === 1 ? '' : 's'}; recommendations cover{' '}\r\n          {metadata.recommendedCount} candidate{metadata.recommendedCount === 1 ? '' : 's'}.\r\n        </p>\r\n      )}\r\n      {metadata.notes.length > 0 && (\r\n        <ul className=\"canvas-modal__note-list\">\r\n          {metadata.notes.map((note, index) => (\r\n            <li key={`hash-encoding-note-${index}`}>{note}</li>\r\n          ))}\r\n        </ul>\r\n      )}\r\n      {metadata.highCardinalityColumns.length > 0 && (\r\n        <p className=\"canvas-modal__note\">\r\n          High-cardinality columns highlighted:{' '}\r\n          {metadata.highCardinalityColumns.slice(0, 4).join(', ')}\r\n          {metadata.highCardinalityColumns.length > 4 ? ', ' : ''}.\r\n        </p>\r\n      )}\r\n      {isFetching && <p className=\"canvas-modal__note\">Loading hash encoding insights</p>}\r\n      {showErrorMessage && <p className=\"canvas-modal__note canvas-modal__note--error\">{error ?? ''}</p>}\r\n      {!isFetching && !error && !hasSuggestions && sourceId && hasReachableSource && (\r\n        <p className=\"canvas-modal__note\">No categorical text candidates detected in the current preview.</p>\r\n      )}\r\n      {!isFetching && !error && hasSuggestions && (\r\n        <div className=\"canvas-cast__table-wrapper\">\r\n          <table className=\"canvas-cast__table\">\r\n            <thead>\r\n              <tr>\r\n                <th scope=\"col\">Column</th>\r\n                <th scope=\"col\">Distinct</th>\r\n                <th scope=\"col\">Missing</th>\r\n                <th scope=\"col\">Suggested buckets</th>\r\n                <th scope=\"col\">Status</th>\r\n                <th scope=\"col\">Select</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {suggestions.map((suggestion) => {\r\n                const isSelected = selectedColumns.includes(suggestion.column);\r\n                const statusLabel = STATUS_LABELS[suggestion.status];\r\n                const statusClass = STATUS_BADGE_CLASS[suggestion.status] ?? 'canvas-cast__chip--muted';\r\n                const sampleValues = suggestion.sample_values.length ? suggestion.sample_values.join(', ') : '';\r\n                const uniqueDisplay = suggestion.unique_count !== undefined && suggestion.unique_count !== null\r\n                  ? `${formatMetric(suggestion.unique_count)} (${formatMetric(suggestion.unique_percentage)}%)`\r\n                  : '';\r\n                const missingDisplay = formatMissingPercentage(suggestion.missing_percentage);\r\n                const bucketDisplay = suggestion.recommended_bucket_count\r\n                  ? suggestion.recommended_bucket_count.toLocaleString()\r\n                  : '';\r\n\r\n                return (\r\n                  <tr key={`hash-encoding-row-${suggestion.column}`} className=\"canvas-cast__row\">\r\n                    <th scope=\"row\">\r\n                      <div className=\"canvas-cast__column-cell\">\r\n                        <span className=\"canvas-cast__column-name\">{suggestion.column}</span>\r\n                        <div className=\"canvas-cast__column-meta\">\r\n                          {suggestion.dtype && <span className=\"canvas-cast__muted\">dtype: {suggestion.dtype}</span>}\r\n                          {suggestion.text_category && (\r\n                            <span className=\"canvas-cast__badge canvas-cast__badge--category\">\r\n                              {suggestion.text_category}\r\n                            </span>\r\n                          )}\r\n                        </div>\r\n                        <div className=\"canvas-cast__column-meta\">\r\n                          <span className=\"canvas-cast__muted\">Examples: {sampleValues}</span>\r\n                        </div>\r\n                        <p className=\"canvas-cast__recommendation-note\">{suggestion.reason}</p>\r\n                      </div>\r\n                    </th>\r\n                    <td>{uniqueDisplay}</td>\r\n                    <td>{missingDisplay}</td>\r\n                    <td>{bucketDisplay}</td>\r\n                    <td>\r\n                      <span className={`canvas-cast__chip ${statusClass}`}>{statusLabel}</span>\r\n                    </td>\r\n                    <td>\r\n                      <label className=\"canvas-modal__checkbox-item\">\r\n                        <input\r\n                          type=\"checkbox\"\r\n                          checked={isSelected}\r\n                          onChange={() => onToggleColumn(suggestion.column)}\r\n                          disabled={!suggestion.selectable}\r\n                        />\r\n                        <span className=\"canvas-modal__checkbox-label\">\r\n                          {suggestion.selectable ? (isSelected ? 'In node' : 'Add column') : 'Not eligible'}\r\n                        </span>\r\n                      </label>\r\n                    </td>\r\n                  </tr>\r\n                );\r\n              })}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      )}\r\n      <div className=\"canvas-modal__parameter-grid\">\r\n        {autoDetectParameter && renderParameterField(autoDetectParameter)}\r\n        {maxCategoriesParameter && renderParameterField(maxCategoriesParameter)}\r\n        {bucketsParameter && renderParameterField(bucketsParameter)}\r\n        {outputSuffixParameter && renderParameterField(outputSuffixParameter)}\r\n        {dropOriginalParameter && renderParameterField(dropOriginalParameter)}\r\n        {encodeMissingParameter && renderParameterField(encodeMissingParameter)}\r\n      </div>\r\n      {columnsParameter && (\r\n        <div>\r\n          <h4 className=\"canvas-modal__subheading\">Manual column selection</h4>\r\n          {renderParameterField(columnsParameter)}\r\n        </div>\r\n      )}\r\n    </section>\r\n  );\r\n};\r\n","import React, { useMemo } from 'react';\r\nimport type { FeatureNodeParameter, PolynomialFeaturesNodeSignal } from '../../../../api';\r\n\r\ntype PolynomialFeaturesSectionProps = {\r\n  columnsParameter: FeatureNodeParameter | null;\r\n  autoDetectParameter: FeatureNodeParameter | null;\r\n  degreeParameter: FeatureNodeParameter | null;\r\n  includeBiasParameter: FeatureNodeParameter | null;\r\n  interactionOnlyParameter: FeatureNodeParameter | null;\r\n  includeInputFeaturesParameter: FeatureNodeParameter | null;\r\n  outputPrefixParameter: FeatureNodeParameter | null;\r\n  renderParameterField: (parameter: FeatureNodeParameter) => React.ReactNode;\r\n  signal: PolynomialFeaturesNodeSignal | null;\r\n  canResetNode?: boolean;\r\n  onResetNode?: () => void;\r\n};\r\n\r\nexport const PolynomialFeaturesSection: React.FC<PolynomialFeaturesSectionProps> = ({\r\n  columnsParameter,\r\n  autoDetectParameter,\r\n  degreeParameter,\r\n  includeBiasParameter,\r\n  interactionOnlyParameter,\r\n  includeInputFeaturesParameter,\r\n  outputPrefixParameter,\r\n  renderParameterField,\r\n  signal,\r\n  canResetNode = false,\r\n  onResetNode,\r\n}) => {\r\n  const parameterList = useMemo(() => {\r\n    return [\r\n      columnsParameter,\r\n      autoDetectParameter,\r\n      degreeParameter,\r\n      includeBiasParameter,\r\n      interactionOnlyParameter,\r\n      includeInputFeaturesParameter,\r\n      outputPrefixParameter,\r\n    ].filter((parameter): parameter is FeatureNodeParameter => Boolean(parameter));\r\n  }, [\r\n    columnsParameter,\r\n    autoDetectParameter,\r\n    degreeParameter,\r\n    includeBiasParameter,\r\n    interactionOnlyParameter,\r\n    includeInputFeaturesParameter,\r\n    outputPrefixParameter,\r\n  ]);\r\n\r\n  const generatedFeatures = signal?.generated_features ?? [];\r\n  const skippedColumns = signal?.skipped_columns ?? [];\r\n  const filledColumns = signal?.filled_columns ?? {};\r\n  const notes = signal?.notes ?? [];\r\n  const featureCount = signal?.feature_count ?? 0;\r\n\r\n  const filledSummary = useMemo(() => {\r\n    const entries = Object.entries(filledColumns);\r\n    if (!entries.length) {\r\n      return null;\r\n    }\r\n    return entries\r\n      .map(([column, count]) => `${column} (${count.toLocaleString()} missing)`)\r\n      .join(', ');\r\n  }, [filledColumns]);\r\n\r\n  return (\r\n    <section className=\"canvas-modal__section\">\r\n      <div className=\"canvas-modal__section-header\">\r\n        <h3>Polynomial feature settings</h3>\r\n        {canResetNode && (\r\n          <button\r\n            type=\"button\"\r\n            className=\"btn btn-outline-secondary\"\r\n            onClick={onResetNode}\r\n            disabled={!onResetNode}\r\n          >\r\n            Reset node\r\n          </button>\r\n        )}\r\n      </div>\r\n      <p className=\"canvas-modal__note\">\r\n        Expand numeric features with polynomial powers and interaction terms to capture non-linear relations. Preview the\r\n        node to inspect generated columns and adjust degree or interaction options as needed.\r\n      </p>\r\n      {parameterList.length > 0 && (\r\n        <div className=\"canvas-modal__parameter-grid\">\r\n          {parameterList.map((parameter) => renderParameterField(parameter))}\r\n        </div>\r\n      )}\r\n      {skippedColumns.length > 0 && (\r\n        <p className=\"canvas-modal__note canvas-modal__note--warning\">\r\n          Skipped columns: {skippedColumns.join(', ')}.\r\n        </p>\r\n      )}\r\n      {filledSummary && (\r\n        <p className=\"canvas-modal__note canvas-modal__note--info\">\r\n          Filled missing values with 0 for {filledSummary} before generating features.\r\n        </p>\r\n      )}\r\n      {featureCount > 0 ? (\r\n        <div className=\"canvas-cast__table-wrapper\">\r\n          <table className=\"canvas-cast__table\">\r\n            <thead>\r\n              <tr>\r\n                <th scope=\"col\">Feature column</th>\r\n                <th scope=\"col\">Expression</th>\r\n                <th scope=\"col\">Degree</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {generatedFeatures.map((feature) => (\r\n                <tr key={`poly-feature-${feature.column}`} className=\"canvas-cast__row\">\r\n                  <th scope=\"row\">{feature.column}</th>\r\n                  <td>{feature.expression || (feature.terms.length ? feature.terms.join('  ') : '1')}</td>\r\n                  <td>{feature.degree}</td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      ) : (\r\n        <p className=\"canvas-modal__note\">\r\n          No derived features yet. Run a preview to generate polynomial terms for the current configuration.\r\n        </p>\r\n      )}\r\n      {notes.length > 0 && (\r\n        <ul className=\"canvas-modal__note-list\">\r\n          {notes.map((note, index) => (\r\n            <li key={`polynomial-note-${index}`}>{note}</li>\r\n          ))}\r\n        </ul>\r\n      )}\r\n    </section>\r\n  );\r\n};\r\n","import React, { useMemo } from 'react';\r\nimport type { FeatureNodeParameter, FeatureSelectionNodeSignal } from '../../../../api';\r\n\r\ntype FeatureSelectionSectionProps = {\r\n  columnsParameter: FeatureNodeParameter | null;\r\n  autoDetectParameter: FeatureNodeParameter | null;\r\n  targetColumnParameter: FeatureNodeParameter | null;\r\n  methodParameter: FeatureNodeParameter | null;\r\n  scoreFuncParameter: FeatureNodeParameter | null;\r\n  problemTypeParameter: FeatureNodeParameter | null;\r\n  kParameter: FeatureNodeParameter | null;\r\n  percentileParameter: FeatureNodeParameter | null;\r\n  alphaParameter: FeatureNodeParameter | null;\r\n  thresholdParameter: FeatureNodeParameter | null;\r\n  modeParameter: FeatureNodeParameter | null;\r\n  estimatorParameter: FeatureNodeParameter | null;\r\n  stepParameter: FeatureNodeParameter | null;\r\n  minFeaturesParameter: FeatureNodeParameter | null;\r\n  maxFeaturesParameter: FeatureNodeParameter | null;\r\n  dropUnselectedParameter: FeatureNodeParameter | null;\r\n  renderParameterField: (parameter: FeatureNodeParameter) => React.ReactNode;\r\n  signal: FeatureSelectionNodeSignal | null;\r\n  canResetNode?: boolean;\r\n  onResetNode?: () => void;\r\n};\r\n\r\nconst isDefinedParameter = (\r\n  parameter: FeatureNodeParameter | null,\r\n): parameter is FeatureNodeParameter => Boolean(parameter);\r\n\r\nconst formatNumber = (value: number | null | undefined, fractionDigits = 4): string => {\r\n  if (value === null || value === undefined) {\r\n    return '';\r\n  }\r\n  const numeric = Number(value);\r\n  if (!Number.isFinite(numeric)) {\r\n    return '';\r\n  }\r\n  return numeric.toLocaleString(undefined, { maximumFractionDigits: fractionDigits });\r\n};\r\n\r\nconst formatPValue = (value: number | null | undefined): string => {\r\n  if (value === null || value === undefined) {\r\n    return '';\r\n  }\r\n  const numeric = Number(value);\r\n  if (!Number.isFinite(numeric)) {\r\n    return '';\r\n  }\r\n  if (numeric === 0) {\r\n    return '< 1e-12';\r\n  }\r\n  if (numeric < 0.0001) {\r\n    return numeric.toExponential(2);\r\n  }\r\n  return numeric.toLocaleString(undefined, { maximumFractionDigits: 6 });\r\n};\r\n\r\nconst formatColumnPreview = (columns: string[], limit = 8): string => {\r\n  if (!columns.length) {\r\n    return 'None';\r\n  }\r\n  const preview = columns.slice(0, limit);\r\n  const remainder = columns.length - preview.length;\r\n  return remainder > 0 ? `${preview.join(', ')}  (${remainder} more)` : preview.join(', ');\r\n};\r\n\r\nexport const FeatureSelectionSection: React.FC<FeatureSelectionSectionProps> = ({\r\n  columnsParameter,\r\n  autoDetectParameter,\r\n  targetColumnParameter,\r\n  methodParameter,\r\n  scoreFuncParameter,\r\n  problemTypeParameter,\r\n  kParameter,\r\n  percentileParameter,\r\n  alphaParameter,\r\n  thresholdParameter,\r\n  modeParameter,\r\n  estimatorParameter,\r\n  stepParameter,\r\n  minFeaturesParameter,\r\n  maxFeaturesParameter,\r\n  dropUnselectedParameter,\r\n  renderParameterField,\r\n  signal,\r\n  canResetNode = false,\r\n  onResetNode,\r\n}) => {\r\n  const primaryParameters = useMemo(() => {\r\n    return [\r\n      columnsParameter,\r\n      autoDetectParameter,\r\n      targetColumnParameter,\r\n      methodParameter,\r\n      scoreFuncParameter,\r\n      problemTypeParameter,\r\n    ].filter(isDefinedParameter);\r\n  }, [\r\n    columnsParameter,\r\n    autoDetectParameter,\r\n    targetColumnParameter,\r\n    methodParameter,\r\n    scoreFuncParameter,\r\n    problemTypeParameter,\r\n  ]);\r\n\r\n  const tuningParameters = useMemo(() => {\r\n    return [\r\n      kParameter,\r\n      percentileParameter,\r\n      alphaParameter,\r\n      thresholdParameter,\r\n      modeParameter,\r\n      estimatorParameter,\r\n      stepParameter,\r\n      minFeaturesParameter,\r\n      maxFeaturesParameter,\r\n      dropUnselectedParameter,\r\n    ].filter(isDefinedParameter);\r\n  }, [\r\n    kParameter,\r\n    percentileParameter,\r\n    alphaParameter,\r\n    thresholdParameter,\r\n    modeParameter,\r\n    estimatorParameter,\r\n    stepParameter,\r\n    minFeaturesParameter,\r\n    maxFeaturesParameter,\r\n    dropUnselectedParameter,\r\n  ]);\r\n\r\n  const configuredColumns = signal?.configured_columns ?? [];\r\n  const evaluatedColumns = signal?.evaluated_columns ?? [];\r\n  const selectedColumns = signal?.selected_columns ?? [];\r\n  const droppedColumns = signal?.dropped_columns ?? [];\r\n  const summaries = signal?.feature_summaries ?? [];\r\n  const notes = signal?.notes ?? [];\r\n  const dropUnselected = signal?.drop_unselected ?? false;\r\n\r\n  const evaluationSummary = useMemo(() => {\r\n    if (!evaluatedColumns.length && !configuredColumns.length) {\r\n      return null;\r\n    }\r\n    if (evaluatedColumns.length === configuredColumns.length) {\r\n      return `Evaluated ${evaluatedColumns.length.toLocaleString()} column(s).`;\r\n    }\r\n    if (!configuredColumns.length) {\r\n      return `Evaluated ${evaluatedColumns.length.toLocaleString()} column(s) via auto-detect.`;\r\n    }\r\n    const additional = Math.max(evaluatedColumns.length - configuredColumns.length, 0);\r\n    if (additional > 0) {\r\n      return `Evaluated ${evaluatedColumns.length.toLocaleString()} column(s) (${additional.toLocaleString()} auto-detected).`;\r\n    }\r\n    return `Evaluated ${evaluatedColumns.length.toLocaleString()} of ${configuredColumns.length.toLocaleString()} configured column(s).`;\r\n  }, [configuredColumns, evaluatedColumns]);\r\n\r\n  const methodSummary = useMemo(() => {\r\n    if (!signal) {\r\n      return null;\r\n    }\r\n    const parts: string[] = [];\r\n    if (signal.method) {\r\n      parts.push(`Method: ${signal.method}`);\r\n    }\r\n    if (signal.score_func) {\r\n      parts.push(`Score: ${signal.score_func}`);\r\n    }\r\n    if (signal.estimator) {\r\n      parts.push(`Estimator: ${signal.estimator}`);\r\n    }\r\n    if (signal.problem_type && signal.problem_type !== 'auto') {\r\n      parts.push(`Problem: ${signal.problem_type}`);\r\n    }\r\n    if (signal.target_column) {\r\n      parts.push(`Target: ${signal.target_column}`);\r\n    }\r\n    if (typeof signal.k === 'number' && Number.isFinite(signal.k)) {\r\n      parts.push(`k = ${signal.k.toLocaleString()}`);\r\n    }\r\n    if (typeof signal.percentile === 'number' && Number.isFinite(signal.percentile)) {\r\n      parts.push(`percentile = ${formatNumber(signal.percentile, 2)}`);\r\n    }\r\n    if (typeof signal.alpha === 'number' && Number.isFinite(signal.alpha)) {\r\n      parts.push(`alpha = ${formatNumber(signal.alpha, 4)}`);\r\n    }\r\n    if (signal.threshold !== null && signal.threshold !== undefined && Number.isFinite(signal.threshold)) {\r\n      parts.push(`threshold = ${formatNumber(signal.threshold, 4)}`);\r\n    }\r\n    if (signal.auto_detect) {\r\n      parts.push('Auto-detect enabled');\r\n    }\r\n    return parts.length ? parts.join('  ') : null;\r\n  }, [signal]);\r\n\r\n  const selectedSummary = useMemo(() => formatColumnPreview(selectedColumns), [selectedColumns]);\r\n  const droppedSummary = useMemo(() => formatColumnPreview(droppedColumns), [droppedColumns]);\r\n\r\n  return (\r\n    <section className=\"canvas-modal__section\">\r\n      <div className=\"canvas-modal__section-header\">\r\n        <h3>Feature selection settings</h3>\r\n        {canResetNode && (\r\n          <button\r\n            type=\"button\"\r\n            className=\"btn btn-outline-secondary\"\r\n            onClick={onResetNode}\r\n            disabled={!onResetNode}\r\n          >\r\n            Reset node\r\n          </button>\r\n        )}\r\n      </div>\r\n      <p className=\"canvas-modal__note\">\r\n        Score candidate predictors and retain the most informative columns using statistical tests or model-based selectors.\r\n        Run a preview after adjusting parameters to refresh rankings.\r\n      </p>\r\n      {methodSummary && (\r\n        <p className=\"canvas-modal__note canvas-modal__note--info\">{methodSummary}</p>\r\n      )}\r\n      {evaluationSummary && (\r\n        <p className=\"canvas-modal__note canvas-modal__note--info\">{evaluationSummary}</p>\r\n      )}\r\n      {primaryParameters.length > 0 && (\r\n        <div className=\"canvas-modal__parameter-grid\">\r\n          {primaryParameters.map((parameter) => renderParameterField(parameter))}\r\n        </div>\r\n      )}\r\n      {tuningParameters.length > 0 && (\r\n        <div className=\"canvas-modal__parameter-grid\" style={{ marginTop: '1rem' }}>\r\n          {tuningParameters.map((parameter) => renderParameterField(parameter))}\r\n        </div>\r\n      )}\r\n      <p className=\"canvas-modal__note canvas-modal__note--muted\">\r\n        {dropUnselected\r\n          ? 'Unselected columns will be dropped from the dataset when this node runs.'\r\n          : 'Unselected columns will remain in the dataset for downstream steps.'}\r\n      </p>\r\n      {selectedColumns.length > 0 ? (\r\n        <p className=\"canvas-modal__note canvas-modal__note--info\">\r\n          Selected {selectedColumns.length.toLocaleString()} column(s): {selectedSummary}\r\n        </p>\r\n      ) : (\r\n        <p className=\"canvas-modal__note\">\r\n          No columns selected yet. Run a preview to compute selection scores.\r\n        </p>\r\n      )}\r\n      {droppedColumns.length > 0 && (\r\n        <p className=\"canvas-modal__note canvas-modal__note--warning\">\r\n          Dropped {droppedColumns.length.toLocaleString()} column(s): {droppedSummary}\r\n        </p>\r\n      )}\r\n      {summaries.length > 0 ? (\r\n        <div className=\"canvas-cast__table-wrapper\">\r\n          <table className=\"canvas-cast__table\">\r\n            <thead>\r\n              <tr>\r\n                <th scope=\"col\">Feature column</th>\r\n                <th scope=\"col\">Score</th>\r\n                <th scope=\"col\">p-value</th>\r\n                <th scope=\"col\">Rank</th>\r\n                <th scope=\"col\">Importance</th>\r\n                <th scope=\"col\">Status</th>\r\n                <th scope=\"col\">Note</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {summaries.map((summary) => {\r\n                const rowClasses = ['canvas-cast__row'];\r\n                if (!summary.selected) {\r\n                  rowClasses.push('canvas-cast__row--muted');\r\n                }\r\n                return (\r\n                  <tr key={`feature-selection-summary-${summary.column}`} className={rowClasses.join(' ')}>\r\n                    <th scope=\"row\">{summary.column}</th>\r\n                    <td>{formatNumber(summary.score)}</td>\r\n                    <td>{formatPValue(summary.p_value)}</td>\r\n                    <td>{summary.rank ?? ''}</td>\r\n                    <td>{formatNumber(summary.importance, 4)}</td>\r\n                    <td>{summary.selected ? 'Selected' : 'Dropped'}</td>\r\n                    <td>{summary.note ?? ''}</td>\r\n                  </tr>\r\n                );\r\n              })}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      ) : (\r\n        <p className=\"canvas-modal__note\">\r\n          Preview results will display per-column scores, ranks, and selection outcomes here.\r\n        </p>\r\n      )}\r\n      {notes.length > 0 && (\r\n        <ul className=\"canvas-modal__note-list\">\r\n          {notes.map((note, index) => (\r\n            <li key={`feature-selection-note-${index}`}>{note}</li>\r\n          ))}\r\n        </ul>\r\n      )}\r\n    </section>\r\n  );\r\n};\r\n","import React, { useMemo } from 'react';\r\nimport type {\r\n  FeatureNodeParameter,\r\n  OrdinalEncodingColumnSuggestion,\r\n  OrdinalEncodingSuggestionStatus,\r\n} from '../../../../api';\r\n\r\ntype OrdinalEncodingSectionProps = {\r\n  sourceId?: string | null;\r\n  hasReachableSource: boolean;\r\n  isFetching: boolean;\r\n  error: string | null;\r\n  suggestions: OrdinalEncodingColumnSuggestion[];\r\n  metadata: {\r\n    sampleSize: number | null;\r\n    generatedAt: string | null;\r\n    totalTextColumns: number;\r\n    recommendedCount: number;\r\n    autoDetectDefault: boolean;\r\n    enableUnknownDefault: boolean;\r\n    highCardinalityColumns: string[];\r\n    notes: string[];\r\n  };\r\n  columnsParameter: FeatureNodeParameter | null;\r\n  autoDetectParameter: FeatureNodeParameter | null;\r\n  maxCategoriesParameter: FeatureNodeParameter | null;\r\n  outputSuffixParameter: FeatureNodeParameter | null;\r\n  dropOriginalParameter: FeatureNodeParameter | null;\r\n  encodeMissingParameter: FeatureNodeParameter | null;\r\n  handleUnknownParameter: FeatureNodeParameter | null;\r\n  unknownValueParameter: FeatureNodeParameter | null;\r\n  selectedColumns: string[];\r\n  renderParameterField: (parameter: FeatureNodeParameter) => React.ReactNode;\r\n  onToggleColumn: (column: string) => void;\r\n  onApplyRecommended: (columns: string[]) => void;\r\n  formatMissingPercentage: (value?: number | null) => string;\r\n};\r\n\r\nconst STATUS_LABELS: Record<OrdinalEncodingSuggestionStatus, string> = {\r\n  recommended: 'Recommended',\r\n  high_cardinality: 'High cardinality',\r\n  identifier: 'Identifier-like',\r\n  free_text: 'Free text',\r\n  single_category: 'Single category',\r\n  too_many_categories: 'Too many categories',\r\n};\r\n\r\nconst STATUS_BADGE_CLASS: Record<OrdinalEncodingSuggestionStatus, string> = {\r\n  recommended: 'canvas-cast__chip--applied',\r\n  high_cardinality: 'canvas-cast__chip--attention',\r\n  identifier: 'canvas-cast__chip--muted',\r\n  free_text: 'canvas-cast__chip--muted',\r\n  single_category: 'canvas-cast__chip--muted',\r\n  too_many_categories: 'canvas-cast__chip--muted',\r\n};\r\n\r\nconst formatMetric = (value: number | null | undefined): string => {\r\n  if (value === null || value === undefined || Number.isNaN(value)) {\r\n    return '';\r\n  }\r\n  return value.toLocaleString(undefined, { maximumFractionDigits: 2 });\r\n};\r\n\r\nexport const OrdinalEncodingSection: React.FC<OrdinalEncodingSectionProps> = ({\r\n  sourceId,\r\n  hasReachableSource,\r\n  isFetching,\r\n  error,\r\n  suggestions,\r\n  metadata,\r\n  columnsParameter,\r\n  autoDetectParameter,\r\n  maxCategoriesParameter,\r\n  outputSuffixParameter,\r\n  dropOriginalParameter,\r\n  encodeMissingParameter,\r\n  handleUnknownParameter,\r\n  unknownValueParameter,\r\n  selectedColumns,\r\n  renderParameterField,\r\n  onToggleColumn,\r\n  onApplyRecommended,\r\n  formatMissingPercentage,\r\n}) => {\r\n  const recommendedColumns = useMemo(() => {\r\n    if (!suggestions.length) {\r\n      return [] as string[];\r\n    }\r\n    const aggregate = new Set<string>();\r\n    suggestions.forEach((entry) => {\r\n      if (entry.status === 'recommended' && entry.selectable) {\r\n        aggregate.add(entry.column);\r\n      }\r\n    });\r\n    return Array.from(aggregate);\r\n  }, [suggestions]);\r\n\r\n  const connectionNote = useMemo(() => {\r\n    if (!sourceId) {\r\n      return 'Choose a dataset to surface ordinal encoding suggestions.';\r\n    }\r\n    if (!hasReachableSource) {\r\n      return 'Connect this node to the dataset input to analyse categorical features.';\r\n    }\r\n    return null;\r\n  }, [hasReachableSource, sourceId]);\r\n\r\n  const hasSuggestions = suggestions.length > 0;\r\n  const showErrorMessage = !isFetching && Boolean(error) && Boolean(sourceId) && hasReachableSource;\r\n\r\n  return (\r\n    <section className=\"canvas-modal__section\">\r\n      <div className=\"canvas-modal__section-header\">\r\n        <h3>Ordinal encoding suggestions</h3>\r\n        <div className=\"canvas-modal__section-actions\">\r\n          <button\r\n            type=\"button\"\r\n            className=\"btn btn-primary\"\r\n            onClick={() => onApplyRecommended(recommendedColumns)}\r\n            disabled={!recommendedColumns.length}\r\n          >\r\n            Add recommended\r\n          </button>\r\n        </div>\r\n      </div>\r\n      <p className=\"canvas-modal__note\">\r\n        Convert categorical columns into ordered integer codes. Use the fallback controls to keep pipelines stable when\r\n        unexpected categories or missing values appear.\r\n      </p>\r\n      {connectionNote && <p className=\"canvas-modal__note canvas-modal__note--warning\">{connectionNote}</p>}\r\n      {metadata.autoDetectDefault && (\r\n        <p className=\"canvas-modal__note\">\r\n          Auto-detect is suggested so future categorical columns join without manual updates.\r\n        </p>\r\n      )}\r\n      {metadata.enableUnknownDefault && (\r\n        <p className=\"canvas-modal__note canvas-modal__note--info\">\r\n          Enable the fallback code so unseen categories and nulls do not break downstream transforms.\r\n        </p>\r\n      )}\r\n      {metadata.generatedAt && (\r\n        <p className=\"canvas-modal__note\">\r\n          Insights generated {new Date(metadata.generatedAt).toLocaleString()} on{' '}\r\n          {metadata.sampleSize === null\r\n            ? 'sampled rows'\r\n            : `${metadata.sampleSize.toLocaleString()} row${metadata.sampleSize === 1 ? '' : 's'}`}.\r\n        </p>\r\n      )}\r\n      {!metadata.generatedAt && metadata.sampleSize !== null && (\r\n        <p className=\"canvas-modal__note\">\r\n          Evaluated {metadata.sampleSize.toLocaleString()} row{metadata.sampleSize === 1 ? '' : 's'} for categorical trends.\r\n        </p>\r\n      )}\r\n      {metadata.totalTextColumns > 0 && (\r\n        <p className=\"canvas-modal__note\">\r\n          Found {metadata.totalTextColumns} text column{metadata.totalTextColumns === 1 ? '' : 's'}; recommendations cover{' '}\r\n          {metadata.recommendedCount} candidate{metadata.recommendedCount === 1 ? '' : 's'}.\r\n        </p>\r\n      )}\r\n      {metadata.notes.length > 0 && (\r\n        <ul className=\"canvas-modal__note-list\">\r\n          {metadata.notes.map((note, index) => (\r\n            <li key={`ordinal-encoding-note-${index}`}>{note}</li>\r\n          ))}\r\n        </ul>\r\n      )}\r\n      {metadata.highCardinalityColumns.length > 0 && (\r\n        <p className=\"canvas-modal__note\">\r\n          Skipped {metadata.highCardinalityColumns.length} high-cardinality column\r\n          {metadata.highCardinalityColumns.length === 1 ? '' : 's'}:\r\n          {' '}\r\n          {metadata.highCardinalityColumns.slice(0, 4).join(', ')}\r\n          {metadata.highCardinalityColumns.length > 4 ? ', ' : ''}.\r\n        </p>\r\n      )}\r\n      {isFetching && <p className=\"canvas-modal__note\">Loading ordinal encoding insights</p>}\r\n      {showErrorMessage && (\r\n        <p className=\"canvas-modal__note canvas-modal__note--error\">{error ?? ''}</p>\r\n      )}\r\n      {!isFetching && !error && !hasSuggestions && sourceId && hasReachableSource && (\r\n        <p className=\"canvas-modal__note\">No categorical text candidates detected in the current preview.</p>\r\n      )}\r\n      {!isFetching && !error && hasSuggestions && (\r\n        <div className=\"canvas-cast__table-wrapper\">\r\n          <table className=\"canvas-cast__table\">\r\n            <thead>\r\n              <tr>\r\n                <th scope=\"col\">Column</th>\r\n                <th scope=\"col\">Distinct</th>\r\n                <th scope=\"col\">Missing</th>\r\n                <th scope=\"col\">Unknowns</th>\r\n                <th scope=\"col\">Status</th>\r\n                <th scope=\"col\">Select</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {suggestions.map((suggestion) => {\r\n                const isSelected = selectedColumns.includes(suggestion.column);\r\n                const statusLabel = STATUS_LABELS[suggestion.status];\r\n                const statusClass = STATUS_BADGE_CLASS[suggestion.status] ?? 'canvas-cast__chip--muted';\r\n                const sampleValues = suggestion.sample_values.length\r\n                  ? suggestion.sample_values.join(', ')\r\n                  : '';\r\n                const uniqueDisplay = suggestion.unique_count !== undefined && suggestion.unique_count !== null\r\n                  ? `${formatMetric(suggestion.unique_count)} (${formatMetric(suggestion.unique_percentage)}%)`\r\n                  : '';\r\n                const missingDisplay = formatMissingPercentage(suggestion.missing_percentage);\r\n                const unknownDisplay = suggestion.recommended_handle_unknown ? 'Enable fallback' : '';\r\n\r\n                return (\r\n                  <tr key={`ordinal-encoding-row-${suggestion.column}`} className=\"canvas-cast__row\">\r\n                    <th scope=\"row\">\r\n                      <div className=\"canvas-cast__column-cell\">\r\n                        <span className=\"canvas-cast__column-name\">{suggestion.column}</span>\r\n                        <div className=\"canvas-cast__column-meta\">\r\n                          {suggestion.dtype && <span className=\"canvas-cast__muted\">dtype: {suggestion.dtype}</span>}\r\n                          {suggestion.text_category && (\r\n                            <span className=\"canvas-cast__badge canvas-cast__badge--category\">\r\n                              {suggestion.text_category}\r\n                            </span>\r\n                          )}\r\n                        </div>\r\n                        <div className=\"canvas-cast__column-meta\">\r\n                          <span className=\"canvas-cast__muted\">Examples: {sampleValues}</span>\r\n                        </div>\r\n                        <p className=\"canvas-cast__recommendation-note\">{suggestion.reason}</p>\r\n                      </div>\r\n                    </th>\r\n                    <td>{uniqueDisplay}</td>\r\n                    <td>{missingDisplay}</td>\r\n                    <td>{unknownDisplay}</td>\r\n                    <td>\r\n                      <span className={`canvas-cast__chip ${statusClass}`}>{statusLabel}</span>\r\n                    </td>\r\n                    <td>\r\n                      <label className=\"canvas-modal__checkbox-item\">\r\n                        <input\r\n                          type=\"checkbox\"\r\n                          checked={isSelected}\r\n                          onChange={() => onToggleColumn(suggestion.column)}\r\n                          disabled={!suggestion.selectable}\r\n                        />\r\n                        <span className=\"canvas-modal__checkbox-label\">\r\n                          {suggestion.selectable ? (isSelected ? 'In node' : 'Add column') : 'Not eligible'}\r\n                        </span>\r\n                      </label>\r\n                    </td>\r\n                  </tr>\r\n                );\r\n              })}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      )}\r\n      <div className=\"canvas-modal__parameter-grid\">\r\n        {autoDetectParameter && renderParameterField(autoDetectParameter)}\r\n        {maxCategoriesParameter && renderParameterField(maxCategoriesParameter)}\r\n        {outputSuffixParameter && renderParameterField(outputSuffixParameter)}\r\n        {dropOriginalParameter && renderParameterField(dropOriginalParameter)}\r\n        {encodeMissingParameter && renderParameterField(encodeMissingParameter)}\r\n        {handleUnknownParameter && renderParameterField(handleUnknownParameter)}\r\n        {unknownValueParameter && renderParameterField(unknownValueParameter)}\r\n      </div>\r\n      {columnsParameter && (\r\n        <div>\r\n          <h4 className=\"canvas-modal__subheading\">Manual column selection</h4>\r\n          {renderParameterField(columnsParameter)}\r\n        </div>\r\n      )}\r\n    </section>\r\n  );\r\n};\r\n","import React, { useMemo } from 'react';\r\nimport type {\r\n  DummyEncodingColumnSuggestion,\r\n  DummyEncodingSuggestionStatus,\r\n  FeatureNodeParameter,\r\n} from '../../../../api';\r\n\r\ntype DummyEncodingSectionProps = {\r\n  sourceId?: string | null;\r\n  hasReachableSource: boolean;\r\n  isFetching: boolean;\r\n  error: string | null;\r\n  suggestions: DummyEncodingColumnSuggestion[];\r\n  metadata: {\r\n    sampleSize: number | null;\r\n    generatedAt: string | null;\r\n    totalTextColumns: number;\r\n    recommendedCount: number;\r\n    cautionedCount: number;\r\n    highCardinalityColumns: string[];\r\n    notes: string[];\r\n    autoDetectDefault: boolean;\r\n  };\r\n  columnsParameter: FeatureNodeParameter | null;\r\n  autoDetectParameter: FeatureNodeParameter | null;\r\n  maxCategoriesParameter: FeatureNodeParameter | null;\r\n  dropFirstParameter: FeatureNodeParameter | null;\r\n  includeMissingParameter: FeatureNodeParameter | null;\r\n  dropOriginalParameter: FeatureNodeParameter | null;\r\n  prefixSeparatorParameter: FeatureNodeParameter | null;\r\n  selectedColumns: string[];\r\n  renderParameterField: (parameter: FeatureNodeParameter) => React.ReactNode;\r\n  onToggleColumn: (column: string) => void;\r\n  onApplyRecommended: (columns: string[]) => void;\r\n  formatMissingPercentage: (value?: number | null) => string;\r\n};\r\n\r\nconst STATUS_LABELS: Record<DummyEncodingSuggestionStatus, string> = {\r\n  recommended: 'Recommended',\r\n  high_cardinality: 'High cardinality',\r\n  identifier: 'Identifier-like',\r\n  free_text: 'Free text',\r\n  single_category: 'Single category',\r\n  too_many_categories: 'Too many categories',\r\n};\r\n\r\nconst STATUS_BADGE_CLASS: Record<DummyEncodingSuggestionStatus, string> = {\r\n  recommended: 'canvas-cast__chip--applied',\r\n  high_cardinality: 'canvas-cast__chip--attention',\r\n  identifier: 'canvas-cast__chip--muted',\r\n  free_text: 'canvas-cast__chip--muted',\r\n  single_category: 'canvas-cast__chip--muted',\r\n  too_many_categories: 'canvas-cast__chip--muted',\r\n};\r\n\r\nconst formatMetric = (value: number | null | undefined): string => {\r\n  if (value === null || value === undefined || Number.isNaN(value)) {\r\n    return '';\r\n  }\r\n  return value.toLocaleString(undefined, { maximumFractionDigits: 2 });\r\n};\r\n\r\nexport const DummyEncodingSection: React.FC<DummyEncodingSectionProps> = ({\r\n  sourceId,\r\n  hasReachableSource,\r\n  isFetching,\r\n  error,\r\n  suggestions,\r\n  metadata,\r\n  columnsParameter,\r\n  autoDetectParameter,\r\n  maxCategoriesParameter,\r\n  dropFirstParameter,\r\n  includeMissingParameter,\r\n  dropOriginalParameter,\r\n  prefixSeparatorParameter,\r\n  selectedColumns,\r\n  renderParameterField,\r\n  onToggleColumn,\r\n  onApplyRecommended,\r\n  formatMissingPercentage,\r\n}) => {\r\n  const recommendedColumns = useMemo(() => {\r\n    if (!suggestions.length) {\r\n      return [] as string[];\r\n    }\r\n    const aggregate = new Set<string>();\r\n    suggestions.forEach((entry) => {\r\n      if (entry.status === 'recommended' && entry.selectable) {\r\n        aggregate.add(entry.column);\r\n      }\r\n    });\r\n    return Array.from(aggregate);\r\n  }, [suggestions]);\r\n\r\n  const connectionNote = useMemo(() => {\r\n    if (!sourceId) {\r\n      return 'Choose a dataset to surface dummy encoding suggestions.';\r\n    }\r\n    if (!hasReachableSource) {\r\n      return 'Connect this node to the dataset input to analyse categorical features.';\r\n    }\r\n    return null;\r\n  }, [hasReachableSource, sourceId]);\r\n\r\n  const hasSuggestions = suggestions.length > 0;\r\n  const showErrorMessage = !isFetching && Boolean(error) && Boolean(sourceId) && hasReachableSource;\r\n\r\n  return (\r\n    <section className=\"canvas-modal__section\">\r\n      <div className=\"canvas-modal__section-header\">\r\n        <h3>Dummy encoding suggestions</h3>\r\n        <div className=\"canvas-modal__section-actions\">\r\n          <button\r\n            type=\"button\"\r\n            className=\"btn btn-primary\"\r\n            onClick={() => onApplyRecommended(recommendedColumns)}\r\n            disabled={!recommendedColumns.length}\r\n          >\r\n            Add recommended\r\n          </button>\r\n        </div>\r\n      </div>\r\n      <p className=\"canvas-modal__note\">\r\n        Create dummy variables while automatically dropping a reference category. This mirrors one-hot encoding but keeps\r\n        feature matrices full rank.\r\n      </p>\r\n      {connectionNote && <p className=\"canvas-modal__note canvas-modal__note--warning\">{connectionNote}</p>}\r\n      {metadata.autoDetectDefault && autoDetectParameter && (\r\n        <p className=\"canvas-modal__note canvas-modal__note--info\">\r\n          Auto-detection is recommended here so new categorical columns are captured by default.\r\n        </p>\r\n      )}\r\n      {metadata.generatedAt && (\r\n        <p className=\"canvas-modal__note\">\r\n          Insights generated {new Date(metadata.generatedAt).toLocaleString()} on{' '}\r\n          {metadata.sampleSize === null\r\n            ? 'sampled rows'\r\n            : `${metadata.sampleSize.toLocaleString()} row${metadata.sampleSize === 1 ? '' : 's'}`}.\r\n        </p>\r\n      )}\r\n      {!metadata.generatedAt && metadata.sampleSize !== null && (\r\n        <p className=\"canvas-modal__note\">\r\n          Evaluated {metadata.sampleSize.toLocaleString()} row{metadata.sampleSize === 1 ? '' : 's'} for categorical trends.\r\n        </p>\r\n      )}\r\n      {metadata.totalTextColumns > 0 && (\r\n        <p className=\"canvas-modal__note\">\r\n          Found {metadata.totalTextColumns} text column{metadata.totalTextColumns === 1 ? '' : 's'}; recommendations cover{' '}\r\n          {metadata.recommendedCount} candidate{metadata.recommendedCount === 1 ? '' : 's'}.\r\n        </p>\r\n      )}\r\n      {metadata.cautionedCount > 0 && (\r\n        <p className=\"canvas-modal__note canvas-modal__note--warning\">\r\n          {metadata.cautionedCount} column{metadata.cautionedCount === 1 ? '' : 's'} could expand heavily  consider alternate encodings.\r\n        </p>\r\n      )}\r\n      {metadata.notes.length > 0 && (\r\n        <ul className=\"canvas-modal__note-list\">\r\n          {metadata.notes.map((note, index) => (\r\n            <li key={`dummy-note-${index}`}>{note}</li>\r\n          ))}\r\n        </ul>\r\n      )}\r\n      {metadata.highCardinalityColumns.length > 0 && (\r\n        <p className=\"canvas-modal__note\">\r\n          Skipped {metadata.highCardinalityColumns.length} high-cardinality column\r\n          {metadata.highCardinalityColumns.length === 1 ? '' : 's'}:\r\n          {' '}\r\n          {metadata.highCardinalityColumns.slice(0, 4).join(', ')}\r\n          {metadata.highCardinalityColumns.length > 4 ? ', ' : ''}.\r\n        </p>\r\n      )}\r\n      {isFetching && <p className=\"canvas-modal__note\">Loading dummy encoding insights</p>}\r\n      {showErrorMessage && (\r\n        <p className=\"canvas-modal__note canvas-modal__note--error\">{error ?? ''}</p>\r\n      )}\r\n      {!isFetching && !error && !hasSuggestions && sourceId && hasReachableSource && (\r\n        <p className=\"canvas-modal__note\">No categorical text candidates detected in the current preview.</p>\r\n      )}\r\n      {!isFetching && !error && hasSuggestions && (\r\n        <div className=\"canvas-cast__table-wrapper\">\r\n          <table className=\"canvas-cast__table\">\r\n            <thead>\r\n              <tr>\r\n                <th scope=\"col\">Column</th>\r\n                <th scope=\"col\">Distinct</th>\r\n                <th scope=\"col\">Missing</th>\r\n                <th scope=\"col\">Dummy cols</th>\r\n                <th scope=\"col\">Status</th>\r\n                <th scope=\"col\">Select</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {suggestions.map((suggestion) => {\r\n                const isSelected = selectedColumns.includes(suggestion.column);\r\n                const statusLabel = STATUS_LABELS[suggestion.status];\r\n                const statusClass = STATUS_BADGE_CLASS[suggestion.status] ?? 'canvas-cast__chip--muted';\r\n                const sampleValues = suggestion.sample_values.length\r\n                  ? suggestion.sample_values.join(', ')\r\n                  : '';\r\n                const uniqueDisplay = suggestion.unique_count !== undefined && suggestion.unique_count !== null\r\n                  ? `${formatMetric(suggestion.unique_count)} (${formatMetric(suggestion.unique_percentage)}%)`\r\n                  : '';\r\n                const missingDisplay = formatMissingPercentage(suggestion.missing_percentage);\r\n                const dummyDisplay = suggestion.estimated_dummy_columns\r\n                  ? suggestion.estimated_dummy_columns.toLocaleString()\r\n                  : '';\r\n\r\n                return (\r\n                  <tr key={`dummy-encoding-row-${suggestion.column}`} className=\"canvas-cast__row\">\r\n                    <th scope=\"row\">\r\n                      <div className=\"canvas-cast__column-cell\">\r\n                        <span className=\"canvas-cast__column-name\">{suggestion.column}</span>\r\n                        <div className=\"canvas-cast__column-meta\">\r\n                          {suggestion.dtype && <span className=\"canvas-cast__muted\">dtype: {suggestion.dtype}</span>}\r\n                          {suggestion.text_category && (\r\n                            <span className=\"canvas-cast__badge canvas-cast__badge--category\">\r\n                              {suggestion.text_category}\r\n                            </span>\r\n                          )}\r\n                          {suggestion.recommended_drop_first && (\r\n                            <span className=\"canvas-cast__badge canvas-cast__badge--info\">Drop first suggested</span>\r\n                          )}\r\n                        </div>\r\n                        <div className=\"canvas-cast__column-meta\">\r\n                          <span className=\"canvas-cast__muted\">Examples: {sampleValues}</span>\r\n                        </div>\r\n                        <p className=\"canvas-cast__recommendation-note\">{suggestion.reason}</p>\r\n                      </div>\r\n                    </th>\r\n                    <td>{uniqueDisplay}</td>\r\n                    <td>{missingDisplay}</td>\r\n                    <td>{dummyDisplay}</td>\r\n                    <td>\r\n                      <span className={`canvas-cast__chip ${statusClass}`}>{statusLabel}</span>\r\n                    </td>\r\n                    <td>\r\n                      <label className=\"canvas-modal__checkbox-item\">\r\n                        <input\r\n                          type=\"checkbox\"\r\n                          checked={isSelected}\r\n                          onChange={() => onToggleColumn(suggestion.column)}\r\n                          disabled={!suggestion.selectable}\r\n                        />\r\n                        <span className=\"canvas-modal__checkbox-label\">\r\n                          {suggestion.selectable ? (isSelected ? 'In node' : 'Add column') : 'Not eligible'}\r\n                        </span>\r\n                      </label>\r\n                    </td>\r\n                  </tr>\r\n                );\r\n              })}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      )}\r\n      <div className=\"canvas-modal__parameter-grid\">\r\n        {autoDetectParameter && renderParameterField(autoDetectParameter)}\r\n        {maxCategoriesParameter && renderParameterField(maxCategoriesParameter)}\r\n        {dropFirstParameter && renderParameterField(dropFirstParameter)}\r\n        {includeMissingParameter && renderParameterField(includeMissingParameter)}\r\n        {dropOriginalParameter && renderParameterField(dropOriginalParameter)}\r\n        {prefixSeparatorParameter && renderParameterField(prefixSeparatorParameter)}\r\n      </div>\r\n      {columnsParameter && (\r\n        <div>\r\n          <h4 className=\"canvas-modal__subheading\">Manual column selection</h4>\r\n          {renderParameterField(columnsParameter)}\r\n        </div>\r\n      )}\r\n    </section>\r\n  );\r\n};\r\n","import React, { useMemo } from 'react';\r\nimport type {\r\n  FeatureNodeParameter,\r\n  OneHotEncodingColumnSuggestion,\r\n  OneHotEncodingSuggestionStatus,\r\n} from '../../../../api';\r\n\r\ntype OneHotEncodingSectionProps = {\r\n  sourceId?: string | null;\r\n  hasReachableSource: boolean;\r\n  isFetching: boolean;\r\n  error: string | null;\r\n  suggestions: OneHotEncodingColumnSuggestion[];\r\n  metadata: {\r\n    sampleSize: number | null;\r\n    generatedAt: string | null;\r\n    totalTextColumns: number;\r\n    recommendedCount: number;\r\n    cautionedCount: number;\r\n    highCardinalityColumns: string[];\r\n    notes: string[];\r\n  };\r\n  columnsParameter: FeatureNodeParameter | null;\r\n  autoDetectParameter: FeatureNodeParameter | null;\r\n  maxCategoriesParameter: FeatureNodeParameter | null;\r\n  dropFirstParameter: FeatureNodeParameter | null;\r\n  includeMissingParameter: FeatureNodeParameter | null;\r\n  dropOriginalParameter: FeatureNodeParameter | null;\r\n  prefixSeparatorParameter: FeatureNodeParameter | null;\r\n  selectedColumns: string[];\r\n  renderParameterField: (parameter: FeatureNodeParameter) => React.ReactNode;\r\n  onToggleColumn: (column: string) => void;\r\n  onApplyRecommended: (columns: string[]) => void;\r\n  formatMissingPercentage: (value?: number | null) => string;\r\n};\r\n\r\nconst STATUS_LABELS: Record<OneHotEncodingSuggestionStatus, string> = {\r\n  recommended: 'Recommended',\r\n  high_cardinality: 'High cardinality',\r\n  identifier: 'Identifier-like',\r\n  free_text: 'Free text',\r\n  single_category: 'Single category',\r\n  too_many_categories: 'Too many categories',\r\n};\r\n\r\nconst STATUS_BADGE_CLASS: Record<OneHotEncodingSuggestionStatus, string> = {\r\n  recommended: 'canvas-cast__chip--applied',\r\n  high_cardinality: 'canvas-cast__chip--attention',\r\n  identifier: 'canvas-cast__chip--muted',\r\n  free_text: 'canvas-cast__chip--muted',\r\n  single_category: 'canvas-cast__chip--muted',\r\n  too_many_categories: 'canvas-cast__chip--muted',\r\n};\r\n\r\nconst formatMetric = (value: number | null | undefined): string => {\r\n  if (value === null || value === undefined || Number.isNaN(value)) {\r\n    return '';\r\n  }\r\n  return value.toLocaleString(undefined, { maximumFractionDigits: 2 });\r\n};\r\n\r\nexport const OneHotEncodingSection: React.FC<OneHotEncodingSectionProps> = ({\r\n  sourceId,\r\n  hasReachableSource,\r\n  isFetching,\r\n  error,\r\n  suggestions,\r\n  metadata,\r\n  columnsParameter,\r\n  autoDetectParameter,\r\n  maxCategoriesParameter,\r\n  dropFirstParameter,\r\n  includeMissingParameter,\r\n  dropOriginalParameter,\r\n  prefixSeparatorParameter,\r\n  selectedColumns,\r\n  renderParameterField,\r\n  onToggleColumn,\r\n  onApplyRecommended,\r\n  formatMissingPercentage,\r\n}) => {\r\n  const recommendedColumns = useMemo(() => {\r\n    if (!suggestions.length) {\r\n      return [] as string[];\r\n    }\r\n    const aggregate = new Set<string>();\r\n    suggestions.forEach((entry) => {\r\n      if (entry.status === 'recommended' && entry.selectable) {\r\n        aggregate.add(entry.column);\r\n      }\r\n    });\r\n    return Array.from(aggregate);\r\n  }, [suggestions]);\r\n\r\n  const connectionNote = useMemo(() => {\r\n    if (!sourceId) {\r\n      return 'Choose a dataset to surface one-hot encoding suggestions.';\r\n    }\r\n    if (!hasReachableSource) {\r\n      return 'Connect this node to the dataset input to analyse categorical features.';\r\n    }\r\n    return null;\r\n  }, [hasReachableSource, sourceId]);\r\n\r\n  const hasSuggestions = suggestions.length > 0;\r\n  const showErrorMessage = !isFetching && Boolean(error) && Boolean(sourceId) && hasReachableSource;\r\n\r\n  return (\r\n    <section className=\"canvas-modal__section\">\r\n      <div className=\"canvas-modal__section-header\">\r\n        <h3>One-hot encoding suggestions</h3>\r\n        <div className=\"canvas-modal__section-actions\">\r\n          <button\r\n            type=\"button\"\r\n            className=\"btn btn-primary\"\r\n            onClick={() => onApplyRecommended(recommendedColumns)}\r\n            disabled={!recommendedColumns.length}\r\n          >\r\n            Add recommended\r\n          </button>\r\n        </div>\r\n      </div>\r\n      <p className=\"canvas-modal__note\">\r\n        Expand categorical text into binary indicator columns. Suggestions factor in estimated dummy counts so\r\n        encodings stay tractable.\r\n      </p>\r\n      {connectionNote && <p className=\"canvas-modal__note canvas-modal__note--warning\">{connectionNote}</p>}\r\n      {metadata.generatedAt && (\r\n        <p className=\"canvas-modal__note\">\r\n          Insights generated {new Date(metadata.generatedAt).toLocaleString()} on{' '}\r\n          {metadata.sampleSize === null\r\n            ? 'sampled rows'\r\n            : `${metadata.sampleSize.toLocaleString()} row${metadata.sampleSize === 1 ? '' : 's'}`}.\r\n        </p>\r\n      )}\r\n      {!metadata.generatedAt && metadata.sampleSize !== null && (\r\n        <p className=\"canvas-modal__note\">\r\n          Evaluated {metadata.sampleSize.toLocaleString()} row{metadata.sampleSize === 1 ? '' : 's'} for categorical trends.\r\n        </p>\r\n      )}\r\n      {metadata.totalTextColumns > 0 && (\r\n        <p className=\"canvas-modal__note\">\r\n          Found {metadata.totalTextColumns} text column{metadata.totalTextColumns === 1 ? '' : 's'}; recommendations cover{' '}\r\n          {metadata.recommendedCount} candidate{metadata.recommendedCount === 1 ? '' : 's'}.\r\n        </p>\r\n      )}\r\n      {metadata.cautionedCount > 0 && (\r\n        <p className=\"canvas-modal__note canvas-modal__note--warning\">\r\n          {metadata.cautionedCount} column{metadata.cautionedCount === 1 ? '' : 's'} could explode in width  consider alternate encodings.\r\n        </p>\r\n      )}\r\n      {metadata.notes.length > 0 && (\r\n        <ul className=\"canvas-modal__note-list\">\r\n          {metadata.notes.map((note, index) => (\r\n            <li key={`one-hot-note-${index}`}>{note}</li>\r\n          ))}\r\n        </ul>\r\n      )}\r\n      {metadata.highCardinalityColumns.length > 0 && (\r\n        <p className=\"canvas-modal__note\">\r\n          Skipped {metadata.highCardinalityColumns.length} high-cardinality column\r\n          {metadata.highCardinalityColumns.length === 1 ? '' : 's'}:\r\n          {' '}\r\n          {metadata.highCardinalityColumns.slice(0, 4).join(', ')}\r\n          {metadata.highCardinalityColumns.length > 4 ? ', ' : ''}.\r\n        </p>\r\n      )}\r\n      {isFetching && <p className=\"canvas-modal__note\">Loading one-hot encoding insights</p>}\r\n      {showErrorMessage && (\r\n        <p className=\"canvas-modal__note canvas-modal__note--error\">{error ?? ''}</p>\r\n      )}\r\n      {!isFetching && !error && !hasSuggestions && sourceId && hasReachableSource && (\r\n        <p className=\"canvas-modal__note\">No categorical text candidates detected in the current preview.</p>\r\n      )}\r\n      {!isFetching && !error && hasSuggestions && (\r\n        <div className=\"canvas-cast__table-wrapper\">\r\n          <table className=\"canvas-cast__table\">\r\n            <thead>\r\n              <tr>\r\n                <th scope=\"col\">Column</th>\r\n                <th scope=\"col\">Distinct</th>\r\n                <th scope=\"col\">Missing</th>\r\n                <th scope=\"col\">Dummy cols</th>\r\n                <th scope=\"col\">Status</th>\r\n                <th scope=\"col\">Select</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {suggestions.map((suggestion) => {\r\n                const isSelected = selectedColumns.includes(suggestion.column);\r\n                const statusLabel = STATUS_LABELS[suggestion.status];\r\n                const statusClass = STATUS_BADGE_CLASS[suggestion.status] ?? 'canvas-cast__chip--muted';\r\n                const sampleValues = suggestion.sample_values.length\r\n                  ? suggestion.sample_values.join(', ')\r\n                  : '';\r\n                const uniqueDisplay = suggestion.unique_count !== undefined && suggestion.unique_count !== null\r\n                  ? `${formatMetric(suggestion.unique_count)} (${formatMetric(suggestion.unique_percentage)}%)`\r\n                  : '';\r\n                const missingDisplay = formatMissingPercentage(suggestion.missing_percentage);\r\n                const dummyDisplay = suggestion.estimated_dummy_columns\r\n                  ? suggestion.estimated_dummy_columns.toLocaleString()\r\n                  : '';\r\n\r\n                return (\r\n                  <tr key={`one-hot-row-${suggestion.column}`} className=\"canvas-cast__row\">\r\n                    <th scope=\"row\">\r\n                      <div className=\"canvas-cast__column-cell\">\r\n                        <span className=\"canvas-cast__column-name\">{suggestion.column}</span>\r\n                        <div className=\"canvas-cast__column-meta\">\r\n                          {suggestion.dtype && <span className=\"canvas-cast__muted\">dtype: {suggestion.dtype}</span>}\r\n                          {suggestion.text_category && (\r\n                            <span className=\"canvas-cast__badge canvas-cast__badge--category\">\r\n                              {suggestion.text_category}\r\n                            </span>\r\n                          )}\r\n                          {suggestion.recommended_drop_first && (\r\n                            <span className=\"canvas-cast__badge canvas-cast__badge--info\">Drop first suggested</span>\r\n                          )}\r\n                        </div>\r\n                        <div className=\"canvas-cast__column-meta\">\r\n                          <span className=\"canvas-cast__muted\">Examples: {sampleValues}</span>\r\n                        </div>\r\n                        <p className=\"canvas-cast__recommendation-note\">{suggestion.reason}</p>\r\n                      </div>\r\n                    </th>\r\n                    <td>{uniqueDisplay}</td>\r\n                    <td>{missingDisplay}</td>\r\n                    <td>{dummyDisplay}</td>\r\n                    <td>\r\n                      <span className={`canvas-cast__chip ${statusClass}`}>{statusLabel}</span>\r\n                    </td>\r\n                    <td>\r\n                      <label className=\"canvas-modal__checkbox-item\">\r\n                        <input\r\n                          type=\"checkbox\"\r\n                          checked={isSelected}\r\n                          onChange={() => onToggleColumn(suggestion.column)}\r\n                          disabled={!suggestion.selectable}\r\n                        />\r\n                        <span className=\"canvas-modal__checkbox-label\">\r\n                          {suggestion.selectable ? (isSelected ? 'In node' : 'Add column') : 'Not eligible'}\r\n                        </span>\r\n                      </label>\r\n                    </td>\r\n                  </tr>\r\n                );\r\n              })}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      )}\r\n      <div className=\"canvas-modal__parameter-grid\">\r\n        {autoDetectParameter && renderParameterField(autoDetectParameter)}\r\n        {maxCategoriesParameter && renderParameterField(maxCategoriesParameter)}\r\n        {dropFirstParameter && renderParameterField(dropFirstParameter)}\r\n        {includeMissingParameter && renderParameterField(includeMissingParameter)}\r\n        {dropOriginalParameter && renderParameterField(dropOriginalParameter)}\r\n        {prefixSeparatorParameter && renderParameterField(prefixSeparatorParameter)}\r\n      </div>\r\n      {columnsParameter && (\r\n        <div>\r\n          <h4 className=\"canvas-modal__subheading\">Manual column selection</h4>\r\n          {renderParameterField(columnsParameter)}\r\n        </div>\r\n      )}\r\n    </section>\r\n  );\r\n};\r\n","import React, { useMemo } from 'react';\r\nimport type { TransformerAuditNodeSignal, TransformerAuditEntrySignal, TransformerSplitActivitySignal } from '../../../../api';\r\n\r\ntype TransformerAuditSectionProps = {\r\n  signal: TransformerAuditNodeSignal | null;\r\n  previewStatus: 'idle' | 'loading' | 'success' | 'error';\r\n  hasSource: boolean;\r\n  hasReachableSource: boolean;\r\n  onRefreshPreview: () => void;\r\n};\r\n\r\nconst ACTION_LABELS: Record<TransformerSplitActivitySignal['action'], string> = {\r\n  fit_transform: 'Fit + transform',\r\n  transform: 'Transform',\r\n  not_applied: 'Not applied',\r\n  not_available: '',\r\n};\r\n\r\nconst formatTimestamp = (value?: string | null): string => {\r\n  if (!value) {\r\n    return '';\r\n  }\r\n  const parsed = new Date(value);\r\n  if (Number.isNaN(parsed.getTime())) {\r\n    return value;\r\n  }\r\n  return parsed.toLocaleString();\r\n};\r\n\r\nconst formatRowCount = (value?: number | null): string | null => {\r\n  if (value === null || value === undefined || Number.isNaN(value) || value <= 0) {\r\n    return null;\r\n  }\r\n  const rounded = Math.round(value);\r\n  return `${rounded.toLocaleString()} row${rounded === 1 ? '' : 's'}`;\r\n};\r\n\r\nconst getSplitActivity = (\r\n  entry: TransformerAuditEntrySignal,\r\n  split: 'train' | 'test' | 'validation',\r\n): TransformerSplitActivitySignal | null => {\r\n  if (!Array.isArray(entry.split_activity)) {\r\n    return null;\r\n  }\r\n  const match = entry.split_activity.find(\r\n    (activity: TransformerSplitActivitySignal) => activity && activity.split === split,\r\n  );\r\n  return match ?? null;\r\n};\r\n\r\nconst renderSplitCell = (entry: TransformerAuditEntrySignal, split: 'train' | 'test' | 'validation') => {\r\n  const activity = getSplitActivity(entry, split);\r\n  if (!activity || activity.action === 'not_available') {\r\n    return <span></span>;\r\n  }\r\n  const label = ACTION_LABELS[activity.action] ?? activity.action;\r\n  const rowSummary = formatRowCount(activity.rows ?? null);\r\n\r\n  return (\r\n    <div className=\"canvas-cast__column-cell\">\r\n      <span>{label}</span>\r\n      {rowSummary && <span className=\"canvas-cast__muted\">{rowSummary}</span>}\r\n    </div>\r\n  );\r\n};\r\n\r\nconst extraSplitNote = (entry: TransformerAuditEntrySignal): string | null => {\r\n  if (!Array.isArray(entry.split_activity)) {\r\n    return null;\r\n  }\r\n  const extras = entry.split_activity.filter(\r\n    (activity: TransformerSplitActivitySignal) =>\r\n      activity && !['train', 'test', 'validation'].includes(activity.split),\r\n  );\r\n  if (!extras.length) {\r\n    return null;\r\n  }\r\n  const formatted = extras\r\n    .map((activity: TransformerSplitActivitySignal) => {\r\n      const label = activity.label || activity.split;\r\n      const action = ACTION_LABELS[activity.action] ?? activity.action;\r\n      const count = formatRowCount(activity.rows ?? null);\r\n      return count ? `${label}: ${action} (${count})` : `${label}: ${action}`;\r\n    })\r\n    .join('; ');\r\n  return formatted || null;\r\n};\r\n\r\nconst getMethodLabel = (entry: TransformerAuditEntrySignal): string | null => {\r\n  if (!entry.metadata || typeof entry.metadata !== 'object') {\r\n    return null;\r\n  }\r\n  // For scalers: method_label or method\r\n  if (entry.metadata.method_label) {\r\n    return String(entry.metadata.method_label);\r\n  }\r\n  if (entry.metadata.method) {\r\n    return String(entry.metadata.method);\r\n  }\r\n  return null;\r\n};\r\n\r\nexport const TransformerAuditSection: React.FC<TransformerAuditSectionProps> = ({\r\n  signal,\r\n  previewStatus,\r\n  hasSource,\r\n  hasReachableSource,\r\n  onRefreshPreview,\r\n}) => {\r\n  const entries = useMemo<TransformerAuditEntrySignal[]>(() => signal?.transformers ?? [], [signal?.transformers]);\r\n  const totalTransformers = signal?.total_transformers ?? entries.length;\r\n  const notes: string[] = Array.isArray(signal?.notes) ? (signal?.notes as string[]) : [];\r\n  const isLoading = previewStatus === 'loading';\r\n  const summaryText = totalTransformers\r\n    ? `Tracking ${totalTransformers.toLocaleString()} transformer${totalTransformers === 1 ? '' : 's'}.`\r\n    : null;\r\n  const disableRefresh = isLoading || !hasSource || !hasReachableSource;\r\n\r\n  return (\r\n    <section className=\"canvas-modal__section\">\r\n      <div className=\"canvas-modal__section-header\">\r\n        <h3>Transformer activity</h3>\r\n        <div className=\"canvas-modal__section-actions\">\r\n          <button\r\n            type=\"button\"\r\n            className=\"btn btn-outline-secondary\"\r\n            onClick={onRefreshPreview}\r\n            disabled={disableRefresh}\r\n          >\r\n            {isLoading ? 'Refreshing' : 'Refresh preview'}\r\n          </button>\r\n        </div>\r\n      </div>\r\n      <p className=\"canvas-modal__note\">\r\n        Review whether split-aware transformers (e.g. one-hot encoders) fit on training data and propagated to\r\n        test/validation splits.\r\n      </p>\r\n      {summaryText && <p className=\"canvas-modal__note\">{summaryText}</p>}\r\n      {!hasSource && (\r\n        <p className=\"canvas-modal__note canvas-modal__note--warning\">\r\n          Select a dataset to surface transformer activity.\r\n        </p>\r\n      )}\r\n      {hasSource && !hasReachableSource && (\r\n        <p className=\"canvas-modal__note canvas-modal__note--warning\">\r\n          Connect this node to an upstream branch to inspect transformer history.\r\n        </p>\r\n      )}\r\n      {notes.length > 0 && (\r\n        <ul className=\"canvas-modal__note-list\">\r\n          {notes.map((note: string, index: number) => (\r\n            <li key={`transformer-audit-note-${index}`}>{note}</li>\r\n          ))}\r\n        </ul>\r\n      )}\r\n      {isLoading && <p className=\"canvas-modal__note\">Loading transformer activity</p>}\r\n      {!isLoading && previewStatus === 'error' && hasSource && hasReachableSource && (\r\n        <p className=\"canvas-modal__note canvas-modal__note--error\">\r\n          Unable to load transformer activity. Try refreshing the preview.\r\n        </p>\r\n      )}\r\n      {!isLoading && hasSource && hasReachableSource && !entries.length && (\r\n        <p className=\"canvas-modal__note\">\r\n          No transformer activity recorded yet. Run a preview after executing split-aware transformation nodes.\r\n        </p>\r\n      )}\r\n      {!isLoading && entries.length > 0 && (\r\n        <div className=\"canvas-cast__table-wrapper\">\r\n          <table className=\"canvas-cast__table\">\r\n            <thead>\r\n              <tr>\r\n                <th scope=\"col\">Node</th>\r\n                <th scope=\"col\">Transformer</th>\r\n                <th scope=\"col\">Column</th>\r\n                <th scope=\"col\">Method</th>\r\n                <th scope=\"col\">Train</th>\r\n                <th scope=\"col\">Test</th>\r\n                <th scope=\"col\">Validation</th>\r\n                <th scope=\"col\">Updated</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {entries.map((entry, index) => {\r\n                const rowKey = entry.storage_key ?? `${entry.transformer_name}-${entry.column_name ?? 'all'}-${index}`;\r\n                const extraNote = extraSplitNote(entry);\r\n                const nodeLabel = entry.source_node_label || entry.source_node_id || '';\r\n                const updatedDisplay = formatTimestamp(entry.updated_at ?? entry.created_at ?? null);\r\n                const columnDisplay = entry.column_name ?? '';\r\n                const methodLabel = getMethodLabel(entry);\r\n\r\n                return (\r\n                  <React.Fragment key={rowKey}>\r\n                    <tr className=\"canvas-cast__row\">\r\n                      <th scope=\"row\">\r\n                        <div className=\"canvas-cast__column-cell\">\r\n                          <span className=\"canvas-cast__column-name\">{nodeLabel}</span>\r\n                        </div>\r\n                      </th>\r\n                      <td>{entry.transformer_name}</td>\r\n                      <td>{columnDisplay}</td>\r\n                      <td>{methodLabel || ''}</td>\r\n                      <td>{renderSplitCell(entry, 'train')}</td>\r\n                      <td>{renderSplitCell(entry, 'test')}</td>\r\n                      <td>{renderSplitCell(entry, 'validation')}</td>\r\n                      <td>{updatedDisplay}</td>\r\n                    </tr>\r\n                    {extraNote && (\r\n                      <tr className=\"canvas-cast__row canvas-cast__row--subtle\">\r\n                        <td colSpan={8}>\r\n                          <span className=\"canvas-cast__muted\">Additional splits: {extraNote}</span>\r\n                        </td>\r\n                      </tr>\r\n                    )}\r\n                  </React.Fragment>\r\n                );\r\n              })}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      )}\r\n    </section>\r\n  );\r\n};\r\n","import React, { useMemo } from 'react';\r\nimport type {\r\n  FeatureNodeParameter,\r\n  FeatureTargetSplitNodeSignal,\r\n  PipelinePreviewColumnStat,\r\n} from '../../../../api';\r\nimport type { PreviewState } from '../dataset/DataSnapshotSection';\r\n\r\nexport type FeatureTargetSplitConfig = {\r\n  targetColumn: string;\r\n  featureColumns: string[];\r\n};\r\n\r\ntype FeatureTargetSplitSectionProps = {\r\n  nodeId: string;\r\n  sourceId?: string | null;\r\n  hasReachableSource: boolean;\r\n  previewState: PreviewState;\r\n  onRefreshPreview: () => void;\r\n  config: FeatureTargetSplitConfig | null;\r\n  targetColumnParameter: FeatureNodeParameter | null;\r\n  renderParameterField: (parameter: FeatureNodeParameter) => React.ReactNode;\r\n  formatMetricValue: (value?: number | null, precision?: number) => string;\r\n  formatMissingPercentage: (value?: number | null) => string;\r\n  canResetNode: boolean;\r\n  onResetNode?: () => void;\r\n};\r\n\r\nconst summarizeList = (values: string[], limit = 5): string => {\r\n  if (!values.length) {\r\n    return '';\r\n  }\r\n  if (values.length <= limit) {\r\n    return values.join(', ');\r\n  }\r\n  const preview = values.slice(0, limit).join(', ');\r\n  return `${preview}, ...`;\r\n};\r\n\r\nconst findSplitSummary = (steps: unknown[]): string | null => {\r\n  for (let index = steps.length - 1; index >= 0; index -= 1) {\r\n    const entry = steps[index];\r\n    if (typeof entry !== 'string') {\r\n      continue;\r\n    }\r\n    const lowered = entry.toLowerCase();\r\n    if (lowered.includes('feature/target split')) {\r\n      return entry;\r\n    }\r\n  }\r\n  return null;\r\n};\r\n\r\nconst resolveSignal = (\r\n  signals: FeatureTargetSplitNodeSignal[],\r\n  nodeId: string,\r\n): FeatureTargetSplitNodeSignal | null => {\r\n  if (!signals.length) {\r\n    return null;\r\n  }\r\n  const matching = signals.filter((signal) => !signal?.node_id || signal.node_id === nodeId);\r\n  if (matching.length) {\r\n    return matching[matching.length - 1];\r\n  }\r\n  return signals[signals.length - 1];\r\n};\r\n\r\nexport const FeatureTargetSplitSection: React.FC<FeatureTargetSplitSectionProps> = ({\r\n  nodeId,\r\n  sourceId,\r\n  hasReachableSource,\r\n  previewState,\r\n  onRefreshPreview,\r\n  config,\r\n  targetColumnParameter,\r\n  renderParameterField,\r\n  formatMetricValue,\r\n  formatMissingPercentage,\r\n  canResetNode,\r\n  onResetNode,\r\n}) => {\r\n  const preview = previewState.data;\r\n  const previewStatus = previewState.status;\r\n  const appliedSteps = Array.isArray(preview?.applied_steps) ? preview.applied_steps : [];\r\n  const previewColumns = Array.isArray(preview?.columns) ? (preview?.columns as string[]) : [];\r\n\r\n  const rawSignals = Array.isArray(preview?.signals?.feature_target_split)\r\n    ? (preview?.signals?.feature_target_split as FeatureTargetSplitNodeSignal[])\r\n    : [];\r\n  const activeSignal = resolveSignal(rawSignals, nodeId);\r\n\r\n  const configuredTarget = config?.targetColumn ?? '';\r\n  const resolvedTarget = activeSignal?.target_column ?? configuredTarget;\r\n  const configuredFeatures = config?.featureColumns ?? [];\r\n\r\n  const columnStats: PipelinePreviewColumnStat[] = useMemo(\r\n    () => (Array.isArray(preview?.column_stats) ? (preview?.column_stats as PipelinePreviewColumnStat[]) : []),\r\n    [preview?.column_stats],\r\n  );\r\n\r\n  const columnStatsMap = useMemo(() => {\r\n    const map = new Map<string, PipelinePreviewColumnStat>();\r\n    columnStats.forEach((stat) => {\r\n      if (stat?.name) {\r\n        map.set(stat.name, stat);\r\n      }\r\n    });\r\n    return map;\r\n  }, [columnStats]);\r\n\r\n  const resolvedFeatures = useMemo(() => {\r\n    if (activeSignal?.feature_columns?.length) {\r\n      return activeSignal.feature_columns;\r\n    }\r\n    if (configuredFeatures.length) {\r\n      return configuredFeatures;\r\n    }\r\n    if (resolvedTarget) {\r\n      return previewColumns.filter((column) => column !== resolvedTarget);\r\n    }\r\n    return previewColumns.slice();\r\n  }, [activeSignal?.feature_columns, configuredFeatures, previewColumns, resolvedTarget]);\r\n\r\n  const autoIncludedFeatures = activeSignal?.auto_included_columns ?? [];\r\n  const missingConfiguredFeatures = activeSignal?.missing_feature_columns ?? [];\r\n  const excludedColumns = activeSignal?.excluded_columns ?? [];\r\n  const targetMissingCount = activeSignal?.target_missing_count ?? 0;\r\n  const targetMissingPercentage =\r\n    typeof activeSignal?.target_missing_percentage === 'number'\r\n      ? activeSignal.target_missing_percentage\r\n      : null;\r\n  const targetDtype = activeSignal?.target_dtype ?? (resolvedTarget ? columnStatsMap.get(resolvedTarget)?.dtype ?? null : null);\r\n\r\n  const previewRowCount = typeof preview?.metrics?.row_count === 'number' ? preview.metrics.row_count : null;\r\n  const featureCount = resolvedFeatures.length;\r\n  const autoCount = autoIncludedFeatures.length;\r\n  const excludedCount = excludedColumns.length;\r\n  const missingConfiguredCount = missingConfiguredFeatures.length;\r\n\r\n  const splitSummary = useMemo(() => findSplitSummary(appliedSteps), [appliedSteps]);\r\n\r\n  const summaryItems = useMemo(() => {\r\n    const items: { label: string; value: string }[] = [];\r\n    items.push({ label: 'Target column', value: resolvedTarget || 'Not set' });\r\n    items.push({ label: 'Feature columns', value: formatMetricValue(featureCount) });\r\n    if (previewRowCount !== null) {\r\n      items.push({ label: 'Preview rows', value: formatMetricValue(previewRowCount) });\r\n    }\r\n    if (autoCount) {\r\n      items.push({ label: 'Auto-selected features', value: formatMetricValue(autoCount) });\r\n    }\r\n    if (missingConfiguredCount) {\r\n      items.push({ label: 'Configured features missing', value: formatMetricValue(missingConfiguredCount) });\r\n    }\r\n    if (excludedCount) {\r\n      items.push({ label: 'Excluded columns', value: formatMetricValue(excludedCount) });\r\n    }\r\n    if (targetMissingCount) {\r\n      const formattedMissing = formatMetricValue(targetMissingCount);\r\n      const formattedPercentage = targetMissingPercentage !== null ? formatMissingPercentage(targetMissingPercentage) : null;\r\n      items.push({\r\n        label: 'Target missing values',\r\n        value: formattedPercentage ? `${formattedMissing} (${formattedPercentage})` : formattedMissing,\r\n      });\r\n    }\r\n    return items;\r\n  }, [\r\n    autoCount,\r\n    excludedCount,\r\n    featureCount,\r\n    formatMetricValue,\r\n    formatMissingPercentage,\r\n    missingConfiguredCount,\r\n    previewRowCount,\r\n    resolvedTarget,\r\n    targetMissingCount,\r\n    targetMissingPercentage,\r\n  ]);\r\n\r\n  const connectionNote = useMemo(() => {\r\n    if (!sourceId) {\r\n      return 'Connect this node to a dataset to confirm feature and target mappings.';\r\n    }\r\n    if (!hasReachableSource) {\r\n      return 'Link this node to the upstream dataset to resolve feature columns.';\r\n    }\r\n    return null;\r\n  }, [hasReachableSource, sourceId]);\r\n\r\n  const previewIdleNote = useMemo(() => {\r\n    if (!sourceId || !hasReachableSource) {\r\n      return null;\r\n    }\r\n    if (previewStatus === 'idle') {\r\n      return 'Refresh the preview to surface feature/target diagnostics.';\r\n    }\r\n    return null;\r\n  }, [hasReachableSource, previewStatus, sourceId]);\r\n\r\n  const targetMissingNote = useMemo(() => {\r\n    if (!resolvedTarget) {\r\n      return 'Set a target column so downstream nodes understand the supervised objective.';\r\n    }\r\n    if (previewStatus === 'success' && resolvedTarget && !previewColumns.includes(resolvedTarget)) {\r\n      return `Target column \"${resolvedTarget}\" is not present in the current preview output.`;\r\n    }\r\n    return null;\r\n  }, [previewColumns, previewStatus, resolvedTarget]);\r\n\r\n  const canRefreshPreview = Boolean(sourceId) && hasReachableSource && previewStatus !== 'loading';\r\n\r\n  return (\r\n    <section className=\"canvas-modal__section\">\r\n      <div className=\"canvas-modal__section-header\">\r\n        <h3>Feature/target separation</h3>\r\n        <div className=\"canvas-modal__section-actions\">\r\n          {canResetNode && (\r\n            <button\r\n              type=\"button\"\r\n              className=\"btn btn-outline-secondary\"\r\n              onClick={onResetNode}\r\n              disabled={!onResetNode}\r\n            >\r\n              Reset node\r\n            </button>\r\n          )}\r\n          <button\r\n            type=\"button\"\r\n            className=\"btn btn-outline-secondary\"\r\n            onClick={onRefreshPreview}\r\n            disabled={!canRefreshPreview}\r\n          >\r\n            {previewStatus === 'loading' ? 'Refreshing...' : 'Refresh preview'}\r\n          </button>\r\n        </div>\r\n      </div>\r\n      <p className=\"canvas-modal__note\">\r\n        Confirm which columns feed the feature matrix (X) and which column serves as the supervised target (y).\r\n        This metadata helps downstream modeling nodes stay aligned with the configured training objective.\r\n      </p>\r\n      {connectionNote && <p className=\"canvas-modal__note canvas-modal__note--warning\">{connectionNote}</p>}\r\n      {previewState.error && previewStatus === 'error' && (\r\n        <p className=\"canvas-modal__note canvas-modal__note--error\">{previewState.error}</p>\r\n      )}\r\n      {previewIdleNote && <p className=\"canvas-modal__note canvas-modal__note--info\">{previewIdleNote}</p>}\r\n      {targetMissingNote && <p className=\"canvas-modal__note canvas-modal__note--warning\">{targetMissingNote}</p>}\r\n      {missingConfiguredCount > 0 && (\r\n        <p className=\"canvas-modal__note canvas-modal__note--warning\">\r\n          Missing configured feature columns: {summarizeList(missingConfiguredFeatures)}.\r\n        </p>\r\n      )}\r\n      {excludedCount > 0 && (\r\n        <p className=\"canvas-modal__note canvas-modal__note--muted\">\r\n          Columns excluded from the feature matrix: {summarizeList(excludedColumns)}.\r\n        </p>\r\n      )}\r\n      {autoCount > 0 && configuredFeatures.length === 0 && (\r\n        <p className=\"canvas-modal__note canvas-modal__note--info\">\r\n          Auto-selected feature columns: {summarizeList(autoIncludedFeatures)}.\r\n        </p>\r\n      )}\r\n      {splitSummary && <p className=\"canvas-modal__note canvas-modal__note--info\">{splitSummary}</p>}\r\n\r\n      {summaryItems.length > 0 && (\r\n        <ul className=\"canvas-modal__note-list\">\r\n          {summaryItems.map((item) => (\r\n            <li key={`feature-target-summary-${item.label}`}>\r\n              {item.label}: <strong>{item.value}</strong>\r\n            </li>\r\n          ))}\r\n        </ul>\r\n      )}\r\n\r\n      <div className=\"canvas-modal__parameter-grid\">\r\n        {targetColumnParameter && renderParameterField(targetColumnParameter)}\r\n      </div>\r\n      {previewStatus === 'success' && featureCount === 0 && (\r\n        <p className=\"canvas-modal__note canvas-modal__note--warning\">\r\n          No feature columns detected. Confirm that the dataset includes columns other than the target.\r\n        </p>\r\n      )}\r\n\r\n      {resolvedTarget && (\r\n        <p className=\"canvas-modal__note canvas-modal__note--muted\">\r\n          Target dtype: {targetDtype ? <strong>{targetDtype}</strong> : <span>Unknown</span>}\r\n          {targetMissingCount\r\n            ? ` - Missing rows flagged for review: ${formatMetricValue(targetMissingCount)}.`\r\n            : ''}\r\n        </p>\r\n      )}\r\n    </section>\r\n  );\r\n};\r\n","import React, { useMemo } from 'react';\r\nimport type { FeatureNodeParameter } from '../../../../api';\r\nimport type { PreviewState } from '../dataset/DataSnapshotSection';\r\n\r\nexport type TrainTestSplitConfig = {\r\n  test_size: number;\r\n  validation_size: number;\r\n  random_state?: number;\r\n  shuffle: boolean;\r\n  stratify: boolean;\r\n  target_column?: string;\r\n};\r\n\r\ntype TrainTestSplitNodeSignal = {\r\n  node_id?: string;\r\n  train_size?: number;\r\n  validation_size?: number;\r\n  test_size?: number;\r\n  total_size?: number;\r\n  test_ratio?: number;\r\n  validation_ratio?: number;\r\n  stratified: boolean;\r\n  target_column?: string;\r\n  random_state?: number;\r\n  shuffle: boolean;\r\n  splits_created: string[];\r\n};\r\n\r\ntype TrainTestSplitSectionProps = {\r\n  nodeId: string;\r\n  sourceId?: string | null;\r\n  hasReachableSource: boolean;\r\n  previewState: PreviewState;\r\n  onRefreshPreview: () => void;\r\n  config: TrainTestSplitConfig | null;\r\n  parameters: FeatureNodeParameter[];\r\n  renderParameterField: (parameter: FeatureNodeParameter) => React.ReactNode;\r\n  formatMetricValue: (value?: number | null, precision?: number) => string;\r\n  canResetNode: boolean;\r\n  onResetNode?: () => void;\r\n};\r\n\r\nconst resolveSignal = (\r\n  signals: TrainTestSplitNodeSignal[],\r\n  nodeId: string,\r\n): TrainTestSplitNodeSignal | null => {\r\n  if (!signals.length) {\r\n    return null;\r\n  }\r\n  const matching = signals.filter((signal) => !signal?.node_id || signal.node_id === nodeId);\r\n  if (matching.length) {\r\n    return matching[matching.length - 1];\r\n  }\r\n  return signals[signals.length - 1];\r\n};\r\n\r\nconst formatPercentage = (value: number): string => {\r\n  return `${(value * 100).toFixed(1)}%`;\r\n};\r\n\r\nexport const TrainTestSplitSection: React.FC<TrainTestSplitSectionProps> = ({\r\n  nodeId,\r\n  sourceId,\r\n  hasReachableSource,\r\n  previewState,\r\n  onRefreshPreview,\r\n  config,\r\n  parameters,\r\n  renderParameterField,\r\n  formatMetricValue,\r\n  canResetNode,\r\n  onResetNode,\r\n}) => {\r\n  const preview = previewState.data;\r\n  const previewStatus = previewState.status;\r\n\r\n  const rawSignals = Array.isArray(preview?.signals?.train_test_split)\r\n    ? (preview?.signals?.train_test_split as TrainTestSplitNodeSignal[])\r\n    : [];\r\n  const activeSignal = resolveSignal(rawSignals, nodeId);\r\n\r\n  const testSize = config?.test_size ?? 0.2;\r\n  const validationSize = config?.validation_size ?? 0.0;\r\n  const randomState = config?.random_state;\r\n  const shuffle = config?.shuffle ?? true;\r\n  const stratify = config?.stratify ?? false;\r\n  const targetColumn = config?.target_column ?? '';\r\n\r\n  const showValidation = validationSize > 0;\r\n\r\n  const splitInfo = useMemo(() => {\r\n    if (activeSignal) {\r\n      return {\r\n        trainSize: activeSignal.train_size ?? 0,\r\n        validationSize: activeSignal.validation_size ?? 0,\r\n        testSize: activeSignal.test_size ?? 0,\r\n        totalSize: activeSignal.total_size ?? 0,\r\n        trainRatio: activeSignal.train_size && activeSignal.total_size \r\n          ? activeSignal.train_size / activeSignal.total_size \r\n          : 0,\r\n        validationRatio: activeSignal.validation_ratio ?? 0,\r\n        testRatio: activeSignal.test_ratio ?? 0,\r\n      };\r\n    }\r\n\r\n    // Calculate expected splits from config\r\n    const trainRatio = 1 - testSize - validationSize;\r\n    return {\r\n      trainSize: 0,\r\n      validationSize: 0,\r\n      testSize: 0,\r\n      totalSize: 0,\r\n      trainRatio,\r\n      validationRatio: validationSize,\r\n      testRatio: testSize,\r\n    };\r\n  }, [activeSignal, testSize, validationSize]);\r\n\r\n  const testSizeParam = parameters.find(p => p.name === 'test_size');\r\n  const validationSizeParam = parameters.find(p => p.name === 'validation_size');\r\n  const randomStateParam = parameters.find(p => p.name === 'random_state');\r\n  const shuffleParam = parameters.find(p => p.name === 'shuffle');\r\n  const stratifyParam = parameters.find(p => p.name === 'stratify');\r\n  const targetColumnParam = parameters.find(p => p.name === 'target_column');\r\n\r\n  return (\r\n    <div className=\"node-settings__section\">\r\n      <div className=\"node-settings__section-header\">\r\n        <h3>Train/Test Split Configuration</h3>\r\n        {canResetNode && onResetNode && (\r\n          <button\r\n            type=\"button\"\r\n            onClick={onResetNode}\r\n            className=\"node-settings__reset-button\"\r\n            title=\"Reset node configuration\"\r\n          >\r\n            Reset\r\n          </button>\r\n        )}\r\n      </div>\r\n\r\n      <div className=\"node-settings__field-group\">\r\n        {testSizeParam && renderParameterField(testSizeParam)}\r\n        {validationSizeParam && renderParameterField(validationSizeParam)}\r\n        {randomStateParam && renderParameterField(randomStateParam)}\r\n        {shuffleParam && renderParameterField(shuffleParam)}\r\n        {stratifyParam && renderParameterField(stratifyParam)}\r\n        {stratify && targetColumnParam && renderParameterField(targetColumnParam)}\r\n      </div>\r\n\r\n      {/* Split Preview */}\r\n      {previewStatus === 'success' && activeSignal && (\r\n        <div className=\"node-settings__info-panel\">\r\n          <h4 className=\"node-settings__info-title\">Split Summary</h4>\r\n          <div className=\"node-settings__split-visualization\">\r\n            <div className=\"split-bar\">\r\n              <div \r\n                className=\"split-bar__segment split-bar__segment--train\"\r\n                style={{ width: formatPercentage(splitInfo.trainRatio) }}\r\n                title={`Training: ${splitInfo.trainSize} rows (${formatPercentage(splitInfo.trainRatio)})`}\r\n              >\r\n                <span className=\"split-bar__label\">Train</span>\r\n              </div>\r\n              {showValidation && (\r\n                <div \r\n                  className=\"split-bar__segment split-bar__segment--validation\"\r\n                  style={{ width: formatPercentage(splitInfo.validationRatio) }}\r\n                  title={`Validation: ${splitInfo.validationSize} rows (${formatPercentage(splitInfo.validationRatio)})`}\r\n                >\r\n                  <span className=\"split-bar__label\">Val</span>\r\n                </div>\r\n              )}\r\n              <div \r\n                className=\"split-bar__segment split-bar__segment--test\"\r\n                style={{ width: formatPercentage(splitInfo.testRatio) }}\r\n                title={`Test: ${splitInfo.testSize} rows (${formatPercentage(splitInfo.testRatio)})`}\r\n              >\r\n                <span className=\"split-bar__label\">Test</span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"node-settings__stats-grid\">\r\n            <div className=\"node-settings__stat-item\">\r\n              <span className=\"node-settings__stat-label\">Total rows:</span>\r\n              <span className=\"node-settings__stat-value\">{formatMetricValue(splitInfo.totalSize, 0)}</span>\r\n            </div>\r\n            <div className=\"node-settings__stat-item\">\r\n              <span className=\"node-settings__stat-label\">Training:</span>\r\n              <span className=\"node-settings__stat-value\">\r\n                {formatMetricValue(splitInfo.trainSize, 0)} ({formatPercentage(splitInfo.trainRatio)})\r\n              </span>\r\n            </div>\r\n            {showValidation && (\r\n              <div className=\"node-settings__stat-item\">\r\n                <span className=\"node-settings__stat-label\">Validation:</span>\r\n                <span className=\"node-settings__stat-value\">\r\n                  {formatMetricValue(splitInfo.validationSize, 0)} ({formatPercentage(splitInfo.validationRatio)})\r\n                </span>\r\n              </div>\r\n            )}\r\n            <div className=\"node-settings__stat-item\">\r\n              <span className=\"node-settings__stat-label\">Test:</span>\r\n              <span className=\"node-settings__stat-value\">\r\n                {formatMetricValue(splitInfo.testSize, 0)} ({formatPercentage(splitInfo.testRatio)})\r\n              </span>\r\n            </div>\r\n            {stratify && targetColumn && (\r\n              <div className=\"node-settings__stat-item\">\r\n                <span className=\"node-settings__stat-label\">Stratified by:</span>\r\n                <span className=\"node-settings__stat-value\">{targetColumn}</span>\r\n              </div>\r\n            )}\r\n            {randomState !== undefined && (\r\n              <div className=\"node-settings__stat-item\">\r\n                <span className=\"node-settings__stat-label\">Random state:</span>\r\n                <span className=\"node-settings__stat-value\">{randomState}</span>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Connection status */}\r\n      {!hasReachableSource && (\r\n        <div className=\"node-settings__warning\">\r\n          <span className=\"node-settings__warning-icon\"></span>\r\n          Connect this node to a data source to configure the split.\r\n        </div>\r\n      )}\r\n\r\n      {previewStatus === 'loading' && (\r\n        <div className=\"node-settings__loading\">Loading preview...</div>\r\n      )}\r\n\r\n      {previewStatus === 'error' && (\r\n        <div className=\"node-settings__error\">\r\n          <span className=\"node-settings__error-icon\"></span>\r\n          Failed to load preview. Try refreshing.\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n","import React, { useMemo } from 'react';\r\nimport type {\r\n  FeatureNodeParameter,\r\n  PipelinePreviewColumnSchema,\r\n  PipelinePreviewColumnStat,\r\n} from '../../../../api';\r\nimport type { PreviewState } from '../dataset/DataSnapshotSection';\r\n\r\ntype ProblemType = 'classification' | 'regression';\r\n\r\nexport type TrainModelDraftConfig = {\r\n  targetColumn: string;\r\n  problemType: ProblemType;\r\n};\r\n\r\ntype TrainModelDraftSectionProps = {\r\n  sourceId?: string | null;\r\n  hasReachableSource: boolean;\r\n  previewState: PreviewState;\r\n  onRefreshPreview: () => void;\r\n  config: TrainModelDraftConfig | null;\r\n  targetColumnParameter: FeatureNodeParameter | null;\r\n  problemTypeParameter: FeatureNodeParameter | null;\r\n  renderParameterField: (parameter: FeatureNodeParameter) => React.ReactNode;\r\n  formatMetricValue: (value?: number | null, precision?: number) => string;\r\n  formatMissingPercentage: (value?: number | null) => string;\r\n  schemaColumns: PipelinePreviewColumnSchema[];\r\n};\r\n\r\nconst PROBLEM_TYPE_LABEL: Record<ProblemType, string> = {\r\n  classification: 'Classification',\r\n  regression: 'Regression',\r\n};\r\n\r\nconst isNumericFamily = (family: PipelinePreviewColumnSchema['logical_family'] | undefined): boolean => {\r\n  return family === 'numeric' || family === 'integer';\r\n};\r\n\r\nconst isNumericDtype = (dtype: string | null | undefined): boolean => {\r\n  if (!dtype) {\r\n    return false;\r\n  }\r\n  const lowered = dtype.toLowerCase();\r\n  return (\r\n    lowered.includes('int') ||\r\n    lowered.includes('float') ||\r\n    lowered.includes('double') ||\r\n    lowered.includes('decimal') ||\r\n    lowered.includes('number')\r\n  );\r\n};\r\n\r\nconst summarizeList = (values: string[], limit = 3): string => {\r\n  if (values.length === 0) {\r\n    return '';\r\n  }\r\n  if (values.length <= limit) {\r\n    return values.join(', ');\r\n  }\r\n  const preview = values.slice(0, limit).join(', ');\r\n  return `${preview}, ...`;\r\n};\r\n\r\nconst findTrainSummary = (steps: unknown[]): string | null => {\r\n  for (let index = steps.length - 1; index >= 0; index -= 1) {\r\n    const entry = steps[index];\r\n    if (typeof entry !== 'string') {\r\n      continue;\r\n    }\r\n    if (entry.toLowerCase().startsWith('train model draft')) {\r\n      return entry;\r\n    }\r\n  }\r\n  return null;\r\n};\r\n\r\nexport const TrainModelDraftSection: React.FC<TrainModelDraftSectionProps> = ({\r\n  sourceId,\r\n  hasReachableSource,\r\n  previewState,\r\n  onRefreshPreview,\r\n  config,\r\n  targetColumnParameter,\r\n  problemTypeParameter,\r\n  renderParameterField,\r\n  formatMetricValue,\r\n  formatMissingPercentage,\r\n  schemaColumns,\r\n}) => {\r\n  const preview = previewState.data;\r\n  const previewStatus = previewState.status;\r\n  const appliedSteps = Array.isArray(preview?.applied_steps) ? preview.applied_steps : [];\r\n  const columnStats: PipelinePreviewColumnStat[] = Array.isArray(preview?.column_stats)\r\n    ? preview.column_stats\r\n    : [];\r\n  const metrics = preview?.metrics ?? null;\r\n\r\n  const previewColumnNames = useMemo(() => {\r\n    if (!Array.isArray(preview?.columns)) {\r\n      return [] as string[];\r\n    }\r\n    return preview.columns.filter((name): name is string => typeof name === 'string' && name.trim().length > 0);\r\n  }, [preview?.columns]);\r\n\r\n  const effectiveSchemaColumns = useMemo(() => {\r\n    if (schemaColumns.length) {\r\n      return schemaColumns;\r\n    }\r\n    if (Array.isArray(preview?.schema?.columns)) {\r\n      return preview.schema.columns as PipelinePreviewColumnSchema[];\r\n    }\r\n    if (previewColumnNames.length > 0) {\r\n      // Fallback to raw column names when the backend omits the schema payload for lightweight previews.\r\n      return previewColumnNames.map((name) => ({\r\n        name,\r\n        pandas_dtype: null,\r\n        logical_family: 'unknown' as const,\r\n        nullable: true,\r\n      }));\r\n    }\r\n    return [] as PipelinePreviewColumnSchema[];\r\n  }, [preview?.schema?.columns, previewColumnNames, schemaColumns]);\r\n\r\n  const schemaByName = useMemo(() => {\r\n    const map = new Map<string, PipelinePreviewColumnSchema>();\r\n    effectiveSchemaColumns.forEach((column) => {\r\n      if (column?.name) {\r\n        map.set(column.name, column);\r\n      }\r\n    });\r\n    return map;\r\n  }, [effectiveSchemaColumns]);\r\n\r\n  const targetColumn = config?.targetColumn ?? '';\r\n  const selectedProblemType: ProblemType = config?.problemType ?? 'classification';\r\n\r\n  const targetStat = targetColumn\r\n    ? columnStats.find((stat) => stat?.name === targetColumn) ?? null\r\n    : null;\r\n  const targetSchema = targetColumn ? schemaByName.get(targetColumn) ?? null : null;\r\n  const targetPresentInSchema = Boolean(targetSchema);\r\n\r\n  const featureNames = useMemo(() => {\r\n    const names = new Set<string>();\r\n    columnStats.forEach((stat) => {\r\n      if (stat?.name && stat.name !== targetColumn) {\r\n        names.add(stat.name);\r\n      }\r\n    });\r\n    effectiveSchemaColumns.forEach((column) => {\r\n      if (column?.name && column.name !== targetColumn) {\r\n        names.add(column.name);\r\n      }\r\n    });\r\n    return Array.from(names).sort();\r\n  }, [columnStats, effectiveSchemaColumns, targetColumn]);\r\n\r\n  const numericFeatureNames = useMemo(() => {\r\n    return featureNames.filter((name) => {\r\n      const schema = schemaByName.get(name);\r\n      if (schema && isNumericFamily(schema.logical_family)) {\r\n        return true;\r\n      }\r\n      const stat = columnStats.find((entry) => entry.name === name);\r\n      return isNumericDtype(stat?.dtype ?? null);\r\n    });\r\n  }, [columnStats, featureNames, schemaByName]);\r\n\r\n  const numericFeatureSet = useMemo(() => new Set(numericFeatureNames), [numericFeatureNames]);\r\n\r\n  const nonNumericFeatureNames = useMemo(\r\n    () => featureNames.filter((name) => !numericFeatureSet.has(name)),\r\n    [featureNames, numericFeatureSet],\r\n  );\r\n\r\n  const featureMissingNames = useMemo(\r\n    () =>\r\n      columnStats\r\n        .filter((stat) => stat?.name && stat.name !== targetColumn && (stat.missing_count ?? 0) > 0)\r\n        .map((stat) => stat.name),\r\n    [columnStats, targetColumn],\r\n  );\r\n\r\n  const previewRowCount = typeof metrics?.row_count === 'number' ? metrics.row_count : null;\r\n  const targetDistinctCount =\r\n    typeof targetStat?.distinct_count === 'number' && Number.isFinite(targetStat.distinct_count)\r\n      ? targetStat.distinct_count\r\n      : null;\r\n  const missingTargetCount = typeof targetStat?.missing_count === 'number' ? targetStat.missing_count : 0;\r\n  const targetMissingPercentage =\r\n    typeof targetStat?.missing_percentage === 'number'\r\n      ? targetStat.missing_percentage\r\n      : null;\r\n\r\n  const readinessIssues = useMemo(() => {\r\n    const issues: string[] = [];\r\n\r\n    if (!targetColumn) {\r\n      issues.push('Set a target column to evaluate downstream modeling constraints.');\r\n      return issues;\r\n    }\r\n\r\n    if (previewStatus !== 'success') {\r\n      return issues;\r\n    }\r\n\r\n    // If target column is not in preview but we have features, it might have been split upstream\r\n    // Only warn if we have no features at all\r\n    if (!targetStat && !targetPresentInSchema && !featureNames.length) {\r\n      issues.push(`Target column \"${targetColumn}\" is not present in the preview output, and no feature columns were found.`);\r\n      return issues;\r\n    }\r\n\r\n    if (!featureNames.length) {\r\n      issues.push('Add at least one feature column in addition to the target before training.');\r\n    }\r\n\r\n    if (targetStat && missingTargetCount > 0) {\r\n      issues.push(`Target column includes ${missingTargetCount} missing value${missingTargetCount === 1 ? '' : 's'}.`);\r\n    }\r\n\r\n    if (selectedProblemType === 'classification' && targetStat && (targetDistinctCount ?? 0) < 2) {\r\n      issues.push('Classification tasks require at least two distinct target classes.');\r\n    }\r\n\r\n    if (selectedProblemType === 'regression' && numericFeatureNames.length === 0) {\r\n      issues.push('Regression tasks need at least one numeric feature column.');\r\n    }\r\n\r\n    if (featureMissingNames.length > 0) {\r\n      issues.push(`Feature columns with missing values: ${summarizeList(featureMissingNames)}.`);\r\n    }\r\n\r\n    if (previewRowCount !== null && previewRowCount === 0) {\r\n      issues.push('Preview returned zero rows after upstream transformations.');\r\n    }\r\n\r\n    return issues;\r\n  }, [\r\n    featureMissingNames,\r\n    featureNames.length,\r\n    missingTargetCount,\r\n    numericFeatureNames.length,\r\n    previewRowCount,\r\n    previewStatus,\r\n    selectedProblemType,\r\n    targetColumn,\r\n    targetDistinctCount,\r\n    targetStat,\r\n    targetPresentInSchema,\r\n  ]);\r\n\r\n  const detectionLabel = useMemo(() => PROBLEM_TYPE_LABEL[selectedProblemType], [selectedProblemType]);\r\n\r\n  const summaryItems = useMemo(() => {\r\n    const items: { label: string; value: string }[] = [\r\n      { label: 'Problem type', value: detectionLabel },\r\n      { label: 'Target column', value: targetColumn || 'Not set' },\r\n    ];\r\n\r\n    if (previewStatus === 'success') {\r\n      if (targetDistinctCount !== null) {\r\n        items.push({ label: 'Target distinct values', value: formatMetricValue(targetDistinctCount) });\r\n      }\r\n      if (targetStat) {\r\n        const missingCountLabel = formatMetricValue(missingTargetCount);\r\n        const missingPercentageLabel =\r\n          targetMissingPercentage !== null ? formatMissingPercentage(targetMissingPercentage) : null;\r\n        items.push({\r\n          label: 'Target missing values',\r\n          value: missingPercentageLabel ? `${missingCountLabel} (${missingPercentageLabel})` : missingCountLabel,\r\n        });\r\n      }\r\n      if (featureMissingNames.length > 0) {\r\n        items.push({\r\n          label: 'Features with missing values',\r\n          value: formatMetricValue(featureMissingNames.length),\r\n        });\r\n      }\r\n    }\r\n\r\n    return items;\r\n  }, [\r\n    detectionLabel,\r\n    featureMissingNames.length,\r\n    formatMetricValue,\r\n    formatMissingPercentage,\r\n    missingTargetCount,\r\n    previewStatus,\r\n    targetColumn,\r\n    targetDistinctCount,\r\n    targetMissingPercentage,\r\n    targetStat,\r\n  ]);\r\n\r\n  const connectionNote = useMemo(() => {\r\n    if (!sourceId) {\r\n      return 'Connect this node to a dataset to validate training readiness.';\r\n    }\r\n    if (!hasReachableSource) {\r\n      return 'Link this node to upstream transforms to analyse the feature set that reaches it.';\r\n    }\r\n    return null;\r\n  }, [hasReachableSource, sourceId]);\r\n\r\n  const previewIdleNote = useMemo(() => {\r\n    if (!sourceId || !hasReachableSource) {\r\n      return null;\r\n    }\r\n    if (previewStatus === 'idle') {\r\n      return 'Refresh the preview to surface downstream modeling checks.';\r\n    }\r\n    return null;\r\n  }, [hasReachableSource, previewStatus, sourceId]);\r\n\r\n  const trainSummary = useMemo(() => findTrainSummary(appliedSteps), [appliedSteps]);\r\n  const canRefreshPreview = Boolean(sourceId) && hasReachableSource && previewStatus !== 'loading';\r\n  const readyMessage = useMemo(() => {\r\n    if (!targetColumn || previewStatus !== 'success' || readinessIssues.length > 0) {\r\n      return null;\r\n    }\r\n    return 'No critical blockers detected in the preview. Proceed with downstream training when ready.';\r\n  }, [previewStatus, readinessIssues.length, targetColumn]);\r\n\r\n  return (\r\n    <section className=\"canvas-modal__section\">\r\n      <div className=\"canvas-modal__section-header\">\r\n        <h3>Train model readiness</h3>\r\n        <div className=\"canvas-modal__section-actions\">\r\n          <button\r\n            type=\"button\"\r\n            className=\"btn btn-outline-secondary\"\r\n            onClick={onRefreshPreview}\r\n            disabled={!canRefreshPreview}\r\n          >\r\n            {previewStatus === 'loading' ? 'Refreshing' : 'Refresh preview'}\r\n          </button>\r\n        </div>\r\n      </div>\r\n      <p className=\"canvas-modal__note\">\r\n        Validate that the pipeline output is ready for lightweight training by checking the target column,\r\n        feature balance, and missing values against the cached preview.\r\n      </p>\r\n      {connectionNote && <p className=\"canvas-modal__note canvas-modal__note--warning\">{connectionNote}</p>}\r\n      {previewState.error && previewStatus === 'error' && (\r\n        <p className=\"canvas-modal__note canvas-modal__note--error\">{previewState.error}</p>\r\n      )}\r\n      {previewIdleNote && <p className=\"canvas-modal__note canvas-modal__note--info\">{previewIdleNote}</p>}\r\n      {readinessIssues.map((issue, index) => (\r\n        <p key={`train-model-issue-${index}`} className=\"canvas-modal__note canvas-modal__note--warning\">\r\n          {issue}\r\n        </p>\r\n      ))}\r\n      {readyMessage && <p className=\"canvas-modal__note canvas-modal__note--info\">{readyMessage}</p>}\r\n      {trainSummary && (\r\n        <p className=\"canvas-modal__note canvas-modal__note--muted\">{trainSummary}</p>\r\n      )}\r\n\r\n      <div className=\"canvas-modal__parameter-grid\">\r\n        {targetColumnParameter && renderParameterField(targetColumnParameter)}\r\n        {problemTypeParameter && renderParameterField(problemTypeParameter)}\r\n      </div>\r\n\r\n      {summaryItems.length > 0 && (\r\n        <ul className=\"canvas-modal__note-list\">\r\n          {summaryItems.map((item) => (\r\n            <li key={`train-model-summary-${item.label}`}>\r\n              {item.label}: <strong>{item.value}</strong>\r\n            </li>\r\n          ))}\r\n        </ul>\r\n      )}\r\n\r\n      {previewStatus === 'success' && featureMissingNames.length > 0 && (\r\n        <p className=\"canvas-modal__note canvas-modal__note--muted\">\r\n          Features with missing values: {summarizeList(featureMissingNames)}.\r\n        </p>\r\n      )}\r\n\r\n      {previewStatus === 'success' && selectedProblemType === 'regression' && nonNumericFeatureNames.length > 0 && (\r\n        <p className=\"canvas-modal__note canvas-modal__note--muted\">\r\n          Non-numeric features detected: {summarizeList(nonNumericFeatureNames)}. Consider encoding or casting them\r\n          before training regression models.\r\n        </p>\r\n      )}\r\n    </section>\r\n  );\r\n};\r\n","// Formatting helpers consumed by NodeSettingsModal sections when rendering preview data.\r\nimport { formatMetricValue } from '../formatting';\r\n\r\nexport const formatCellValue = (value: any): string => {\r\n  if (value === null || value === undefined) {\r\n    return '';\r\n  }\r\n  if (typeof value === 'number') {\r\n    return Number.isFinite(value) ? formatMetricValue(value, Math.abs(value) >= 1 ? 2 : 4) : String(value);\r\n  }\r\n  if (typeof value === 'string') {\r\n    return value;\r\n  }\r\n  if (typeof value === 'boolean') {\r\n    return value ? 'True' : 'False';\r\n  }\r\n  if (value instanceof Date) {\r\n    return value.toISOString();\r\n  }\r\n  if (Array.isArray(value)) {\r\n    return value.length ? JSON.stringify(value) : '[]';\r\n  }\r\n  if (typeof value === 'object') {\r\n    try {\r\n      return JSON.stringify(value);\r\n    } catch (error) {\r\n      return String(value);\r\n    }\r\n  }\r\n  return String(value);\r\n};\r\n\r\nexport const formatColumnType = (value?: string | null) => {\r\n  if (!value) {\r\n    return 'Unknown';\r\n  }\r\n  return value;\r\n};\r\n\r\nconst parseServerTimestamp = (value?: string | null): Date | null => {\r\n  if (!value) {\r\n    return null;\r\n  }\r\n\r\n  let normalized = value.trim();\r\n  if (!normalized) {\r\n    return null;\r\n  }\r\n\r\n  if (/^\\d{4}-\\d{2}-\\d{2}\\s+\\d/.test(normalized)) {\r\n    normalized = normalized.replace(' ', 'T');\r\n  }\r\n\r\n  if (!/(Z|z|[+-]\\d{2}:?\\d{2})$/.test(normalized)) {\r\n    normalized = `${normalized}Z`;\r\n  }\r\n\r\n  const parsed = new Date(normalized);\r\n  if (Number.isNaN(parsed.getTime())) {\r\n    return null;\r\n  }\r\n\r\n  return parsed;\r\n};\r\n\r\nexport const formatRelativeTime = (value?: string | null) => {\r\n  const parsed = parseServerTimestamp(value);\r\n  if (!parsed) {\r\n    return null;\r\n  }\r\n\r\n  const diffMinutes = Math.round((Date.now() - parsed.getTime()) / 60000);\r\n  if (diffMinutes < 1) {\r\n    return 'just now';\r\n  }\r\n  if (diffMinutes === 1) {\r\n    return '1 minute ago';\r\n  }\r\n  if (diffMinutes < 60) {\r\n    return `${diffMinutes} minutes ago`;\r\n  }\r\n  const diffHours = Math.round(diffMinutes / 60);\r\n  if (diffHours === 1) {\r\n    return '1 hour ago';\r\n  }\r\n  if (diffHours < 24) {\r\n    return `${diffHours} hours ago`;\r\n  }\r\n  const diffDays = Math.round(diffHours / 24);\r\n  if (diffDays === 1) {\r\n    return '1 day ago';\r\n  }\r\n  return `${diffDays} days ago`;\r\n};\r\n","import React, { useEffect, useMemo, useState } from 'react';\r\nimport { createPortal } from 'react-dom';\r\nimport type { ModelHyperparameterField } from '../../../../api';\r\nimport { formatRelativeTime } from '../../utils/formatters';\r\n\r\nexport type HyperparamPreset = {\r\n  id: string;\r\n  label: string;\r\n  source: 'best-api' | 'tuning-job';\r\n  modelType: string;\r\n  params: Record<string, any>;\r\n  jobId?: string | null;\r\n  nodeId?: string | null;\r\n  runNumber?: number | null;\r\n  score?: number | null;\r\n  scoring?: string | null;\r\n  finishedAt?: string | null;\r\n  searchStrategy?: string | null;\r\n  nIterations?: number | null;\r\n  targetColumn?: string | null;\r\n  pipelineId?: string | null;\r\n  datasetSourceId?: string | null;\r\n  description?: string | null;\r\n};\r\n\r\ntype BestHyperparamsModalProps = {\r\n  presets: HyperparamPreset[];\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  onApply: (preset: HyperparamPreset) => void;\r\n  activePresetId?: string | null;\r\n  fieldMetadata?: Record<string, ModelHyperparameterField>;\r\n};\r\n\r\nconst formatPresetScore = (score?: number | null): string => {\r\n  if (typeof score !== 'number' || !Number.isFinite(score)) {\r\n    return '';\r\n  }\r\n  if (Math.abs(score) >= 1000) {\r\n    return score.toFixed(0);\r\n  }\r\n  if (Math.abs(score) >= 100) {\r\n    return score.toFixed(1);\r\n  }\r\n  if (Math.abs(score) >= 10) {\r\n    return score.toFixed(2);\r\n  }\r\n  return score.toFixed(3);\r\n};\r\n\r\nexport const BestHyperparamsModal: React.FC<BestHyperparamsModalProps> = ({\r\n  presets,\r\n  isOpen,\r\n  onClose,\r\n  onApply,\r\n  activePresetId,\r\n  fieldMetadata,\r\n}) => {\r\n  const [selectedId, setSelectedId] = useState<string | null>(null);\r\n\r\n  useEffect(() => {\r\n    if (!isOpen) {\r\n      setSelectedId(null);\r\n      return;\r\n    }\r\n    if (selectedId && presets.some((preset) => preset.id === selectedId)) {\r\n      return;\r\n    }\r\n    setSelectedId(presets[0]?.id ?? null);\r\n  }, [isOpen, presets, selectedId]);\r\n\r\n  useEffect(() => {\r\n    if (!isOpen) {\r\n      return;\r\n    }\r\n    const handleKey = (event: KeyboardEvent) => {\r\n      if (event.key === 'Escape') {\r\n        onClose();\r\n      }\r\n    };\r\n    window.addEventListener('keydown', handleKey);\r\n    return () => window.removeEventListener('keydown', handleKey);\r\n  }, [isOpen, onClose]);\r\n\r\n  const selectedPreset = useMemo(() => {\r\n    if (!selectedId) {\r\n      return presets[0] ?? null;\r\n    }\r\n    return presets.find((preset) => preset.id === selectedId) ?? presets[0] ?? null;\r\n  }, [presets, selectedId]);\r\n\r\n  const currentIsApplied = useMemo(() => {\r\n    if (!activePresetId || !selectedPreset) {\r\n      return false;\r\n    }\r\n    return activePresetId === selectedPreset.id;\r\n  }, [activePresetId, selectedPreset]);\r\n\r\n  const content = useMemo(() => {\r\n    if (!isOpen || !presets.length) {\r\n      return null;\r\n    }\r\n\r\n    const logisticSolverRaw =\r\n      selectedPreset?.modelType?.toLowerCase() === 'logistic_regression'\r\n        ? selectedPreset?.params?.solver\r\n        : null;\r\n    const logisticSolver =\r\n      typeof logisticSolverRaw === 'string' ? logisticSolverRaw.trim().toLowerCase() : null;\r\n    const scalingNotice =\r\n      logisticSolver && (logisticSolver === 'sag' || logisticSolver === 'saga')\r\n        ? 'SAG and SAGA solvers expect standardized features. Scale inputs before training to improve convergence and avoid repeated warnings.'\r\n        : null;\r\n\r\n    const paramEntries = selectedPreset\r\n      ? Object.entries(selectedPreset.params ?? {})\r\n          .sort(([a], [b]) => a.localeCompare(b))\r\n          .map(([key, value]) => {\r\n            const metadata = fieldMetadata?.[key];\r\n\r\n            const findOption = (rawValue: any) => {\r\n              if (!metadata?.options?.length) {\r\n                return null;\r\n              }\r\n              return (\r\n                metadata.options.find((option) => {\r\n                  const optionValue = option.value;\r\n                  if (rawValue === null || rawValue === undefined) {\r\n                    if (optionValue === null) {\r\n                      return true;\r\n                    }\r\n                    if (\r\n                      typeof optionValue === 'string' && optionValue.trim().toLowerCase() === 'none'\r\n                    ) {\r\n                      return true;\r\n                    }\r\n                    return false;\r\n                  }\r\n                  if (typeof rawValue === 'string' && typeof optionValue === 'string') {\r\n                    if (optionValue === rawValue) {\r\n                      return true;\r\n                    }\r\n                    return optionValue.trim().toLowerCase() === rawValue.trim().toLowerCase();\r\n                  }\r\n                  return String(optionValue) === String(rawValue);\r\n                }) ?? null\r\n              );\r\n            };\r\n\r\n            const formatPrimitive = (entry: any): string => {\r\n              if (entry === null) {\r\n                return metadata?.nullable ? 'None' : '';\r\n              }\r\n              if (entry === undefined) {\r\n                return '';\r\n              }\r\n              if (typeof entry === 'boolean') {\r\n                return entry ? 'true' : 'false';\r\n              }\r\n              if (typeof entry === 'number') {\r\n                return Number.isFinite(entry) ? entry.toString() : String(entry);\r\n              }\r\n              if (entry && typeof entry === 'object') {\r\n                try {\r\n                  return JSON.stringify(entry);\r\n                } catch (error) {\r\n                  return '[object]';\r\n                }\r\n              }\r\n              return String(entry ?? '');\r\n            };\r\n\r\n            const formatOption = (option: { label?: string; value?: any } | null) => {\r\n              if (!option) {\r\n                return null;\r\n              }\r\n              const optionValue = option.value;\r\n              const label = option.label?.trim();\r\n              const valueText = formatPrimitive(optionValue);\r\n              if (label && valueText && label !== valueText) {\r\n                return `${label} (${valueText})`;\r\n              }\r\n              return label || valueText;\r\n            };\r\n\r\n            const fallbackToDefault = (): { text: string; note: string | null } => {\r\n              if (metadata && metadata.default !== undefined) {\r\n                const formatted = resolveValue(metadata.default, false);\r\n                if (formatted.text) {\r\n                  return {\r\n                    text: formatted.text,\r\n                    note: 'Using estimator default',\r\n                  };\r\n                }\r\n              }\r\n              return {\r\n                text: '',\r\n                note: 'Using estimator default',\r\n              };\r\n            };\r\n\r\n            const resolveValue = (entry: any, allowFallback = true): { text: string; note: string | null } => {\r\n              const optionMatch = findOption(entry);\r\n              if (optionMatch) {\r\n                return {\r\n                  text: formatOption(optionMatch) ?? '',\r\n                  note: null,\r\n                };\r\n              }\r\n\r\n              if (Array.isArray(entry)) {\r\n                if (entry.length === 0) {\r\n                  return allowFallback ? fallbackToDefault() : { text: '', note: null };\r\n                }\r\n                const formattedItems = entry.map((item) => resolveValue(item, false));\r\n                return {\r\n                  text: formattedItems.map((item) => item.text).filter(Boolean).join(', '),\r\n                  note: null,\r\n                };\r\n              }\r\n\r\n              if (entry === undefined || (typeof entry === 'string' && entry.trim() === '')) {\r\n                return allowFallback ? fallbackToDefault() : { text: '', note: null };\r\n              }\r\n\r\n              if (entry === null) {\r\n                if (metadata?.nullable) {\r\n                  return { text: 'None', note: null };\r\n                }\r\n                return allowFallback ? fallbackToDefault() : { text: '', note: null };\r\n              }\r\n\r\n              return {\r\n                text: formatPrimitive(entry),\r\n                note: null,\r\n              };\r\n            };\r\n\r\n            const resolved = resolveValue(value);\r\n\r\n            return {\r\n              key,\r\n              label: metadata?.label ?? key,\r\n              description: metadata?.description ?? null,\r\n              value: resolved.text,\r\n              note: resolved.note,\r\n            };\r\n          })\r\n      : [];\r\n\r\n    const relativeFinished = selectedPreset?.finishedAt\r\n      ? formatRelativeTime(selectedPreset.finishedAt)\r\n      : null;\r\n\r\n    return (\r\n      <div className=\"canvas-modal best-param-modal\" role=\"dialog\" aria-modal=\"true\">\r\n        <div className=\"canvas-modal__backdrop\" onClick={onClose} />\r\n        <div className=\"canvas-modal__panel best-param-modal__panel\" role=\"document\">\r\n          <header className=\"best-param-modal__header\">\r\n            <div>\r\n              <h3 className=\"best-param-modal__title\">Tuned Hyperparameter Presets</h3>\r\n              <p className=\"best-param-modal__subtitle\">\r\n                Review hyperparameter sets discovered by recent tuning runs and apply them to the current model.\r\n              </p>\r\n            </div>\r\n            <button type=\"button\" className=\"best-param-modal__close\" onClick={onClose}>\r\n              Close\r\n            </button>\r\n          </header>\r\n          <div className=\"best-param-modal__layout\">\r\n            <aside className=\"best-param-modal__list\" aria-label=\"Tuned presets\">\r\n              {presets.map((preset) => {\r\n                const isActive = preset.id === selectedPreset?.id;\r\n                const presetRelative = preset.finishedAt ? formatRelativeTime(preset.finishedAt) : null;\r\n                return (\r\n                  <button\r\n                    key={preset.id}\r\n                    type=\"button\"\r\n                    className={`best-param-modal__list-button${isActive ? ' best-param-modal__list-button--active' : ''}`}\r\n                    onClick={() => setSelectedId(preset.id)}\r\n                  >\r\n                    <span className=\"best-param-modal__list-title\">{preset.label}</span>\r\n                    <span className=\"best-param-modal__list-meta\">\r\n                      {preset.runNumber ? `Run ${preset.runNumber}` : 'Tuning run'}\r\n                      {presetRelative ? `  ${presetRelative}` : ''}\r\n                    </span>\r\n                    {preset.scoring && (\r\n                      <span className=\"best-param-modal__list-score\">\r\n                        {preset.scoring}: {formatPresetScore(preset.score)}\r\n                      </span>\r\n                    )}\r\n                    {preset.targetColumn && (\r\n                      <span className=\"best-param-modal__list-target\">Target: {preset.targetColumn}</span>\r\n                    )}\r\n                  </button>\r\n                );\r\n              })}\r\n            </aside>\r\n            <section className=\"best-param-modal__details\">\r\n              {selectedPreset ? (\r\n                <>\r\n                  <div className=\"best-param-modal__summary\">\r\n                    <div className=\"best-param-modal__summary-main\">\r\n                      <h4>{selectedPreset.label}</h4>\r\n                      <p>\r\n                        {selectedPreset.runNumber ? `Run ${selectedPreset.runNumber}` : 'Tuning run'}\r\n                        {relativeFinished ? `  ${relativeFinished}` : ''}\r\n                        {selectedPreset.searchStrategy ? `  ${selectedPreset.searchStrategy}` : ''}\r\n                      </p>\r\n                      <p>\r\n                        Model: <strong>{selectedPreset.modelType}</strong>\r\n                        {selectedPreset.targetColumn ? (\r\n                          <>\r\n                            {' '}\r\n                             Target: <strong>{selectedPreset.targetColumn}</strong>\r\n                          </>\r\n                        ) : null}\r\n                        {selectedPreset.scoring ? (\r\n                          <>\r\n                            {' '}\r\n                             {selectedPreset.scoring}: <strong>{formatPresetScore(selectedPreset.score)}</strong>\r\n                          </>\r\n                        ) : null}\r\n                      </p>\r\n                    </div>\r\n                    <div className=\"best-param-modal__summary-actions\">\r\n                      <button\r\n                        type=\"button\"\r\n                        className=\"best-param-modal__apply\"\r\n                        onClick={() => onApply(selectedPreset)}\r\n                        disabled={!paramEntries.length}\r\n                      >\r\n                        {currentIsApplied ? 'Already applied' : 'Apply preset'}\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n                  {selectedPreset.description && (\r\n                    <p className=\"best-param-modal__note\">{selectedPreset.description}</p>\r\n                  )}\r\n                  {scalingNotice && (\r\n                    <div className=\"best-param-modal__notice best-param-modal__notice--warning\">\r\n                      <strong>Tip:</strong> {scalingNotice}\r\n                    </div>\r\n                  )}\r\n                  <div className=\"best-param-modal__param-grid\" role=\"table\">\r\n                    {paramEntries.length ? (\r\n                      paramEntries.map((entry) => (\r\n                        <div key={entry.key} className=\"best-param-modal__param-row\" role=\"row\">\r\n                          <div className=\"best-param-modal__param-name\" role=\"cell\">\r\n                            <div className=\"best-param-modal__param-label\">\r\n                              {entry.label}\r\n                              {entry.label !== entry.key && (\r\n                                <span className=\"best-param-modal__param-key\">\r\n                                  <code>{entry.key}</code>\r\n                                </span>\r\n                              )}\r\n                            </div>\r\n                            {entry.description && (\r\n                              <div className=\"best-param-modal__param-description\">{entry.description}</div>\r\n                            )}\r\n                          </div>\r\n                          <div className=\"best-param-modal__param-value\" role=\"cell\">\r\n                            <code>{entry.value}</code>\r\n                            {entry.note && (\r\n                              <span className=\"best-param-modal__param-note\">{entry.note}</span>\r\n                            )}\r\n                          </div>\r\n                        </div>\r\n                      ))\r\n                    ) : (\r\n                      <p className=\"best-param-modal__empty\">No hyperparameters available for this preset.</p>\r\n                    )}\r\n                  </div>\r\n                </>\r\n              ) : (\r\n                <p className=\"best-param-modal__empty\">Select a tuning run to inspect its hyperparameters.</p>\r\n              )}\r\n            </section>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }, [activePresetId, currentIsApplied, fieldMetadata, isOpen, onApply, onClose, presets, selectedPreset]);\r\n\r\n  if (!content) {\r\n    return null;\r\n  }\r\n\r\n  return createPortal(content, document.body);\r\n};\r\n","import { useMemo } from 'react';\r\nimport type { FeatureGraph, FeatureNodeParameterOption } from '../../../../api';\r\n\r\nexport type ScalingWarning = {\r\n  headline: string;\r\n  summary: string;\r\n  details: string[];\r\n};\r\n\r\nconst SCALING_NODE_TYPES = new Set([\r\n  'scale_numeric_features',\r\n  'scaling',\r\n  'scale_numeric',\r\n]);\r\n\r\nconst SCALING_CONVERGENCE_PATTERNS = [\r\n  /convergencewarning/i,\r\n  /failed to converge/i,\r\n  /did not converge/i,\r\n  /optimizer failed to converge/i,\r\n  /increase the number of iterations/i,\r\n  /scale your features/i,\r\n  /standardize your features/i,\r\n  /consider scaling your (data|features)/i,\r\n  /feature scaling is (recommended|required)/i,\r\n];\r\n\r\nconst treeInsensitiveKeywords = ['forest', 'tree', 'boost', 'xgboost', 'lightgbm', 'catboost', 'gradient', 'histgradient', 'bagging'];\r\nconst bayesInsensitiveKeywords = ['bayes', 'naive_bayes', 'gaussian_nb'];\r\n\r\nconst requiresScaling = (modelKey: string): { required: boolean; reason: 'logistic' | 'svm' | 'knn' | 'sgd' | 'linear' | null } => {\r\n  const key = modelKey.trim().toLowerCase();\r\n  if (!key) {\r\n    return { required: false, reason: null };\r\n  }\r\n\r\n  if (treeInsensitiveKeywords.some((token) => key.includes(token))) {\r\n    return { required: false, reason: null };\r\n  }\r\n\r\n  if (bayesInsensitiveKeywords.some((token) => key.includes(token))) {\r\n    return { required: false, reason: null };\r\n  }\r\n\r\n  if (key.includes('logistic')) {\r\n    return { required: true, reason: 'logistic' };\r\n  }\r\n\r\n  if (key.includes('svm') || key.includes('svc') || key.includes('svr')) {\r\n    return { required: true, reason: 'svm' };\r\n  }\r\n\r\n  if (key.includes('knn') || key.includes('nearest')) {\r\n    return { required: true, reason: 'knn' };\r\n  }\r\n\r\n  if (key.includes('sgd') || key.includes('perceptron')) {\r\n    return { required: true, reason: 'sgd' };\r\n  }\r\n\r\n  const linearKeywords = ['linear', 'ridge', 'lasso', 'elastic', 'regression'];\r\n  if (linearKeywords.some((token) => key.includes(token))) {\r\n    return { required: true, reason: 'linear' };\r\n  }\r\n\r\n  return { required: false, reason: null };\r\n};\r\n\r\nconst collectUpstreamNodeIds = (graph: FeatureGraph | null, nodeId: string): Set<string> => {\r\n  const upstreamIds = new Set<string>();\r\n  if (!graph || !nodeId) {\r\n    return upstreamIds;\r\n  }\r\n\r\n  const edges = Array.isArray(graph.edges) ? graph.edges : [];\r\n  const stack: string[] = [nodeId];\r\n\r\n  while (stack.length) {\r\n    const current = stack.pop();\r\n    if (!current) {\r\n      continue;\r\n    }\r\n\r\n    for (const edge of edges) {\r\n      if (!edge) {\r\n        continue;\r\n      }\r\n      const sourceRaw = typeof edge.source === 'string' ? edge.source.trim() : '';\r\n      const targetRaw = typeof edge.target === 'string' ? edge.target.trim() : '';\r\n      if (!sourceRaw || !targetRaw) {\r\n        continue;\r\n      }\r\n      if (targetRaw === current && !upstreamIds.has(sourceRaw)) {\r\n        upstreamIds.add(sourceRaw);\r\n        stack.push(sourceRaw);\r\n      }\r\n    }\r\n  }\r\n\r\n  return upstreamIds;\r\n};\r\n\r\nconst hasScalingUpstream = (graph: FeatureGraph | null, nodeId: string): boolean => {\r\n  if (!graph || !nodeId) {\r\n    return false;\r\n  }\r\n  const upstreamIds = collectUpstreamNodeIds(graph, nodeId);\r\n  if (!upstreamIds.size) {\r\n    return false;\r\n  }\r\n\r\n  const nodes = Array.isArray(graph.nodes) ? graph.nodes : [];\r\n  return nodes.some((node: any) => {\r\n    if (!node || typeof node.id !== 'string') {\r\n      return false;\r\n    }\r\n    if (!upstreamIds.has(node.id)) {\r\n      return false;\r\n    }\r\n    const catalogType = String(node?.data?.catalogType ?? node?.type ?? '').toLowerCase();\r\n    if (!catalogType) {\r\n      return false;\r\n    }\r\n    if (SCALING_NODE_TYPES.has(catalogType)) {\r\n      return true;\r\n    }\r\n    return catalogType.includes('scale') && catalogType.includes('numeric');\r\n  });\r\n};\r\n\r\nconst resolveModelLabel = (\r\n  modelType: string,\r\n  modelTypeOptions: FeatureNodeParameterOption[],\r\n): string => {\r\n  const match = modelTypeOptions.find((option) => option?.value === modelType);\r\n  if (match?.label) {\r\n    return match.label;\r\n  }\r\n  return modelType.replace(/_/g, ' ').replace(/\\s+/g, ' ').trim();\r\n};\r\n\r\nconst gatherStringCandidates = (\r\n  input: unknown,\r\n  seen: Set<unknown> = new Set(),\r\n  depth = 0,\r\n): string[] => {\r\n  if (input === null || input === undefined) {\r\n    return [];\r\n  }\r\n  if (typeof input === 'string') {\r\n    return [input];\r\n  }\r\n  if (typeof input === 'number' || typeof input === 'boolean') {\r\n    return [];\r\n  }\r\n  if (depth > 3) {\r\n    return [];\r\n  }\r\n  if (Array.isArray(input)) {\r\n    if (!input.length) {\r\n      return [];\r\n    }\r\n    const limit = 32;\r\n    const results: string[] = [];\r\n    for (let index = 0; index < input.length && index < limit; index += 1) {\r\n      results.push(...gatherStringCandidates(input[index], seen, depth + 1));\r\n    }\r\n    return results;\r\n  }\r\n  if (typeof input === 'object') {\r\n    if (seen.has(input)) {\r\n      return [];\r\n    }\r\n    seen.add(input);\r\n    const values = Object.values(input as Record<string, unknown>);\r\n    if (!values.length) {\r\n      return [];\r\n    }\r\n    const limit = 32;\r\n    const results: string[] = [];\r\n    for (let index = 0; index < values.length && index < limit; index += 1) {\r\n      results.push(...gatherStringCandidates(values[index], seen, depth + 1));\r\n    }\r\n    return results;\r\n  }\r\n  return [];\r\n};\r\n\r\nexport const hasScalingConvergenceMessage = (payload: unknown): boolean => {\r\n  if (!payload) {\r\n    return false;\r\n  }\r\n  const candidates = gatherStringCandidates(payload);\r\n  if (!candidates.length) {\r\n    return false;\r\n  }\r\n  return candidates.some((message) =>\r\n    SCALING_CONVERGENCE_PATTERNS.some((pattern) => pattern.test(message)),\r\n  );\r\n};\r\n\r\nexport const detectScalingConvergenceFromJob = (job: any): boolean => {\r\n  if (!job) {\r\n    return false;\r\n  }\r\n\r\n  const candidateFields: unknown[] = [\r\n    job.error_message,\r\n    job.warning_message,\r\n    job.message,\r\n    job.details,\r\n    job.notes,\r\n    job.status_reason,\r\n    job.status_message,\r\n    job.error,\r\n    job.metadata?.warnings,\r\n    job.metadata?.warning,\r\n    job.metadata?.notes,\r\n    job.metadata?.messages,\r\n    job.metadata?.message,\r\n    job.metadata?.errors,\r\n    job.metrics?.warnings,\r\n    job.metrics?.warning,\r\n    job.metrics?.messages,\r\n    job.metrics?.message,\r\n    job.job_metadata?.warnings,\r\n    job.job_metadata?.warning,\r\n    job.job_metadata?.messages,\r\n    job.job_metadata?.notes,\r\n  ];\r\n\r\n  for (const field of candidateFields) {\r\n    if (hasScalingConvergenceMessage(field)) {\r\n      return true;\r\n    }\r\n  }\r\n\r\n  if (hasScalingConvergenceMessage(job.metadata)) {\r\n    return true;\r\n  }\r\n  if (hasScalingConvergenceMessage(job.metrics)) {\r\n    return true;\r\n  }\r\n\r\n  return false;\r\n};\r\n\r\nconst buildWarning = (\r\n  reason: 'logistic' | 'svm' | 'knn' | 'sgd' | 'linear',\r\n  modelLabel: string,\r\n  problemType: 'classification' | 'regression',\r\n): ScalingWarning => {\r\n  const baseLabel = modelLabel || 'This model';\r\n  switch (reason) {\r\n    case 'logistic':\r\n      return {\r\n        headline: `${baseLabel} needs scaled numeric features`,\r\n        summary:\r\n          'Standardize numeric inputs before launching jobs to keep the logistic solver stable and avoid repeated \"scale your features\" warnings.',\r\n        details: [\r\n          'Insert a Scale numeric features step before this node or reuse an upstream scaler.',\r\n          'StandardScaler works for most datasets; RobustScaler can help when outliers dominate.',\r\n          'Once scaling is in place, re-run tuning or training so the solver converges cleanly.',\r\n        ],\r\n      };\r\n    case 'svm':\r\n      return {\r\n        headline: `${baseLabel} is sensitive to feature scale`,\r\n        summary:\r\n          'Support Vector Machines depend on distance calculations. Keep numeric features on comparable scales to preserve margin geometry.',\r\n        details: [\r\n          'Add the Scale numeric features step upstream of this node.',\r\n          'Try StandardScaler or MinMaxScaler depending on the kernel and expected ranges.',\r\n          'Retrain after scaling to refresh support vectors and hyperparameters.',\r\n        ],\r\n      };\r\n    case 'knn':\r\n      return {\r\n        headline: `${baseLabel} uses distance-based comparisons`,\r\n        summary:\r\n          'k-NN models weigh distances directly, so unscaled columns dominate neighbors. Scale numeric fields to keep votes balanced.',\r\n        details: [\r\n          'Drop in a Scale numeric features step before launching jobs.',\r\n          'MinMaxScaler keeps features in [0, 1]; StandardScaler works when values are roughly normal.',\r\n          'Requeue jobs after scaling so neighbor search reflects the new feature space.',\r\n        ],\r\n      };\r\n    case 'sgd':\r\n      return {\r\n        headline: `${baseLabel} benefits from normalized inputs`,\r\n        summary:\r\n          'Stochastic gradient models converge faster and produce steadier coefficients when numeric inputs share a common scale.',\r\n        details: [\r\n          'Insert a Scale numeric features node prior to this step.',\r\n          'StandardScaler plus optional RobustScaler for heavy-tailed features keeps gradients stable.',\r\n          'Re-run jobs after scaling to avoid exploding or vanishing updates.',\r\n        ],\r\n      };\r\n    default:\r\n      return {\r\n        headline: `${baseLabel} prefers standardized numeric features`,\r\n        summary:\r\n          problemType === 'regression'\r\n            ? 'Linear regression families rely on comparable feature magnitudes. Scaling keeps coefficients well-conditioned and improves R stability.'\r\n            : 'Linear classification models respond better when numeric inputs share a common scale. Scaling prevents any single column from dominating the loss.',\r\n        details: [\r\n          'Add the Scale numeric features step ahead of this node or reuse an existing scaler.',\r\n          'StandardScaler is a safe default; RobustScaler helps when outliers skew distributions.',\r\n          'Re-launch jobs once scaling is applied so coefficients represent the standardized space.',\r\n        ],\r\n      };\r\n  }\r\n};\r\n\r\ntype UseScalingWarningArgs = {\r\n  graph: FeatureGraph | null;\r\n  nodeId: string;\r\n  modelType: string | null | undefined;\r\n  problemType: 'classification' | 'regression';\r\n  modelTypeOptions: FeatureNodeParameterOption[];\r\n  enabled: boolean;\r\n};\r\n\r\nexport const useScalingWarning = ({\r\n  graph,\r\n  nodeId,\r\n  modelType,\r\n  problemType,\r\n  modelTypeOptions,\r\n  enabled,\r\n}: UseScalingWarningArgs): ScalingWarning | null => {\r\n  return useMemo(() => {\r\n    if (!enabled) {\r\n      return null;\r\n    }\r\n\r\n    if (!modelType || !modelType.trim()) {\r\n      return null;\r\n    }\r\n\r\n    if (hasScalingUpstream(graph, nodeId)) {\r\n      return null;\r\n    }\r\n\r\n    const normalized = modelType.trim().toLowerCase();\r\n    const { required, reason } = requiresScaling(normalized);\r\n    if (!required || !reason) {\r\n      return null;\r\n    }\r\n\r\n    const modelLabel = resolveModelLabel(modelType, modelTypeOptions);\r\n    return buildWarning(reason, modelLabel, problemType);\r\n  }, [enabled, graph, modelType, modelTypeOptions, nodeId, problemType]);\r\n};\r\n","import React, { useCallback, useEffect, useMemo, useRef, useState } from 'react';\r\nimport { useMutation, useQuery, useQueryClient } from '@tanstack/react-query';\r\nimport type {\r\n\tFeatureGraph,\r\n\tFeatureNodeParameter,\r\n\tFeatureNodeParameterOption,\r\n\tTrainingJobListResponse,\r\n\tTrainingJobResponse,\r\n\tTrainingJobSummary,\r\n\tModelHyperparameterField,\r\n\tModelHyperparametersResponse,\r\n\tHyperparameterTuningJobListResponse,\r\n\tHyperparameterTuningJobSummary,\r\n\tBestHyperparametersResponse,\r\n} from '../../../../api';\r\nimport {\r\n\tcreateTrainingJob,\r\n\tfetchTrainingJobs,\r\n\tgeneratePipelineId,\r\n\tfetchModelHyperparameters,\r\n\ttype FetchTrainingJobsOptions,\r\n\tfetchHyperparameterTuningJobs,\r\n\ttype FetchHyperparameterTuningJobsOptions,\r\n\tfetchBestHyperparameters,\r\n} from '../../../../api';\r\nimport { formatRelativeTime } from '../../utils/formatters';\r\nimport type { TrainModelDraftConfig } from './TrainModelDraftSection';\r\nimport type { TrainModelCVConfig } from '../../hooks/useModelingConfiguration';\r\nimport { BestHyperparamsModal, type HyperparamPreset } from './BestHyperparamsModal';\r\nimport { useScalingWarning, detectScalingConvergenceFromJob, hasScalingConvergenceMessage } from './useScalingWarning';\r\n\r\nexport type TrainModelRuntimeConfig = {\r\n\tmodelType: string | null;\r\n\thyperparameters: Record<string, any> | null;\r\n\thyperparametersError: string | null;\r\n};\r\n\r\ntype ModelTrainingSectionProps = {\r\n\tnodeId: string;\r\n\tsourceId?: string | null;\r\n\tgraph: FeatureGraph | null;\r\n\tconfig: TrainModelDraftConfig | null;\r\n\truntimeConfig: TrainModelRuntimeConfig | null;\r\n\tcvConfig: TrainModelCVConfig;\r\n\tdraftConfigState: Record<string, any> | null;\r\n\trenderParameterField: (parameter: FeatureNodeParameter) => React.ReactNode;\r\n\tmodelTypeParameter: FeatureNodeParameter | null;\r\n\tmodelTypeOptions: FeatureNodeParameterOption[];\r\n\thyperparametersParameter: FeatureNodeParameter | null;\r\n\tcvEnabledParameter: FeatureNodeParameter | null;\r\n\tcvStrategyParameter: FeatureNodeParameter | null;\r\n\tcvFoldsParameter: FeatureNodeParameter | null;\r\n\tcvShuffleParameter: FeatureNodeParameter | null;\r\n\tcvRandomStateParameter: FeatureNodeParameter | null;\r\n\tcvRefitStrategyParameter: FeatureNodeParameter | null;\r\n\tonSaveDraftConfig?: (options?: { closeModal?: boolean }) => void | Promise<void>;\r\n};\r\n\r\ntype PrimaryMetric = {\r\n\tlabel: string;\r\n\tvalue: number;\r\n};\r\n\r\nconst STATUS_LABEL: Record<string, string> = {\r\n\tqueued: 'Queued',\r\n\trunning: 'Running',\r\n\tsucceeded: 'Succeeded',\r\n\tfailed: 'Failed',\r\n\tcancelled: 'Cancelled',\r\n};\r\n\r\nconst METRIC_PREFERENCE = {\r\n\tclassification: ['accuracy', 'f1_weighted', 'roc_auc', 'precision_weighted', 'recall_weighted'],\r\n\tregression: ['rmse', 'mae', 'r2'],\r\n\tfallback: ['rmse', 'mae', 'r2', 'accuracy', 'f1_weighted', 'roc_auc'],\r\n};\r\n\r\nconst filterHyperparametersByFields = (\r\n\tvalues: Record<string, any> | null | undefined,\r\n\tfieldNames: Set<string>\r\n): Record<string, any> => {\r\n\tif (!values) {\r\n\t\treturn {};\r\n\t}\r\n\tconst filtered: Record<string, any> = {};\r\n\tObject.entries(values).forEach(([key, value]) => {\r\n\t\tif (fieldNames.has(key)) {\r\n\t\t\tfiltered[key] = value;\r\n\t\t}\r\n\t});\r\n\treturn filtered;\r\n};\r\n\r\nconst valuesEqual = (first: any, second: any): boolean => {\r\n\tif (first === second) {\r\n\t\treturn true;\r\n\t}\r\n\tif (typeof first === 'number' && typeof second === 'number' && Number.isNaN(first) && Number.isNaN(second)) {\r\n\t\treturn true;\r\n\t}\r\n\tif (Array.isArray(first) && Array.isArray(second)) {\r\n\t\tif (first.length !== second.length) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn first.every((item, index) => valuesEqual(item, second[index]));\r\n\t}\r\n\tif (first && second && typeof first === 'object' && typeof second === 'object') {\r\n\t\ttry {\r\n\t\t\treturn JSON.stringify(first) === JSON.stringify(second);\r\n\t\t} catch (error) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\treturn false;\r\n};\r\n\r\nconst sanitizeHyperparametersForPayload = (\r\n\tvalues: Record<string, any> | null | undefined,\r\n\tfieldNames: Set<string>,\r\n\tfieldMap?: Record<string, ModelHyperparameterField>\r\n): Record<string, any> => {\r\n\tif (!values) {\r\n\t\treturn {};\r\n\t}\r\n\tconst sanitized: Record<string, any> = {};\r\n\tObject.entries(values).forEach(([key, rawValue]) => {\r\n\t\tif (!fieldNames.has(key)) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (rawValue === '' || rawValue === null || rawValue === undefined) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconst field = fieldMap?.[key];\r\n\t\tlet value = rawValue;\r\n\t\tif (field) {\r\n\t\t\tif (typeof value === 'string') {\r\n\t\t\t\tconst trimmedValue = value.trim();\r\n\t\t\t\tif (!trimmedValue) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (field.type === 'select') {\r\n\t\t\t\t\tvalue = trimmedValue;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (field.name === 'multi_class' && typeof value === 'string') {\r\n\t\t\t\tconst normalizedMulti = value.trim().toLowerCase();\r\n\t\t\t\tif (normalizedMulti === 'auto') {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (normalizedMulti === 'ovr' || normalizedMulti === 'multinomial') {\r\n\t\t\t\t\tvalue = normalizedMulti;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (field.default !== undefined) {\r\n\t\t\t\tif (typeof field.default === 'string' && typeof value === 'string') {\r\n\t\t\t\t\tconst defaultTrimmed = field.default.trim();\r\n\t\t\t\t\tconst valueTrimmed = value.trim();\r\n\t\t\t\t\tif (defaultTrimmed === valueTrimmed) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (valuesEqual(field.default, value)) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tsanitized[key] = value;\r\n\t});\r\n\treturn sanitized;\r\n};\r\n\r\nconst isRecord = (value: unknown): value is Record<string, any> => {\r\n\treturn Boolean(value) && typeof value === 'object' && !Array.isArray(value);\r\n};\r\n\r\nconst cloneJson = <T,>(value: T): T => {\r\n\ttry {\r\n\t\treturn JSON.parse(JSON.stringify(value));\r\n\t} catch (error) {\r\n\t\treturn value;\r\n\t}\r\n};\r\n\r\nconst resolveMetricPreference = (metrics: Record<string, any> | null | undefined): string[] => {\r\n\tif (!metrics) {\r\n\t\treturn METRIC_PREFERENCE.fallback;\r\n\t}\r\n\tconst modelType = String(metrics.model_type ?? metrics.modelType ?? '').toLowerCase();\r\n\tif (modelType.includes('regressor')) {\r\n\t\treturn METRIC_PREFERENCE.regression;\r\n\t}\r\n\tif (modelType.includes('classifier') || modelType.includes('classification')) {\r\n\t\treturn METRIC_PREFERENCE.classification;\r\n\t}\r\n\tconst hinted = String(metrics.problem_type ?? metrics.problemType ?? '').toLowerCase();\r\n\tif (hinted === 'regression') {\r\n\t\treturn METRIC_PREFERENCE.regression;\r\n\t}\r\n\tif (hinted === 'classification') {\r\n\t\treturn METRIC_PREFERENCE.classification;\r\n\t}\r\n\treturn METRIC_PREFERENCE.fallback;\r\n};\r\n\r\nconst pickPrimaryMetric = (metrics: Record<string, any> | null | undefined): PrimaryMetric | null => {\r\n\tif (!metrics) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\tconst metricBuckets: Array<{ dataset: Record<string, any>; labelPrefix: string }> = [];\r\n\tconst cvMean = metrics?.cross_validation?.metrics?.mean;\r\n\tif (isRecord(cvMean) && metrics?.cross_validation?.status === 'completed') {\r\n\t\tmetricBuckets.push({ dataset: cvMean, labelPrefix: 'CV mean ' });\r\n\t}\r\n\r\n\tconst candidateBuckets = [metrics.test, metrics.validation, metrics.train];\r\n\tfor (const bucket of candidateBuckets) {\r\n\t\tif (isRecord(bucket)) {\r\n\t\t\tmetricBuckets.push({ dataset: bucket, labelPrefix: '' });\r\n\t\t}\r\n\t}\r\n\r\n\tconst orderedKeys = resolveMetricPreference(metrics);\r\n\r\n\tfor (const bucket of metricBuckets) {\r\n\t\tfor (const key of orderedKeys) {\r\n\t\t\tconst value = bucket.dataset[key];\r\n\t\t\tif (typeof value === 'number' && Number.isFinite(value)) {\r\n\t\t\t\tconst label = bucket.labelPrefix ? `${bucket.labelPrefix}${key}` : key;\r\n\t\t\t\treturn { label, value };\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfor (const bucket of metricBuckets) {\r\n\t\tfor (const [key, value] of Object.entries(bucket.dataset)) {\r\n\t\t\tif (typeof value === 'number' && Number.isFinite(value)) {\r\n\t\t\t\tconst label = bucket.labelPrefix ? `${bucket.labelPrefix}${key}` : key;\r\n\t\t\t\treturn { label, value };\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\treturn null;\r\n};\r\n\r\nconst formatMetricValue = (value: number): string => {\r\n\tif (!Number.isFinite(value)) {\r\n\t\treturn '';\r\n\t}\r\n\tif (Math.abs(value) >= 1000) {\r\n\t\treturn value.toFixed(0);\r\n\t}\r\n\tif (Math.abs(value) >= 100) {\r\n\t\treturn value.toFixed(1);\r\n\t}\r\n\tif (Math.abs(value) >= 10) {\r\n\t\treturn value.toFixed(2);\r\n\t}\r\n\treturn value.toFixed(3);\r\n};\r\n\r\nexport const ModelTrainingSection: React.FC<ModelTrainingSectionProps> = ({\r\n\tnodeId,\r\n\tsourceId,\r\n\tgraph,\r\n\tconfig,\r\n\truntimeConfig,\r\n\tcvConfig,\r\n\tdraftConfigState,\r\n\trenderParameterField,\r\n\tmodelTypeParameter,\r\n\tmodelTypeOptions,\r\n\thyperparametersParameter,\r\n\tcvEnabledParameter,\r\n\tcvStrategyParameter,\r\n\tcvFoldsParameter,\r\n\tcvShuffleParameter,\r\n\tcvRandomStateParameter,\r\n\tcvRefitStrategyParameter,\r\n\tonSaveDraftConfig,\r\n}) => {\r\n\tconst queryClient = useQueryClient();\r\n\tconst [pipelineId, setPipelineId] = useState<string | null>(null);\r\n\tconst [pipelineError, setPipelineError] = useState<string | null>(null);\r\n\tconst [lastCreatedJob, setLastCreatedJob] = useState<TrainingJobResponse | null>(null);\r\n\tconst [lastCreatedJobCount, setLastCreatedJobCount] = useState<number>(0);\r\n\tconst [hyperparamValues, setHyperparamValues] = useState<Record<string, any>>({});\r\n\tconst [showAdvanced, setShowAdvanced] = useState(false);\r\n\tconst advancedInitializedRef = useRef(false);\r\n\tconst [pipelineIdFromSavedConfig, setPipelineIdFromSavedConfig] = useState<string | null>(null);\r\n\tconst [hasDraftChanges, setHasDraftChanges] = useState(false);\r\n\tconst [isPresetModalOpen, setPresetModalOpen] = useState(false);\r\n\tconst [lastAppliedPresetId, setLastAppliedPresetId] = useState<string | null>(null);\r\n\tconst [applyStatus, setApplyStatus] = useState<{ message: string; tone: 'info' | 'warning' | 'success' } | null>(null);\r\n\tconst [showScalingDetails, setShowScalingDetails] = useState(false);\r\n\r\n\tconst targetColumn = (config?.targetColumn ?? '').trim();\r\n\tconst problemType = config?.problemType === 'regression' ? 'regression' : 'classification';\r\n\tconst modelType = (runtimeConfig?.modelType ?? '').trim();\r\n\tconst hyperparameters = runtimeConfig?.hyperparameters ?? null;\r\n\tconst hyperparametersError = runtimeConfig?.hyperparametersError ?? null;\r\n\tconst cvEnabled = Boolean(cvConfig?.enabled);\r\n\tconst cvStrategy = cvConfig?.strategy ?? 'auto';\r\n\tconst cvFolds = typeof cvConfig?.folds === 'number' ? cvConfig.folds : 0;\r\n\tconst cvShuffle = Boolean(cvConfig?.shuffle);\r\n\tconst cvRandomState = cvConfig?.randomState ?? null;\r\n\tconst cvRefitStrategy = cvConfig?.refitStrategy ?? 'train_plus_validation';\r\n\r\n\tconst filteredModelTypeParameter = useMemo(() => {\r\n\t\tif (!modelTypeParameter) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tif (!modelTypeOptions.length) {\r\n\t\t\treturn modelTypeParameter;\r\n\t\t}\r\n\t\treturn {\r\n\t\t\t...modelTypeParameter,\r\n\t\t\toptions: modelTypeOptions,\r\n\t\t};\r\n\t}, [modelTypeOptions, modelTypeParameter]);\r\n\r\n\t// Fetch hyperparameter schema for the selected model\r\n\tconst hyperparamQuery = useQuery<ModelHyperparametersResponse, Error>({\r\n\t\tqueryKey: ['model-hyperparameters', modelType],\r\n\t\tqueryFn: () => fetchModelHyperparameters(modelType),\r\n\t\tenabled: Boolean(modelType),\r\n\t\tstaleTime: 5 * 60 * 1000, // Cache for 5 minutes\r\n\t});\r\n\r\n\t// Fetch best hyperparameters from tuning for the selected model type\r\n\tconst bestParamsQuery = useQuery<BestHyperparametersResponse, Error>({\r\n\t\tqueryKey: ['best-hyperparameters', modelType, pipelineIdFromSavedConfig, sourceId],\r\n\t\tqueryFn: () => fetchBestHyperparameters(modelType, {\r\n\t\t\tpipelineId: pipelineIdFromSavedConfig || undefined,\r\n\t\t\tdatasetSourceId: sourceId || undefined,\r\n\t\t}),\r\n\t\tenabled: Boolean(modelType && sourceId),\r\n\t\tstaleTime: 30 * 1000, // Cache for 30 seconds\r\n\t\tretry: 1,\r\n\t});\r\n\r\n\tconst hyperparamFields = hyperparamQuery.data?.fields ?? [];\r\n\tconst hyperparamDefaults = hyperparamQuery.data?.defaults ?? {};\r\n\tconst allowedHyperparamNames = useMemo(() => {\r\n\t\tif (!hyperparamFields.length) {\r\n\t\t\treturn new Set<string>();\r\n\t\t}\r\n\t\treturn new Set<string>(hyperparamFields.map((field) => field.name));\r\n\t}, [hyperparamFields]);\r\n\tconst hyperparamFieldMap = useMemo(() => {\r\n\t\tif (!hyperparamFields.length) {\r\n\t\t\treturn {} as Record<string, ModelHyperparameterField>;\r\n\t\t}\r\n\t\treturn hyperparamFields.reduce((acc, field) => {\r\n\t\t\tif (field?.name) {\r\n\t\t\t\tacc[field.name] = field;\r\n\t\t\t}\r\n\t\t\treturn acc;\r\n\t\t}, {} as Record<string, ModelHyperparameterField>);\r\n\t}, [hyperparamFields]);\r\n\tconst filteredRuntimeHyperparams = useMemo(() => {\r\n\t\tif (!modelType || !hyperparameters) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tif (allowedHyperparamNames.size === 0) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tconst filtered = filterHyperparametersByFields(hyperparameters, allowedHyperparamNames);\r\n\t\treturn Object.keys(filtered).length > 0 ? filtered : null;\r\n\t}, [allowedHyperparamNames, hyperparameters, modelType]);\r\n\r\n\tuseEffect(() => {\r\n\t\tsetHyperparamValues({});\r\n\t\tsetShowAdvanced(false);\r\n\t\tadvancedInitializedRef.current = false;\r\n\t}, [modelType]);\r\n\r\n\t// Hydrate hyperparameters from persisted runtime configuration\r\n\tuseEffect(() => {\r\n\t\tif (!filteredRuntimeHyperparams) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tsetHyperparamValues((prev) => {\r\n\t\t\tconst prevKeys = Object.keys(prev);\r\n\t\t\tconst nextKeys = Object.keys(filteredRuntimeHyperparams);\r\n\t\t\tconst isSame =\r\n\t\t\t\tprevKeys.length === nextKeys.length && nextKeys.every((key) => Object.is(prev[key], filteredRuntimeHyperparams[key]));\r\n\t\t\tif (isSame) {\r\n\t\t\t\treturn prev;\r\n\t\t\t}\r\n\t\t\treturn filteredRuntimeHyperparams;\r\n\t\t});\r\n\t\tif (!advancedInitializedRef.current) {\r\n\t\t\tsetShowAdvanced(true);\r\n\t\t\tadvancedInitializedRef.current = true;\r\n\t\t}\r\n\t}, [filteredRuntimeHyperparams]);\r\n\r\n\t// Fall back to hyperparameter defaults when nothing is persisted\r\n\tuseEffect(() => {\r\n\t\tif (!modelType) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (filteredRuntimeHyperparams) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (allowedHyperparamNames.size === 0) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (!hyperparamDefaults || Object.keys(hyperparamDefaults).length === 0) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconst filteredDefaults = filterHyperparametersByFields(hyperparamDefaults, allowedHyperparamNames);\r\n\t\tif (Object.keys(filteredDefaults).length === 0) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tsetHyperparamValues((prev) => {\r\n\t\t\tif (Object.keys(prev).length > 0) {\r\n\t\t\t\treturn prev;\r\n\t\t\t}\r\n\t\t\treturn filteredDefaults;\r\n\t\t});\r\n\t}, [allowedHyperparamNames, filteredRuntimeHyperparams, hyperparamDefaults, modelType]);\r\n\r\n\tconst sanitizedHyperparameters = useMemo(() => {\r\n\t\tif (allowedHyperparamNames.size === 0) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tconst sanitized = sanitizeHyperparametersForPayload(\r\n\t\t\thyperparamValues,\r\n\t\t\tallowedHyperparamNames,\r\n\t\t\thyperparamFieldMap\r\n\t\t);\r\n\t\treturn Object.keys(sanitized).length > 0 ? sanitized : null;\r\n\t}, [allowedHyperparamNames, hyperparamValues]);\r\n\r\n\tconst handleToggleAdvanced = useCallback(() => {\r\n\t\tsetShowAdvanced((prev) => {\r\n\t\t\tconst next = !prev;\r\n\t\t\tif (next) {\r\n\t\t\t\tadvancedInitializedRef.current = true;\r\n\t\t\t}\r\n\t\t\treturn next;\r\n\t\t});\r\n\t}, []);\r\n\r\n\tconst graphPayload = useMemo<FeatureGraph | null>(() => {\r\n\t\tif (!graph || !Array.isArray(graph.nodes) || !Array.isArray(graph.edges)) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\treturn {\r\n\t\t\tnodes: graph.nodes,\r\n\t\t\tedges: graph.edges,\r\n\t\t};\r\n\t}, [graph]);\r\n\r\n\tconst graphWithDraftConfig = useMemo<FeatureGraph | null>(() => {\r\n\t\tif (!graphPayload) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tif (!draftConfigState || Object.keys(draftConfigState).length === 0) {\r\n\t\t\treturn graphPayload;\r\n\t\t}\r\n\t\tconst clonedGraph = cloneJson(graphPayload);\r\n\t\tif (!clonedGraph || !Array.isArray(clonedGraph.nodes)) {\r\n\t\t\treturn clonedGraph;\r\n\t\t}\r\n\t\tclonedGraph.nodes = clonedGraph.nodes.map((node: any) => {\r\n\t\t\tif (!node || node.id !== nodeId) {\r\n\t\t\t\treturn node;\r\n\t\t\t}\r\n\t\t\tconst existingData = node?.data ?? {};\r\n\t\t\tconst existingConfig = existingData?.config ?? {};\r\n\t\t\tconst mergedConfig = { ...existingConfig, ...draftConfigState };\r\n\t\t\treturn {\r\n\t\t\t\t...node,\r\n\t\t\t\tdata: {\r\n\t\t\t\t\t...existingData,\r\n\t\t\t\t\tconfig: mergedConfig,\r\n\t\t\t\t\tisConfigured: true,\r\n\t\t\t\t},\r\n\t\t\t};\r\n\t\t});\r\n\t\treturn clonedGraph;\r\n\t}, [draftConfigState, graphPayload, nodeId]);\r\n\r\n\t// Compute pipeline ID from saved config (ignoring drafts)\r\n\tuseEffect(() => {\r\n\t\tlet cancelled = false;\r\n\t\tif (!sourceId || !graphPayload) {\r\n\t\t\tsetPipelineIdFromSavedConfig(null);\r\n\t\t\treturn () => {\r\n\t\t\t\tcancelled = true;\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\tgeneratePipelineId(sourceId, graphPayload)\r\n\t\t\t.then((value) => {\r\n\t\t\t\tif (!cancelled) {\r\n\t\t\t\t\tsetPipelineIdFromSavedConfig(value);\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch(() => {\r\n\t\t\t\tif (!cancelled) {\r\n\t\t\t\t\tsetPipelineIdFromSavedConfig(null);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\treturn () => {\r\n\t\t\tcancelled = true;\r\n\t\t};\r\n\t}, [graphPayload, sourceId]);\r\n\r\n\t// Compute pipeline ID including draft changes\r\n\tuseEffect(() => {\r\n\t\tlet cancelled = false;\r\n\t\tsetPipelineError(null);\r\n\r\n\t\tconst graphForHash = graphWithDraftConfig ?? graphPayload;\r\n\t\tif (!sourceId || !graphForHash) {\r\n\t\t\tsetPipelineId(null);\r\n\t\t\treturn () => {\r\n\t\t\t\tcancelled = true;\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\tgeneratePipelineId(sourceId, graphForHash)\r\n\t\t\t.then((value) => {\r\n\t\t\t\tif (!cancelled) {\r\n\t\t\t\t\tsetPipelineId(value);\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch((error: Error) => {\r\n\t\t\t\tif (!cancelled) {\r\n\t\t\t\t\tsetPipelineError(error?.message ?? 'Unable to compute pipeline ID');\r\n\t\t\t\t\tsetPipelineId(null);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\treturn () => {\r\n\t\t\tcancelled = true;\r\n\t\t};\r\n\t}, [graphPayload, graphWithDraftConfig, sourceId]);\r\n\r\n\t// Detect if draft config changes would alter the pipeline ID\r\n\tuseEffect(() => {\r\n\t\tif (!pipelineId || !pipelineIdFromSavedConfig) {\r\n\t\t\tsetHasDraftChanges(false);\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tsetHasDraftChanges(pipelineId !== pipelineIdFromSavedConfig);\r\n\t}, [pipelineId, pipelineIdFromSavedConfig]);\r\n\r\n\tconst trainingJobsQueryKey = useMemo(() => {\r\n\t\treturn ['feature-canvas', 'training-jobs', sourceId ?? 'none', pipelineId ?? 'pending', nodeId];\r\n\t}, [nodeId, pipelineId, sourceId]);\r\n\r\n\tconst tuningJobsQueryKey = useMemo(() => {\r\n\t\treturn ['feature-canvas', 'tuning-jobs', sourceId ?? 'none', pipelineId ?? 'pending', nodeId];\r\n\t}, [nodeId, pipelineId, sourceId]);\r\n\r\n\tconst shouldFetchJobs = Boolean(sourceId && nodeId);\r\n\r\n\tconst tuningJobsQuery = useQuery<HyperparameterTuningJobListResponse, Error>({\r\n\t\tqueryKey: tuningJobsQueryKey,\r\n\t\tqueryFn: async () => {\r\n\t\t\tconst baseParams: FetchHyperparameterTuningJobsOptions = {\r\n\t\t\t\tdatasetSourceId: sourceId || undefined,\r\n\t\t\t\tlimit: 5,\r\n\t\t\t};\r\n\r\n\t\t\tif (pipelineId) {\r\n\t\t\t\tconst scoped = await fetchHyperparameterTuningJobs({ ...baseParams, pipelineId });\r\n\t\t\t\tif ((scoped?.jobs?.length ?? 0) > 0) {\r\n\t\t\t\t\treturn scoped;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn fetchHyperparameterTuningJobs(baseParams);\r\n\t\t},\r\n\t\tenabled: shouldFetchJobs,\r\n\t\tretry: (failureCount, error) => {\r\n\t\t\tif (error.message.includes('Sign in')) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\treturn failureCount < 2;\r\n\t\t},\r\n\t\trefetchInterval: (query) => {\r\n\t\t\tconst currentData = query.state.data as HyperparameterTuningJobListResponse | undefined;\r\n\t\t\tconst jobList = currentData?.jobs ?? [];\r\n\t\t\tconst hasActiveJob = jobList.some(\r\n\t\t\t\t(job: HyperparameterTuningJobSummary) => job.status === 'queued' || job.status === 'running'\r\n\t\t\t);\r\n\t\t\treturn hasActiveJob ? 5000 : false;\r\n\t\t},\r\n\t});\r\n\r\n\t\tconst trainingJobsQuery = useQuery<TrainingJobListResponse, Error>({\r\n\t\tqueryKey: trainingJobsQueryKey,\r\n\t\tqueryFn: async () => {\r\n\t\t\tconst baseParams: FetchTrainingJobsOptions = {\r\n\t\t\t\tdatasetSourceId: sourceId || undefined,\r\n\t\t\t\tnodeId,\r\n\t\t\t\tlimit: 5,\r\n\t\t\t};\r\n\r\n\t\t\tif (pipelineId) {\r\n\t\t\t\tconst scoped = await fetchTrainingJobs({ ...baseParams, pipelineId });\r\n\t\t\t\tif ((scoped?.jobs?.length ?? 0) > 0) {\r\n\t\t\t\t\treturn scoped;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn fetchTrainingJobs(baseParams);\r\n\t\t},\r\n\t\tenabled: shouldFetchJobs,\r\n\t\tretry: (failureCount, error) => {\r\n\t\t\t// Don't retry on authentication errors\r\n\t\t\tif (error.message.includes('Sign in')) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\treturn failureCount < 2;\r\n\t\t},\r\n\t\trefetchInterval: (query) => {\r\n\t\t\tconst currentData = query.state.data as TrainingJobListResponse | undefined;\r\n\t\t\tconst jobList = currentData?.jobs ?? [];\r\n\t\t\tconst hasActiveJob = jobList.some(\r\n\t\t\t\t(job: TrainingJobSummary) => job.status === 'queued' || job.status === 'running'\r\n\t\t\t);\r\n\t\t\treturn hasActiveJob ? 5000 : false;\r\n\t\t},\r\n\t});\r\n\r\n\tconst {\r\n\t\tmutateAsync: enqueueTrainingJob,\r\n\t\tisPending: isCreatingJob,\r\n\t\terror: createJobError,\r\n\t} = useMutation({\r\n\t\tmutationFn: createTrainingJob,\r\n\t\tonSuccess: (result) => {\r\n\t\t\tconst jobCount = Array.isArray(result.jobs) ? result.jobs.length : 0;\r\n\t\t\tconst firstJob = jobCount > 0 ? result.jobs[0] : null;\r\n\t\t\tsetLastCreatedJob(firstJob);\r\n\t\t\tsetLastCreatedJobCount(jobCount);\r\n\t\t\tqueryClient.invalidateQueries({ queryKey: trainingJobsQueryKey });\r\n\t\t},\r\n\t});\r\n\r\n\tconst tuningJobsError = tuningJobsQuery.error as Error | null;\r\n\tconst isTuningJobsLoading = tuningJobsQuery.isLoading || tuningJobsQuery.isFetching;\r\n\tconst tuningJobs: HyperparameterTuningJobSummary[] = tuningJobsQuery.data?.jobs ?? [];\r\n\r\n\tconst bestParamsData = bestParamsQuery.data;\r\n\r\n\tconst buildPresetParams = useCallback(\r\n\t\t(rawParams: Record<string, any> | null | undefined) => {\r\n\t\t\tif (!rawParams) {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t\tconst rawKeys = Object.keys(rawParams);\r\n\t\t\tif (rawKeys.length === 0) {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t\tif (allowedHyperparamNames.size === 0) {\r\n\t\t\t\treturn { params: rawParams, hasUnmapped: false };\r\n\t\t\t}\r\n\t\t\tconst filtered = filterHyperparametersByFields(rawParams, allowedHyperparamNames);\r\n\t\t\tconst filteredKeys = Object.keys(filtered);\r\n\t\t\tif (filteredKeys.length > 0) {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tparams: filtered,\r\n\t\t\t\t\thasUnmapped: filteredKeys.length !== rawKeys.length,\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\treturn {\r\n\t\t\t\tparams: rawParams,\r\n\t\t\t\thasUnmapped: true,\r\n\t\t\t};\r\n\t\t},\r\n\t\t[allowedHyperparamNames],\r\n\t);\r\n\r\n\tconst succeededTuningJobs = useMemo(() => {\r\n\t\tif (!tuningJobs.length) {\r\n\t\t\treturn [] as HyperparameterTuningJobSummary[];\r\n\t\t}\r\n\t\treturn tuningJobs.filter((job) => job.status === 'succeeded');\r\n\t}, [tuningJobs]);\r\n\r\n\tconst hyperparamPresets = useMemo<HyperparamPreset[]>(() => {\r\n\t\tif (!modelType) {\r\n\t\t\treturn [];\r\n\t\t}\r\n\t\tconst presets: HyperparamPreset[] = [];\r\n\t\tconst seenJobIds = new Set<string>();\r\n\t\tconst normalizedTarget = targetColumn ? targetColumn.trim().toLowerCase() : '';\r\n\t\tconst matchesTarget = (candidateTarget?: string | null) => {\r\n\t\t\tif (!normalizedTarget) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\tif (!candidateTarget) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\treturn candidateTarget.trim().toLowerCase() === normalizedTarget;\r\n\t\t};\r\n\r\n\t\tif (bestParamsData?.available && bestParamsData.best_params && (!bestParamsData.model_type || bestParamsData.model_type === modelType)) {\r\n\t\t\tconst paramInfo = buildPresetParams(bestParamsData.best_params);\r\n\t\t\tif (paramInfo) {\r\n\t\t\t\tconst jobId = bestParamsData.job_id ?? null;\r\n\t\t\t\tif (!jobId || !seenJobIds.has(jobId)) {\r\n\t\t\t\t\tconst labelSegments: string[] = ['Most recent tuned run'];\r\n\t\t\t\t\tif (bestParamsData.run_number) {\r\n\t\t\t\t\t\tlabelSegments.push(`#${bestParamsData.run_number}`);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconst presetId = `best-api-${jobId ?? modelType}`;\r\n\t\t\t\t\tpresets.push({\r\n\t\t\t\t\t\tid: presetId,\r\n\t\t\t\t\t\tlabel: labelSegments.join(' '),\r\n\t\t\t\t\t\tsource: 'best-api',\r\n\t\t\t\t\t\tmodelType: bestParamsData.model_type ?? modelType,\r\n\t\t\t\t\t\tparams: paramInfo.params,\r\n\t\t\t\t\t\tjobId,\r\n\t\t\t\t\t\tnodeId: bestParamsData.node_id ?? null,\r\n\t\t\t\t\t\trunNumber: bestParamsData.run_number ?? null,\r\n\t\t\t\t\t\tscore: bestParamsData.best_score ?? null,\r\n\t\t\t\t\t\tscoring: bestParamsData.scoring ?? null,\r\n\t\t\t\t\t\tfinishedAt: bestParamsData.finished_at ?? null,\r\n\t\t\t\t\t\tsearchStrategy: bestParamsData.search_strategy ?? null,\r\n\t\t\t\t\t\tnIterations: bestParamsData.n_iterations ?? null,\r\n\t\t\t\t\t\ttargetColumn: targetColumn || null,\r\n\t\t\t\t\t\tpipelineId: bestParamsData.pipeline_id ?? null,\r\n\t\t\t\t\t\tdatasetSourceId: sourceId ?? null,\r\n\t\t\t\t\t\tdescription: paramInfo.hasUnmapped\r\n\t\t\t\t\t\t\t? 'Includes parameters outside the current template. They will be stored as custom overrides.'\r\n\t\t\t\t\t\t\t: null,\r\n\t\t\t\t\t});\r\n\t\t\t\t\tif (jobId) {\r\n\t\t\t\t\t\tseenJobIds.add(jobId);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tsucceededTuningJobs.forEach((job) => {\r\n\t\t\tif (!job.best_params) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (job.model_type !== modelType) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (sourceId && job.dataset_source_id && job.dataset_source_id !== sourceId) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (seenJobIds.has(job.id)) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst paramInfo = buildPresetParams(job.best_params);\r\n\t\t\tif (!paramInfo) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst metadataTarget = typeof job.metadata?.target_column === 'string'\r\n\t\t\t\t? job.metadata.target_column\r\n\t\t\t\t: typeof job.metadata?.targetColumn === 'string'\r\n\t\t\t\t? job.metadata.targetColumn\r\n\t\t\t\t: null;\r\n\t\t\tif (!matchesTarget(metadataTarget)) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst presetId = `job-${job.id}`;\r\n\t\t\tconst label = (() => {\r\n\t\t\t\tconst rawLabel = typeof job.metadata?.label === 'string' ? job.metadata.label.trim() : '';\r\n\t\t\t\tif (rawLabel) {\r\n\t\t\t\t\treturn rawLabel;\r\n\t\t\t\t}\r\n\t\t\t\tif (job.run_number) {\r\n\t\t\t\t\treturn `Run ${job.run_number}`;\r\n\t\t\t\t}\r\n\t\t\t\treturn `Job ${job.id.slice(0, 6)}`;\r\n\t\t\t})();\r\n\t\t\tconst scoringMetric = typeof job.metadata?.scoring === 'string'\r\n\t\t\t\t? job.metadata.scoring\r\n\t\t\t\t: typeof job.metrics?.scoring === 'string'\r\n\t\t\t\t? job.metrics.scoring\r\n\t\t\t\t: null;\r\n\t\t\tconst iterationCount = typeof job.metadata?.n_iterations === 'number'\r\n\t\t\t\t? job.metadata.n_iterations\r\n\t\t\t\t: null;\r\n\t\t\tpresets.push({\r\n\t\t\t\tid: presetId,\r\n\t\t\t\tlabel,\r\n\t\t\t\tsource: 'tuning-job',\r\n\t\t\t\tmodelType: job.model_type,\r\n\t\t\t\tparams: paramInfo.params,\r\n\t\t\t\tjobId: job.id,\r\n\t\t\t\tnodeId: job.node_id,\r\n\t\t\t\trunNumber: job.run_number ?? null,\r\n\t\t\t\tscore: job.best_score ?? null,\r\n\t\t\t\tscoring: scoringMetric,\r\n\t\t\t\tfinishedAt: job.updated_at ?? job.created_at ?? null,\r\n\t\t\t\tsearchStrategy: job.search_strategy ?? null,\r\n\t\t\t\tnIterations: iterationCount,\r\n\t\t\t\ttargetColumn: metadataTarget ?? (targetColumn || null),\r\n\t\t\t\tpipelineId: job.pipeline_id ?? null,\r\n\t\t\t\tdatasetSourceId: job.dataset_source_id ?? null,\r\n\t\t\t\tdescription: paramInfo.hasUnmapped\r\n\t\t\t\t\t? 'Some tuned parameters fall outside the current template and will be saved as custom overrides.'\r\n\t\t\t\t\t: null,\r\n\t\t\t});\r\n\t\t\tseenJobIds.add(job.id);\r\n\t\t});\r\n\r\n\t\tpresets.sort((a, b) => {\r\n\t\t\tconst aTime = a.finishedAt ? Date.parse(a.finishedAt) : 0;\r\n\t\t\tconst bTime = b.finishedAt ? Date.parse(b.finishedAt) : 0;\r\n\t\t\tif (aTime !== bTime) {\r\n\t\t\t\treturn bTime - aTime;\r\n\t\t\t}\r\n\t\t\treturn (b.runNumber ?? 0) - (a.runNumber ?? 0);\r\n\t\t});\r\n\r\n\t\treturn presets;\r\n\t}, [\r\n\t\tbestParamsData,\r\n\t\tbuildPresetParams,\r\n\t\tmodelType,\r\n\t\tsourceId,\r\n\t\ttargetColumn,\r\n\t\tsucceededTuningJobs,\r\n\t]);\r\n\r\n\tconst primaryPreset = hyperparamPresets[0] ?? null;\r\n\tconst hasPresetOptions = hyperparamPresets.length > 0;\r\n\tconst applyButtonDisabled = !primaryPreset;\r\n\tconst browsePresetsDisabled = !hasPresetOptions;\r\n\r\n\tconst latestTuningJob = useMemo<HyperparameterTuningJobSummary | null>(() => {\r\n\t\tif (succeededTuningJobs.length) {\r\n\t\t\treturn succeededTuningJobs\r\n\t\t\t\t.slice()\r\n\t\t\t\t.sort((a, b) => {\r\n\t\t\t\t\tconst aTime = Date.parse(a.updated_at || a.created_at || '0');\r\n\t\t\t\t\tconst bTime = Date.parse(b.updated_at || b.created_at || '0');\r\n\t\t\t\t\treturn bTime - aTime;\r\n\t\t\t\t})[0];\r\n\t\t}\r\n\t\tif (tuningJobs.length) {\r\n\t\t\treturn tuningJobs\r\n\t\t\t\t.slice()\r\n\t\t\t\t.sort((a, b) => {\r\n\t\t\t\t\tconst aTime = Date.parse(a.updated_at || a.created_at || '0');\r\n\t\t\t\t\tconst bTime = Date.parse(b.updated_at || b.created_at || '0');\r\n\t\t\t\t\treturn bTime - aTime;\r\n\t\t\t\t})[0];\r\n\t\t}\r\n\t\treturn null;\r\n\t}, [succeededTuningJobs, tuningJobs]);\r\n\r\n\tconst latestTuningTimestamp = latestTuningJob\r\n\t\t? latestTuningJob.updated_at || latestTuningJob.created_at || null\r\n\t\t: null;\r\n\tconst latestTuningRelative = latestTuningTimestamp ? formatRelativeTime(latestTuningTimestamp) : null;\r\n\tconst latestTuningRunNumber = latestTuningJob?.run_number ?? null;\r\n\tconst primaryPresetRelative = primaryPreset?.finishedAt ? formatRelativeTime(primaryPreset.finishedAt) : null;\r\n\tconst primaryPresetScoreLabel = primaryPreset && primaryPreset.scoring && typeof primaryPreset.score === 'number' && Number.isFinite(primaryPreset.score)\r\n\t\t? `${primaryPreset.scoring}: ${formatMetricValue(primaryPreset.score)}`\r\n\t\t: null;\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!hyperparamPresets.length) {\r\n\t\t\tif (lastAppliedPresetId) {\r\n\t\t\t\tsetLastAppliedPresetId(null);\r\n\t\t\t}\r\n\t\t\tif (applyStatus?.tone === 'success') {\r\n\t\t\t\tsetApplyStatus(null);\r\n\t\t\t}\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (lastAppliedPresetId && !hyperparamPresets.some((preset) => preset.id === lastAppliedPresetId)) {\r\n\t\t\tsetLastAppliedPresetId(null);\r\n\t\t\tsetApplyStatus(null);\r\n\t\t}\r\n\t}, [applyStatus, hyperparamPresets, lastAppliedPresetId]);\r\n\r\n\tconst applyPreset = useCallback(\r\n\t\t(preset: HyperparamPreset, messageOverride?: string) => {\r\n\t\t\tif (!preset || Object.keys(preset.params ?? {}).length === 0) {\r\n\t\t\t\tsetApplyStatus({\r\n\t\t\t\t\tmessage: 'Selected preset does not include any hyperparameters to apply.',\r\n\t\t\t\t\ttone: 'warning',\r\n\t\t\t\t});\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tsetHyperparamValues(() => cloneJson(preset.params));\r\n\t\t\tsetShowAdvanced(true);\r\n\t\t\tadvancedInitializedRef.current = true;\r\n\t\t\tsetLastAppliedPresetId(preset.id);\r\n\t\t\tsetApplyStatus({\r\n\t\t\t\tmessage:\r\n\t\t\t\t\tmessageOverride ?? `Applied tuned parameters from ${preset.label}.`,\r\n\t\t\t\ttone: 'success',\r\n\t\t\t});\r\n\t\t},\r\n\t\t[setHyperparamValues, setShowAdvanced, setApplyStatus, setLastAppliedPresetId],\r\n\t);\r\n\r\n\tconst handleApplyBestParams = useCallback(() => {\r\n\t\tif (!primaryPreset) {\r\n\t\t\tconst message = latestTuningJob && latestTuningJob.model_type && latestTuningJob.model_type !== modelType\r\n\t\t\t\t? `Latest tuning run targeted ${latestTuningJob.model_type}. Switch the model template to reuse its parameters.`\r\n\t\t\t\t: 'No tuning job results available to apply.';\r\n\t\t\tsetApplyStatus({\r\n\t\t\t\tmessage,\r\n\t\t\t\ttone: 'warning',\r\n\t\t\t});\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconst successMessage = primaryPreset.runNumber\r\n\t\t\t? `Applied tuned parameters from run ${primaryPreset.runNumber}.`\r\n\t\t\t: `Applied tuned parameters from ${primaryPreset.label}.`;\r\n\t\tapplyPreset(primaryPreset, successMessage);\r\n\t}, [applyPreset, latestTuningJob, modelType, primaryPreset, setApplyStatus]);\r\n\r\n\tconst applyStatusColor = useMemo(() => {\r\n\t\tif (!applyStatus) {\r\n\t\t\treturn 'rgba(148, 163, 184, 0.75)';\r\n\t\t}\r\n\t\tswitch (applyStatus.tone) {\r\n\t\t\tcase 'success':\r\n\t\t\t\treturn 'rgba(134, 239, 172, 0.9)';\r\n\t\t\tcase 'warning':\r\n\t\t\t\treturn 'rgba(253, 186, 116, 0.95)';\r\n\t\t\tdefault:\r\n\t\t\t\treturn 'rgba(148, 163, 184, 0.85)';\r\n\t\t}\r\n\t}, [applyStatus]);\r\n\r\n\tconst prerequisites = useMemo(() => {\r\n\t\tconst notes: string[] = [];\r\n\t\tif (!sourceId) {\r\n\t\t\tnotes.push('Select a dataset before launching training jobs.');\r\n\t\t}\r\n\t\tif (!graphPayload || !graphPayload.nodes.length) {\r\n\t\t\tnotes.push('Connect this node to an upstream pipeline before training.');\r\n\t\t}\r\n\t\tif (!targetColumn) {\r\n\t\t\tnotes.push('Set a target column in the Train model readiness section.');\r\n\t\t}\r\n\t\tif (!modelType) {\r\n\t\t\tnotes.push('Choose a model type before enqueuing training jobs.');\r\n\t\t}\r\n\t\tif (cvEnabled && cvFolds < 2) {\r\n\t\t\tnotes.push('Cross-validation requires at least 2 folds.');\r\n\t\t}\r\n\t\tif (pipelineError) {\r\n\t\t\tnotes.push(pipelineError);\r\n\t\t}\r\n\t\tif (hyperparametersError) {\r\n\t\t\tnotes.push(hyperparametersError);\r\n\t\t}\r\n\t\treturn notes;\r\n\t}, [cvEnabled, cvFolds, graphPayload, hyperparametersError, modelType, pipelineError, sourceId, targetColumn]);\r\n\r\n\tconst jobs: TrainingJobSummary[] = trainingJobsQuery.data?.jobs ?? [];\r\n\tconst filteredJobs = useMemo(() => {\r\n\t\tif (!jobs.length) {\r\n\t\t\treturn jobs;\r\n\t\t}\r\n\t\tconst normalizedProblemType = problemType?.toLowerCase();\r\n\t\treturn jobs.filter((job) => {\r\n\t\t\tif (!normalizedProblemType) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\tconst jobProblemType = (() => {\r\n\t\t\t\tconst direct = typeof job.problem_type === 'string' ? job.problem_type : null;\r\n\t\t\t\tconst metaProblem = typeof job.metadata?.problem_type === 'string' ? job.metadata?.problem_type : null;\r\n\t\t\t\tconst resolved = typeof job.metadata?.resolved_problem_type === 'string' ? job.metadata?.resolved_problem_type : null;\r\n\t\t\t\treturn (direct || resolved || metaProblem || '').toLowerCase();\r\n\t\t\t})();\r\n\t\t\tif (jobProblemType) {\r\n\t\t\t\treturn jobProblemType === normalizedProblemType;\r\n\t\t\t}\r\n\t\t\tconst modelTypeValue = String(job.model_type || '').toLowerCase();\r\n\t\t\tif (normalizedProblemType === 'regression') {\r\n\t\t\t\treturn modelTypeValue.includes('regress');\r\n\t\t\t}\r\n\t\t\tif (normalizedProblemType === 'classification') {\r\n\t\t\t\treturn modelTypeValue.includes('classif');\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t});\r\n\t}, [jobs, problemType]);\r\n\r\n\tconst hasScalingConvergenceSignals = useMemo(() => {\r\n\t\tif (createJobError instanceof Error && hasScalingConvergenceMessage(createJobError.message)) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tif (lastCreatedJob && detectScalingConvergenceFromJob(lastCreatedJob)) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tif (jobs.some((job) => detectScalingConvergenceFromJob(job))) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tif (tuningJobs.some((job) => detectScalingConvergenceFromJob(job))) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t}, [createJobError, jobs, lastCreatedJob, tuningJobs]);\r\n\r\n\tconst scalingWarning = useScalingWarning({\r\n\t\tgraph,\r\n\t\tnodeId,\r\n\t\tmodelType,\r\n\t\tproblemType,\r\n\t\tmodelTypeOptions,\r\n\t\tenabled: hasScalingConvergenceSignals,\r\n\t});\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!scalingWarning) {\r\n\t\t\tsetShowScalingDetails(false);\r\n\t\t}\r\n\t}, [scalingWarning]);\r\n\r\n\tconst hiddenJobCount = Math.max(jobs.length - filteredJobs.length, 0);\r\n\tconst isJobsLoading = trainingJobsQuery.isLoading || trainingJobsQuery.isFetching;\r\n\tconst jobsError = trainingJobsQuery.error as Error | null;\r\n\r\n\tconst isActionDisabled =\r\n\t\tprerequisites.length > 0 || !pipelineId || !sourceId || !graphPayload || isCreatingJob;\r\n\r\n\tconst handleHyperparamChange = useCallback((name: string, value: any) => {\r\n\t\tsetHyperparamValues((prev) => ({\r\n\t\t\t...prev,\r\n\t\t\t[name]: value,\r\n\t\t}));\r\n\t}, []);\r\n\r\n\tconst renderHyperparamField = useCallback(\r\n\t\t(field: ModelHyperparameterField) => {\r\n\t\t\tconst currentValue = hyperparamValues[field.name] ?? field.default;\r\n\t\t\tconst fieldId = `hyperparam-${nodeId}-${field.name}`;\r\n\r\n\t\t\treturn (\r\n\t\t\t\t<div key={field.name} className=\"canvas-modal__parameter\">\r\n\t\t\t\t\t<label htmlFor={fieldId} className=\"canvas-modal__parameter-label\">\r\n\t\t\t\t\t\t{field.label}\r\n\t\t\t\t\t\t{field.description && (\r\n\t\t\t\t\t\t\t<span className=\"canvas-modal__parameter-description\">{field.description}</span>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</label>\r\n\t\t\t\t\t{field.type === 'number' && (\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\tid={fieldId}\r\n\t\t\t\t\t\t\ttype=\"number\"\r\n\t\t\t\t\t\t\tclassName=\"canvas-modal__parameter-input\"\r\n\t\t\t\t\t\t\tvalue={currentValue ?? ''}\r\n\t\t\t\t\t\t\tonChange={(e) => {\r\n\t\t\t\t\t\t\t\tconst val = e.target.value;\r\n\t\t\t\t\t\t\t\tif (val === '' && field.nullable) {\r\n\t\t\t\t\t\t\t\t\thandleHyperparamChange(field.name, null);\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tconst num = parseFloat(val);\r\n\t\t\t\t\t\t\t\t\tif (!isNaN(num)) {\r\n\t\t\t\t\t\t\t\t\t\thandleHyperparamChange(field.name, num);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\tmin={field.min}\r\n\t\t\t\t\t\t\tmax={field.max}\r\n\t\t\t\t\t\t\tstep={field.step}\r\n\t\t\t\t\t\t\tplaceholder={field.nullable ? 'Empty = default' : ''}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t)}\r\n\t\t\t\t\t{field.type === 'select' && (\r\n\t\t\t\t\t\t<select\r\n\t\t\t\t\t\t\tid={fieldId}\r\n\t\t\t\t\t\t\tclassName=\"canvas-modal__parameter-select\"\r\n\t\t\t\t\t\t\tvalue={currentValue ?? ''}\r\n\t\t\t\t\t\t\tonChange={(e) => handleHyperparamChange(field.name, e.target.value)}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{field.options?.map((opt) => (\r\n\t\t\t\t\t\t\t\t<option key={opt.value} value={opt.value}>\r\n\t\t\t\t\t\t\t\t\t{opt.label}\r\n\t\t\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</select>\r\n\t\t\t\t\t)}\r\n\t\t\t\t\t{field.type === 'boolean' && (\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\tid={fieldId}\r\n\t\t\t\t\t\t\ttype=\"checkbox\"\r\n\t\t\t\t\t\t\tclassName=\"canvas-modal__parameter-checkbox\"\r\n\t\t\t\t\t\t\tchecked={Boolean(currentValue)}\r\n\t\t\t\t\t\t\tonChange={(e) => handleHyperparamChange(field.name, e.target.checked)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t)}\r\n\t\t\t\t\t{field.type === 'text' && (\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\tid={fieldId}\r\n\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\tclassName=\"canvas-modal__parameter-input\"\r\n\t\t\t\t\t\t\tvalue={currentValue ?? ''}\r\n\t\t\t\t\t\t\tonChange={(e) => handleHyperparamChange(field.name, e.target.value)}\r\n\t\t\t\t\t\t\tplaceholder={field.nullable ? 'Empty = default' : ''}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t},\r\n\t\t[hyperparamValues, handleHyperparamChange, nodeId]\r\n\t);\r\n\r\n\tconst handleEnqueueTraining = useCallback(async () => {\r\n\t\tif (!pipelineId || !sourceId || !modelType) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Auto-save draft config before enqueueing to stabilize pipeline ID\r\n\t\tif (hasDraftChanges && onSaveDraftConfig) {\r\n\t\t\ttry {\r\n\t\t\t\tconst maybeResult = onSaveDraftConfig({ closeModal: false });\r\n\t\t\t\tif (maybeResult && typeof (maybeResult as Promise<unknown>).then === 'function') {\r\n\t\t\t\t\tawait (maybeResult as Promise<unknown>);\r\n\t\t\t\t}\r\n\t\t\t\tsetHasDraftChanges(false);\r\n\t\t\t} catch (error) {\r\n\t\t\t\t// Ignore save errors here; job enqueue will surface actionable issues.\r\n\t\t\t}\r\n\t\t\t// Small delay to allow state propagation\r\n\t\t\tawait new Promise((resolve) => setTimeout(resolve, 100));\r\n\t\t}\r\n\r\n\t\tconst graphForTraining = graphWithDraftConfig ?? graphPayload;\r\n\t\tif (!graphForTraining) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst metadata: Record<string, any> = {};\r\n\t\tif (targetColumn) {\r\n\t\t\tmetadata.target_column = targetColumn;\r\n\t\t}\r\n\t\tif (problemType) {\r\n\t\t\tmetadata.problem_type = problemType;\r\n\t\t}\r\n\t\tmetadata.cross_validation = {\r\n\t\t\tenabled: cvEnabled,\r\n\t\t\tstrategy: cvStrategy,\r\n\t\t\tfolds: cvFolds,\r\n\t\t\tshuffle: cvShuffle,\r\n\t\t\trandom_state: cvRandomState,\r\n\t\t\trefit_strategy: cvRefitStrategy,\r\n\t\t};\r\n\r\n\t\tconst metadataPayload = Object.keys(metadata).length ? metadata : undefined;\r\n\r\n\t\tconst enhancedGraph = cloneJson(graphForTraining);\r\n\t\tif (enhancedGraph && Array.isArray(enhancedGraph.nodes)) {\r\n\t\t\tenhancedGraph.nodes = enhancedGraph.nodes.map((node: any) => {\r\n\t\t\t\tif (!node || node.id !== nodeId) {\r\n\t\t\t\t\treturn node;\r\n\t\t\t\t}\r\n\t\t\t\tconst existingData = node?.data ?? {};\r\n\t\t\t\tconst existingConfig = existingData?.config ?? {};\r\n\t\t\t\tconst mergedConfig = draftConfigState\r\n\t\t\t\t\t? { ...existingConfig, ...draftConfigState }\r\n\t\t\t\t\t: existingConfig;\r\n\t\t\t\treturn {\r\n\t\t\t\t\t...node,\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t...existingData,\r\n\t\t\t\t\t\tconfig: mergedConfig,\r\n\t\t\t\t\t\tisConfigured: true,\r\n\t\t\t\t\t},\r\n\t\t\t\t};\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tconst requestedModelTypes = modelType ? [modelType] : [];\r\n\r\n\t\tconst payload = {\r\n\t\t\tdataset_source_id: sourceId,\r\n\t\t\tpipeline_id: pipelineId,\r\n\t\t\tnode_id: nodeId,\r\n\t\t\tmodel_type: modelType || undefined,\r\n\t\t\tmodel_types: requestedModelTypes.length ? requestedModelTypes : undefined,\r\n\t\t\thyperparameters:\r\n\t\t\t\tshowAdvanced && sanitizedHyperparameters ? cloneJson(sanitizedHyperparameters) : undefined,\r\n\t\t\tmetadata: metadataPayload,\r\n\t\t\tjob_metadata: metadataPayload,\r\n\t\t\trun_training: true,\r\n\t\t\tgraph: enhancedGraph ?? cloneJson(graphForTraining),\r\n\t\t\ttarget_node_id: nodeId,\r\n\t\t};\r\n\r\n\t\ttry {\r\n\t\t\tawait enqueueTrainingJob(payload);\r\n\t\t} catch (error) {\r\n\t\t\t// Error surfaced via createJobError and rendered below.\r\n\t\t}\r\n\t}, [cvEnabled, cvFolds, cvRandomState, cvRefitStrategy, cvShuffle, cvStrategy, draftConfigState, enqueueTrainingJob, graphPayload, graphWithDraftConfig, hasDraftChanges, modelType, nodeId, onSaveDraftConfig, pipelineId, problemType, sanitizedHyperparameters, showAdvanced, sourceId, targetColumn]);\r\n\r\n\tconst handleRefreshJobs = useCallback(() => {\r\n\t\tif (shouldFetchJobs) {\r\n\t\t\ttrainingJobsQuery.refetch();\r\n\t\t}\r\n\t}, [shouldFetchJobs, trainingJobsQuery]);\r\n\r\n\t\tconst renderJobSummary = (job: TrainingJobSummary) => {\r\n\t\t\tconst metric = pickPrimaryMetric(job.metrics ?? null);\r\n\t\t\tconst updatedLabel = job.updated_at ? formatRelativeTime(job.updated_at) : null;\r\n\t\t\tconst fallbackUpdated = job.updated_at || job.created_at;\r\n\t\t\tconst timestampLabel = fallbackUpdated\r\n\t\t\t\t? updatedLabel ?? new Date(fallbackUpdated).toLocaleString()\r\n\t\t\t\t: null;\r\n\t\t\tconst statusLabel = STATUS_LABEL[job.status] ?? job.status;\r\n\t\t\tconst jobProblemType = (\r\n\t\t\t\tjob.problem_type || job.metadata?.resolved_problem_type || job.metadata?.problem_type || ''\r\n\t\t\t).toString();\r\n\t\t\tconst cvMetadata = (job.metadata?.cross_validation ?? null) as Record<string, any> | null;\r\n\t\t\tconst cvMetrics = (job.metrics?.cross_validation ?? null) as Record<string, any> | null;\r\n\t\t\tconst jobError = typeof job.error_message === 'string' ? job.error_message.trim() : '';\r\n\r\n\t\t\tconst detailParts: string[] = [];\r\n\t\t\tdetailParts.push(`Model ${job.model_type}`);\r\n\t\t\tif (jobProblemType) {\r\n\t\t\t\tdetailParts.push(jobProblemType.charAt(0).toUpperCase() + jobProblemType.slice(1));\r\n\t\t\t}\r\n\t\t\tif (cvMetadata?.enabled) {\r\n\t\t\t\tconst strategyKey = String(cvMetadata.strategy ?? 'auto');\r\n\t\t\t\tconst strategyLabel =\r\n\t\t\t\t\tstrategyKey === 'stratified_kfold'\r\n\t\t\t\t\t\t? 'Stratified KFold'\r\n\t\t\t\t\t\t: strategyKey === 'kfold'\r\n\t\t\t\t\t\t? 'KFold'\r\n\t\t\t\t\t\t: 'Auto CV';\r\n\t\t\t\tconst foldLabel = typeof cvMetadata.folds === 'number' ? `${cvMetadata.folds} folds` : 'CV enabled';\r\n\t\t\t\tdetailParts.push(`${strategyLabel} (${foldLabel})`);\r\n\t\t\t\tif (cvMetrics?.status === 'skipped') {\r\n\t\t\t\t\tconst reason = String(cvMetrics?.reason ?? 'unknown reason').replace(/_/g, ' ');\r\n\t\t\t\t\tdetailParts.push(`CV skipped (${reason})`);\r\n\t\t\t\t}\r\n\t\t\t} else if (cvMetrics?.status === 'skipped') {\r\n\t\t\t\tconst reason = String(cvMetrics?.reason ?? 'unknown reason').replace(/_/g, ' ');\r\n\t\t\t\tdetailParts.push(`CV skipped (${reason})`);\r\n\t\t\t}\r\n\t\t\tif (metric) {\r\n\t\t\t\tdetailParts.push(`${metric.label}: ${formatMetricValue(metric.value)}`);\r\n\t\t\t}\r\n\t\t\tif (job.status === 'failed' && jobError) {\r\n\t\t\t\tconst normalizedError = jobError.replace(/\\s+/g, ' ');\r\n\t\t\t\tdetailParts.push(`Error: ${normalizedError}`);\r\n\t\t\t}\r\n\t\t\tif (timestampLabel) {\r\n\t\t\t\tdetailParts.push(`Updated ${timestampLabel}`);\r\n\t\t\t}\r\n\r\n\t\t\treturn (\r\n\t\t\t\t<li key={job.id}>\r\n\t\t\t\t\t<strong>v{job.version}</strong>  {statusLabel}\r\n\t\t\t\t\t{detailParts.length > 0 ? `  ${detailParts.join('  ')}` : ''}\r\n\t\t\t\t</li>\r\n\t\t\t);\r\n\t\t};\r\n\r\n\treturn (\r\n\t\t<section className=\"canvas-modal__section\">\r\n\t\t\t<div className=\"canvas-modal__section-header\">\r\n\t\t\t\t<h3>Background training jobs</h3>\r\n\t\t\t\t<div className=\"canvas-modal__section-actions\">\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t\tclassName=\"btn btn-outline-secondary\"\r\n\t\t\t\t\t\tonClick={handleRefreshJobs}\r\n\t\t\t\t\t\tdisabled={!shouldFetchJobs || isJobsLoading}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{isJobsLoading ? 'Refreshing' : 'Refresh jobs'}\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<p className=\"canvas-modal__note\">\r\n\t\t\t\tEnqueue a background training job for this node. Jobs run via Celery, versioned per pipeline, and\r\n\t\t\t\treport metrics when finished.\r\n\t\t\t</p>\r\n\r\n\t\t\t{pipelineId && (\r\n\t\t\t\t<p className=\"canvas-modal__note canvas-modal__note--muted\">\r\n\t\t\t\t\tPipeline ID: <code>{pipelineId}</code>\r\n\t\t\t\t</p>\r\n\t\t\t)}\r\n\r\n\t\t\t{hasDraftChanges && (\r\n\t\t\t\t<p className=\"canvas-modal__note canvas-modal__note--warning\" style={{ \r\n\t\t\t\t\tbackground: 'rgba(251, 146, 60, 0.1)', \r\n\t\t\t\t\tborderLeft: '3px solid rgba(251, 146, 60, 0.8)',\r\n\t\t\t\t\tpadding: '0.75rem 1rem',\r\n\t\t\t\t\tmargin: '0.75rem 0'\r\n\t\t\t\t}}>\r\n\t\t\t\t\t<strong> Unsaved Configuration Changes</strong>\r\n\t\t\t\t\t<br />\r\n\t\t\t\t\tYour changes will create a new training pipeline. Previous jobs remain under the old configuration.\r\n\t\t\t\t\tJobs will auto-save when you launch training.\r\n\t\t\t\t</p>\r\n\t\t\t)}\r\n\r\n\t\t\t{prerequisites.map((note, index) => (\r\n\t\t\t\t<p key={`training-prereq-${index}`} className=\"canvas-modal__note canvas-modal__note--warning\">\r\n\t\t\t\t\t{note}\r\n\t\t\t\t</p>\r\n\t\t\t))}\r\n\r\n\t\t\t{createJobError instanceof Error && (\r\n\t\t\t\t<p className=\"canvas-modal__note canvas-modal__note--error\">{createJobError.message}</p>\r\n\t\t\t)}\r\n\r\n\t\t\t{jobsError && !(createJobError instanceof Error) && (\r\n\t\t\t\t<p className=\"canvas-modal__note canvas-modal__note--error\">\r\n\t\t\t\t\t{jobsError.message || 'Unable to load training jobs.'}\r\n\t\t\t\t</p>\r\n\t\t\t)}\r\n\t\t\t{tuningJobsError && (\r\n\t\t\t\t<p className=\"canvas-modal__note canvas-modal__note--error\">\r\n\t\t\t\t\t{tuningJobsError.message || 'Unable to load tuning jobs.'}\r\n\t\t\t\t</p>\r\n\t\t\t)}\r\n\r\n\t\t\t{lastCreatedJob && (\r\n\t\t\t\t<p className=\"canvas-modal__note canvas-modal__note--info\">\r\n\t\t\t\t\t{lastCreatedJobCount > 1 ? (\r\n\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\tQueued {lastCreatedJobCount} training jobs. Latest job {lastCreatedJob.id} (version {lastCreatedJob.version}).\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\tTraining job {lastCreatedJob.id} queued (version {lastCreatedJob.version}).\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</p>\r\n\t\t\t)}\r\n\t\t\t{isTuningJobsLoading && (\r\n\t\t\t\t<p className=\"canvas-modal__note canvas-modal__note--muted\">Loading tuning jobs</p>\r\n\t\t\t)}\r\n\r\n\t\t\t<div className=\"canvas-modal__parameter-grid\">\r\n\t\t\t\t{filteredModelTypeParameter && renderParameterField(filteredModelTypeParameter)}\r\n\t\t\t\t{cvEnabledParameter && renderParameterField(cvEnabledParameter)}\r\n\t\t\t\t{cvEnabled && (\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t{cvStrategyParameter && renderParameterField(cvStrategyParameter)}\r\n\t\t\t\t\t\t{cvFoldsParameter && renderParameterField(cvFoldsParameter)}\r\n\t\t\t\t\t\t{cvShuffleParameter && renderParameterField(cvShuffleParameter)}\r\n\t\t\t\t\t\t{cvRandomStateParameter && renderParameterField(cvRandomStateParameter)}\r\n\t\t\t\t\t\t{cvRefitStrategyParameter && renderParameterField(cvRefitStrategyParameter)}\r\n\t\t\t\t\t</>\r\n\t\t\t\t)}\r\n\t\t\t\t\r\n\t\t\t\t{/* Hyperparameter configuration mode toggle */}\r\n\t\t\t\t{modelType && hyperparamFields.length > 0 && (\r\n\t\t\t\t\t<div className=\"canvas-modal__parameter\" style={{ gridColumn: '1 / -1' }}>\r\n\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\tdisplay: 'flex',\r\n\t\t\t\t\t\t\t\tflexWrap: 'wrap',\r\n\t\t\t\t\t\t\t\talignItems: 'flex-start',\r\n\t\t\t\t\t\t\t\tjustifyContent: 'space-between',\r\n\t\t\t\t\t\t\t\tgap: '1rem',\r\n\t\t\t\t\t\t\t\tmarginBottom: '0.75rem',\r\n\t\t\t\t\t\t\t\tpadding: '0.75rem 1rem',\r\n\t\t\t\t\t\t\t\tbackground: 'rgba(15, 23, 42, 0.35)',\r\n\t\t\t\t\t\t\t\tborderRadius: '6px',\r\n\t\t\t\t\t\t\t\tborder: '1px solid rgba(148, 163, 184, 0.25)'\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<div style={{ flex: '1 1 260px' }}>\r\n\t\t\t\t\t\t\t\t<strong style={{ fontSize: '0.95rem', color: '#e2e8f0' }}>Model Configuration</strong>\r\n\t\t\t\t\t\t\t\t<p style={{ margin: '0.25rem 0 0 0', fontSize: '0.85rem', color: 'rgba(148, 163, 184, 0.85)' }}>\r\n\t\t\t\t\t\t\t\t\t{showAdvanced\r\n\t\t\t\t\t\t\t\t\t\t? 'Fine-tune hyperparameters or use defaults for quick training'\r\n\t\t\t\t\t\t\t\t\t\t: 'Using default hyperparameters  toggle Advanced to customize'}\r\n\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t{(primaryPreset || latestTuningJob) && (\r\n\t\t\t\t\t\t\t\t\t<p style={{ margin: '0.5rem 0 0 0', fontSize: '0.8rem', color: 'rgba(148, 163, 184, 0.8)' }}>\r\n\t\t\t\t\t\t\t\t\t\t{primaryPreset ? (\r\n\t\t\t\t\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t\t\t\t\t Tuned parameters available for <strong>{primaryPreset.modelType}</strong>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{primaryPreset.runNumber ? ` (run ${primaryPreset.runNumber})` : ''}\r\n\t\t\t\t\t\t\t\t\t\t\t\t{primaryPresetRelative ? `  ${primaryPresetRelative}` : ''}\r\n\t\t\t\t\t\t\t\t\t\t\t\t{primaryPreset.targetColumn ? `  Target: ${primaryPreset.targetColumn}` : ''}\r\n\t\t\t\t\t\t\t\t\t\t\t\t{primaryPresetScoreLabel ? `  ${primaryPresetScoreLabel}` : ''}\r\n\t\t\t\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t\t\t\t\tLatest tuning run {latestTuningRunNumber || 'N/A'}\r\n\t\t\t\t\t\t\t\t\t\t\t\t{latestTuningRelative ? `  ${latestTuningRelative}` : ''}\r\n\t\t\t\t\t\t\t\t\t\t\t\t{latestTuningJob?.model_type && latestTuningJob.model_type !== modelType\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t? ` targeted ${latestTuningJob.model_type}.`\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t: ' did not produce reusable parameters for this configuration yet.'}\r\n\t\t\t\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t{applyStatus && (\r\n\t\t\t\t\t\t\t\t\t<p style={{ margin: '0.5rem 0 0 0', fontSize: '0.8rem', color: applyStatusColor }}>\r\n\t\t\t\t\t\t\t\t\t\t{applyStatus.message}\r\n\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\tdisplay: 'flex',\r\n\t\t\t\t\t\t\t\t\tflexWrap: 'wrap',\r\n\t\t\t\t\t\t\t\t\tgap: '0.5rem',\r\n\t\t\t\t\t\t\t\t\talignItems: 'center',\r\n\t\t\t\t\t\t\t\t\tjustifyContent: 'flex-end'\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t\t\t\t\tonClick={handleApplyBestParams}\r\n\t\t\t\t\t\t\t\t\tdisabled={applyButtonDisabled}\r\n\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\tpadding: '0.5rem 1rem',\r\n\t\t\t\t\t\t\t\t\t\tfontSize: '0.875rem',\r\n\t\t\t\t\t\t\t\t\t\tfontWeight: 500,\r\n\t\t\t\t\t\t\t\t\t\tcolor: applyButtonDisabled ? 'rgba(148, 163, 184, 0.55)' : '#0c4a6e',\r\n\t\t\t\t\t\t\t\t\t\tbackground: applyButtonDisabled ? 'rgba(15, 23, 42, 0.35)' : 'rgba(191, 219, 254, 0.9)',\r\n\t\t\t\t\t\t\t\t\t\tborder: applyButtonDisabled ? '1px solid rgba(148, 163, 184, 0.35)' : '1px solid rgba(147, 197, 253, 0.9)',\r\n\t\t\t\t\t\t\t\t\t\tborderRadius: '4px',\r\n\t\t\t\t\t\t\t\t\t\tcursor: applyButtonDisabled ? 'not-allowed' : 'pointer',\r\n\t\t\t\t\t\t\t\t\t\ttransition: 'all 0.2s ease',\r\n\t\t\t\t\t\t\t\t\t\tminWidth: '130px',\r\n\t\t\t\t\t\t\t\t\t\tboxShadow: applyButtonDisabled ? 'none' : '0 3px 10px rgba(14, 116, 144, 0.25)'\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\tApply tuned params\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t\t\t\t\tonClick={() => setPresetModalOpen(true)}\r\n\t\t\t\t\t\t\t\t\tdisabled={browsePresetsDisabled}\r\n\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\tpadding: '0.5rem 1rem',\r\n\t\t\t\t\t\t\t\t\t\tfontSize: '0.875rem',\r\n\t\t\t\t\t\t\t\t\t\tfontWeight: 500,\r\n\t\t\t\t\t\t\t\t\t\tcolor: browsePresetsDisabled ? 'rgba(148, 163, 184, 0.55)' : 'rgba(168, 85, 247, 0.95)',\r\n\t\t\t\t\t\t\t\t\t\tbackground: browsePresetsDisabled ? 'rgba(15, 23, 42, 0.35)' : 'rgba(76, 29, 149, 0.18)',\r\n\t\t\t\t\t\t\t\t\t\tborder: browsePresetsDisabled ? '1px solid rgba(148, 163, 184, 0.35)' : '1px solid rgba(168, 85, 247, 0.45)',\r\n\t\t\t\t\t\t\t\t\t\tborderRadius: '4px',\r\n\t\t\t\t\t\t\t\t\t\tcursor: browsePresetsDisabled ? 'not-allowed' : 'pointer',\r\n\t\t\t\t\t\t\t\t\t\ttransition: 'all 0.2s ease',\r\n\t\t\t\t\t\t\t\t\t\tminWidth: '150px'\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\tBrowse tuned params\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t\t\t\t\tonClick={handleToggleAdvanced}\r\n\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\tpadding: '0.5rem 1rem',\r\n\t\t\t\t\t\t\t\t\t\tfontSize: '0.875rem',\r\n\t\t\t\t\t\t\t\t\t\tfontWeight: '500',\r\n\t\t\t\t\t\t\t\t\t\tcolor: showAdvanced ? '#fff' : 'rgba(148, 163, 184, 0.85)',\r\n\t\t\t\t\t\t\t\t\t\tbackground: showAdvanced ? 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)' : 'rgba(15, 23, 42, 0.6)',\r\n\t\t\t\t\t\t\t\t\t\tborder: showAdvanced ? 'none' : '1px solid rgba(148, 163, 184, 0.45)',\r\n\t\t\t\t\t\t\t\t\t\tborderRadius: '4px',\r\n\t\t\t\t\t\t\t\t\t\tcursor: 'pointer',\r\n\t\t\t\t\t\t\t\t\t\ttransition: 'all 0.2s ease',\r\n\t\t\t\t\t\t\t\t\t\tminWidth: '100px',\r\n\t\t\t\t\t\t\t\t\t\tboxShadow: showAdvanced ? '0 4px 12px rgba(118, 75, 162, 0.25)' : 'none'\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\tonMouseEnter={(e) => {\r\n\t\t\t\t\t\t\t\t\t\tif (showAdvanced) {\r\n\t\t\t\t\t\t\t\t\t\t\te.currentTarget.style.boxShadow = '0 6px 16px rgba(118, 75, 162, 0.35)';\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\te.currentTarget.style.borderColor = 'rgba(148, 163, 184, 0.65)';\r\n\t\t\t\t\t\t\t\t\t\t\te.currentTarget.style.background = 'rgba(15, 23, 42, 0.8)';\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\tonMouseLeave={(e) => {\r\n\t\t\t\t\t\t\t\t\t\tif (showAdvanced) {\r\n\t\t\t\t\t\t\t\t\t\t\te.currentTarget.style.boxShadow = '0 4px 12px rgba(118, 75, 162, 0.25)';\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\te.currentTarget.style.borderColor = 'rgba(148, 163, 184, 0.45)';\r\n\t\t\t\t\t\t\t\t\t\t\te.currentTarget.style.background = 'rgba(15, 23, 42, 0.6)';\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{showAdvanced ? ' Advanced' : 'Default'}\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)}\r\n\t\t\t\t\r\n\t\t\t\t{/* Render dynamic hyperparameter fields */}\r\n\t\t\t\t{modelType && hyperparamQuery.isLoading && (\r\n\t\t\t\t\t<p className=\"canvas-modal__note canvas-modal__note--muted\">Loading hyperparameters</p>\r\n\t\t\t\t)}\r\n\t\t\t\t{modelType && hyperparamQuery.error && (\r\n\t\t\t\t\t<p className=\"canvas-modal__note canvas-modal__note--error\">\r\n\t\t\t\t\t\tFailed to load hyperparameters: {hyperparamQuery.error.message}\r\n\t\t\t\t\t</p>\r\n\t\t\t\t)}\r\n\t\t\t\t{modelType && showAdvanced && hyperparamFields.length > 0 && (\r\n\t\t\t\t\t<div style={{ \r\n\t\t\t\t\t\tgridColumn: '1 / -1',\r\n\t\t\t\t\t\tpadding: '1.25rem',\r\n\t\t\t\t\t\tbackground: 'rgba(15, 23, 42, 0.25)',\r\n\t\t\t\t\t\tborder: '1px solid rgba(148, 163, 184, 0.2)',\r\n\t\t\t\t\t\tborderRadius: '6px',\r\n\t\t\t\t\t\tmarginTop: '0.5rem'\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\t\t<div style={{ \r\n\t\t\t\t\t\t\tmarginBottom: '1rem',\r\n\t\t\t\t\t\t\tpaddingBottom: '0.75rem',\r\n\t\t\t\t\t\t\tborderBottom: '2px solid rgba(102, 126, 234, 0.3)'\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t<h4 style={{ \r\n\t\t\t\t\t\t\t\tmargin: '0 0 0.5rem 0', \r\n\t\t\t\t\t\t\t\tfontSize: '1rem',\r\n\t\t\t\t\t\t\t\tfontWeight: '600',\r\n\t\t\t\t\t\t\t\tcolor: '#e2e8f0'\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\tAdvanced Hyperparameters\r\n\t\t\t\t\t\t\t</h4>\r\n\t\t\t\t\t\t\t<p style={{ \r\n\t\t\t\t\t\t\t\tmargin: '0', \r\n\t\t\t\t\t\t\t\tfontSize: '0.875rem', \r\n\t\t\t\t\t\t\t\tcolor: 'rgba(148, 163, 184, 0.85)',\r\n\t\t\t\t\t\t\t\tlineHeight: '1.5'\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\tConfigure {modelType.replace(/_/g, ' ')} hyperparameters. Leave empty to use recommended defaults.\r\n\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div style={{ \r\n\t\t\t\t\t\t\tdisplay: 'grid',\r\n\t\t\t\t\t\t\tgridTemplateColumns: 'repeat(auto-fit, minmax(250px, 1fr))',\r\n\t\t\t\t\t\t\tgap: '1rem'\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t{hyperparamFields.map(renderHyperparamField)}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)}\r\n\t\t\t\t{!modelType && hyperparametersParameter && renderParameterField(hyperparametersParameter)}\r\n\t\t\t</div>\r\n\r\n\t\t\t{cvEnabled && (\r\n\t\t\t\t<p className=\"canvas-modal__note canvas-modal__note--muted\">\r\n\t\t\t\t\tCross-validation runs {cvFolds} folds before refitting on{' '}\r\n\t\t\t\t\t{cvRefitStrategy === 'train_plus_validation' ? 'training plus validation data.' : 'training data only.'}\r\n\t\t\t\t</p>\r\n\t\t\t)}\r\n\r\n\t\t\t{scalingWarning && (\r\n\t\t\t\t<div\r\n\t\t\t\t\tclassName=\"canvas-modal__note canvas-modal__note--warning\"\r\n\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\tmargin: '0.75rem 0',\r\n\t\t\t\t\t\tborderLeft: '3px solid rgba(251, 191, 36, 0.9)',\r\n\t\t\t\t\t\tbackground: 'rgba(251, 191, 36, 0.12)',\r\n\t\t\t\t\t\tpadding: '0.75rem 1rem',\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\tdisplay: 'flex',\r\n\t\t\t\t\t\t\tjustifyContent: 'space-between',\r\n\t\t\t\t\t\t\talignItems: 'flex-start',\r\n\t\t\t\t\t\t\tgap: '0.75rem',\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<strong> {scalingWarning.headline}</strong>\r\n\t\t\t\t\t\t\t<p style={{ margin: '0.35rem 0 0', fontSize: '0.85rem' }}>{scalingWarning.summary}</p>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t\t\tclassName=\"btn btn-outline-secondary\"\r\n\t\t\t\t\t\t\tonClick={() => setShowScalingDetails((previous) => !previous)}\r\n\t\t\t\t\t\t\tstyle={{ whiteSpace: 'nowrap' }}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{showScalingDetails ? 'Hide tips' : 'Show tips'}\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t{showScalingDetails && (\r\n\t\t\t\t\t\t<ul\r\n\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\tmargin: '0.75rem 0 0 1rem',\r\n\t\t\t\t\t\t\t\tpadding: 0,\r\n\t\t\t\t\t\t\t\tlistStyle: 'disc',\r\n\t\t\t\t\t\t\t\tfontSize: '0.85rem',\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{scalingWarning.details.map((tip, index) => (\r\n\t\t\t\t\t\t\t\t<li key={`scaling-tip-${index}`} style={{ marginBottom: '0.35rem' }}>\r\n\t\t\t\t\t\t\t\t\t{tip}\r\n\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\r\n\t\t\t<div className=\"canvas-modal__actions\">\r\n\t\t\t\t<button\r\n\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\tclassName=\"btn btn-primary\"\r\n\t\t\t\t\tonClick={handleEnqueueTraining}\r\n\t\t\t\t\tdisabled={isActionDisabled}\r\n\t\t\t\t>\r\n\t\t\t\t\t{isCreatingJob ? 'Queuing' : 'Launch training job'}\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\r\n\t\t\t\t\t{isJobsLoading && <p className=\"canvas-modal__note canvas-modal__note--muted\">Loading recent jobs</p>}\r\n\t\t\t\t\t{hiddenJobCount > 0 && (\r\n\t\t\t\t\t\t<p className=\"canvas-modal__note canvas-modal__note--muted\">\r\n\t\t\t\t\t\t\t{hiddenJobCount === 1\r\n\t\t\t\t\t\t\t\t? '1 training job uses a different problem type. Switch the problem type to view it.'\r\n\t\t\t\t\t\t\t\t: `${hiddenJobCount} training jobs use a different problem type. Switch the problem type to view them.`}\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t)}\r\n\t\t\t\t\t{!isJobsLoading && filteredJobs.length === 0 && (\r\n\t\t\t\t\t\t<p className=\"canvas-modal__note canvas-modal__note--muted\">No training jobs found for this node.</p>\r\n\t\t\t\t\t)}\r\n\t\t\t\t\t{filteredJobs.length > 0 && <ul className=\"canvas-modal__note-list\">{filteredJobs.map(renderJobSummary)}</ul>}\r\n\r\n\t\t\t\t\t\t<BestHyperparamsModal\r\n\t\t\t\t\t\t\tpresets={hyperparamPresets}\r\n\t\t\t\t\t\t\tisOpen={isPresetModalOpen}\r\n\t\t\t\t\t\t\tonClose={() => setPresetModalOpen(false)}\r\n\t\t\t\t\t\t\tonApply={(preset) => {\r\n\t\t\t\t\t\t\t\tapplyPreset(preset);\r\n\t\t\t\t\t\t\t\tsetPresetModalOpen(false);\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\tactivePresetId={lastAppliedPresetId}\r\n\t\t\t\t\t\t\tfieldMetadata={hyperparamFieldMap}\r\n\t\t\t\t\t\t/>\r\n\t\t\t</section>\r\n\t);\r\n};\r\n","// Shared config parsing helpers used by NodeSettingsModal and its hooks across multiple node types.\r\nconst TRUE_CONFIG_TOKENS = new Set(['true', '1', 'yes', 'on']);\r\nconst FALSE_CONFIG_TOKENS = new Set(['false', '0', 'no', 'off']);\r\nconst AUTO_DETECT_CONFIG_KEYS = ['auto_detect', 'autoDetect', 'auto_detect_columns', 'auto', 'auto_detect_text'];\r\n\r\nexport const BOOLEAN_TRUE_TOKENS = new Set(['true', '1', 'yes', 'y', 'on', 't']);\r\nexport const BOOLEAN_FALSE_TOKENS = new Set(['false', '0', 'no', 'n', 'off', 'f']);\r\n\r\nexport const normalizeConfigBoolean = (value: unknown): boolean | null => {\r\n  if (typeof value === 'boolean') {\r\n    return value;\r\n  }\r\n  if (typeof value === 'number') {\r\n    if (!Number.isFinite(value)) {\r\n      return null;\r\n    }\r\n    if (value === 1) {\r\n      return true;\r\n    }\r\n    if (value === 0) {\r\n      return false;\r\n    }\r\n    return null;\r\n  }\r\n  if (typeof value === 'string') {\r\n    const normalized = value.trim().toLowerCase();\r\n    if (!normalized) {\r\n      return null;\r\n    }\r\n    if (TRUE_CONFIG_TOKENS.has(normalized)) {\r\n      return true;\r\n    }\r\n    if (FALSE_CONFIG_TOKENS.has(normalized)) {\r\n      return false;\r\n    }\r\n  }\r\n  return null;\r\n};\r\n\r\nexport const pickAutoDetectValue = (source: Record<string, unknown> | null | undefined): unknown => {\r\n  if (!source || typeof source !== 'object') {\r\n    return undefined;\r\n  }\r\n  for (const key of AUTO_DETECT_CONFIG_KEYS) {\r\n    if (Object.prototype.hasOwnProperty.call(source, key)) {\r\n      return source[key];\r\n    }\r\n  }\r\n  return undefined;\r\n};\r\n\r\nexport const cloneConfig = (value: any) => {\r\n  if (value === undefined || value === null) {\r\n    return {};\r\n  }\r\n  try {\r\n    return JSON.parse(JSON.stringify(value));\r\n  } catch (error) {\r\n    if (Array.isArray(value)) {\r\n      return [...value];\r\n    }\r\n    if (typeof value === 'object') {\r\n      return { ...value };\r\n    }\r\n    return value;\r\n  }\r\n};\r\n\r\nconst sortValue = (value: any): any => {\r\n  if (Array.isArray(value)) {\r\n    return value.map((item) => sortValue(item));\r\n  }\r\n  if (value && typeof value === 'object') {\r\n    return Object.keys(value)\r\n      .sort()\r\n      .reduce<Record<string, any>>((acc, key) => {\r\n        acc[key] = sortValue(value[key]);\r\n        return acc;\r\n      }, {});\r\n  }\r\n  return value;\r\n};\r\n\r\nexport const stableStringify = (value: any): string => {\r\n  if (value === undefined) {\r\n    return '';\r\n  }\r\n  return JSON.stringify(sortValue(value));\r\n};\r\n\r\nexport const arraysAreEqual = (first: string[], second: string[]) => {\r\n  if (first.length !== second.length) {\r\n    return false;\r\n  }\r\n  for (let index = 0; index < first.length; index += 1) {\r\n    if (first[index] !== second[index]) {\r\n      return false;\r\n    }\r\n  }\r\n  return true;\r\n};\r\n\r\nexport const inferColumnSuggestions = (dtype: string | null, values: any[]): string[] => {\r\n  const suggestions: string[] = [];\r\n  const pushSuggestion = (candidate: string) => {\r\n    if (!suggestions.includes(candidate)) {\r\n      suggestions.push(candidate);\r\n    }\r\n  };\r\n  const normalizedDtype = (dtype ?? '').toLowerCase();\r\n  if (!values.length) {\r\n    return suggestions;\r\n  }\r\n\r\n  const presentValues = values.filter((value) => value !== undefined && value !== null);\r\n  if (!presentValues.length) {\r\n    return suggestions;\r\n  }\r\n\r\n  const numericConvertibleCount = presentValues.reduce((count, value) => {\r\n    if (typeof value === 'number' && Number.isFinite(value)) {\r\n      return count + 1;\r\n    }\r\n    if (typeof value === 'string') {\r\n      const trimmed = value.trim();\r\n      if (!trimmed) {\r\n        return count;\r\n      }\r\n      const numeric = Number(trimmed);\r\n      if (!Number.isNaN(numeric) && Number.isFinite(numeric)) {\r\n        return count + 1;\r\n      }\r\n    }\r\n    return count;\r\n  }, 0);\r\n\r\n  const booleanConvertibleCount = presentValues.reduce((count, value) => {\r\n    const token = String(value).trim().toLowerCase();\r\n    if (!token) {\r\n      return count;\r\n    }\r\n    if (BOOLEAN_TRUE_TOKENS.has(token) || BOOLEAN_FALSE_TOKENS.has(token)) {\r\n      return count + 1;\r\n    }\r\n    return count;\r\n  }, 0);\r\n\r\n  const uniqueTokenCount = (() => {\r\n    const tokens = new Set<string>();\r\n    presentValues.forEach((value) => {\r\n      tokens.add(String(value).trim().toLowerCase());\r\n    });\r\n    return tokens.size;\r\n  })();\r\n\r\n  const numericShare = numericConvertibleCount / presentValues.length;\r\n  const booleanShare = booleanConvertibleCount / presentValues.length;\r\n\r\n  if (normalizedDtype.includes('object') || normalizedDtype.includes('string')) {\r\n    if (booleanShare >= 0.7) {\r\n      pushSuggestion('boolean');\r\n    }\r\n    if (numericShare >= 0.7) {\r\n      pushSuggestion('float64');\r\n    }\r\n    if (uniqueTokenCount > 0 && uniqueTokenCount <= 20) {\r\n      pushSuggestion('category');\r\n    }\r\n    return suggestions;\r\n  }\r\n\r\n  if (normalizedDtype.includes('float')) {\r\n    const integerConvertibleCount = presentValues.reduce((count, value) => {\r\n      if (typeof value === 'number') {\r\n        return Number.isInteger(value) ? count + 1 : count;\r\n      }\r\n      if (typeof value === 'string') {\r\n        const trimmed = value.trim();\r\n        if (!trimmed) {\r\n          return count;\r\n        }\r\n        const numeric = Number(trimmed);\r\n        if (!Number.isNaN(numeric) && Number.isFinite(numeric) && Number.isInteger(numeric)) {\r\n          return count + 1;\r\n        }\r\n      }\r\n      return count;\r\n    }, 0);\r\n\r\n    if (booleanShare >= 0.8) {\r\n      pushSuggestion('boolean');\r\n    }\r\n\r\n    if (presentValues.length > 0 && integerConvertibleCount / presentValues.length >= 0.9) {\r\n      pushSuggestion('Int64');\r\n    }\r\n    return suggestions;\r\n  }\r\n\r\n  if (normalizedDtype.includes('int')) {\r\n    if (booleanShare >= 0.7) {\r\n      pushSuggestion('boolean');\r\n    }\r\n  }\r\n\r\n  return suggestions;\r\n};\r\n","import React, {\r\n\ttype ChangeEvent,\r\n\ttype Dispatch,\r\n\ttype SetStateAction,\r\n\tuseCallback,\r\n\tuseEffect,\r\n\tuseMemo,\r\n\tuseRef,\r\n\tuseState,\r\n} from 'react';\r\nimport { useMutation, useQuery, useQueryClient } from '@tanstack/react-query';\r\nimport type {\r\n\tFeatureGraph,\r\n\tFeatureNodeParameter,\r\n\tModelEvaluationConfusionMatrix,\r\n\tModelEvaluationPrecisionRecallCurve,\r\n\tModelEvaluationReport,\r\n\tModelEvaluationResidualHistogram,\r\n\tModelEvaluationResidualPoint,\r\n\tModelEvaluationResiduals,\r\n\tModelEvaluationRocCurve,\r\n\tModelEvaluationSplitPayload,\r\n\tModelEvaluationRequest,\r\n\tTrainingJobListResponse,\r\n\tTrainingJobResponse,\r\n\tTrainingJobSummary,\r\n} from '../../../../api';\r\nimport {\r\n\tevaluateTrainingJob,\r\n\tfetchTrainingJob,\r\n\tfetchTrainingJobs,\r\n\tgeneratePipelineId,\r\n} from '../../../../api';\r\nimport { formatRelativeTime } from '../../utils/formatters';\r\nimport { normalizeConfigBoolean } from '../../utils/configParsers';\r\n\r\ntype FormatMetricFn = (value?: number | null, precision?: number) => string;\r\n\r\nconst SPLIT_OPTIONS = [\r\n\t{ value: 'train', label: 'Train', accent: 'train' },\r\n\t{ value: 'test', label: 'Test', accent: 'test' },\r\n\t{ value: 'validation', label: 'Validation', accent: 'validation' },\r\n] as const;\r\n\r\ntype SplitValue = (typeof SPLIT_OPTIONS)[number]['value'];\r\n\r\nconst SPLIT_PRIORITY: Record<SplitValue, number> = {\r\n\ttrain: 0,\r\n\ttest: 1,\r\n\tvalidation: 2,\r\n};\r\n\r\nconst DEFAULT_SPLITS: SplitValue[] = ['train', 'test', 'validation'];\r\n\r\nconst ensureStringArray = (value: unknown): string[] => {\r\n\tif (Array.isArray(value)) {\r\n\t\treturn value\r\n\t\t\t.map((entry) => (typeof entry === 'string' ? entry : String(entry ?? '')))\r\n\t\t\t.map((entry) => entry.trim().toLowerCase())\r\n\t\t\t.filter(Boolean);\r\n\t}\r\n\tif (typeof value === 'string') {\r\n\t\treturn value\r\n\t\t\t.split(',')\r\n\t\t\t.map((entry) => entry.trim().toLowerCase())\r\n\t\t\t.filter(Boolean);\r\n\t}\r\n\treturn [];\r\n};\r\n\r\nconst normalizeSplits = (splits: string[]): SplitValue[] => {\r\n\tconst allowed = new Set(SPLIT_OPTIONS.map((option) => option.value));\r\n\tconst next: SplitValue[] = [];\r\n\tsplits.forEach((entry) => {\r\n\t\tif (!entry) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (entry === 'training') {\r\n\t\t\tentry = 'train';\r\n\t\t}\r\n\t\tif (entry === 'valid' || entry === 'val') {\r\n\t\t\tnext.push('validation');\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (allowed.has(entry as SplitValue)) {\r\n\t\t\tnext.push(entry as SplitValue);\r\n\t\t}\r\n\t});\r\n\tconst seen = new Set<SplitValue>();\r\n\treturn next\r\n\t\t.filter((entry) => {\r\n\t\t\tif (seen.has(entry)) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tseen.add(entry);\r\n\t\t\treturn true;\r\n\t\t})\r\n\t\t.sort((a, b) => SPLIT_PRIORITY[a] - SPLIT_PRIORITY[b]);\r\n};\r\n\r\n\tconst arraysEqual = (left: string[], right: string[]): boolean => {\r\n\t\tif (left.length !== right.length) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tfor (let index = 0; index < left.length; index += 1) {\r\n\t\t\tif (left[index] !== right[index]) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn true;\r\n\t};\r\n\r\nconst parseBooleanConfig = (value: unknown, fallback: boolean): boolean => {\r\n\tconst normalized = normalizeConfigBoolean(value);\r\n\tif (normalized === null) {\r\n\t\treturn fallback;\r\n\t}\r\n\treturn normalized;\r\n};\r\n\r\nconst parsePositiveIntegerConfig = (value: unknown, fallback: number): number => {\r\n\tif (typeof value === 'number' && Number.isFinite(value) && value > 0) {\r\n\t\treturn Math.round(value);\r\n\t}\r\n\tif (typeof value === 'string' && value.trim()) {\r\n\t\tconst asNumber = Number(value);\r\n\t\tif (Number.isFinite(asNumber) && asNumber > 0) {\r\n\t\t\treturn Math.round(asNumber);\r\n\t\t}\r\n\t}\r\n\treturn fallback;\r\n};\r\n\r\nconst toTimestamp = (value?: string | null): number => {\r\n\tif (!value) {\r\n\t\treturn 0;\r\n\t}\r\n\tconst parsed = Date.parse(value);\r\n\treturn Number.isFinite(parsed) ? parsed : 0;\r\n};\r\n\r\nconst friendlySplitLabel = (split: string): string => {\r\n\tconst match = SPLIT_OPTIONS.find((option) => option.value === split);\r\n\tif (match) {\r\n\t\treturn match.label;\r\n\t}\r\n\treturn split.charAt(0).toUpperCase() + split.slice(1);\r\n};\r\n\r\nconst statusLabel = (status: TrainingJobSummary['status']): string => {\r\n\tconst formatted = status.replace(/_/g, ' ');\r\n\treturn formatted.charAt(0).toUpperCase() + formatted.slice(1);\r\n};\r\n\r\nconst buildJobLabel = (job: TrainingJobSummary): string => {\r\n\tconst parts: string[] = [];\r\n\tif (job.model_type) {\r\n\t\tparts.push(job.model_type);\r\n\t}\r\n\tif (typeof job.version === 'number') {\r\n\t\tparts.push(`v${job.version}`);\r\n\t}\r\n\tparts.push(` ${statusLabel(job.status)}`);\r\n\tconst relative = formatRelativeTime(job.updated_at ?? job.created_at);\r\n\tif (relative) {\r\n\t\tparts.push(`(${relative})`);\r\n\t}\r\n\treturn parts.join(' ');\r\n};\r\n\r\nconst clamp01 = (value: number): number => {\r\n\tif (!Number.isFinite(value)) {\r\n\t\treturn 0;\r\n\t}\r\n\tif (value < 0) {\r\n\t\treturn 0;\r\n\t}\r\n\tif (value > 1) {\r\n\t\treturn 1;\r\n\t}\r\n\treturn value;\r\n};\r\n\r\nconst extractNumericMetrics = (\r\n\tmetrics: Record<string, unknown> | null | undefined\r\n): Array<{ key: string; value: number }> => {\r\n\tif (!metrics || typeof metrics !== 'object') {\r\n\t\treturn [];\r\n\t}\r\n\tconst entries: Array<{ key: string; value: number }> = [];\r\n\tObject.entries(metrics).forEach(([key, value]) => {\r\n\t\tif (typeof value === 'number' && Number.isFinite(value)) {\r\n\t\t\tentries.push({ key, value });\r\n\t\t}\r\n\t});\r\n\tentries.sort((a, b) => a.key.localeCompare(b.key));\r\n\treturn entries;\r\n};\r\n\r\nconst formatPercentage = (value: number, formatMetricValue: FormatMetricFn): string => {\r\n\tif (!Number.isFinite(value)) {\r\n\t\treturn '';\r\n\t}\r\n\tconst resolved = formatMetricValue(value * 100, Math.abs(value) >= 0.1 ? 1 : 2);\r\n\treturn resolved ? `${resolved}%` : '';\r\n};\r\n\r\ntype EvaluationPackSectionProps = {\r\n\tnodeId: string;\r\n\tsourceId?: string | null;\r\n\tgraph: FeatureGraph | null;\r\n\tconfig: Record<string, any> | null;\r\n\tsetConfigState: Dispatch<SetStateAction<Record<string, any>>>;\r\n\trenderParameterField: (parameter: FeatureNodeParameter) => React.ReactNode;\r\n\tformatMetricValue: FormatMetricFn;\r\n\tconnectedSplitHandles?: Partial<Record<SplitValue, boolean>>;\r\n\tcanResetNode?: boolean;\r\n\tonResetNode?: () => void;\r\n};\r\n\r\nconst EvaluationPackSection: React.FC<EvaluationPackSectionProps> = ({\r\n\tnodeId,\r\n\tsourceId,\r\n\tgraph,\r\n\tconfig,\r\n\tsetConfigState,\r\n\trenderParameterField: _renderParameterField,\r\n\tformatMetricValue,\r\n\tconnectedSplitHandles,\r\n\tcanResetNode = false,\r\n\tonResetNode,\r\n}) => {\r\n\t\tvoid _renderParameterField;\r\n\tconst queryClient = useQueryClient();\r\n\r\n\tconst graphPayload = useMemo<FeatureGraph | null>(() => {\r\n\t\tif (!graph || !Array.isArray(graph.nodes) || !Array.isArray(graph.edges)) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\treturn {\r\n\t\t\tnodes: graph.nodes,\r\n\t\t\tedges: graph.edges,\r\n\t\t};\r\n\t}, [graph]);\r\n\r\n\tconst upstreamTrainingNodeIds = useMemo(() => {\r\n\t\tif (!graphPayload) {\r\n\t\t\treturn [] as string[];\r\n\t\t}\r\n\r\n\t\tconst nodeLookup = new Map<string, any>();\r\n\t\tgraphPayload.nodes.forEach((item: any) => {\r\n\t\t\tif (item?.id) {\r\n\t\t\t\tnodeLookup.set(item.id, item);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tconst direct = new Set<string>();\r\n\t\tgraphPayload.edges.forEach((edge: any) => {\r\n\t\t\tif (!edge || edge.target !== nodeId) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst sourceNode = nodeLookup.get(edge.source);\r\n\t\t\tif (sourceNode?.data?.catalogType === 'train_model_draft') {\r\n\t\t\t\tdirect.add(sourceNode.id);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tif (direct.size > 0) {\r\n\t\t\treturn Array.from(direct);\r\n\t\t}\r\n\r\n\t\treturn graphPayload.nodes\r\n\t\t\t.filter((item: any) => item?.data?.catalogType === 'train_model_draft')\r\n\t\t\t.map((item: any) => item.id);\r\n\t}, [graphPayload, nodeId]);\r\n\r\n\tconst upstreamKey = useMemo(() => {\r\n\t\tif (!upstreamTrainingNodeIds.length) {\r\n\t\t\treturn 'all';\r\n\t\t}\r\n\t\treturn upstreamTrainingNodeIds.slice().sort().join('|');\r\n\t}, [upstreamTrainingNodeIds]);\r\n\r\n\tconst [pipelineId, setPipelineId] = useState<string | null>(null);\r\n\tconst [pipelineError, setPipelineError] = useState<string | null>(null);\r\n\r\n\tuseEffect(() => {\r\n\t\tlet cancelled = false;\r\n\t\tsetPipelineError(null);\r\n\r\n\t\tif (!sourceId || !graphPayload) {\r\n\t\t\tsetPipelineId(null);\r\n\t\t\treturn () => {\r\n\t\t\t\tcancelled = true;\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\tgeneratePipelineId(sourceId, graphPayload)\r\n\t\t\t.then((value) => {\r\n\t\t\t\tif (!cancelled) {\r\n\t\t\t\t\tsetPipelineId(value);\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch((error: Error) => {\r\n\t\t\t\tif (!cancelled) {\r\n\t\t\t\t\tsetPipelineError(error?.message ?? 'Unable to compute pipeline signature.');\r\n\t\t\t\t\tsetPipelineId(null);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\treturn () => {\r\n\t\t\tcancelled = true;\r\n\t\t};\r\n\t}, [graphPayload, sourceId]);\r\n\r\n\tconst selectedJobId = useMemo(() => {\r\n\t\tconst raw = config?.training_job_id;\r\n\t\tif (typeof raw === 'string') {\r\n\t\t\treturn raw.trim();\r\n\t\t}\r\n\t\tif (typeof raw === 'number') {\r\n\t\t\treturn String(raw);\r\n\t\t}\r\n\t\treturn '';\r\n\t}, [config?.training_job_id]);\r\n\r\n\tconst configSplits = useMemo(() => normalizeSplits(ensureStringArray(config?.splits)), [config?.splits]);\r\n\tconst defaultSplitSelection = useMemo<SplitValue[]>(\r\n\t\t() => (configSplits.length ? configSplits : DEFAULT_SPLITS),\r\n\t\t[configSplits]\r\n\t);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!connectedSplitHandles) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tsetConfigState((prev) => {\r\n\t\t\tconst previousConfig = prev ?? {};\r\n\t\t\tconst existing = normalizeSplits(ensureStringArray(previousConfig.splits));\r\n\t\t\tconst filtered = existing.filter((split) => connectedSplitHandles[split as SplitValue] !== false);\r\n\t\t\tif (\r\n\t\t\t\tfiltered.length === existing.length &&\r\n\t\t\t\tfiltered.every((value, index) => value === existing[index])\r\n\t\t\t) {\r\n\t\t\t\treturn prev;\r\n\t\t\t}\r\n\t\t\tconst nextConfig = { ...previousConfig } as Record<string, any>;\r\n\t\t\tif (filtered.length) {\r\n\t\t\t\tnextConfig.splits = filtered;\r\n\t\t\t} else {\r\n\t\t\t\tdelete nextConfig.splits;\r\n\t\t\t}\r\n\t\t\treturn nextConfig;\r\n\t\t});\r\n\t}, [connectedSplitHandles, setConfigState]);\r\n\r\n\tconst selectedSplits = useMemo<SplitValue[]>(() => {\r\n\t\tif (!connectedSplitHandles) {\r\n\t\t\treturn defaultSplitSelection;\r\n\t\t}\r\n\t\treturn defaultSplitSelection.filter((split) => connectedSplitHandles[split] !== false);\r\n\t}, [connectedSplitHandles, defaultSplitSelection]);\r\n\r\n\tconst missingSplitLabels = useMemo(() => {\r\n\t\tif (!connectedSplitHandles) {\r\n\t\t\treturn [] as string[];\r\n\t\t}\r\n\t\treturn SPLIT_OPTIONS.filter((option) => connectedSplitHandles[option.value] === false).map(\r\n\t\t\t(option) => option.label\r\n\t\t);\r\n\t}, [connectedSplitHandles]);\r\n\r\n\tconst missingSplitSummary = useMemo(() => {\r\n\t\tif (!missingSplitLabels.length) {\r\n\t\t\treturn '';\r\n\t\t}\r\n\t\tif (missingSplitLabels.length === 1) {\r\n\t\t\treturn missingSplitLabels[0];\r\n\t\t}\r\n\t\tif (missingSplitLabels.length === 2) {\r\n\t\t\treturn `${missingSplitLabels[0]} and ${missingSplitLabels[1]}`;\r\n\t\t}\r\n\t\tconst last = missingSplitLabels[missingSplitLabels.length - 1];\r\n\t\treturn `${missingSplitLabels.slice(0, -1).join(', ')}, and ${last}`;\r\n\t}, [missingSplitLabels]);\r\n\r\n\tconst hasSelectableSplits = selectedSplits.length > 0;\r\n\r\n\tconst includeConfusion = parseBooleanConfig(config?.include_confusion, true);\r\n\tconst includeCurves = parseBooleanConfig(config?.include_curves, true);\r\n\tconst includeResiduals = parseBooleanConfig(config?.include_residuals, true);\r\n\tconst maxCurvePoints = parsePositiveIntegerConfig(config?.max_curve_points, 500);\r\n\tconst maxScatterPoints = parsePositiveIntegerConfig(config?.max_scatter_points, 750);\r\n\tconst lastEvaluatedAt = typeof config?.last_evaluated_at === 'string' ? config.last_evaluated_at : null;\r\n\r\n\tconst [report, setReport] = useState<ModelEvaluationReport | null>(null);\r\n\tconst [activeResultsTab, setActiveResultsTab] = useState<'details' | 'comparison'>('details');\r\n\tconst userModifiedSplitsRef = useRef(false);\r\n\r\n\tuseEffect(() => {\r\n\t\t// Reset the current report when switching jobs.\r\n\t\tsetReport(null);\r\n\t\tuserModifiedSplitsRef.current = false;\r\n\t}, [selectedJobId]);\r\n\r\n\tuseEffect(() => {\r\n\t\tsetActiveResultsTab('details');\r\n\t}, [report?.job_id]);\r\n\r\n\tconst trainingJobsQueryKey = useMemo(\r\n\t\t() => [\r\n\t\t\t'feature-canvas',\r\n\t\t\t'model-evaluation',\r\n\t\t\tsourceId ?? 'none',\r\n\t\t\tpipelineId ?? 'pending',\r\n\t\t\tupstreamKey,\r\n\t\t],\r\n\t\t[pipelineId, sourceId, upstreamKey]\r\n\t);\r\n\r\n\tconst trainingJobsQuery = useQuery<TrainingJobListResponse, Error>({\r\n\t\tqueryKey: trainingJobsQueryKey,\r\n\t\tqueryFn: async () => {\r\n\t\t\tconst baseParams = {\r\n\t\t\t\tdatasetSourceId: sourceId || undefined,\r\n\t\t\t\tlimit: 50,\r\n\t\t\t};\r\n\r\n\t\t\tconst aggregated = new Map<string, TrainingJobSummary>();\r\n\t\t\tconst encounteredErrors: Error[] = [];\r\n\t\t\tlet datasetResponse: TrainingJobListResponse | null = null;\r\n\r\n\t\t\tconst appendJobs = (jobs?: TrainingJobSummary[] | null) => {\r\n\t\t\t\tif (!Array.isArray(jobs)) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tjobs.forEach((job) => {\r\n\t\t\t\t\tif (job && !aggregated.has(job.id)) {\r\n\t\t\t\t\t\taggregated.set(job.id, job);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t};\r\n\r\n\t\t\tconst safeFetch = async (params: {\r\n\t\t\t\tdatasetSourceId?: string;\r\n\t\t\t\tpipelineId?: string;\r\n\t\t\t\tnodeId?: string;\r\n\t\t\t\tlimit?: number;\r\n\t\t\t}) => {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tconst response = await fetchTrainingJobs(params);\r\n\t\t\t\t\tappendJobs(response?.jobs);\r\n\t\t\t\t\treturn response;\r\n\t\t\t\t} catch (error) {\r\n\t\t\t\t\tif (error instanceof Error) {\r\n\t\t\t\t\t\tencounteredErrors.push(error);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\tif (pipelineId) {\r\n\t\t\t\tawait safeFetch({ ...baseParams, pipelineId });\r\n\t\t\t}\r\n\r\n\t\t\tif (upstreamTrainingNodeIds.length) {\r\n\t\t\t\tawait Promise.all(\r\n\t\t\t\t\tupstreamTrainingNodeIds.map((node) => safeFetch({ ...baseParams, nodeId: node }))\r\n\t\t\t\t);\r\n\t\t\t}\r\n\r\n\t\t\tdatasetResponse = await safeFetch(baseParams);\r\n\r\n\t\t\tif (!aggregated.size) {\r\n\t\t\t\tif (datasetResponse) {\r\n\t\t\t\t\treturn datasetResponse;\r\n\t\t\t\t}\r\n\t\t\t\tif (encounteredErrors.length) {\r\n\t\t\t\t\tthrow encounteredErrors[0];\r\n\t\t\t\t}\r\n\t\t\t\treturn { jobs: [], total: 0 };\r\n\t\t\t}\r\n\r\n\t\t\tconst jobs = Array.from(aggregated.values());\r\n\t\t\tjobs.sort((a, b) => toTimestamp(b.updated_at ?? b.created_at) - toTimestamp(a.updated_at ?? a.created_at));\r\n\t\t\tconst total = datasetResponse?.total ?? jobs.length;\r\n\t\t\treturn { jobs, total };\r\n\t\t},\r\n\t\tenabled: Boolean(sourceId),\r\n\t\tstaleTime: 30 * 1000,\r\n\t\tretry: (failureCount, error) => {\r\n\t\t\tif (error.message.includes('Sign in')) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\treturn failureCount < 2;\r\n\t\t},\r\n\t\trefetchInterval: (query) => {\r\n\t\t\tconst current = query.state.data as TrainingJobListResponse | undefined;\r\n\t\t\tconst jobs = current?.jobs ?? [];\r\n\t\t\tconst hasActiveJob = jobs.some((job) => job.status === 'queued' || job.status === 'running');\r\n\t\t\treturn hasActiveJob ? 5000 : false;\r\n\t\t},\r\n\t});\r\n\r\n\tconst jobList = trainingJobsQuery.data?.jobs ?? [];\r\n\tconst jobLookup = useMemo(() => {\r\n\t\tconst map = new Map<string, TrainingJobSummary>();\r\n\t\tjobList.forEach((job) => {\r\n\t\t\tmap.set(job.id, job);\r\n\t\t});\r\n\t\treturn map;\r\n\t}, [jobList]);\r\n\r\n\tconst successfulJobs = useMemo(() => jobList.filter((job) => job.status === 'succeeded'), [jobList]);\r\n\r\n\tconst jobOptions = useMemo(\r\n\t\t() =>\r\n\t\t\tsuccessfulJobs.map((job) => ({ value: job.id, label: buildJobLabel(job) })),\r\n\t\t[successfulJobs]\r\n\t);\r\n\r\n\tconst selectedJob = selectedJobId ? jobLookup.get(selectedJobId) ?? null : null;\r\n\r\n\tconst jobDetailQuery = useQuery<TrainingJobResponse, Error>({\r\n\t\tqueryKey: ['feature-canvas', 'training-job', selectedJobId || 'none'],\r\n\t\tqueryFn: () => fetchTrainingJob(selectedJobId),\r\n\t\tenabled: Boolean(selectedJobId),\r\n\t\tstaleTime: 30 * 1000,\r\n\t});\r\n\r\n\t\tuseEffect(() => {\r\n\t\tconst job = jobDetailQuery.data;\r\n\t\tif (!job) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconst evaluation = job.metrics?.evaluation;\r\n\t\tif (!evaluation || typeof evaluation !== 'object') {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconst rawSplits = evaluation.splits;\r\n\t\tif (!rawSplits || typeof rawSplits !== 'object') {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst normalizedSplits: Record<string, ModelEvaluationSplitPayload> = {};\r\n\t\tObject.entries(rawSplits).forEach(([key, value]) => {\r\n\t\t\tif (value && typeof value === 'object') {\r\n\t\t\t\tnormalizedSplits[key] = value as ModelEvaluationSplitPayload;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tconst generatedAt = typeof evaluation.generated_at === 'string'\r\n\t\t\t? evaluation.generated_at\r\n\t\t\t: lastEvaluatedAt ?? job.updated_at ?? job.created_at ?? new Date().toISOString();\r\n\r\n\t\tconst problemType = evaluation.problem_type === 'regression' ? 'regression' : 'classification';\r\n\t\t\tconst hydratedReport: ModelEvaluationReport = {\r\n\t\t\tjob_id: job.id,\r\n\t\t\tpipeline_id: job.pipeline_id,\r\n\t\t\tnode_id: job.node_id,\r\n\t\t\tgenerated_at: generatedAt,\r\n\t\t\tproblem_type: problemType,\r\n\t\t\ttarget_column: evaluation.target_column ?? job.metadata?.target_column ?? null,\r\n\t\t\tsplits: normalizedSplits,\r\n\t\t};\r\n\t\tsetReport(hydratedReport);\r\n\r\n\t\tif (generatedAt && generatedAt !== lastEvaluatedAt) {\r\n\t\t\tsetConfigState((prev) => ({ ...(prev ?? {}), last_evaluated_at: generatedAt }));\r\n\t\t}\r\n\r\n\t\t\tconst splitKeys = normalizeSplits(Object.keys(normalizedSplits));\r\n\t\t\t// Only auto-update splits if the user hasn't manually modified them\r\n\t\t\tif (splitKeys.length && !userModifiedSplitsRef.current && !arraysEqual(configSplits, splitKeys)) {\r\n\t\t\t\tsetConfigState((prev) => ({ ...(prev ?? {}), splits: splitKeys }));\r\n\t\t\t}\r\n\t\t}, [jobDetailQuery.data, lastEvaluatedAt, setConfigState, configSplits]);\r\n\r\n\tconst evaluationMutation = useMutation<ModelEvaluationReport, Error, ModelEvaluationRequest>({\r\n\t\tmutationFn: async (payload) => {\r\n\t\t\tif (!selectedJobId) {\r\n\t\t\t\tthrow new Error('Select a training job before running evaluation.');\r\n\t\t\t}\r\n\t\t\treturn evaluateTrainingJob(selectedJobId, payload);\r\n\t\t},\r\n\t\tonSuccess: (data) => {\r\n\t\t\tsetReport(data);\r\n\t\t\tsetConfigState((prev) => ({\r\n\t\t\t\t...(prev ?? {}),\r\n\t\t\t\ttraining_job_id: selectedJobId,\r\n\t\t\t\tsplits: data.splits ? Object.keys(data.splits) : selectedSplits,\r\n\t\t\t\tinclude_confusion: includeConfusion,\r\n\t\t\t\tinclude_curves: includeCurves,\r\n\t\t\t\tinclude_residuals: includeResiduals,\r\n\t\t\t\tmax_curve_points: maxCurvePoints,\r\n\t\t\t\tmax_scatter_points: maxScatterPoints,\r\n\t\t\t\tlast_evaluated_at: data.generated_at,\r\n\t\t\t}));\r\n\r\n\t\t\tqueryClient.invalidateQueries({ queryKey: ['feature-canvas', 'training-job', selectedJobId] });\r\n\t\t},\r\n\t});\r\n\r\n\tconst handleSelectJob = useCallback(\r\n\t\t(event: ChangeEvent<HTMLSelectElement>) => {\r\n\t\t\tconst value = event.target.value;\r\n\t\t\tevaluationMutation.reset();\r\n\t\t\tsetConfigState((prev) => {\r\n\t\t\t\tconst next = { ...(prev ?? {}) } as Record<string, any>;\r\n\t\t\t\tif (value) {\r\n\t\t\t\t\tnext.training_job_id = value;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdelete next.training_job_id;\r\n\t\t\t\t}\r\n\t\t\t\treturn next;\r\n\t\t\t});\r\n\t\t},\r\n\t\t[evaluationMutation, setConfigState]\r\n\t);\r\n\r\n\tconst handleToggleSplit = useCallback(\r\n\t\t(split: SplitValue) => {\r\n\t\t\tif (connectedSplitHandles && connectedSplitHandles[split] === false) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tevaluationMutation.reset();\r\n\t\t\tuserModifiedSplitsRef.current = true;\r\n\t\t\tsetConfigState((prev) => {\r\n\t\t\t\tconst base = normalizeSplits(ensureStringArray(prev?.splits));\r\n\t\t\t\tconst hasSplit = base.includes(split);\r\n\t\t\t\tlet nextSplits: SplitValue[];\r\n\t\t\t\tif (hasSplit) {\r\n\t\t\t\t\tif (base.length <= 1) {\r\n\t\t\t\t\t\treturn prev ?? {};\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnextSplits = base.filter((entry) => entry !== split);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tnextSplits = normalizeSplits([...base, split]);\r\n\t\t\t\t}\r\n\t\t\t\treturn { ...(prev ?? {}), splits: nextSplits };\r\n\t\t\t});\r\n\t\t\t},\r\n\t\t\t[connectedSplitHandles, evaluationMutation, setConfigState]\r\n\t);\r\n\r\n\tconst handleToggleInclude = useCallback(\r\n\t\t(key: 'include_confusion' | 'include_curves' | 'include_residuals', value: boolean) => {\r\n\t\t\tevaluationMutation.reset();\r\n\t\t\tsetConfigState((prev) => ({ ...(prev ?? {}), [key]: value }));\r\n\t\t},\r\n\t\t[evaluationMutation, setConfigState]\r\n\t);\r\n\r\n\tconst handleRunEvaluation = useCallback(() => {\r\n\t\tif (!selectedJobId) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconst request: ModelEvaluationRequest = {\r\n\t\t\tsplits: selectedSplits,\r\n\t\t\tinclude_confusion: includeConfusion,\r\n\t\t\tinclude_curves: includeCurves,\r\n\t\t\tinclude_residuals: includeResiduals,\r\n\t\t\tmax_curve_points: includeCurves ? maxCurvePoints : undefined,\r\n\t\t\tmax_scatter_points: includeResiduals ? maxScatterPoints : undefined,\r\n\t\t};\r\n\t\tevaluationMutation.mutate(request);\r\n\t}, [evaluationMutation, includeConfusion, includeCurves, includeResiduals, maxCurvePoints, maxScatterPoints, selectedJobId, selectedSplits]);\r\n\r\n\tconst lastRunRelative = report ? formatRelativeTime(report.generated_at) : lastEvaluatedAt ? formatRelativeTime(lastEvaluatedAt) : null;\r\n\r\n\tconst orderedSplitEntries = useMemo(() => {\r\n\t\tif (!report) {\r\n\t\t\treturn [] as Array<[string, ModelEvaluationSplitPayload]>;\r\n\t\t}\r\n\t\treturn Object.entries(report.splits).sort((a, b) => {\r\n\t\t\tconst [keyA] = a;\r\n\t\t\tconst [keyB] = b;\r\n\t\t\tconst priorityA = SPLIT_PRIORITY[keyA as SplitValue] ?? 99;\r\n\t\t\tconst priorityB = SPLIT_PRIORITY[keyB as SplitValue] ?? 99;\r\n\t\t\treturn priorityA - priorityB;\r\n\t\t});\r\n\t}, [report]);\r\n\r\n\tconst comparisonMatrix = useMemo(() => {\r\n\t\tif (!report || !orderedSplitEntries.length) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tconst splits = orderedSplitEntries.map(([splitKey, splitPayload]) => {\r\n\t\t\tconst metrics = extractNumericMetrics(splitPayload.metrics).reduce<Record<string, number>>((acc, entry) => {\r\n\t\t\t\tacc[entry.key] = entry.value;\r\n\t\t\t\treturn acc;\r\n\t\t\t}, {});\r\n\t\t\treturn {\r\n\t\t\t\tkey: splitKey,\r\n\t\t\t\tlabel: friendlySplitLabel(splitKey),\r\n\t\t\t\trowCount: typeof splitPayload.row_count === 'number' ? splitPayload.row_count : null,\r\n\t\t\t\tmetrics,\r\n\t\t\t};\r\n\t\t});\r\n\t\tconst metricKeys = Array.from(\r\n\t\t\tnew Set(splits.flatMap((split) => Object.keys(split.metrics)))\r\n\t\t).sort((a, b) => a.localeCompare(b));\r\n\t\treturn { splits, metricKeys };\r\n\t}, [orderedSplitEntries, report]);\r\n\r\n\tconst comparisonDisabledReason = useMemo(() => {\r\n\t\tif (!comparisonMatrix) {\r\n\t\t\treturn 'Run an evaluation to compare metrics.';\r\n\t\t}\r\n\t\tif (comparisonMatrix.splits.length <= 1) {\r\n\t\t\treturn 'Connect at least two splits to compare results.';\r\n\t\t}\r\n\t\tif (!comparisonMatrix.metricKeys.length) {\r\n\t\t\treturn 'No numeric metrics available for comparison yet.';\r\n\t\t}\r\n\t\treturn null;\r\n\t}, [comparisonMatrix]);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (activeResultsTab === 'comparison' && comparisonDisabledReason) {\r\n\t\t\tsetActiveResultsTab('details');\r\n\t\t}\r\n\t}, [activeResultsTab, comparisonDisabledReason]);\r\n\r\n\tconst handleSelectTab = useCallback((tab: 'details' | 'comparison') => {\r\n\t\tif (tab === 'comparison' && comparisonDisabledReason) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tsetActiveResultsTab(tab);\r\n\t}, [comparisonDisabledReason]);\r\n\r\n\treturn (\r\n\t\t<div className=\"node-settings__section node-settings__evaluation\">\r\n\t\t\t<div className=\"node-settings__section-header\">\r\n\t\t\t\t<h3>Model Evaluation</h3>\r\n\t\t\t\t<div style={{ display: 'flex', alignItems: 'center', gap: '12px' }}>\r\n\t\t\t\t\t{lastRunRelative && <span className=\"evaluation-status\">Last ran {lastRunRelative}</span>}\r\n\t\t\t\t\t{canResetNode && (\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t\t\tclassName=\"btn btn-outline-secondary btn-sm\"\r\n\t\t\t\t\t\t\tonClick={onResetNode}\r\n\t\t\t\t\t\t\tdisabled={!onResetNode}\r\n\t\t\t\t\t\t\ttitle=\"Reset evaluation node to defaults\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tReset node\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div className=\"evaluation-controls\">\r\n\t\t\t\t<label className=\"evaluation-control\">\r\n\t\t\t\t\t<span className=\"evaluation-control__label\">Training job</span>\r\n\t\t\t\t\t<select\r\n\t\t\t\t\t\tclassName=\"evaluation-control__select\"\r\n\t\t\t\t\t\tvalue={selectedJobId}\r\n\t\t\t\t\t\tonChange={handleSelectJob}\r\n\t\t\t\t\t\tdisabled={trainingJobsQuery.isLoading || trainingJobsQuery.isFetching}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<option value=\"\">Select a trained model</option>\r\n\t\t\t\t\t\t{jobOptions.map((option) => (\r\n\t\t\t\t\t\t\t<option key={option.value} value={option.value}>\r\n\t\t\t\t\t\t\t\t{option.label}\r\n\t\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t\t</select>\r\n\t\t\t\t\t{trainingJobsQuery.isLoading && (\r\n\t\t\t\t\t\t<span className=\"evaluation-hint\">Loading training jobs</span>\r\n\t\t\t\t\t)}\r\n\t\t\t\t\t{trainingJobsQuery.error && (\r\n\t\t\t\t\t\t<span className=\"evaluation-hint evaluation-hint--error\">\r\n\t\t\t\t\t\t\t{trainingJobsQuery.error.message}\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t)}\r\n\t\t\t\t\t{!trainingJobsQuery.isLoading && !jobOptions.length && (\r\n\t\t\t\t\t\t<span className=\"evaluation-hint\">No successful training jobs detected yet.</span>\r\n\t\t\t\t\t)}\r\n\t\t\t\t\t{pipelineError && (\r\n\t\t\t\t\t\t<span className=\"evaluation-hint evaluation-hint--warning\">{pipelineError}</span>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</label>\r\n\r\n\t\t\t\t<div className=\"evaluation-control\">\r\n\t\t\t\t\t<span className=\"evaluation-control__label\">Dataset splits</span>\r\n\t\t\t\t\t<div className=\"evaluation-split-toggle\">\r\n\t\t\t\t\t\t{SPLIT_OPTIONS.map((option) => {\r\n\t\t\t\t\t\t\tconst isConnected = connectedSplitHandles ? connectedSplitHandles[option.value] !== false : true;\r\n\t\t\t\t\t\t\tconst isActive = isConnected && selectedSplits.includes(option.value);\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<label\r\n\t\t\t\t\t\t\t\t\tkey={option.value}\r\n\t\t\t\t\t\t\t\t\tclassName={`evaluation-chip evaluation-chip--${option.accent} ${isActive ? 'evaluation-chip--active' : ''}`}\r\n\t\t\t\t\t\t\t\t\taria-disabled={!isConnected}\r\n\t\t\t\t\t\t\t\t\ttitle={!isConnected ? `${option.label} split is not connected` : undefined}\r\n\t\t\t\t\t\t\t\t\tstyle={\r\n\t\t\t\t\t\t\t\t\t\t!isConnected\r\n\t\t\t\t\t\t\t\t\t\t\t? {\r\n\t\t\t\t\t\t\t\t\t\t\t\topacity: 0.45,\r\n\t\t\t\t\t\t\t\t\t\t\t\tcursor: 'not-allowed',\r\n\t\t\t\t\t\t\t\t\t\t\t\tborderStyle: 'dashed',\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t: undefined\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\ttype=\"checkbox\"\r\n\t\t\t\t\t\t\t\t\t\tchecked={isActive}\r\n\t\t\t\t\t\t\t\t\t\tdisabled={!isConnected}\r\n\t\t\t\t\t\t\t\t\t\tonChange={() => handleToggleSplit(option.value)}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t<span>{option.label}</span>\r\n\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t{missingSplitLabels.length > 0 && (\r\n\t\t\t\t\t\t<span className=\"evaluation-hint evaluation-hint--warning\">\r\n\t\t\t\t\t\t\tConnect {missingSplitSummary} split{missingSplitLabels.length > 1 ? 's' : ''} to enable diagnostics.\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t)}\r\n\t\t\t\t\t{!hasSelectableSplits && (\r\n\t\t\t\t\t\t<span className=\"evaluation-hint evaluation-hint--warning\">\r\n\t\t\t\t\t\t\tNo dataset splits are available. Attach a train, validation, or test split to run evaluation.\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div className=\"evaluation-control evaluation-control--toggles\">\r\n\t\t\t\t\t<label className=\"evaluation-toggle\">\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\ttype=\"checkbox\"\r\n\t\t\t\t\t\t\tchecked={includeConfusion}\r\n\t\t\t\t\t\t\tonChange={(event) => handleToggleInclude('include_confusion', event.target.checked)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<span>Confusion matrix</span>\r\n\t\t\t\t\t</label>\r\n\t\t\t\t\t<label className=\"evaluation-toggle\">\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\ttype=\"checkbox\"\r\n\t\t\t\t\t\t\tchecked={includeCurves}\r\n\t\t\t\t\t\t\tonChange={(event) => handleToggleInclude('include_curves', event.target.checked)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<span>ROC / PR curves</span>\r\n\t\t\t\t\t</label>\r\n\t\t\t\t\t<label className=\"evaluation-toggle\">\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\ttype=\"checkbox\"\r\n\t\t\t\t\t\t\tchecked={includeResiduals}\r\n\t\t\t\t\t\t\tonChange={(event) => handleToggleInclude('include_residuals', event.target.checked)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<span>Residual diagnostics</span>\r\n\t\t\t\t\t</label>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div className=\"evaluation-actions\">\r\n\t\t\t\t<button\r\n\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\tclassName=\"evaluation-button\"\r\n\t\t\t\t\tonClick={handleRunEvaluation}\r\n\t\t\t\t\tdisabled={!selectedJobId || evaluationMutation.isPending || !hasSelectableSplits}\r\n\t\t\t\t>\r\n\t\t\t\t\t{evaluationMutation.isPending ? 'Running' : 'Run evaluation'}\r\n\t\t\t\t</button>\r\n\t\t\t\t{selectedJob && selectedJob.status !== 'succeeded' && (\r\n\t\t\t\t\t<span className=\"evaluation-hint evaluation-hint--warning\">\r\n\t\t\t\t\t\tSelected job is not marked as succeeded; results may be incomplete.\r\n\t\t\t\t\t</span>\r\n\t\t\t\t)}\r\n\t\t\t\t{!hasSelectableSplits && (\r\n\t\t\t\t\t<span className=\"evaluation-hint evaluation-hint--warning\">\r\n\t\t\t\t\t\tConnect at least one dataset split to run evaluation diagnostics.\r\n\t\t\t\t\t</span>\r\n\t\t\t\t)}\r\n\t\t\t\t{evaluationMutation.isError && (\r\n\t\t\t\t\t<span className=\"evaluation-hint evaluation-hint--error\">\r\n\t\t\t\t\t\t{evaluationMutation.error.message}\r\n\t\t\t\t\t</span>\r\n\t\t\t\t)}\r\n\t\t\t\t{evaluationMutation.isSuccess && report && (\r\n\t\t\t\t\t<span className=\"evaluation-hint evaluation-hint--success\">\r\n\t\t\t\t\t\tDiagnostics generated {formatRelativeTime(report.generated_at)}.\r\n\t\t\t\t\t</span>\r\n\t\t\t\t)}\r\n\t\t\t\t{jobDetailQuery.error && (\r\n\t\t\t\t\t<span className=\"evaluation-hint evaluation-hint--error\">\r\n\t\t\t\t\t\t{jobDetailQuery.error.message}\r\n\t\t\t\t\t</span>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\r\n\t\t\t{report ? (\r\n\t\t\t\t<div className=\"node-settings__evaluation-results\">\r\n\t\t\t\t\t<div className=\"evaluation-summary\">\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<span className=\"evaluation-summary__label\">Problem type</span>\r\n\t\t\t\t\t\t\t<span className=\"evaluation-summary__value\">\r\n\t\t\t\t\t\t\t\t{report.problem_type === 'regression' ? 'Regression' : 'Classification'}\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t{report.target_column && (\r\n\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t<span className=\"evaluation-summary__label\">Target column</span>\r\n\t\t\t\t\t\t\t\t<span className=\"evaluation-summary__value\">{report.target_column}</span>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<span className=\"evaluation-summary__label\">Evaluation time</span>\r\n\t\t\t\t\t\t\t<span className=\"evaluation-summary__value\">\r\n\t\t\t\t\t\t\t\t{formatRelativeTime(report.generated_at) ?? report.generated_at}\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div className=\"evaluation-tabs\" role=\"tablist\" aria-label=\"Evaluation views\">\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t\t\tclassName={`evaluation-tab ${activeResultsTab === 'details' ? 'evaluation-tab--active' : ''}`}\r\n\t\t\t\t\t\t\trole=\"tab\"\r\n\t\t\t\t\t\t\taria-selected={activeResultsTab === 'details'}\r\n\t\t\t\t\t\t\tonClick={() => handleSelectTab('details')}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tSplit details\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t\t\tclassName={`evaluation-tab ${activeResultsTab === 'comparison' ? 'evaluation-tab--active' : ''}`}\r\n\t\t\t\t\t\t\trole=\"tab\"\r\n\t\t\t\t\t\t\taria-selected={activeResultsTab === 'comparison'}\r\n\t\t\t\t\t\t\taria-disabled={Boolean(comparisonDisabledReason)}\r\n\t\t\t\t\t\t\tdisabled={Boolean(comparisonDisabledReason)}\r\n\t\t\t\t\t\t\ttitle={comparisonDisabledReason ?? undefined}\r\n\t\t\t\t\t\t\tonClick={() => handleSelectTab('comparison')}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tSplit comparison\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t{activeResultsTab === 'comparison' && comparisonMatrix ? (\r\n\t\t\t\t\t\t<EvaluationComparisonPanel\r\n\t\t\t\t\t\t\tcomparison={comparisonMatrix}\r\n\t\t\t\t\t\t\tformatMetricValue={formatMetricValue}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\torderedSplitEntries.map(([splitKey, splitPayload]) => (\r\n\t\t\t\t\t\t\t<EvaluationSplitCard\r\n\t\t\t\t\t\t\t\tkey={splitKey}\r\n\t\t\t\t\t\t\t\tsplitKey={splitKey}\r\n\t\t\t\t\t\t\t\tpayload={splitPayload}\r\n\t\t\t\t\t\t\t\tproblemType={report.problem_type}\r\n\t\t\t\t\t\t\t\tformatMetricValue={formatMetricValue}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t))\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\t\t\t) : (\r\n\t\t\t\t<div className=\"evaluation-placeholder\">\r\n\t\t\t\t\t{selectedJobId ? (\r\n\t\t\t\t\t\t<p>Run the evaluation to generate metrics and diagnostics for the selected model.</p>\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<p>Select a completed training job to enable the evaluation workflow.</p>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\ntype EvaluationComparisonPanelProps = {\r\n\tcomparison: {\r\n\t\tsplits: Array<{ key: string; label: string; rowCount: number | null; metrics: Record<string, number> }>;\r\n\t\tmetricKeys: string[];\r\n\t};\r\n\tformatMetricValue: FormatMetricFn;\r\n};\r\n\r\nconst EvaluationComparisonPanel: React.FC<EvaluationComparisonPanelProps> = ({ comparison, formatMetricValue }) => {\r\n\tif (!comparison.metricKeys.length) {\r\n\t\treturn (\r\n\t\t\t<div className=\"evaluation-placeholder\">\r\n\t\t\t\t<p>No numeric metrics were reported across splits for comparison.</p>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<section className=\"evaluation-comparison\">\r\n\t\t\t<div className=\"evaluation-comparison__table-wrapper\">\r\n\t\t\t\t<table className=\"evaluation-comparison__table\">\r\n\t\t\t\t\t<thead>\r\n\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t<th>Metric</th>\r\n\t\t\t\t\t\t\t{comparison.splits.map((split) => (\r\n\t\t\t\t\t\t\t\t<th key={split.key}>{split.label}</th>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t</thead>\r\n\t\t\t\t\t<tbody>\r\n\t\t\t\t\t\t<tr className=\"evaluation-comparison__row evaluation-comparison__row--muted\">\r\n\t\t\t\t\t\t\t<td>Rows evaluated</td>\r\n\t\t\t\t\t\t\t{comparison.splits.map((split) => (\r\n\t\t\t\t\t\t\t\t<td key={`${split.key}-rows`}>\r\n\t\t\t\t\t\t\t\t\t{typeof split.rowCount === 'number' ? split.rowCount.toLocaleString() : ''}\r\n\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t{comparison.metricKeys.map((metric) => (\r\n\t\t\t\t\t\t\t<tr key={metric} className=\"evaluation-comparison__row\">\r\n\t\t\t\t\t\t\t\t<td>{metric}</td>\r\n\t\t\t\t\t\t\t\t{comparison.splits.map((split) => (\r\n\t\t\t\t\t\t\t\t\t<td key={`${split.key}-${metric}`}>\r\n\t\t\t\t\t\t\t\t\t\t{typeof split.metrics[metric] === 'number'\r\n\t\t\t\t\t\t\t\t\t\t\t? formatMetricValue(split.metrics[metric])\r\n\t\t\t\t\t\t\t\t\t\t\t: ''}\r\n\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t\t</tbody>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</section>\r\n\t);\r\n};\r\n\r\ntype EvaluationSplitCardProps = {\r\n\tsplitKey: string;\r\n\tpayload: ModelEvaluationSplitPayload;\r\n\tproblemType: 'classification' | 'regression';\r\n\tformatMetricValue: FormatMetricFn;\r\n};\r\n\r\nconst EvaluationSplitCard: React.FC<EvaluationSplitCardProps> = ({\r\n\tsplitKey,\r\n\tpayload,\r\n\tproblemType,\r\n\tformatMetricValue,\r\n}) => {\r\n\tconst metricEntries = extractNumericMetrics(payload.metrics);\r\n\tconst hasMetrics = metricEntries.length > 0;\r\n\tconst notes = Array.isArray(payload.notes) ? payload.notes.filter(Boolean) : [];\r\n\r\n\treturn (\r\n\t\t<section className=\"evaluation-split\">\r\n\t\t\t<header className=\"evaluation-split__header\">\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<h4>{friendlySplitLabel(splitKey)} split</h4>\r\n\t\t\t\t\t<span className=\"evaluation-split__rows\">{payload.row_count} rows</span>\r\n\t\t\t\t</div>\r\n\t\t\t</header>\r\n\t\t\t<div className=\"evaluation-split__content\">\r\n\t\t\t\t<div className=\"evaluation-metrics\">\r\n\t\t\t\t\t<h5>Metrics</h5>\r\n\t\t\t\t\t{hasMetrics ? (\r\n\t\t\t\t\t\t<div className=\"evaluation-metrics__grid\">\r\n\t\t\t\t\t\t\t{metricEntries.map((entry) => (\r\n\t\t\t\t\t\t\t\t<div key={entry.key} className=\"evaluation-metrics__item\">\r\n\t\t\t\t\t\t\t\t\t<span className=\"evaluation-metrics__label\">{entry.key}</span>\r\n\t\t\t\t\t\t\t\t\t<span className=\"evaluation-metrics__value\">{formatMetricValue(entry.value)}</span>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<p className=\"evaluation-hint\">No numeric metrics reported for this split.</p>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t{problemType === 'classification' && payload.confusion_matrix && (\r\n\t\t\t\t\t<ConfusionMatrixTable\r\n\t\t\t\t\t\tmatrix={payload.confusion_matrix}\r\n\t\t\t\t\t\tformatMetricValue={formatMetricValue}\r\n\t\t\t\t\t/>\r\n\t\t\t\t)}\r\n\r\n\t\t\t\t{problemType === 'classification' && payload.roc_curves.length > 0 && (\r\n\t\t\t\t\t<div className=\"evaluation-curves\">\r\n\t\t\t\t\t\t{payload.roc_curves.map((curve) => (\r\n\t\t\t\t\t\t\t<RocCurveChart\r\n\t\t\t\t\t\t\t\tkey={`roc-${curve.label}`}\r\n\t\t\t\t\t\t\t\tcurve={curve}\r\n\t\t\t\t\t\t\t\tformatMetricValue={formatMetricValue}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t{payload.pr_curves.map((curve) => (\r\n\t\t\t\t\t\t\t<PrecisionRecallCurveChart\r\n\t\t\t\t\t\t\t\tkey={`pr-${curve.label}`}\r\n\t\t\t\t\t\t\t\tcurve={curve}\r\n\t\t\t\t\t\t\t\tformatMetricValue={formatMetricValue}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)}\r\n\r\n\t\t\t\t{problemType === 'regression' && payload.residuals && (\r\n\t\t\t\t\t<RegressionDiagnostics\r\n\t\t\t\t\t\tresiduals={payload.residuals}\r\n\t\t\t\t\t\tformatMetricValue={formatMetricValue}\r\n\t\t\t\t\t/>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t\t{notes.length > 0 && (\r\n\t\t\t\t<ul className=\"evaluation-notes\">\r\n\t\t\t\t\t{notes.map((note, index) => (\r\n\t\t\t\t\t\t<li key={`${splitKey}-note-${index}`}>{note}</li>\r\n\t\t\t\t\t))}\r\n\t\t\t\t</ul>\r\n\t\t\t)}\r\n\t\t</section>\r\n\t);\r\n};\r\n\r\ntype ConfusionMatrixTableProps = {\r\n\tmatrix: ModelEvaluationConfusionMatrix;\r\n\tformatMetricValue: FormatMetricFn;\r\n};\r\n\r\nconst ConfusionMatrixTable: React.FC<ConfusionMatrixTableProps> = ({ matrix, formatMetricValue }) => {\r\n\tconst labels = Array.isArray(matrix.labels) ? matrix.labels : [];\r\n\tconst totals = Array.isArray(matrix.totals) ? matrix.totals : [];\r\n\tconst normalized = Array.isArray(matrix.normalized) ? matrix.normalized : [];\r\n\tconst accuracy = typeof matrix.accuracy === 'number' ? matrix.accuracy : null;\r\n\r\n\treturn (\r\n\t\t<div className=\"evaluation-confusion\">\r\n\t\t\t<h5>Confusion matrix</h5>\r\n\t\t\t{accuracy !== null && (\r\n\t\t\t\t<span className=\"evaluation-confusion__accuracy\">\r\n\t\t\t\t\tAccuracy {formatPercentage(accuracy, formatMetricValue)}\r\n\t\t\t\t</span>\r\n\t\t\t)}\r\n\t\t\t<table>\r\n\t\t\t\t<thead>\r\n\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t<th>Actual \\ Predicted</th>\r\n\t\t\t\t\t\t{labels.map((label, index) => (\r\n\t\t\t\t\t\t\t<th key={`pred-${index}`}>{label}</th>\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t<th>Total</th>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</thead>\r\n\t\t\t\t<tbody>\r\n\t\t\t\t\t{matrix.matrix.map((row, rowIndex) => {\r\n\t\t\t\t\t\tconst normalizedRow = normalized[rowIndex] ?? [];\r\n\t\t\t\t\t\tconst total = totals[rowIndex] ?? row.reduce((acc, value) => acc + value, 0);\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<tr key={`row-${rowIndex}`}>\r\n\t\t\t\t\t\t\t\t<th>{labels[rowIndex] ?? `Class ${rowIndex}`}</th>\r\n\t\t\t\t\t\t\t\t{row.map((value, columnIndex) => {\r\n\t\t\t\t\t\t\t\t\tconst share = typeof normalizedRow[columnIndex] === 'number' ? normalizedRow[columnIndex] : null;\r\n\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t<td key={`cell-${rowIndex}-${columnIndex}`}>\r\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"evaluation-confusion__count\">{value}</span>\r\n\t\t\t\t\t\t\t\t\t\t\t{share !== null && (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"evaluation-confusion__percentage\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{formatPercentage(share, formatMetricValue)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t<td>{total}</td>\r\n\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t})}\r\n\t\t\t\t</tbody>\r\n\t\t\t</table>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\ntype RocCurveChartProps = {\r\n\tcurve: ModelEvaluationRocCurve;\r\n\tformatMetricValue: FormatMetricFn;\r\n};\r\n\r\nconst RocCurveChart: React.FC<RocCurveChartProps> = ({ curve, formatMetricValue }) => {\r\n\tif (!Array.isArray(curve.fpr) || !Array.isArray(curve.tpr) || !curve.fpr.length || curve.fpr.length !== curve.tpr.length) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\tconst width = 240;\r\n\tconst height = 240;\r\n\tconst margin = 28;\r\n\tconst span = width - margin * 2;\r\n\tconst verticalSpan = height - margin * 2;\r\n\r\n\tconst path = curve.fpr\r\n\t\t.map((value, index) => {\r\n\t\t\tconst x = margin + clamp01(value) * span;\r\n\t\t\tconst y = height - margin - clamp01(curve.tpr[index]) * verticalSpan;\r\n\t\t\treturn `${index === 0 ? 'M' : 'L'}${x} ${y}`;\r\n\t\t})\r\n\t\t.join(' ');\r\n\r\n\treturn (\r\n\t\t<div className=\"evaluation-chart\">\r\n\t\t\t<svg\r\n\t\t\t\tviewBox={`0 0 ${width} ${height}`}\r\n\t\t\t\trole=\"img\"\r\n\t\t\t\taria-label={`ROC curve for ${curve.label}`}\r\n\t\t\t>\r\n\t\t\t\t<rect x={margin} y={margin} width={span} height={verticalSpan} className=\"evaluation-chart__frame\" />\r\n\t\t\t\t<line x1={margin} y1={height - margin} x2={width - margin} y2={margin} className=\"evaluation-curve__baseline\" />\r\n\t\t\t\t<line x1={margin} y1={margin} x2={margin} y2={height - margin} className=\"evaluation-chart__axis\" />\r\n\t\t\t\t<line x1={margin} y1={height - margin} x2={width - margin} y2={height - margin} className=\"evaluation-chart__axis\" />\r\n\t\t\t\t<path d={path} className=\"evaluation-curve__path\" />\r\n\t\t\t\t<text x={width / 2} y={height - 4} className=\"evaluation-chart__tick\" textAnchor=\"middle\">\r\n\t\t\t\t\tFalse positive rate\r\n\t\t\t\t</text>\r\n\t\t\t\t<text\r\n\t\t\t\t\tx={-(height / 2)}\r\n\t\t\t\t\ty={12}\r\n\t\t\t\t\ttransform=\"rotate(-90)\"\r\n\t\t\t\t\tclassName=\"evaluation-chart__tick\"\r\n\t\t\t\t\ttextAnchor=\"middle\"\r\n\t\t\t\t>\r\n\t\t\t\t\tTrue positive rate\r\n\t\t\t\t</text>\r\n\t\t\t</svg>\r\n\t\t\t<div className=\"evaluation-chart__caption\">\r\n\t\t\t\t<span>{curve.label}</span>\r\n\t\t\t\t{typeof curve.auc === 'number' && (\r\n\t\t\t\t\t<span>AUC {formatMetricValue(curve.auc)}</span>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\ntype PrecisionRecallCurveChartProps = {\r\n\tcurve: ModelEvaluationPrecisionRecallCurve;\r\n\tformatMetricValue: FormatMetricFn;\r\n};\r\n\r\nconst PrecisionRecallCurveChart: React.FC<PrecisionRecallCurveChartProps> = ({ curve, formatMetricValue }) => {\r\n\tif (!Array.isArray(curve.recall) || !Array.isArray(curve.precision) || !curve.recall.length || curve.recall.length !== curve.precision.length) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\tconst width = 240;\r\n\tconst height = 240;\r\n\tconst margin = 28;\r\n\tconst span = width - margin * 2;\r\n\tconst verticalSpan = height - margin * 2;\r\n\r\n\tconst path = curve.recall\r\n\t\t.map((value, index) => {\r\n\t\t\tconst x = margin + clamp01(value) * span;\r\n\t\t\tconst y = height - margin - clamp01(curve.precision[index]) * verticalSpan;\r\n\t\t\treturn `${index === 0 ? 'M' : 'L'}${x} ${y}`;\r\n\t\t})\r\n\t\t.join(' ');\r\n\r\n\treturn (\r\n\t\t<div className=\"evaluation-chart\">\r\n\t\t\t<svg viewBox={`0 0 ${width} ${height}`} role=\"img\" aria-label={`Precision/recall for ${curve.label}`}>\r\n\t\t\t\t<rect x={margin} y={margin} width={span} height={verticalSpan} className=\"evaluation-chart__frame\" />\r\n\t\t\t\t<line x1={margin} y1={margin} x2={margin} y2={height - margin} className=\"evaluation-chart__axis\" />\r\n\t\t\t\t<line x1={margin} y1={height - margin} x2={width - margin} y2={height - margin} className=\"evaluation-chart__axis\" />\r\n\t\t\t\t<path d={path} className=\"evaluation-curve__path\" />\r\n\t\t\t\t<text x={width / 2} y={height - 4} className=\"evaluation-chart__tick\" textAnchor=\"middle\">\r\n\t\t\t\t\tRecall\r\n\t\t\t\t</text>\r\n\t\t\t\t<text\r\n\t\t\t\t\tx={-(height / 2)}\r\n\t\t\t\t\ty={12}\r\n\t\t\t\t\ttransform=\"rotate(-90)\"\r\n\t\t\t\t\tclassName=\"evaluation-chart__tick\"\r\n\t\t\t\t\ttextAnchor=\"middle\"\r\n\t\t\t\t>\r\n\t\t\t\t\tPrecision\r\n\t\t\t\t</text>\r\n\t\t\t</svg>\r\n\t\t\t<div className=\"evaluation-chart__caption\">\r\n\t\t\t\t<span>{curve.label}</span>\r\n\t\t\t\t{typeof curve.average_precision === 'number' && (\r\n\t\t\t\t\t<span>AP {formatMetricValue(curve.average_precision)}</span>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\ntype RegressionDiagnosticsProps = {\r\n\tresiduals: ModelEvaluationResiduals;\r\n\tformatMetricValue: FormatMetricFn;\r\n};\r\n\r\nconst RESIDUAL_SUMMARY_LABELS: Record<string, string> = {\r\n\tresidual_min: 'Residual min',\r\n\tresidual_max: 'Residual max',\r\n\tresidual_mean: 'Residual mean',\r\n\tresidual_std: 'Residual std',\r\n};\r\n\r\nconst RegressionDiagnostics: React.FC<RegressionDiagnosticsProps> = ({ residuals, formatMetricValue }) => {\r\n\tconst summaryEntries = Object.entries(residuals.summary ?? {}).filter((entry): entry is [string, number] => {\r\n\t\treturn typeof entry[1] === 'number' && Number.isFinite(entry[1]);\r\n\t});\r\n\r\n\treturn (\r\n\t\t<div className=\"evaluation-regression\">\r\n\t\t\t<h5>Residual analysis</h5>\r\n\t\t\t{summaryEntries.length > 0 && (\r\n\t\t\t\t<div className=\"evaluation-summary evaluation-summary--compact\">\r\n\t\t\t\t\t{summaryEntries.map(([key, value]) => (\r\n\t\t\t\t\t\t<div key={key}>\r\n\t\t\t\t\t\t\t<span className=\"evaluation-summary__label\">{RESIDUAL_SUMMARY_LABELS[key] ?? key}</span>\r\n\t\t\t\t\t\t\t<span className=\"evaluation-summary__value\">{formatMetricValue(value)}</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t))}\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\t\t\t<ResidualHistogramChart histogram={residuals.histogram} />\r\n\t\t\t{residuals.scatter && residuals.scatter.length > 0 && (\r\n\t\t\t\t<ResidualScatterPlot points={residuals.scatter} />\r\n\t\t\t)}\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\ntype ResidualHistogramChartProps = {\r\n\thistogram: ModelEvaluationResidualHistogram;\r\n};\r\n\r\nconst ResidualHistogramChart: React.FC<ResidualHistogramChartProps> = ({ histogram }) => {\r\n\tconst counts = Array.isArray(histogram.counts) ? histogram.counts : [];\r\n\tconst binEdges = Array.isArray(histogram.bin_edges) ? histogram.bin_edges : [];\r\n\tif (!counts.length || binEdges.length !== counts.length + 1) {\r\n\t\treturn null;\r\n\t}\r\n\tconst maxCount = counts.reduce((acc, value) => Math.max(acc, value), 0) || 1;\r\n\treturn (\r\n\t\t<div className=\"evaluation-histogram\" aria-label=\"Residual histogram\">\r\n\t\t\t{counts.map((count, index) => {\r\n\t\t\t\tconst height = (count / maxCount) * 100;\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<div key={`bin-${index}`} className=\"evaluation-histogram__bin\" title={`${count} rows`}>\r\n\t\t\t\t\t\t<div className=\"evaluation-histogram__bar\" style={{ height: `${height}%` }} />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t);\r\n\t\t\t})}\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\ntype ResidualScatterPlotProps = {\r\n\tpoints: ModelEvaluationResidualPoint[];\r\n};\r\n\r\nconst ResidualScatterPlot: React.FC<ResidualScatterPlotProps> = ({ points }) => {\r\n\tif (!Array.isArray(points) || !points.length) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\tconst width = 320;\r\n\tconst height = 260;\r\n\tconst margin = 36;\r\n\r\n\tconst actualValues = points.map((point) => point.actual);\r\n\tconst predictedValues = points.map((point) => point.predicted);\r\n\tconst globalMin = Math.min(...actualValues, ...predictedValues);\r\n\tconst globalMax = Math.max(...actualValues, ...predictedValues);\r\n\tconst span = globalMax - globalMin || 1;\r\n\r\n\tconst scale = (value: number) => (value - globalMin) / span;\r\n\tconst projectX = (value: number) => margin + scale(value) * (width - margin * 2);\r\n\tconst projectY = (value: number) => height - margin - scale(value) * (height - margin * 2);\r\n\r\n\treturn (\r\n\t\t<div className=\"evaluation-scatter\" aria-label=\"Actual vs predicted scatter\">\r\n\t\t\t<svg viewBox={`0 0 ${width} ${height}`}>\r\n\t\t\t\t<rect x={margin} y={margin} width={width - margin * 2} height={height - margin * 2} className=\"evaluation-chart__frame\" />\r\n\t\t\t\t<line x1={margin} y1={height - margin} x2={width - margin} y2={height - margin} className=\"evaluation-chart__axis\" />\r\n\t\t\t\t<line x1={margin} y1={margin} x2={margin} y2={height - margin} className=\"evaluation-chart__axis\" />\r\n\t\t\t\t<line\r\n\t\t\t\t\tx1={projectX(globalMin)}\r\n\t\t\t\t\ty1={projectY(globalMin)}\r\n\t\t\t\t\tx2={projectX(globalMax)}\r\n\t\t\t\t\ty2={projectY(globalMax)}\r\n\t\t\t\t\tclassName=\"evaluation-curve__baseline\"\r\n\t\t\t\t/>\r\n\t\t\t\t{points.map((point, index) => (\r\n\t\t\t\t\t<circle\r\n\t\t\t\t\t\tkey={`scatter-${index}`}\r\n\t\t\t\t\t\tcx={projectX(point.actual)}\r\n\t\t\t\t\t\tcy={projectY(point.predicted)}\r\n\t\t\t\t\t\tr={2.1}\r\n\t\t\t\t\t\tclassName=\"evaluation-scatter__point\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t))}\r\n\t\t\t</svg>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport { EvaluationPackSection };\r\n","import React, { useEffect, useMemo, useState } from 'react';\r\nimport { useQuery } from '@tanstack/react-query';\r\nimport type {\r\n\tFeatureGraph,\r\n\tFeatureNodeParameter,\r\n\tTrainingJobListResponse,\r\n\tTrainingJobSummary,\r\n\tFetchTrainingJobsOptions,\r\n} from '../../../../api';\r\nimport { fetchTrainingJobs, generatePipelineId } from '../../../../api';\r\nimport { formatRelativeTime } from '../../utils/formatters';\r\n\r\ntype ModelRegistrySectionProps = {\r\n\tnodeId: string;\r\n\tsourceId?: string | null;\r\n\tgraph: FeatureGraph | null;\r\n\tparameters: FeatureNodeParameter[];\r\n\tconfig: Record<string, any> | null;\r\n\trenderParameterField: (parameter: FeatureNodeParameter) => React.ReactNode;\r\n};\r\n\r\ntype PrimaryMetric = {\r\n\tlabel: string;\r\n\tvalue: number;\r\n};\r\n\r\ntype MetricBucket = {\r\n\tlabel: string | null;\r\n\tvalues: Record<string, any>;\r\n};\r\n\r\ntype NormalizedJob = {\r\n\tjob: TrainingJobSummary;\r\n\tproblemType: 'classification' | 'regression' | 'unknown';\r\n\tmodelLabel: string;\r\n\tprimaryMetric: PrimaryMetric | null;\r\n\tmetricBucket: MetricBucket;\r\n};\r\n\r\ntype MethodSummary = {\r\n\tmodelType: string;\r\n\tlabel: string;\r\n\tbestJob: NormalizedJob | null;\r\n};\r\n\r\nconst STATUS_LABEL: Record<TrainingJobSummary['status'], string> = {\r\n\tqueued: 'Queued',\r\n\trunning: 'Running',\r\n\tsucceeded: 'Succeeded',\r\n\tfailed: 'Failed',\r\n\tcancelled: 'Cancelled',\r\n};\r\n\r\nconst STATUS_TONE: Record<TrainingJobSummary['status'], 'neutral' | 'info' | 'success' | 'danger'> = {\r\n\tqueued: 'info',\r\n\trunning: 'info',\r\n\tsucceeded: 'success',\r\n\tfailed: 'danger',\r\n\tcancelled: 'neutral',\r\n};\r\n\r\nconst METRIC_PREFERENCE = {\r\n\tclassification: [\r\n\t\t'accuracy',\r\n\t\t'f1_weighted',\r\n\t\t'roc_auc',\r\n\t\t'roc_auc_weighted',\r\n\t\t'precision_weighted',\r\n\t\t'recall_weighted',\r\n\t\t'pr_auc',\r\n\t\t'pr_auc_weighted',\r\n\t\t'g_score',\r\n\t],\r\n\tregression: ['rmse', 'mae', 'r2', 'mape'],\r\n\tfallback: ['rmse', 'mae', 'r2', 'accuracy', 'f1_weighted', 'roc_auc'],\r\n};\r\n\r\nconst CLASSIFICATION_METRICS = ['accuracy', 'f1_weighted', 'precision_weighted', 'recall_weighted', 'roc_auc', 'roc_auc_weighted'];\r\nconst REGRESSION_METRICS = ['rmse', 'mae', 'r2', 'mape'];\r\n\r\nconst LOWER_IS_BETTER = new Set(['rmse', 'mae', 'mape', 'mse']);\r\n\r\nconst MODEL_LABEL_OVERRIDES: Record<string, string> = {\r\n\tlogistic_regression: 'Logistic Regression',\r\n\trandom_forest_classifier: 'Random Forest (Classifier)',\r\n\trandom_forest_regressor: 'Random Forest (Regressor)',\r\n\tridge_regression: 'Ridge Regression',\r\n};\r\n\r\nconst isRecord = (value: unknown): value is Record<string, any> =>\r\n\tBoolean(value) && typeof value === 'object' && !Array.isArray(value);\r\n\r\nconst parseConfigBoolean = (value: unknown, fallback: boolean): boolean => {\r\n\tif (value === null || value === undefined) {\r\n\t\treturn fallback;\r\n\t}\r\n\tif (typeof value === 'boolean') {\r\n\t\treturn value;\r\n\t}\r\n\tif (typeof value === 'string') {\r\n\t\tconst normalized = value.trim().toLowerCase();\r\n\t\tif (!normalized) {\r\n\t\t\treturn fallback;\r\n\t\t}\r\n\t\tif (['true', '1', 'yes', 'on', 'enabled'].includes(normalized)) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tif (['false', '0', 'no', 'off', 'disabled'].includes(normalized)) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\tif (typeof value === 'number') {\r\n\t\tif (!Number.isFinite(value)) {\r\n\t\t\treturn fallback;\r\n\t\t}\r\n\t\treturn value !== 0;\r\n\t}\r\n\treturn Boolean(value);\r\n};\r\n\r\nconst formatMetricValue = (value: number): string => {\r\n\tif (!Number.isFinite(value)) {\r\n\t\treturn '';\r\n\t}\r\n\tif (Math.abs(value) >= 1000) {\r\n\t\treturn value.toFixed(0);\r\n\t}\r\n\tif (Math.abs(value) >= 100) {\r\n\t\treturn value.toFixed(1);\r\n\t}\r\n\tif (Math.abs(value) >= 10) {\r\n\t\treturn value.toFixed(2);\r\n\t}\r\n\treturn value.toFixed(3);\r\n};\r\n\r\nconst resolveMetricPreference = (metrics: Record<string, any> | null | undefined): string[] => {\r\n\tif (!metrics) {\r\n\t\treturn METRIC_PREFERENCE.fallback;\r\n\t}\r\n\r\n\tconst modelType = String(metrics.model_type ?? metrics.modelType ?? '').toLowerCase();\r\n\tif (modelType.includes('regress')) {\r\n\t\treturn METRIC_PREFERENCE.regression;\r\n\t}\r\n\tif (modelType.includes('class') || modelType.includes('classification')) {\r\n\t\treturn METRIC_PREFERENCE.classification;\r\n\t}\r\n\r\n\tconst hinted = String(metrics.problem_type ?? metrics.problemType ?? '').toLowerCase();\r\n\tif (hinted === 'regression') {\r\n\t\treturn METRIC_PREFERENCE.regression;\r\n\t}\r\n\tif (hinted === 'classification') {\r\n\t\treturn METRIC_PREFERENCE.classification;\r\n\t}\r\n\r\n\treturn METRIC_PREFERENCE.fallback;\r\n};\r\n\r\nconst pickPrimaryMetric = (metrics: Record<string, any> | null | undefined): PrimaryMetric | null => {\r\n\tif (!isRecord(metrics)) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\tconst metricBuckets: Array<{ values: Record<string, any>; labelPrefix: string }> = [];\r\n\tconst cvMean = metrics?.cross_validation?.metrics?.mean;\r\n\tif (isRecord(cvMean) && metrics?.cross_validation?.status === 'completed') {\r\n\t\tmetricBuckets.push({ values: cvMean, labelPrefix: 'CV mean ' });\r\n\t}\r\n\tif (isRecord(metrics.test)) {\r\n\t\tmetricBuckets.push({ values: metrics.test, labelPrefix: '' });\r\n\t}\r\n\tif (isRecord(metrics.validation)) {\r\n\t\tmetricBuckets.push({ values: metrics.validation, labelPrefix: '' });\r\n\t}\r\n\tif (isRecord(metrics.train)) {\r\n\t\tmetricBuckets.push({ values: metrics.train, labelPrefix: '' });\r\n\t}\r\n\r\n\tconst orderedKeys = resolveMetricPreference(metrics);\r\n\r\n\tfor (const bucket of metricBuckets) {\r\n\t\tfor (const key of orderedKeys) {\r\n\t\t\tconst value = bucket.values[key];\r\n\t\t\tif (typeof value === 'number' && Number.isFinite(value)) {\r\n\t\t\t\tconst label = bucket.labelPrefix ? `${bucket.labelPrefix}${key}` : key;\r\n\t\t\t\treturn { label, value };\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfor (const bucket of metricBuckets) {\r\n\t\tfor (const [key, value] of Object.entries(bucket.values)) {\r\n\t\t\tif (typeof value === 'number' && Number.isFinite(value)) {\r\n\t\t\t\tconst label = bucket.labelPrefix ? `${bucket.labelPrefix}${key}` : key;\r\n\t\t\t\treturn { label, value };\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\treturn null;\r\n};\r\n\r\nconst selectMetricBucket = (metrics: Record<string, any> | null | undefined): MetricBucket => {\r\n\tif (!isRecord(metrics)) {\r\n\t\treturn { label: null, values: {} };\r\n\t}\r\n\tif (isRecord(metrics.test)) {\r\n\t\treturn { label: 'Test', values: metrics.test };\r\n\t}\r\n\tif (isRecord(metrics.validation)) {\r\n\t\treturn { label: 'Validation', values: metrics.validation };\r\n\t}\r\n\tconst cvMean = metrics?.cross_validation?.metrics?.mean;\r\n\tif (isRecord(cvMean)) {\r\n\t\treturn { label: 'CV mean', values: cvMean };\r\n\t}\r\n\tif (isRecord(metrics.train)) {\r\n\t\treturn { label: 'Train', values: metrics.train };\r\n\t}\r\n\treturn { label: null, values: {} };\r\n};\r\n\r\nconst formatModelType = (modelType: string): string => {\r\n\tif (!modelType) {\r\n\t\treturn 'Unknown model';\r\n\t}\r\n\tconst normalized = modelType.trim();\r\n\tif (MODEL_LABEL_OVERRIDES[normalized]) {\r\n\t\treturn MODEL_LABEL_OVERRIDES[normalized];\r\n\t}\r\n\treturn normalized\r\n\t\t.split('_')\r\n\t\t.filter(Boolean)\r\n\t\t.map((chunk) => chunk.charAt(0).toUpperCase() + chunk.slice(1))\r\n\t\t.join(' ');\r\n};\r\n\r\nconst normalizeProblemType = (job: TrainingJobSummary): 'classification' | 'regression' | 'unknown' => {\r\n\tconst metadata = (job.metadata ?? {}) as Record<string, any>;\r\n\tconst candidates: Array<unknown> = [job.problem_type, metadata?.resolved_problem_type, metadata?.problem_type];\r\n\r\n\tfor (const candidate of candidates) {\r\n\t\tif (typeof candidate === 'string') {\r\n\t\t\tconst normalized = candidate.trim().toLowerCase();\r\n\t\t\tif (normalized === 'classification' || normalized === 'regression') {\r\n\t\t\t\treturn normalized;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tconst modelType = typeof job.model_type === 'string' ? job.model_type.toLowerCase() : '';\r\n\tif (modelType.includes('classifier') || modelType.includes('classification')) {\r\n\t\treturn 'classification';\r\n\t}\r\n\tif (modelType.includes('regress') || modelType.includes('regression')) {\r\n\t\treturn 'regression';\r\n\t}\r\n\r\n\tconst metrics = job.metrics as Record<string, any> | null;\r\n\tif (isRecord(metrics)) {\r\n\t\tconst metricKeys = new Set<string>();\r\n\t\tconst collectKeys = (bucket: Record<string, any> | null | undefined) => {\r\n\t\t\tif (!isRecord(bucket)) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tObject.keys(bucket).forEach((key) => metricKeys.add(key.toLowerCase()));\r\n\t\t};\r\n\r\n\t\tcollectKeys(metrics.test);\r\n\t\tcollectKeys(metrics.validation);\r\n\t\tcollectKeys(metrics.train);\r\n\t\tconst cvMean = metrics?.cross_validation?.metrics?.mean;\r\n\t\tif (isRecord(cvMean)) {\r\n\t\t\tcollectKeys(cvMean);\r\n\t\t}\r\n\r\n\t\tconst hasClassification = CLASSIFICATION_METRICS.some((metric) => metricKeys.has(metric));\r\n\t\tconst hasRegression = REGRESSION_METRICS.some((metric) => metricKeys.has(metric));\r\n\r\n\t\tif (hasClassification && !hasRegression) {\r\n\t\t\treturn 'classification';\r\n\t\t}\r\n\t\tif (hasRegression && !hasClassification) {\r\n\t\t\treturn 'regression';\r\n\t\t}\r\n\t}\r\n\r\n\treturn 'unknown';\r\n};\r\n\r\nconst normalizeJobs = (jobs: TrainingJobSummary[]): NormalizedJob[] =>\r\n\tjobs.map((job) => {\r\n\t\tconst metrics = (job.metrics ?? null) as Record<string, any> | null;\r\n\t\treturn {\r\n\t\t\tjob,\r\n\t\t\tproblemType: normalizeProblemType(job),\r\n\t\t\tmodelLabel: formatModelType(job.model_type),\r\n\t\t\tprimaryMetric: pickPrimaryMetric(metrics),\r\n\t\t\tmetricBucket: selectMetricBucket(metrics),\r\n\t\t};\r\n\t});\r\n\r\nconst coefficientForMetric = (metric: PrimaryMetric | null): number | null => {\r\n\tif (!metric || !Number.isFinite(metric.value)) {\r\n\t\treturn null;\r\n\t}\r\n\tconst label = metric.label.toLowerCase();\r\n\tconst lowerBetter = LOWER_IS_BETTER.has(label) || LOWER_IS_BETTER.has(label.replace(/^cv mean\\s+/i, ''));\r\n\treturn lowerBetter ? -metric.value : metric.value;\r\n};\r\n\r\nconst ModelRegistrySection: React.FC<ModelRegistrySectionProps> = ({\r\n\tnodeId,\r\n\tsourceId,\r\n\tgraph,\r\n\tparameters,\r\n\tconfig,\r\n\trenderParameterField,\r\n}) => {\r\n\tconst graphPayload = useMemo<FeatureGraph | null>(() => {\r\n\t\tif (!graph || !Array.isArray(graph.nodes) || !Array.isArray(graph.edges)) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\treturn {\r\n\t\t\tnodes: graph.nodes,\r\n\t\t\tedges: graph.edges,\r\n\t\t};\r\n\t}, [graph]);\r\n\r\n\tconst upstreamTrainingNodeIds = useMemo(() => {\r\n\t\tif (!graphPayload) {\r\n\t\t\treturn [] as string[];\r\n\t\t}\r\n\r\n\t\tconst nodeLookup = new Map<string, any>();\r\n\t\tgraphPayload.nodes.forEach((node: any) => {\r\n\t\t\tif (node && node.id) {\r\n\t\t\t\tnodeLookup.set(node.id, node);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tconst directTrainNodes = new Set<string>();\r\n\t\tgraphPayload.edges.forEach((edge: any) => {\r\n\t\t\tif (!edge || edge.target !== nodeId) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst sourceNode = nodeLookup.get(edge.source);\r\n\t\t\tif (sourceNode?.data?.catalogType === 'train_model_draft') {\r\n\t\t\t\tdirectTrainNodes.add(sourceNode.id);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tif (directTrainNodes.size > 0) {\r\n\t\t\treturn Array.from(directTrainNodes);\r\n\t\t}\r\n\r\n\t\tconst anyTrainNodes = graphPayload.nodes\r\n\t\t\t.filter((node: any) => node?.data?.catalogType === 'train_model_draft')\r\n\t\t\t.map((node: any) => node.id);\r\n\r\n\t\treturn anyTrainNodes;\r\n\t}, [graphPayload, nodeId]);\r\n\r\n\tconst upstreamKey = useMemo(() => {\r\n\t\tif (!upstreamTrainingNodeIds.length) {\r\n\t\t\treturn 'all';\r\n\t\t}\r\n\t\treturn upstreamTrainingNodeIds.slice().sort().join('|');\r\n\t}, [upstreamTrainingNodeIds]);\r\n\r\n\tconst [pipelineId, setPipelineId] = useState<string | null>(null);\r\n\tconst [pipelineError, setPipelineError] = useState<string | null>(null);\r\n\r\n\tuseEffect(() => {\r\n\t\tlet cancelled = false;\r\n\t\tsetPipelineError(null);\r\n\r\n\t\tif (!sourceId || !graphPayload) {\r\n\t\t\tsetPipelineId(null);\r\n\t\t\treturn () => {\r\n\t\t\t\tcancelled = true;\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\tgeneratePipelineId(sourceId, graphPayload)\r\n\t\t\t.then((value) => {\r\n\t\t\t\tif (!cancelled) {\r\n\t\t\t\t\tsetPipelineId(value);\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch((error: Error) => {\r\n\t\t\t\tif (!cancelled) {\r\n\t\t\t\t\tsetPipelineError(error?.message ?? 'Unable to compute pipeline ID');\r\n\t\t\t\t\tsetPipelineId(null);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\treturn () => {\r\n\t\t\tcancelled = true;\r\n\t\t};\r\n\t}, [graphPayload, sourceId]);\r\n\r\n\tconst showNonSuccess = parseConfigBoolean(config?.show_non_success, true);\r\n\r\n\tconst trainingJobsQueryKey = useMemo(\r\n\t\t() => ['feature-canvas', 'model-registry', sourceId ?? 'none', pipelineId ?? 'pending', upstreamKey, showNonSuccess ? 'all-statuses' : 'succeeded'],\r\n\t\t[pipelineId, showNonSuccess, sourceId, upstreamKey]\r\n\t);\r\n\r\n\tconst trainingJobsQuery = useQuery<TrainingJobListResponse, Error>({\r\n\t\tqueryKey: trainingJobsQueryKey,\r\n\t\tqueryFn: async () => {\r\n\t\t\tconst baseParams: FetchTrainingJobsOptions = {\r\n\t\t\t\tdatasetSourceId: sourceId || undefined,\r\n\t\t\t\tlimit: 50,\r\n\t\t\t};\r\n\r\n\t\t\tconst aggregatedJobs = new Map<string, TrainingJobSummary>();\r\n\t\t\tconst encounteredErrors: Error[] = [];\r\n\t\t\tlet datasetResponse: TrainingJobListResponse | null = null;\r\n\r\n\t\t\tconst appendJobs = (jobs?: TrainingJobSummary[] | null) => {\r\n\t\t\t\tif (!Array.isArray(jobs) || !jobs.length) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tjobs.forEach((job) => {\r\n\t\t\t\t\tif (job && !aggregatedJobs.has(job.id)) {\r\n\t\t\t\t\t\taggregatedJobs.set(job.id, job);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t};\r\n\r\n\t\t\tconst safeFetch = async (params: FetchTrainingJobsOptions) => {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tconst response = await fetchTrainingJobs(params);\r\n\t\t\t\t\tappendJobs(response?.jobs);\r\n\t\t\t\t\treturn response;\r\n\t\t\t\t} catch (error) {\r\n\t\t\t\t\tif (error instanceof Error) {\r\n\t\t\t\t\t\tencounteredErrors.push(error);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\tif (pipelineId) {\r\n\t\t\t\tawait safeFetch({ ...baseParams, pipelineId });\r\n\t\t\t}\r\n\r\n\t\t\tif (upstreamTrainingNodeIds.length === 1) {\r\n\t\t\t\tconst [targetNode] = upstreamTrainingNodeIds;\r\n\t\t\t\tawait safeFetch({ ...baseParams, nodeId: targetNode });\r\n\t\t\t}\r\n\r\n\t\t\tdatasetResponse = await safeFetch(baseParams);\r\n\r\n\t\t\tif (!aggregatedJobs.size) {\r\n\t\t\t\tif (datasetResponse) {\r\n\t\t\t\t\treturn datasetResponse;\r\n\t\t\t\t}\r\n\t\t\t\tif (encounteredErrors.length) {\r\n\t\t\t\t\tthrow encounteredErrors[0];\r\n\t\t\t\t}\r\n\t\t\t\treturn { jobs: [], total: 0 };\r\n\t\t\t}\r\n\r\n\t\t\tconst jobs = Array.from(aggregatedJobs.values());\r\n\t\t\tconst total = datasetResponse?.total ?? jobs.length;\r\n\t\t\treturn { jobs, total };\r\n\t\t},\r\n\t\tenabled: Boolean(sourceId),\r\n\t\tstaleTime: 30 * 1000,\r\n\t\tretry: (failureCount, error) => {\r\n\t\t\tif (error.message.includes('Sign in')) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\treturn failureCount < 2;\r\n\t\t},\r\n\t\trefetchInterval: (query) => {\r\n\t\t\tconst currentData = query.state.data as TrainingJobListResponse | undefined;\r\n\t\t\tconst jobList = currentData?.jobs ?? [];\r\n\t\t\tconst hasActiveJob = jobList.some((job) => job.status === 'queued' || job.status === 'running');\r\n\t\t\treturn hasActiveJob ? 5000 : false;\r\n\t\t},\r\n\t});\r\n\r\n\tconst allJobs = trainingJobsQuery.data?.jobs ?? [];\r\n\r\n\tconst scopedJobs = useMemo(() => {\r\n\t\tif (!allJobs.length) {\r\n\t\t\treturn [] as TrainingJobSummary[];\r\n\t\t}\r\n\r\n\t\tif (!upstreamTrainingNodeIds.length) {\r\n\t\t\treturn allJobs;\r\n\t\t}\r\n\r\n\t\tconst filtered = allJobs.filter((job) => upstreamTrainingNodeIds.includes(job.node_id));\r\n\t\treturn filtered.length ? filtered : allJobs;\r\n\t}, [allJobs, upstreamTrainingNodeIds]);\r\n\r\n\tconst normalizedJobs = useMemo(() => normalizeJobs(scopedJobs), [scopedJobs]);\r\n\r\n\tconst statusScopedJobs = useMemo(() => {\r\n\t\tif (showNonSuccess) {\r\n\t\t\treturn normalizedJobs;\r\n\t\t}\r\n\t\treturn normalizedJobs.filter((entry) => entry.job.status === 'succeeded');\r\n\t}, [normalizedJobs, showNonSuccess]);\r\n\r\n\tconst classificationJobs = useMemo(\r\n\t\t() => statusScopedJobs.filter((entry) => entry.problemType === 'classification'),\r\n\t\t[statusScopedJobs]\r\n\t);\r\n\tconst regressionJobs = useMemo(\r\n\t\t() => statusScopedJobs.filter((entry) => entry.problemType === 'regression'),\r\n\t\t[statusScopedJobs]\r\n\t);\r\n\r\n\tconst fallbackProblemType = useMemo<'classification' | 'regression'>(() => {\r\n\t\tif (!classificationJobs.length && !regressionJobs.length) {\r\n\t\t\treturn 'classification';\r\n\t\t}\r\n\t\tif (!classificationJobs.length) {\r\n\t\t\treturn 'regression';\r\n\t\t}\r\n\t\tif (!regressionJobs.length) {\r\n\t\t\treturn 'classification';\r\n\t\t}\r\n\t\treturn classificationJobs.length >= regressionJobs.length ? 'classification' : 'regression';\r\n\t}, [classificationJobs.length, regressionJobs.length]);\r\n\r\n\tconst defaultProblemSetting = typeof config?.default_problem_type === 'string'\r\n\t\t? config.default_problem_type.trim().toLowerCase()\r\n\t\t: 'auto';\r\n\r\n\tconst resolvedDefaultProblemType: 'classification' | 'regression' =\r\n\t\tdefaultProblemSetting === 'classification' || defaultProblemSetting === 'regression'\r\n\t\t\t? defaultProblemSetting\r\n\t\t\t: fallbackProblemType;\r\n\r\n\tconst [activeProblemType, setActiveProblemType] = useState<'classification' | 'regression'>(resolvedDefaultProblemType);\r\n\r\n\tuseEffect(() => {\r\n\t\tsetActiveProblemType(resolvedDefaultProblemType);\r\n\t}, [resolvedDefaultProblemType]);\r\n\r\n\tconst selectedJobs = activeProblemType === 'classification' ? classificationJobs : regressionJobs;\r\n\r\n\tconst methodOptions = useMemo(\r\n\t\t() => {\r\n\t\t\tconst counts = new Map<string, { label: string; count: number }>();\r\n\t\t\tselectedJobs.forEach((entry) => {\r\n\t\t\t\tconst key = entry.job.model_type;\r\n\t\t\t\tconst existing = counts.get(key) ?? { label: entry.modelLabel, count: 0 };\r\n\t\t\t\texisting.count += 1;\r\n\t\t\t\tcounts.set(key, existing);\r\n\t\t\t});\r\n\t\t\treturn Array.from(counts.entries())\r\n\t\t\t\t.map(([value, meta]) => ({ value, label: meta.label, count: meta.count }))\r\n\t\t\t\t.sort((a, b) => a.label.localeCompare(b.label));\r\n\t\t},\r\n\t\t[selectedJobs]\r\n\t);\r\n\r\n\tconst defaultMethodSetting = typeof config?.default_method === 'string' ? config.default_method.trim().toLowerCase() : '';\r\n\r\n\tconst [activeMethod, setActiveMethod] = useState<string>('all');\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!methodOptions.length) {\r\n\t\t\tsetActiveMethod('all');\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconst matched = methodOptions.find((option) => option.value.toLowerCase() === defaultMethodSetting);\r\n\t\tsetActiveMethod(matched ? matched.value : 'all');\r\n\t}, [defaultMethodSetting, methodOptions, activeProblemType]);\r\n\r\n\tconst filteredJobs = useMemo(() => {\r\n\t\tif (activeMethod === 'all') {\r\n\t\t\treturn selectedJobs;\r\n\t\t}\r\n\t\treturn selectedJobs.filter((entry) => entry.job.model_type === activeMethod);\r\n\t}, [activeMethod, selectedJobs]);\r\n\r\n\tconst sortedJobs = useMemo(() => {\r\n\t\treturn filteredJobs\r\n\t\t\t.slice()\r\n\t\t\t.sort((a, b) => {\r\n\t\t\t\tif (b.job.version !== a.job.version) {\r\n\t\t\t\t\treturn b.job.version - a.job.version;\r\n\t\t\t\t}\r\n\t\t\t\tconst aTime = Date.parse(a.job.updated_at ?? a.job.created_at ?? '');\r\n\t\t\t\tconst bTime = Date.parse(b.job.updated_at ?? b.job.created_at ?? '');\r\n\t\t\t\treturn bTime - aTime;\r\n\t\t\t});\r\n\t}, [filteredJobs]);\r\n\r\n\tconst methodSummaries = useMemo<MethodSummary[]>(() => {\r\n\t\tif (!selectedJobs.length) {\r\n\t\t\treturn [];\r\n\t\t}\r\n\r\n\t\tconst groups = new Map<string, NormalizedJob[]>();\r\n\t\tselectedJobs.forEach((entry) => {\r\n\t\t\tconst key = entry.job.model_type;\r\n\t\t\tconst bucket = groups.get(key) ?? [];\r\n\t\t\tbucket.push(entry);\r\n\t\t\tgroups.set(key, bucket);\r\n\t\t});\r\n\r\n\t\tconst summaries: MethodSummary[] = [];\r\n\t\tgroups.forEach((jobsForMethod, modelType) => {\r\n\t\t\tconst bestJob = jobsForMethod.reduce<NormalizedJob | null>((best, candidate) => {\r\n\t\t\t\tconst candidateScore = coefficientForMetric(candidate.primaryMetric);\r\n\t\t\t\tif (candidateScore === null) {\r\n\t\t\t\t\treturn best;\r\n\t\t\t\t}\r\n\t\t\t\tif (!best) {\r\n\t\t\t\t\treturn candidate;\r\n\t\t\t\t}\r\n\t\t\t\tconst bestScore = coefficientForMetric(best.primaryMetric);\r\n\t\t\t\tif (bestScore === null) {\r\n\t\t\t\t\treturn candidate;\r\n\t\t\t\t}\r\n\t\t\t\treturn candidateScore > bestScore ? candidate : best;\r\n\t\t\t}, null);\r\n\r\n\t\t\tsummaries.push({\r\n\t\t\t\tmodelType,\r\n\t\t\t\tlabel: formatModelType(modelType),\r\n\t\t\t\tbestJob,\r\n\t\t\t});\r\n\t\t});\r\n\r\n\t\treturn summaries.sort((a, b) => a.label.localeCompare(b.label));\r\n\t}, [selectedJobs]);\r\n\r\n\tconst registryParameters = useMemo(\r\n\t\t() =>\r\n\t\t\tparameters.filter((parameter) =>\r\n\t\t\t\t['default_problem_type', 'show_non_success'].includes(parameter.name)\r\n\t\t\t),\r\n\t\t[parameters]\r\n\t);\r\n\r\n\tconst metricColumns = activeProblemType === 'classification' ? CLASSIFICATION_METRICS : REGRESSION_METRICS;\r\n\r\n\tconst isLoading = trainingJobsQuery.isLoading || trainingJobsQuery.isFetching;\r\n\tconst loadError: Error | null = trainingJobsQuery.error ?? null;\r\n\tconst hasJobs = sortedJobs.length > 0;\r\n\r\n\treturn (\r\n\t\t<section className=\"canvas-modal__section\">\r\n\t\t\t<div className=\"canvas-modal__section-header\">\r\n\t\t\t\t<h3>Model registry</h3>\r\n\t\t\t\t{pipelineId && <span className=\"model-registry__pipeline\">Pipeline ID: {pipelineId}</span>}\r\n\t\t\t</div>\r\n\r\n\t\t\t{pipelineError && (\r\n\t\t\t\t<p className=\"canvas-modal__note canvas-modal__note--error\">{pipelineError}</p>\r\n\t\t\t)}\r\n\r\n\t\t\t{!upstreamTrainingNodeIds.length && (\r\n\t\t\t\t<p className=\"canvas-modal__note canvas-modal__note--warning\">\r\n\t\t\t\t\tConnect this node to a Train model step to populate the registry.\r\n\t\t\t\t</p>\r\n\t\t\t)}\r\n\r\n\t\t\t{registryParameters.length > 0 && (\r\n\t\t\t\t<div className=\"canvas-modal__parameter-grid model-registry__parameters\">\r\n\t\t\t\t\t{registryParameters.map((parameter) => (\r\n\t\t\t\t\t\t<React.Fragment key={parameter.name}>{renderParameterField(parameter)}</React.Fragment>\r\n\t\t\t\t\t))}\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\r\n\t\t\t<div className=\"model-registry__toolbar\">\r\n\t\t\t\t<div className=\"model-registry__tabs\" role=\"tablist\" aria-label=\"Problem type\">\r\n\t\t\t\t\t{(['classification', 'regression'] as const).map((tab) => (\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tkey={tab}\r\n\t\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t\t\trole=\"tab\"\r\n\t\t\t\t\t\t\tdata-active={activeProblemType === tab}\r\n\t\t\t\t\t\t\tclassName=\"model-registry__tab\"\r\n\t\t\t\t\t\t\tonClick={() => setActiveProblemType(tab)}\r\n\t\t\t\t\t\t\tdisabled={(tab === 'classification' && !classificationJobs.length) || (tab === 'regression' && !regressionJobs.length)}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{tab === 'classification' ? 'Classification' : 'Regression'}\r\n\t\t\t\t\t\t\t<span className=\"model-registry__tab-count\">\r\n\t\t\t\t\t\t\t\t{tab === 'classification' ? classificationJobs.length : regressionJobs.length}\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t))}\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div className=\"model-registry__methods\" aria-label=\"Model template filter\">\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t\tclassName=\"model-registry__method\"\r\n\t\t\t\t\t\tdata-active={activeMethod === 'all'}\r\n\t\t\t\t\t\tonClick={() => setActiveMethod('all')}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tAll methods\r\n\t\t\t\t\t\t<span className=\"model-registry__method-count\">{selectedJobs.length}</span>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t\t{methodOptions.map((option) => (\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tkey={option.value}\r\n\t\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t\t\tclassName=\"model-registry__method\"\r\n\t\t\t\t\t\t\tdata-active={activeMethod === option.value}\r\n\t\t\t\t\t\t\tonClick={() => setActiveMethod(option.value)}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{option.label}\r\n\t\t\t\t\t\t\t<span className=\"model-registry__method-count\">{option.count}</span>\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t))}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\r\n\t\t\t{methodSummaries.length > 0 && (\r\n\t\t\t\t<div className=\"model-registry__summary\">\r\n\t\t\t\t\t{methodSummaries.map((summary) => {\r\n\t\t\t\t\t\tconst best = summary.bestJob;\r\n\t\t\t\t\t\tconst metricLabel = best?.primaryMetric ? best.primaryMetric.label : null;\r\n\t\t\t\t\t\tconst metricValue = best?.primaryMetric ? formatMetricValue(best.primaryMetric.value) : '';\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<div key={summary.modelType} className=\"model-registry__summary-card\">\r\n\t\t\t\t\t\t\t\t<span className=\"model-registry__summary-title\">{summary.label}</span>\r\n\t\t\t\t\t\t\t\t<span className=\"model-registry__summary-metric\">\r\n\t\t\t\t\t\t\t\t\t{metricLabel || 'No metrics'}\r\n\t\t\t\t\t\t\t\t\t{metricLabel && <strong>{metricValue}</strong>}\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t{best?.job && (\r\n\t\t\t\t\t\t\t\t\t<span className=\"model-registry__summary-version\">v{best.job.version}</span>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t})}\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\r\n\t\t\t{isLoading && <p className=\"canvas-modal__note canvas-modal__note--muted\">Loading model history</p>}\r\n\t\t\t{loadError && <p className=\"canvas-modal__note canvas-modal__note--error\">{loadError.message}</p>}\r\n\r\n\t\t\t{!isLoading && !loadError && !hasJobs && (\r\n\t\t\t\t<p className=\"canvas-modal__note canvas-modal__note--muted\">\r\n\t\t\t\t\tNo model versions available for the current filters.\r\n\t\t\t\t</p>\r\n\t\t\t)}\r\n\r\n\t\t\t{hasJobs && (\r\n\t\t\t\t<div className=\"model-registry__table-wrapper\">\r\n\t\t\t\t\t<table className=\"model-registry__table\">\r\n\t\t\t\t\t\t<thead>\r\n\t\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t\t<th scope=\"col\">Version</th>\r\n\t\t\t\t\t\t\t\t<th scope=\"col\">Status</th>\r\n\t\t\t\t\t\t\t\t<th scope=\"col\">Model</th>\r\n\t\t\t\t\t\t\t\t<th scope=\"col\">Primary metric</th>\r\n\t\t\t\t\t\t\t\t{metricColumns.map((metric) => (\r\n\t\t\t\t\t\t\t\t\t<th key={metric} scope=\"col\">\r\n\t\t\t\t\t\t\t\t\t\t{metric.replace(/_/g, ' ')}\r\n\t\t\t\t\t\t\t\t\t</th>\r\n\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t<th scope=\"col\">Evaluated</th>\r\n\t\t\t\t\t\t\t\t<th scope=\"col\">Updated</th>\r\n\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t</thead>\r\n\t\t\t\t\t\t<tbody>\r\n\t\t\t\t\t\t\t\t\t\t\t{sortedJobs.map((entry) => {\r\n\t\t\t\t\t\t\t\tconst { job, primaryMetric, metricBucket } = entry;\r\n\t\t\t\t\t\t\t\tconst bucketValues = metricBucket.values || {};\r\n\t\t\t\t\t\t\t\tconst bucketLabel = metricBucket.label ?? '';\r\n\t\t\t\t\t\t\t\tconst updatedAt = job.updated_at ?? job.created_at ?? null;\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<tr key={job.id}>\r\n\t\t\t\t\t\t\t\t\t\t<td>v{job.version}</td>\r\n\t\t\t\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t\t\t\t<span className={`model-registry__status model-registry__status--${STATUS_TONE[job.status]}`}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{STATUS_LABEL[job.status]}\r\n\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t\t<td>{entry.modelLabel}</td>\r\n\t\t\t\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t\t\t\t{primaryMetric ? (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"model-registry__metric\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"model-registry__metric-label\">{primaryMetric.label}</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"model-registry__metric-value\">{formatMetricValue(primaryMetric.value)}</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t\t\t''\r\n\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{metricColumns.map((metricKey) => {\r\n\t\t\t\t\t\t\t\t\t\t\tconst metricValue = bucketValues[metricKey];\r\n\t\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td key={`${job.id}-${metricKey}`}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{typeof metricValue === 'number' && Number.isFinite(metricValue)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? formatMetricValue(metricValue)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: ''}\r\n\t\t\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t\t\t<td>{bucketLabel}</td>\r\n\t\t\t\t\t\t\t\t\t\t<td>{updatedAt ? formatRelativeTime(updatedAt) ?? updatedAt : ''}</td>\r\n\t\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t</tbody>\r\n\t\t\t\t\t</table>\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\t\t</section>\r\n\t);\r\n};\r\n\r\nexport { ModelRegistrySection };\r\n","import React, { useCallback, useEffect, useMemo, useRef, useState } from 'react';\r\nimport { useMutation, useQuery, useQueryClient } from '@tanstack/react-query';\r\nimport type {\r\n  FeatureGraph,\r\n  FeatureNodeParameter,\r\n  FeatureNodeParameterOption,\r\n  HyperparameterTuningJobCreatePayload,\r\n  HyperparameterTuningJobListResponse,\r\n  HyperparameterTuningJobResponse,\r\n  HyperparameterTuningJobSummary,\r\n  ModelHyperparameterField,\r\n  ModelHyperparametersResponse,\r\n} from '../../../../api';\r\nimport {\r\n  createHyperparameterTuningJob,\r\n  fetchHyperparameterTuningJobs,\r\n  fetchModelHyperparameters,\r\n  generatePipelineId,\r\n  type FetchHyperparameterTuningJobsOptions,\r\n} from '../../../../api';\r\nimport { formatRelativeTime } from '../../utils/formatters';\r\nimport { stableStringify } from '../../utils/configParsers';\r\nimport type { TrainModelDraftConfig } from './TrainModelDraftSection';\r\nimport type { TrainModelCVConfig } from '../../hooks/useModelingConfiguration';\r\nimport { useScalingWarning, detectScalingConvergenceFromJob, hasScalingConvergenceMessage } from './useScalingWarning';\r\n\r\nconst STATUS_LABEL: Record<string, string> = {\r\n  queued: 'Queued',\r\n  running: 'Running',\r\n  succeeded: 'Succeeded',\r\n  failed: 'Failed',\r\n  cancelled: 'Cancelled',\r\n};\r\n\r\nconst TUNING_STRATEGIES_KEY = '__tuning_strategies';\r\nconst TUNING_ACTIVE_ID_KEY = '__active_tuning_strategy_id';\r\nconst TUNING_EXPANDED_KEY = '__expanded_tuning_strategy_ids';\r\n\r\nconst SEARCH_STRATEGY_FALLBACKS = ['random', 'grid', 'halving', 'optuna'];\r\n\r\ntype SearchStrategy = string;\r\n\r\nconst normalizeSearchStrategyValue = (\r\n  value: unknown,\r\n  knownValues?: readonly string[],\r\n): SearchStrategy | null => {\r\n  if (typeof value !== 'string') {\r\n    return null;\r\n  }\r\n  const trimmed = value.trim();\r\n  if (!trimmed.length) {\r\n    return null;\r\n  }\r\n  const lowered = trimmed.toLowerCase();\r\n\r\n  if (knownValues && knownValues.length > 0) {\r\n    const match = knownValues.find((candidate) => candidate.toLowerCase() === lowered);\r\n    if (match) {\r\n      return match;\r\n    }\r\n  }\r\n\r\n  const fallbackMatch = SEARCH_STRATEGY_FALLBACKS.find((candidate) => candidate.toLowerCase() === lowered);\r\n  if (fallbackMatch) {\r\n    return fallbackMatch;\r\n  }\r\n\r\n  return trimmed;\r\n};\r\n\r\ntype HyperparameterTuningSectionProps = {\r\n  nodeId: string;\r\n  sourceId?: string | null;\r\n  graph: FeatureGraph | null;\r\n  config: TrainModelDraftConfig | null;\r\n  runtimeConfig: { modelType: string | null } | null;\r\n  cvConfig: TrainModelCVConfig;\r\n  draftConfigState: Record<string, any> | null;\r\n  renderParameterField: (parameter: FeatureNodeParameter) => React.ReactNode;\r\n  modelTypeParameter: FeatureNodeParameter | null;\r\n  modelTypeOptions: FeatureNodeParameterOption[];\r\n  searchStrategyParameter: FeatureNodeParameter | null;\r\n  searchIterationsParameter: FeatureNodeParameter | null;\r\n  searchRandomStateParameter: FeatureNodeParameter | null;\r\n  scoringMetricParameter: FeatureNodeParameter | null;\r\n  setDraftConfigState: React.Dispatch<React.SetStateAction<Record<string, any>>>;\r\n  onSaveDraftConfig?: (options?: { closeModal?: boolean }) => void | Promise<void>;\r\n};\r\n\r\ntype ParsedJsonResult<T> = {\r\n  value: T | null;\r\n  error: string | null;\r\n};\r\n\r\nconst isRecord = (value: unknown): value is Record<string, any> => {\r\n  return Boolean(value) && typeof value === 'object' && !Array.isArray(value);\r\n};\r\n\r\nconst cloneJson = <T,>(value: T): T => {\r\n  try {\r\n    return JSON.parse(JSON.stringify(value));\r\n  } catch (error) {\r\n    return value;\r\n  }\r\n};\r\n\r\nconst parseJsonObject = (raw: unknown): ParsedJsonResult<Record<string, any>> => {\r\n  if (raw === null || raw === undefined) {\r\n    return { value: null, error: null };\r\n  }\r\n  if (typeof raw === 'string') {\r\n    const trimmed = raw.trim();\r\n    if (!trimmed.length) {\r\n      return { value: null, error: null };\r\n    }\r\n    try {\r\n      const parsed = JSON.parse(trimmed);\r\n      if (isRecord(parsed)) {\r\n        return { value: parsed, error: null };\r\n      }\r\n      return { value: null, error: 'JSON must evaluate to an object.' };\r\n    } catch (error) {\r\n      return { value: null, error: 'Invalid JSON. Provide a valid JSON object.' };\r\n    }\r\n  }\r\n  if (isRecord(raw)) {\r\n    return { value: raw, error: null };\r\n  }\r\n  return { value: null, error: 'Provide a JSON object for this field.' };\r\n};\r\n\r\nconst normalizeSearchSpace = (\r\n  raw: Record<string, any> | null,\r\n): ParsedJsonResult<Record<string, any[]>> => {\r\n  if (!raw) {\r\n    return { value: null, error: null };\r\n  }\r\n\r\n  const sanitized: Record<string, any[]> = {};\r\n  Object.entries(raw).forEach(([key, value]) => {\r\n    if (!key) {\r\n      return;\r\n    }\r\n    if (Array.isArray(value)) {\r\n      const cleaned = value.filter((entry) => entry !== undefined && entry !== null);\r\n      if (cleaned.length > 0) {\r\n        sanitized[key] = cleaned.map((entry) => cloneJson(entry));\r\n      }\r\n      return;\r\n    }\r\n    if (value === null || value === undefined || value === '') {\r\n      return;\r\n    }\r\n    sanitized[key] = [cloneJson(value)];\r\n  });\r\n\r\n  if (!Object.keys(raw).length) {\r\n    return { value: null, error: 'Populate the search space with at least one hyperparameter.' };\r\n  }\r\n\r\n  if (Object.keys(sanitized).length === 0) {\r\n    return {\r\n      value: null,\r\n      error: 'Search space must list candidate values for at least one hyperparameter.',\r\n    };\r\n  }\r\n\r\n  return { value: sanitized, error: null };\r\n};\r\n\r\nconst formatMetricValue = (value: number): string => {\r\n  if (!Number.isFinite(value)) {\r\n    return '';\r\n  }\r\n  if (Math.abs(value) >= 1000) {\r\n    return value.toFixed(0);\r\n  }\r\n  if (Math.abs(value) >= 100) {\r\n    return value.toFixed(1);\r\n  }\r\n  if (Math.abs(value) >= 10) {\r\n    return value.toFixed(2);\r\n  }\r\n  return value.toFixed(3);\r\n};\r\n\r\nconst KNOWN_SPLITS = new Set(['train', 'test', 'validation']);\r\n\r\nconst sanitizeSplitList = (value: unknown): string[] => {\r\n  if (!Array.isArray(value)) {\r\n    return [];\r\n  }\r\n\r\n  const unique = new Set<string>();\r\n  value.forEach((entry) => {\r\n    if (typeof entry === 'string') {\r\n      const lowered = entry.trim().toLowerCase();\r\n      if (KNOWN_SPLITS.has(lowered)) {\r\n        unique.add(lowered);\r\n      }\r\n    }\r\n  });\r\n\r\n  return Array.from(unique);\r\n};\r\n\r\nconst filterHyperparametersByFields = (\r\n  values: Record<string, any> | null | undefined,\r\n  fieldNames: Set<string>,\r\n): Record<string, any> => {\r\n  if (!values || fieldNames.size === 0) {\r\n    return {};\r\n  }\r\n  const filtered: Record<string, any> = {};\r\n  Object.entries(values).forEach(([key, value]) => {\r\n    if (fieldNames.has(key)) {\r\n      filtered[key] = value;\r\n    }\r\n  });\r\n  return filtered;\r\n};\r\n\r\nconst filterSearchSpaceByFields = (\r\n  values: Record<string, any> | null | undefined,\r\n  fieldNames: Set<string>,\r\n): Record<string, any[]> => {\r\n  if (!values || fieldNames.size === 0) {\r\n    return {};\r\n  }\r\n  const filtered: Record<string, any[]> = {};\r\n  Object.entries(values).forEach(([key, rawValue]) => {\r\n    if (!fieldNames.has(key)) {\r\n      return;\r\n    }\r\n    if (Array.isArray(rawValue)) {\r\n      const cleaned = rawValue\r\n        .map((entry) => cloneJson(entry))\r\n        .filter((entry) => entry !== undefined && entry !== null && entry !== '');\r\n      if (cleaned.length > 0) {\r\n        filtered[key] = cleaned;\r\n      }\r\n      return;\r\n    }\r\n    if (rawValue !== undefined && rawValue !== null && rawValue !== '') {\r\n      filtered[key] = [cloneJson(rawValue)];\r\n    }\r\n  });\r\n  return filtered;\r\n};\r\n\r\ntype SearchSpaceParseResult = {\r\n  values: any[];\r\n  error: string | null;\r\n};\r\n\r\nconst parseSearchInput = (\r\n  field: ModelHyperparameterField,\r\n  rawText: string,\r\n): SearchSpaceParseResult => {\r\n  const tokens = rawText\r\n    .split(/[\\n,]+/)\r\n    .map((token) => token.trim())\r\n    .filter((token) => token.length > 0);\r\n\r\n  if (tokens.length === 0) {\r\n    return { values: [], error: null };\r\n  }\r\n\r\n  const values: any[] = [];\r\n  const invalidTokens: string[] = [];\r\n  const selectOptions = Array.isArray(field.options)\r\n    ? new Set(field.options.map((option) => option.value))\r\n    : null;\r\n\r\n  tokens.forEach((token) => {\r\n    if (field.type === 'number') {\r\n      const parsed = Number(token);\r\n      if (Number.isFinite(parsed)) {\r\n        values.push(parsed);\r\n      } else {\r\n        invalidTokens.push(token);\r\n      }\r\n      return;\r\n    }\r\n\r\n    if (field.type === 'boolean') {\r\n      const lowered = token.toLowerCase();\r\n      if (['true', '1', 'yes', 'y'].includes(lowered)) {\r\n        values.push(true);\r\n        return;\r\n      }\r\n      if (['false', '0', 'no', 'n'].includes(lowered)) {\r\n        values.push(false);\r\n        return;\r\n      }\r\n      invalidTokens.push(token);\r\n      return;\r\n    }\r\n\r\n    if (field.type === 'select') {\r\n      if (selectOptions && !selectOptions.has(token)) {\r\n        invalidTokens.push(token);\r\n        return;\r\n      }\r\n      values.push(token);\r\n      return;\r\n    }\r\n\r\n    values.push(token);\r\n  });\r\n\r\n  const dedupedValues: any[] = [];\r\n  const seenKeys = new Set<string>();\r\n  values.forEach((value) => {\r\n    const key = typeof value === 'object' ? JSON.stringify(value) : String(value);\r\n    if (!seenKeys.has(key)) {\r\n      seenKeys.add(key);\r\n      dedupedValues.push(value);\r\n    }\r\n  });\r\n\r\n  if (invalidTokens.length > 0) {\r\n    const preview = invalidTokens.slice(0, 3).join(', ');\r\n    const suffix = invalidTokens.length > 3 ? '' : '';\r\n    return {\r\n      values: dedupedValues,\r\n      error: `Invalid value${invalidTokens.length > 1 ? 's' : ''}: ${preview}${suffix}`,\r\n    };\r\n  }\r\n\r\n  return { values: dedupedValues, error: null };\r\n};\r\n\r\nconst formatSearchValue = (field: ModelHyperparameterField, value: any): string => {\r\n  if (value === null || value === undefined) {\r\n    return '';\r\n  }\r\n  if (typeof value === 'number') {\r\n    return Number.isFinite(value) ? value.toString() : '';\r\n  }\r\n  if (typeof value === 'boolean') {\r\n    return value ? 'true' : 'false';\r\n  }\r\n  if (field.type === 'select' && typeof value === 'string') {\r\n    return value;\r\n  }\r\n  return String(value);\r\n};\r\n\r\nconst formatValuePreview = (value: any): string => {\r\n  if (value === null || value === undefined) {\r\n    return '';\r\n  }\r\n  if (typeof value === 'number') {\r\n    return Number.isFinite(value) ? value.toString() : '';\r\n  }\r\n  if (typeof value === 'boolean') {\r\n    return value ? 'True' : 'False';\r\n  }\r\n  if (typeof value === 'string') {\r\n    return value;\r\n  }\r\n  try {\r\n    return JSON.stringify(value);\r\n  } catch (error) {\r\n    return String(value);\r\n  }\r\n};\r\n\r\nconst toFiniteNumber = (value: unknown): number | null => {\r\n  if (typeof value === 'number' && Number.isFinite(value)) {\r\n    return value;\r\n  }\r\n  if (typeof value === 'string' && value.trim().length) {\r\n    const parsed = Number(value);\r\n    return Number.isFinite(parsed) ? parsed : null;\r\n  }\r\n  return null;\r\n};\r\n\r\nconst clampNumber = (value: number, min?: number | null, max?: number | null): number => {\r\n  let result = value;\r\n  if (typeof min === 'number' && Number.isFinite(min)) {\r\n    result = Math.max(result, min);\r\n  }\r\n  if (typeof max === 'number' && Number.isFinite(max)) {\r\n    result = Math.min(result, max);\r\n  }\r\n  return result;\r\n};\r\n\r\nconst buildDefaultSearchSpace = (\r\n  fields: ModelHyperparameterField[],\r\n  defaults: Record<string, any>,\r\n): Record<string, any[]> => {\r\n  const space: Record<string, any[]> = {};\r\n\r\n  const solverField = fields.find((field) => field?.name === 'solver');\r\n  const penaltyField = fields.find((field) => field?.name === 'penalty');\r\n  const isLogisticRegressionConfig = Boolean(\r\n    solverField &&\r\n      penaltyField &&\r\n      Array.isArray(solverField.options) &&\r\n      solverField.options.some((option) => option?.value === 'liblinear') &&\r\n      Array.isArray(penaltyField.options) &&\r\n      penaltyField.options.some((option) => option?.value === 'elasticnet'),\r\n  );\r\n  const logisticSafeSolvers = new Set(['lbfgs', 'saga']);\r\n  const logisticSafePenalties = new Set(['l2', 'none']);\r\n\r\n  fields.forEach((field) => {\r\n    if (!field?.name) {\r\n      return;\r\n    }\r\n\r\n    const candidateMap = new Map<string, any>();\r\n    const addCandidate = (value: any) => {\r\n      if (value === undefined || value === null) {\r\n        return;\r\n      }\r\n      if (typeof value === 'number' && !Number.isFinite(value)) {\r\n        return;\r\n      }\r\n      const key = typeof value === 'object' ? JSON.stringify(value) : `${typeof value}:${String(value)}`;\r\n      if (!candidateMap.has(key)) {\r\n        candidateMap.set(key, cloneJson(value));\r\n      }\r\n    };\r\n\r\n    const defaultValue = defaults?.[field.name];\r\n\r\n    if (isLogisticRegressionConfig && field.name === 'solver') {\r\n      const options = Array.isArray(field.options) ? field.options : [];\r\n      options.forEach((option) => {\r\n        if (option?.value && logisticSafeSolvers.has(String(option.value))) {\r\n          addCandidate(option.value);\r\n        }\r\n      });\r\n      if (!candidateMap.size && typeof defaultValue === 'string' && logisticSafeSolvers.has(defaultValue)) {\r\n        addCandidate(defaultValue);\r\n      }\r\n      if (!candidateMap.size) {\r\n        logisticSafeSolvers.forEach((solver) => addCandidate(solver));\r\n      }\r\n    } else if (isLogisticRegressionConfig && field.name === 'penalty') {\r\n      const options = Array.isArray(field.options) ? field.options : [];\r\n      options.forEach((option) => {\r\n        if (option?.value && logisticSafePenalties.has(String(option.value))) {\r\n          addCandidate(option.value);\r\n        }\r\n      });\r\n      if (!candidateMap.size && typeof defaultValue === 'string' && logisticSafePenalties.has(defaultValue)) {\r\n        addCandidate(defaultValue);\r\n      }\r\n      if (!candidateMap.size) {\r\n        logisticSafePenalties.forEach((penalty) => addCandidate(penalty));\r\n      }\r\n    } else if (field.type === 'number') {\r\n      const numericDefault = toFiniteNumber(defaultValue);\r\n      const numericMin = toFiniteNumber(field.min);\r\n      const numericMax = toFiniteNumber(field.max);\r\n\r\n      if (numericMin !== null) {\r\n        addCandidate(numericMin);\r\n      }\r\n      if (numericDefault !== null) {\r\n        addCandidate(clampNumber(numericDefault, numericMin, numericMax));\r\n      }\r\n      if (numericMax !== null) {\r\n        addCandidate(numericMax);\r\n      }\r\n\r\n      if (candidateMap.size <= 1 && numericDefault !== null) {\r\n        const step = toFiniteNumber(field.step);\r\n        if (step !== null && step > 0) {\r\n          addCandidate(clampNumber(numericDefault + step, numericMin, numericMax));\r\n          addCandidate(clampNumber(numericDefault - step, numericMin, numericMax));\r\n        } else {\r\n          addCandidate(clampNumber(numericDefault * 1.5, numericMin, numericMax));\r\n          addCandidate(clampNumber(numericDefault * 0.5, numericMin, numericMax));\r\n        }\r\n      }\r\n    } else if (field.type === 'boolean') {\r\n      addCandidate(true);\r\n      addCandidate(false);\r\n      if (typeof defaultValue === 'boolean') {\r\n        addCandidate(defaultValue);\r\n      }\r\n    } else if (field.type === 'select') {\r\n      (field.options ?? []).slice(0, 6).forEach((option) => {\r\n        if (option?.value !== undefined) {\r\n          addCandidate(option.value);\r\n        }\r\n      });\r\n      if (typeof defaultValue === 'string' && defaultValue.trim().length) {\r\n        addCandidate(defaultValue.trim());\r\n      }\r\n    } else {\r\n      if (typeof defaultValue === 'string' && defaultValue.trim().length) {\r\n        addCandidate(defaultValue.trim());\r\n      }\r\n    }\r\n\r\n    const collected = Array.from(candidateMap.values());\r\n    if (collected.length > 0) {\r\n      space[field.name] = collected;\r\n    }\r\n  });\r\n\r\n  return space;\r\n};\r\n\r\nconst SCORING_SUGGESTIONS: Record<'classification' | 'regression', Array<{ value: string; label: string }>> = {\r\n  classification: [\r\n    { value: 'accuracy', label: 'Accuracy' },\r\n    { value: 'balanced_accuracy', label: 'Balanced accuracy' },\r\n    { value: 'f1', label: 'F1' },\r\n    { value: 'f1_macro', label: 'F1 macro' },\r\n    { value: 'f1_weighted', label: 'F1 weighted' },\r\n    { value: 'precision', label: 'Precision' },\r\n    { value: 'recall', label: 'Recall' },\r\n    { value: 'roc_auc', label: 'ROC AUC (binary)' },\r\n    { value: 'roc_auc_ovr', label: 'ROC AUC (one-vs-rest)' },\r\n  ],\r\n  regression: [\r\n    { value: 'neg_mean_squared_error', label: 'Negative MSE' },\r\n    { value: 'neg_root_mean_squared_error', label: 'Negative RMSE' },\r\n    { value: 'neg_mean_absolute_error', label: 'Negative MAE' },\r\n    { value: 'neg_median_absolute_error', label: 'Negative MedAE' },\r\n    { value: 'r2', label: 'R' },\r\n  ],\r\n};\r\n\r\ntype TuningStrategyDraft = {\r\n  id: string;\r\n  label: string;\r\n  config: Record<string, any>;\r\n  searchSpaceTexts: Record<string, string>;\r\n  searchSpaceFieldErrors: Record<string, string | null>;\r\n  hasAutoFilledSearchSpace: boolean;\r\n  searchSpaceManuallyCleared: boolean;\r\n};\r\n\r\nconst createStrategyId = () => `strategy-${Math.random().toString(36).slice(2, 10)}`;\r\n\r\nconst stripTuningMetadata = (config: Record<string, any> | null | undefined): Record<string, any> => {\r\n  if (!isRecord(config)) {\r\n    return {};\r\n  }\r\n  const cloned = cloneJson(config);\r\n  if (!isRecord(cloned)) {\r\n    return {};\r\n  }\r\n  delete cloned[TUNING_STRATEGIES_KEY];\r\n  delete cloned[TUNING_ACTIVE_ID_KEY];\r\n  delete cloned[TUNING_EXPANDED_KEY];\r\n  return cloned;\r\n};\r\n\r\nconst cloneConfigForStrategy = (config: Record<string, any> | null | undefined): Record<string, any> => {\r\n  return stripTuningMetadata(config);\r\n};\r\n\r\nconst createStrategyDraft = (\r\n  label: string,\r\n  config: Record<string, any> | null | undefined,\r\n  extras?: Partial<Omit<TuningStrategyDraft, 'id' | 'label' | 'config'>>,\r\n): TuningStrategyDraft => ({\r\n  id: createStrategyId(),\r\n  label,\r\n  config: cloneConfigForStrategy(config),\r\n  searchSpaceTexts: extras?.searchSpaceTexts ? { ...extras.searchSpaceTexts } : {},\r\n  searchSpaceFieldErrors: extras?.searchSpaceFieldErrors ? { ...extras.searchSpaceFieldErrors } : {},\r\n  hasAutoFilledSearchSpace: extras?.hasAutoFilledSearchSpace ?? false,\r\n  searchSpaceManuallyCleared: extras?.searchSpaceManuallyCleared ?? false,\r\n});\r\n\r\nconst createStrategyLabel = (ordinal: number): string => `Strategy ${ordinal}`;\r\n\r\ntype PersistedStrategyEntry = {\r\n  id: string;\r\n  label: string;\r\n  config: Record<string, any>;\r\n  searchSpaceTexts: Record<string, string>;\r\n  searchSpaceFieldErrors: Record<string, string | null>;\r\n  hasAutoFilledSearchSpace: boolean;\r\n  searchSpaceManuallyCleared: boolean;\r\n};\r\n\r\ntype PersistedStrategyMetadata = {\r\n  strategies: PersistedStrategyEntry[];\r\n  activeId: string | null;\r\n  expandedIds: string[];\r\n};\r\n\r\nconst sanitizeStringMap = (raw: unknown): Record<string, string> => {\r\n  if (!isRecord(raw)) {\r\n    return {};\r\n  }\r\n  return Object.keys(raw)\r\n    .filter((key) => typeof raw[key] === 'string')\r\n    .sort()\r\n    .reduce<Record<string, string>>((accumulator, key) => {\r\n      accumulator[key] = String(raw[key]);\r\n      return accumulator;\r\n    }, {});\r\n};\r\n\r\nconst sanitizeNullableStringMap = (raw: unknown): Record<string, string | null> => {\r\n  if (!isRecord(raw)) {\r\n    return {};\r\n  }\r\n  return Object.keys(raw)\r\n    .filter((key) => raw[key] === null || typeof raw[key] === 'string')\r\n    .sort()\r\n    .reduce<Record<string, string | null>>((accumulator, key) => {\r\n      const value = raw[key];\r\n      accumulator[key] = value === null ? null : String(value);\r\n      return accumulator;\r\n    }, {});\r\n};\r\n\r\nconst extractStoredStrategyMetadataFields = (config: Record<string, any> | null | undefined): Record<string, any> => {\r\n  if (!isRecord(config)) {\r\n    return {};\r\n  }\r\n    const metadata: Record<string, any> = {};\r\n  if (Object.prototype.hasOwnProperty.call(config, TUNING_STRATEGIES_KEY)) {\r\n    metadata[TUNING_STRATEGIES_KEY] = cloneJson(config[TUNING_STRATEGIES_KEY]);\r\n  }\r\n  if (Object.prototype.hasOwnProperty.call(config, TUNING_ACTIVE_ID_KEY)) {\r\n    metadata[TUNING_ACTIVE_ID_KEY] = config[TUNING_ACTIVE_ID_KEY];\r\n  }\r\n  if (Object.prototype.hasOwnProperty.call(config, TUNING_EXPANDED_KEY)) {\r\n    metadata[TUNING_EXPANDED_KEY] = cloneJson(config[TUNING_EXPANDED_KEY]);\r\n  }\r\n  return metadata;\r\n};\r\n\r\nconst createEmptyPersistedMetadata = (): PersistedStrategyMetadata => ({\r\n  strategies: [],\r\n  activeId: null,\r\n  expandedIds: [],\r\n});\r\n\r\nconst convertConfigToPersistedMetadata = (\r\n  config: Record<string, any> | null | undefined,\r\n): PersistedStrategyMetadata => {\r\n  const metadata = createEmptyPersistedMetadata();\r\n  if (!isRecord(config)) {\r\n    return metadata;\r\n  }\r\n\r\n  const rawStrategies = config[TUNING_STRATEGIES_KEY];\r\n  if (Array.isArray(rawStrategies)) {\r\n    const seenIds = new Set<string>();\r\n    rawStrategies.forEach((entry) => {\r\n      if (!isRecord(entry)) {\r\n        return;\r\n      }\r\n      let id = typeof entry.id === 'string' ? entry.id.trim() : '';\r\n      if (!id || seenIds.has(id)) {\r\n        id = createStrategyId();\r\n      }\r\n      seenIds.add(id);\r\n\r\n      const labelRaw = typeof entry.label === 'string' ? entry.label.trim() : '';\r\n      const label = labelRaw.length ? labelRaw : createStrategyLabel(metadata.strategies.length + 1);\r\n\r\n      const baseConfig = isRecord(entry.config) ? entry.config : {};\r\n      const strategyEntry: PersistedStrategyEntry = {\r\n        id,\r\n        label,\r\n        config: stripTuningMetadata(baseConfig),\r\n        searchSpaceTexts: sanitizeStringMap(entry.searchSpaceTexts),\r\n        searchSpaceFieldErrors: sanitizeNullableStringMap(entry.searchSpaceFieldErrors),\r\n        hasAutoFilledSearchSpace: Boolean(entry.hasAutoFilledSearchSpace),\r\n        searchSpaceManuallyCleared: Boolean(entry.searchSpaceManuallyCleared),\r\n      };\r\n      metadata.strategies.push(strategyEntry);\r\n    });\r\n  }\r\n\r\n  const availableIds = new Set(metadata.strategies.map((entry) => entry.id));\r\n\r\n  const rawActiveId = config[TUNING_ACTIVE_ID_KEY];\r\n  const candidateActiveId = typeof rawActiveId === 'string' ? rawActiveId.trim() : '';\r\n  metadata.activeId = candidateActiveId && availableIds.has(candidateActiveId)\r\n    ? candidateActiveId\r\n    : metadata.strategies[0]?.id ?? null;\r\n\r\n  const rawExpanded = config[TUNING_EXPANDED_KEY];\r\n  const expandedIds = Array.isArray(rawExpanded)\r\n    ? rawExpanded\r\n        .map((entry) => (typeof entry === 'string' ? entry.trim() : ''))\r\n        .filter((entry): entry is string => Boolean(entry) && availableIds.has(entry))\r\n    : [];\r\n\r\n  if (metadata.activeId && !expandedIds.includes(metadata.activeId)) {\r\n    expandedIds.push(metadata.activeId);\r\n  }\r\n\r\n  metadata.expandedIds = Array.from(new Set(expandedIds)).sort();\r\n\r\n  return metadata;\r\n};\r\n\r\nconst buildStrategyDraftFromPersisted = (entry: PersistedStrategyEntry): TuningStrategyDraft => ({\r\n  id: entry.id,\r\n  label: entry.label,\r\n  config: cloneConfigForStrategy(entry.config),\r\n  searchSpaceTexts: { ...entry.searchSpaceTexts },\r\n  searchSpaceFieldErrors: { ...entry.searchSpaceFieldErrors },\r\n  hasAutoFilledSearchSpace: entry.hasAutoFilledSearchSpace,\r\n  searchSpaceManuallyCleared: entry.searchSpaceManuallyCleared,\r\n});\r\n\r\nconst convertDraftStateToPersistedMetadata = (\r\n  strategies: TuningStrategyDraft[],\r\n  activeStrategyId: string,\r\n  expandedStrategyIds: Set<string>,\r\n): PersistedStrategyMetadata => {\r\n  const persistedStrategies = strategies.map((strategy, index) => ({\r\n    id: typeof strategy.id === 'string' && strategy.id.trim().length ? strategy.id : createStrategyId(),\r\n    label:\r\n      typeof strategy.label === 'string' && strategy.label.trim().length\r\n        ? strategy.label\r\n        : createStrategyLabel(index + 1),\r\n    config: stripTuningMetadata(strategy.config),\r\n    searchSpaceTexts: sanitizeStringMap(strategy.searchSpaceTexts),\r\n    searchSpaceFieldErrors: sanitizeNullableStringMap(strategy.searchSpaceFieldErrors),\r\n    hasAutoFilledSearchSpace: Boolean(strategy.hasAutoFilledSearchSpace),\r\n    searchSpaceManuallyCleared: Boolean(strategy.searchSpaceManuallyCleared),\r\n  }));\r\n\r\n  const availableIds = new Set(persistedStrategies.map((entry) => entry.id));\r\n  const resolvedActiveId =\r\n    typeof activeStrategyId === 'string' && availableIds.has(activeStrategyId)\r\n      ? activeStrategyId\r\n      : persistedStrategies[0]?.id ?? null;\r\n\r\n  const expandedArray = Array.from(expandedStrategyIds ?? new Set<string>())\r\n    .filter((id) => availableIds.has(id));\r\n  if (resolvedActiveId && !expandedArray.includes(resolvedActiveId)) {\r\n    expandedArray.push(resolvedActiveId);\r\n  }\r\n\r\n  return {\r\n    strategies: persistedStrategies,\r\n    activeId: resolvedActiveId,\r\n    expandedIds: Array.from(new Set(expandedArray)).sort(),\r\n  };\r\n};\r\n\r\nconst resolveActiveStrategyId = (\r\n  strategies: TuningStrategyDraft[],\r\n  requestedId: string | null,\r\n): string => {\r\n  if (requestedId && strategies.some((strategy) => strategy.id === requestedId)) {\r\n    return requestedId;\r\n  }\r\n  return strategies[0]?.id ?? '';\r\n};\r\n\r\nconst resolveExpandedStrategyIds = (\r\n  strategies: TuningStrategyDraft[],\r\n  requestedIds: string[],\r\n): Set<string> => {\r\n  const available = new Set(strategies.map((strategy) => strategy.id));\r\n  const resolved = requestedIds.filter((id) => available.has(id));\r\n  if (!resolved.length && strategies[0]) {\r\n    resolved.push(strategies[0].id);\r\n  }\r\n  return new Set(resolved);\r\n};\r\n\r\nconst buildMetadataSignature = (metadata: PersistedStrategyMetadata): string => {\r\n  return stableStringify(metadata);\r\n};\r\n\r\nconst shallowEqualRecord = (a: Record<string, any>, b: Record<string, any>): boolean => {\r\n  const keysA = Object.keys(a);\r\n  const keysB = Object.keys(b);\r\n  if (keysA.length !== keysB.length) {\r\n    return false;\r\n  }\r\n  for (const key of keysA) {\r\n    if (a[key] !== b[key]) {\r\n      return false;\r\n    }\r\n  }\r\n  return true;\r\n};\r\n\r\nexport const HyperparameterTuningSection: React.FC<HyperparameterTuningSectionProps> = ({\r\n  nodeId,\r\n  sourceId,\r\n  graph,\r\n  config,\r\n  runtimeConfig,\r\n  cvConfig,\r\n  draftConfigState,\r\n  renderParameterField,\r\n  modelTypeParameter,\r\n  modelTypeOptions,\r\n  searchStrategyParameter,\r\n  searchIterationsParameter,\r\n  searchRandomStateParameter,\r\n  scoringMetricParameter,\r\n  setDraftConfigState,\r\n  onSaveDraftConfig,\r\n}) => {\r\n  const queryClient = useQueryClient();\r\n  const [pipelineId, setPipelineId] = useState<string | null>(null);\r\n  const [pipelineError, setPipelineError] = useState<string | null>(null);\r\n  const [lastCreatedJob, setLastCreatedJob] = useState<HyperparameterTuningJobResponse | null>(null);\r\n  const [lastCreatedJobCount, setLastCreatedJobCount] = useState<number>(0);\r\n  const [pipelineIdFromSavedConfig, setPipelineIdFromSavedConfig] = useState<string | null>(null);\r\n  const [hasDraftChanges, setHasDraftChanges] = useState(false);\r\n  const [batchEnqueueError, setBatchEnqueueError] = useState<string | null>(null);\r\n  const [showScalingDetails, setShowScalingDetails] = useState(false);\r\n\r\n  const targetColumn = (config?.targetColumn ?? '').trim();\r\n  const problemType = config?.problemType === 'regression' ? 'regression' : 'classification';\r\n  const modelTypeParameterName = modelTypeParameter?.name ?? 'model_type';\r\n  const searchStrategyParameterName = searchStrategyParameter?.name ?? 'search_strategy';\r\n  const searchIterationsParameterName = searchIterationsParameter?.name ?? 'search_iterations';\r\n  const searchRandomStateParameterName = searchRandomStateParameter?.name ?? 'search_random_state';\r\n  const scoringMetricParameterName = scoringMetricParameter?.name ?? 'scoring_metric';\r\n  const selectedModelTypeRaw = draftConfigState?.[modelTypeParameterName];\r\n  const modelType = typeof selectedModelTypeRaw === 'string' && selectedModelTypeRaw.trim().length\r\n    ? selectedModelTypeRaw.trim()\r\n    : (runtimeConfig?.modelType ?? '').trim();\r\n\r\n  const hyperparamQuery = useQuery<ModelHyperparametersResponse, Error>({\r\n    queryKey: ['model-hyperparameters', modelType],\r\n    queryFn: () => fetchModelHyperparameters(modelType),\r\n    enabled: Boolean(modelType),\r\n    staleTime: 5 * 60 * 1000,\r\n  });\r\n\r\n  const hyperparamFields = hyperparamQuery.data?.fields ?? [];\r\n  const hyperparamDefaults = hyperparamQuery.data?.defaults ?? {};\r\n\r\n  const allowedHyperparamNames = useMemo(() => {\r\n    if (!hyperparamFields.length) {\r\n      return new Set<string>();\r\n    }\r\n    const fieldNames = new Set<string>();\r\n    hyperparamFields.forEach((field) => {\r\n      if (field?.name) {\r\n        fieldNames.add(field.name);\r\n      }\r\n    });\r\n    return fieldNames;\r\n  }, [hyperparamFields]);\r\n\r\n  const cvEnabled = Boolean(cvConfig?.enabled);\r\n  const cvStrategy = cvConfig?.strategy ?? 'auto';\r\n  const cvFolds = typeof cvConfig?.folds === 'number' ? cvConfig.folds : 5;\r\n  const cvShuffle = Boolean(cvConfig?.shuffle);\r\n  const cvRandomState = cvConfig?.randomState ?? null;\r\n\r\n  const searchStrategyOptions = useMemo<string[]>(() => {\r\n    const values: string[] = [];\r\n    (searchStrategyParameter?.options ?? []).forEach((option) => {\r\n      if (!option || typeof option.value !== 'string') {\r\n        return;\r\n      }\r\n      const trimmed = option.value.trim();\r\n      if (!trimmed.length) {\r\n        return;\r\n      }\r\n      const lowered = trimmed.toLowerCase();\r\n      if (!values.some((candidate) => candidate.toLowerCase() === lowered)) {\r\n        values.push(trimmed);\r\n      }\r\n    });\r\n    return values;\r\n  }, [searchStrategyParameter]);\r\n\r\n  const availableSearchStrategies = useMemo<SearchStrategy[]>(() => {\r\n    if (searchStrategyOptions.length > 0) {\r\n      return [...searchStrategyOptions];\r\n    }\r\n    return [...SEARCH_STRATEGY_FALLBACKS];\r\n  }, [searchStrategyOptions]);\r\n\r\n  const parameterDefaultStrategy = normalizeSearchStrategyValue(\r\n    searchStrategyParameter?.default,\r\n    searchStrategyOptions,\r\n  );\r\n  const draftSearchStrategy = normalizeSearchStrategyValue(\r\n    draftConfigState?.[searchStrategyParameterName],\r\n    searchStrategyOptions,\r\n  );\r\n  const searchStrategy: SearchStrategy =\r\n    draftSearchStrategy ??\r\n    parameterDefaultStrategy ??\r\n    availableSearchStrategies[0] ??\r\n    SEARCH_STRATEGY_FALLBACKS[0];\r\n\r\n  const rawIterations = draftConfigState?.[searchIterationsParameterName];\r\n  let searchIterations: number | null = null;\r\n  if (typeof rawIterations === 'number' && Number.isFinite(rawIterations)) {\r\n    searchIterations = Math.max(1, Math.floor(rawIterations));\r\n  } else if (typeof rawIterations === 'string') {\r\n    const parsed = Number(rawIterations.trim());\r\n    if (Number.isFinite(parsed) && parsed > 0) {\r\n      searchIterations = Math.max(1, Math.floor(parsed));\r\n    }\r\n  }\r\n\r\n  const rawSearchRandomState = draftConfigState?.[searchRandomStateParameterName];\r\n  let searchRandomState: number | null = null;\r\n  if (typeof rawSearchRandomState === 'number' && Number.isFinite(rawSearchRandomState)) {\r\n    searchRandomState = Math.trunc(rawSearchRandomState);\r\n  } else if (typeof rawSearchRandomState === 'string') {\r\n    const parsed = Number(rawSearchRandomState.trim());\r\n    if (Number.isFinite(parsed)) {\r\n      searchRandomState = Math.trunc(parsed);\r\n    }\r\n  }\r\n\r\n  const searchIterationsDefault =\r\n    typeof searchIterationsParameter?.default === 'number' && Number.isFinite(searchIterationsParameter.default)\r\n      ? Math.max(1, Math.floor(searchIterationsParameter.default))\r\n      : null;\r\n\r\n  const searchRandomStateDefault =\r\n    typeof searchRandomStateParameter?.default === 'number' && Number.isFinite(searchRandomStateParameter.default)\r\n      ? Math.trunc(searchRandomStateParameter.default)\r\n      : null;\r\n\r\n  const rawScoringMetric = typeof draftConfigState?.[scoringMetricParameterName] === 'string'\r\n    ? String(draftConfigState[scoringMetricParameterName]).trim()\r\n    : '';\r\n  const scoringMetric = rawScoringMetric.length ? rawScoringMetric : null;\r\n\r\n  const baselineParse = useMemo(() => parseJsonObject(draftConfigState?.baseline_hyperparameters), [\r\n    draftConfigState?.baseline_hyperparameters,\r\n  ]);\r\n\r\n  const searchSpaceParse = useMemo(() => parseJsonObject(draftConfigState?.search_space), [\r\n    draftConfigState?.search_space,\r\n  ]);\r\n\r\n  const normalizedSearchSpace = useMemo(\r\n    () => normalizeSearchSpace(searchSpaceParse.value),\r\n    [searchSpaceParse.value],\r\n  );\r\n\r\n  const baselineHyperparameters = baselineParse.value;\r\n  const baselineError = baselineParse.error;\r\n  const sanitizedSearchSpace = normalizedSearchSpace.value;\r\n  const searchSpaceError = searchSpaceParse.error ?? normalizedSearchSpace.error;\r\n\r\n  const filteredBaselineOverrides = useMemo(\r\n    () => filterHyperparametersByFields(baselineHyperparameters, allowedHyperparamNames),\r\n    [allowedHyperparamNames, baselineHyperparameters],\r\n  );\r\n\r\n  const filteredSearchOverrides = useMemo(\r\n    () => filterSearchSpaceByFields(sanitizedSearchSpace, allowedHyperparamNames),\r\n    [allowedHyperparamNames, sanitizedSearchSpace],\r\n  );\r\n\r\n  const baselineOverrideCount = useMemo(() => Object.keys(filteredBaselineOverrides).length, [filteredBaselineOverrides]);\r\n  const searchOverrideCount = useMemo(() => Object.keys(filteredSearchOverrides).length, [filteredSearchOverrides]);\r\n  const hasSearchSpaceEntries = searchOverrideCount > 0;\r\n\r\n  const [searchSpaceTexts, setSearchSpaceTexts] = useState<Record<string, string>>({});\r\n  const [searchSpaceFieldErrors, setSearchSpaceFieldErrors] = useState<Record<string, string | null>>({});\r\n  const [hasAutoFilledSearchSpace, setHasAutoFilledSearchSpace] = useState(false);\r\n  const [searchSpaceManuallyCleared, setSearchSpaceManuallyCleared] = useState(false);\r\n  const initialMetadataRef = useRef<{\r\n    strategies: TuningStrategyDraft[];\r\n    activeId: string;\r\n    expanded: Set<string>;\r\n    signature: string;\r\n  } | null>(null);\r\n\r\n  if (!initialMetadataRef.current) {\r\n    const persistedMetadata = convertConfigToPersistedMetadata(draftConfigState);\r\n    const hasPersistedStrategies = persistedMetadata.strategies.length > 0;\r\n\r\n    const buildDefaultStrategyDrafts = (): TuningStrategyDraft[] => {\r\n      // Begin with no predefined strategies so users can choose exactly what they need.\r\n      return [];\r\n    };\r\n\r\n    let initialStrategies = hasPersistedStrategies\r\n      ? persistedMetadata.strategies.map(buildStrategyDraftFromPersisted)\r\n      : buildDefaultStrategyDrafts();\r\n\r\n    const resolvedActive = resolveActiveStrategyId(initialStrategies, persistedMetadata.activeId);\r\n    const resolvedExpanded = resolveExpandedStrategyIds(initialStrategies, persistedMetadata.expandedIds);\r\n    if (resolvedActive && !resolvedExpanded.has(resolvedActive) && initialStrategies.length) {\r\n      resolvedExpanded.add(resolvedActive);\r\n    }\r\n\r\n    const initialSignature = buildMetadataSignature(persistedMetadata);\r\n\r\n    initialMetadataRef.current = {\r\n      strategies: initialStrategies,\r\n      activeId: resolvedActive,\r\n      expanded: resolvedExpanded,\r\n      signature: initialSignature,\r\n    };\r\n  }\r\n\r\n  const [strategies, setStrategies] = useState<TuningStrategyDraft[]>(() =>\r\n    initialMetadataRef.current ? initialMetadataRef.current.strategies : [],\r\n  );\r\n  const [expandedStrategyIds, setExpandedStrategyIds] = useState<Set<string>>(\r\n    () => new Set(initialMetadataRef.current ? Array.from(initialMetadataRef.current.expanded) : []),\r\n  );\r\n  const [activeStrategyId, setActiveStrategyId] = useState<string>(\r\n    () => initialMetadataRef.current?.activeId ?? '',\r\n  );\r\n  const persistedMetadataSignatureRef = useRef<string>(initialMetadataRef.current?.signature ?? '');\r\n  const lastAppliedStrategyRef = useRef<string | null>(null);\r\n  const lastModelTypeRef = useRef<string | null>(null);\r\n  const activeStrategy = useMemo(() => {\r\n    if (!strategies.length) {\r\n      return null;\r\n    }\r\n    const explicit = strategies.find((strategy) => strategy.id === activeStrategyId);\r\n    return explicit ?? strategies[0];\r\n  }, [activeStrategyId, strategies]);\r\n\r\n  const persistedMetadataFromConfig = useMemo(\r\n    () => convertConfigToPersistedMetadata(draftConfigState),\r\n    [draftConfigState],\r\n  );\r\n  const configMetadataSignature = useMemo(\r\n    () => buildMetadataSignature(persistedMetadataFromConfig),\r\n    [persistedMetadataFromConfig],\r\n  );\r\n\r\n  useEffect(() => {\r\n    if (configMetadataSignature === persistedMetadataSignatureRef.current) {\r\n      return;\r\n    }\r\n\r\n    const nextStrategies = persistedMetadataFromConfig.strategies.length\r\n      ? persistedMetadataFromConfig.strategies.map(buildStrategyDraftFromPersisted)\r\n      : [];\r\n    const nextActiveId = resolveActiveStrategyId(nextStrategies, persistedMetadataFromConfig.activeId);\r\n    const nextExpandedSet = resolveExpandedStrategyIds(nextStrategies, persistedMetadataFromConfig.expandedIds);\r\n    if (nextActiveId && !nextExpandedSet.has(nextActiveId) && nextStrategies.length) {\r\n      nextExpandedSet.add(nextActiveId);\r\n    }\r\n\r\n    lastAppliedStrategyRef.current = null;\r\n    setStrategies(nextStrategies);\r\n    setActiveStrategyId(nextActiveId);\r\n    setExpandedStrategyIds(nextExpandedSet);\r\n    persistedMetadataSignatureRef.current = configMetadataSignature;\r\n  }, [\r\n    configMetadataSignature,\r\n    persistedMetadataFromConfig,\r\n    draftConfigState,\r\n  ]);\r\n\r\n  useEffect(() => {\r\n    if (!strategies.length) {\r\n      return;\r\n    }\r\n    const hasActive = strategies.some((strategy) => strategy.id === activeStrategyId);\r\n    if (!hasActive) {\r\n      setActiveStrategyId(strategies[0].id);\r\n    }\r\n  }, [activeStrategyId, strategies]);\r\n\r\n  useEffect(() => {\r\n    const metadata = convertDraftStateToPersistedMetadata(strategies, activeStrategyId, expandedStrategyIds);\r\n    const nextSignature = buildMetadataSignature(metadata);\r\n    if (persistedMetadataSignatureRef.current === nextSignature) {\r\n      return;\r\n    }\r\n\r\n    setDraftConfigState((previous) => {\r\n      const previousMetadata = convertConfigToPersistedMetadata(previous);\r\n      const previousSignature = buildMetadataSignature(previousMetadata);\r\n      if (previousSignature === nextSignature) {\r\n        persistedMetadataSignatureRef.current = previousSignature;\r\n        return previous ?? {};\r\n      }\r\n\r\n      const nextState = previous ? { ...previous } : {};\r\n\r\n      if (metadata.strategies.length) {\r\n        nextState[TUNING_STRATEGIES_KEY] = metadata.strategies.map((entry) => ({\r\n          ...entry,\r\n          config: cloneJson(entry.config),\r\n          searchSpaceTexts: { ...entry.searchSpaceTexts },\r\n          searchSpaceFieldErrors: { ...entry.searchSpaceFieldErrors },\r\n        }));\r\n      } else {\r\n        delete nextState[TUNING_STRATEGIES_KEY];\r\n      }\r\n\r\n      if (metadata.activeId) {\r\n        nextState[TUNING_ACTIVE_ID_KEY] = metadata.activeId;\r\n      } else {\r\n        delete nextState[TUNING_ACTIVE_ID_KEY];\r\n      }\r\n\r\n      if (metadata.expandedIds.length) {\r\n        nextState[TUNING_EXPANDED_KEY] = [...metadata.expandedIds];\r\n      } else {\r\n        delete nextState[TUNING_EXPANDED_KEY];\r\n      }\r\n\r\n      persistedMetadataSignatureRef.current = nextSignature;\r\n      return nextState;\r\n    });\r\n  }, [activeStrategyId, expandedStrategyIds, setDraftConfigState, strategies]);\r\n\r\n  useEffect(() => {\r\n    if (!activeStrategy) {\r\n      return;\r\n    }\r\n    if (lastAppliedStrategyRef.current === activeStrategy.id) {\r\n      return;\r\n    }\r\n    lastAppliedStrategyRef.current = activeStrategy.id;\r\n    const nextConfig = cloneConfigForStrategy(activeStrategy.config);\r\n    setDraftConfigState((previous) => {\r\n      const preservedMetadata = extractStoredStrategyMetadataFields(previous);\r\n      return {\r\n        ...preservedMetadata,\r\n        ...nextConfig,\r\n      };\r\n    });\r\n    setSearchSpaceTexts(activeStrategy.searchSpaceTexts ?? {});\r\n    setSearchSpaceFieldErrors(activeStrategy.searchSpaceFieldErrors ?? {});\r\n    setHasAutoFilledSearchSpace(activeStrategy.hasAutoFilledSearchSpace ?? false);\r\n    setSearchSpaceManuallyCleared(activeStrategy.searchSpaceManuallyCleared ?? false);\r\n    const strategyModelType = typeof nextConfig?.[modelTypeParameterName] === 'string'\r\n      ? String(nextConfig[modelTypeParameterName])\r\n      : (runtimeConfig?.modelType ?? '');\r\n    lastModelTypeRef.current = strategyModelType;\r\n  }, [activeStrategy, modelTypeParameterName, runtimeConfig?.modelType, setDraftConfigState]);\r\n\r\n  useEffect(() => {\r\n    if (!activeStrategy) {\r\n      return;\r\n    }\r\n    const nextConfig = cloneConfigForStrategy(draftConfigState);\r\n    const configChanged = JSON.stringify(nextConfig) !== JSON.stringify(activeStrategy.config ?? {});\r\n    const textsChanged = !shallowEqualRecord(searchSpaceTexts, activeStrategy.searchSpaceTexts);\r\n    const errorsChanged = !shallowEqualRecord(searchSpaceFieldErrors, activeStrategy.searchSpaceFieldErrors);\r\n    const autoFillChanged = activeStrategy.hasAutoFilledSearchSpace !== hasAutoFilledSearchSpace;\r\n    const clearedChanged = activeStrategy.searchSpaceManuallyCleared !== searchSpaceManuallyCleared;\r\n\r\n    if (!configChanged && !textsChanged && !errorsChanged && !autoFillChanged && !clearedChanged) {\r\n      return;\r\n    }\r\n\r\n    setStrategies((previous) =>\r\n      previous.map((strategy) => {\r\n        if (strategy.id !== activeStrategy.id) {\r\n          return strategy;\r\n        }\r\n        return {\r\n          ...strategy,\r\n          config: nextConfig,\r\n          searchSpaceTexts: { ...searchSpaceTexts },\r\n          searchSpaceFieldErrors: { ...searchSpaceFieldErrors },\r\n          hasAutoFilledSearchSpace,\r\n          searchSpaceManuallyCleared,\r\n        };\r\n      }),\r\n    );\r\n  }, [\r\n    activeStrategy,\r\n    draftConfigState,\r\n    hasAutoFilledSearchSpace,\r\n    searchSpaceFieldErrors,\r\n    searchSpaceManuallyCleared,\r\n    searchSpaceTexts,\r\n  ]);\r\n\r\n  const handleAddStrategy = useCallback(() => {\r\n    const nextOrdinal = strategies.length + 1;\r\n    const baseConfig = cloneConfigForStrategy(draftConfigState);\r\n    const usedStrategies = new Set<SearchStrategy>();\r\n    strategies.forEach((strategy) => {\r\n      const normalized = normalizeSearchStrategyValue(\r\n        strategy.config?.[searchStrategyParameterName],\r\n        availableSearchStrategies,\r\n      );\r\n      if (normalized) {\r\n        usedStrategies.add(normalized);\r\n      }\r\n    });\r\n\r\n    const nextStrategyValue = availableSearchStrategies.find((candidate) => !usedStrategies.has(candidate)) ?? searchStrategy;\r\n\r\n    const configCloneRaw = cloneJson(baseConfig);\r\n    const configWithStrategy: Record<string, any> = isRecord(configCloneRaw) ? configCloneRaw : {};\r\n    configWithStrategy[searchStrategyParameterName] = nextStrategyValue;\r\n\r\n    if (nextStrategyValue === 'random' || nextStrategyValue === 'optuna') {\r\n      const iterationsValue = searchIterations !== null ? searchIterations : searchIterationsDefault;\r\n      if (iterationsValue !== null) {\r\n        configWithStrategy[searchIterationsParameterName] = iterationsValue;\r\n      } else {\r\n        delete configWithStrategy[searchIterationsParameterName];\r\n      }\r\n\r\n      const randomStateValue = searchRandomState !== null ? searchRandomState : searchRandomStateDefault;\r\n      if (randomStateValue !== null) {\r\n        configWithStrategy[searchRandomStateParameterName] = randomStateValue;\r\n      } else {\r\n        delete configWithStrategy[searchRandomStateParameterName];\r\n      }\r\n    } else {\r\n      delete configWithStrategy[searchIterationsParameterName];\r\n      delete configWithStrategy[searchRandomStateParameterName];\r\n    }\r\n\r\n    const newStrategy = createStrategyDraft(createStrategyLabel(nextOrdinal), configWithStrategy, {\r\n      searchSpaceTexts: { ...searchSpaceTexts },\r\n      searchSpaceFieldErrors: {},\r\n      hasAutoFilledSearchSpace,\r\n      searchSpaceManuallyCleared,\r\n    });\r\n\r\n    setStrategies((previous) => [...previous, newStrategy]);\r\n    setExpandedStrategyIds((prev) => new Set([...prev, newStrategy.id]));\r\n    lastAppliedStrategyRef.current = null;\r\n    setActiveStrategyId(newStrategy.id);\r\n  }, [\r\n    availableSearchStrategies,\r\n    draftConfigState,\r\n    hasAutoFilledSearchSpace,\r\n    searchIterations,\r\n    searchIterationsDefault,\r\n    searchRandomState,\r\n    searchRandomStateDefault,\r\n    searchSpaceManuallyCleared,\r\n    searchSpaceTexts,\r\n    searchStrategy,\r\n    searchStrategyParameterName,\r\n    searchIterationsParameterName,\r\n    searchRandomStateParameterName,\r\n    setStrategies,\r\n    setActiveStrategyId,\r\n    setExpandedStrategyIds,\r\n    strategies,\r\n  ]);\r\n\r\n  const handleToggleStrategy = useCallback((strategyId: string) => {\r\n    setExpandedStrategyIds((prev) => {\r\n      const next = new Set(prev);\r\n      if (next.has(strategyId)) {\r\n        next.delete(strategyId);\r\n      } else {\r\n        next.add(strategyId);\r\n      }\r\n      return next;\r\n    });\r\n  }, []);\r\n\r\n  const handleActivateStrategy = useCallback(\r\n    (strategyId: string) => {\r\n      if (!strategyId || strategyId === activeStrategyId) {\r\n        return;\r\n      }\r\n      lastAppliedStrategyRef.current = null;\r\n      setActiveStrategyId(strategyId);\r\n      setExpandedStrategyIds((previous) => {\r\n        const next = new Set(previous);\r\n        next.add(strategyId);\r\n        return next;\r\n      });\r\n    },\r\n    [activeStrategyId],\r\n  );\r\n\r\n  const handleRemoveStrategy = useCallback(\r\n    (strategyId: string) => {\r\n      let nextActiveId: string | null = null;\r\n      setStrategies((previous) => {\r\n        if (previous.length <= 1) {\r\n          return previous;\r\n        }\r\n        const filtered = previous.filter((strategy) => strategy.id !== strategyId);\r\n        if (!filtered.length) {\r\n          return previous;\r\n        }\r\n        const relabeled = filtered.map((strategy, index) => ({\r\n          ...strategy,\r\n          label: createStrategyLabel(index + 1),\r\n        }));\r\n        if (strategyId === activeStrategyId) {\r\n          lastAppliedStrategyRef.current = null;\r\n          const fallbackId = relabeled[0].id;\r\n          nextActiveId = fallbackId;\r\n          setActiveStrategyId(fallbackId);\r\n        }\r\n        return relabeled;\r\n      });\r\n      setExpandedStrategyIds((prev) => {\r\n        const next = new Set(prev);\r\n        next.delete(strategyId);\r\n        if (nextActiveId) {\r\n          next.add(nextActiveId);\r\n        }\r\n        return next;\r\n      });\r\n    },\r\n    [activeStrategyId],\r\n  );\r\n\r\n  const strategySummaries = useMemo(() => {\r\n    return strategies.map((strategy, index) => {\r\n      const config = strategy.config ?? {};\r\n      const modelValueRaw = config?.[modelTypeParameterName];\r\n      const modelValue = typeof modelValueRaw === 'string' ? modelValueRaw.trim() : '';\r\n      const modelLabel = modelTypeOptions.find((option) => option.value === modelValue)?.label ?? modelValue;\r\n\r\n      const searchStrategyValueRaw = config?.[searchStrategyParameterName];\r\n      const searchStrategyValue = typeof searchStrategyValueRaw === 'string' ? searchStrategyValueRaw.trim() : '';\r\n      const searchLabel = (searchStrategyParameter?.options ?? []).find((option) => option.value === searchStrategyValue)?.label;\r\n\r\n      const scoringValueRaw = config?.[scoringMetricParameterName];\r\n      const scoringValue = typeof scoringValueRaw === 'string' ? scoringValueRaw.trim() : '';\r\n\r\n      const baselineParsed = parseJsonObject(config?.baseline_hyperparameters);\r\n      const baselineError = baselineParsed.error;\r\n\r\n      const searchParse = parseJsonObject(config?.search_space);\r\n      const normalized = normalizeSearchSpace(searchParse.value);\r\n      const parameterCount = normalized.value ? Object.keys(normalized.value).length : 0;\r\n      const candidateCount = normalized.value\r\n        ? Object.values(normalized.value).reduce((total, values) =>\r\n            total + (Array.isArray(values) ? values.length : 0),\r\n          0)\r\n        : 0;\r\n      const hasErrors = baselineError !== null || Object.values(strategy.searchSpaceFieldErrors).some((message) => Boolean(message));\r\n\r\n      return {\r\n        id: strategy.id,\r\n        label: strategy.label || createStrategyLabel(index + 1),\r\n        modelLabel: modelLabel || 'Select model',\r\n        searchStrategyLabel: searchLabel ?? (searchStrategyValue || 'Random search'),\r\n        scoringLabel: scoringValue || 'Estimator default',\r\n        parameterCount,\r\n        candidateCount,\r\n        hasErrors,\r\n      };\r\n    });\r\n  }, [\r\n    modelTypeOptions,\r\n    modelTypeParameterName,\r\n    scoringMetricParameterName,\r\n    searchStrategyParameter,\r\n    searchStrategyParameterName,\r\n    strategies,\r\n  ]);\r\n\r\n  useEffect(() => {\r\n    const previous = lastModelTypeRef.current;\r\n    if (previous === null) {\r\n      lastModelTypeRef.current = modelType;\r\n      return;\r\n    }\r\n    if (previous === modelType) {\r\n      return;\r\n    }\r\n    lastModelTypeRef.current = modelType;\r\n    setSearchSpaceTexts({});\r\n    setSearchSpaceFieldErrors({});\r\n    setHasAutoFilledSearchSpace(false);\r\n    setSearchSpaceManuallyCleared(false);\r\n  }, [modelType]);\r\n\r\n  useEffect(() => {\r\n    if (!modelType || !hyperparamFields.length) {\r\n      return;\r\n    }\r\n    setSearchSpaceTexts((previous) => {\r\n      const next = { ...previous };\r\n      let changed = false;\r\n      hyperparamFields.forEach((field) => {\r\n        if (searchSpaceFieldErrors[field.name]) {\r\n          return;\r\n        }\r\n        const values = filteredSearchOverrides[field.name];\r\n        const formatted =\r\n          Array.isArray(values) && values.length > 0\r\n            ? values.map((value) => formatSearchValue(field, value)).join(', ')\r\n            : '';\r\n        if (next[field.name] !== formatted) {\r\n          next[field.name] = formatted;\r\n          changed = true;\r\n        }\r\n      });\r\n      return changed ? next : previous;\r\n    });\r\n  }, [filteredSearchOverrides, hyperparamFields, modelType, searchSpaceFieldErrors]);\r\n\r\n  useEffect(() => {\r\n    if (!modelType || !hyperparamFields.length) {\r\n      return;\r\n    }\r\n\r\n    if (searchSpaceManuallyCleared) {\r\n      return;\r\n    }\r\n\r\n    if (hasSearchSpaceEntries) {\r\n      if (!hasAutoFilledSearchSpace) {\r\n        setHasAutoFilledSearchSpace(true);\r\n      }\r\n      return;\r\n    }\r\n\r\n    if (hasAutoFilledSearchSpace) {\r\n      return;\r\n    }\r\n\r\n    const generated = buildDefaultSearchSpace(hyperparamFields, hyperparamDefaults);\r\n    if (!Object.keys(generated).length) {\r\n      return;\r\n    }\r\n\r\n    setHasAutoFilledSearchSpace(true);\r\n    setSearchSpaceFieldErrors({});\r\n    setSearchSpaceTexts(() => {\r\n      const next: Record<string, string> = {};\r\n      hyperparamFields.forEach((field) => {\r\n        if (!generated[field.name]) {\r\n          return;\r\n        }\r\n        const formatted = generated[field.name]\r\n          .map((value) => formatSearchValue(field, value))\r\n          .filter((entry) => entry.length > 0)\r\n          .join(', ');\r\n        next[field.name] = formatted;\r\n      });\r\n      return next;\r\n    });\r\n    setDraftConfigState((previous) => {\r\n      const currentState = previous ? { ...previous } : {};\r\n      currentState.search_space = generated;\r\n      return currentState;\r\n    });\r\n  }, [\r\n    hasAutoFilledSearchSpace,\r\n    hyperparamDefaults,\r\n    hyperparamFields,\r\n    modelType,\r\n    hasSearchSpaceEntries,\r\n    searchSpaceManuallyCleared,\r\n    setDraftConfigState,\r\n  ]);\r\n\r\n  const [scoringDraft, setScoringDraft] = useState(scoringMetric ?? '');\r\n\r\n  useEffect(() => {\r\n    setScoringDraft(scoringMetric ?? '');\r\n  }, [scoringMetric]);\r\n\r\n  const scoringSuggestions = useMemo(\r\n    () => SCORING_SUGGESTIONS[problemType === 'regression' ? 'regression' : 'classification'],\r\n    [problemType],\r\n  );\r\n\r\n  const scoringLabel = scoringMetricParameter?.label ?? 'Scoring metric';\r\n  const scoringDescription = scoringMetricParameter?.description ?? 'Pick the evaluation metric used to rank candidates.';\r\n  const scoringInputId = useMemo(() => `tuning-${nodeId}-scoring-metric`, [nodeId]);\r\n\r\n  const hasSearchSpaceFieldErrors = useMemo(\r\n    () => Object.values(searchSpaceFieldErrors).some((message) => Boolean(message)),\r\n    [searchSpaceFieldErrors],\r\n  );\r\n\r\n  const updateBaselineValue = useCallback(\r\n    (fieldName: string, nextValue: any) => {\r\n      if (!allowedHyperparamNames.has(fieldName)) {\r\n        return;\r\n      }\r\n\r\n      setDraftConfigState((previous) => {\r\n        const nextState = { ...previous };\r\n        const parsed = parseJsonObject(previous?.baseline_hyperparameters).value ?? {};\r\n        const filtered = filterHyperparametersByFields(parsed, allowedHyperparamNames);\r\n        const updated = { ...filtered };\r\n\r\n        if (nextValue === undefined) {\r\n          delete updated[fieldName];\r\n        } else {\r\n          updated[fieldName] = nextValue;\r\n        }\r\n\r\n        if (Object.keys(updated).length > 0) {\r\n          nextState.baseline_hyperparameters = updated;\r\n        } else {\r\n          delete nextState.baseline_hyperparameters;\r\n        }\r\n\r\n        return nextState;\r\n      });\r\n    },\r\n    [allowedHyperparamNames, setDraftConfigState],\r\n  );\r\n\r\n  const handleSearchSpaceInputChange = useCallback(\r\n    (field: ModelHyperparameterField, rawText: string) => {\r\n      setSearchSpaceTexts((previous) => ({\r\n        ...previous,\r\n        [field.name]: rawText,\r\n      }));\r\n\r\n      const { values, error } = parseSearchInput(field, rawText);\r\n      setSearchSpaceFieldErrors((previous) => ({\r\n        ...previous,\r\n        [field.name]: error,\r\n      }));\r\n\r\n      if (error) {\r\n        return;\r\n      }\r\n\r\n      setDraftConfigState((previous) => {\r\n        const nextState = { ...previous };\r\n        const parsed = parseJsonObject(previous?.search_space).value ?? {};\r\n        const filtered = filterSearchSpaceByFields(parsed, allowedHyperparamNames);\r\n        const updated = { ...filtered };\r\n\r\n        if (values.length > 0) {\r\n          updated[field.name] = values.map((value) => cloneJson(value));\r\n        } else {\r\n          delete updated[field.name];\r\n        }\r\n\r\n        if (Object.keys(updated).length > 0) {\r\n          nextState.search_space = updated;\r\n        } else {\r\n          delete nextState.search_space;\r\n        }\r\n\r\n        return nextState;\r\n      });\r\n    },\r\n    [allowedHyperparamNames, setDraftConfigState],\r\n  );\r\n\r\n  const clearBaselineValue = useCallback(\r\n    (fieldName: string) => {\r\n      updateBaselineValue(fieldName, undefined);\r\n    },\r\n    [updateBaselineValue],\r\n  );\r\n\r\n  const handleResetBaselineOverrides = useCallback(() => {\r\n    setDraftConfigState((previous) => {\r\n      if (!previous || !previous.baseline_hyperparameters) {\r\n        return previous ?? {};\r\n      }\r\n      const nextState = { ...previous };\r\n      delete nextState.baseline_hyperparameters;\r\n      return nextState;\r\n    });\r\n  }, [setDraftConfigState]);\r\n\r\n  const handleClearSearchSpace = useCallback(() => {\r\n    setSearchSpaceManuallyCleared(true);\r\n    setHasAutoFilledSearchSpace(true);\r\n    setSearchSpaceTexts({});\r\n    setSearchSpaceFieldErrors({});\r\n    setDraftConfigState((previous) => {\r\n      if (!previous || !previous.search_space) {\r\n        return previous ?? {};\r\n      }\r\n      const nextState = { ...previous };\r\n      delete nextState.search_space;\r\n      return nextState;\r\n    });\r\n  }, [setDraftConfigState]);\r\n\r\n  const handleScoringChange = useCallback(\r\n    (value: string) => {\r\n      setScoringDraft(value);\r\n      const trimmed = value.trim();\r\n      setDraftConfigState((previous) => {\r\n        const nextState = { ...previous };\r\n        if (trimmed.length > 0) {\r\n          nextState.scoring_metric = trimmed;\r\n        } else {\r\n          delete nextState.scoring_metric;\r\n        }\r\n        return nextState;\r\n      });\r\n    },\r\n    [setDraftConfigState],\r\n  );\r\n\r\n  const renderBaselineField = useCallback(\r\n    (field: ModelHyperparameterField) => {\r\n      if (!field?.name || !allowedHyperparamNames.has(field.name)) {\r\n        return null;\r\n      }\r\n\r\n      const fieldId = `baseline-${nodeId}-${field.name}`;\r\n      const override = filteredBaselineOverrides[field.name];\r\n      const hasOverride = override !== undefined;\r\n      const defaultValue = hyperparamDefaults?.[field.name];\r\n      const label = field.label ?? field.name;\r\n      const description = field.description;\r\n      const defaultHint = defaultValue !== undefined\r\n        ? `Default: ${formatValuePreview(defaultValue)}`\r\n        : 'Default: estimator setting';\r\n\r\n      let control: React.ReactNode;\r\n\r\n      if (field.type === 'number') {\r\n        const numericValue = typeof override === 'number' ? String(override) : '';\r\n        control = (\r\n          <input\r\n            id={fieldId}\r\n            type=\"number\"\r\n            className=\"canvas-modal__parameter-input\"\r\n            value={numericValue}\r\n            onChange={(event) => {\r\n              const raw = event.target.value;\r\n              if (!raw.length) {\r\n                clearBaselineValue(field.name);\r\n                return;\r\n              }\r\n              const parsed = Number(raw);\r\n              if (Number.isFinite(parsed)) {\r\n                updateBaselineValue(field.name, parsed);\r\n              }\r\n            }}\r\n            min={field.min}\r\n            max={field.max}\r\n            step={field.step}\r\n            placeholder=\"Leave blank to use default\"\r\n          />\r\n        );\r\n      } else if (field.type === 'select') {\r\n        const selectValue = hasOverride ? String(override) : '';\r\n        control = (\r\n          <select\r\n            id={fieldId}\r\n            className=\"canvas-modal__parameter-select\"\r\n            value={selectValue}\r\n            onChange={(event) => {\r\n              const next = event.target.value;\r\n              if (!next.length) {\r\n                clearBaselineValue(field.name);\r\n                return;\r\n              }\r\n              updateBaselineValue(field.name, next);\r\n            }}\r\n          >\r\n            <option value=\"\">Use default</option>\r\n            {(field.options ?? []).map((option) => (\r\n              <option key={option.value} value={option.value}>\r\n                {option.label}\r\n              </option>\r\n            ))}\r\n          </select>\r\n        );\r\n      } else if (field.type === 'boolean') {\r\n        const selectValue = hasOverride ? (override ? 'true' : 'false') : '';\r\n        control = (\r\n          <select\r\n            id={fieldId}\r\n            className=\"canvas-modal__parameter-select\"\r\n            value={selectValue}\r\n            onChange={(event) => {\r\n              const next = event.target.value;\r\n              if (!next.length) {\r\n                clearBaselineValue(field.name);\r\n                return;\r\n              }\r\n              updateBaselineValue(field.name, next === 'true');\r\n            }}\r\n          >\r\n            <option value=\"\">Use default</option>\r\n            <option value=\"true\">True</option>\r\n            <option value=\"false\">False</option>\r\n          </select>\r\n        );\r\n      } else {\r\n        const textValue = typeof override === 'string' ? override : '';\r\n        control = (\r\n          <input\r\n            id={fieldId}\r\n            type=\"text\"\r\n            className=\"canvas-modal__parameter-input\"\r\n            value={textValue}\r\n            onChange={(event) => {\r\n              const next = event.target.value;\r\n              if (!next.length) {\r\n                clearBaselineValue(field.name);\r\n                return;\r\n              }\r\n              updateBaselineValue(field.name, next);\r\n            }}\r\n            placeholder=\"Leave blank to use default\"\r\n          />\r\n        );\r\n      }\r\n\r\n      return (\r\n        <div key={field.name} className=\"canvas-modal__parameter\">\r\n          <label htmlFor={fieldId} className=\"canvas-modal__parameter-label\">\r\n            {label}\r\n            {description && (\r\n              <span className=\"canvas-modal__parameter-description\">{description}</span>\r\n            )}\r\n          </label>\r\n          {control}\r\n          <div\r\n            style={{\r\n              display: 'flex',\r\n              justifyContent: 'space-between',\r\n              alignItems: 'center',\r\n              marginTop: '0.4rem',\r\n              gap: '0.75rem',\r\n            }}\r\n          >\r\n            <small style={{ color: 'rgba(148, 163, 184, 0.85)' }}>\r\n              {hasOverride\r\n                ? `Override: ${formatValuePreview(override)}`\r\n                : defaultHint}\r\n            </small>\r\n          </div>\r\n        </div>\r\n      );\r\n    },\r\n    [allowedHyperparamNames, filteredBaselineOverrides, hyperparamDefaults, nodeId, updateBaselineValue],\r\n  );\r\n\r\n  const renderSearchSpaceField = useCallback(\r\n    (field: ModelHyperparameterField) => {\r\n      if (!field?.name || !allowedHyperparamNames.has(field.name)) {\r\n        return null;\r\n      }\r\n\r\n      const fieldId = `search-${nodeId}-${field.name}`;\r\n      const textValue = searchSpaceTexts[field.name] ?? '';\r\n      const configuredValues = filteredSearchOverrides[field.name];\r\n      const configuredCount = Array.isArray(configuredValues) ? configuredValues.length : 0;\r\n      const errorMessage = searchSpaceFieldErrors[field.name];\r\n      const defaultValue = hyperparamDefaults?.[field.name];\r\n\r\n      const placeholder = (() => {\r\n        if (field.type === 'number') {\r\n          return 'Comma or newline separated numbers (e.g. 0.01, 0.1, 1)';\r\n        }\r\n        if (field.type === 'boolean') {\r\n          return 'Enter true/false values, separated by commas or new lines';\r\n        }\r\n        if (field.type === 'select') {\r\n          return 'Comma or newline separated option values';\r\n        }\r\n        return 'Comma or newline separated values';\r\n      })();\r\n\r\n      const previewValues = Array.isArray(configuredValues)\r\n        ? configuredValues.slice(0, 3).map((value) => formatValuePreview(value)).join(', ')\r\n        : '';\r\n\r\n      return (\r\n        <div key={field.name} className=\"canvas-modal__parameter\">\r\n          <label htmlFor={fieldId} className=\"canvas-modal__parameter-label\">\r\n            {field.label ?? field.name}\r\n            {field.description && (\r\n              <span className=\"canvas-modal__parameter-description\">{field.description}</span>\r\n            )}\r\n          </label>\r\n          <textarea\r\n            id={fieldId}\r\n            className=\"canvas-modal__parameter-input\"\r\n            rows={3}\r\n            value={textValue}\r\n            onChange={(event) => handleSearchSpaceInputChange(field, event.target.value)}\r\n            placeholder={placeholder}\r\n            style={{ minHeight: '92px', resize: 'vertical' }}\r\n          />\r\n          <div\r\n            style={{\r\n              display: 'flex',\r\n              justifyContent: 'space-between',\r\n              alignItems: 'center',\r\n              marginTop: '0.4rem',\r\n              gap: '0.75rem',\r\n              flexWrap: 'wrap',\r\n            }}\r\n          >\r\n            <small style={{ color: 'rgba(148, 163, 184, 0.85)' }}>\r\n              {configuredCount > 0\r\n                ? `Configured ${configuredCount} value${configuredCount === 1 ? '' : 's'}${previewValues ? ` (${previewValues}${configuredCount > 3 ? '' : ''})` : ''}`\r\n                : `Default: ${formatValuePreview(defaultValue)}`}\r\n            </small>\r\n          </div>\r\n          {errorMessage && (\r\n            <p className=\"canvas-modal__note canvas-modal__note--error\" style={{ marginTop: '0.5rem' }}>\r\n              {errorMessage}\r\n            </p>\r\n          )}\r\n        </div>\r\n      );\r\n    },\r\n    [allowedHyperparamNames, filteredSearchOverrides, handleSearchSpaceInputChange, hyperparamDefaults, nodeId, searchSpaceFieldErrors, searchSpaceTexts],\r\n  );\r\n\r\n  const searchSpaceDimension = useMemo(() => {\r\n    if (!hasSearchSpaceEntries) {\r\n      return { parameterCount: 0, candidateProduct: null as number | null };\r\n    }\r\n    const entries = Object.values(filteredSearchOverrides);\r\n    const parameterCount = entries.length;\r\n    let candidateProduct: number | null = null;\r\n    if (entries.length > 0) {\r\n      let product = 1;\r\n      let overflow = false;\r\n      entries.forEach((values) => {\r\n        product *= Math.max(values.length, 1);\r\n        if (!Number.isFinite(product) || product > 1_000_000) {\r\n          overflow = true;\r\n        }\r\n      });\r\n      candidateProduct = overflow ? null : product;\r\n    }\r\n    return { parameterCount, candidateProduct };\r\n  }, [filteredSearchOverrides, hasSearchSpaceEntries]);\r\n\r\n  const graphPayload = useMemo<FeatureGraph | null>(() => {\r\n    if (!graph || !Array.isArray(graph.nodes) || !Array.isArray(graph.edges)) {\r\n      return null;\r\n    }\r\n    return {\r\n      nodes: graph.nodes,\r\n      edges: graph.edges,\r\n    };\r\n  }, [graph]);\r\n\r\n  const mergeConfigIntoGraph = useCallback(\r\n    (configToMerge: Record<string, any> | null | undefined): FeatureGraph | null => {\r\n      if (!graphPayload) {\r\n        return null;\r\n      }\r\n      const clonedGraph = cloneJson(graphPayload);\r\n      if (!clonedGraph || !Array.isArray(clonedGraph.nodes)) {\r\n        return graphPayload;\r\n      }\r\n\r\n      const sanitizedConfig = stripTuningMetadata(configToMerge);\r\n      const hasSanitizedConfig = Object.keys(sanitizedConfig).length > 0;\r\n\r\n      clonedGraph.nodes = clonedGraph.nodes.map((node: any) => {\r\n        if (!node || node.id !== nodeId) {\r\n          return node;\r\n        }\r\n        const existingData = node?.data ?? {};\r\n        const existingConfig = existingData?.config ?? {};\r\n        const sanitizedExistingConfig = stripTuningMetadata(existingConfig);\r\n        const mergedConfig = hasSanitizedConfig\r\n          ? { ...sanitizedExistingConfig, ...sanitizedConfig }\r\n          : sanitizedExistingConfig;\r\n\r\n        return {\r\n          ...node,\r\n          data: {\r\n            ...existingData,\r\n            config: mergedConfig,\r\n            isConfigured: true,\r\n          },\r\n        };\r\n      });\r\n\r\n      return clonedGraph;\r\n    },\r\n    [graphPayload, nodeId],\r\n  );\r\n\r\n  const graphWithDraftConfig = useMemo<FeatureGraph | null>(() => {\r\n    const merged = mergeConfigIntoGraph(draftConfigState);\r\n    if (merged) {\r\n      return merged;\r\n    }\r\n    return graphPayload;\r\n  }, [draftConfigState, graphPayload, mergeConfigIntoGraph]);\r\n\r\n  const validationConnectionStatus = useMemo(() => {\r\n    if (!graph || !Array.isArray(graph.nodes) || !Array.isArray(graph.edges)) {\r\n      return null;\r\n    }\r\n\r\n    const nodes = graph.nodes as any[];\r\n    const edges = graph.edges as any[];\r\n\r\n    const connectedSplits = (() => {\r\n      const currentNode = nodes.find((entry: any) => entry?.id === nodeId);\r\n      if (!currentNode) {\r\n        return [] as string[];\r\n      }\r\n      return sanitizeSplitList(currentNode?.data?.connectedSplits);\r\n    })();\r\n\r\n    if (connectedSplits.includes('validation')) {\r\n      return true;\r\n    }\r\n\r\n    const hasValidationEdge = edges.some((edge: any) => {\r\n      if (!edge) {\r\n        return false;\r\n      }\r\n      const targetId = typeof edge.target === 'string' ? edge.target : null;\r\n      if (targetId !== nodeId) {\r\n        return false;\r\n      }\r\n      const sourceHandle = typeof edge.sourceHandle === 'string' ? edge.sourceHandle.toLowerCase() : '';\r\n      return sourceHandle.includes('validation');\r\n    });\r\n\r\n    if (hasValidationEdge) {\r\n      return true;\r\n    }\r\n\r\n    const upstreamNodesExposeValidation = edges.some((edge: any) => {\r\n      if (!edge) {\r\n        return false;\r\n      }\r\n      const targetId = typeof edge.target === 'string' ? edge.target : null;\r\n      if (targetId !== nodeId) {\r\n        return false;\r\n      }\r\n      const sourceId = typeof edge.source === 'string' ? edge.source : null;\r\n      if (!sourceId) {\r\n        return false;\r\n      }\r\n      const upstreamNode = nodes.find((entry: any) => entry?.id === sourceId);\r\n      if (!upstreamNode) {\r\n        return false;\r\n      }\r\n      const activeSplits = sanitizeSplitList(upstreamNode?.data?.activeSplits);\r\n      return activeSplits.includes('validation');\r\n    });\r\n\r\n    if (!upstreamNodesExposeValidation) {\r\n      return null;\r\n    }\r\n\r\n    return false;\r\n  }, [graph, nodeId]);\r\n\r\n  useEffect(() => {\r\n    let cancelled = false;\r\n    if (!sourceId || !graphPayload) {\r\n      setPipelineIdFromSavedConfig(null);\r\n      return () => {\r\n        cancelled = true;\r\n      };\r\n    }\r\n\r\n    generatePipelineId(sourceId, graphPayload)\r\n      .then((value) => {\r\n        if (!cancelled) {\r\n          setPipelineIdFromSavedConfig(value);\r\n        }\r\n      })\r\n      .catch(() => {\r\n        if (!cancelled) {\r\n          setPipelineIdFromSavedConfig(null);\r\n        }\r\n      });\r\n\r\n    return () => {\r\n      cancelled = true;\r\n    };\r\n  }, [graphPayload, sourceId]);\r\n\r\n  useEffect(() => {\r\n    let cancelled = false;\r\n    setPipelineError(null);\r\n\r\n    const graphForHash = graphWithDraftConfig ?? graphPayload;\r\n    if (!sourceId || !graphForHash) {\r\n      setPipelineId(null);\r\n      return () => {\r\n        cancelled = true;\r\n      };\r\n    }\r\n\r\n    generatePipelineId(sourceId, graphForHash)\r\n      .then((value) => {\r\n        if (!cancelled) {\r\n          setPipelineId(value);\r\n        }\r\n      })\r\n      .catch((error: Error) => {\r\n        if (!cancelled) {\r\n          setPipelineError(error?.message ?? 'Unable to compute pipeline ID');\r\n          setPipelineId(null);\r\n        }\r\n      });\r\n\r\n    return () => {\r\n      cancelled = true;\r\n    };\r\n  }, [graphPayload, graphWithDraftConfig, sourceId]);\r\n\r\n  useEffect(() => {\r\n    if (!pipelineId || !pipelineIdFromSavedConfig) {\r\n      setHasDraftChanges(false);\r\n      return;\r\n    }\r\n    setHasDraftChanges(pipelineId !== pipelineIdFromSavedConfig);\r\n  }, [pipelineId, pipelineIdFromSavedConfig]);\r\n\r\n  const shouldFetchJobs = Boolean(sourceId && nodeId);\r\n  const tuningJobsQueryKey = useMemo(() => {\r\n    return ['feature-canvas', 'hyperparameter-tuning-jobs', sourceId ?? 'none', pipelineId ?? 'pending', nodeId];\r\n  }, [nodeId, pipelineId, sourceId]);\r\n\r\n  const tuningJobsQuery = useQuery<HyperparameterTuningJobListResponse, Error>({\r\n    queryKey: tuningJobsQueryKey,\r\n    queryFn: async () => {\r\n      const baseParams: FetchHyperparameterTuningJobsOptions = {\r\n        datasetSourceId: sourceId || undefined,\r\n        nodeId,\r\n        limit: 5,\r\n      };\r\n\r\n      if (pipelineId) {\r\n        const scoped = await fetchHyperparameterTuningJobs({ ...baseParams, pipelineId });\r\n        if ((scoped?.jobs?.length ?? 0) > 0) {\r\n          return scoped;\r\n        }\r\n      }\r\n\r\n      return fetchHyperparameterTuningJobs(baseParams);\r\n    },\r\n    enabled: shouldFetchJobs,\r\n    retry: (failureCount, error) => {\r\n      if (error.message.includes('Sign in')) {\r\n        return false;\r\n      }\r\n      return failureCount < 2;\r\n    },\r\n    refetchInterval: (query) => {\r\n      const currentData = query.state.data as HyperparameterTuningJobListResponse | undefined;\r\n      const jobList = currentData?.jobs ?? [];\r\n      const hasActiveJob = jobList.some((job: HyperparameterTuningJobSummary) => job.status === 'queued' || job.status === 'running');\r\n      return hasActiveJob ? 5000 : false;\r\n    },\r\n  });\r\n\r\n  const {\r\n    mutateAsync: enqueueTuningJob,\r\n    isPending: isCreatingJob,\r\n    error: createJobError,\r\n  } = useMutation({\r\n    mutationFn: createHyperparameterTuningJob,\r\n    onSuccess: (result) => {\r\n      const jobCount = Array.isArray(result.jobs) ? result.jobs.length : 0;\r\n      const firstJob = jobCount > 0 ? result.jobs[0] : null;\r\n      setLastCreatedJob(firstJob);\r\n      setLastCreatedJobCount(jobCount);\r\n      queryClient.invalidateQueries({ queryKey: tuningJobsQueryKey });\r\n    },\r\n  });\r\n\r\n  const prerequisites = useMemo(() => {\r\n    const notes: string[] = [];\r\n    if (!sourceId) {\r\n      notes.push('Select a dataset before launching tuning jobs.');\r\n    }\r\n    if (!graphPayload || !graphPayload.nodes.length) {\r\n      notes.push('Connect this node to an upstream pipeline before tuning.');\r\n    }\r\n    if (!targetColumn) {\r\n      notes.push('Set a target column before tuning.');\r\n    }\r\n    if (validationConnectionStatus === false) {\r\n      notes.push('Connect the validation split to this node to enable tuning.');\r\n    }\r\n    if (!modelType) {\r\n      notes.push('Choose a model type before enqueuing tuning jobs.');\r\n    }\r\n    if (strategies.length === 0) {\r\n      notes.push('Add a tuning strategy before launching tuning jobs.');\r\n    }\r\n    if (!hasSearchSpaceEntries) {\r\n      notes.push('Define at least one hyperparameter in the search space.');\r\n    }\r\n    if (baselineError) {\r\n      notes.push(baselineError);\r\n    }\r\n    if (searchSpaceError) {\r\n      notes.push(searchSpaceError);\r\n    }\r\n    if (hasSearchSpaceFieldErrors) {\r\n      notes.push('Resolve invalid candidate values in the search space.');\r\n    }\r\n    if ((searchStrategy === 'random' || searchStrategy === 'optuna') && !searchIterations) {\r\n      notes.push('Provide the maximum iterations for random or Optuna search.');\r\n    }\r\n    if (cvEnabled && cvFolds < 2) {\r\n      notes.push('Cross-validation requires at least 2 folds.');\r\n    }\r\n    if (pipelineError) {\r\n      notes.push(pipelineError);\r\n    }\r\n    return notes;\r\n  }, [\r\n    baselineError,\r\n    cvEnabled,\r\n    cvFolds,\r\n    graphPayload,\r\n    hasSearchSpaceEntries,\r\n    hasSearchSpaceFieldErrors,\r\n    modelType,\r\n    pipelineError,\r\n    searchIterations,\r\n    searchSpaceError,\r\n    searchStrategy,\r\n    sourceId,\r\n    targetColumn,\r\n    validationConnectionStatus,\r\n    strategies.length,\r\n  ]);\r\n\r\n  const tuningJobs = tuningJobsQuery.data?.jobs ?? [];\r\n  const isJobsLoading = tuningJobsQuery.isLoading || tuningJobsQuery.isFetching;\r\n  const jobsError = tuningJobsQuery.error as Error | null;\r\n\r\n  const hasScalingConvergenceSignals = useMemo(() => {\r\n    if (createJobError instanceof Error && hasScalingConvergenceMessage(createJobError.message)) {\r\n      return true;\r\n    }\r\n    if (batchEnqueueError && hasScalingConvergenceMessage(batchEnqueueError)) {\r\n      return true;\r\n    }\r\n    if (lastCreatedJob && detectScalingConvergenceFromJob(lastCreatedJob)) {\r\n      return true;\r\n    }\r\n    if (tuningJobs.some((job) => detectScalingConvergenceFromJob(job))) {\r\n      return true;\r\n    }\r\n    return false;\r\n  }, [batchEnqueueError, createJobError, lastCreatedJob, tuningJobs]);\r\n\r\n  const scalingWarning = useScalingWarning({\r\n    graph,\r\n    nodeId,\r\n    modelType,\r\n    problemType,\r\n    modelTypeOptions,\r\n    enabled: hasScalingConvergenceSignals,\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (!scalingWarning) {\r\n      setShowScalingDetails(false);\r\n    }\r\n  }, [scalingWarning]);\r\n\r\n  const isActionDisabled =\r\n    prerequisites.length > 0 ||\r\n    hasSearchSpaceFieldErrors ||\r\n    !pipelineId ||\r\n    !sourceId ||\r\n    !graphPayload ||\r\n    strategies.length === 0 ||\r\n    !hasSearchSpaceEntries ||\r\n    isCreatingJob;\r\n\r\n  const filteredModelTypeParameter = useMemo(() => {\r\n    if (!modelTypeParameter) {\r\n      return null;\r\n    }\r\n    if (!modelTypeOptions.length) {\r\n      return modelTypeParameter;\r\n    }\r\n    return {\r\n      ...modelTypeParameter,\r\n      options: modelTypeOptions,\r\n    };\r\n  }, [modelTypeOptions, modelTypeParameter]);\r\n\r\n  const handleEnqueueTuning = useCallback(async () => {\r\n    if (!pipelineId || !sourceId || !graphPayload || strategies.length === 0) {\r\n      return;\r\n    }\r\n\r\n    if (onSaveDraftConfig) {\r\n      try {\r\n        const maybeResult = onSaveDraftConfig({ closeModal: false });\r\n        setHasDraftChanges(false);\r\n        if (maybeResult && typeof (maybeResult as Promise<unknown>).then === 'function') {\r\n          await (maybeResult as Promise<unknown>);\r\n        }\r\n      } catch (error) {\r\n        // ignore save errors here; enqueue API will surface problems if relevant\r\n      }\r\n      await new Promise((resolve) => setTimeout(resolve, 100));\r\n    }\r\n\r\n    const buildStrategyPlans = async (): Promise<{\r\n      plans: Array<{ payload: HyperparameterTuningJobCreatePayload; label: string }>;\r\n      issues: string[];\r\n    }> => {\r\n      const plans: Array<{ payload: HyperparameterTuningJobCreatePayload; label: string }> = [];\r\n      const issues: string[] = [];\r\n\r\n      const resolveAllowedNamesForModel = async (\r\n        resolvedModelType: string,\r\n      ): Promise<Set<string>> => {\r\n        if (!resolvedModelType) {\r\n          return new Set<string>();\r\n        }\r\n\r\n        if (resolvedModelType === modelType) {\r\n          return allowedHyperparamNames;\r\n        }\r\n\r\n        const queryKey = ['model-hyperparameters', resolvedModelType] as const;\r\n        const cached = queryClient.getQueryData<ModelHyperparametersResponse>(queryKey);\r\n        const collectNames = (fields: ModelHyperparameterField[] | undefined | null) => {\r\n          const names = new Set<string>();\r\n          (fields ?? []).forEach((field) => {\r\n            if (field?.name) {\r\n              names.add(field.name);\r\n            }\r\n          });\r\n          return names;\r\n        };\r\n\r\n        if (cached) {\r\n          return collectNames(cached.fields);\r\n        }\r\n\r\n        try {\r\n          const result = await queryClient.fetchQuery<ModelHyperparametersResponse>({\r\n            queryKey,\r\n            queryFn: () => fetchModelHyperparameters(resolvedModelType),\r\n          });\r\n          return collectNames(result?.fields);\r\n        } catch (error) {\r\n          return new Set<string>();\r\n        }\r\n      };\r\n\r\n      for (let index = 0; index < strategies.length; index += 1) {\r\n        const strategy = strategies[index];\r\n        const strategyLabel = strategy.label || createStrategyLabel(index + 1);\r\n        const strategyConfig = cloneConfigForStrategy(strategy.config);\r\n\r\n        const rawModelType = strategyConfig?.[modelTypeParameterName];\r\n        const resolvedModelType =\r\n          typeof rawModelType === 'string' && rawModelType.trim().length\r\n            ? rawModelType.trim()\r\n            : modelType;\r\n\r\n        if (!resolvedModelType) {\r\n          issues.push(`${strategyLabel} is missing a model selection.`);\r\n          continue;\r\n        }\r\n\r\n        const resolvedSearchStrategy =\r\n          normalizeSearchStrategyValue(\r\n            strategyConfig?.[searchStrategyParameterName],\r\n            availableSearchStrategies,\r\n          ) ??\r\n          parameterDefaultStrategy ??\r\n          'random';\r\n\r\n        const strategyAllowedNames = await resolveAllowedNamesForModel(resolvedModelType);\r\n\r\n        const baselineParse = parseJsonObject(strategyConfig?.baseline_hyperparameters);\r\n        const baselineValues = baselineParse.value ?? {};\r\n        const sanitizedBaseline =\r\n          strategyAllowedNames.size > 0\r\n            ? filterHyperparametersByFields(baselineValues, strategyAllowedNames)\r\n            : cloneJson(baselineValues);\r\n\r\n        const searchSpaceParse = parseJsonObject(strategyConfig?.search_space);\r\n        if (searchSpaceParse.error) {\r\n          issues.push(`${strategyLabel} has invalid search space: ${searchSpaceParse.error}`);\r\n          continue;\r\n        }\r\n\r\n        const normalizedSearch = normalizeSearchSpace(searchSpaceParse.value);\r\n        if (normalizedSearch.error) {\r\n          issues.push(`${strategyLabel} has invalid search space: ${normalizedSearch.error}`);\r\n          continue;\r\n        }\r\n\r\n        const rawSearchSpace = normalizedSearch.value ?? {};\r\n        const sanitizedSearchSpace =\r\n          strategyAllowedNames.size > 0\r\n            ? filterSearchSpaceByFields(rawSearchSpace, strategyAllowedNames)\r\n            : cloneJson(rawSearchSpace);\r\n\r\n        if (!sanitizedSearchSpace || Object.keys(sanitizedSearchSpace).length === 0) {\r\n          issues.push(`${strategyLabel} requires at least one hyperparameter in the search space.`);\r\n          continue;\r\n        }\r\n\r\n        if (Object.values(strategy.searchSpaceFieldErrors ?? {}).some((message) => Boolean(message))) {\r\n          issues.push(`${strategyLabel} has search space entries that need attention.`);\r\n          continue;\r\n        }\r\n\r\n        const parameterCount = Object.keys(sanitizedSearchSpace).length;\r\n        let candidateProduct: number | null = null;\r\n        if (parameterCount > 0) {\r\n          let product = 1;\r\n          let overflow = false;\r\n          Object.values(sanitizedSearchSpace).forEach((values: any) => {\r\n            const size = Array.isArray(values) ? values.length : 0;\r\n            product *= Math.max(size, 1);\r\n            if (!Number.isFinite(product) || product > 1_000_000) {\r\n              overflow = true;\r\n            }\r\n          });\r\n          candidateProduct = overflow ? null : product;\r\n        }\r\n\r\n        const scoringRaw = strategyConfig?.[scoringMetricParameterName];\r\n        const scoringValue = typeof scoringRaw === 'string' ? scoringRaw.trim() : '';\r\n        const resolvedScoring = scoringValue.length ? scoringValue : null;\r\n\r\n        const resolveIterations = () => {\r\n          const rawIterations = strategyConfig?.[searchIterationsParameterName];\r\n          let iterations: number | null = null;\r\n          if (typeof rawIterations === 'number' && Number.isFinite(rawIterations)) {\r\n            iterations = Math.max(1, Math.floor(rawIterations));\r\n          } else if (typeof rawIterations === 'string') {\r\n            const parsed = Number(rawIterations.trim());\r\n            if (Number.isFinite(parsed) && parsed > 0) {\r\n              iterations = Math.max(1, Math.floor(parsed));\r\n            }\r\n          }\r\n          if (iterations === null && (resolvedSearchStrategy === 'random' || resolvedSearchStrategy === 'optuna')) {\r\n            return searchIterationsDefault !== null ? searchIterationsDefault : null;\r\n          }\r\n          return iterations;\r\n        };\r\n\r\n        const resolveRandomState = () => {\r\n          const rawState = strategyConfig?.[searchRandomStateParameterName];\r\n          let value: number | null = null;\r\n          if (typeof rawState === 'number' && Number.isFinite(rawState)) {\r\n            value = Math.trunc(rawState);\r\n          } else if (typeof rawState === 'string') {\r\n            const parsed = Number(rawState.trim());\r\n            if (Number.isFinite(parsed)) {\r\n              value = Math.trunc(parsed);\r\n            }\r\n          }\r\n          if (value === null && (resolvedSearchStrategy === 'random' || resolvedSearchStrategy === 'optuna')) {\r\n            return searchRandomStateDefault !== null ? searchRandomStateDefault : null;\r\n          }\r\n          return value;\r\n        };\r\n\r\n        const resolvedIterations = resolveIterations();\r\n        const resolvedRandomState = resolveRandomState();\r\n\r\n        const metadata: Record<string, any> = {};\r\n        if (targetColumn) {\r\n          metadata.target_column = targetColumn;\r\n        }\r\n        if (problemType) {\r\n          metadata.problem_type = problemType;\r\n        }\r\n        metadata.strategy_id = strategy.id;\r\n        metadata.strategy_label = strategyLabel;\r\n        metadata.strategy_index = index + 1;\r\n        metadata.search_strategy = resolvedSearchStrategy;\r\n        if (resolvedIterations !== null && (resolvedSearchStrategy === 'random' || resolvedSearchStrategy === 'optuna')) {\r\n          metadata.max_iterations = resolvedIterations;\r\n        }\r\n        if (resolvedScoring) {\r\n          metadata.scoring_metric = resolvedScoring;\r\n        }\r\n        if (resolvedRandomState !== null) {\r\n          metadata.random_state = resolvedRandomState;\r\n        }\r\n        metadata.search_space_keys = Object.keys(sanitizedSearchSpace);\r\n        if (parameterCount > 0) {\r\n          metadata.search_space_parameters = parameterCount;\r\n        }\r\n        if (candidateProduct !== null) {\r\n          metadata.search_space_candidates = candidateProduct;\r\n        }\r\n        metadata.cross_validation = {\r\n          enabled: cvEnabled,\r\n          strategy: cvStrategy,\r\n          folds: cvFolds,\r\n          shuffle: cvShuffle,\r\n          random_state: cvRandomState,\r\n        };\r\n\r\n        const graphForStrategy = mergeConfigIntoGraph(strategyConfig) ?? graphPayload;\r\n        if (!graphForStrategy) {\r\n          issues.push(`Unable to build pipeline graph for ${strategyLabel}.`);\r\n          continue;\r\n        }\r\n\r\n        const baselinePayload =\r\n          sanitizedBaseline && Object.keys(sanitizedBaseline).length > 0 ? cloneJson(sanitizedBaseline) : undefined;\r\n        const searchSpacePayload = cloneJson(sanitizedSearchSpace);\r\n\r\n        const payload: HyperparameterTuningJobCreatePayload = {\r\n          dataset_source_id: sourceId,\r\n          pipeline_id: pipelineId,\r\n          node_id: nodeId,\r\n          model_type: resolvedModelType,\r\n          model_types: [resolvedModelType],\r\n          search_strategy: resolvedSearchStrategy,\r\n          search_space: searchSpacePayload,\r\n          baseline_hyperparameters: baselinePayload,\r\n          n_iterations:\r\n            resolvedSearchStrategy === 'random' || resolvedSearchStrategy === 'optuna'\r\n              ? resolvedIterations ?? undefined\r\n              : undefined,\r\n          scoring: resolvedScoring ?? undefined,\r\n          random_state: resolvedRandomState ?? undefined,\r\n          cross_validation: {\r\n            enabled: cvEnabled,\r\n            strategy: cvStrategy,\r\n            folds: cvFolds,\r\n            shuffle: cvShuffle,\r\n            random_state: cvRandomState,\r\n          },\r\n          metadata,\r\n          job_metadata: metadata,\r\n          run_tuning: true,\r\n          graph: graphForStrategy,\r\n          target_node_id: nodeId,\r\n        };\r\n\r\n        plans.push({ payload, label: strategyLabel });\r\n      }\r\n\r\n      return { plans, issues };\r\n    };\r\n\r\n    setBatchEnqueueError(null);\r\n    const { plans, issues } = await buildStrategyPlans();\r\n    if (!plans.length) {\r\n      if (issues.length) {\r\n        setBatchEnqueueError(issues.join(' '));\r\n      }\r\n      return;\r\n    }\r\n\r\n    const aggregatedJobs: HyperparameterTuningJobResponse[] = [];\r\n    for (const { payload } of plans) {\r\n      try {\r\n        const result = await enqueueTuningJob(payload);\r\n        if (Array.isArray(result?.jobs) && result.jobs.length) {\r\n          aggregatedJobs.push(...result.jobs);\r\n        }\r\n      } catch (error) {\r\n        if (error instanceof Error && error.message) {\r\n          setBatchEnqueueError(error.message);\r\n        } else {\r\n          setBatchEnqueueError('Failed to enqueue one or more tuning jobs.');\r\n        }\r\n        return;\r\n      }\r\n    }\r\n\r\n    if (aggregatedJobs.length) {\r\n      const latestJob = aggregatedJobs[aggregatedJobs.length - 1];\r\n      setLastCreatedJob(latestJob);\r\n      setLastCreatedJobCount(aggregatedJobs.length);\r\n    }\r\n  }, [\r\n    allowedHyperparamNames,\r\n    cvEnabled,\r\n    cvFolds,\r\n    cvRandomState,\r\n    cvShuffle,\r\n    cvStrategy,\r\n    enqueueTuningJob,\r\n    graphPayload,\r\n    mergeConfigIntoGraph,\r\n    modelType,\r\n    modelTypeParameterName,\r\n    nodeId,\r\n    onSaveDraftConfig,\r\n    parameterDefaultStrategy,\r\n    queryClient,\r\n    pipelineId,\r\n    problemType,\r\n    scoringMetricParameterName,\r\n    searchIterationsDefault,\r\n    searchIterationsParameterName,\r\n    searchRandomStateDefault,\r\n    searchRandomStateParameterName,\r\n    searchStrategyParameterName,\r\n    setBatchEnqueueError,\r\n    setHasDraftChanges,\r\n    sourceId,\r\n    strategies,\r\n    targetColumn,\r\n  ]);\r\n\r\n  const handleRefreshJobs = useCallback(() => {\r\n    if (shouldFetchJobs) {\r\n      tuningJobsQuery.refetch();\r\n    }\r\n  }, [shouldFetchJobs, tuningJobsQuery]);\r\n\r\n  const renderJobSummary = (job: HyperparameterTuningJobSummary) => {\r\n    const statusLabel = STATUS_LABEL[job.status] ?? job.status;\r\n    const modelOptionLabel = modelTypeOptions.find((option) => option.value === job.model_type)?.label;\r\n    const modelLabel = (modelOptionLabel ?? job.model_type ?? '').trim();\r\n    const strategyLabel = (() => {\r\n      switch (job.search_strategy) {\r\n        case 'grid':\r\n          return 'Grid search';\r\n        case 'halving':\r\n          return 'Successive halving';\r\n        case 'halving_random':\r\n          return 'Successive halving (randomized)';\r\n        case 'optuna':\r\n          return 'Optuna search';\r\n        default:\r\n          return 'Random search';\r\n      }\r\n    })();\r\n    const updatedLabel = job.updated_at ? formatRelativeTime(job.updated_at) : null;\r\n    const fallbackUpdated = job.updated_at || job.created_at;\r\n    const timestampLabel = fallbackUpdated\r\n      ? updatedLabel ?? new Date(fallbackUpdated).toLocaleString()\r\n      : null;\r\n    const jobError = typeof job.error_message === 'string' ? job.error_message.trim() : '';\r\n\r\n    const detailParts: string[] = [];\r\n    if (modelLabel) {\r\n      detailParts.push(`Model ${modelLabel}`);\r\n    }\r\n    detailParts.push(strategyLabel);\r\n    if (Array.isArray(job.results) && job.results.length > 0) {\r\n      detailParts.push(`${job.results.length} candidates`);\r\n    }\r\n    const bestScore = typeof job.best_score === 'number' && Number.isFinite(job.best_score)\r\n      ? job.best_score\r\n      : typeof job.metrics?.best_score === 'number'\r\n        ? job.metrics.best_score\r\n        : null;\r\n    if (bestScore !== null) {\r\n      detailParts.push(`Best score ${formatMetricValue(bestScore)}`);\r\n    }\r\n    const scoring = String(job.metrics?.scoring ?? job.metrics?.scorer ?? job.metadata?.scoring_metric ?? '').trim();\r\n    if (scoring) {\r\n      detailParts.push(`Scoring ${scoring}`);\r\n    }\r\n    if (job.status === 'failed' && jobError) {\r\n      const normalizedError = jobError.replace(/\\s+/g, ' ');\r\n      detailParts.push(`Error: ${normalizedError}`);\r\n    }\r\n    if (timestampLabel) {\r\n      detailParts.push(`Updated ${timestampLabel}`);\r\n    }\r\n\r\n    return (\r\n      <li key={job.id}>\r\n        <strong>Run {job.run_number}</strong>  {statusLabel}\r\n        {detailParts.length ? `  ${detailParts.join('  ')}` : ''}\r\n      </li>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <section className=\"canvas-modal__section\">\r\n      <div className=\"canvas-modal__section-header\">\r\n        <h3>Hyperparameter tuning jobs</h3>\r\n        <div className=\"canvas-modal__section-actions\">\r\n          <button\r\n            type=\"button\"\r\n            className=\"btn btn-outline-secondary\"\r\n            onClick={handleAddStrategy}\r\n          >\r\n            Add strategy\r\n          </button>\r\n          <button\r\n            type=\"button\"\r\n            className=\"btn btn-outline-secondary\"\r\n            onClick={handleRefreshJobs}\r\n            disabled={!shouldFetchJobs || isJobsLoading}\r\n          >\r\n            {isJobsLoading ? 'Refreshing' : 'Refresh jobs'}\r\n          </button>\r\n        </div>\r\n      </div>\r\n      <p className=\"canvas-modal__note\">\r\n        Launch background tuning jobs that evaluate candidate hyperparameters via cross-validation. Jobs are\r\n        versioned per pipeline and surface the best configuration when finished.\r\n      </p>\r\n\r\n      {pipelineId && (\r\n        <p className=\"canvas-modal__note canvas-modal__note--muted\">\r\n          Pipeline ID: <code>{pipelineId}</code>\r\n        </p>\r\n      )}\r\n\r\n      {hasDraftChanges && (\r\n        <p\r\n          className=\"canvas-modal__note canvas-modal__note--warning\"\r\n          style={{\r\n            background: 'rgba(251, 146, 60, 0.1)',\r\n            borderLeft: '3px solid rgba(251, 146, 60, 0.8)',\r\n            padding: '0.75rem 1rem',\r\n            margin: '0.75rem 0',\r\n          }}\r\n        >\r\n          <strong> Unsaved Configuration Changes</strong>\r\n          <br />\r\n          Enqueuing a tuning job saves the current configuration so results align with this pipeline snapshot.\r\n        </p>\r\n      )}\r\n\r\n      {prerequisites.map((note, index) => (\r\n        <p key={`tuning-prereq-${index}`} className=\"canvas-modal__note canvas-modal__note--warning\">\r\n          {note}\r\n        </p>\r\n      ))}\r\n\r\n      {createJobError instanceof Error && (\r\n        <p className=\"canvas-modal__note canvas-modal__note--error\">{createJobError.message}</p>\r\n      )}\r\n\r\n      {batchEnqueueError && (\r\n        <p className=\"canvas-modal__note canvas-modal__note--error\">{batchEnqueueError}</p>\r\n      )}\r\n\r\n      {jobsError && !(createJobError instanceof Error) && (\r\n        <p className=\"canvas-modal__note canvas-modal__note--error\">\r\n          {jobsError.message || 'Unable to load tuning jobs.'}\r\n        </p>\r\n      )}\r\n\r\n      {lastCreatedJob && (\r\n        <p className=\"canvas-modal__note canvas-modal__note--info\">\r\n          {lastCreatedJobCount > 1 ? (\r\n            <span>\r\n              Queued {lastCreatedJobCount} tuning jobs. Latest job {lastCreatedJob.id} (run {lastCreatedJob.run_number}).\r\n            </span>\r\n          ) : (\r\n            <span>\r\n              Tuning job {lastCreatedJob.id} queued (run {lastCreatedJob.run_number}).\r\n            </span>\r\n          )}\r\n        </p>\r\n      )}\r\n\r\n      {hasSearchSpaceEntries && searchSpaceDimension.parameterCount > 0 && (\r\n        <p className=\"canvas-modal__note canvas-modal__note--muted\">\r\n          Search space covers {searchSpaceDimension.parameterCount} hyperparameter{searchSpaceDimension.parameterCount === 1 ? '' : 's'}\r\n          {searchSpaceDimension.candidateProduct !== null\r\n            ? `  up to ${searchSpaceDimension.candidateProduct.toLocaleString()} combinations`\r\n            : ''}\r\n          .\r\n        </p>\r\n      )}\r\n\r\n      <div className=\"canvas-imputer__list\" style={{ marginTop: '1.25rem' }}>\r\n        {strategies.length === 0 && (\r\n          <p\r\n            style={{\r\n              margin: '0',\r\n              padding: '1rem 1.25rem',\r\n              border: '1px dashed rgba(148, 163, 184, 0.4)',\r\n              borderRadius: '6px',\r\n              color: 'rgba(148, 163, 184, 0.85)',\r\n              background: 'rgba(15, 23, 42, 0.35)',\r\n            }}\r\n          >\r\n            No tuning strategies configured yet. Use \"Add strategy\" to define your search plan.\r\n          </p>\r\n        )}\r\n        {strategies.map((strategy, index) => {\r\n          const summary = strategySummaries[index];\r\n          const isActive = Boolean(activeStrategy && activeStrategy.id === strategy.id);\r\n          const isExpanded = expandedStrategyIds.has(strategy.id);\r\n          const summaryParts: string[] = [];\r\n          if (summary?.modelLabel) {\r\n            summaryParts.push(summary.modelLabel);\r\n          }\r\n          if (summary?.searchStrategyLabel) {\r\n            summaryParts.push(summary.searchStrategyLabel);\r\n          }\r\n          if (summary?.scoringLabel) {\r\n            summaryParts.push(`Scoring ${summary.scoringLabel}`);\r\n          }\r\n          if (summary?.parameterCount) {\r\n            const candidateLabel = summary.candidateCount\r\n              ? `${summary.parameterCount} param${summary.parameterCount === 1 ? '' : 's'}  ${summary.candidateCount} candidate${summary.candidateCount === 1 ? '' : 's'}`\r\n              : `${summary.parameterCount} param${summary.parameterCount === 1 ? '' : 's'}`;\r\n            summaryParts.push(candidateLabel);\r\n          } else if (!summaryParts.includes('Needs attention')) {\r\n            summaryParts.push('No search values');\r\n          }\r\n          if (summary?.hasErrors) {\r\n            summaryParts.push('Needs attention');\r\n          }\r\n          const summaryText = summaryParts.length > 0 ? summaryParts.join('  ') : 'Configure strategy settings';\r\n\r\n          return (\r\n            <div key={strategy.id} className=\"canvas-imputer__card\">\r\n              <div className=\"canvas-imputer__card-header\">\r\n                <button\r\n                  type=\"button\"\r\n                  className=\"canvas-imputer__card-toggle\"\r\n                  onClick={() => {\r\n                    handleToggleStrategy(strategy.id);\r\n                    if (!isActive) {\r\n                      handleActivateStrategy(strategy.id);\r\n                    }\r\n                  }}\r\n                  aria-expanded={isExpanded}\r\n                  aria-controls={`tuning-strategy-body-${strategy.id}`}\r\n                >\r\n                  <span\r\n                    className={`canvas-imputer__toggle-icon${isExpanded ? ' canvas-imputer__toggle-icon--open' : ''}`}\r\n                    aria-hidden=\"true\"\r\n                  />\r\n                  <span className=\"canvas-imputer__card-text\">\r\n                    <span className=\"canvas-imputer__card-title\">{summary?.label ?? createStrategyLabel(index + 1)}</span>\r\n                    <span className=\"canvas-imputer__card-summary\">{summaryText}</span>\r\n                  </span>\r\n                </button>\r\n                {strategies.length > 1 && (\r\n                  <button\r\n                    type=\"button\"\r\n                    className=\"canvas-imputer__remove\"\r\n                    onClick={() => handleRemoveStrategy(strategy.id)}\r\n                    aria-label={`Remove ${summary?.label ?? createStrategyLabel(index + 1)}`}\r\n                  >\r\n                    Remove\r\n                  </button>\r\n                )}\r\n              </div>\r\n              {isExpanded && isActive && (\r\n                <div className=\"canvas-imputer__card-body\" id={`tuning-strategy-body-${strategy.id}`}>\r\n                  <div className=\"canvas-modal__parameter-grid\">\r\n                    {filteredModelTypeParameter && renderParameterField(filteredModelTypeParameter)}\r\n                    {searchStrategyParameter && renderParameterField(searchStrategyParameter)}\r\n                    {(searchStrategy === 'random' || searchStrategy === 'optuna') &&\r\n                      searchIterationsParameter &&\r\n                      renderParameterField(searchIterationsParameter)}\r\n                    {(searchStrategy === 'random' || searchStrategy === 'optuna') &&\r\n                      searchRandomStateParameter &&\r\n                      renderParameterField(searchRandomStateParameter)}\r\n                  </div>\r\n\r\n                  <div\r\n                    style={{\r\n                      marginTop: '1rem',\r\n                      padding: '1rem 1.25rem',\r\n                      background: 'rgba(15, 23, 42, 0.25)',\r\n                      border: '1px solid rgba(148, 163, 184, 0.2)',\r\n                      borderRadius: '6px',\r\n                    }}\r\n                  >\r\n                    <div style={{ fontWeight: 600, color: '#e2e8f0', display: 'block' }}>{scoringLabel}</div>\r\n                    <p style={{ margin: '0.4rem 0 0.75rem', fontSize: '0.85rem', color: 'rgba(148, 163, 184, 0.85)' }}>\r\n                      {scoringDescription}\r\n                    </p>\r\n                    <div\r\n                      id={scoringInputId}\r\n                      style={{\r\n                        display: 'inline-flex',\r\n                        alignItems: 'center',\r\n                        gap: '0.5rem',\r\n                        padding: '0.4rem 0.75rem',\r\n                        borderRadius: '999px',\r\n                        border: '1px solid rgba(148, 163, 184, 0.35)',\r\n                        background: 'rgba(15, 23, 42, 0.35)',\r\n                        color: 'rgba(203, 213, 225, 0.9)',\r\n                        fontSize: '0.85rem',\r\n                        maxWidth: '320px',\r\n                        marginBottom: '0.75rem',\r\n                      }}\r\n                    >\r\n                      <span style={{ opacity: 0.75 }}>Selected:</span>\r\n                      <strong style={{ color: '#e2e8f0' }}>{scoringDraft || 'Estimator default'}</strong>\r\n                    </div>\r\n                    <div\r\n                      style={{\r\n                        display: 'flex',\r\n                        flexWrap: 'wrap',\r\n                        gap: '0.5rem',\r\n                        marginTop: '0.75rem',\r\n                      }}\r\n                    >\r\n                      {scoringSuggestions.map((suggestion) => (\r\n                        <button\r\n                          key={suggestion.value}\r\n                          type=\"button\"\r\n                          onClick={() => handleScoringChange(suggestion.value)}\r\n                          style={{\r\n                            padding: '0.35rem 0.7rem',\r\n                            fontSize: '0.8rem',\r\n                            borderRadius: '999px',\r\n                            border: '1px solid rgba(148, 163, 184, 0.35)',\r\n                            background: scoringDraft === suggestion.value ? 'rgba(59, 130, 246, 0.2)' : 'rgba(15, 23, 42, 0.35)',\r\n                            color: scoringDraft === suggestion.value ? '#bfdbfe' : 'rgba(203, 213, 225, 0.9)',\r\n                            cursor: 'pointer',\r\n                          }}\r\n                        >\r\n                          {suggestion.label}\r\n                        </button>\r\n                      ))}\r\n                      <button\r\n                        type=\"button\"\r\n                        onClick={() => handleScoringChange('')}\r\n                        style={{\r\n                          padding: '0.35rem 0.7rem',\r\n                          fontSize: '0.8rem',\r\n                          borderRadius: '999px',\r\n                          border: '1px solid rgba(148, 163, 184, 0.35)',\r\n                          background: 'rgba(15, 23, 42, 0.35)',\r\n                          color: 'rgba(203, 213, 225, 0.9)',\r\n                          cursor: 'pointer',\r\n                        }}\r\n                      >\r\n                        Reset to default\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n\r\n                  {modelType && hyperparamFields.length > 0 && (\r\n                    <div\r\n                      style={{\r\n                        marginTop: '1.25rem',\r\n                        padding: '1.25rem',\r\n                        background: 'rgba(15, 23, 42, 0.2)',\r\n                        border: '1px solid rgba(148, 163, 184, 0.2)',\r\n                        borderRadius: '6px',\r\n                      }}\r\n                    >\r\n                      <div style={{ display: 'flex', justifyContent: 'space-between', flexWrap: 'wrap', gap: '0.75rem' }}>\r\n                        <div>\r\n                          <h4 style={{ margin: 0, fontSize: '1rem', fontWeight: 600, color: '#e2e8f0' }}>Baseline hyperparameter overrides</h4>\r\n                          <p style={{ margin: '0.35rem 0 0', fontSize: '0.85rem', color: 'rgba(148, 163, 184, 0.85)' }}>\r\n                            Pre-fill model defaults before the search runs. Leave fields blank to keep the template values.\r\n                          </p>\r\n                        </div>\r\n                        <div style={{ display: 'flex', flexDirection: 'column', alignItems: 'flex-end', gap: '0.5rem' }}>\r\n                          <span style={{ fontSize: '0.85rem', color: 'rgba(148, 163, 184, 0.85)' }}>\r\n                            {baselineOverrideCount > 0\r\n                              ? `${baselineOverrideCount} override${baselineOverrideCount === 1 ? '' : 's'} configured`\r\n                              : 'Using template defaults'}\r\n                          </span>\r\n                          {baselineOverrideCount > 0 && (\r\n                            <button\r\n                              type=\"button\"\r\n                              onClick={handleResetBaselineOverrides}\r\n                              style={{\r\n                                padding: '0.35rem 0.7rem',\r\n                                fontSize: '0.8rem',\r\n                                borderRadius: '999px',\r\n                                border: '1px solid rgba(148, 163, 184, 0.35)',\r\n                                background: 'rgba(15, 23, 42, 0.35)',\r\n                                color: 'rgba(203, 213, 225, 0.9)',\r\n                                cursor: 'pointer',\r\n                              }}\r\n                            >\r\n                              Reset overrides\r\n                            </button>\r\n                          )}\r\n                        </div>\r\n                      </div>\r\n                      {baselineError && (\r\n                        <p className=\"canvas-modal__note canvas-modal__note--error\" style={{ marginTop: '0.75rem' }}>\r\n                          {baselineError}\r\n                        </p>\r\n                      )}\r\n                      <div\r\n                        style={{\r\n                          marginTop: '1rem',\r\n                          display: 'grid',\r\n                          gridTemplateColumns: 'repeat(auto-fit, minmax(220px, 1fr))',\r\n                          gap: '1rem',\r\n                        }}\r\n                      >\r\n                        {hyperparamFields.map(renderBaselineField)}\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n\r\n                  {modelType && hyperparamFields.length > 0 && (\r\n                    <div\r\n                      style={{\r\n                        marginTop: '1.25rem',\r\n                        padding: '1.25rem',\r\n                        background: 'rgba(15, 23, 42, 0.2)',\r\n                        border: '1px solid rgba(148, 163, 184, 0.2)',\r\n                        borderRadius: '6px',\r\n                      }}\r\n                    >\r\n                      <div style={{ display: 'flex', justifyContent: 'space-between', flexWrap: 'wrap', gap: '0.75rem' }}>\r\n                        <div>\r\n                          <h4 style={{ margin: 0, fontSize: '1rem', fontWeight: 600, color: '#e2e8f0' }}>Search space</h4>\r\n                          <p style={{ margin: '0.35rem 0 0', fontSize: '0.85rem', color: 'rgba(148, 163, 184, 0.85)' }}>\r\n                            Provide candidate values for each hyperparameter. Separate entries with commas or new lines.\r\n                          </p>\r\n                        </div>\r\n                        <div style={{ display: 'flex', flexDirection: 'column', alignItems: 'flex-end', gap: '0.5rem' }}>\r\n                          <span style={{ fontSize: '0.85rem', color: 'rgba(148, 163, 184, 0.85)' }}>\r\n                            {searchOverrideCount > 0\r\n                              ? `${searchOverrideCount} parameter${searchOverrideCount === 1 ? '' : 's'} targeted`\r\n                              : 'No parameters queued for tuning yet'}\r\n                          </span>\r\n                          <button\r\n                            type=\"button\"\r\n                            onClick={handleClearSearchSpace}\r\n                            disabled={searchOverrideCount === 0}\r\n                            style={{\r\n                              padding: '0.35rem 0.7rem',\r\n                              fontSize: '0.8rem',\r\n                              borderRadius: '999px',\r\n                              border: '1px solid rgba(148, 163, 184, 0.35)',\r\n                              background: searchOverrideCount === 0 ? 'rgba(15, 23, 42, 0.2)' : 'rgba(15, 23, 42, 0.35)',\r\n                              color: searchOverrideCount === 0 ? 'rgba(148, 163, 184, 0.5)' : 'rgba(203, 213, 225, 0.9)',\r\n                              cursor: searchOverrideCount === 0 ? 'not-allowed' : 'pointer',\r\n                            }}\r\n                          >\r\n                            Clear search space\r\n                          </button>\r\n                        </div>\r\n                      </div>\r\n                      {searchSpaceError && (\r\n                        <p className=\"canvas-modal__note canvas-modal__note--error\" style={{ marginTop: '0.75rem' }}>\r\n                          {searchSpaceError}\r\n                        </p>\r\n                      )}\r\n                      {hasSearchSpaceFieldErrors && (\r\n                        <p className=\"canvas-modal__note canvas-modal__note--warning\" style={{ marginTop: '0.75rem' }}>\r\n                          Fix the highlighted search entries before launching tuning jobs.\r\n                        </p>\r\n                      )}\r\n                      <div\r\n                        style={{\r\n                          marginTop: '1rem',\r\n                          display: 'grid',\r\n                          gridTemplateColumns: 'repeat(auto-fit, minmax(260px, 1fr))',\r\n                          gap: '1rem',\r\n                        }}\r\n                      >\r\n                        {hyperparamFields.map(renderSearchSpaceField)}\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              )}\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n\r\n      {cvEnabled && (\r\n        <p className=\"canvas-modal__note canvas-modal__note--muted\">\r\n          Cross-validation evaluates each candidate with {cvFolds} folds before reporting aggregate metrics.\r\n        </p>\r\n      )}\r\n\r\n      {scalingWarning && (\r\n        <div\r\n          className=\"canvas-modal__note canvas-modal__note--warning\"\r\n          style={{\r\n            margin: '0.75rem 0',\r\n            borderLeft: '3px solid rgba(251, 191, 36, 0.9)',\r\n            background: 'rgba(251, 191, 36, 0.12)',\r\n            padding: '0.75rem 1rem',\r\n          }}\r\n        >\r\n          <div\r\n            style={{\r\n              display: 'flex',\r\n              justifyContent: 'space-between',\r\n              alignItems: 'flex-start',\r\n              gap: '0.75rem',\r\n            }}\r\n          >\r\n            <div>\r\n              <strong> {scalingWarning.headline}</strong>\r\n              <p style={{ margin: '0.35rem 0 0', fontSize: '0.85rem' }}>{scalingWarning.summary}</p>\r\n            </div>\r\n            <button\r\n              type=\"button\"\r\n              className=\"btn btn-outline-secondary\"\r\n              onClick={() => setShowScalingDetails((previous) => !previous)}\r\n              style={{ whiteSpace: 'nowrap' }}\r\n            >\r\n              {showScalingDetails ? 'Hide tips' : 'Show tips'}\r\n            </button>\r\n          </div>\r\n          {showScalingDetails && (\r\n            <ul\r\n              style={{\r\n                margin: '0.75rem 0 0 1rem',\r\n                padding: 0,\r\n                listStyle: 'disc',\r\n                fontSize: '0.85rem',\r\n              }}\r\n            >\r\n              {scalingWarning.details.map((tip, index) => (\r\n                <li key={`tuning-scaling-tip-${index}`} style={{ marginBottom: '0.35rem' }}>\r\n                  {tip}\r\n                </li>\r\n              ))}\r\n            </ul>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      <div className=\"canvas-modal__actions\">\r\n        <button type=\"button\" className=\"btn btn-primary\" onClick={handleEnqueueTuning} disabled={isActionDisabled}>\r\n          {isCreatingJob ? 'Queuing' : 'Launch tuning job'}\r\n        </button>\r\n      </div>\r\n\r\n      {isJobsLoading && <p className=\"canvas-modal__note canvas-modal__note--muted\">Loading recent jobs</p>}\r\n      {!isJobsLoading && tuningJobs.length === 0 && (\r\n        <p className=\"canvas-modal__note canvas-modal__note--muted\">No tuning jobs found for this node.</p>\r\n      )}\r\n      {tuningJobs.length > 0 && <ul className=\"canvas-modal__note-list\">{tuningJobs.map(renderJobSummary)}</ul>}\r\n    </section>\r\n  );\r\n};\r\n","import React, { useMemo } from 'react';\r\nimport type { FeatureNodeParameter, FeatureNodeParameterOption } from '../../../../api';\r\nimport type { PreviewState } from '../dataset/DataSnapshotSection';\r\n\r\ntype ResamplingMode = 'undersampling' | 'oversampling';\r\n\r\ntype ResamplingSchemaGuardDetail = {\r\n  name: string;\r\n  logical_family: string;\r\n};\r\n\r\nexport type ResamplingSchemaGuard = {\r\n  blocked: boolean;\r\n  message: string;\r\n  columns: string[];\r\n  details: ResamplingSchemaGuardDetail[];\r\n};\r\n\r\nexport type ClassResamplingConfig = {\r\n  method: string;\r\n  targetColumn: string;\r\n  samplingStrategy: number | string | null;\r\n  randomState: number | null;\r\n  replacement: boolean | null;\r\n  kNeighbors: number | null;\r\n} | null;\r\n\r\ntype ClassResamplingSectionProps = {\r\n  mode?: ResamplingMode;\r\n  sourceId?: string | null;\r\n  hasReachableSource: boolean;\r\n  previewState: PreviewState;\r\n  onRefreshPreview: () => void;\r\n  config: ClassResamplingConfig;\r\n  methodParameter: FeatureNodeParameter | null;\r\n  targetColumnParameter: FeatureNodeParameter | null;\r\n  samplingStrategyParameter: FeatureNodeParameter | null;\r\n  randomStateParameter: FeatureNodeParameter | null;\r\n  replacementParameter: FeatureNodeParameter | null;\r\n  kNeighborsParameter: FeatureNodeParameter | null;\r\n  renderParameterField: (parameter: FeatureNodeParameter) => React.ReactNode;\r\n  formatMetricValue: (value?: number | null, precision?: number) => string;\r\n  formatMissingPercentage: (value?: number | null) => string;\r\n  schemaGuard?: ResamplingSchemaGuard | null;\r\n};\r\n\r\ntype ClassCountRow = {\r\n  label: string;\r\n  count: number;\r\n  percentage: number;\r\n  isMissing: boolean;\r\n};\r\n\r\nconst STRATEGY_DESCRIPTIONS: Record<ResamplingMode, Record<string, string>> = {\r\n  undersampling: {\r\n    auto: 'auto (match majority to the smallest class)',\r\n    majority: 'majority (down-sample only the majority class)',\r\n    'not minority': 'not minority (down-sample all but the minority class)',\r\n    'not majority': 'not majority (down-sample every class except the majority)',\r\n    all: 'all (down-sample every class)',\r\n  },\r\n  oversampling: {\r\n    auto: 'auto (boost minority class to majority size)',\r\n    minority: 'minority (only over-sample the minority class)',\r\n    'not minority': 'not minority (over-sample every class except the minority)',\r\n    'not majority': 'not majority (avoid synthesising the majority class)',\r\n    all: 'all (over-sample all classes equally)',\r\n  },\r\n};\r\n\r\nconst normalizeStrategyLabel = (\r\n  value: number | string | null | undefined,\r\n  mode: ResamplingMode,\r\n): string => {\r\n  if (value === null || value === undefined || value === '') {\r\n    return STRATEGY_DESCRIPTIONS[mode].auto;\r\n  }\r\n\r\n  if (typeof value === 'number') {\r\n    if (!Number.isFinite(value)) {\r\n      return STRATEGY_DESCRIPTIONS[mode].auto;\r\n    }\r\n    const clamped = Math.max(Math.min(value, 1), 0);\r\n    const percentage = clamped * 100;\r\n    const formattedRatio = clamped.toFixed(clamped >= 0.1 || clamped === 0 ? 2 : 3);\r\n    const descriptor = mode === 'undersampling' ? 'majority' : 'majority baseline';\r\n    return `${formattedRatio} ratio (${percentage.toFixed(1)}% of ${descriptor})`;\r\n  }\r\n\r\n  const normalized = value.trim().toLowerCase();\r\n  return STRATEGY_DESCRIPTIONS[mode][normalized] ?? normalized;\r\n};\r\n\r\nconst findResamplingSummary = (appliedSteps: unknown[], mode: ResamplingMode): string | null => {\r\n  const keywords = mode === 'oversampling'\r\n    ? ['over-sampling', 'oversampling', 'smote', 'adasyn', 'tomek', 'svm smote', 'kmeans smote', 'borderline smote']\r\n    : ['under-sampling', 'undersampling', 'resampling'];\r\n  for (let index = appliedSteps.length - 1; index >= 0; index -= 1) {\r\n    const entry = appliedSteps[index];\r\n    if (typeof entry !== 'string') {\r\n      continue;\r\n    }\r\n    const lowered = entry.toLowerCase();\r\n    if (keywords.some((keyword) => lowered.includes(keyword))) {\r\n      return entry;\r\n    }\r\n  }\r\n  return null;\r\n};\r\n\r\nconst describeClassLabel = (label: string, isMissing: boolean): string => {\r\n  if (isMissing) {\r\n    return 'Missing';\r\n  }\r\n  if (!label.length) {\r\n    return 'Empty string';\r\n  }\r\n  return label;\r\n};\r\n\r\nexport const ClassResamplingSection: React.FC<ClassResamplingSectionProps> = ({\r\n  mode = 'undersampling',\r\n  sourceId,\r\n  hasReachableSource,\r\n  previewState,\r\n  onRefreshPreview,\r\n  config,\r\n  methodParameter,\r\n  targetColumnParameter,\r\n  samplingStrategyParameter,\r\n  randomStateParameter,\r\n  replacementParameter,\r\n  kNeighborsParameter,\r\n  renderParameterField,\r\n  formatMetricValue,\r\n  formatMissingPercentage,\r\n  schemaGuard,\r\n}) => {\r\n  const preview = previewState.data;\r\n  const previewStatus = previewState.status;\r\n  const appliedSteps = Array.isArray(preview?.applied_steps) ? preview?.applied_steps : [];\r\n  const resamplingSummary = useMemo(\r\n    () => findResamplingSummary(appliedSteps, mode),\r\n    [appliedSteps, mode],\r\n  );\r\n\r\n  const targetColumn = config?.targetColumn ?? '';\r\n  const methodKey = config?.method || (typeof methodParameter?.default === 'string' ? methodParameter.default : '');\r\n  const methodLabel = useMemo(() => {\r\n    const options: FeatureNodeParameterOption[] = Array.isArray(methodParameter?.options)\r\n      ? (methodParameter?.options as FeatureNodeParameterOption[])\r\n      : [];\r\n    if (methodKey) {\r\n      const match = options.find((option: FeatureNodeParameterOption) => option.value === methodKey);\r\n      if (match?.label) {\r\n        return match.label;\r\n      }\r\n      return methodKey.replace(/_/g, ' ');\r\n    }\r\n    if (options.length > 0) {\r\n      return options[0].label ?? options[0].value;\r\n    }\r\n    return mode === 'undersampling' ? 'Random under-sampling' : 'Synthetic over-sampling';\r\n  }, [methodKey, methodParameter?.options, mode]);\r\n\r\n  const strategyLabel = useMemo(\r\n    () => normalizeStrategyLabel(config?.samplingStrategy, mode),\r\n    [config?.samplingStrategy, mode],\r\n  );\r\n\r\n  const randomStateLabel = useMemo(() => {\r\n    if (config?.randomState === null || config?.randomState === undefined) {\r\n      return 'Not set';\r\n    }\r\n    if (Number.isFinite(config.randomState)) {\r\n      return String(config.randomState);\r\n    }\r\n    return 'Not set';\r\n  }, [config?.randomState]);\r\n\r\n  const kNeighborsLabel = useMemo(() => {\r\n    if (mode !== 'oversampling') {\r\n      return null;\r\n    }\r\n    const configured = config?.kNeighbors;\r\n    if (typeof configured === 'number' && Number.isFinite(configured)) {\r\n      return String(Math.max(1, Math.round(configured)));\r\n    }\r\n    if (kNeighborsParameter && typeof kNeighborsParameter.default === 'number') {\r\n      const fallback = kNeighborsParameter.default;\r\n      if (Number.isFinite(fallback)) {\r\n        return String(Math.max(1, Math.round(fallback)));\r\n      }\r\n    }\r\n    return 'Default';\r\n  }, [config?.kNeighbors, kNeighborsParameter, mode]);\r\n\r\n  const replacementLabel =\r\n    config?.replacement === null || config?.replacement === undefined\r\n      ? null\r\n      : config.replacement\r\n        ? 'With replacement'\r\n        : 'Without replacement';\r\n\r\n  const classCountSummary = useMemo(() => {\r\n    if (previewStatus !== 'success' || !preview || !targetColumn) {\r\n      return { rows: [] as ClassCountRow[], total: 0, truncated: false };\r\n    }\r\n\r\n    const sampleRows = Array.isArray(preview.sample_rows) ? preview.sample_rows : [];\r\n    if (!sampleRows.length) {\r\n      return { rows: [] as ClassCountRow[], total: 0, truncated: false };\r\n    }\r\n\r\n    const counts = new Map<string, ClassCountRow>();\r\n\r\n    sampleRows.forEach((row: Record<string, unknown>) => {\r\n      if (!row || typeof row !== 'object') {\r\n        return;\r\n      }\r\n      const rawValue = (row as Record<string, unknown>)[targetColumn];\r\n      const isMissing = rawValue === null || rawValue === undefined;\r\n      const key = isMissing ? '__missing__' : String(rawValue);\r\n      const label = describeClassLabel(isMissing ? '' : key, isMissing);\r\n      const existing = counts.get(key);\r\n      if (existing) {\r\n        existing.count += 1;\r\n      } else {\r\n        counts.set(\r\n          key,\r\n          {\r\n            label,\r\n            count: 1,\r\n            percentage: 0,\r\n            isMissing,\r\n          },\r\n        );\r\n      }\r\n    });\r\n\r\n    const aggregate = Array.from(counts.values()).sort((a, b) => b.count - a.count);\r\n    const totalCount = aggregate.reduce((acc, entry) => acc + entry.count, 0);\r\n    const limit = 8;\r\n    const truncated = aggregate.length > limit;\r\n    const rows = truncated ? aggregate.slice(0, limit) : aggregate;\r\n    const rowsWithPercentage = rows.map((entry) => ({\r\n      ...entry,\r\n      percentage: totalCount > 0 ? (entry.count / totalCount) * 100 : 0,\r\n    }));\r\n\r\n    return {\r\n      rows: rowsWithPercentage,\r\n      total: totalCount,\r\n      truncated,\r\n    };\r\n  }, [preview, previewStatus, targetColumn]);\r\n\r\n  const previewRowCount = preview?.metrics?.row_count ?? null;\r\n  const canRefreshPreview = Boolean(sourceId) && hasReachableSource && previewStatus !== 'loading' && !schemaGuard?.blocked;\r\n\r\n  const connectionNote = useMemo(() => {\r\n    if (!sourceId) {\r\n      return 'Connect to a dataset to preview class distributions.';\r\n    }\r\n    if (!hasReachableSource) {\r\n      return 'Link this node to the dataset input to evaluate class balance.';\r\n    }\r\n    return null;\r\n  }, [hasReachableSource, sourceId]);\r\n\r\n  const schemaGuardSummary = useMemo(() => {\r\n    if (!schemaGuard?.blocked || !schemaGuard.details.length) {\r\n      return '';\r\n    }\r\n    return schemaGuard.details\r\n      .map((detail: ResamplingSchemaGuardDetail) =>\r\n        detail.logical_family ? `${detail.name} (${detail.logical_family})` : detail.name,\r\n      )\r\n      .join(', ');\r\n  }, [schemaGuard]);\r\n\r\n  const targetNotConfigured = !targetColumn;\r\n  const previewMissingTarget =\r\n    Boolean(targetColumn) && Array.isArray(preview?.columns) && !preview?.columns.includes(targetColumn);\r\n\r\n  const heading = mode === 'undersampling' ? 'Class undersampling' : 'Class oversampling';\r\n  const description =\r\n    mode === 'undersampling'\r\n      ? 'Random under-sampling trims majority-class examples to mitigate imbalance before training downstream models. It preserves minority class signals but can discard information from majority classes when ratios are aggressive.'\r\n      : 'Synthetic over-sampling boosts minority representation by generating new samples. Integer feature columns are temporarily cast to float so synthesized values can include decimals, which helps models learn rare classes while requiring careful preprocessing to avoid noise.';\r\n  const connectionGuidance = mode === 'undersampling'\r\n    ? 'enable undersampling'\r\n    : 'enable oversampling';\r\n\r\n  return (\r\n    <section className=\"canvas-modal__section\">\r\n      <div className=\"canvas-modal__section-header\">\r\n        <h3>{heading}</h3>\r\n        <div className=\"canvas-modal__section-actions\">\r\n          <button\r\n            type=\"button\"\r\n            className=\"btn btn-outline-secondary\"\r\n            onClick={onRefreshPreview}\r\n            disabled={!canRefreshPreview}\r\n          >\r\n            {previewStatus === 'loading' ? 'Refreshing' : 'Refresh preview'}\r\n          </button>\r\n        </div>\r\n      </div>\r\n      <p className=\"canvas-modal__note\">{description}</p>\r\n      {connectionNote && <p className=\"canvas-modal__note canvas-modal__note--warning\">{connectionNote}</p>}\r\n      {targetNotConfigured && (\r\n        <p className=\"canvas-modal__note canvas-modal__note--warning\">\r\n          Specify a target column to compute class ratios and {connectionGuidance}.\r\n        </p>\r\n      )}\r\n      {schemaGuard?.blocked && (\r\n        <p className=\"canvas-modal__note canvas-modal__note--warning\">\r\n          {schemaGuard.message}\r\n          {schemaGuardSummary && <>\r\n            {' '}Columns: {schemaGuardSummary}.\r\n          </>}\r\n        </p>\r\n      )}\r\n      {previewStatus === 'error' && previewState.error && (\r\n        <p className=\"canvas-modal__note canvas-modal__note--error\">{previewState.error}</p>\r\n      )}\r\n      {previewMissingTarget && (\r\n        <p className=\"canvas-modal__note canvas-modal__note--warning\">\r\n          Target column {targetColumn} is not present in the current preview. Check upstream nodes or refresh the\r\n          dataset snapshot.\r\n        </p>\r\n      )}\r\n      {resamplingSummary && (\r\n        <p className=\"canvas-modal__note canvas-modal__note--info\">{resamplingSummary}</p>\r\n      )}\r\n\r\n      <ul className=\"canvas-modal__note-list\">\r\n        <li>\r\n          Method: <strong>{methodLabel}</strong>\r\n        </li>\r\n        <li>\r\n          Sampling strategy: <strong>{strategyLabel}</strong>\r\n        </li>\r\n        {mode === 'oversampling' && kNeighborsLabel && (\r\n          <li>\r\n            k-neighbors: <strong>{kNeighborsLabel}</strong>\r\n          </li>\r\n        )}\r\n        {replacementLabel && (\r\n          <li>\r\n            Replacement: <strong>{replacementLabel}</strong>\r\n          </li>\r\n        )}\r\n        <li>\r\n          Random state: <strong>{randomStateLabel}</strong>\r\n        </li>\r\n      </ul>\r\n\r\n      <div className=\"canvas-modal__parameter-grid\">\r\n        {methodParameter && renderParameterField(methodParameter)}\r\n        {samplingStrategyParameter && renderParameterField(samplingStrategyParameter)}\r\n        {mode === 'oversampling' && kNeighborsParameter && renderParameterField(kNeighborsParameter)}\r\n        {randomStateParameter && renderParameterField(randomStateParameter)}\r\n        {replacementParameter && renderParameterField(replacementParameter)}\r\n      </div>\r\n\r\n      {targetColumnParameter && (\r\n        <div className=\"canvas-modal__parameter-list\">\r\n          {renderParameterField(targetColumnParameter)}\r\n        </div>\r\n      )}\r\n\r\n      {targetColumn && previewStatus === 'success' && !previewMissingTarget && (\r\n        classCountSummary.rows.length ? (\r\n          <div className=\"canvas-cast__table-wrapper\">\r\n            <table className=\"canvas-cast__table\">\r\n              <thead>\r\n                <tr>\r\n                  <th scope=\"col\">Class</th>\r\n                  <th scope=\"col\">Sample count</th>\r\n                  <th scope=\"col\">Share</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {classCountSummary.rows.map((entry) => (\r\n                  <tr key={`resampling-class-${entry.label}`}>\r\n                    <th scope=\"row\">{entry.label}</th>\r\n                    <td>{formatMetricValue(entry.count)}</td>\r\n                    <td>{formatMissingPercentage(entry.percentage)}</td>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n            </table>\r\n            <p className=\"canvas-modal__note\">\r\n              Analysed {formatMetricValue(classCountSummary.total)} row\r\n              {classCountSummary.total === 1 ? '' : 's'} from the preview.\r\n              {classCountSummary.truncated ? ' Showing top classes by frequency.' : ''}\r\n            </p>\r\n            {previewRowCount !== null && (\r\n              <p className=\"canvas-modal__note canvas-modal__note--muted\">\r\n                Preview rows after resampling: {formatMetricValue(previewRowCount)}.\r\n              </p>\r\n            )}\r\n          </div>\r\n        ) : (\r\n          <p className=\"canvas-modal__note\">\r\n            No class distribution available in the preview sample. Refresh after configuring the node or increasing\r\n            the sample size.\r\n          </p>\r\n        )\r\n      )}\r\n    </section>\r\n  );\r\n};","// Node catalog helpers leveraged by NodeSettingsModal to derive flag sets.\r\nimport type { Node } from 'react-flow-renderer';\r\n\r\nexport const isDatasetNode = (node: Node | null | undefined) =>\r\n  Boolean(node?.data?.isDataset || node?.id === 'dataset-source');\r\n\r\nexport const INSPECTION_NODE_TYPES = new Set<string>([\r\n  'binned_distribution',\r\n  'data_preview',\r\n  'outlier_monitor',\r\n  'skewness_distribution',\r\n  'dataset_profile',\r\n  'transformer_audit',\r\n]);\r\n\r\nexport const DATA_CONSISTENCY_TYPES = new Set<string>([\r\n  'trim_whitespace',\r\n  'normalize_text_case',\r\n  'replace_aliases_typos',\r\n  'standardize_date_formats',\r\n  'remove_special_characters',\r\n  'replace_invalid_values',\r\n  'regex_replace_fix',\r\n]);\r\n","import { useMemo } from 'react';\r\nimport type { Node } from 'react-flow-renderer';\r\nimport { DATA_CONSISTENCY_TYPES, INSPECTION_NODE_TYPES, isDatasetNode } from '../utils/catalogTypes';\r\n\r\nexport type CatalogFlagMap = {\r\n  catalogType: string;\r\n  isDataset: boolean;\r\n  isImputerNode: boolean;\r\n  isMissingIndicatorNode: boolean;\r\n  isReplaceAliasesNode: boolean;\r\n  isTrimWhitespaceNode: boolean;\r\n  isRemoveSpecialCharsNode: boolean;\r\n  isReplaceInvalidValuesNode: boolean;\r\n  isRegexCleanupNode: boolean;\r\n  isNormalizeTextCaseNode: boolean;\r\n  isStandardizeDatesNode: boolean;\r\n  isLabelEncodingNode: boolean;\r\n  isTargetEncodingNode: boolean;\r\n  isHashEncodingNode: boolean;\r\n  isTrainModelDraftNode: boolean;\r\n  isModelEvaluationNode: boolean;\r\n  isModelRegistryNode: boolean;\r\n  isHyperparameterTuningNode: boolean;\r\n  isFeatureTargetSplitNode: boolean;\r\n  isTrainTestSplitNode: boolean;\r\n  isClassUndersamplingNode: boolean;\r\n  isClassOversamplingNode: boolean;\r\n  isOrdinalEncodingNode: boolean;\r\n  isDummyEncodingNode: boolean;\r\n  isOneHotEncodingNode: boolean;\r\n  isFeatureMathNode: boolean;\r\n  isCastNode: boolean;\r\n  isBinningNode: boolean;\r\n  isScalingNode: boolean;\r\n  isPolynomialFeaturesNode: boolean;\r\n  isFeatureSelectionNode: boolean;\r\n  isSkewnessNode: boolean;\r\n  isSkewnessDistributionNode: boolean;\r\n  isBinnedDistributionNode: boolean;\r\n  isTransformerAuditNode: boolean;\r\n  isOutlierNode: boolean;\r\n  isDataConsistencyNode: boolean;\r\n  isInspectionNode: boolean;\r\n  isRemoveDuplicatesNode: boolean;\r\n  isDropMissingColumnsNode: boolean;\r\n  isDropMissingRowsNode: boolean;\r\n  isDropMissingNode: boolean;\r\n};\r\n\r\nexport const useCatalogFlags = (node: Node | null | undefined): CatalogFlagMap => {\r\n  const catalogType = node?.data?.catalogType ?? '';\r\n\r\n  return useMemo<CatalogFlagMap>(() => {\r\n    const isDataset = isDatasetNode(node);\r\n    const isImputerNode =\r\n      catalogType === 'imputation_methods' ||\r\n      catalogType === 'advanced_imputer' ||\r\n      catalogType === 'simple_imputer';\r\n    const isMissingIndicatorNode = catalogType === 'missing_value_indicator';\r\n    const isReplaceAliasesNode = catalogType === 'replace_aliases_typos';\r\n    const isTrimWhitespaceNode = catalogType === 'trim_whitespace';\r\n    const isRemoveSpecialCharsNode = catalogType === 'remove_special_characters';\r\n    const isReplaceInvalidValuesNode = catalogType === 'replace_invalid_values';\r\n    const isRegexCleanupNode = catalogType === 'regex_replace_fix';\r\n    const isNormalizeTextCaseNode = catalogType === 'normalize_text_case';\r\n    const isStandardizeDatesNode = catalogType === 'standardize_date_formats';\r\n    const isLabelEncodingNode = catalogType === 'label_encoding';\r\n    const isTargetEncodingNode = catalogType === 'target_encoding';\r\n    const isHashEncodingNode = catalogType === 'hash_encoding';\r\n    const isTrainModelDraftNode = catalogType === 'train_model_draft';\r\n    const isModelEvaluationNode = catalogType === 'model_evaluation';\r\n    const isModelRegistryNode = catalogType === 'model_registry_overview';\r\n    const isHyperparameterTuningNode = catalogType === 'hyperparameter_tuning';\r\n    const isFeatureTargetSplitNode = catalogType === 'feature_target_split';\r\n    const isTrainTestSplitNode = catalogType === 'train_test_split';\r\n    const isClassUndersamplingNode = catalogType === 'class_undersampling';\r\n    const isClassOversamplingNode = catalogType === 'class_oversampling';\r\n    const isOrdinalEncodingNode = catalogType === 'ordinal_encoding';\r\n    const isDummyEncodingNode = catalogType === 'dummy_encoding';\r\n    const isOneHotEncodingNode = catalogType === 'one_hot_encoding';\r\n    const isFeatureMathNode = catalogType === 'feature_math';\r\n    const isCastNode = catalogType === 'cast_column_types';\r\n    const isBinningNode = catalogType === 'binning_discretization';\r\n    const isScalingNode = catalogType === 'scale_numeric_features';\r\n    const isPolynomialFeaturesNode = catalogType === 'polynomial_features';\r\n    const isFeatureSelectionNode = catalogType === 'feature_selection';\r\n    const isTransformerAuditNode = catalogType === 'transformer_audit';\r\n    const isOutlierNode = catalogType === 'outlier_removal';\r\n    const isSkewnessNode = catalogType === 'skewness_transform';\r\n    const isSkewnessDistributionNode = catalogType === 'skewness_distribution';\r\n    const isBinnedDistributionNode = catalogType === 'binned_distribution';\r\n    const isDataConsistencyNode = DATA_CONSISTENCY_TYPES.has(catalogType);\r\n    const isInspectionNode = INSPECTION_NODE_TYPES.has(catalogType);\r\n    const isRemoveDuplicatesNode = catalogType === 'remove_duplicates';\r\n    const isDropMissingColumnsNode = catalogType === 'drop_missing_columns';\r\n    const isDropMissingRowsNode = catalogType === 'drop_missing_rows';\r\n    const isDropMissingNode = isDropMissingColumnsNode || isDropMissingRowsNode;\r\n\r\n    return {\r\n      catalogType,\r\n      isDataset,\r\n      isImputerNode,\r\n      isMissingIndicatorNode,\r\n      isReplaceAliasesNode,\r\n      isTrimWhitespaceNode,\r\n      isRemoveSpecialCharsNode,\r\n      isReplaceInvalidValuesNode,\r\n      isRegexCleanupNode,\r\n      isNormalizeTextCaseNode,\r\n      isStandardizeDatesNode,\r\n      isLabelEncodingNode,\r\n      isTargetEncodingNode,\r\n      isHashEncodingNode,\r\n      isTrainModelDraftNode,\r\n      isModelEvaluationNode,\r\n      isModelRegistryNode,\r\n      isHyperparameterTuningNode,\r\n      isFeatureTargetSplitNode,\r\n      isTrainTestSplitNode,\r\n      isClassUndersamplingNode,\r\n      isClassOversamplingNode,\r\n      isOrdinalEncodingNode,\r\n      isDummyEncodingNode,\r\n      isOneHotEncodingNode,\r\n      isFeatureMathNode,\r\n      isCastNode,\r\n      isBinningNode,\r\n      isScalingNode,\r\n      isPolynomialFeaturesNode,\r\n      isFeatureSelectionNode,\r\n      isTransformerAuditNode,\r\n      isOutlierNode,\r\n      isSkewnessNode,\r\n      isSkewnessDistributionNode,\r\n      isBinnedDistributionNode,\r\n      isDataConsistencyNode,\r\n      isInspectionNode,\r\n      isRemoveDuplicatesNode,\r\n      isDropMissingColumnsNode,\r\n      isDropMissingRowsNode,\r\n      isDropMissingNode,\r\n    };\r\n  }, [catalogType, node]);\r\n};\r\n","// Used by NodeSettingsModal for scaling nodes to surface column-level recommendations.\r\nimport { useCallback, useEffect, useState } from 'react';\r\nimport {\r\n  fetchScalingRecommendations,\r\n  type ScalingRecommendationsResponse,\r\n} from '../../../api';\r\n\r\ntype GraphContext = {\r\n  nodes: any[];\r\n  edges: any[];\r\n} | null;\r\n\r\ntype UseScalingInsightsArgs = {\r\n  isScalingNode: boolean;\r\n  sourceId?: string | null;\r\n  hasReachableSource: boolean;\r\n  graphContext: GraphContext;\r\n  targetNodeId: string | null;\r\n};\r\n\r\ntype UseScalingInsightsResult = {\r\n  scalingData: ScalingRecommendationsResponse | null;\r\n  scalingError: string | null;\r\n  isFetchingScaling: boolean;\r\n  refreshScaling: () => void;\r\n};\r\n\r\nexport const useScalingInsights = ({\r\n  isScalingNode,\r\n  sourceId,\r\n  hasReachableSource,\r\n  graphContext,\r\n  targetNodeId,\r\n}: UseScalingInsightsArgs): UseScalingInsightsResult => {\r\n  const [scalingData, setScalingData] = useState<ScalingRecommendationsResponse | null>(null);\r\n  const [scalingError, setScalingError] = useState<string | null>(null);\r\n  const [isFetchingScaling, setIsFetchingScaling] = useState(false);\r\n  const [requestId, setRequestId] = useState(0);\r\n\r\n  const refreshScaling = useCallback(() => {\r\n    setRequestId((previous) => previous + 1);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    let isActive = true;\r\n\r\n    if (!isScalingNode) {\r\n      setScalingData(null);\r\n      setScalingError(null);\r\n      setIsFetchingScaling(false);\r\n      return () => {\r\n        isActive = false;\r\n      };\r\n    }\r\n\r\n    if (!sourceId) {\r\n      setScalingData(null);\r\n      setScalingError('Select a dataset to load scaling insights.');\r\n      setIsFetchingScaling(false);\r\n      return () => {\r\n        isActive = false;\r\n      };\r\n    }\r\n\r\n    if (!hasReachableSource) {\r\n      setScalingData(null);\r\n      setScalingError('Connect this step to an upstream output to load scaling insights.');\r\n      setIsFetchingScaling(false);\r\n      return () => {\r\n        isActive = false;\r\n      };\r\n    }\r\n\r\n    setIsFetchingScaling(true);\r\n    setScalingError(null);\r\n\r\n    fetchScalingRecommendations(sourceId, {\r\n      graph: graphContext,\r\n      targetNodeId,\r\n    })\r\n      .then((result: ScalingRecommendationsResponse | null | undefined) => {\r\n        if (!isActive) {\r\n          return;\r\n        }\r\n        setScalingData(result ?? null);\r\n      })\r\n      .catch((error: any) => {\r\n        if (!isActive) {\r\n          return;\r\n        }\r\n        setScalingData(null);\r\n        setScalingError(error?.message ?? 'Unable to load scaling insights');\r\n      })\r\n      .finally(() => {\r\n        if (isActive) {\r\n          setIsFetchingScaling(false);\r\n        }\r\n      });\r\n\r\n    return () => {\r\n      isActive = false;\r\n    };\r\n  }, [graphContext, hasReachableSource, isScalingNode, requestId, sourceId, targetNodeId]);\r\n\r\n  return {\r\n    scalingData,\r\n    scalingError,\r\n    isFetchingScaling,\r\n    refreshScaling,\r\n  };\r\n};\r\n","// Used by NodeSettingsModal for binning nodes to surface backend recommendations.\r\nimport { useCallback, useEffect, useState } from 'react';\r\nimport {\r\n  fetchBinningRecommendations,\r\n  type BinningRecommendationsResponse,\r\n} from '../../../api';\r\n\r\ntype GraphContext = {\r\n  nodes: any[];\r\n  edges: any[];\r\n} | null;\r\n\r\ntype UseBinningInsightsArgs = {\r\n  isBinningNode: boolean;\r\n  sourceId?: string | null;\r\n  hasReachableSource: boolean;\r\n  graphContext: GraphContext;\r\n  targetNodeId: string | null;\r\n};\r\n\r\ntype UseBinningInsightsResult = {\r\n  binningData: BinningRecommendationsResponse | null;\r\n  binningError: string | null;\r\n  isFetchingBinning: boolean;\r\n  refreshBinning: () => void;\r\n};\r\n\r\nexport const useBinningInsights = ({\r\n  isBinningNode,\r\n  sourceId,\r\n  hasReachableSource,\r\n  graphContext,\r\n  targetNodeId,\r\n}: UseBinningInsightsArgs): UseBinningInsightsResult => {\r\n  const [binningData, setBinningData] = useState<BinningRecommendationsResponse | null>(null);\r\n  const [binningError, setBinningError] = useState<string | null>(null);\r\n  const [isFetchingBinning, setIsFetchingBinning] = useState(false);\r\n  const [requestId, setRequestId] = useState(0);\r\n\r\n  const refreshBinning = useCallback(() => {\r\n    setRequestId((previous) => previous + 1);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    let isActive = true;\r\n\r\n    if (!isBinningNode) {\r\n      setBinningData(null);\r\n      setBinningError(null);\r\n      setIsFetchingBinning(false);\r\n      return () => {\r\n        isActive = false;\r\n      };\r\n    }\r\n\r\n    if (!sourceId) {\r\n      setBinningData(null);\r\n      setBinningError('Select a dataset to load binning insights.');\r\n      setIsFetchingBinning(false);\r\n      return () => {\r\n        isActive = false;\r\n      };\r\n    }\r\n\r\n    if (!hasReachableSource) {\r\n      setBinningData(null);\r\n      setBinningError('Connect this step to an upstream output to analyse numeric columns.');\r\n      setIsFetchingBinning(false);\r\n      return () => {\r\n        isActive = false;\r\n      };\r\n    }\r\n\r\n    setIsFetchingBinning(true);\r\n    setBinningError(null);\r\n\r\n    fetchBinningRecommendations(sourceId, {\r\n      graph: graphContext,\r\n      targetNodeId,\r\n    })\r\n      .then((result: BinningRecommendationsResponse | null | undefined) => {\r\n        if (!isActive) {\r\n          return;\r\n        }\r\n        setBinningData(result ?? null);\r\n      })\r\n      .catch((error: any) => {\r\n        if (!isActive) {\r\n          return;\r\n        }\r\n        setBinningData(null);\r\n        setBinningError(error?.message ?? 'Unable to load binning insights');\r\n      })\r\n      .finally(() => {\r\n        if (isActive) {\r\n          setIsFetchingBinning(false);\r\n        }\r\n      });\r\n\r\n    return () => {\r\n      isActive = false;\r\n    };\r\n  }, [graphContext, hasReachableSource, isBinningNode, requestId, sourceId, targetNodeId]);\r\n\r\n  return {\r\n    binningData,\r\n    binningError,\r\n    isFetchingBinning,\r\n    refreshBinning,\r\n  };\r\n};\r\n","// Used by NodeSettingsModal for skewness transformation and distribution nodes.\r\nimport { useCallback, useEffect, useRef, useState } from 'react';\r\nimport {\r\n  fetchSkewnessRecommendations,\r\n  type SkewnessRecommendationsResponse,\r\n  type SkewnessTransformationSelection,\r\n} from '../../../api';\r\n\r\ntype GraphContext = {\r\n  nodes: any[];\r\n  edges: any[];\r\n} | null;\r\n\r\ntype UseSkewnessInsightsArgs = {\r\n  shouldLoad: boolean;\r\n  sourceId?: string | null;\r\n  graphContext: GraphContext;\r\n  targetNodeId: string | null;\r\n  transformations: SkewnessTransformationSelection[];\r\n};\r\n\r\ntype UseSkewnessInsightsResult = {\r\n  skewnessData: SkewnessRecommendationsResponse | null;\r\n  skewnessError: string | null;\r\n  isFetchingSkewness: boolean;\r\n  refreshSkewness: () => void;\r\n};\r\n\r\nexport const useSkewnessInsights = ({\r\n  shouldLoad,\r\n  sourceId,\r\n  graphContext,\r\n  targetNodeId,\r\n  transformations,\r\n}: UseSkewnessInsightsArgs): UseSkewnessInsightsResult => {\r\n  const [skewnessData, setSkewnessData] = useState<SkewnessRecommendationsResponse | null>(null);\r\n  const [skewnessError, setSkewnessError] = useState<string | null>(null);\r\n  const [isFetchingSkewness, setIsFetchingSkewness] = useState(false);\r\n  const [requestId, setRequestId] = useState(0);\r\n  const debounceTimerRef = useRef<number | null>(null);\r\n\r\n  const refreshSkewness = useCallback(() => {\r\n    setRequestId((previous) => previous + 1);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    let isActive = true;\r\n\r\n    if (!shouldLoad) {\r\n      setSkewnessData(null);\r\n      setSkewnessError(null);\r\n      setIsFetchingSkewness(false);\r\n      if (debounceTimerRef.current) {\r\n        clearTimeout(debounceTimerRef.current);\r\n        debounceTimerRef.current = null;\r\n      }\r\n      return () => {\r\n        isActive = false;\r\n      };\r\n    }\r\n\r\n    if (!sourceId) {\r\n      setSkewnessData(null);\r\n      setSkewnessError('Select a dataset to load skewness insights.');\r\n      setIsFetchingSkewness(false);\r\n      if (debounceTimerRef.current) {\r\n        clearTimeout(debounceTimerRef.current);\r\n        debounceTimerRef.current = null;\r\n      }\r\n      return () => {\r\n        isActive = false;\r\n      };\r\n    }\r\n\r\n    // Clear any existing debounce timer\r\n    if (debounceTimerRef.current) {\r\n      clearTimeout(debounceTimerRef.current);\r\n    }\r\n\r\n    // Debounce transformation changes by 300ms to avoid excessive re-fetches\r\n    debounceTimerRef.current = setTimeout(() => {\r\n      if (!isActive) {\r\n        return;\r\n      }\r\n\r\n      setIsFetchingSkewness(true);\r\n      setSkewnessError(null);\r\n\r\n      let transformationsPayload: SkewnessTransformationSelection[] | undefined;\r\n      if (transformations.length > 0) {\r\n        transformationsPayload = transformations.map((entry) => ({\r\n          column: entry.column,\r\n          method: entry.method,\r\n        }));\r\n      }\r\n\r\n      fetchSkewnessRecommendations(sourceId, {\r\n        transformations: transformationsPayload,\r\n        graph: graphContext,\r\n        targetNodeId,\r\n      })\r\n        .then((result: SkewnessRecommendationsResponse | null | undefined) => {\r\n          if (!isActive) {\r\n            return;\r\n          }\r\n          setSkewnessData(result ?? null);\r\n        })\r\n        .catch((error: any) => {\r\n          if (!isActive) {\r\n            return;\r\n          }\r\n          setSkewnessData(null);\r\n          setSkewnessError(error?.message ?? 'Unable to load skewness insights');\r\n        })\r\n        .finally(() => {\r\n          if (isActive) {\r\n            setIsFetchingSkewness(false);\r\n          }\r\n        });\r\n    }, 300);\r\n\r\n    return () => {\r\n      isActive = false;\r\n      if (debounceTimerRef.current) {\r\n        clearTimeout(debounceTimerRef.current);\r\n      }\r\n    };\r\n  }, [graphContext, requestId, shouldLoad, sourceId, targetNodeId, transformations]);\r\n\r\n  return {\r\n    skewnessData,\r\n    skewnessError,\r\n    isFetchingSkewness,\r\n    refreshSkewness,\r\n  };\r\n};\r\n","// Used by NodeSettingsModal for binned distribution nodes to fetch histogram data.\r\nimport { useCallback, useEffect, useState } from 'react';\r\nimport {\r\n  fetchBinnedDistribution,\r\n  type BinnedDistributionResponse,\r\n} from '../../../api';\r\nimport { BINNED_SAMPLE_PRESETS, type BinnedSamplePresetValue } from '../nodes/binning/binningSettings';\r\n\r\ntype GraphContext = {\r\n  nodes: any[];\r\n  edges: any[];\r\n} | null;\r\n\r\ntype UseBinnedDistributionArgs = {\r\n  isBinnedDistributionNode: boolean;\r\n  sourceId?: string | null;\r\n  hasReachableSource: boolean;\r\n  graphContext: GraphContext;\r\n  targetNodeId: string | null;\r\n  samplePreset: BinnedSamplePresetValue;\r\n};\r\n\r\ntype UseBinnedDistributionResult = {\r\n  binnedDistributionData: BinnedDistributionResponse | null;\r\n  binnedDistributionError: string | null;\r\n  isFetchingBinnedDistribution: boolean;\r\n  refreshBinnedDistribution: () => void;\r\n};\r\n\r\nexport const useBinnedDistribution = ({\r\n  isBinnedDistributionNode,\r\n  sourceId,\r\n  hasReachableSource,\r\n  graphContext,\r\n  targetNodeId,\r\n  samplePreset,\r\n}: UseBinnedDistributionArgs): UseBinnedDistributionResult => {\r\n  const [binnedDistributionData, setBinnedDistributionData] = useState<BinnedDistributionResponse | null>(null);\r\n  const [binnedDistributionError, setBinnedDistributionError] = useState<string | null>(null);\r\n  const [isFetchingBinnedDistribution, setIsFetchingBinnedDistribution] = useState(false);\r\n  const [requestId, setRequestId] = useState(0);\r\n\r\n  const refreshBinnedDistribution = useCallback(() => {\r\n    setRequestId((previous) => previous + 1);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    let isActive = true;\r\n\r\n    if (!isBinnedDistributionNode) {\r\n      setBinnedDistributionData(null);\r\n      setBinnedDistributionError(null);\r\n      setIsFetchingBinnedDistribution(false);\r\n      return () => {\r\n        isActive = false;\r\n      };\r\n    }\r\n\r\n    if (!sourceId) {\r\n      setBinnedDistributionData(null);\r\n      setBinnedDistributionError('Select a dataset to load binned column distributions.');\r\n      setIsFetchingBinnedDistribution(false);\r\n      return () => {\r\n        isActive = false;\r\n      };\r\n    }\r\n\r\n    if (!hasReachableSource) {\r\n      setBinnedDistributionData(null);\r\n      setBinnedDistributionError('Connect this step to an upstream output to load binned column distributions.');\r\n      setIsFetchingBinnedDistribution(false);\r\n      return () => {\r\n        isActive = false;\r\n      };\r\n    }\r\n\r\n    setIsFetchingBinnedDistribution(true);\r\n    setBinnedDistributionError(null);\r\n\r\n    const selectedPreset =\r\n      BINNED_SAMPLE_PRESETS.find((preset) => preset.value === samplePreset) ?? BINNED_SAMPLE_PRESETS[0];\r\n\r\n    const requestedSampleSize: number | 'all' = selectedPreset.value === 'all' ? 'all' : Number(selectedPreset.value);\r\n\r\n    fetchBinnedDistribution(sourceId, {\r\n      sampleSize: requestedSampleSize,\r\n      graph: graphContext,\r\n      targetNodeId,\r\n    })\r\n      .then((result: BinnedDistributionResponse | null | undefined) => {\r\n        if (!isActive) {\r\n          return;\r\n        }\r\n        setBinnedDistributionData(result ?? null);\r\n      })\r\n      .catch((error: any) => {\r\n        if (!isActive) {\r\n          return;\r\n        }\r\n        setBinnedDistributionData(null);\r\n        setBinnedDistributionError(error?.message ?? 'Unable to load binned column distributions');\r\n      })\r\n      .finally(() => {\r\n        if (isActive) {\r\n          setIsFetchingBinnedDistribution(false);\r\n        }\r\n      });\r\n\r\n    return () => {\r\n      isActive = false;\r\n    };\r\n  }, [graphContext, hasReachableSource, isBinnedDistributionNode, requestId, samplePreset, sourceId, targetNodeId]);\r\n\r\n  return {\r\n    binnedDistributionData,\r\n    binnedDistributionError,\r\n    isFetchingBinnedDistribution,\r\n    refreshBinnedDistribution,\r\n  };\r\n};\r\n","// Used by NodeSettingsModal to fetch dataset snapshots for preview and catalog-aware nodes.\r\nimport { useCallback, useEffect, useRef, useState } from 'react';\r\nimport {\r\n  fetchPipelinePreview,\r\n  type PipelinePreviewRequest,\r\n} from '../../../api';\r\nimport { type PreviewState } from '../nodes/dataset/DataSnapshotSection';\r\n\r\ntype GraphSnapshot = {\r\n  nodes: any[];\r\n  edges: any[];\r\n} | null;\r\n\r\ntype UsePipelinePreviewArgs = {\r\n  shouldFetchPreview: boolean;\r\n  sourceId?: string | null;\r\n  canTriggerPreview: boolean;\r\n  graphSnapshot: GraphSnapshot;\r\n  isPreviewNode: boolean;\r\n  targetNodeId: string | null;\r\n  previewSignature?: string | null;\r\n  skipPreview?: boolean;\r\n  requestPreviewRows?: boolean;\r\n  includeSignals?: boolean;\r\n};\r\n\r\ntype UsePipelinePreviewResult = {\r\n  previewState: PreviewState;\r\n  refreshPreview: () => void;\r\n};\r\n\r\nconst idleState: PreviewState = { status: 'idle', data: null, error: null };\r\nconst DEFAULT_PREVIEW_SAMPLE_SIZE = 1000; // Increased from 200 to 1000 for better class representation\r\n\r\nexport const usePipelinePreview = ({\r\n  shouldFetchPreview,\r\n  sourceId,\r\n  canTriggerPreview,\r\n  graphSnapshot,\r\n  isPreviewNode,\r\n  targetNodeId,\r\n  previewSignature,\r\n  skipPreview = false,\r\n  requestPreviewRows,\r\n  includeSignals,\r\n}: UsePipelinePreviewArgs): UsePipelinePreviewResult => {\r\n  const [previewState, setPreviewState] = useState<PreviewState>(idleState);\r\n  const [requestId, setRequestId] = useState(0);\r\n  const lastSignatureRef = useRef<string | null>(null);\r\n  const lastRequestRef = useRef<number>(-1);\r\n\r\n  const refreshPreview = useCallback(() => {\r\n    setRequestId((previous) => previous + 1);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (!shouldFetchPreview) {\r\n      setPreviewState(idleState);\r\n      lastSignatureRef.current = null;\r\n      lastRequestRef.current = -1;\r\n      return;\r\n    }\r\n\r\n    if (skipPreview) {\r\n      return;\r\n    }\r\n\r\n    if (!sourceId) {\r\n      setPreviewState(\r\n        isPreviewNode\r\n          ? { status: 'error', data: null, error: 'Select a dataset to generate previews.' }\r\n          : idleState,\r\n      );\r\n      return;\r\n    }\r\n\r\n    if (!canTriggerPreview) {\r\n      setPreviewState(\r\n        isPreviewNode\r\n          ? {\r\n              status: 'error',\r\n              data: null,\r\n              error: 'Add nodes to the canvas before generating a snapshot.',\r\n            }\r\n          : idleState,\r\n      );\r\n      return;\r\n    }\r\n\r\n    if (!graphSnapshot) {\r\n      return;\r\n    }\r\n\r\n    const fallbackSignature = (() => {\r\n      const nodeIds = Array.isArray(graphSnapshot.nodes)\r\n        ? graphSnapshot.nodes\r\n            .map((entry: any) => (entry && typeof entry.id === 'string' ? entry.id : null))\r\n            .filter((id: string | null): id is string => Boolean(id))\r\n            .sort()\r\n        : [];\r\n      const edgePairs = Array.isArray(graphSnapshot.edges)\r\n        ? graphSnapshot.edges\r\n            .map((edge: any) => {\r\n              const source = edge && typeof edge.source === 'string' ? edge.source.trim() : '';\r\n              const target = edge && typeof edge.target === 'string' ? edge.target.trim() : '';\r\n              return source && target ? `${source}->${target}` : null;\r\n            })\r\n            .filter((value: string | null): value is string => Boolean(value))\r\n            .sort()\r\n        : [];\r\n      return JSON.stringify({\r\n        sourceId: sourceId ?? null,\r\n        targetNodeId: targetNodeId ?? null,\r\n        nodeIds,\r\n        edgePairs,\r\n      });\r\n    })();\r\n\r\n    const effectiveSignature = previewSignature ?? fallbackSignature;\r\n    const signatureChanged = effectiveSignature !== lastSignatureRef.current;\r\n    const forcedRefresh = lastRequestRef.current !== requestId;\r\n    if (!forcedRefresh && !signatureChanged) {\r\n      return;\r\n    }\r\n\r\n    lastSignatureRef.current = effectiveSignature;\r\n    lastRequestRef.current = requestId;\r\n\r\n    let isMounted = true;\r\n    setPreviewState((previous) => ({ status: 'loading', data: previous.data ?? null, error: null }));\r\n\r\n    const wantRows = requestPreviewRows ?? isPreviewNode;\r\n    const wantSignals = includeSignals ?? wantRows;\r\n\r\n    const previewRequest: PipelinePreviewRequest = {\r\n      dataset_source_id: sourceId,\r\n      graph: {\r\n        nodes: graphSnapshot.nodes,\r\n        edges: graphSnapshot.edges,\r\n      },\r\n      target_node_id: targetNodeId ?? undefined,\r\n      include_preview_rows: wantRows,\r\n      include_signals: wantSignals,\r\n    };\r\n\r\n    if (wantRows) {\r\n      previewRequest.sample_size = DEFAULT_PREVIEW_SAMPLE_SIZE;\r\n    }\r\n\r\n    fetchPipelinePreview(previewRequest)\r\n      .then((response) => {\r\n        if (!isMounted) {\r\n          return;\r\n        }\r\n        setPreviewState({ status: 'success', data: response, error: null });\r\n      })\r\n      .catch((error: any) => {\r\n        if (!isMounted) {\r\n          return;\r\n        }\r\n        setPreviewState(\r\n          isPreviewNode\r\n            ? {\r\n                status: 'error',\r\n                data: null,\r\n                error: error?.message ?? 'Unable to generate preview.',\r\n              }\r\n            : idleState,\r\n        );\r\n      });\r\n\r\n    return () => {\r\n      isMounted = false;\r\n    };\r\n  }, [\r\n    canTriggerPreview,\r\n    graphSnapshot,\r\n    isPreviewNode,\r\n    skipPreview,\r\n    previewSignature,\r\n    requestId,\r\n    shouldFetchPreview,\r\n    sourceId,\r\n    targetNodeId,\r\n  ]);\r\n\r\n  return { previewState, refreshPreview };\r\n};\r\n","// Used by NodeSettingsModal when configuring imputer nodes for drop-column guidance.\r\nimport { useCallback, useEffect, useState } from 'react';\r\nimport type { Dispatch, SetStateAction } from 'react';\r\nimport { fetchDropColumnRecommendations } from '../../../api';\r\n\r\ntype GraphContext = {\r\n  nodes: any[];\r\n  edges: any[];\r\n} | null;\r\n\r\ntype UseDropColumnRecommendationsArgs = {\r\n  shouldLoad: boolean;\r\n  sourceId?: string | null;\r\n  hasReachableSource: boolean;\r\n  graphContext: GraphContext;\r\n  targetNodeId: string | null;\r\n  setAvailableColumns: Dispatch<SetStateAction<string[]>>;\r\n  setColumnMissingMap: Dispatch<SetStateAction<Record<string, number>>>;\r\n};\r\n\r\ntype UseDropColumnRecommendationsResult = {\r\n  isFetching: boolean;\r\n  error: string | null;\r\n  refreshDropColumnRecommendations: () => void;\r\n};\r\n\r\nexport const useDropColumnRecommendations = ({\r\n  shouldLoad,\r\n  sourceId,\r\n  hasReachableSource,\r\n  graphContext,\r\n  targetNodeId,\r\n  setAvailableColumns,\r\n  setColumnMissingMap,\r\n}: UseDropColumnRecommendationsArgs): UseDropColumnRecommendationsResult => {\r\n  const [isFetching, setIsFetching] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [requestId, setRequestId] = useState(0);\r\n\r\n  const refreshDropColumnRecommendations = useCallback(() => {\r\n    if (!shouldLoad || !sourceId || !hasReachableSource) {\r\n      return;\r\n    }\r\n    setRequestId((previous) => previous + 1);\r\n  }, [hasReachableSource, shouldLoad, sourceId]);\r\n\r\n  useEffect(() => {\r\n    let isActive = true;\r\n\r\n    if (!shouldLoad) {\r\n      return () => {\r\n        isActive = false;\r\n      };\r\n    }\r\n\r\n    if (!sourceId) {\r\n      setError('Select a dataset to load column metrics.');\r\n      setIsFetching(false);\r\n      return () => {\r\n        isActive = false;\r\n      };\r\n    }\r\n\r\n    if (!hasReachableSource) {\r\n      setError('Connect this step to an upstream output to load column metrics.');\r\n      setIsFetching(false);\r\n      return () => {\r\n        isActive = false;\r\n      };\r\n    }\r\n\r\n    setIsFetching(true);\r\n    setError(null);\r\n\r\n    fetchDropColumnRecommendations(sourceId, {\r\n      graph: graphContext,\r\n      targetNodeId,\r\n    })\r\n      .then((result) => {\r\n        if (!isActive) {\r\n          return;\r\n        }\r\n\r\n        const sanitizedMissingMap: Record<string, number> = {};\r\n        if (\r\n          result &&\r\n          typeof result === 'object' &&\r\n          result?.column_missing_map &&\r\n          typeof result.column_missing_map === 'object'\r\n        ) {\r\n          Object.entries(result.column_missing_map).forEach(([rawName, rawValue]) => {\r\n            const name = String(rawName ?? '').trim();\r\n            if (!name) {\r\n              return;\r\n            }\r\n            const numericValue = Number(rawValue);\r\n            if (Number.isNaN(numericValue) || numericValue < 0) {\r\n              return;\r\n            }\r\n            sanitizedMissingMap[name] = Number(numericValue);\r\n          });\r\n        }\r\n\r\n        const columnSet = new Set<string>();\r\n        if (Array.isArray(result?.all_columns)) {\r\n          result.all_columns.forEach((column) => {\r\n            const trimmed = String(column ?? '').trim();\r\n            if (trimmed) {\r\n              columnSet.add(trimmed);\r\n            }\r\n          });\r\n        }\r\n\r\n        Object.keys(sanitizedMissingMap).forEach((column) => columnSet.add(column));\r\n\r\n        const orderedColumns = Array.from(columnSet).sort((a, b) => a.localeCompare(b));\r\n        orderedColumns.forEach((column) => {\r\n          if (!Object.prototype.hasOwnProperty.call(sanitizedMissingMap, column)) {\r\n            sanitizedMissingMap[column] = 0;\r\n          }\r\n        });\r\n\r\n        if (orderedColumns.length) {\r\n          setAvailableColumns(orderedColumns);\r\n        }\r\n\r\n        if (Object.keys(sanitizedMissingMap).length) {\r\n          setColumnMissingMap((previous) => ({\r\n            ...previous,\r\n            ...sanitizedMissingMap,\r\n          }));\r\n        }\r\n      })\r\n      .catch((fetchError: any) => {\r\n        if (!isActive) {\r\n          return;\r\n        }\r\n        setError(fetchError?.message ?? 'Unable to load column metrics.');\r\n      })\r\n      .finally(() => {\r\n        if (isActive) {\r\n          setIsFetching(false);\r\n        }\r\n      });\r\n\r\n    return () => {\r\n      isActive = false;\r\n    };\r\n  }, [\r\n    graphContext,\r\n    hasReachableSource,\r\n    requestId,\r\n    setAvailableColumns,\r\n    setColumnMissingMap,\r\n    shouldLoad,\r\n    sourceId,\r\n    targetNodeId,\r\n  ]);\r\n\r\n  return {\r\n    isFetching,\r\n    error,\r\n    refreshDropColumnRecommendations,\r\n  };\r\n};\r\n","// Used by NodeSettingsModal to prepare replace-aliases specific state.\r\nimport { useMemo } from 'react';\r\nimport {\r\n  buildAliasColumnSummary,\r\n  buildAliasSampleMap,\r\n  normalizeAliasStrategies,\r\n  parseCustomAliasPairs,\r\n  resolveAliasMode,\r\n  type AliasColumnOption,\r\n  type AliasColumnSummary,\r\n  type AliasCustomPairSummary,\r\n  type AliasSampleMap,\r\n  type AliasStrategyConfig,\r\n} from '../nodes/replace_aliases/replaceAliasesSettings';\r\nimport { ensureArrayOfString } from '../sharedUtils';\r\nimport { normalizeConfigBoolean, pickAutoDetectValue } from '../utils/configParsers';\r\n\r\ntype AliasAutoDetectMeta = {\r\n  enabled: boolean;\r\n  explicit: boolean;\r\n};\r\n\r\ntype UseAliasConfigurationParams = {\r\n  isReplaceAliasesNode: boolean;\r\n  configState: Record<string, any>;\r\n  nodeConfig?: Record<string, any> | null;\r\n  availableColumns: string[];\r\n  columnTypeMap: Record<string, string>;\r\n  previewSampleRows: Array<Record<string, any>>;\r\n};\r\n\r\ntype UseAliasConfigurationResult = {\r\n  aliasAutoDetectMeta: AliasAutoDetectMeta;\r\n  aliasStrategies: AliasStrategyConfig[];\r\n  aliasStrategyCount: number;\r\n  aliasSelectedColumns: string[];\r\n  aliasAutoDetectEnabled: boolean;\r\n  replaceAliasesCustomPairsValue: unknown;\r\n  aliasColumnSummary: AliasColumnSummary;\r\n  aliasCustomPairSummary: AliasCustomPairSummary;\r\n  aliasSampleMap: AliasSampleMap;\r\n  aliasColumnOptions: AliasColumnOption[];\r\n};\r\n\r\nconst DEFAULT_META: AliasAutoDetectMeta = { enabled: false, explicit: false };\r\n\r\nconst EMPTY_COLUMN_SUMMARY: AliasColumnSummary = {\r\n  selectedColumns: [],\r\n  nonTextSelected: [],\r\n  autoDetectionActive: false,\r\n  recommendedColumns: [],\r\n  textColumnCount: 0,\r\n  textColumns: [],\r\n};\r\n\r\nconst EMPTY_CUSTOM_PAIR_SUMMARY: AliasCustomPairSummary = {\r\n  totalPairs: 0,\r\n  previewPairs: [],\r\n  previewOverflow: 0,\r\n  duplicates: [],\r\n  duplicateOverflow: 0,\r\n  invalidEntries: [],\r\n  invalidOverflow: 0,\r\n};\r\n\r\nconst EMPTY_SAMPLE_MAP: AliasSampleMap = {};\r\n\r\nconst EMPTY_OPTIONS: AliasColumnOption[] = [];\r\n\r\nexport const useAliasConfiguration = ({\r\n  isReplaceAliasesNode,\r\n  configState,\r\n  nodeConfig,\r\n  availableColumns,\r\n  columnTypeMap,\r\n  previewSampleRows,\r\n}: UseAliasConfigurationParams): UseAliasConfigurationResult => {\r\n  const aliasAutoDetectMeta = useMemo<AliasAutoDetectMeta>(() => {\r\n    if (!isReplaceAliasesNode) {\r\n      return DEFAULT_META;\r\n    }\r\n\r\n    const localValue = pickAutoDetectValue(configState as Record<string, unknown>);\r\n    if (localValue !== undefined) {\r\n      const normalized = normalizeConfigBoolean(localValue);\r\n      return { enabled: Boolean(normalized), explicit: true };\r\n    }\r\n\r\n    if (nodeConfig && typeof nodeConfig === 'object') {\r\n      const nodeValue = pickAutoDetectValue(nodeConfig as Record<string, unknown>);\r\n      if (nodeValue !== undefined) {\r\n        const normalized = normalizeConfigBoolean(nodeValue);\r\n        return { enabled: Boolean(normalized), explicit: true };\r\n      }\r\n    }\r\n\r\n    return DEFAULT_META;\r\n  }, [configState, isReplaceAliasesNode, nodeConfig]);\r\n\r\n  const aliasStrategies = useMemo<AliasStrategyConfig[]>(() => {\r\n    if (!isReplaceAliasesNode) {\r\n      return [];\r\n    }\r\n\r\n    const fallbackColumns = ensureArrayOfString(configState?.columns ?? nodeConfig?.columns);\r\n    const fallbackMode = resolveAliasMode(\r\n      isReplaceAliasesNode ? configState?.mode : undefined,\r\n      isReplaceAliasesNode ? nodeConfig?.mode : undefined,\r\n    );\r\n\r\n    const fallbackAutoDetect = (() => {\r\n      const localValue = pickAutoDetectValue(configState as Record<string, unknown>);\r\n      if (localValue !== undefined) {\r\n        const normalized = normalizeConfigBoolean(localValue);\r\n        if (normalized !== null) {\r\n          return normalized;\r\n        }\r\n      }\r\n      if (nodeConfig && typeof nodeConfig === 'object') {\r\n        const nodeValue = pickAutoDetectValue(nodeConfig as Record<string, unknown>);\r\n        if (nodeValue !== undefined) {\r\n          const normalized = normalizeConfigBoolean(nodeValue);\r\n          if (normalized !== null) {\r\n            return normalized;\r\n          }\r\n        }\r\n      }\r\n      return fallbackColumns.length === 0;\r\n    })();\r\n\r\n    const rawStrategies =\r\n      (configState?.alias_strategies ?? configState?.strategies) ??\r\n      (nodeConfig?.alias_strategies ?? nodeConfig?.strategies);\r\n\r\n    return normalizeAliasStrategies(rawStrategies, {\r\n      mode: fallbackMode,\r\n      columns: fallbackColumns,\r\n      autoDetect: fallbackAutoDetect,\r\n    });\r\n  }, [configState, isReplaceAliasesNode, nodeConfig]);\r\n\r\n  const aliasSelectedColumns = useMemo<string[]>(() => {\r\n    if (!isReplaceAliasesNode) {\r\n      return [];\r\n    }\r\n    if (aliasStrategies.length) {\r\n      return Array.from(\r\n        new Set(\r\n          aliasStrategies.flatMap((strategy) =>\r\n            strategy.columns.map((column) => column.trim()).filter(Boolean),\r\n          ),\r\n        ),\r\n      ).sort((a, b) => a.localeCompare(b));\r\n    }\r\n    return ensureArrayOfString(configState?.columns);\r\n  }, [aliasStrategies, configState?.columns, isReplaceAliasesNode]);\r\n\r\n  const aliasAutoDetectEnabled = useMemo(() => {\r\n    if (!isReplaceAliasesNode) {\r\n      return false;\r\n    }\r\n    if (aliasStrategies.length) {\r\n      return aliasStrategies.some((strategy) => strategy.autoDetect);\r\n    }\r\n    if (aliasAutoDetectMeta.explicit) {\r\n      return aliasAutoDetectMeta.enabled;\r\n    }\r\n    return aliasSelectedColumns.length === 0;\r\n  }, [aliasAutoDetectMeta.enabled, aliasAutoDetectMeta.explicit, aliasSelectedColumns.length, aliasStrategies, isReplaceAliasesNode]);\r\n\r\n  const replaceAliasesCustomPairsValue = useMemo(() => {\r\n    if (!isReplaceAliasesNode) {\r\n      return undefined;\r\n    }\r\n    return configState?.custom_pairs;\r\n  }, [configState?.custom_pairs, isReplaceAliasesNode]);\r\n\r\n  const aliasSampleMap = useMemo<AliasSampleMap>(() => {\r\n    if (!isReplaceAliasesNode) {\r\n      return EMPTY_SAMPLE_MAP;\r\n    }\r\n    return buildAliasSampleMap(previewSampleRows);\r\n  }, [isReplaceAliasesNode, previewSampleRows]);\r\n\r\n  const aliasColumnSummary = useMemo<AliasColumnSummary>(() => {\r\n    if (!isReplaceAliasesNode) {\r\n      return EMPTY_COLUMN_SUMMARY;\r\n    }\r\n    return buildAliasColumnSummary({\r\n      selectedColumns: aliasSelectedColumns,\r\n      availableColumns,\r\n      columnTypeMap,\r\n      autoDetectEnabled: aliasAutoDetectEnabled,\r\n    });\r\n  }, [aliasAutoDetectEnabled, aliasSelectedColumns, availableColumns, columnTypeMap, isReplaceAliasesNode]);\r\n\r\n  const aliasCustomPairSummary = useMemo<AliasCustomPairSummary>(() => {\r\n    if (!isReplaceAliasesNode) {\r\n      return EMPTY_CUSTOM_PAIR_SUMMARY;\r\n    }\r\n    return parseCustomAliasPairs(replaceAliasesCustomPairsValue);\r\n  }, [isReplaceAliasesNode, replaceAliasesCustomPairsValue]);\r\n\r\n  const aliasColumnOptions = useMemo<AliasColumnOption[]>(() => {\r\n    if (!isReplaceAliasesNode) {\r\n      return EMPTY_OPTIONS;\r\n    }\r\n    const recommendedSet = new Set(aliasColumnSummary.recommendedColumns);\r\n    const textSet = new Set(aliasColumnSummary.textColumns);\r\n    return availableColumns.map((column) => {\r\n      const dtype = columnTypeMap[column] ?? null;\r\n      const samples = aliasSampleMap[column] ?? [];\r\n      return {\r\n        name: column,\r\n        dtype,\r\n        samples: samples.slice(0, 3),\r\n        isRecommended: recommendedSet.has(column),\r\n        isTextLike: textSet.has(column),\r\n      } as AliasColumnOption;\r\n    });\r\n  }, [aliasColumnSummary.recommendedColumns, aliasColumnSummary.textColumns, aliasSampleMap, availableColumns, columnTypeMap, isReplaceAliasesNode]);\r\n\r\n  return {\r\n    aliasAutoDetectMeta,\r\n    aliasStrategies,\r\n    aliasStrategyCount: aliasStrategies.length,\r\n    aliasSelectedColumns,\r\n    aliasAutoDetectEnabled,\r\n    replaceAliasesCustomPairsValue,\r\n    aliasColumnSummary,\r\n    aliasCustomPairSummary,\r\n    aliasSampleMap,\r\n    aliasColumnOptions,\r\n  };\r\n};\r\n","import { useCallback, useEffect, useState } from 'react';\r\nimport {\r\n\tfetchOutlierRecommendations,\r\n\ttype FeatureGraph,\r\n\ttype OutlierRecommendationsResponse,\r\n} from '../../../api';\r\n\r\ntype GraphContext = FeatureGraph | null;\r\n\r\ntype UseOutlierRecommendationsArgs = {\r\n\tisOutlierNode: boolean;\r\n\tsourceId?: string | null;\r\n\thasReachableSource: boolean;\r\n\tgraphContext: GraphContext;\r\n\ttargetNodeId: string | null;\r\n};\r\n\r\ntype UseOutlierRecommendationsResult = {\r\n\toutlierData: OutlierRecommendationsResponse | null;\r\n\toutlierError: string | null;\r\n\tisFetchingOutliers: boolean;\r\n\trefreshOutliers: () => void;\r\n};\r\n\r\nexport const useOutlierRecommendations = ({\r\n\tisOutlierNode,\r\n\tsourceId,\r\n\thasReachableSource,\r\n\tgraphContext,\r\n\ttargetNodeId,\r\n}: UseOutlierRecommendationsArgs): UseOutlierRecommendationsResult => {\r\n\tconst [outlierData, setOutlierData] = useState<OutlierRecommendationsResponse | null>(null);\r\n\tconst [outlierError, setOutlierError] = useState<string | null>(null);\r\n\tconst [isFetchingOutliers, setIsFetchingOutliers] = useState(false);\r\n\tconst [requestId, setRequestId] = useState(0);\r\n\r\n\tconst refreshOutliers = useCallback(() => {\r\n\t\tsetRequestId((previous) => previous + 1);\r\n\t}, []);\r\n\r\n\tuseEffect(() => {\r\n\t\tlet isActive = true;\r\n\r\n\t\tif (!isOutlierNode) {\r\n\t\t\tsetOutlierData(null);\r\n\t\t\tsetOutlierError(null);\r\n\t\t\tsetIsFetchingOutliers(false);\r\n\t\t\treturn () => {\r\n\t\t\t\tisActive = false;\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\tif (!sourceId) {\r\n\t\t\tsetOutlierData(null);\r\n\t\t\tsetOutlierError('Select a dataset to load outlier insights.');\r\n\t\t\tsetIsFetchingOutliers(false);\r\n\t\t\treturn () => {\r\n\t\t\t\tisActive = false;\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\tif (!hasReachableSource) {\r\n\t\t\tsetOutlierData(null);\r\n\t\t\tsetOutlierError('Connect this step to an upstream output to load outlier insights.');\r\n\t\t\tsetIsFetchingOutliers(false);\r\n\t\t\treturn () => {\r\n\t\t\t\tisActive = false;\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\tsetIsFetchingOutliers(true);\r\n\t\tsetOutlierError(null);\r\n\r\n\t\tfetchOutlierRecommendations(sourceId, {\r\n\t\t\tgraph: graphContext,\r\n\t\t\ttargetNodeId,\r\n\t\t})\r\n\t\t\t.then((result: OutlierRecommendationsResponse | null | undefined) => {\r\n\t\t\t\tif (!isActive) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tsetOutlierData(result ?? null);\r\n\t\t\t})\r\n\t\t\t.catch((error: any) => {\r\n\t\t\t\tif (!isActive) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tsetOutlierData(null);\r\n\t\t\t\tsetOutlierError(error?.message ?? 'Unable to load outlier insights');\r\n\t\t\t})\r\n\t\t\t.finally(() => {\r\n\t\t\t\tif (isActive) {\r\n\t\t\t\t\tsetIsFetchingOutliers(false);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\treturn () => {\r\n\t\t\tisActive = false;\r\n\t\t};\r\n\t}, [graphContext, hasReachableSource, isOutlierNode, requestId, sourceId, targetNodeId]);\r\n\r\n\treturn {\r\n\t\toutlierData,\r\n\t\toutlierError,\r\n\t\tisFetchingOutliers,\r\n\t\trefreshOutliers,\r\n\t};\r\n};\r\n","// Used by NodeSettingsModal when configuring scaling and binning nodes.\r\nimport { useMemo } from 'react';\r\nimport {\r\n  BOOLEAN_FALSE_TOKENS,\r\n  BOOLEAN_TRUE_TOKENS,\r\n} from '../utils/configParsers';\r\n\r\n// Type tokens for numeric column detection\r\nconst NUMERIC_TYPE_TOKENS = [\r\n  'int',\r\n  'float',\r\n  'double',\r\n  'decimal',\r\n  'number',\r\n  'numeric',\r\n  'long',\r\n  'short',\r\n] as const;\r\n\r\nconst TEMPORAL_TYPE_TOKENS = ['datetime', 'date', 'time', 'timestamp'] as const;\r\n\r\nconst TEXTUAL_TYPE_TOKENS = ['object', 'string', 'text', 'category', 'categorical', 'char'] as const;\r\n\r\ntype UseNumericColumnAnalysisParams = {\r\n  shouldAnalyze: boolean;\r\n  availableColumns: string[];\r\n  columnTypeMap: Record<string, string>;\r\n  previewSampleRows: Array<Record<string, any>>;\r\n};\r\n\r\ntype NumericColumnAnalysisResult = {\r\n  numericExcludedColumns: Set<string>;\r\n  numericExclusionReasons: Map<string, string>;\r\n};\r\n\r\nexport const useNumericColumnAnalysis = ({\r\n  shouldAnalyze,\r\n  availableColumns,\r\n  columnTypeMap,\r\n  previewSampleRows,\r\n}: UseNumericColumnAnalysisParams): NumericColumnAnalysisResult => {\r\n  const analysis = useMemo(() => {\r\n    if (!shouldAnalyze) {\r\n      return {\r\n        excluded: new Set<string>(),\r\n        reasons: new Map<string, string>(),\r\n      };\r\n    }\r\n\r\n    const excluded = new Set<string>();\r\n    const reasons = new Map<string, string>();\r\n\r\n    availableColumns.forEach((column) => {\r\n      const rawType = (columnTypeMap[column] ?? '').toLowerCase();\r\n      const hasNumericTypeToken = NUMERIC_TYPE_TOKENS.some((token) => rawType.includes(token));\r\n      const isTemporalType = TEMPORAL_TYPE_TOKENS.some((token) => rawType.includes(token));\r\n      const isTextualType = TEXTUAL_TYPE_TOKENS.some((token) => rawType.includes(token));\r\n\r\n      if (rawType.includes('bool')) {\r\n        excluded.add(column);\r\n        reasons.set(column, 'Boolean dtype');\r\n        return;\r\n      }\r\n\r\n      if ((isTemporalType || isTextualType) && !hasNumericTypeToken) {\r\n        excluded.add(column);\r\n        reasons.set(column, 'Non-numeric dtype');\r\n        return;\r\n      }\r\n\r\n      const values = previewSampleRows\r\n        .map((row) => (row && Object.prototype.hasOwnProperty.call(row, column) ? row[column] : undefined))\r\n        .filter((value) => value !== null && value !== undefined);\r\n\r\n      if (!values.length) {\r\n        if (!hasNumericTypeToken) {\r\n          excluded.add(column);\r\n          reasons.set(column, 'No numeric samples');\r\n        }\r\n        return;\r\n      }\r\n\r\n      let numericConvertible = true;\r\n      let hasNumericSample = false;\r\n      let encounteredNonBinaryNumeric = false;\r\n      const binaryTokens = new Set<string>();\r\n\r\n      for (const value of values) {\r\n        if (typeof value === 'boolean') {\r\n          binaryTokens.add(value ? '1' : '0');\r\n          continue;\r\n        }\r\n\r\n        if (typeof value === 'number') {\r\n          if (!Number.isFinite(value)) {\r\n            numericConvertible = false;\r\n            break;\r\n          }\r\n          hasNumericSample = true;\r\n          if (Math.abs(value) < 1e-9) {\r\n            binaryTokens.add('0');\r\n          } else if (Math.abs(value - 1) < 1e-9) {\r\n            binaryTokens.add('1');\r\n          } else {\r\n            encounteredNonBinaryNumeric = true;\r\n          }\r\n          continue;\r\n        }\r\n\r\n        if (typeof value === 'string') {\r\n          const trimmed = value.trim();\r\n          if (!trimmed) {\r\n            continue;\r\n          }\r\n          const lower = trimmed.toLowerCase();\r\n          if (BOOLEAN_TRUE_TOKENS.has(lower)) {\r\n            binaryTokens.add('1');\r\n            continue;\r\n          }\r\n          if (BOOLEAN_FALSE_TOKENS.has(lower)) {\r\n            binaryTokens.add('0');\r\n            continue;\r\n          }\r\n          const numeric = Number(trimmed);\r\n          if (!Number.isNaN(numeric) && Number.isFinite(numeric)) {\r\n            hasNumericSample = true;\r\n            if (Math.abs(numeric) < 1e-9) {\r\n              binaryTokens.add('0');\r\n            } else if (Math.abs(numeric - 1) < 1e-9) {\r\n              binaryTokens.add('1');\r\n            } else {\r\n              encounteredNonBinaryNumeric = true;\r\n            }\r\n            continue;\r\n          }\r\n          numericConvertible = false;\r\n          break;\r\n        }\r\n\r\n        numericConvertible = false;\r\n        break;\r\n      }\r\n\r\n      if (!numericConvertible || (!hasNumericSample && !hasNumericTypeToken)) {\r\n        excluded.add(column);\r\n        reasons.set(column, 'Non-numeric values');\r\n        return;\r\n      }\r\n\r\n      if (!encounteredNonBinaryNumeric && binaryTokens.size > 0) {\r\n        const isBinary = Array.from(binaryTokens).every((token) => token === '0' || token === '1');\r\n        if (isBinary) {\r\n          excluded.add(column);\r\n          reasons.set(column, 'Binary/bool-like values');\r\n        }\r\n      }\r\n    });\r\n\r\n    return {\r\n      excluded,\r\n      reasons,\r\n    };\r\n  }, [availableColumns, columnTypeMap, previewSampleRows, shouldAnalyze]);\r\n\r\n  return {\r\n    numericExcludedColumns: analysis.excluded,\r\n    numericExclusionReasons: analysis.reasons,\r\n  };\r\n};\r\n","// Used by NodeSettingsModal when configuring binning.\r\nimport { useMemo } from 'react';\r\n\r\nexport type NumericColumnPreview = {\r\n  min: number | null;\r\n  max: number | null;\r\n  distinct: number | null;\r\n};\r\n\r\nexport type ManualRangeFallback = {\r\n  min: number | null;\r\n  max: number | null;\r\n};\r\n\r\ntype UseNumericRangeSummariesParams = {\r\n  isBinningNode: boolean;\r\n  numericExcludedColumns: Set<string>;\r\n  selectedColumns: string[];\r\n  previewSampleRows: Array<Record<string, any>>;\r\n  availableColumns: string[];\r\n  recommendedColumns?: Iterable<string> | null;\r\n};\r\n\r\nexport type UseNumericRangeSummariesResult = {\r\n  binningExcludedColumns: Set<string>;\r\n  binningColumnPreviewMap: Record<string, NumericColumnPreview>;\r\n  manualBoundColumns: string[];\r\n  manualRangeFallbackMap: Record<string, ManualRangeFallback>;\r\n};\r\n\r\nconst parseNumericCandidate = (value: unknown): number | null => {\r\n  if (typeof value === 'number' && Number.isFinite(value)) {\r\n    return value;\r\n  }\r\n  if (typeof value === 'string') {\r\n    const numeric = Number(value);\r\n    if (Number.isFinite(numeric)) {\r\n      return numeric;\r\n    }\r\n  }\r\n  return null;\r\n};\r\n\r\nexport const useNumericRangeSummaries = ({\r\n  isBinningNode,\r\n  numericExcludedColumns,\r\n  selectedColumns,\r\n  previewSampleRows,\r\n  availableColumns,\r\n  recommendedColumns,\r\n}: UseNumericRangeSummariesParams): UseNumericRangeSummariesResult => {\r\n  const recommendedColumnSet = useMemo(() => {\r\n    if (!recommendedColumns) {\r\n      return null;\r\n    }\r\n    const normalized = new Set<string>();\r\n    for (const entry of recommendedColumns) {\r\n      const value = typeof entry === 'string' ? entry.trim() : '';\r\n      if (!value) {\r\n        continue;\r\n      }\r\n      normalized.add(value);\r\n    }\r\n    return normalized.size > 0 ? normalized : null;\r\n  }, [recommendedColumns]);\r\n\r\n  const selectedColumnSet = useMemo(() => {\r\n    if (!Array.isArray(selectedColumns) || !selectedColumns.length) {\r\n      return null;\r\n    }\r\n    const normalized = new Set<string>();\r\n    selectedColumns.forEach((column) => {\r\n      const value = typeof column === 'string' ? column.trim() : '';\r\n      if (!value) {\r\n        return;\r\n      }\r\n      normalized.add(value);\r\n    });\r\n    return normalized.size > 0 ? normalized : null;\r\n  }, [selectedColumns]);\r\n\r\n  const binningExcludedColumns = useMemo(() => {\r\n    if (!isBinningNode) {\r\n      return new Set<string>();\r\n    }\r\n    if (!numericExcludedColumns.size) {\r\n      return numericExcludedColumns;\r\n    }\r\n    if (!recommendedColumnSet && !selectedColumnSet) {\r\n      return numericExcludedColumns;\r\n    }\r\n    const next = new Set<string>();\r\n    numericExcludedColumns.forEach((column) => {\r\n      if (recommendedColumnSet?.has(column)) {\r\n        return;\r\n      }\r\n      if (selectedColumnSet?.has(column)) {\r\n        return;\r\n      }\r\n      next.add(column);\r\n    });\r\n    return next;\r\n  }, [isBinningNode, numericExcludedColumns, recommendedColumnSet, selectedColumnSet]);\r\n\r\n  const binningColumnPreviewMap = useMemo(() => {\r\n    if (!isBinningNode || !previewSampleRows.length) {\r\n      return {} as Record<string, NumericColumnPreview>;\r\n    }\r\n\r\n    const rangeMap: Record<string, NumericColumnPreview> = {};\r\n\r\n    availableColumns.forEach((column) => {\r\n      if (binningExcludedColumns.has(column)) {\r\n        return;\r\n      }\r\n\r\n      let minValue: number | null = null;\r\n      let maxValue: number | null = null;\r\n      const distinctValues = new Set<number>();\r\n\r\n      previewSampleRows.forEach((row) => {\r\n        if (!row || !Object.prototype.hasOwnProperty.call(row, column)) {\r\n          return;\r\n        }\r\n\r\n        const numeric = parseNumericCandidate(row[column]);\r\n        if (numeric === null) {\r\n          return;\r\n        }\r\n\r\n        if (minValue === null || numeric < minValue) {\r\n          minValue = numeric;\r\n        }\r\n        if (maxValue === null || numeric > maxValue) {\r\n          maxValue = numeric;\r\n        }\r\n\r\n        if (distinctValues.size <= 1000) {\r\n          distinctValues.add(numeric);\r\n        }\r\n      });\r\n\r\n      if (minValue !== null || maxValue !== null) {\r\n        const distinct = distinctValues.size > 0 ? distinctValues.size : null;\r\n        rangeMap[column] = {\r\n          min: minValue,\r\n          max: maxValue,\r\n          distinct,\r\n        };\r\n      }\r\n    });\r\n\r\n    return rangeMap;\r\n  }, [availableColumns, binningExcludedColumns, isBinningNode, previewSampleRows]);\r\n\r\n  return {\r\n    binningExcludedColumns,\r\n    binningColumnPreviewMap,\r\n    manualBoundColumns: [],\r\n    manualRangeFallbackMap: {},\r\n  };\r\n};\r\n","import type {\r\n\tOutlierColumnInsight,\r\n\tOutlierColumnStats,\r\n\tOutlierMethodDetail,\r\n\tOutlierMethodName,\r\n\tOutlierMethodSummary,\r\n} from '../../../../api';\r\n\r\nexport type NormalizedOutlierConfig = {\r\n\tcolumns: string[];\r\n\tdefaultMethod: OutlierMethodName;\r\n\tcolumnMethods: Record<string, OutlierMethodName>;\r\n\tautoDetect: boolean;\r\n\tskippedColumns: string[];\r\n\tmethodParameters: Record<OutlierMethodName, Record<string, number>>;\r\n\tcolumnParameters: Record<string, Record<string, number>>;\r\n};\r\n\r\nexport const OUTLIER_METHOD_ORDER: OutlierMethodName[] = ['iqr', 'zscore', 'elliptic_envelope', 'winsorize', 'manual'];\r\n\r\nexport const OUTLIER_METHOD_FALLBACK_LABELS: Record<OutlierMethodName, string> = {\r\n\tiqr: 'IQR filter',\r\n\tzscore: 'Z-score filter',\r\n\telliptic_envelope: 'Elliptic Envelope',\r\n\twinsorize: 'Winsorize',\r\n\tmanual: 'Manual bounds',\r\n};\r\n\r\nexport const OUTLIER_PARAMETER_KEYS: Record<OutlierMethodName, string[]> = {\r\n\tiqr: ['multiplier'],\r\n\tzscore: ['threshold'],\r\n\telliptic_envelope: ['contamination'],\r\n\twinsorize: ['lower_percentile', 'upper_percentile'],\r\n\tmanual: ['lower_bound', 'upper_bound'],\r\n};\r\n\r\nexport const OUTLIER_METHOD_DEFAULT_PARAMETERS: Record<OutlierMethodName, Record<string, number>> = {\r\n\tiqr: { multiplier: 1.5 },\r\n\tzscore: { threshold: 3 },\r\n\telliptic_envelope: { contamination: 0.01 },\r\n\twinsorize: { lower_percentile: 5, upper_percentile: 95 },\r\n\tmanual: {},\r\n};\r\n\r\nconst clampNumber = (\r\n\tvalue: unknown,\r\n\t{ min, max }: { min?: number; max?: number } = {},\r\n): number | null => {\r\n\tconst numeric = typeof value === 'number' ? value : Number(value);\r\n\tif (!Number.isFinite(numeric)) {\r\n\t\treturn null;\r\n\t}\r\n\tlet result = numeric;\r\n\tif (typeof min === 'number' && Number.isFinite(min) && result < min) {\r\n\t\tresult = min;\r\n\t}\r\n\tif (typeof max === 'number' && Number.isFinite(max) && result > max) {\r\n\t\tresult = max;\r\n\t}\r\n\treturn result;\r\n};\r\n\r\nconst normalizeColumnList = (value: unknown): string[] => {\r\n\tconst values: string[] = [];\r\n\tif (Array.isArray(value)) {\r\n\t\tvalue.forEach((entry) => {\r\n\t\t\tconst column = String(entry ?? '').trim();\r\n\t\t\tif (column) {\r\n\t\t\t\tvalues.push(column);\r\n\t\t\t}\r\n\t\t});\r\n\t} else if (typeof value === 'string') {\r\n\t\tvalue\r\n\t\t\t.split(',')\r\n\t\t\t.map((entry) => entry.trim())\r\n\t\t\t.forEach((column) => {\r\n\t\t\t\tif (column) {\r\n\t\t\t\t\tvalues.push(column);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t}\r\n\treturn Array.from(new Set(values)).sort((a, b) => a.localeCompare(b));\r\n};\r\n\r\nconst normalizeMethodParameters = (value: unknown): Record<OutlierMethodName, Record<string, number>> => {\r\n\tconst result: Record<OutlierMethodName, Record<string, number>> = {\r\n\t\tiqr: { ...OUTLIER_METHOD_DEFAULT_PARAMETERS.iqr },\r\n\t\tzscore: { ...OUTLIER_METHOD_DEFAULT_PARAMETERS.zscore },\r\n\t\telliptic_envelope: { ...OUTLIER_METHOD_DEFAULT_PARAMETERS.elliptic_envelope },\r\n\t\twinsorize: { ...OUTLIER_METHOD_DEFAULT_PARAMETERS.winsorize },\r\n\t\tmanual: {},\r\n\t};\r\n\r\n\tif (!value || typeof value !== 'object' || Array.isArray(value)) {\r\n\t\treturn result;\r\n\t}\r\n\r\n\tObject.entries(value as Record<string, unknown>).forEach(([methodKey, parameters]) => {\r\n\t\tconst normalizedMethod = methodKey.trim().toLowerCase() as OutlierMethodName;\r\n\t\tif (!OUTLIER_METHOD_ORDER.includes(normalizedMethod)) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst current = result[normalizedMethod] ?? {};\r\n\t\tif (!parameters || typeof parameters !== 'object' || Array.isArray(parameters)) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tObject.entries(parameters as Record<string, unknown>).forEach(([parameterKey, rawValue]) => {\r\n\t\t\tconst normalizedKey = parameterKey.trim().toLowerCase();\r\n\t\t\tif (!OUTLIER_PARAMETER_KEYS[normalizedMethod].includes(normalizedKey)) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tlet bounds: { min?: number; max?: number } = {};\r\n\t\t\tif (normalizedKey === 'threshold') {\r\n\t\t\t\tbounds = { min: 0.1 };\r\n\t\t\t} else if (normalizedKey === 'multiplier') {\r\n\t\t\t\tbounds = { min: 0.1 };\r\n\t\t\t} else if (normalizedKey === 'lower_percentile' || normalizedKey === 'upper_percentile') {\r\n\t\t\t\tbounds = { min: 0, max: 100 };\r\n\t\t\t}\r\n\r\n\t\t\tconst numeric = clampNumber(rawValue, bounds);\r\n\t\t\tif (numeric === null) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tcurrent[normalizedKey] = numeric;\r\n\t\t});\r\n\r\n\t\tif (normalizedMethod === 'winsorize') {\r\n\t\t\tconst lower = clampNumber(current.lower_percentile, { min: 0, max: 100 });\r\n\t\t\tconst upper = clampNumber(current.upper_percentile, { min: 0, max: 100 });\r\n\t\t\tif (typeof lower === 'number' && typeof upper === 'number' && lower >= upper) {\r\n\t\t\t\tcurrent.lower_percentile = OUTLIER_METHOD_DEFAULT_PARAMETERS.winsorize.lower_percentile;\r\n\t\t\t\tcurrent.upper_percentile = OUTLIER_METHOD_DEFAULT_PARAMETERS.winsorize.upper_percentile;\r\n\t\t\t} else {\r\n\t\t\t\tif (typeof lower === 'number') {\r\n\t\t\t\t\tcurrent.lower_percentile = lower;\r\n\t\t\t\t}\r\n\t\t\t\tif (typeof upper === 'number') {\r\n\t\t\t\t\tcurrent.upper_percentile = upper;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tresult[normalizedMethod] = current;\r\n\t});\r\n\r\n\treturn result;\r\n};\r\n\r\nconst normalizeColumnParameters = (value: unknown): Record<string, Record<string, number>> => {\r\n\tif (!value || typeof value !== 'object' || Array.isArray(value)) {\r\n\t\treturn {};\r\n\t}\r\n\r\n\tconst result: Record<string, Record<string, number>> = {};\r\n\r\n\tObject.entries(value as Record<string, unknown>).forEach(([columnKey, parameters]) => {\r\n\t\tconst column = String(columnKey ?? '').trim();\r\n\t\tif (!column || !parameters || typeof parameters !== 'object' || Array.isArray(parameters)) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst normalizedParameters: Record<string, number> = {};\r\n\r\n\t\tObject.entries(parameters as Record<string, unknown>).forEach(([parameterKey, rawValue]) => {\r\n\t\t\tconst normalizedKey = parameterKey.trim().toLowerCase();\r\n\t\t\tconst permitted = Object.values(OUTLIER_PARAMETER_KEYS).some((keys) => keys.includes(normalizedKey));\r\n\t\t\tif (!permitted) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tlet bounds: { min?: number; max?: number } = {};\r\n\t\t\tif (normalizedKey === 'threshold') {\r\n\t\t\t\tbounds = { min: 0.1 };\r\n\t\t\t} else if (normalizedKey === 'multiplier') {\r\n\t\t\t\tbounds = { min: 0.1 };\r\n\t\t\t} else if (normalizedKey === 'contamination') {\r\n\t\t\t\tbounds = { min: 0.0001, max: 0.49 };\r\n\t\t\t} else if (normalizedKey === 'lower_percentile' || normalizedKey === 'upper_percentile') {\r\n\t\t\t\tbounds = { min: 0, max: 100 };\r\n\t\t\t}\r\n\r\n\t\t\tconst numeric = clampNumber(rawValue, bounds);\r\n\t\t\tif (numeric === null) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tnormalizedParameters[normalizedKey] = numeric;\r\n\t\t});\r\n\r\n\t\tif (Object.keys(normalizedParameters).length) {\r\n\t\t\tresult[column] = normalizedParameters;\r\n\t\t}\r\n\t});\r\n\r\n\treturn result;\r\n};\r\n\r\nexport const normalizeOutlierConfigValue = (value: unknown): NormalizedOutlierConfig => {\r\n\tconst payload = value && typeof value === 'object' && !Array.isArray(value) ? (value as Record<string, unknown>) : {};\r\n\r\n\tconst columns = normalizeColumnList(payload.columns);\r\n\r\n\tconst rawDefault = typeof payload.default_method === 'string' ? payload.default_method.trim().toLowerCase() : '';\r\n\tconst defaultMethod = OUTLIER_METHOD_ORDER.includes(rawDefault as OutlierMethodName)\r\n\t\t? (rawDefault as OutlierMethodName)\r\n\t\t: 'iqr';\r\n\r\n\tconst columnMethods: Record<string, OutlierMethodName> = {};\r\n\tif (payload.column_methods && typeof payload.column_methods === 'object' && !Array.isArray(payload.column_methods)) {\r\n\t\tObject.entries(payload.column_methods as Record<string, unknown>).forEach(([columnKey, methodValue]) => {\r\n\t\t\tconst column = String(columnKey ?? '').trim();\r\n\t\t\tconst method = typeof methodValue === 'string' ? methodValue.trim().toLowerCase() : '';\r\n\t\t\tif (column && OUTLIER_METHOD_ORDER.includes(method as OutlierMethodName)) {\r\n\t\t\t\tcolumnMethods[column] = method as OutlierMethodName;\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tconst autoDetect = typeof payload.auto_detect === 'boolean' ? payload.auto_detect : true;\r\n\tconst skippedColumns = normalizeColumnList(payload.skipped_columns);\r\n\tconst methodParameters = normalizeMethodParameters(payload.method_parameters);\r\n\tconst columnParameters = normalizeColumnParameters(payload.column_parameters);\r\n\r\n\treturn {\r\n\t\tcolumns,\r\n\t\tdefaultMethod,\r\n\t\tcolumnMethods,\r\n\t\tautoDetect,\r\n\t\tskippedColumns,\r\n\t\tmethodParameters,\r\n\t\tcolumnParameters,\r\n\t};\r\n};\r\n\r\nexport type OutlierMethodOption = {\r\n\tvalue: OutlierMethodName;\r\n\tlabel: string;\r\n};\r\n\r\nexport const createOutlierMethodLabelMap = (methods?: OutlierMethodDetail[] | null): Record<OutlierMethodName, string> => {\r\n\tconst result: Record<OutlierMethodName, string> = { ...OUTLIER_METHOD_FALLBACK_LABELS };\r\n\tif (Array.isArray(methods)) {\r\n\t\tmethods.forEach((detail) => {\r\n\t\t\tconst key = typeof detail?.key === 'string' ? (detail.key.trim().toLowerCase() as OutlierMethodName) : null;\r\n\t\t\tconst label = typeof detail?.label === 'string' ? detail.label.trim() : '';\r\n\t\t\tif (key && label && OUTLIER_METHOD_ORDER.includes(key)) {\r\n\t\t\t\tresult[key] = label;\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\treturn result;\r\n};\r\n\r\nexport const createOutlierMethodDetailMap = (methods?: OutlierMethodDetail[] | null): Map<OutlierMethodName, OutlierMethodDetail> => {\r\n\tconst map = new Map<OutlierMethodName, OutlierMethodDetail>();\r\n\tif (Array.isArray(methods)) {\r\n\t\tmethods.forEach((detail) => {\r\n\t\t\tconst key = typeof detail?.key === 'string' ? (detail.key.trim().toLowerCase() as OutlierMethodName) : null;\r\n\t\t\tif (key && OUTLIER_METHOD_ORDER.includes(key)) {\r\n\t\t\t\tmap.set(key, detail);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\treturn map;\r\n};\r\n\r\nexport const createOutlierMethodOptions = (labelMap: Record<OutlierMethodName, string>): OutlierMethodOption[] =>\r\n\tOUTLIER_METHOD_ORDER.map((method) => ({\r\n\t\tvalue: method,\r\n\t\tlabel: labelMap[method] ?? OUTLIER_METHOD_FALLBACK_LABELS[method] ?? method,\r\n\t}));\r\n\r\nexport type OutlierMethodSummaryMap = Partial<Record<OutlierMethodName, OutlierMethodSummary>>;\r\n\r\nexport type OutlierRecommendationRow = {\r\n\tcolumn: string;\r\n\tdtype: string | null;\r\n\tstats: OutlierColumnStats;\r\n\trecommendedMethod: OutlierMethodName | null;\r\n\trecommendedLabel: string | null;\r\n\trecommendedReason: string | null;\r\n\tmethodSummaries: OutlierMethodSummaryMap;\r\n\tcurrentOverride: OutlierMethodName | null;\r\n\tcurrentMethod: OutlierMethodName;\r\n\tcurrentMethodLabel: string;\r\n\tisOverrideApplied: boolean;\r\n\tisSelected: boolean;\r\n\tisSkipped: boolean;\r\n\tisExcluded: boolean;\r\n\thasMissing: boolean;\r\n};\r\n\r\ntype BuildOutlierRowsInput = {\r\n\tinsights: OutlierColumnInsight[];\r\n\toutlierConfig: NormalizedOutlierConfig;\r\n\tlabelMap: Record<OutlierMethodName, string>;\r\n\tselectedColumns: Set<string>;\r\n\tskippedColumns: Set<string>;\r\n\texcludedColumns: Set<string>;\r\n};\r\n\r\nexport const buildOutlierRecommendationRows = ({\r\n\tinsights,\r\n\toutlierConfig,\r\n\tlabelMap,\r\n\tselectedColumns,\r\n\tskippedColumns,\r\n\texcludedColumns,\r\n}: BuildOutlierRowsInput): OutlierRecommendationRow[] => {\r\n\tif (!insights.length) {\r\n\t\treturn [];\r\n\t}\r\n\r\n\tconst rows: OutlierRecommendationRow[] = [];\r\n\r\n\tinsights.forEach((insight) => {\r\n\t\tconst column = String(insight?.column ?? '').trim();\r\n\t\tif (!column) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst methodSummaries: OutlierMethodSummaryMap = {};\r\n\t\tif (Array.isArray(insight?.method_summaries)) {\r\n\t\t\tinsight.method_summaries.forEach((summary: OutlierMethodSummary) => {\r\n\t\t\t\tconst method = summary?.method;\r\n\t\t\t\tif (method && OUTLIER_METHOD_ORDER.includes(method)) {\r\n\t\t\t\t\tmethodSummaries[method] = summary;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tconst recommendedMethod = insight?.recommended_method && OUTLIER_METHOD_ORDER.includes(insight.recommended_method)\r\n\t\t\t? insight.recommended_method\r\n\t\t\t: null;\r\n\r\n\t\tconst recommendedLabel = recommendedMethod ? labelMap[recommendedMethod] ?? OUTLIER_METHOD_FALLBACK_LABELS[recommendedMethod] ?? recommendedMethod : null;\r\n\r\n\t\tconst columnOverride = outlierConfig.columnMethods[column] ?? null;\r\n\t\tconst currentMethod = columnOverride ?? outlierConfig.defaultMethod;\r\n\t\tconst currentMethodLabel = labelMap[currentMethod] ?? OUTLIER_METHOD_FALLBACK_LABELS[currentMethod] ?? currentMethod;\r\n\t\tconst isSkipped = skippedColumns.has(column);\r\n\t\tconst isExcluded = excludedColumns.has(column);\r\n\t\tconst isSelected = selectedColumns.has(column);\r\n\t\tconst hasMissing = Boolean(insight?.has_missing);\r\n\r\n\t\trows.push({\r\n\t\t\tcolumn,\r\n\t\t\tdtype: typeof insight?.dtype === 'string' ? insight.dtype : null,\r\n\t\t\tstats: insight?.stats ?? ({} as OutlierColumnStats),\r\n\t\t\trecommendedMethod,\r\n\t\t\trecommendedLabel,\r\n\t\t\trecommendedReason: typeof insight?.recommended_reason === 'string' ? insight.recommended_reason : null,\r\n\t\t\tmethodSummaries,\r\n\t\t\tcurrentOverride: columnOverride,\r\n\t\t\tcurrentMethod,\r\n\t\t\tcurrentMethodLabel,\r\n\t\t\tisOverrideApplied: columnOverride !== null,\r\n\t\t\tisSelected,\r\n\t\t\tisSkipped,\r\n\t\t\tisExcluded,\r\n\t\t\thasMissing,\r\n\t\t});\r\n\t});\r\n\r\n\trows.sort((a, b) => a.column.localeCompare(b.column));\r\n\treturn rows;\r\n};\r\n\r\nexport const buildOutlierOverrideSummary = (\r\n\toverrideColumns: string[],\r\n\tcolumnMethods: Record<string, OutlierMethodName>,\r\n\tlabelMap: Record<OutlierMethodName, string>,\r\n\toverrideCount: number,\r\n): string | null => {\r\n\tif (!overrideColumns.length) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\tconst preview = overrideColumns.map((column) => {\r\n\t\tconst method = columnMethods[column];\r\n\t\tconst label = method ? labelMap[method] ?? OUTLIER_METHOD_FALLBACK_LABELS[method] ?? method : null;\r\n\t\treturn label ? `${column} -> ${label}` : column;\r\n\t});\r\n\r\n\tif (overrideCount > overrideColumns.length) {\r\n\t\tpreview.push('');\r\n\t}\r\n\r\n\treturn preview.join(', ');\r\n};\r\n","// Used by NodeSettingsModal to keep scaling and binning configs in sync with column exclusions.\r\nimport { useEffect } from 'react';\r\nimport type { Dispatch, SetStateAction } from 'react';\r\nimport type { OutlierMethodName, ScalingMethodName } from '../../../api';\r\nimport { ensureArrayOfString } from '../sharedUtils';\r\nimport { SCALING_METHOD_ORDER } from '../nodes/scaling/scalingSettings';\r\nimport { OUTLIER_METHOD_ORDER } from '../nodes/outlier/outlierSettings';\r\n\r\ntype UsePruneColumnSelectionsParams = {\r\n  isScalingNode: boolean;\r\n  isBinningNode: boolean;\r\n  isOutlierNode: boolean;\r\n  scalingExcludedColumns: Set<string>;\r\n  binningExcludedColumns: Set<string>;\r\n  outlierExcludedColumns: Set<string>;\r\n  setConfigState: Dispatch<SetStateAction<Record<string, any>>>;\r\n};\r\n\r\nexport const usePruneColumnSelections = ({\r\n  isScalingNode,\r\n  isBinningNode,\r\n  isOutlierNode,\r\n  scalingExcludedColumns,\r\n  binningExcludedColumns,\r\n  outlierExcludedColumns,\r\n  setConfigState,\r\n}: UsePruneColumnSelectionsParams): void => {\r\n  useEffect(() => {\r\n    if (!isScalingNode || scalingExcludedColumns.size === 0) {\r\n      return;\r\n    }\r\n\r\n    setConfigState((previous) => {\r\n      if (!previous || typeof previous !== 'object') {\r\n        return previous;\r\n      }\r\n\r\n      const currentColumns = ensureArrayOfString(previous.columns);\r\n      \r\n      if (!currentColumns.length) {\r\n        // If there are no columns selected yet, don't prune column_methods\r\n        // This allows manual configuration before columns are added\r\n        return previous;\r\n      }\r\n\r\n      const filteredColumns = currentColumns.filter((column) => !scalingExcludedColumns.has(column));\r\n      if (filteredColumns.length === currentColumns.length) {\r\n        // No columns were actually excluded, no need to update\r\n        return previous;\r\n      }\r\n\r\n      if (!filteredColumns.length) {\r\n        return previous;\r\n      }\r\n\r\n      const nextState: Record<string, any> = {\r\n        ...previous,\r\n        columns: filteredColumns,\r\n      };\r\n\r\n      if (\r\n        previous.column_methods &&\r\n        typeof previous.column_methods === 'object' &&\r\n        !Array.isArray(previous.column_methods)\r\n      ) {\r\n        const nextMethods: Record<string, ScalingMethodName> = {};\r\n        let hadExcludedMethod = false;\r\n        Object.entries(previous.column_methods as Record<string, any>).forEach(([key, value]) => {\r\n          const normalized = String(key ?? '').trim();\r\n          if (!normalized) {\r\n            return;\r\n          }\r\n          if (scalingExcludedColumns.has(normalized)) {\r\n            hadExcludedMethod = true;\r\n            return;\r\n          }\r\n          const methodKey = typeof value === 'string' ? (value.trim() as ScalingMethodName) : null;\r\n          if (methodKey && SCALING_METHOD_ORDER.includes(methodKey)) {\r\n            nextMethods[normalized] = methodKey;\r\n          }\r\n        });\r\n        \r\n        // Only update column_methods if we actually removed something\r\n        if (hadExcludedMethod) {\r\n          if (Object.keys(nextMethods).length) {\r\n            nextState.column_methods = nextMethods;\r\n          } else {\r\n            // Keep an empty object instead of deleting - allows manual configuration\r\n            nextState.column_methods = {};\r\n          }\r\n        } else {\r\n          // No changes needed, preserve existing column_methods\r\n          nextState.column_methods = previous.column_methods;\r\n        }\r\n      }\r\n\r\n      return nextState;\r\n    });\r\n  }, [isScalingNode, scalingExcludedColumns, setConfigState]);\r\n\r\n  useEffect(() => {\r\n    if (!isBinningNode || binningExcludedColumns.size === 0) {\r\n      return;\r\n    }\r\n\r\n    setConfigState((previous) => {\r\n      if (!previous || typeof previous !== 'object') {\r\n        return previous;\r\n      }\r\n\r\n      const currentColumns = ensureArrayOfString(previous.columns);\r\n      if (!currentColumns.length) {\r\n        return previous;\r\n      }\r\n\r\n      const filteredColumns = currentColumns.filter((column) => !binningExcludedColumns.has(column));\r\n      if (filteredColumns.length === currentColumns.length) {\r\n        return previous;\r\n      }\r\n\r\n      const removedColumns = new Set(currentColumns.filter((column) => binningExcludedColumns.has(column)));\r\n      const nextState: Record<string, any> = {\r\n        ...previous,\r\n        columns: filteredColumns,\r\n      };\r\n\r\n      if (\r\n        previous.custom_bins &&\r\n        typeof previous.custom_bins === 'object' &&\r\n        !Array.isArray(previous.custom_bins)\r\n      ) {\r\n        const nextBins: Record<string, number[]> = {};\r\n        Object.entries(previous.custom_bins).forEach(([key, value]) => {\r\n          if (!removedColumns.has(key) && Array.isArray(value) && value.length) {\r\n            nextBins[key] = [...value];\r\n          }\r\n        });\r\n        if (Object.keys(nextBins).length) {\r\n          nextState.custom_bins = nextBins;\r\n        } else if (Object.prototype.hasOwnProperty.call(nextState, 'custom_bins')) {\r\n          delete nextState.custom_bins;\r\n        }\r\n      }\r\n\r\n      if (\r\n        previous.custom_labels &&\r\n        typeof previous.custom_labels === 'object' &&\r\n        !Array.isArray(previous.custom_labels)\r\n      ) {\r\n        const nextLabels: Record<string, string[]> = {};\r\n        Object.entries(previous.custom_labels).forEach(([key, value]) => {\r\n          if (!removedColumns.has(key) && Array.isArray(value) && value.length) {\r\n            nextLabels[key] = value.map((entry) => String(entry));\r\n          }\r\n        });\r\n        if (Object.keys(nextLabels).length) {\r\n          nextState.custom_labels = nextLabels;\r\n        } else if (Object.prototype.hasOwnProperty.call(nextState, 'custom_labels')) {\r\n          delete nextState.custom_labels;\r\n        }\r\n      }\r\n\r\n      return nextState;\r\n    });\r\n  }, [binningExcludedColumns, isBinningNode, setConfigState]);\r\n\r\n  useEffect(() => {\r\n    if (!isOutlierNode || outlierExcludedColumns.size === 0) {\r\n      return;\r\n    }\r\n\r\n    setConfigState((previous) => {\r\n      if (!previous || typeof previous !== 'object') {\r\n        return previous;\r\n      }\r\n\r\n      const currentColumns = ensureArrayOfString(previous.columns);\r\n      const filteredColumns = currentColumns.filter((column) => !outlierExcludedColumns.has(column));\r\n      const columnsChanged = filteredColumns.length !== currentColumns.length;\r\n\r\n      const skippedColumns = ensureArrayOfString(previous.skipped_columns);\r\n      const filteredSkipped = skippedColumns.filter((column) => !outlierExcludedColumns.has(column));\r\n      const skippedChanged = filteredSkipped.length !== skippedColumns.length;\r\n\r\n      const ensureState = (state: Record<string, any> | null): Record<string, any> => state ?? { ...previous };\r\n      let nextState: Record<string, any> | null = null;\r\n\r\n      if (columnsChanged) {\r\n        nextState = ensureState(nextState);\r\n        nextState.columns = filteredColumns.sort((a, b) => a.localeCompare(b));\r\n      }\r\n\r\n      if (skippedChanged) {\r\n        nextState = ensureState(nextState);\r\n        if (filteredSkipped.length) {\r\n          nextState.skipped_columns = filteredSkipped.sort((a, b) => a.localeCompare(b));\r\n        } else if (Object.prototype.hasOwnProperty.call(nextState, 'skipped_columns')) {\r\n          delete nextState.skipped_columns;\r\n        }\r\n      }\r\n\r\n      let methodsChanged = false;\r\n      if (\r\n        previous.column_methods &&\r\n        typeof previous.column_methods === 'object' &&\r\n        !Array.isArray(previous.column_methods)\r\n      ) {\r\n        const nextMethods: Record<string, OutlierMethodName> = {};\r\n        Object.entries(previous.column_methods as Record<string, any>).forEach(([key, value]) => {\r\n          const normalized = String(key ?? '').trim();\r\n          if (!normalized || outlierExcludedColumns.has(normalized)) {\r\n            methodsChanged = true;\r\n            return;\r\n          }\r\n          const methodKey = typeof value === 'string' ? (value.trim() as OutlierMethodName) : null;\r\n          if (methodKey && OUTLIER_METHOD_ORDER.includes(methodKey)) {\r\n            nextMethods[normalized] = methodKey;\r\n          } else {\r\n            methodsChanged = true;\r\n          }\r\n        });\r\n\r\n        if (methodsChanged) {\r\n          nextState = ensureState(nextState);\r\n          if (Object.keys(nextMethods).length) {\r\n            nextState.column_methods = nextMethods;\r\n          } else if (Object.prototype.hasOwnProperty.call(nextState, 'column_methods')) {\r\n            delete nextState.column_methods;\r\n          }\r\n        }\r\n      }\r\n\r\n      let parametersChanged = false;\r\n      if (\r\n        previous.column_parameters &&\r\n        typeof previous.column_parameters === 'object' &&\r\n        !Array.isArray(previous.column_parameters)\r\n      ) {\r\n        const nextParameters: Record<string, Record<string, number>> = {};\r\n        Object.entries(previous.column_parameters as Record<string, any>).forEach(([key, value]) => {\r\n          const normalized = String(key ?? '').trim();\r\n          if (!normalized || outlierExcludedColumns.has(normalized)) {\r\n            parametersChanged = true;\r\n            return;\r\n          }\r\n          if (!value || typeof value !== 'object' || Array.isArray(value)) {\r\n            parametersChanged = true;\r\n            return;\r\n          }\r\n          nextParameters[normalized] = { ...(value as Record<string, number>) };\r\n        });\r\n\r\n        if (parametersChanged) {\r\n          nextState = ensureState(nextState);\r\n          if (Object.keys(nextParameters).length) {\r\n            nextState.column_parameters = nextParameters;\r\n          } else if (Object.prototype.hasOwnProperty.call(nextState, 'column_parameters')) {\r\n            delete nextState.column_parameters;\r\n          }\r\n        }\r\n      }\r\n\r\n      if (!nextState) {\r\n        return previous;\r\n      }\r\n\r\n      return nextState;\r\n    });\r\n  }, [isOutlierNode, outlierExcludedColumns, setConfigState]);\r\n};\r\n","import { useMemo } from 'react';\r\nimport {\r\n  buildTrimColumnSummary,\r\n  buildTrimSampleMap,\r\n  EMPTY_TRIM_COLUMN_SUMMARY,\r\n  getTrimModeDetails,\r\n  resolveTrimMode,\r\n  type TrimColumnSummary,\r\n  type TrimModeDetails,\r\n  type TrimSampleMap,\r\n} from '../nodes/trim_white_space/trimWhitespaceSettings';\r\nimport {\r\n  buildSpecialColumnSummary,\r\n  buildSpecialSampleMap,\r\n  EMPTY_SPECIAL_COLUMN_SUMMARY,\r\n  getRemoveSpecialModeDetails,\r\n  resolveRemoveSpecialMode,\r\n  type RemoveSpecialMode,\r\n  type RemoveSpecialModeDetails,\r\n  type SpecialColumnSummary,\r\n  type SpecialSampleMap,\r\n} from '../nodes/remove_special_char/removeSpecialCharactersSettings';\r\nimport {\r\n  buildRegexColumnSummary,\r\n  buildRegexSampleMap,\r\n  EMPTY_REGEX_COLUMN_SUMMARY,\r\n  getRegexModeDetails,\r\n  resolveRegexMode,\r\n  type RegexColumnSummary,\r\n  type RegexMode,\r\n  type RegexModeDetails,\r\n  type RegexSampleMap,\r\n} from '../nodes/regex_node/regexCleanupSettings';\r\nimport {\r\n  buildCaseColumnSummary,\r\n  buildCaseSampleMap,\r\n  EMPTY_CASE_COLUMN_SUMMARY,\r\n  getCaseModeDetails,\r\n  resolveCaseMode,\r\n  type CaseColumnSummary,\r\n  type CaseMode,\r\n  type CaseModeDetails,\r\n  type CaseSampleMap,\r\n} from '../nodes/normalize_text/normalizeTextCaseSettings';\r\nimport { ensureArrayOfString } from '../sharedUtils';\r\n\r\nexport type TextCleanupHookParams = {\r\n  isTrimWhitespaceNode: boolean;\r\n  isRemoveSpecialCharsNode: boolean;\r\n  isRegexCleanupNode: boolean;\r\n  isNormalizeTextCaseNode: boolean;\r\n  configState: Record<string, any>;\r\n  nodeConfig?: Record<string, any> | null;\r\n  availableColumns: string[];\r\n  columnTypeMap: Record<string, string>;\r\n  previewSampleRows: Array<Record<string, any>>;\r\n};\r\n\r\nexport type TextCleanupHookResult = {\r\n  trimWhitespace: {\r\n    columnSummary: TrimColumnSummary;\r\n    sampleMap: TrimSampleMap;\r\n    modeDetails: TrimModeDetails;\r\n  };\r\n  removeSpecial: {\r\n    columnSummary: SpecialColumnSummary;\r\n    sampleMap: SpecialSampleMap;\r\n    modeDetails: RemoveSpecialModeDetails;\r\n    selectedMode: RemoveSpecialMode;\r\n  };\r\n  regexCleanup: {\r\n    columnSummary: RegexColumnSummary;\r\n    sampleMap: RegexSampleMap;\r\n    modeDetails: RegexModeDetails;\r\n    selectedMode: RegexMode;\r\n    replacementValue: string | null;\r\n  };\r\n  normalizeCase: {\r\n    columnSummary: CaseColumnSummary;\r\n    sampleMap: CaseSampleMap;\r\n    modeDetails: CaseModeDetails;\r\n    selectedMode: CaseMode;\r\n  };\r\n};\r\n\r\nexport const useTextCleanupConfiguration = ({\r\n  isTrimWhitespaceNode,\r\n  isRemoveSpecialCharsNode,\r\n  isRegexCleanupNode,\r\n  isNormalizeTextCaseNode,\r\n  configState,\r\n  nodeConfig,\r\n  availableColumns,\r\n  columnTypeMap,\r\n  previewSampleRows,\r\n}: TextCleanupHookParams): TextCleanupHookResult => {\r\n  const trimWhitespaceMode = useMemo(\r\n    () =>\r\n      resolveTrimMode(\r\n        isTrimWhitespaceNode ? configState?.mode : undefined,\r\n        isTrimWhitespaceNode ? nodeConfig?.mode : undefined,\r\n      ),\r\n    [configState?.mode, isTrimWhitespaceNode, nodeConfig?.mode],\r\n  );\r\n\r\n  const trimWhitespaceColumns = useMemo<string[]>(() => {\r\n    if (!isTrimWhitespaceNode) {\r\n      return [] as string[];\r\n    }\r\n    return ensureArrayOfString(configState?.columns);\r\n  }, [configState?.columns, isTrimWhitespaceNode]);\r\n\r\n  const trimWhitespaceSampleMap = useMemo<TrimSampleMap>(() => {\r\n    if (!isTrimWhitespaceNode) {\r\n      return {} as TrimSampleMap;\r\n    }\r\n    return buildTrimSampleMap(previewSampleRows);\r\n  }, [isTrimWhitespaceNode, previewSampleRows]);\r\n\r\n  const trimWhitespaceColumnSummary = useMemo<TrimColumnSummary>(() => {\r\n    if (!isTrimWhitespaceNode) {\r\n      return EMPTY_TRIM_COLUMN_SUMMARY;\r\n    }\r\n    return buildTrimColumnSummary({\r\n      selectedColumns: trimWhitespaceColumns,\r\n      availableColumns,\r\n      columnTypeMap,\r\n      sampleMap: trimWhitespaceSampleMap,\r\n    });\r\n  }, [availableColumns, columnTypeMap, isTrimWhitespaceNode, trimWhitespaceColumns, trimWhitespaceSampleMap]);\r\n\r\n  const trimWhitespaceModeDetails = useMemo<TrimModeDetails>(\r\n    () => getTrimModeDetails(trimWhitespaceMode),\r\n    [trimWhitespaceMode],\r\n  );\r\n\r\n  const removeSpecialMode = useMemo(\r\n    () =>\r\n      resolveRemoveSpecialMode(\r\n        isRemoveSpecialCharsNode ? configState?.mode : undefined,\r\n        isRemoveSpecialCharsNode ? nodeConfig?.mode : undefined,\r\n      ),\r\n    [configState?.mode, isRemoveSpecialCharsNode, nodeConfig?.mode],\r\n  );\r\n\r\n  const removeSpecialColumns = useMemo<string[]>(() => {\r\n    if (!isRemoveSpecialCharsNode) {\r\n      return [] as string[];\r\n    }\r\n    return ensureArrayOfString(configState?.columns);\r\n  }, [configState?.columns, isRemoveSpecialCharsNode]);\r\n\r\n  const removeSpecialSampleMap = useMemo<SpecialSampleMap>(() => {\r\n    if (!isRemoveSpecialCharsNode) {\r\n      return {} as SpecialSampleMap;\r\n    }\r\n    return buildSpecialSampleMap(previewSampleRows);\r\n  }, [isRemoveSpecialCharsNode, previewSampleRows]);\r\n\r\n  const removeSpecialColumnSummary = useMemo<SpecialColumnSummary>(() => {\r\n    if (!isRemoveSpecialCharsNode) {\r\n      return EMPTY_SPECIAL_COLUMN_SUMMARY;\r\n    }\r\n    return buildSpecialColumnSummary({\r\n      selectedColumns: removeSpecialColumns,\r\n      availableColumns,\r\n      columnTypeMap,\r\n      sampleMap: removeSpecialSampleMap,\r\n    });\r\n  }, [availableColumns, columnTypeMap, isRemoveSpecialCharsNode, removeSpecialColumns, removeSpecialSampleMap]);\r\n\r\n  const removeSpecialModeDetails = useMemo<RemoveSpecialModeDetails>(\r\n    () => getRemoveSpecialModeDetails(removeSpecialMode),\r\n    [removeSpecialMode],\r\n  );\r\n\r\n  const regexCleanupMode = useMemo<RegexMode>(\r\n    () =>\r\n      resolveRegexMode(\r\n        isRegexCleanupNode ? configState?.mode : undefined,\r\n        isRegexCleanupNode ? nodeConfig?.mode : undefined,\r\n      ),\r\n    [configState?.mode, isRegexCleanupNode, nodeConfig?.mode],\r\n  );\r\n\r\n  const regexCleanupColumns = useMemo<string[]>(() => {\r\n    if (!isRegexCleanupNode) {\r\n      return [] as string[];\r\n    }\r\n    return ensureArrayOfString(configState?.columns);\r\n  }, [configState?.columns, isRegexCleanupNode]);\r\n\r\n  const regexCleanupSampleMap = useMemo<RegexSampleMap>(() => {\r\n    if (!isRegexCleanupNode) {\r\n      return {} as RegexSampleMap;\r\n    }\r\n    return buildRegexSampleMap(previewSampleRows);\r\n  }, [isRegexCleanupNode, previewSampleRows]);\r\n\r\n  const regexCleanupColumnSummary = useMemo<RegexColumnSummary>(() => {\r\n    if (!isRegexCleanupNode) {\r\n      return EMPTY_REGEX_COLUMN_SUMMARY;\r\n    }\r\n    return buildRegexColumnSummary({\r\n      selectedColumns: regexCleanupColumns,\r\n      availableColumns,\r\n      columnTypeMap,\r\n      sampleMap: regexCleanupSampleMap,\r\n    });\r\n  }, [availableColumns, columnTypeMap, isRegexCleanupNode, regexCleanupColumns, regexCleanupSampleMap]);\r\n\r\n  const regexCleanupModeDetails = useMemo<RegexModeDetails>(\r\n    () => getRegexModeDetails(regexCleanupMode),\r\n    [regexCleanupMode],\r\n  );\r\n\r\n  const regexCleanupReplacementValue = useMemo(() => {\r\n    if (!isRegexCleanupNode) {\r\n      return null;\r\n    }\r\n    const configValue = configState?.replacement ?? nodeConfig?.replacement ?? null;\r\n    return typeof configValue === 'string' ? configValue : null;\r\n  }, [configState?.replacement, isRegexCleanupNode, nodeConfig?.replacement]);\r\n\r\n  const normalizeCaseMode = useMemo<CaseMode>(\r\n    () =>\r\n      resolveCaseMode(\r\n        isNormalizeTextCaseNode ? configState?.mode : undefined,\r\n        isNormalizeTextCaseNode ? nodeConfig?.mode : undefined,\r\n      ),\r\n    [configState?.mode, isNormalizeTextCaseNode, nodeConfig?.mode],\r\n  );\r\n\r\n  const normalizeCaseColumns = useMemo<string[]>(() => {\r\n    if (!isNormalizeTextCaseNode) {\r\n      return [] as string[];\r\n    }\r\n    return ensureArrayOfString(configState?.columns);\r\n  }, [configState?.columns, isNormalizeTextCaseNode]);\r\n\r\n  const normalizeCaseSampleMap = useMemo<CaseSampleMap>(() => {\r\n    if (!isNormalizeTextCaseNode) {\r\n      return {} as CaseSampleMap;\r\n    }\r\n    return buildCaseSampleMap(previewSampleRows);\r\n  }, [isNormalizeTextCaseNode, previewSampleRows]);\r\n\r\n  const normalizeCaseColumnSummary = useMemo<CaseColumnSummary>(() => {\r\n    if (!isNormalizeTextCaseNode) {\r\n      return EMPTY_CASE_COLUMN_SUMMARY;\r\n    }\r\n    return buildCaseColumnSummary({\r\n      selectedColumns: normalizeCaseColumns,\r\n      availableColumns,\r\n      columnTypeMap,\r\n      sampleMap: normalizeCaseSampleMap,\r\n      mode: normalizeCaseMode,\r\n    });\r\n  }, [\r\n    availableColumns,\r\n    columnTypeMap,\r\n    isNormalizeTextCaseNode,\r\n    normalizeCaseColumns,\r\n    normalizeCaseMode,\r\n    normalizeCaseSampleMap,\r\n  ]);\r\n\r\n  const normalizeCaseModeDetails = useMemo<CaseModeDetails>(\r\n    () => getCaseModeDetails(normalizeCaseMode),\r\n    [normalizeCaseMode],\r\n  );\r\n\r\n  return {\r\n    trimWhitespace: {\r\n      columnSummary: trimWhitespaceColumnSummary,\r\n      sampleMap: trimWhitespaceSampleMap,\r\n      modeDetails: trimWhitespaceModeDetails,\r\n    },\r\n    removeSpecial: {\r\n      columnSummary: removeSpecialColumnSummary,\r\n      sampleMap: removeSpecialSampleMap,\r\n      modeDetails: removeSpecialModeDetails,\r\n      selectedMode: removeSpecialMode,\r\n    },\r\n    regexCleanup: {\r\n      columnSummary: regexCleanupColumnSummary,\r\n      sampleMap: regexCleanupSampleMap,\r\n      modeDetails: regexCleanupModeDetails,\r\n      selectedMode: regexCleanupMode,\r\n      replacementValue: regexCleanupReplacementValue,\r\n    },\r\n    normalizeCase: {\r\n      columnSummary: normalizeCaseColumnSummary,\r\n      sampleMap: normalizeCaseSampleMap,\r\n      modeDetails: normalizeCaseModeDetails,\r\n      selectedMode: normalizeCaseMode,\r\n    },\r\n  };\r\n};\r\n","import { useMemo } from 'react';\r\nimport {\r\n  buildInvalidValueColumnSummary,\r\n  buildInvalidValueSampleMap,\r\n  EMPTY_INVALID_VALUE_COLUMN_SUMMARY,\r\n  getInvalidValueModeDetails,\r\n  resolveInvalidValueMode,\r\n  type InvalidValueColumnSummary,\r\n  type InvalidValueMode,\r\n  type InvalidValueModeDetails,\r\n  type InvalidValueSampleMap,\r\n} from '../nodes/replace_invalid_values/replaceInvalidValuesSettings';\r\nimport { ensureArrayOfString } from '../sharedUtils';\r\n\r\nexport type ReplaceInvalidHookParams = {\r\n  isReplaceInvalidValuesNode: boolean;\r\n  configState: Record<string, any>;\r\n  nodeConfig?: Record<string, any> | null;\r\n  availableColumns: string[];\r\n  columnTypeMap: Record<string, string>;\r\n  previewSampleRows: Array<Record<string, any>>;\r\n};\r\n\r\nexport type ReplaceInvalidHookResult = {\r\n  selectedColumns: string[];\r\n  selectedMode: InvalidValueMode;\r\n  modeDetails: InvalidValueModeDetails;\r\n  sampleMap: InvalidValueSampleMap;\r\n  columnSummary: InvalidValueColumnSummary;\r\n  minValue: number | null;\r\n  maxValue: number | null;\r\n};\r\n\r\nconst EMPTY_SAMPLE_MAP: InvalidValueSampleMap = {};\r\n\r\nexport const useReplaceInvalidConfiguration = ({\r\n  isReplaceInvalidValuesNode,\r\n  configState,\r\n  nodeConfig,\r\n  availableColumns,\r\n  columnTypeMap,\r\n  previewSampleRows,\r\n}: ReplaceInvalidHookParams): ReplaceInvalidHookResult => {\r\n  const selectedMode = useMemo<InvalidValueMode>(\r\n    () =>\r\n      resolveInvalidValueMode(\r\n        isReplaceInvalidValuesNode ? configState?.mode : undefined,\r\n        isReplaceInvalidValuesNode ? nodeConfig?.mode : undefined,\r\n      ),\r\n    [configState?.mode, isReplaceInvalidValuesNode, nodeConfig?.mode],\r\n  );\r\n\r\n  const selectedColumns = useMemo<string[]>(() => {\r\n    if (!isReplaceInvalidValuesNode) {\r\n      return [] as string[];\r\n    }\r\n    return ensureArrayOfString(configState?.columns);\r\n  }, [configState?.columns, isReplaceInvalidValuesNode]);\r\n\r\n  const minValue = useMemo(() => {\r\n    if (!isReplaceInvalidValuesNode) {\r\n      return null;\r\n    }\r\n    const configValue = configState?.min_value ?? nodeConfig?.min_value;\r\n    const numeric = Number(configValue);\r\n    return Number.isFinite(numeric) ? numeric : null;\r\n  }, [configState?.min_value, isReplaceInvalidValuesNode, nodeConfig?.min_value]);\r\n\r\n  const maxValue = useMemo(() => {\r\n    if (!isReplaceInvalidValuesNode) {\r\n      return null;\r\n    }\r\n    const configValue = configState?.max_value ?? nodeConfig?.max_value;\r\n    const numeric = Number(configValue);\r\n    return Number.isFinite(numeric) ? numeric : null;\r\n  }, [configState?.max_value, isReplaceInvalidValuesNode, nodeConfig?.max_value]);\r\n\r\n  const sampleMap = useMemo<InvalidValueSampleMap>(() => {\r\n    if (!isReplaceInvalidValuesNode) {\r\n      return EMPTY_SAMPLE_MAP;\r\n    }\r\n    return buildInvalidValueSampleMap(previewSampleRows);\r\n  }, [isReplaceInvalidValuesNode, previewSampleRows]);\r\n\r\n  const columnSummary = useMemo<InvalidValueColumnSummary>(() => {\r\n    if (!isReplaceInvalidValuesNode) {\r\n      return EMPTY_INVALID_VALUE_COLUMN_SUMMARY;\r\n    }\r\n    return buildInvalidValueColumnSummary({\r\n      selectedColumns,\r\n      availableColumns,\r\n      columnTypeMap,\r\n      sampleMap,\r\n    });\r\n  }, [availableColumns, columnTypeMap, isReplaceInvalidValuesNode, sampleMap, selectedColumns]);\r\n\r\n  const modeDetails = useMemo<InvalidValueModeDetails>(\r\n    () => getInvalidValueModeDetails(selectedMode),\r\n    [selectedMode],\r\n  );\r\n\r\n  return {\r\n    selectedColumns,\r\n    selectedMode,\r\n    modeDetails,\r\n    sampleMap,\r\n    columnSummary,\r\n    minValue,\r\n    maxValue,\r\n  };\r\n};\r\n","import { useMemo } from 'react';\r\nimport {\r\n  buildDateColumnSummary,\r\n  buildDateSampleMap,\r\n  EMPTY_DATE_COLUMN_SUMMARY,\r\n  normalizeDateFormatStrategies,\r\n  resolveDateMode,\r\n  type DateColumnOption,\r\n  type DateColumnSummary,\r\n  type DateFormatStrategyConfig,\r\n  type DateMode,\r\n  type DateSampleMap,\r\n} from '../nodes/standardize_date/standardizeDateSettings';\r\nimport { ensureArrayOfString } from '../sharedUtils';\r\n\r\nexport type StandardizeDatesHookParams = {\r\n  isStandardizeDatesNode: boolean;\r\n  configState: Record<string, any>;\r\n  nodeConfig?: Record<string, any> | null;\r\n  availableColumns: string[];\r\n  columnTypeMap: Record<string, string>;\r\n  previewSampleRows: Array<Record<string, any>>;\r\n};\r\n\r\nexport type StandardizeDatesHookResult = {\r\n  selectedMode: DateMode;\r\n  strategies: DateFormatStrategyConfig[];\r\n  sampleMap: DateSampleMap;\r\n  columnSummary: DateColumnSummary;\r\n  columnOptions: DateColumnOption[];\r\n};\r\n\r\nconst EMPTY_SAMPLE_MAP: DateSampleMap = {};\r\n\r\nexport const useStandardizeDatesConfiguration = ({\r\n  isStandardizeDatesNode,\r\n  configState,\r\n  nodeConfig,\r\n  availableColumns,\r\n  columnTypeMap,\r\n  previewSampleRows,\r\n}: StandardizeDatesHookParams): StandardizeDatesHookResult => {\r\n  const selectedMode = useMemo<DateMode>(\r\n    () =>\r\n      resolveDateMode(\r\n        isStandardizeDatesNode ? configState?.mode : undefined,\r\n        isStandardizeDatesNode ? nodeConfig?.mode : undefined,\r\n      ),\r\n    [configState?.mode, isStandardizeDatesNode, nodeConfig?.mode],\r\n  );\r\n\r\n  const legacyColumns = useMemo<string[]>(() => {\r\n    if (!isStandardizeDatesNode) {\r\n      return [] as string[];\r\n    }\r\n    return ensureArrayOfString(configState?.columns ?? nodeConfig?.columns);\r\n  }, [configState?.columns, isStandardizeDatesNode, nodeConfig?.columns]);\r\n\r\n  const strategies = useMemo<DateFormatStrategyConfig[]>(() => {\r\n    if (!isStandardizeDatesNode) {\r\n      return [];\r\n    }\r\n    const fallback = {\r\n      columns: legacyColumns,\r\n      mode: selectedMode,\r\n      autoDetect: legacyColumns.length === 0,\r\n    };\r\n    return normalizeDateFormatStrategies(\r\n      configState?.format_strategies ?? nodeConfig?.format_strategies,\r\n      fallback,\r\n    );\r\n  }, [configState?.format_strategies, isStandardizeDatesNode, legacyColumns, nodeConfig?.format_strategies, selectedMode]);\r\n\r\n  const selectedColumns = useMemo<string[]>(() => {\r\n    if (!isStandardizeDatesNode) {\r\n      return [] as string[];\r\n    }\r\n    const set = new Set<string>();\r\n    strategies.forEach((strategy) => {\r\n      strategy.columns.forEach((column) => {\r\n        const normalized = column.trim();\r\n        if (normalized) {\r\n          set.add(normalized);\r\n        }\r\n      });\r\n    });\r\n    return Array.from(set).sort((a, b) => a.localeCompare(b));\r\n  }, [isStandardizeDatesNode, strategies]);\r\n\r\n  const hasAutoDetectStrategy = useMemo(\r\n    () => strategies.some((strategy) => strategy.autoDetect),\r\n    [strategies],\r\n  );\r\n\r\n  const sampleMap = useMemo<DateSampleMap>(() => {\r\n    if (!isStandardizeDatesNode) {\r\n      return EMPTY_SAMPLE_MAP;\r\n    }\r\n    return buildDateSampleMap(previewSampleRows);\r\n  }, [isStandardizeDatesNode, previewSampleRows]);\r\n\r\n  const columnSummary = useMemo<DateColumnSummary>(() => {\r\n    if (!isStandardizeDatesNode) {\r\n      return EMPTY_DATE_COLUMN_SUMMARY;\r\n    }\r\n    const base = buildDateColumnSummary({\r\n      selectedColumns,\r\n      availableColumns,\r\n      columnTypeMap,\r\n      sampleMap,\r\n    });\r\n    if (hasAutoDetectStrategy) {\r\n      return {\r\n        ...base,\r\n        autoDetectionActive: true,\r\n      };\r\n    }\r\n    return base;\r\n  }, [availableColumns, columnTypeMap, hasAutoDetectStrategy, isStandardizeDatesNode, sampleMap, selectedColumns]);\r\n\r\n  const columnOptions = useMemo<DateColumnOption[]>(() => {\r\n    if (!isStandardizeDatesNode) {\r\n      return [];\r\n    }\r\n    const recommendedSet = new Set(columnSummary.recommendedColumns);\r\n    const candidateSet = new Set(columnSummary.sampleCandidates);\r\n    return availableColumns.map((column) => {\r\n      const dtype = columnTypeMap[column] ?? null;\r\n      const rawSamples = sampleMap[column] ?? [];\r\n      return {\r\n        name: column,\r\n        dtype,\r\n        samples: rawSamples.slice(0, 3),\r\n        isRecommended: recommendedSet.has(column),\r\n        isSampleCandidate: candidateSet.has(column),\r\n      };\r\n    });\r\n  }, [availableColumns, columnSummary, columnTypeMap, isStandardizeDatesNode, sampleMap]);\r\n\r\n  return {\r\n    selectedMode,\r\n    strategies,\r\n    sampleMap,\r\n    columnSummary,\r\n    columnOptions,\r\n  };\r\n};\r\n","import { useMemo } from 'react';\r\nimport type {\r\n  ScalingColumnRecommendation,\r\n  ScalingMethodDetail,\r\n  ScalingMethodName,\r\n  ScalingRecommendationsResponse,\r\n} from '../../../api';\r\nimport {\r\n  normalizeScalingConfigValue,\r\n  SCALING_METHOD_FALLBACK_LABELS,\r\n  buildScalingOverrideSummary,\r\n  buildScalingRecommendationRows,\r\n  createScalingMethodDetailMap,\r\n  createScalingMethodLabelMap,\r\n  createScalingMethodOptions,\r\n  type NormalizedScalingConfig,\r\n  type ScalingMethodOption,\r\n  type ScalingRecommendationRow,\r\n} from '../nodes/scaling/scalingSettings';\r\n\r\nexport type UseScalingConfigurationArgs = {\r\n  isScalingNode: boolean;\r\n  configState: Record<string, any>;\r\n  numericExcludedColumns: Set<string>;\r\n  scalingData: ScalingRecommendationsResponse | null;\r\n};\r\n\r\nexport type UseScalingConfigurationResult = {\r\n  scalingConfig: NormalizedScalingConfig;\r\n  scalingExcludedColumns: Set<string>;\r\n  scalingMethodDetailMap: Map<ScalingMethodName, ScalingMethodDetail>;\r\n  scalingMethodOptions: ScalingMethodOption[];\r\n  scalingRecommendations: ScalingColumnRecommendation[];\r\n  scalingRecommendationRows: ScalingRecommendationRow[];\r\n  scalingSelectedCount: number;\r\n  scalingOverrideCount: number;\r\n  scalingDefaultDetail: ScalingMethodDetail | null;\r\n  scalingDefaultLabel: string;\r\n  scalingAutoDetectEnabled: boolean;\r\n  scalingHasRecommendations: boolean;\r\n  scalingStatusMessage: string;\r\n  scalingOverrideExampleSummary: string | null;\r\n};\r\n\r\nexport const useScalingConfiguration = ({\r\n  isScalingNode,\r\n  configState,\r\n  numericExcludedColumns,\r\n  scalingData,\r\n}: UseScalingConfigurationArgs): UseScalingConfigurationResult => {\r\n  const scalingConfig = useMemo<NormalizedScalingConfig>(\r\n    () => {\r\n      return normalizeScalingConfigValue(configState);\r\n    },\r\n    [configState],\r\n  );\r\n\r\n  const scalingSkippedColumns = useMemo(\r\n    () => new Set(scalingConfig.skippedColumns),\r\n    [scalingConfig.skippedColumns],\r\n  );\r\n\r\n  const scalingExcludedColumns = useMemo(() => {\r\n    if (!isScalingNode) {\r\n      return new Set<string>();\r\n    }\r\n    return numericExcludedColumns;\r\n  }, [isScalingNode, numericExcludedColumns]);\r\n\r\n  const scalingSelectedSet = useMemo(() => {\r\n    if (!isScalingNode) {\r\n      return new Set<string>();\r\n    }\r\n    return new Set(scalingConfig.columns);\r\n  }, [isScalingNode, scalingConfig.columns]);\r\n\r\n  const scalingOverrideSet = useMemo(\r\n    () => new Set(Object.keys(scalingConfig.columnMethods)),\r\n    [scalingConfig.columnMethods],\r\n  );\r\n\r\n  const scalingRecommendations = useMemo(() => {\r\n    if (!Array.isArray(scalingData?.columns)) {\r\n      return [] as ScalingColumnRecommendation[];\r\n    }\r\n    return scalingData.columns.filter(\r\n      (entry): entry is ScalingColumnRecommendation => Boolean(entry && entry.column),\r\n    );\r\n  }, [scalingData?.columns]);\r\n\r\n  const scalingMethodLabelMap = useMemo(\r\n    () => createScalingMethodLabelMap(scalingData?.methods),\r\n    [scalingData?.methods],\r\n  );\r\n\r\n  const scalingMethodDetailMap = useMemo(\r\n    () => createScalingMethodDetailMap(scalingData?.methods),\r\n    [scalingData?.methods],\r\n  );\r\n\r\n  const scalingRecommendationRows = useMemo(\r\n    () =>\r\n      buildScalingRecommendationRows({\r\n        recommendations: scalingRecommendations,\r\n        scalingConfig,\r\n        scalingMethodLabelMap,\r\n        scalingSelectedSet,\r\n        scalingSkippedColumns,\r\n        scalingExcludedColumns,\r\n      }),\r\n    [\r\n      scalingRecommendations,\r\n      scalingConfig,\r\n      scalingMethodLabelMap,\r\n      scalingSelectedSet,\r\n      scalingSkippedColumns,\r\n      scalingExcludedColumns,\r\n    ],\r\n  );\r\n\r\n  const scalingOverrideColumns = useMemo(\r\n    () => Array.from(scalingOverrideSet).sort((a, b) => a.localeCompare(b)),\r\n    [scalingOverrideSet],\r\n  );\r\n\r\n  const scalingOverridesPreview = useMemo(\r\n    () => scalingOverrideColumns.slice(0, 4),\r\n    [scalingOverrideColumns],\r\n  );\r\n\r\n  const scalingRecommendationCount = scalingRecommendationRows.length;\r\n  const scalingOverrideCount = scalingOverrideSet.size;\r\n  const scalingSelectedCount = scalingSelectedSet.size;\r\n  const scalingAutoDetectEnabled = scalingConfig.autoDetect;\r\n\r\n  const scalingDefaultDetail = useMemo(\r\n    () => scalingMethodDetailMap.get(scalingConfig.defaultMethod) ?? null,\r\n    [scalingConfig.defaultMethod, scalingMethodDetailMap],\r\n  );\r\n\r\n  const scalingDefaultLabel = useMemo(() => {\r\n    const method = scalingConfig.defaultMethod;\r\n    return (\r\n      scalingMethodLabelMap[method] ??\r\n      SCALING_METHOD_FALLBACK_LABELS[method] ??\r\n      method\r\n    );\r\n  }, [scalingConfig.defaultMethod, scalingMethodLabelMap]);\r\n\r\n  const scalingHasRecommendations = scalingRecommendationCount > 0;\r\n\r\n  const scalingAttentionCount = useMemo(\r\n    () =>\r\n      scalingRecommendationRows.filter(\r\n        (row) => !row.isSkipped && !row.isExcluded && row.isSelected && row.recommendedMethod !== row.currentMethod,\r\n      ).length,\r\n    [scalingRecommendationRows],\r\n  );\r\n\r\n  const scalingConfiguredCount = useMemo(\r\n    () =>\r\n      scalingRecommendationRows.filter(\r\n        (row) => row.isSelected && !row.isSkipped && !row.isExcluded,\r\n      ).length,\r\n    [scalingRecommendationRows],\r\n  );\r\n\r\n  const scalingSkippedCount = useMemo(\r\n    () =>\r\n      scalingRecommendationRows.filter((row) => row.isSkipped && !row.isExcluded).length,\r\n    [scalingRecommendationRows],\r\n  );\r\n\r\n  const scalingStatusMessage = useMemo(() => {\r\n    if (!scalingRecommendationRows.length) {\r\n      return 'No scaling recommendations yetselect numeric columns to evaluate.';\r\n    }\r\n    if (scalingAttentionCount > 0) {\r\n      return `${scalingAttentionCount} column${scalingAttentionCount === 1 ? '' : 's'} need attention. Apply the recommended scalers or override them manually below.`;\r\n    }\r\n    if (scalingConfiguredCount > 0) {\r\n      return 'All configured columns align with the recommended scalers.';\r\n    }\r\n    if (scalingSkippedCount > 0) {\r\n      return 'All recommendations are currently skipped.';\r\n    }\r\n    return 'Review the recommendations below.';\r\n  }, [\r\n    scalingAttentionCount,\r\n    scalingConfiguredCount,\r\n    scalingRecommendationRows,\r\n    scalingSkippedCount,\r\n  ]);\r\n\r\n  const scalingMethodOptions = useMemo(\r\n    () => createScalingMethodOptions(scalingMethodLabelMap),\r\n    [scalingMethodLabelMap],\r\n  );\r\n\r\n  const scalingOverrideExampleSummary = useMemo(\r\n    () =>\r\n      buildScalingOverrideSummary(\r\n        scalingOverridesPreview,\r\n        scalingConfig.columnMethods,\r\n        scalingMethodLabelMap,\r\n        scalingOverrideCount,\r\n      ),\r\n    [\r\n      scalingOverridesPreview,\r\n      scalingConfig.columnMethods,\r\n      scalingMethodLabelMap,\r\n      scalingOverrideCount,\r\n    ],\r\n  );\r\n\r\n  return {\r\n    scalingConfig,\r\n    scalingExcludedColumns,\r\n    scalingMethodDetailMap,\r\n    scalingMethodOptions,\r\n    scalingRecommendations,\r\n    scalingRecommendationRows,\r\n    scalingSelectedCount,\r\n    scalingOverrideCount,\r\n    scalingDefaultDetail,\r\n    scalingDefaultLabel,\r\n    scalingAutoDetectEnabled,\r\n    scalingHasRecommendations,\r\n    scalingStatusMessage,\r\n    scalingOverrideExampleSummary,\r\n  };\r\n};\r\n","import { useMemo } from 'react';\r\nimport type {\r\n  OutlierColumnInsight,\r\n  OutlierMethodDetail,\r\n  OutlierMethodName,\r\n  OutlierRecommendationsResponse,\r\n} from '../../../api';\r\nimport {\r\n  buildOutlierOverrideSummary,\r\n  buildOutlierRecommendationRows,\r\n  createOutlierMethodDetailMap,\r\n  createOutlierMethodLabelMap,\r\n  createOutlierMethodOptions,\r\n  normalizeOutlierConfigValue,\r\n  OUTLIER_METHOD_FALLBACK_LABELS,\r\n  OUTLIER_METHOD_ORDER,\r\n  type NormalizedOutlierConfig,\r\n  type OutlierMethodOption,\r\n  type OutlierRecommendationRow,\r\n} from '../nodes/outlier/outlierSettings';\r\n\r\nexport type UseOutlierConfigurationArgs = {\r\n  isOutlierNode: boolean;\r\n  configState: Record<string, any>;\r\n  numericExcludedColumns: Set<string>;\r\n  outlierData: OutlierRecommendationsResponse | null;\r\n};\r\n\r\nexport type UseOutlierConfigurationResult = {\r\n  outlierConfig: NormalizedOutlierConfig;\r\n  outlierExcludedColumns: Set<string>;\r\n  outlierMethodLabelMap: Record<OutlierMethodName, string>;\r\n  outlierMethodDetailMap: Map<OutlierMethodName, OutlierMethodDetail>;\r\n  outlierMethodOptions: OutlierMethodOption[];\r\n  outlierRecommendations: OutlierColumnInsight[];\r\n  outlierRecommendationRows: OutlierRecommendationRow[];\r\n  outlierSelectedCount: number;\r\n  outlierOverrideCount: number;\r\n  outlierParameterOverrideCount: number;\r\n  outlierDefaultDetail: OutlierMethodDetail | null;\r\n  outlierDefaultLabel: string;\r\n  outlierAutoDetectEnabled: boolean;\r\n  outlierHasRecommendations: boolean;\r\n  outlierStatusMessage: string;\r\n  outlierOverrideExampleSummary: string | null;\r\n};\r\n\r\nexport const useOutlierConfiguration = ({\r\n  isOutlierNode,\r\n  configState,\r\n  numericExcludedColumns,\r\n  outlierData,\r\n}: UseOutlierConfigurationArgs): UseOutlierConfigurationResult => {\r\n  const outlierConfig = useMemo<NormalizedOutlierConfig>(\r\n    () => normalizeOutlierConfigValue(configState),\r\n    [configState],\r\n  );\r\n\r\n  const outlierRecommendations = useMemo(() => {\r\n    if (!Array.isArray(outlierData?.columns)) {\r\n      return [] as OutlierColumnInsight[];\r\n    }\r\n    return outlierData.columns.filter((entry): entry is OutlierColumnInsight => Boolean(entry && entry.column));\r\n  }, [outlierData?.columns]);\r\n\r\n  const outlierSkippedColumns = useMemo(() => new Set(outlierConfig.skippedColumns), [outlierConfig.skippedColumns]);\r\n\r\n  const outlierSelectedColumns = useMemo(() => {\r\n    if (!isOutlierNode) {\r\n      return new Set<string>();\r\n    }\r\n    return new Set(outlierConfig.columns);\r\n  }, [isOutlierNode, outlierConfig.columns]);\r\n\r\n  const outlierExcludedColumns = useMemo(() => {\r\n    if (!isOutlierNode || !numericExcludedColumns.size) {\r\n      return new Set<string>();\r\n    }\r\n\r\n    const exemptColumns = new Set<string>();\r\n    outlierConfig.columns.forEach((column) => {\r\n      const normalized = String(column ?? '').trim();\r\n      if (normalized) {\r\n        exemptColumns.add(normalized);\r\n      }\r\n    });\r\n    outlierRecommendations.forEach((insight) => {\r\n      const normalized = String(insight?.column ?? '').trim();\r\n      if (normalized) {\r\n        exemptColumns.add(normalized);\r\n      }\r\n    });\r\n\r\n    const filtered = new Set<string>();\r\n    numericExcludedColumns.forEach((column) => {\r\n      if (!exemptColumns.has(column)) {\r\n        filtered.add(column);\r\n      }\r\n    });\r\n    return filtered;\r\n  }, [isOutlierNode, numericExcludedColumns, outlierConfig.columns, outlierRecommendations]);\r\n\r\n  const outlierOverrideSet = useMemo(\r\n    () => new Set(Object.keys(outlierConfig.columnMethods)),\r\n    [outlierConfig.columnMethods],\r\n  );\r\n\r\n  const outlierMethodLabelMap = useMemo(\r\n    () => createOutlierMethodLabelMap(outlierData?.methods),\r\n    [outlierData?.methods],\r\n  );\r\n\r\n  const outlierMethodDetailMap = useMemo(\r\n    () => createOutlierMethodDetailMap(outlierData?.methods),\r\n    [outlierData?.methods],\r\n  );\r\n\r\n  const outlierRecommendationRows = useMemo(\r\n    () =>\r\n      buildOutlierRecommendationRows({\r\n        insights: outlierRecommendations,\r\n        outlierConfig,\r\n        labelMap: outlierMethodLabelMap,\r\n        selectedColumns: outlierSelectedColumns,\r\n        skippedColumns: outlierSkippedColumns,\r\n        excludedColumns: outlierExcludedColumns,\r\n      }),\r\n    [\r\n      outlierRecommendations,\r\n      outlierConfig,\r\n      outlierMethodLabelMap,\r\n      outlierSelectedColumns,\r\n      outlierSkippedColumns,\r\n      outlierExcludedColumns,\r\n    ],\r\n  );\r\n\r\n  const outlierMethodOptions = useMemo(\r\n    () => createOutlierMethodOptions(outlierMethodLabelMap),\r\n    [outlierMethodLabelMap],\r\n  );\r\n\r\n  const outlierOverrideColumns = useMemo(\r\n    () => Array.from(outlierOverrideSet).sort((a, b) => a.localeCompare(b)),\r\n    [outlierOverrideSet],\r\n  );\r\n  const outlierOverridePreview = useMemo(() => outlierOverrideColumns.slice(0, 4), [outlierOverrideColumns]);\r\n\r\n  const outlierSelectedCount = outlierSelectedColumns.size;\r\n  const outlierOverrideCount = outlierOverrideSet.size;\r\n  const outlierParameterOverrideCount = useMemo(\r\n    () => Object.keys(outlierConfig.columnParameters).length,\r\n    [outlierConfig.columnParameters],\r\n  );\r\n  const outlierAutoDetectEnabled = outlierConfig.autoDetect;\r\n\r\n  const outlierDefaultDetail = useMemo(\r\n    () => outlierMethodDetailMap.get(outlierConfig.defaultMethod) ?? null,\r\n    [outlierConfig.defaultMethod, outlierMethodDetailMap],\r\n  );\r\n\r\n  const outlierDefaultLabel = useMemo(() => {\r\n    const method = outlierConfig.defaultMethod;\r\n    return outlierMethodLabelMap[method] ?? OUTLIER_METHOD_FALLBACK_LABELS[method] ?? method;\r\n  }, [outlierConfig.defaultMethod, outlierMethodLabelMap]);\r\n\r\n  const outlierHasRecommendations = outlierRecommendationRows.length > 0;\r\n\r\n  const outlierAttentionCount = useMemo(\r\n    () =>\r\n      outlierRecommendationRows.filter((row) => {\r\n        if (row.isSkipped || row.isExcluded || !row.isSelected) {\r\n          return false;\r\n        }\r\n        if (!row.recommendedMethod) {\r\n          return false;\r\n        }\r\n        return row.recommendedMethod !== row.currentMethod;\r\n      }).length,\r\n    [outlierRecommendationRows],\r\n  );\r\n\r\n  const outlierConfiguredCount = useMemo(\r\n    () =>\r\n      outlierRecommendationRows.filter(\r\n        (row) => row.isSelected && !row.isSkipped && !row.isExcluded,\r\n      ).length,\r\n    [outlierRecommendationRows],\r\n  );\r\n\r\n  const outlierSkippedCount = useMemo(\r\n    () => outlierRecommendationRows.filter((row) => row.isSkipped && !row.isExcluded).length,\r\n    [outlierRecommendationRows],\r\n  );\r\n\r\n  const outlierStatusMessage = useMemo(() => {\r\n    if (!outlierRecommendationRows.length) {\r\n      return 'No outlier recommendations yetselect numeric columns to evaluate.';\r\n    }\r\n    if (outlierAttentionCount > 0) {\r\n      return `${outlierAttentionCount} column${outlierAttentionCount === 1 ? '' : 's'} need attention. Apply the recommended strategies or adjust manually below.`;\r\n    }\r\n    if (outlierConfiguredCount > 0) {\r\n      return 'All configured columns align with the recommended outlier handling strategies.';\r\n    }\r\n    if (outlierSkippedCount > 0) {\r\n      return 'All outlier recommendations are currently skipped.';\r\n    }\r\n    return 'Review the outlier diagnostics below.';\r\n  }, [outlierAttentionCount, outlierConfiguredCount, outlierRecommendationRows, outlierSkippedCount]);\r\n\r\n  const outlierOverrideExampleSummary = useMemo(\r\n    () =>\r\n      buildOutlierOverrideSummary(\r\n        outlierOverridePreview,\r\n        outlierConfig.columnMethods,\r\n        outlierMethodLabelMap,\r\n        outlierOverrideCount,\r\n      ),\r\n    [\r\n      outlierOverridePreview,\r\n      outlierConfig.columnMethods,\r\n      outlierMethodLabelMap,\r\n      outlierOverrideCount,\r\n    ],\r\n  );\r\n\r\n  return {\r\n    outlierConfig,\r\n    outlierExcludedColumns,\r\n    outlierMethodLabelMap,\r\n    outlierMethodDetailMap,\r\n    outlierMethodOptions,\r\n    outlierRecommendations,\r\n    outlierRecommendationRows,\r\n    outlierSelectedCount,\r\n    outlierOverrideCount,\r\n    outlierParameterOverrideCount,\r\n    outlierDefaultDetail,\r\n    outlierDefaultLabel,\r\n    outlierAutoDetectEnabled,\r\n    outlierHasRecommendations,\r\n    outlierStatusMessage,\r\n    outlierOverrideExampleSummary,\r\n  };\r\n};\r\n","import { useEffect, useMemo, useState } from 'react';\r\nimport type { Dispatch, SetStateAction } from 'react';\r\nimport {\r\n  BINNING_STRATEGY_LABELS,\r\n  buildBinningOverrideSummary,\r\n  normalizeBinningConfigValue,\r\n  type NormalizedBinningConfig,\r\n} from '../nodes/binning/binningSettings';\r\n\r\nexport type UseBinningConfigurationArgs = {\r\n  configState: Record<string, any>;\r\n  nodeId: string;\r\n};\r\n\r\nexport type UseBinningConfigurationResult = {\r\n  binningConfig: NormalizedBinningConfig;\r\n  binningSelectedCount: number;\r\n  binningDefaultLabel: string;\r\n  binningOverrideColumns: string[];\r\n  binningOverrideCount: number;\r\n  binningOverrideSummary: string | null;\r\n  fieldIds: {\r\n    equalWidth: string;\r\n    equalFrequency: string;\r\n    precision: string;\r\n    suffix: string;\r\n    missingLabel: string;\r\n    includeLowest: string;\r\n    dropOriginal: string;\r\n    labelFormat: string;\r\n    duplicates: string;\r\n    kbinsNBins: string;\r\n    kbinsEncode: string;\r\n    kbinsStrategy: string;\r\n  };\r\n  customEdgeDrafts: Record<string, string>;\r\n  setCustomEdgeDrafts: Dispatch<SetStateAction<Record<string, string>>>;\r\n  customLabelDrafts: Record<string, string>;\r\n  setCustomLabelDrafts: Dispatch<SetStateAction<Record<string, string>>>;\r\n};\r\n\r\nexport const useBinningConfiguration = ({\r\n  configState,\r\n  nodeId,\r\n}: UseBinningConfigurationArgs): UseBinningConfigurationResult => {\r\n  const binningConfig = useMemo<NormalizedBinningConfig>(\r\n    () => normalizeBinningConfigValue(configState),\r\n    [configState],\r\n  );\r\n\r\n  const binningSelectedCount = binningConfig.columns.length;\r\n  const binningDefaultLabel = BINNING_STRATEGY_LABELS[binningConfig.strategy] ?? binningConfig.strategy;\r\n\r\n  const binningOverrideColumns = useMemo(\r\n    () =>\r\n      Object.keys(binningConfig.columnStrategies)\r\n        .map((column) => column.trim())\r\n        .filter(Boolean)\r\n        .sort((a, b) => a.localeCompare(b)),\r\n    [binningConfig.columnStrategies],\r\n  );\r\n\r\n  const binningOverrideCount = binningOverrideColumns.length;\r\n\r\n  const binningOverrideSummary = useMemo(() => {\r\n    if (!binningOverrideColumns.length) {\r\n      return null;\r\n    }\r\n    const preview = binningOverrideColumns.slice(0, 4);\r\n    return buildBinningOverrideSummary(preview, binningConfig.columnStrategies, binningOverrideCount);\r\n  }, [binningConfig.columnStrategies, binningOverrideColumns, binningOverrideCount]);\r\n\r\n  const fieldPrefix = useMemo(() => `binning-${nodeId || 'node'}`, [nodeId]);\r\n\r\n  const fieldIds = useMemo(\r\n    () => ({\r\n      equalWidth: `${fieldPrefix}-equal-width-bins`,\r\n      equalFrequency: `${fieldPrefix}-equal-frequency-bins`,\r\n      precision: `${fieldPrefix}-precision`,\r\n      suffix: `${fieldPrefix}-suffix`,\r\n      missingLabel: `${fieldPrefix}-missing-label`,\r\n      includeLowest: `${fieldPrefix}-include-lowest`,\r\n      dropOriginal: `${fieldPrefix}-drop-original`,\r\n      labelFormat: `${fieldPrefix}-label-format`,\r\n      duplicates: `${fieldPrefix}-duplicates`,\r\n      kbinsNBins: `${fieldPrefix}-kbins-n-bins`,\r\n      kbinsEncode: `${fieldPrefix}-kbins-encode`,\r\n      kbinsStrategy: `${fieldPrefix}-kbins-strategy`,\r\n    }),\r\n    [fieldPrefix],\r\n  );\r\n\r\n  const [customEdgeDrafts, setCustomEdgeDrafts] = useState<Record<string, string>>({});\r\n  const [customLabelDrafts, setCustomLabelDrafts] = useState<Record<string, string>>({});\r\n\r\n  useEffect(() => {\r\n    setCustomEdgeDrafts((previous) => {\r\n      const activeColumns = new Set<string>();\r\n      const next: Record<string, string> = { ...previous };\r\n\r\n      binningConfig.columns.forEach((column) => {\r\n        const normalized = String(column ?? '').trim();\r\n        if (!normalized) {\r\n          return;\r\n        }\r\n        activeColumns.add(normalized);\r\n        if (Object.prototype.hasOwnProperty.call(next, normalized)) {\r\n          return;\r\n        }\r\n        const configured = binningConfig.customBins[normalized] ?? [];\r\n        next[normalized] = configured.length >= 2 ? configured.join(', ') : '';\r\n      });\r\n\r\n      Object.keys(next).forEach((key) => {\r\n        if (!activeColumns.has(key)) {\r\n          delete next[key];\r\n        }\r\n      });\r\n\r\n      return next;\r\n    });\r\n  }, [binningConfig.columns, binningConfig.customBins]);\r\n\r\n  useEffect(() => {\r\n    setCustomLabelDrafts((previous) => {\r\n      const activeColumns = new Set<string>();\r\n      const next: Record<string, string> = { ...previous };\r\n\r\n      binningConfig.columns.forEach((column) => {\r\n        const normalized = String(column ?? '').trim();\r\n        if (!normalized) {\r\n          return;\r\n        }\r\n        activeColumns.add(normalized);\r\n        if (Object.prototype.hasOwnProperty.call(next, normalized)) {\r\n          return;\r\n        }\r\n        const configured = binningConfig.customLabels[normalized] ?? [];\r\n        next[normalized] = configured.length > 0 ? configured.join(', ') : '';\r\n      });\r\n\r\n      Object.keys(next).forEach((key) => {\r\n        if (!activeColumns.has(key)) {\r\n          delete next[key];\r\n        }\r\n      });\r\n\r\n      return next;\r\n    });\r\n  }, [binningConfig.columns, binningConfig.customLabels]);\r\n\r\n  return {\r\n    binningConfig,\r\n    binningSelectedCount,\r\n    binningDefaultLabel,\r\n    binningOverrideColumns,\r\n    binningOverrideCount,\r\n    binningOverrideSummary,\r\n    fieldIds,\r\n    customEdgeDrafts,\r\n    setCustomEdgeDrafts,\r\n    customLabelDrafts,\r\n    setCustomLabelDrafts,\r\n  };\r\n};\r\n","import { useMemo } from 'react';\r\nimport { ensureArrayOfString } from '../sharedUtils';\r\nimport type {\r\n  ImputationStrategyConfig,\r\n  ImputerColumnOption,\r\n} from '../nodes/imputation/imputationSettings';\r\n\r\nexport type UseImputationConfigurationArgs = {\r\n  isImputerNode: boolean;\r\n  imputerStrategies: ImputationStrategyConfig[];\r\n  availableColumns: string[];\r\n  columnMissingMap: Record<string, number>;\r\n  previewColumns: string[];\r\n  previewColumnStats: any[] | null | undefined;\r\n  nodeColumns: any;\r\n  imputerMissingFilter: number;\r\n};\r\n\r\nexport type UseImputationConfigurationResult = {\r\n  imputerColumnOptions: ImputerColumnOption[];\r\n  imputerMissingSliderMax: number;\r\n  imputerFilteredOptionCount: number;\r\n  imputerMissingFilterActive: boolean;\r\n};\r\n\r\nexport const useImputationConfiguration = ({\r\n  isImputerNode,\r\n  imputerStrategies,\r\n  availableColumns,\r\n  columnMissingMap,\r\n  previewColumns,\r\n  previewColumnStats,\r\n  nodeColumns,\r\n  imputerMissingFilter,\r\n}: UseImputationConfigurationArgs): UseImputationConfigurationResult => {\r\n  const imputerColumnOptions = useMemo<ImputerColumnOption[]>(() => {\r\n    if (!isImputerNode) {\r\n      return [];\r\n    }\r\n\r\n    const previewColumnSet = previewColumns.length\r\n      ? new Set(\r\n          previewColumns\r\n            .map((column) => (typeof column === 'string' ? column.trim() : ''))\r\n            .filter((column) => column.length > 0),\r\n        )\r\n      : null;\r\n\r\n    const requiredColumns = new Set<string>();\r\n    imputerStrategies.forEach((strategy) => {\r\n      strategy.columns.forEach((column) => {\r\n        const normalized = typeof column === 'string' ? column.trim() : '';\r\n        if (normalized) {\r\n          requiredColumns.add(normalized);\r\n        }\r\n      });\r\n    });\r\n    ensureArrayOfString(nodeColumns).forEach((column) => {\r\n      if (column) {\r\n        requiredColumns.add(column);\r\n      }\r\n    });\r\n\r\n    const shouldExcludeColumn = (name: string) => {\r\n      if (!previewColumnSet || previewColumnSet.size === 0) {\r\n        return false;\r\n      }\r\n      return !previewColumnSet.has(name) && !requiredColumns.has(name);\r\n    };\r\n\r\n    type OptionAggregate = {\r\n      missingPercentage: number | null;\r\n      dtype?: string | null;\r\n      mean?: number | null;\r\n      median?: number | null;\r\n      mode?: string | number | null;\r\n    };\r\n\r\n    const optionMap = new Map<string, OptionAggregate>();\r\n\r\n    const registerColumn = (name?: string | null, updates?: Partial<OptionAggregate>) => {\r\n      const normalized = typeof name === 'string' ? name.trim() : '';\r\n      if (!normalized) {\r\n        return;\r\n      }\r\n\r\n      if (shouldExcludeColumn(normalized)) {\r\n        return;\r\n      }\r\n\r\n      const entry = optionMap.get(normalized) ?? {\r\n        missingPercentage: null,\r\n        dtype: undefined,\r\n        mean: null,\r\n        median: null,\r\n        mode: null,\r\n      };\r\n\r\n      if (updates) {\r\n        if (typeof updates.missingPercentage === 'number' && !Number.isNaN(updates.missingPercentage)) {\r\n          entry.missingPercentage = Math.max(0, updates.missingPercentage);\r\n        }\r\n        if (updates.dtype !== undefined) {\r\n          entry.dtype = updates.dtype;\r\n        }\r\n        if (typeof updates.mean === 'number' && !Number.isNaN(updates.mean)) {\r\n          entry.mean = updates.mean;\r\n        }\r\n        if (typeof updates.median === 'number' && !Number.isNaN(updates.median)) {\r\n          entry.median = updates.median;\r\n        }\r\n        if (updates.mode !== undefined && updates.mode !== null && updates.mode !== '') {\r\n          entry.mode = updates.mode;\r\n        }\r\n      }\r\n\r\n      optionMap.set(normalized, entry);\r\n    };\r\n\r\n    availableColumns.forEach((column) => {\r\n      const missingValue = Object.prototype.hasOwnProperty.call(columnMissingMap, column)\r\n        ? columnMissingMap[column]\r\n        : null;\r\n      registerColumn(column, {\r\n        missingPercentage: typeof missingValue === 'number' ? missingValue : null,\r\n      });\r\n    });\r\n\r\n    const statsArray = Array.isArray(previewColumnStats) ? previewColumnStats : [];\r\n    statsArray.forEach((stat) => {\r\n      if (!stat || !stat.name) {\r\n        return;\r\n      }\r\n      registerColumn(stat.name, {\r\n        missingPercentage: typeof stat.missing_percentage === 'number' ? stat.missing_percentage : null,\r\n        dtype: stat.dtype ?? null,\r\n        mean: typeof stat.mean === 'number' ? stat.mean : null,\r\n        median: typeof stat.median === 'number' ? stat.median : null,\r\n        mode: stat.mode ?? null,\r\n      });\r\n    });\r\n\r\n    ensureArrayOfString(nodeColumns).forEach((column) => registerColumn(column));\r\n\r\n    imputerStrategies.forEach((strategy) => {\r\n      strategy.columns.forEach((column) => registerColumn(column));\r\n    });\r\n\r\n    const entries = Array.from(optionMap.entries()).map(([name, aggregate]) => ({\r\n      name,\r\n      missingPercentage:\r\n        typeof aggregate.missingPercentage === 'number' && !Number.isNaN(aggregate.missingPercentage)\r\n          ? Math.max(0, aggregate.missingPercentage)\r\n          : null,\r\n      dtype: aggregate.dtype ?? null,\r\n      mean: typeof aggregate.mean === 'number' && !Number.isNaN(aggregate.mean) ? aggregate.mean : null,\r\n      median: typeof aggregate.median === 'number' && !Number.isNaN(aggregate.median) ? aggregate.median : null,\r\n      mode:\r\n        aggregate.mode !== undefined && aggregate.mode !== null && aggregate.mode !== '' ? aggregate.mode : null,\r\n    }));\r\n\r\n    entries.sort((a, b) => {\r\n      const aHasMissing = typeof a.missingPercentage === 'number';\r\n      const bHasMissing = typeof b.missingPercentage === 'number';\r\n\r\n      if (aHasMissing && bHasMissing && a.missingPercentage !== b.missingPercentage) {\r\n        return (b.missingPercentage as number) - (a.missingPercentage as number);\r\n      }\r\n\r\n      if (aHasMissing !== bHasMissing) {\r\n        return aHasMissing ? -1 : 1;\r\n      }\r\n\r\n      return a.name.localeCompare(b.name);\r\n    });\r\n\r\n    return entries;\r\n  }, [\r\n    availableColumns,\r\n    columnMissingMap,\r\n    imputerStrategies,\r\n    nodeColumns,\r\n    previewColumnStats,\r\n    previewColumns,\r\n    isImputerNode,\r\n  ]);\r\n\r\n  const imputerMissingSliderMax = useMemo(() => {\r\n    if (!imputerColumnOptions.length) {\r\n      return 100;\r\n    }\r\n    const highest = imputerColumnOptions.reduce((max, option) => {\r\n      const value = typeof option.missingPercentage === 'number' ? option.missingPercentage : 0;\r\n      return value > max ? value : max;\r\n    }, 0);\r\n    const normalized = Math.ceil(highest / 5) * 5;\r\n    return Math.max(100, normalized || 0);\r\n  }, [imputerColumnOptions]);\r\n\r\n  const imputerFilteredOptionCount = useMemo(() => {\r\n    if (!imputerColumnOptions.length) {\r\n      return 0;\r\n    }\r\n    return imputerColumnOptions.reduce((count, option) => {\r\n      const value = typeof option.missingPercentage === 'number' ? option.missingPercentage : null;\r\n      if (value !== null) {\r\n        if (value <= 0) {\r\n          return count;\r\n        }\r\n        return value >= imputerMissingFilter ? count + 1 : count;\r\n      }\r\n      return imputerMissingFilter === 0 ? count + 1 : count;\r\n    }, 0);\r\n  }, [imputerColumnOptions, imputerMissingFilter]);\r\n\r\n  const imputerMissingFilterActive = imputerMissingFilter > 0;\r\n\r\n  return {\r\n    imputerColumnOptions,\r\n    imputerMissingSliderMax,\r\n    imputerFilteredOptionCount,\r\n    imputerMissingFilterActive,\r\n  };\r\n};\r\n","import { useEffect, useMemo } from 'react';\r\nimport type { Dispatch, SetStateAction } from 'react';\r\nimport { ensureArrayOfString } from '../sharedUtils';\r\nimport type { FeatureNodeParameterOption } from '../../../api';\r\nimport type { FeatureTargetSplitConfig } from '../nodes/modeling/FeatureTargetSplitSection';\r\nimport type { TrainTestSplitConfig } from '../nodes/modeling/TrainTestSplitSection';\r\nimport type { TrainModelDraftConfig } from '../nodes/modeling/TrainModelDraftSection';\r\nimport type { TrainModelRuntimeConfig } from '../nodes/modeling/ModelTrainingSection';\r\nimport type { ClassResamplingConfig } from '../nodes/resampling/ClassResamplingSection';\r\n\r\nexport type TrainModelCVConfig = {\r\n  enabled: boolean;\r\n  strategy: 'auto' | 'kfold' | 'stratified_kfold';\r\n  folds: number;\r\n  shuffle: boolean;\r\n  randomState: number | null;\r\n  refitStrategy: 'train_only' | 'train_plus_validation';\r\n};\r\n\r\nexport type UseModelingConfigurationArgs = {\r\n  configState: Record<string, any>;\r\n  setConfigState: Dispatch<SetStateAction<Record<string, any>>>;\r\n  isFeatureTargetSplitNode: boolean;\r\n  isTrainTestSplitNode: boolean;\r\n  isTrainModelDraftNode: boolean;\r\n  isHyperparameterTuningNode: boolean;\r\n  isClassResamplingNode: boolean;\r\n  isClassOversamplingNode: boolean;\r\n  isClassUndersamplingNode: boolean;\r\n  upstreamTargetColumn: string;\r\n  nodeId: string;\r\n  modelTypeOptions?: FeatureNodeParameterOption[] | null;\r\n};\r\n\r\nexport type UseModelingConfigurationResult = {\r\n  featureTargetSplitConfig: FeatureTargetSplitConfig | null;\r\n  trainTestSplitConfig: TrainTestSplitConfig | null;\r\n  resamplingConfig: ClassResamplingConfig;\r\n  trainModelDraftConfig: TrainModelDraftConfig | null;\r\n  trainModelRuntimeConfig: TrainModelRuntimeConfig | null;\r\n  trainModelCVConfig: TrainModelCVConfig;\r\n  filteredModelTypeOptions: FeatureNodeParameterOption[];\r\n};\r\n\r\nexport const useModelingConfiguration = ({\r\n  configState,\r\n  setConfigState,\r\n  isFeatureTargetSplitNode,\r\n  isTrainTestSplitNode,\r\n  isTrainModelDraftNode,\r\n  isHyperparameterTuningNode,\r\n  isClassResamplingNode,\r\n  isClassOversamplingNode,\r\n  isClassUndersamplingNode,\r\n  upstreamTargetColumn,\r\n  nodeId,\r\n  modelTypeOptions,\r\n}: UseModelingConfigurationArgs): UseModelingConfigurationResult => {\r\n  const isModelingNode = isTrainModelDraftNode || isHyperparameterTuningNode;\r\n\r\n  const featureTargetSplitConfig = useMemo<FeatureTargetSplitConfig | null>(() => {\r\n    if (!isFeatureTargetSplitNode) {\r\n      return null;\r\n    }\r\n    const targetColumn =\r\n      typeof configState?.target_column === 'string' ? configState.target_column.trim() : '';\r\n    const featureColumns = ensureArrayOfString(configState?.feature_columns)\r\n      .map((value) => (typeof value === 'string' ? value.trim() : ''))\r\n      .filter((value) => Boolean(value));\r\n    return {\r\n      targetColumn,\r\n      featureColumns,\r\n    };\r\n  }, [configState?.feature_columns, configState?.target_column, isFeatureTargetSplitNode]);\r\n\r\n  const trainTestSplitConfig = useMemo<TrainTestSplitConfig | null>(() => {\r\n    if (!isTrainTestSplitNode) {\r\n      return null;\r\n    }\r\n    const test_size = typeof configState?.test_size === 'number' ? configState.test_size : 0.2;\r\n    const validation_size =\r\n      typeof configState?.validation_size === 'number' ? configState.validation_size : 0.0;\r\n    const random_state =\r\n      typeof configState?.random_state === 'number' ? configState.random_state : 42;\r\n    const shuffle = typeof configState?.shuffle === 'boolean' ? configState.shuffle : true;\r\n    const stratify = typeof configState?.stratify === 'boolean' ? configState.stratify : false;\r\n    const target_column =\r\n      typeof configState?.target_column === 'string' ? configState.target_column.trim() : '';\r\n\r\n    return {\r\n      test_size,\r\n      validation_size,\r\n      random_state,\r\n      shuffle,\r\n      stratify,\r\n      target_column,\r\n    };\r\n  }, [\r\n    configState?.random_state,\r\n    configState?.shuffle,\r\n    configState?.stratify,\r\n    configState?.target_column,\r\n    configState?.test_size,\r\n    configState?.validation_size,\r\n    isTrainTestSplitNode,\r\n  ]);\r\n\r\n  const resamplingConfig = useMemo<ClassResamplingConfig>(() => {\r\n    if (!isClassResamplingNode) {\r\n      return null;\r\n    }\r\n\r\n    const method = typeof configState?.method === 'string' ? configState.method.trim() : '';\r\n    const targetColumn =\r\n      typeof configState?.target_column === 'string' ? configState.target_column.trim() : '';\r\n\r\n    const rawSampling = configState?.sampling_strategy;\r\n    let samplingStrategy: number | string | null = null;\r\n    if (typeof rawSampling === 'number' && Number.isFinite(rawSampling)) {\r\n      samplingStrategy = rawSampling;\r\n    } else if (typeof rawSampling === 'string') {\r\n      const trimmed = rawSampling.trim();\r\n      samplingStrategy = trimmed ? trimmed : null;\r\n    } else if (rawSampling === null) {\r\n      samplingStrategy = null;\r\n    }\r\n\r\n    const rawRandomState = configState?.random_state;\r\n    let randomState: number | null = null;\r\n    if (typeof rawRandomState === 'number' && Number.isFinite(rawRandomState)) {\r\n      randomState = rawRandomState;\r\n    } else if (typeof rawRandomState === 'string') {\r\n      const parsed = Number(rawRandomState);\r\n      randomState = Number.isFinite(parsed) ? parsed : null;\r\n    }\r\n\r\n    let replacement: boolean | null = null;\r\n    if (isClassUndersamplingNode) {\r\n      const rawReplacement = configState?.replacement;\r\n      replacement =\r\n        typeof rawReplacement === 'boolean'\r\n          ? rawReplacement\r\n          : typeof rawReplacement === 'string'\r\n            ? rawReplacement.trim().toLowerCase() === 'true'\r\n            : Boolean(rawReplacement);\r\n    }\r\n\r\n    let kNeighbors: number | null = null;\r\n    if (isClassOversamplingNode) {\r\n      const rawK = configState?.k_neighbors;\r\n      if (typeof rawK === 'number' && Number.isFinite(rawK)) {\r\n        kNeighbors = Math.max(1, Math.round(rawK));\r\n      } else if (typeof rawK === 'string') {\r\n        const parsed = Number(rawK);\r\n        if (Number.isFinite(parsed)) {\r\n          kNeighbors = Math.max(1, Math.round(parsed));\r\n        }\r\n      }\r\n    }\r\n\r\n    return {\r\n      method,\r\n      targetColumn,\r\n      samplingStrategy,\r\n      randomState,\r\n      replacement,\r\n      kNeighbors,\r\n    };\r\n  }, [\r\n    configState?.k_neighbors,\r\n    configState?.method,\r\n    configState?.random_state,\r\n    configState?.replacement,\r\n    configState?.sampling_strategy,\r\n    configState?.target_column,\r\n    isClassOversamplingNode,\r\n    isClassResamplingNode,\r\n    isClassUndersamplingNode,\r\n  ]);\r\n\r\n  const rawProblemType =\r\n    typeof configState?.problem_type === 'string'\r\n      ? configState.problem_type.trim().toLowerCase()\r\n      : '';\r\n\r\n  const normalizedProblemType: 'classification' | 'regression' =\r\n    rawProblemType === 'regression' ? 'regression' : 'classification';\r\n\r\n  const availableModelTypeOptions = useMemo<FeatureNodeParameterOption[]>(() => {\r\n    if (!Array.isArray(modelTypeOptions)) {\r\n      return [];\r\n    }\r\n    return modelTypeOptions.filter((option) => option && typeof option.value === 'string');\r\n  }, [modelTypeOptions]);\r\n\r\n  const modelTypeBuckets = useMemo(() => {\r\n    const buckets: Record<'classification' | 'regression', FeatureNodeParameterOption[]> = {\r\n      classification: [],\r\n      regression: [],\r\n    };\r\n\r\n    availableModelTypeOptions.forEach((option) => {\r\n      const metadataType = String(option?.metadata?.problem_type ?? '').trim().toLowerCase();\r\n      if (metadataType === 'regression') {\r\n        buckets.regression.push(option);\r\n      } else if (metadataType === 'classification') {\r\n        buckets.classification.push(option);\r\n      } else {\r\n        buckets.classification.push(option);\r\n        buckets.regression.push(option);\r\n      }\r\n    });\r\n\r\n    return buckets;\r\n  }, [availableModelTypeOptions]);\r\n\r\n  const filteredModelTypeOptions = useMemo(() => {\r\n    if (!availableModelTypeOptions.length) {\r\n      return [];\r\n    }\r\n\r\n    const bucket = normalizedProblemType === 'regression'\r\n      ? modelTypeBuckets.regression\r\n      : modelTypeBuckets.classification;\r\n\r\n    if (bucket.length > 0) {\r\n      return bucket;\r\n    }\r\n\r\n    return availableModelTypeOptions;\r\n  }, [availableModelTypeOptions, modelTypeBuckets, normalizedProblemType]);\r\n\r\n  const trainModelDraftConfig = useMemo<TrainModelDraftConfig | null>(() => {\r\n    if (!isModelingNode) {\r\n      return null;\r\n    }\r\n    const targetColumn =\r\n      typeof configState?.target_column === 'string' ? configState.target_column.trim() : '';\r\n    return {\r\n      targetColumn,\r\n      problemType: normalizedProblemType,\r\n    };\r\n  }, [configState?.target_column, isModelingNode, normalizedProblemType]);\r\n\r\n  const trainModelCVConfig = useMemo<TrainModelCVConfig>(() => {\r\n    if (!isModelingNode) {\r\n      return {\r\n        enabled: false,\r\n        strategy: 'auto',\r\n        folds: 5,\r\n        shuffle: true,\r\n        randomState: 42,\r\n        refitStrategy: 'train_plus_validation',\r\n      };\r\n    }\r\n\r\n    const enabled = configState?.cv_enabled === undefined\r\n      ? Boolean(isHyperparameterTuningNode)\r\n      : Boolean(configState.cv_enabled);\r\n\r\n    const rawStrategy =\r\n      typeof configState?.cv_strategy === 'string'\r\n        ? configState.cv_strategy.trim().toLowerCase()\r\n        : 'auto';\r\n    const strategy: TrainModelCVConfig['strategy'] = (['auto', 'kfold', 'stratified_kfold'] as const).includes(\r\n      rawStrategy as TrainModelCVConfig['strategy'],\r\n    )\r\n      ? (rawStrategy as TrainModelCVConfig['strategy'])\r\n      : 'auto';\r\n\r\n    const foldsValue = Number(configState?.cv_folds);\r\n    const folds = Number.isFinite(foldsValue) && foldsValue >= 2 ? Math.floor(foldsValue) : 5;\r\n\r\n    const shuffle = configState?.cv_shuffle === undefined ? true : Boolean(configState.cv_shuffle);\r\n\r\n    let randomState: number | null = null;\r\n    if (typeof configState?.cv_random_state === 'number' && Number.isFinite(configState.cv_random_state)) {\r\n      randomState = Math.trunc(configState.cv_random_state);\r\n    } else if (typeof configState?.cv_random_state === 'string') {\r\n      const parsed = Number(configState.cv_random_state.trim());\r\n      randomState = Number.isFinite(parsed) ? Math.trunc(parsed) : null;\r\n    }\r\n\r\n    const rawRefit =\r\n      typeof configState?.cv_refit_strategy === 'string'\r\n        ? configState.cv_refit_strategy.trim().toLowerCase()\r\n        : 'train_plus_validation';\r\n    const refitStrategy: TrainModelCVConfig['refitStrategy'] =\r\n      rawRefit === 'train_only' ? 'train_only' : 'train_plus_validation';\r\n\r\n    return {\r\n      enabled,\r\n      strategy,\r\n      folds,\r\n      shuffle,\r\n      randomState,\r\n      refitStrategy,\r\n    };\r\n  }, [configState?.cv_enabled, configState?.cv_folds, configState?.cv_random_state, configState?.cv_refit_strategy, configState?.cv_shuffle, configState?.cv_strategy, isHyperparameterTuningNode, isModelingNode]);\r\n\r\n  useEffect(() => {\r\n    if (!isModelingNode) {\r\n      return;\r\n    }\r\n\r\n    if (rawProblemType === normalizedProblemType) {\r\n      return;\r\n    }\r\n\r\n    setConfigState((previous) => ({\r\n      ...previous,\r\n      problem_type: normalizedProblemType,\r\n    }));\r\n  }, [\r\n    isModelingNode,\r\n    normalizedProblemType,\r\n    rawProblemType,\r\n    setConfigState,\r\n  ]);\r\n\r\n  useEffect(() => {\r\n    if (!isModelingNode) {\r\n      return;\r\n    }\r\n\r\n    if (!filteredModelTypeOptions.length) {\r\n      return;\r\n    }\r\n\r\n    const allowedValues = new Set(filteredModelTypeOptions.map((option) => option.value));\r\n    const currentModelType =\r\n      typeof configState?.model_type === 'string' ? configState.model_type.trim() : '';\r\n\r\n    if (currentModelType && allowedValues.has(currentModelType)) {\r\n      return;\r\n    }\r\n\r\n    const fallbackModelType = filteredModelTypeOptions[0]?.value ?? '';\r\n    if (!fallbackModelType) {\r\n      return;\r\n    }\r\n\r\n    setConfigState((previous) => {\r\n      const previousValue =\r\n        typeof previous?.model_type === 'string' ? previous.model_type.trim() : '';\r\n      if (previousValue && allowedValues.has(previousValue)) {\r\n        return previous;\r\n      }\r\n      if (previousValue === fallbackModelType) {\r\n        return previous;\r\n      }\r\n\r\n      return {\r\n        ...previous,\r\n        model_type: fallbackModelType,\r\n      };\r\n    });\r\n  }, [\r\n    configState?.model_type,\r\n    filteredModelTypeOptions,\r\n    isModelingNode,\r\n    setConfigState,\r\n  ]);\r\n\r\n  const trainModelRuntimeConfig = useMemo<TrainModelRuntimeConfig | null>(() => {\r\n    if (!isModelingNode) {\r\n      return null;\r\n    }\r\n\r\n    const rawModelType =\r\n      typeof configState?.model_type === 'string' ? configState.model_type.trim() : '';\r\n\r\n    const rawHyperparameters = configState?.hyperparameters;\r\n    let hyperparameters: Record<string, any> | null = null;\r\n    let hyperparametersError: string | null = null;\r\n\r\n    if (rawHyperparameters && typeof rawHyperparameters === 'string') {\r\n      const trimmed = rawHyperparameters.trim();\r\n      if (trimmed.length) {\r\n        try {\r\n          const parsed = JSON.parse(trimmed);\r\n          if (parsed && typeof parsed === 'object' && !Array.isArray(parsed)) {\r\n            hyperparameters = parsed as Record<string, any>;\r\n          } else {\r\n            hyperparametersError = 'Hyperparameters JSON must be an object.';\r\n          }\r\n        } catch (error) {\r\n          hyperparametersError = 'Hyperparameters JSON is invalid. Provide a valid JSON object.';\r\n        }\r\n      }\r\n    } else if (\r\n      rawHyperparameters &&\r\n      typeof rawHyperparameters === 'object' &&\r\n      !Array.isArray(rawHyperparameters)\r\n    ) {\r\n      hyperparameters = rawHyperparameters as Record<string, any>;\r\n    }\r\n\r\n    return {\r\n      modelType: rawModelType || null,\r\n      hyperparameters,\r\n      hyperparametersError,\r\n    };\r\n  }, [configState?.hyperparameters, configState?.model_type, isModelingNode]);\r\n\r\n  useEffect(() => {\r\n    if (!(isTrainTestSplitNode || isTrainModelDraftNode || isHyperparameterTuningNode)) {\r\n      return;\r\n    }\r\n\r\n    if (!upstreamTargetColumn) {\r\n      return;\r\n    }\r\n\r\n    if (isTrainTestSplitNode && configState?.stratify !== true) {\r\n      return;\r\n    }\r\n\r\n    setConfigState((previous) => {\r\n      const existingTarget =\r\n        typeof previous?.target_column === 'string' ? previous.target_column.trim() : '';\r\n      if (existingTarget) {\r\n        return previous;\r\n      }\r\n\r\n      return {\r\n        ...previous,\r\n        target_column: upstreamTargetColumn,\r\n      };\r\n    });\r\n  }, [\r\n    configState?.stratify,\r\n    isHyperparameterTuningNode,\r\n    isTrainModelDraftNode,\r\n    isTrainTestSplitNode,\r\n    nodeId,\r\n    setConfigState,\r\n    upstreamTargetColumn,\r\n  ]);\r\n\r\n  return {\r\n    featureTargetSplitConfig,\r\n    trainTestSplitConfig,\r\n    resamplingConfig,\r\n    trainModelDraftConfig,\r\n    trainModelRuntimeConfig,\r\n    trainModelCVConfig,\r\n    filteredModelTypeOptions,\r\n  };\r\n};\r\n","import { useCallback, useEffect, useMemo, useState } from 'react';\r\nimport type { Dispatch, SetStateAction } from 'react';\r\nimport type {\r\n  SkewnessColumnDistribution,\r\n  SkewnessColumnRecommendation,\r\n  SkewnessMethodStatus,\r\n  SkewnessRecommendationsResponse,\r\n} from '../../../api';\r\nimport {\r\n  buildSkewnessRows,\r\n  buildSkewnessTableGroups,\r\n  createSkewnessMethodLabelMap,\r\n  isSkewnessTransformationMethod,\r\n  SKEWNESS_DIRECTION_LABEL,\r\n  type SkewnessTableGroup,\r\n  type SkewnessTableRow,\r\n  type SkewnessTransformationConfig,\r\n  type SkewnessTransformationMethod,\r\n  type SkewnessViewMode,\r\n} from '../nodes/skewness/skewnessSettings';\r\n\r\nconst NUMERIC_TYPE_TOKENS = ['int', 'float', 'double', 'numeric', 'number'];\r\n\r\nconst isNumericType = (dtype?: string | null): boolean => {\r\n  if (!dtype) {\r\n    return false;\r\n  }\r\n  const normalized = dtype.toLowerCase();\r\n  return NUMERIC_TYPE_TOKENS.some((token) => normalized.includes(token));\r\n};\r\n\r\nexport type SkewnessDistributionView = 'before' | 'after';\r\n\r\nexport type SkewnessDistributionCard = {\r\n  column: string;\r\n  skewness: number | null;\r\n  magnitudeLabel: string | null;\r\n  directionLabel: string | null;\r\n  summary: string | null;\r\n  recommendedLabel: string | null;\r\n  appliedLabel: string | null;\r\n  distributionBefore: SkewnessColumnDistribution;\r\n  distributionAfter: SkewnessColumnDistribution | null;\r\n};\r\n\r\nexport type UseSkewnessConfigurationArgs = {\r\n  skewnessData: SkewnessRecommendationsResponse | null;\r\n  shouldLoadInsights: boolean;\r\n  skewnessTransformations: SkewnessTransformationConfig[];\r\n  availableColumns: string[];\r\n  previewColumns: string[];\r\n  columnTypeMap: Record<string, string>;\r\n  updateSkewnessTransformations: (\r\n    updater: (current: SkewnessTransformationConfig[]) => SkewnessTransformationConfig[],\r\n  ) => void;\r\n};\r\n\r\nexport type UseSkewnessConfigurationResult = {\r\n  skewnessThreshold: number | null;\r\n  skewnessViewMode: SkewnessViewMode;\r\n  setSkewnessViewMode: Dispatch<SetStateAction<SkewnessViewMode>>;\r\n  skewnessGroupByMethod: boolean;\r\n  setSkewnessGroupByMethod: Dispatch<SetStateAction<boolean>>;\r\n  skewnessDistributionView: SkewnessDistributionView;\r\n  setSkewnessDistributionView: Dispatch<SetStateAction<SkewnessDistributionView>>;\r\n  skewnessRecommendedCount: number;\r\n  skewnessNumericCount: number;\r\n  skewnessTransformationsCount: number;\r\n  hasSkewnessAutoRecommendations: boolean;\r\n  skewnessRows: SkewnessTableRow[];\r\n  skewnessTableGroups: SkewnessTableGroup[];\r\n  skewnessDistributionCards: SkewnessDistributionCard[];\r\n  getSkewnessMethodLabel: (method: SkewnessTransformationMethod) => string;\r\n  getSkewnessMethodStatus: (\r\n    column: string,\r\n    method: SkewnessTransformationMethod,\r\n  ) => SkewnessMethodStatus | { status: 'ready'; reason?: string };\r\n  applySkewnessRecommendations: () => void;\r\n  handleSkewnessOverrideChange: (column: string, nextValue: string) => void;\r\n  clearSkewnessTransformations: () => void;\r\n};\r\n\r\nexport const useSkewnessConfiguration = ({\r\n  skewnessData,\r\n  shouldLoadInsights,\r\n  skewnessTransformations,\r\n  availableColumns,\r\n  previewColumns,\r\n  columnTypeMap,\r\n  updateSkewnessTransformations,\r\n}: UseSkewnessConfigurationArgs): UseSkewnessConfigurationResult => {\r\n  const [skewnessViewMode, setSkewnessViewMode] = useState<SkewnessViewMode>('recommended');\r\n  const [skewnessGroupByMethod, setSkewnessGroupByMethod] = useState(false);\r\n  const [skewnessDistributionView, setSkewnessDistributionView] =\r\n    useState<SkewnessDistributionView>('before');\r\n\r\n  const skewnessTransformationsCount = skewnessTransformations.length;\r\n\r\n  const skewnessMethods = useMemo(\r\n    () => (skewnessData?.methods ? [...skewnessData.methods] : []),\r\n    [skewnessData?.methods],\r\n  );\r\n\r\n  const skewnessMethodLabelMap = useMemo(\r\n    () => createSkewnessMethodLabelMap(skewnessMethods),\r\n    [skewnessMethods],\r\n  );\r\n\r\n  const skewnessRecommendations = useMemo(\r\n    () => (skewnessData?.columns ? [...skewnessData.columns] : []),\r\n    [skewnessData?.columns],\r\n  );\r\n\r\n  const skewnessColumnMap = useMemo(() => {\r\n    const map = new Map<string, SkewnessColumnRecommendation>();\r\n    skewnessRecommendations.forEach((item) => {\r\n      if (item && item.column) {\r\n        map.set(item.column, item);\r\n      }\r\n    });\r\n    return map;\r\n  }, [skewnessRecommendations]);\r\n\r\n  const skewnessColumnOptions = useMemo(() => {\r\n    const entries = new Set<string>();\r\n    skewnessRecommendations.forEach((item) => {\r\n      if (item?.column) {\r\n        entries.add(item.column);\r\n      }\r\n    });\r\n    // Only include numeric columns from availableColumns and previewColumns\r\n    availableColumns.forEach((column) => {\r\n      if (column && isNumericType(columnTypeMap[column] ?? null)) {\r\n        entries.add(column);\r\n      }\r\n    });\r\n    previewColumns.forEach((column) => {\r\n      const normalized = typeof column === 'string' ? column.trim() : '';\r\n      if (normalized && isNumericType(columnTypeMap[normalized] ?? null)) {\r\n        entries.add(normalized);\r\n      }\r\n    });\r\n    return Array.from(entries).sort((a, b) => a.localeCompare(b));\r\n  }, [availableColumns, previewColumns, skewnessRecommendations, columnTypeMap]);\r\n\r\n  useEffect(() => {\r\n    if (\r\n      skewnessViewMode === 'recommended' &&\r\n      skewnessRecommendations.length === 0 &&\r\n      skewnessColumnOptions.length > 0\r\n    ) {\r\n      setSkewnessViewMode('all');\r\n    }\r\n  }, [skewnessColumnOptions.length, skewnessRecommendations.length, skewnessViewMode]);\r\n\r\n  const skewnessThreshold = skewnessData?.skewness_threshold ?? null;\r\n\r\n  const getSkewnessMethodLabel = useCallback(\r\n    (method: SkewnessTransformationMethod) => skewnessMethodLabelMap[method] ?? method,\r\n    [skewnessMethodLabelMap],\r\n  );\r\n\r\n  const getSkewnessMethodStatus = useCallback(\r\n    (column: string, method: SkewnessTransformationMethod) => {\r\n      const recommendation = skewnessColumnMap.get(column);\r\n      if (!recommendation || !recommendation.method_status) {\r\n        return { status: 'ready' as const, reason: undefined };\r\n      }\r\n      return recommendation.method_status[method] ?? { status: 'ready' as const, reason: undefined };\r\n    },\r\n    [skewnessColumnMap],\r\n  );\r\n\r\n  const applySkewnessRecommendations = useCallback(() => {\r\n    const recommended = skewnessRecommendations\r\n      .map((entry) => {\r\n        if (!entry || !entry.column) {\r\n          return null;\r\n        }\r\n        const method = Array.isArray(entry.recommended_methods)\r\n          ? entry.recommended_methods.find(isSkewnessTransformationMethod)\r\n          : undefined;\r\n        if (!method) {\r\n          return null;\r\n        }\r\n        return { column: entry.column, method } as SkewnessTransformationConfig;\r\n      })\r\n      .filter((item): item is SkewnessTransformationConfig => Boolean(item));\r\n\r\n    if (!recommended.length) {\r\n      return;\r\n    }\r\n\r\n    updateSkewnessTransformations((current) => {\r\n      const map = new Map<string, SkewnessTransformationMethod>();\r\n\r\n      current.forEach((item) => {\r\n        const normalized = typeof item.column === 'string' ? item.column.trim() : '';\r\n        if (normalized && isSkewnessTransformationMethod(item.method)) {\r\n          map.set(normalized, item.method);\r\n        }\r\n      });\r\n\r\n      recommended.forEach((item) => {\r\n        const normalized = typeof item.column === 'string' ? item.column.trim() : '';\r\n        if (normalized) {\r\n          map.set(normalized, item.method);\r\n        }\r\n      });\r\n\r\n      return Array.from(map.entries()).map(([column, method]) => ({ column, method }));\r\n    });\r\n  }, [skewnessRecommendations, updateSkewnessTransformations]);\r\n\r\n  const skewnessTransformationMap = useMemo(() => {\r\n    const map = new Map<string, SkewnessTransformationMethod>();\r\n    skewnessTransformations.forEach((entry) => {\r\n      const normalized = typeof entry.column === 'string' ? entry.column.trim() : '';\r\n      if (!normalized || map.has(normalized)) {\r\n        return;\r\n      }\r\n      map.set(normalized, entry.method);\r\n    });\r\n    return map;\r\n  }, [skewnessTransformations]);\r\n\r\n  const setSkewnessTransformationForColumn = useCallback(\r\n    (column: string, method: SkewnessTransformationMethod | null) => {\r\n      const normalized = typeof column === 'string' ? column.trim() : '';\r\n      if (!normalized) {\r\n        return;\r\n      }\r\n      updateSkewnessTransformations((current) => {\r\n        const filtered = current.filter((entry) => entry.column !== normalized);\r\n        if (!method) {\r\n          return filtered;\r\n        }\r\n        return [...filtered, { column: normalized, method }];\r\n      });\r\n    },\r\n    [updateSkewnessTransformations],\r\n  );\r\n\r\n  const handleSkewnessOverrideChange = useCallback(\r\n    (column: string, nextValue: string) => {\r\n      if (!column) {\r\n        return;\r\n      }\r\n      if (!nextValue) {\r\n        setSkewnessTransformationForColumn(column, null);\r\n        return;\r\n      }\r\n      if (!isSkewnessTransformationMethod(nextValue)) {\r\n        return;\r\n      }\r\n      setSkewnessTransformationForColumn(column, nextValue);\r\n    },\r\n    [setSkewnessTransformationForColumn],\r\n  );\r\n\r\n  const clearSkewnessTransformations = useCallback(() => {\r\n    updateSkewnessTransformations(() => []);\r\n  }, [updateSkewnessTransformations]);\r\n\r\n  const skewnessRecommendedCount = skewnessRecommendations.length;\r\n\r\n  const hasSkewnessAutoRecommendations = useMemo(\r\n    () =>\r\n      skewnessRecommendations.some(\r\n        (entry) =>\r\n          entry &&\r\n          typeof entry.column === 'string' &&\r\n          Array.isArray(entry.recommended_methods) &&\r\n          entry.recommended_methods.some(isSkewnessTransformationMethod),\r\n      ),\r\n    [skewnessRecommendations],\r\n  );\r\n\r\n  const skewnessNumericCount = skewnessColumnOptions.length;\r\n\r\n  const skewnessRows = useMemo(\r\n    () =>\r\n      buildSkewnessRows({\r\n        viewMode: skewnessViewMode,\r\n        recommendations: skewnessRecommendations,\r\n        columnOptions: skewnessColumnOptions,\r\n        recommendationMap: skewnessColumnMap,\r\n        transformationMap: skewnessTransformationMap,\r\n      }),\r\n    [\r\n      skewnessViewMode,\r\n      skewnessRecommendations,\r\n      skewnessColumnOptions,\r\n      skewnessColumnMap,\r\n      skewnessTransformationMap,\r\n    ],\r\n  );\r\n\r\n  const skewnessDistributionCards = useMemo<SkewnessDistributionCard[]>(() => {\r\n    if (!shouldLoadInsights) {\r\n      return [];\r\n    }\r\n    return skewnessRecommendations\r\n      .map((entry) => {\r\n        if (!entry || !entry.column) {\r\n          return null;\r\n        }\r\n\r\n        const before = entry.distribution_before ?? entry.distribution ?? null;\r\n        if (!before) {\r\n          return null;\r\n        }\r\n        if (\r\n          !Array.isArray(before.bin_edges) ||\r\n          !Array.isArray(before.counts) ||\r\n          before.counts.length === 0 ||\r\n          before.bin_edges.length !== before.counts.length + 1\r\n        ) {\r\n          return null;\r\n        }\r\n\r\n        let after: SkewnessColumnDistribution | null = entry.distribution_after ?? null;\r\n        if (after) {\r\n          if (\r\n            !Array.isArray(after.bin_edges) ||\r\n            !Array.isArray(after.counts) ||\r\n            after.counts.length === 0 ||\r\n            after.bin_edges.length !== after.counts.length + 1\r\n          ) {\r\n            after = null;\r\n          }\r\n        }\r\n\r\n        const primaryMethod = entry.recommended_methods?.find(isSkewnessTransformationMethod) ?? null;\r\n        const magnitudeLabel = entry.magnitude\r\n          ? `${entry.magnitude.charAt(0).toUpperCase()}${entry.magnitude.slice(1)}`\r\n          : null;\r\n        const directionLabel = entry.direction\r\n          ? SKEWNESS_DIRECTION_LABEL[entry.direction] ?? entry.direction\r\n          : null;\r\n        const backendApplied = entry.applied_method && isSkewnessTransformationMethod(entry.applied_method)\r\n          ? entry.applied_method\r\n          : null;\r\n        const configuredMethod = skewnessTransformationMap.get(entry.column) ?? null;\r\n        const appliedMethod = backendApplied ?? configuredMethod ?? null;\r\n        const appliedLabel = appliedMethod ? getSkewnessMethodLabel(appliedMethod) : null;\r\n\r\n        return {\r\n          column: entry.column,\r\n          skewness: typeof entry.skewness === 'number' ? entry.skewness : null,\r\n          magnitudeLabel,\r\n          directionLabel,\r\n          summary: entry.summary ?? null,\r\n          recommendedLabel: appliedLabel ? null : primaryMethod ? getSkewnessMethodLabel(primaryMethod) : null,\r\n          appliedLabel,\r\n          distributionBefore: before,\r\n          distributionAfter: after,\r\n        } as SkewnessDistributionCard;\r\n      })\r\n      .filter((item): item is SkewnessDistributionCard => Boolean(item))\r\n      .sort((a, b) => {\r\n        const aAbs = a.skewness !== null ? Math.abs(a.skewness) : -Infinity;\r\n        const bAbs = b.skewness !== null ? Math.abs(b.skewness) : -Infinity;\r\n        if (aAbs !== bAbs) {\r\n          return bAbs - aAbs;\r\n        }\r\n        return a.column.localeCompare(b.column);\r\n      });\r\n  }, [\r\n    getSkewnessMethodLabel,\r\n    shouldLoadInsights,\r\n    skewnessRecommendations,\r\n    skewnessTransformationMap,\r\n  ]);\r\n\r\n  const skewnessTableGroups = useMemo(\r\n    () => buildSkewnessTableGroups(skewnessRows, skewnessGroupByMethod, getSkewnessMethodLabel),\r\n    [skewnessRows, skewnessGroupByMethod, getSkewnessMethodLabel],\r\n  );\r\n\r\n  return {\r\n    skewnessThreshold,\r\n    skewnessViewMode,\r\n    setSkewnessViewMode,\r\n    skewnessGroupByMethod,\r\n    setSkewnessGroupByMethod,\r\n    skewnessDistributionView,\r\n    setSkewnessDistributionView,\r\n    skewnessRecommendedCount,\r\n    skewnessNumericCount,\r\n    skewnessTransformationsCount,\r\n    hasSkewnessAutoRecommendations,\r\n    skewnessRows,\r\n    skewnessTableGroups,\r\n    skewnessDistributionCards,\r\n    getSkewnessMethodLabel,\r\n    getSkewnessMethodStatus,\r\n    applySkewnessRecommendations,\r\n    handleSkewnessOverrideChange,\r\n    clearSkewnessTransformations,\r\n  };\r\n};\r\n","import { useCallback, useEffect, useMemo, useState } from 'react';\r\nimport {\r\n  fetchLabelEncodingRecommendations,\r\n  type FeatureGraph,\r\n  type LabelEncodingColumnSuggestion,\r\n  type LabelEncodingRecommendationsResponse,\r\n  type LabelEncodingSuggestionStatus,\r\n} from '../../../api';\r\n\r\ntype LabelEncodingRecommendationMetadata = {\r\n  sampleSize: number | null;\r\n  generatedAt: string | null;\r\n  totalTextColumns: number;\r\n  recommendedCount: number;\r\n  autoDetectDefault: boolean;\r\n  highCardinalityColumns: string[];\r\n  notes: string[];\r\n};\r\n\r\ntype UseLabelEncodingRecommendationsArgs = {\r\n  isLabelEncodingNode: boolean;\r\n  sourceId?: string | null;\r\n  hasReachableSource: boolean;\r\n  graphContext?: FeatureGraph | { nodes: any[]; edges: any[] } | null;\r\n  targetNodeId?: string | null;\r\n};\r\n\r\ntype UseLabelEncodingRecommendationsResult = {\r\n  isFetching: boolean;\r\n  error: string | null;\r\n  suggestions: LabelEncodingColumnSuggestion[];\r\n  metadata: LabelEncodingRecommendationMetadata;\r\n  refresh: () => void;\r\n};\r\n\r\nconst DEFAULT_METADATA: LabelEncodingRecommendationMetadata = {\r\n  sampleSize: null,\r\n  generatedAt: null,\r\n  totalTextColumns: 0,\r\n  recommendedCount: 0,\r\n  autoDetectDefault: false,\r\n  highCardinalityColumns: [],\r\n  notes: [],\r\n};\r\n\r\nconst normalizeStatus = (value: unknown): LabelEncodingSuggestionStatus => {\r\n  if (typeof value !== 'string') {\r\n    return 'recommended';\r\n  }\r\n  const normalized = value.trim().toLowerCase();\r\n  switch (normalized) {\r\n    case 'recommended':\r\n    case 'high_cardinality':\r\n    case 'identifier':\r\n    case 'free_text':\r\n    case 'single_category':\r\n    case 'too_many_categories':\r\n      return normalized;\r\n    default:\r\n      return 'recommended';\r\n  }\r\n};\r\n\r\nconst coerceStringArray = (value: unknown): string[] => {\r\n  if (!Array.isArray(value)) {\r\n    return [];\r\n  }\r\n  return value\r\n    .map((entry) => {\r\n      if (entry === null || entry === undefined) {\r\n        return '';\r\n      }\r\n      return String(entry);\r\n    })\r\n    .filter((entry) => entry.trim().length > 0);\r\n};\r\n\r\nconst sanitizeSuggestions = (payload?: LabelEncodingRecommendationsResponse | null): LabelEncodingColumnSuggestion[] => {\r\n  if (!payload || !Array.isArray(payload.columns)) {\r\n    return [];\r\n  }\r\n\r\n  return payload.columns\r\n    .map((entry) => {\r\n      if (!entry || typeof entry !== 'object') {\r\n        return null;\r\n      }\r\n\r\n      const column = typeof entry.column === 'string' ? entry.column.trim() : '';\r\n      if (!column) {\r\n        return null;\r\n      }\r\n\r\n      const status = normalizeStatus((entry as any).status);\r\n      const reason = typeof entry.reason === 'string' ? entry.reason : '';\r\n      const dtype = typeof entry.dtype === 'string' ? entry.dtype : null;\r\n      const uniqueCount = typeof entry.unique_count === 'number' ? entry.unique_count : null;\r\n      const uniquePercentage = typeof entry.unique_percentage === 'number' ? entry.unique_percentage : null;\r\n      const missingPercentage = typeof entry.missing_percentage === 'number' ? entry.missing_percentage : null;\r\n      const textCategory = typeof entry.text_category === 'string' ? entry.text_category : null;\r\n      const sampleValues = coerceStringArray((entry as any).sample_values);\r\n      const score = typeof entry.score === 'number' ? entry.score : 0;\r\n      const selectable = typeof entry.selectable === 'boolean' ? entry.selectable : true;\r\n\r\n      const sanitized: LabelEncodingColumnSuggestion = {\r\n        column,\r\n        status,\r\n        reason,\r\n        dtype,\r\n        unique_count: uniqueCount,\r\n        unique_percentage: uniquePercentage,\r\n        missing_percentage: missingPercentage,\r\n        text_category: textCategory,\r\n        sample_values: sampleValues,\r\n        score,\r\n        selectable,\r\n      };\r\n\r\n      return sanitized;\r\n    })\r\n    .filter((entry): entry is LabelEncodingColumnSuggestion => Boolean(entry));\r\n};\r\n\r\nconst extractMetadata = (\r\n  payload?: LabelEncodingRecommendationsResponse | null,\r\n): LabelEncodingRecommendationMetadata => {\r\n  if (!payload || typeof payload !== 'object') {\r\n    return { ...DEFAULT_METADATA };\r\n  }\r\n\r\n  const sampleSize = typeof payload.sample_size === 'number' ? payload.sample_size : null;\r\n  const generatedAt = typeof payload.generated_at === 'string' ? payload.generated_at : null;\r\n  const totalTextColumns = Number(payload.total_text_columns ?? 0) || 0;\r\n  const recommendedCount = Number(payload.recommended_count ?? 0) || 0;\r\n  const autoDetectDefault = Boolean(payload.auto_detect_default);\r\n  const highCardinalityColumns = coerceStringArray(payload.high_cardinality_columns);\r\n  const notes = coerceStringArray(payload.notes);\r\n\r\n  return {\r\n    sampleSize,\r\n    generatedAt,\r\n    totalTextColumns,\r\n    recommendedCount,\r\n    autoDetectDefault,\r\n    highCardinalityColumns,\r\n    notes,\r\n  };\r\n};\r\n\r\nexport const useLabelEncodingRecommendations = ({\r\n  isLabelEncodingNode,\r\n  sourceId,\r\n  hasReachableSource,\r\n  graphContext,\r\n  targetNodeId,\r\n}: UseLabelEncodingRecommendationsArgs): UseLabelEncodingRecommendationsResult => {\r\n  const [isFetching, setIsFetching] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [suggestions, setSuggestions] = useState<LabelEncodingColumnSuggestion[]>([]);\r\n  const [metadata, setMetadata] = useState<LabelEncodingRecommendationMetadata>({ ...DEFAULT_METADATA });\r\n  const [requestId, setRequestId] = useState(0);\r\n\r\n  useEffect(() => {\r\n    let isActive = true;\r\n\r\n    const resetState = (message?: string | null) => {\r\n      setSuggestions([]);\r\n      setMetadata({ ...DEFAULT_METADATA });\r\n      setIsFetching(false);\r\n      setError(message ?? null);\r\n    };\r\n\r\n    if (!isLabelEncodingNode) {\r\n      resetState();\r\n      return () => {\r\n        isActive = false;\r\n      };\r\n    }\r\n\r\n    if (!sourceId) {\r\n      resetState();\r\n      return () => {\r\n        isActive = false;\r\n      };\r\n    }\r\n\r\n    if (!hasReachableSource) {\r\n      resetState('Connect this node to the dataset input to load suggestions.');\r\n      return () => {\r\n        isActive = false;\r\n      };\r\n    }\r\n\r\n    setIsFetching(true);\r\n    setError(null);\r\n\r\n    fetchLabelEncodingRecommendations(sourceId, {\r\n      graph: graphContext ?? null,\r\n      targetNodeId: targetNodeId ?? null,\r\n    })\r\n      .then((result) => {\r\n        if (!isActive) {\r\n          return;\r\n        }\r\n        setSuggestions(sanitizeSuggestions(result));\r\n        setMetadata(extractMetadata(result));\r\n      })\r\n      .catch((err: any) => {\r\n        if (!isActive) {\r\n          return;\r\n        }\r\n        const message = typeof err?.message === 'string' ? err.message : 'Unable to load label encoding suggestions';\r\n        resetState(message);\r\n      })\r\n      .finally(() => {\r\n        if (isActive) {\r\n          setIsFetching(false);\r\n        }\r\n      });\r\n\r\n    return () => {\r\n      isActive = false;\r\n    };\r\n  }, [graphContext, hasReachableSource, isLabelEncodingNode, requestId, sourceId, targetNodeId]);\r\n\r\n  const refresh = useCallback(() => {\r\n    if (!isLabelEncodingNode || !sourceId || !hasReachableSource) {\r\n      return;\r\n    }\r\n    setRequestId((value) => value + 1);\r\n  }, [hasReachableSource, isLabelEncodingNode, sourceId]);\r\n\r\n  const memoizedMetadata = useMemo(() => metadata, [metadata]);\r\n  const memoizedSuggestions = useMemo(() => suggestions, [suggestions]);\r\n\r\n  return {\r\n    isFetching,\r\n    error,\r\n    suggestions: memoizedSuggestions,\r\n    metadata: memoizedMetadata,\r\n    refresh,\r\n  };\r\n};\r\n","import { useCallback, useEffect, useMemo, useState } from 'react';\r\nimport {\r\n  fetchTargetEncodingRecommendations,\r\n  type FeatureGraph,\r\n  type TargetEncodingColumnSuggestion,\r\n  type TargetEncodingRecommendationsResponse,\r\n  type TargetEncodingSuggestionStatus,\r\n} from '../../../api';\r\n\r\ntype TargetEncodingRecommendationMetadata = {\r\n  sampleSize: number | null;\r\n  generatedAt: string | null;\r\n  totalTextColumns: number;\r\n  recommendedCount: number;\r\n  autoDetectDefault: boolean;\r\n  enableGlobalFallbackDefault: boolean;\r\n  highCardinalityColumns: string[];\r\n  notes: string[];\r\n};\r\n\r\ntype UseTargetEncodingRecommendationsArgs = {\r\n  isTargetEncodingNode: boolean;\r\n  sourceId?: string | null;\r\n  hasReachableSource: boolean;\r\n  graphContext?: FeatureGraph | { nodes: any[]; edges: any[] } | null;\r\n  targetNodeId?: string | null;\r\n};\r\n\r\ntype UseTargetEncodingRecommendationsResult = {\r\n  isFetching: boolean;\r\n  error: string | null;\r\n  suggestions: TargetEncodingColumnSuggestion[];\r\n  metadata: TargetEncodingRecommendationMetadata;\r\n  refresh: () => void;\r\n};\r\n\r\nconst DEFAULT_METADATA: TargetEncodingRecommendationMetadata = {\r\n  sampleSize: null,\r\n  generatedAt: null,\r\n  totalTextColumns: 0,\r\n  recommendedCount: 0,\r\n  autoDetectDefault: false,\r\n  enableGlobalFallbackDefault: false,\r\n  highCardinalityColumns: [],\r\n  notes: [],\r\n};\r\n\r\nconst normalizeStatus = (value: unknown): TargetEncodingSuggestionStatus => {\r\n  if (typeof value !== 'string') {\r\n    return 'recommended';\r\n  }\r\n  const normalized = value.trim().toLowerCase();\r\n  switch (normalized) {\r\n    case 'recommended':\r\n    case 'high_cardinality':\r\n    case 'identifier':\r\n    case 'free_text':\r\n    case 'single_category':\r\n    case 'too_many_categories':\r\n      return normalized;\r\n    default:\r\n      return 'recommended';\r\n  }\r\n};\r\n\r\nconst coerceStringArray = (value: unknown): string[] => {\r\n  if (!Array.isArray(value)) {\r\n    return [];\r\n  }\r\n  return value\r\n    .map((entry) => {\r\n      if (entry === null || entry === undefined) {\r\n        return '';\r\n      }\r\n      return String(entry);\r\n    })\r\n    .filter((entry) => entry.trim().length > 0);\r\n};\r\n\r\nconst sanitizeSuggestions = (\r\n  payload?: TargetEncodingRecommendationsResponse | null,\r\n): TargetEncodingColumnSuggestion[] => {\r\n  if (!payload || !Array.isArray(payload.columns)) {\r\n    return [];\r\n  }\r\n\r\n  return payload.columns\r\n    .map((entry) => {\r\n      if (!entry || typeof entry !== 'object') {\r\n        return null;\r\n      }\r\n\r\n      const column = typeof entry.column === 'string' ? entry.column.trim() : '';\r\n      if (!column) {\r\n        return null;\r\n      }\r\n\r\n      const status = normalizeStatus((entry as any).status);\r\n      const reason = typeof entry.reason === 'string' ? entry.reason : '';\r\n      const dtype = typeof entry.dtype === 'string' ? entry.dtype : null;\r\n      const uniqueCount = typeof entry.unique_count === 'number' ? entry.unique_count : null;\r\n      const uniquePercentage = typeof entry.unique_percentage === 'number' ? entry.unique_percentage : null;\r\n      const missingPercentage = typeof entry.missing_percentage === 'number' ? entry.missing_percentage : null;\r\n      const textCategory = typeof entry.text_category === 'string' ? entry.text_category : null;\r\n      const sampleValues = coerceStringArray(entry.sample_values);\r\n      const score = typeof entry.score === 'number' ? entry.score : 0;\r\n      const selectable = typeof entry.selectable === 'boolean' ? entry.selectable : true;\r\n      const recommendedUseGlobalFallback = typeof entry.recommended_use_global_fallback === 'boolean'\r\n        ? entry.recommended_use_global_fallback\r\n        : Boolean(entry.missing_percentage && entry.missing_percentage > 0);\r\n\r\n      const sanitized: TargetEncodingColumnSuggestion = {\r\n        column,\r\n        status,\r\n        reason,\r\n        dtype,\r\n        unique_count: uniqueCount,\r\n        unique_percentage: uniquePercentage,\r\n        missing_percentage: missingPercentage,\r\n        text_category: textCategory,\r\n        sample_values: sampleValues,\r\n        score,\r\n        selectable,\r\n        recommended_use_global_fallback: recommendedUseGlobalFallback,\r\n      };\r\n\r\n      return sanitized;\r\n    })\r\n    .filter((entry): entry is TargetEncodingColumnSuggestion => Boolean(entry));\r\n};\r\n\r\nconst extractMetadata = (\r\n  payload?: TargetEncodingRecommendationsResponse | null,\r\n): TargetEncodingRecommendationMetadata => {\r\n  if (!payload || typeof payload !== 'object') {\r\n    return { ...DEFAULT_METADATA };\r\n  }\r\n\r\n  const sampleSize = typeof payload.sample_size === 'number' ? payload.sample_size : null;\r\n  const generatedAt = typeof payload.generated_at === 'string' ? payload.generated_at : null;\r\n  const totalTextColumns = Number(payload.total_text_columns ?? 0) || 0;\r\n  const recommendedCount = Number(payload.recommended_count ?? 0) || 0;\r\n  const enableGlobalFallbackDefault = Boolean(payload.enable_global_fallback_default);\r\n  const highCardinalityColumns = coerceStringArray(payload.high_cardinality_columns);\r\n  const notes = coerceStringArray(payload.notes);\r\n  const autoDetectDefault = Boolean(payload.auto_detect_default);\r\n\r\n  return {\r\n    sampleSize,\r\n    generatedAt,\r\n    totalTextColumns,\r\n    recommendedCount,\r\n    autoDetectDefault,\r\n    enableGlobalFallbackDefault,\r\n    highCardinalityColumns,\r\n    notes,\r\n  };\r\n};\r\n\r\nexport const useTargetEncodingRecommendations = ({\r\n  isTargetEncodingNode,\r\n  sourceId,\r\n  hasReachableSource,\r\n  graphContext,\r\n  targetNodeId,\r\n}: UseTargetEncodingRecommendationsArgs): UseTargetEncodingRecommendationsResult => {\r\n  const [isFetching, setIsFetching] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [suggestions, setSuggestions] = useState<TargetEncodingColumnSuggestion[]>([]);\r\n  const [metadata, setMetadata] = useState<TargetEncodingRecommendationMetadata>({ ...DEFAULT_METADATA });\r\n  const [requestId, setRequestId] = useState(0);\r\n\r\n  useEffect(() => {\r\n    let isActive = true;\r\n\r\n    const resetState = (message?: string | null) => {\r\n      setSuggestions([]);\r\n      setMetadata({ ...DEFAULT_METADATA });\r\n      setIsFetching(false);\r\n      setError(message ?? null);\r\n    };\r\n\r\n    if (!isTargetEncodingNode) {\r\n      resetState();\r\n      return () => {\r\n        isActive = false;\r\n      };\r\n    }\r\n\r\n    if (!sourceId) {\r\n      resetState();\r\n      return () => {\r\n        isActive = false;\r\n      };\r\n    }\r\n\r\n    if (!hasReachableSource) {\r\n      resetState('Connect this node to the dataset input to load suggestions.');\r\n      return () => {\r\n        isActive = false;\r\n      };\r\n    }\r\n\r\n    setIsFetching(true);\r\n    setError(null);\r\n\r\n    fetchTargetEncodingRecommendations(sourceId, {\r\n      graph: graphContext ?? null,\r\n      targetNodeId: targetNodeId ?? null,\r\n    })\r\n      .then((result) => {\r\n        if (!isActive) {\r\n          return;\r\n        }\r\n        setSuggestions(sanitizeSuggestions(result));\r\n        setMetadata(extractMetadata(result));\r\n      })\r\n      .catch((err: any) => {\r\n        if (!isActive) {\r\n          return;\r\n        }\r\n        const message = typeof err?.message === 'string' ? err.message : 'Unable to load target encoding suggestions';\r\n        resetState(message);\r\n      })\r\n      .finally(() => {\r\n        if (isActive) {\r\n          setIsFetching(false);\r\n        }\r\n      });\r\n\r\n    return () => {\r\n      isActive = false;\r\n    };\r\n  }, [graphContext, hasReachableSource, isTargetEncodingNode, requestId, sourceId, targetNodeId]);\r\n\r\n  const refresh = useCallback(() => {\r\n    if (!isTargetEncodingNode || !sourceId || !hasReachableSource) {\r\n      return;\r\n    }\r\n    setRequestId((value) => value + 1);\r\n  }, [hasReachableSource, isTargetEncodingNode, sourceId]);\r\n\r\n  const memoizedMetadata = useMemo(() => metadata, [metadata]);\r\n  const memoizedSuggestions = useMemo(() => suggestions, [suggestions]);\r\n\r\n  return {\r\n    isFetching,\r\n    error,\r\n    suggestions: memoizedSuggestions,\r\n    metadata: memoizedMetadata,\r\n    refresh,\r\n  };\r\n};\r\n","import { useCallback, useEffect, useMemo, useState } from 'react';\r\nimport {\r\n  fetchHashEncodingRecommendations,\r\n  type FeatureGraph,\r\n  type HashEncodingColumnSuggestion,\r\n  type HashEncodingRecommendationsResponse,\r\n  type HashEncodingSuggestionStatus,\r\n} from '../../../api';\r\n\r\ntype HashEncodingRecommendationMetadata = {\r\n  sampleSize: number | null;\r\n  generatedAt: string | null;\r\n  totalTextColumns: number;\r\n  recommendedCount: number;\r\n  autoDetectDefault: boolean;\r\n  suggestedBucketDefault: number;\r\n  highCardinalityColumns: string[];\r\n  notes: string[];\r\n};\r\n\r\ntype UseHashEncodingRecommendationsArgs = {\r\n  isHashEncodingNode: boolean;\r\n  sourceId?: string | null;\r\n  hasReachableSource: boolean;\r\n  graphContext?: FeatureGraph | { nodes: any[]; edges: any[] } | null;\r\n  targetNodeId?: string | null;\r\n};\r\n\r\ntype UseHashEncodingRecommendationsResult = {\r\n  isFetching: boolean;\r\n  error: string | null;\r\n  suggestions: HashEncodingColumnSuggestion[];\r\n  metadata: HashEncodingRecommendationMetadata;\r\n  refresh: () => void;\r\n};\r\n\r\nconst DEFAULT_METADATA: HashEncodingRecommendationMetadata = {\r\n  sampleSize: null,\r\n  generatedAt: null,\r\n  totalTextColumns: 0,\r\n  recommendedCount: 0,\r\n  autoDetectDefault: false,\r\n  suggestedBucketDefault: 0,\r\n  highCardinalityColumns: [],\r\n  notes: [],\r\n};\r\n\r\nconst normalizeStatus = (value: unknown): HashEncodingSuggestionStatus => {\r\n  if (typeof value !== 'string') {\r\n    return 'recommended';\r\n  }\r\n  const normalized = value.trim().toLowerCase();\r\n  switch (normalized) {\r\n    case 'recommended':\r\n    case 'high_cardinality':\r\n    case 'identifier':\r\n    case 'free_text':\r\n    case 'single_category':\r\n    case 'too_many_categories':\r\n      return normalized;\r\n    default:\r\n      return 'recommended';\r\n  }\r\n};\r\n\r\nconst coerceStringArray = (value: unknown): string[] => {\r\n  if (!Array.isArray(value)) {\r\n    return [];\r\n  }\r\n  return value\r\n    .map((entry) => {\r\n      if (entry === null || entry === undefined) {\r\n        return '';\r\n      }\r\n      return String(entry);\r\n    })\r\n    .filter((entry) => entry.trim().length > 0);\r\n};\r\n\r\nconst sanitizeSuggestions = (\r\n  payload?: HashEncodingRecommendationsResponse | null,\r\n): HashEncodingColumnSuggestion[] => {\r\n  if (!payload || !Array.isArray(payload.columns)) {\r\n    return [];\r\n  }\r\n\r\n  return payload.columns\r\n    .map((entry) => {\r\n      if (!entry || typeof entry !== 'object') {\r\n        return null;\r\n      }\r\n\r\n      const column = typeof entry.column === 'string' ? entry.column.trim() : '';\r\n      if (!column) {\r\n        return null;\r\n      }\r\n\r\n      const status = normalizeStatus((entry as any).status);\r\n      const reason = typeof entry.reason === 'string' ? entry.reason : '';\r\n      const dtype = typeof entry.dtype === 'string' ? entry.dtype : null;\r\n      const uniqueCount = typeof entry.unique_count === 'number' ? entry.unique_count : null;\r\n      const uniquePercentage = typeof entry.unique_percentage === 'number' ? entry.unique_percentage : null;\r\n      const missingPercentage = typeof entry.missing_percentage === 'number' ? entry.missing_percentage : null;\r\n      const textCategory = typeof entry.text_category === 'string' ? entry.text_category : null;\r\n      const sampleValues = coerceStringArray(entry.sample_values);\r\n      const score = typeof entry.score === 'number' ? entry.score : 0;\r\n      const selectable = typeof entry.selectable === 'boolean' ? entry.selectable : true;\r\n      const recommendedBucketCount = typeof entry.recommended_bucket_count === 'number'\r\n        ? Math.max(2, Math.round(entry.recommended_bucket_count))\r\n        : 0;\r\n\r\n      const sanitized: HashEncodingColumnSuggestion = {\r\n        column,\r\n        status,\r\n        reason,\r\n        dtype,\r\n        unique_count: uniqueCount,\r\n        unique_percentage: uniquePercentage,\r\n        missing_percentage: missingPercentage,\r\n        text_category: textCategory,\r\n        sample_values: sampleValues,\r\n        score,\r\n        selectable,\r\n        recommended_bucket_count: recommendedBucketCount,\r\n      };\r\n\r\n      return sanitized;\r\n    })\r\n    .filter((entry): entry is HashEncodingColumnSuggestion => Boolean(entry));\r\n};\r\n\r\nconst extractMetadata = (\r\n  payload?: HashEncodingRecommendationsResponse | null,\r\n): HashEncodingRecommendationMetadata => {\r\n  if (!payload || typeof payload !== 'object') {\r\n    return { ...DEFAULT_METADATA };\r\n  }\r\n\r\n  const sampleSize = typeof payload.sample_size === 'number' ? payload.sample_size : null;\r\n  const generatedAt = typeof payload.generated_at === 'string' ? payload.generated_at : null;\r\n  const totalTextColumns = Number(payload.total_text_columns ?? 0) || 0;\r\n  const recommendedCount = Number(payload.recommended_count ?? 0) || 0;\r\n  const autoDetectDefault = Boolean(payload.auto_detect_default);\r\n  const suggestedBucketDefault = Number(payload.suggested_bucket_default ?? 0) || 0;\r\n  const highCardinalityColumns = coerceStringArray(payload.high_cardinality_columns);\r\n  const notes = coerceStringArray(payload.notes);\r\n\r\n  return {\r\n    sampleSize,\r\n    generatedAt,\r\n    totalTextColumns,\r\n    recommendedCount,\r\n    autoDetectDefault,\r\n    suggestedBucketDefault,\r\n    highCardinalityColumns,\r\n    notes,\r\n  };\r\n};\r\n\r\nexport const useHashEncodingRecommendations = ({\r\n  isHashEncodingNode,\r\n  sourceId,\r\n  hasReachableSource,\r\n  graphContext,\r\n  targetNodeId,\r\n}: UseHashEncodingRecommendationsArgs): UseHashEncodingRecommendationsResult => {\r\n  const [isFetching, setIsFetching] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [suggestions, setSuggestions] = useState<HashEncodingColumnSuggestion[]>([]);\r\n  const [metadata, setMetadata] = useState<HashEncodingRecommendationMetadata>({ ...DEFAULT_METADATA });\r\n  const [requestId, setRequestId] = useState(0);\r\n\r\n  const resetState = useCallback((message?: string | null) => {\r\n    setSuggestions([]);\r\n    setMetadata({ ...DEFAULT_METADATA });\r\n    setIsFetching(false);\r\n    setError(message ?? null);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    let isActive = true;\r\n\r\n    if (!isHashEncodingNode) {\r\n      resetState();\r\n      return () => {\r\n        isActive = false;\r\n      };\r\n    }\r\n\r\n    if (!sourceId) {\r\n      resetState();\r\n      return () => {\r\n        isActive = false;\r\n      };\r\n    }\r\n\r\n    if (!hasReachableSource) {\r\n      resetState('Connect this node to the dataset input to load suggestions.');\r\n      return () => {\r\n        isActive = false;\r\n      };\r\n    }\r\n\r\n    setIsFetching(true);\r\n    setError(null);\r\n\r\n    fetchHashEncodingRecommendations(sourceId, {\r\n      graph: graphContext ?? null,\r\n      targetNodeId: targetNodeId ?? null,\r\n    })\r\n      .then((result) => {\r\n        if (!isActive) {\r\n          return;\r\n        }\r\n        setSuggestions(sanitizeSuggestions(result));\r\n        setMetadata(extractMetadata(result));\r\n      })\r\n      .catch((err: any) => {\r\n        if (!isActive) {\r\n          return;\r\n        }\r\n        setSuggestions([]);\r\n        setMetadata({ ...DEFAULT_METADATA });\r\n        setError(err?.message ? String(err.message) : 'Unable to load hash encoding suggestions');\r\n      })\r\n      .finally(() => {\r\n        if (isActive) {\r\n          setIsFetching(false);\r\n        }\r\n      });\r\n\r\n    return () => {\r\n      isActive = false;\r\n    };\r\n  }, [graphContext, hasReachableSource, isHashEncodingNode, resetState, sourceId, targetNodeId, requestId]);\r\n\r\n  const refresh = useCallback(() => {\r\n    setRequestId((previous) => previous + 1);\r\n  }, []);\r\n\r\n  const value = useMemo<UseHashEncodingRecommendationsResult>(() => ({\r\n    isFetching,\r\n    error,\r\n    suggestions,\r\n    metadata,\r\n    refresh,\r\n  }), [error, isFetching, metadata, refresh, suggestions]);\r\n\r\n  return value;\r\n};\r\n","import { useCallback, useEffect, useMemo, useState } from 'react';\r\nimport {\r\n  fetchOrdinalEncodingRecommendations,\r\n  type FeatureGraph,\r\n  type OrdinalEncodingColumnSuggestion,\r\n  type OrdinalEncodingRecommendationsResponse,\r\n  type OrdinalEncodingSuggestionStatus,\r\n} from '../../../api';\r\n\r\ntype OrdinalEncodingRecommendationMetadata = {\r\n  sampleSize: number | null;\r\n  generatedAt: string | null;\r\n  totalTextColumns: number;\r\n  recommendedCount: number;\r\n  autoDetectDefault: boolean;\r\n  enableUnknownDefault: boolean;\r\n  highCardinalityColumns: string[];\r\n  notes: string[];\r\n};\r\n\r\ntype UseOrdinalEncodingRecommendationsArgs = {\r\n  isOrdinalEncodingNode: boolean;\r\n  sourceId?: string | null;\r\n  hasReachableSource: boolean;\r\n  graphContext?: FeatureGraph | { nodes: any[]; edges: any[] } | null;\r\n  targetNodeId?: string | null;\r\n};\r\n\r\ntype UseOrdinalEncodingRecommendationsResult = {\r\n  isFetching: boolean;\r\n  error: string | null;\r\n  suggestions: OrdinalEncodingColumnSuggestion[];\r\n  metadata: OrdinalEncodingRecommendationMetadata;\r\n  refresh: () => void;\r\n};\r\n\r\nconst DEFAULT_METADATA: OrdinalEncodingRecommendationMetadata = {\r\n  sampleSize: null,\r\n  generatedAt: null,\r\n  totalTextColumns: 0,\r\n  recommendedCount: 0,\r\n  autoDetectDefault: false,\r\n  enableUnknownDefault: false,\r\n  highCardinalityColumns: [],\r\n  notes: [],\r\n};\r\n\r\nconst normalizeStatus = (value: unknown): OrdinalEncodingSuggestionStatus => {\r\n  if (typeof value !== 'string') {\r\n    return 'recommended';\r\n  }\r\n  const normalized = value.trim().toLowerCase();\r\n  switch (normalized) {\r\n    case 'recommended':\r\n    case 'high_cardinality':\r\n    case 'identifier':\r\n    case 'free_text':\r\n    case 'single_category':\r\n    case 'too_many_categories':\r\n      return normalized;\r\n    default:\r\n      return 'recommended';\r\n  }\r\n};\r\n\r\nconst coerceStringArray = (value: unknown): string[] => {\r\n  if (!Array.isArray(value)) {\r\n    return [];\r\n  }\r\n  return value\r\n    .map((entry) => {\r\n      if (entry === null || entry === undefined) {\r\n        return '';\r\n      }\r\n      return String(entry);\r\n    })\r\n    .filter((entry) => entry.trim().length > 0);\r\n};\r\n\r\nconst sanitizeSuggestions = (\r\n  payload?: OrdinalEncodingRecommendationsResponse | null,\r\n): OrdinalEncodingColumnSuggestion[] => {\r\n  if (!payload || !Array.isArray(payload.columns)) {\r\n    return [];\r\n  }\r\n\r\n  return payload.columns\r\n    .map((entry) => {\r\n      if (!entry || typeof entry !== 'object') {\r\n        return null;\r\n      }\r\n\r\n      const column = typeof entry.column === 'string' ? entry.column.trim() : '';\r\n      if (!column) {\r\n        return null;\r\n      }\r\n\r\n      const status = normalizeStatus((entry as any).status);\r\n      const reason = typeof entry.reason === 'string' ? entry.reason : '';\r\n      const dtype = typeof entry.dtype === 'string' ? entry.dtype : null;\r\n      const uniqueCount = typeof entry.unique_count === 'number' ? entry.unique_count : null;\r\n      const uniquePercentage = typeof entry.unique_percentage === 'number' ? entry.unique_percentage : null;\r\n      const missingPercentage = typeof entry.missing_percentage === 'number' ? entry.missing_percentage : null;\r\n      const textCategory = typeof entry.text_category === 'string' ? entry.text_category : null;\r\n      const sampleValues = coerceStringArray(entry.sample_values);\r\n      const score = typeof entry.score === 'number' ? entry.score : 0;\r\n      const selectable = typeof entry.selectable === 'boolean' ? entry.selectable : true;\r\n      const recommendedHandleUnknown = typeof entry.recommended_handle_unknown === 'boolean'\r\n        ? entry.recommended_handle_unknown\r\n        : Boolean(entry.missing_percentage && entry.missing_percentage > 0);\r\n\r\n      const sanitized: OrdinalEncodingColumnSuggestion = {\r\n        column,\r\n        status,\r\n        reason,\r\n        dtype,\r\n        unique_count: uniqueCount,\r\n        unique_percentage: uniquePercentage,\r\n        missing_percentage: missingPercentage,\r\n        text_category: textCategory,\r\n        sample_values: sampleValues,\r\n        score,\r\n        selectable,\r\n        recommended_handle_unknown: recommendedHandleUnknown,\r\n      };\r\n\r\n      return sanitized;\r\n    })\r\n    .filter((entry): entry is OrdinalEncodingColumnSuggestion => Boolean(entry));\r\n};\r\n\r\nconst extractMetadata = (\r\n  payload?: OrdinalEncodingRecommendationsResponse | null,\r\n): OrdinalEncodingRecommendationMetadata => {\r\n  if (!payload || typeof payload !== 'object') {\r\n    return { ...DEFAULT_METADATA };\r\n  }\r\n\r\n  const sampleSize = typeof payload.sample_size === 'number' ? payload.sample_size : null;\r\n  const generatedAt = typeof payload.generated_at === 'string' ? payload.generated_at : null;\r\n  const totalTextColumns = Number(payload.total_text_columns ?? 0) || 0;\r\n  const recommendedCount = Number(payload.recommended_count ?? 0) || 0;\r\n  const enableUnknownDefault = Boolean(payload.enable_unknown_default);\r\n  const highCardinalityColumns = coerceStringArray(payload.high_cardinality_columns);\r\n  const notes = coerceStringArray(payload.notes);\r\n  const autoDetectDefault = Boolean(payload.auto_detect_default);\r\n\r\n  return {\r\n    sampleSize,\r\n    generatedAt,\r\n    totalTextColumns,\r\n    recommendedCount,\r\n    autoDetectDefault,\r\n    enableUnknownDefault,\r\n    highCardinalityColumns,\r\n    notes,\r\n  };\r\n};\r\n\r\nexport const useOrdinalEncodingRecommendations = ({\r\n  isOrdinalEncodingNode,\r\n  sourceId,\r\n  hasReachableSource,\r\n  graphContext,\r\n  targetNodeId,\r\n}: UseOrdinalEncodingRecommendationsArgs): UseOrdinalEncodingRecommendationsResult => {\r\n  const [isFetching, setIsFetching] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [suggestions, setSuggestions] = useState<OrdinalEncodingColumnSuggestion[]>([]);\r\n  const [metadata, setMetadata] = useState<OrdinalEncodingRecommendationMetadata>({ ...DEFAULT_METADATA });\r\n  const [requestId, setRequestId] = useState(0);\r\n\r\n  useEffect(() => {\r\n    let isActive = true;\r\n\r\n    const resetState = (message?: string | null) => {\r\n      setSuggestions([]);\r\n      setMetadata({ ...DEFAULT_METADATA });\r\n      setIsFetching(false);\r\n      setError(message ?? null);\r\n    };\r\n\r\n    if (!isOrdinalEncodingNode) {\r\n      resetState();\r\n      return () => {\r\n        isActive = false;\r\n      };\r\n    }\r\n\r\n    if (!sourceId) {\r\n      resetState();\r\n      return () => {\r\n        isActive = false;\r\n      };\r\n    }\r\n\r\n    if (!hasReachableSource) {\r\n      resetState('Connect this node to the dataset input to load suggestions.');\r\n      return () => {\r\n        isActive = false;\r\n      };\r\n    }\r\n\r\n    setIsFetching(true);\r\n    setError(null);\r\n\r\n    fetchOrdinalEncodingRecommendations(sourceId, {\r\n      graph: graphContext ?? null,\r\n      targetNodeId: targetNodeId ?? null,\r\n    })\r\n      .then((result) => {\r\n        if (!isActive) {\r\n          return;\r\n        }\r\n        setSuggestions(sanitizeSuggestions(result));\r\n        setMetadata(extractMetadata(result));\r\n      })\r\n      .catch((err: any) => {\r\n        if (!isActive) {\r\n          return;\r\n        }\r\n        const message = typeof err?.message === 'string' ? err.message : 'Unable to load ordinal encoding suggestions';\r\n        resetState(message);\r\n      })\r\n      .finally(() => {\r\n        if (isActive) {\r\n          setIsFetching(false);\r\n        }\r\n      });\r\n\r\n    return () => {\r\n      isActive = false;\r\n    };\r\n  }, [graphContext, hasReachableSource, isOrdinalEncodingNode, requestId, sourceId, targetNodeId]);\r\n\r\n  const refresh = useCallback(() => {\r\n    if (!isOrdinalEncodingNode || !sourceId || !hasReachableSource) {\r\n      return;\r\n    }\r\n    setRequestId((value) => value + 1);\r\n  }, [hasReachableSource, isOrdinalEncodingNode, sourceId]);\r\n\r\n  const memoizedMetadata = useMemo(() => metadata, [metadata]);\r\n  const memoizedSuggestions = useMemo(() => suggestions, [suggestions]);\r\n\r\n  return {\r\n    isFetching,\r\n    error,\r\n    suggestions: memoizedSuggestions,\r\n    metadata: memoizedMetadata,\r\n    refresh,\r\n  };\r\n};\r\n","import { useCallback, useEffect, useMemo, useState } from 'react';\r\nimport {\r\n  fetchDummyEncodingRecommendations,\r\n  type FeatureGraph,\r\n  type DummyEncodingColumnSuggestion,\r\n  type DummyEncodingRecommendationsResponse,\r\n  type DummyEncodingSuggestionStatus,\r\n} from '../../../api';\r\n\r\ntype DummyEncodingRecommendationMetadata = {\r\n  sampleSize: number | null;\r\n  generatedAt: string | null;\r\n  totalTextColumns: number;\r\n  recommendedCount: number;\r\n  cautionedCount: number;\r\n  highCardinalityColumns: string[];\r\n  notes: string[];\r\n  autoDetectDefault: boolean;\r\n};\r\n\r\ntype UseDummyEncodingRecommendationsArgs = {\r\n  isDummyEncodingNode: boolean;\r\n  sourceId?: string | null;\r\n  hasReachableSource: boolean;\r\n  graphContext?: FeatureGraph | { nodes: any[]; edges: any[] } | null;\r\n  targetNodeId?: string | null;\r\n};\r\n\r\ntype UseDummyEncodingRecommendationsResult = {\r\n  isFetching: boolean;\r\n  error: string | null;\r\n  suggestions: DummyEncodingColumnSuggestion[];\r\n  metadata: DummyEncodingRecommendationMetadata;\r\n  refresh: () => void;\r\n};\r\n\r\nconst DEFAULT_METADATA: DummyEncodingRecommendationMetadata = {\r\n  sampleSize: null,\r\n  generatedAt: null,\r\n  totalTextColumns: 0,\r\n  recommendedCount: 0,\r\n  cautionedCount: 0,\r\n  highCardinalityColumns: [],\r\n  notes: [],\r\n  autoDetectDefault: false,\r\n};\r\n\r\nconst normalizeStatus = (value: unknown): DummyEncodingSuggestionStatus => {\r\n  if (typeof value !== 'string') {\r\n    return 'recommended';\r\n  }\r\n  const normalized = value.trim().toLowerCase();\r\n  switch (normalized) {\r\n    case 'recommended':\r\n    case 'high_cardinality':\r\n    case 'identifier':\r\n    case 'free_text':\r\n    case 'single_category':\r\n    case 'too_many_categories':\r\n      return normalized;\r\n    default:\r\n      return 'recommended';\r\n  }\r\n};\r\n\r\nconst coerceStringArray = (value: unknown): string[] => {\r\n  if (!Array.isArray(value)) {\r\n    return [];\r\n  }\r\n  return value\r\n    .map((entry) => {\r\n      if (entry === null || entry === undefined) {\r\n        return '';\r\n      }\r\n      return String(entry);\r\n    })\r\n    .filter((entry) => entry.trim().length > 0);\r\n};\r\n\r\nconst sanitizeSuggestions = (\r\n  payload?: DummyEncodingRecommendationsResponse | null,\r\n): DummyEncodingColumnSuggestion[] => {\r\n  if (!payload || !Array.isArray(payload.columns)) {\r\n    return [];\r\n  }\r\n\r\n  return payload.columns\r\n    .map((entry) => {\r\n      if (!entry || typeof entry !== 'object') {\r\n        return null;\r\n      }\r\n\r\n      const column = typeof entry.column === 'string' ? entry.column.trim() : '';\r\n      if (!column) {\r\n        return null;\r\n      }\r\n\r\n      const status = normalizeStatus((entry as any).status);\r\n      const reason = typeof entry.reason === 'string' ? entry.reason : '';\r\n      const dtype = typeof entry.dtype === 'string' ? entry.dtype : null;\r\n      const uniqueCount = typeof entry.unique_count === 'number' ? entry.unique_count : null;\r\n      const uniquePercentage = typeof entry.unique_percentage === 'number' ? entry.unique_percentage : null;\r\n      const missingPercentage = typeof entry.missing_percentage === 'number' ? entry.missing_percentage : null;\r\n      const textCategory = typeof entry.text_category === 'string' ? entry.text_category : null;\r\n      const sampleValues = coerceStringArray((entry as any).sample_values);\r\n      const estimatedDummyColumns = typeof entry.estimated_dummy_columns === 'number'\r\n        ? Math.max(0, Math.round(entry.estimated_dummy_columns))\r\n        : 0;\r\n      const score = typeof entry.score === 'number' ? entry.score : 0;\r\n      const selectable = typeof entry.selectable === 'boolean' ? entry.selectable : true;\r\n      const recommendedDropFirst = typeof entry.recommended_drop_first === 'boolean'\r\n        ? entry.recommended_drop_first\r\n        : true;\r\n\r\n      const sanitized: DummyEncodingColumnSuggestion = {\r\n        column,\r\n        status,\r\n        reason,\r\n        dtype,\r\n        unique_count: uniqueCount,\r\n        unique_percentage: uniquePercentage,\r\n        missing_percentage: missingPercentage,\r\n        text_category: textCategory,\r\n        sample_values: sampleValues,\r\n        estimated_dummy_columns: estimatedDummyColumns,\r\n        score,\r\n        selectable,\r\n        recommended_drop_first: recommendedDropFirst,\r\n      };\r\n\r\n      return sanitized;\r\n    })\r\n    .filter((entry): entry is DummyEncodingColumnSuggestion => Boolean(entry));\r\n};\r\n\r\nconst extractMetadata = (\r\n  payload?: DummyEncodingRecommendationsResponse | null,\r\n): DummyEncodingRecommendationMetadata => {\r\n  if (!payload || typeof payload !== 'object') {\r\n    return { ...DEFAULT_METADATA };\r\n  }\r\n\r\n  const sampleSize = typeof payload.sample_size === 'number' ? payload.sample_size : null;\r\n  const generatedAt = typeof payload.generated_at === 'string' ? payload.generated_at : null;\r\n  const totalTextColumns = Number(payload.total_text_columns ?? 0) || 0;\r\n  const recommendedCount = Number(payload.recommended_count ?? 0) || 0;\r\n  const cautionedCount = Number(payload.cautioned_count ?? 0) || 0;\r\n  const highCardinalityColumns = coerceStringArray(payload.high_cardinality_columns);\r\n  const notes = coerceStringArray(payload.notes);\r\n  const autoDetectDefault = Boolean(payload.auto_detect_default);\r\n\r\n  return {\r\n    sampleSize,\r\n    generatedAt,\r\n    totalTextColumns,\r\n    recommendedCount,\r\n    cautionedCount,\r\n    highCardinalityColumns,\r\n    notes,\r\n    autoDetectDefault,\r\n  };\r\n};\r\n\r\nexport const useDummyEncodingRecommendations = ({\r\n  isDummyEncodingNode,\r\n  sourceId,\r\n  hasReachableSource,\r\n  graphContext,\r\n  targetNodeId,\r\n}: UseDummyEncodingRecommendationsArgs): UseDummyEncodingRecommendationsResult => {\r\n  const [isFetching, setIsFetching] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [suggestions, setSuggestions] = useState<DummyEncodingColumnSuggestion[]>([]);\r\n  const [metadata, setMetadata] = useState<DummyEncodingRecommendationMetadata>({ ...DEFAULT_METADATA });\r\n  const [requestId, setRequestId] = useState(0);\r\n\r\n  useEffect(() => {\r\n    let isActive = true;\r\n\r\n    const resetState = (message?: string | null) => {\r\n      setSuggestions([]);\r\n      setMetadata({ ...DEFAULT_METADATA });\r\n      setIsFetching(false);\r\n      setError(message ?? null);\r\n    };\r\n\r\n    if (!isDummyEncodingNode) {\r\n      resetState();\r\n      return () => {\r\n        isActive = false;\r\n      };\r\n    }\r\n\r\n    if (!sourceId) {\r\n      resetState();\r\n      return () => {\r\n        isActive = false;\r\n      };\r\n    }\r\n\r\n    if (!hasReachableSource) {\r\n      resetState('Connect this node to the dataset input to load suggestions.');\r\n      return () => {\r\n        isActive = false;\r\n      };\r\n    }\r\n\r\n    setIsFetching(true);\r\n    setError(null);\r\n\r\n    fetchDummyEncodingRecommendations(sourceId, {\r\n      graph: graphContext ?? null,\r\n      targetNodeId: targetNodeId ?? null,\r\n    })\r\n      .then((result) => {\r\n        if (!isActive) {\r\n          return;\r\n        }\r\n        setSuggestions(sanitizeSuggestions(result));\r\n        setMetadata(extractMetadata(result));\r\n      })\r\n      .catch((err: any) => {\r\n        if (!isActive) {\r\n          return;\r\n        }\r\n        const message = typeof err?.message === 'string' ? err.message : 'Unable to load dummy encoding suggestions';\r\n        resetState(message);\r\n      })\r\n      .finally(() => {\r\n        if (isActive) {\r\n          setIsFetching(false);\r\n        }\r\n      });\r\n\r\n    return () => {\r\n      isActive = false;\r\n    };\r\n  }, [graphContext, hasReachableSource, isDummyEncodingNode, requestId, sourceId, targetNodeId]);\r\n\r\n  const refresh = useCallback(() => {\r\n    if (!isDummyEncodingNode || !sourceId || !hasReachableSource) {\r\n      return;\r\n    }\r\n    setRequestId((value) => value + 1);\r\n  }, [hasReachableSource, isDummyEncodingNode, sourceId]);\r\n\r\n  const memoizedMetadata = useMemo(() => metadata, [metadata]);\r\n  const memoizedSuggestions = useMemo(() => suggestions, [suggestions]);\r\n\r\n  return {\r\n    isFetching,\r\n    error,\r\n    suggestions: memoizedSuggestions,\r\n    metadata: memoizedMetadata,\r\n    refresh,\r\n  };\r\n};\r\n","import { useCallback, useEffect, useMemo, useState } from 'react';\r\nimport {\r\n  fetchOneHotEncodingRecommendations,\r\n  type FeatureGraph,\r\n  type OneHotEncodingColumnSuggestion,\r\n  type OneHotEncodingRecommendationsResponse,\r\n  type OneHotEncodingSuggestionStatus,\r\n} from '../../../api';\r\n\r\ntype OneHotEncodingRecommendationMetadata = {\r\n  sampleSize: number | null;\r\n  generatedAt: string | null;\r\n  totalTextColumns: number;\r\n  recommendedCount: number;\r\n  cautionedCount: number;\r\n  highCardinalityColumns: string[];\r\n  notes: string[];\r\n};\r\n\r\ntype UseOneHotEncodingRecommendationsArgs = {\r\n  isOneHotEncodingNode: boolean;\r\n  sourceId?: string | null;\r\n  hasReachableSource: boolean;\r\n  graphContext?: FeatureGraph | { nodes: any[]; edges: any[] } | null;\r\n  targetNodeId?: string | null;\r\n};\r\n\r\ntype UseOneHotEncodingRecommendationsResult = {\r\n  isFetching: boolean;\r\n  error: string | null;\r\n  suggestions: OneHotEncodingColumnSuggestion[];\r\n  metadata: OneHotEncodingRecommendationMetadata;\r\n  refresh: () => void;\r\n};\r\n\r\nconst DEFAULT_METADATA: OneHotEncodingRecommendationMetadata = {\r\n  sampleSize: null,\r\n  generatedAt: null,\r\n  totalTextColumns: 0,\r\n  recommendedCount: 0,\r\n  cautionedCount: 0,\r\n  highCardinalityColumns: [],\r\n  notes: [],\r\n};\r\n\r\nconst normalizeStatus = (value: unknown): OneHotEncodingSuggestionStatus => {\r\n  if (typeof value !== 'string') {\r\n    return 'recommended';\r\n  }\r\n  const normalized = value.trim().toLowerCase();\r\n  switch (normalized) {\r\n    case 'recommended':\r\n    case 'high_cardinality':\r\n    case 'identifier':\r\n    case 'free_text':\r\n    case 'single_category':\r\n    case 'too_many_categories':\r\n      return normalized;\r\n    default:\r\n      return 'recommended';\r\n  }\r\n};\r\n\r\nconst coerceStringArray = (value: unknown): string[] => {\r\n  if (!Array.isArray(value)) {\r\n    return [];\r\n  }\r\n  return value\r\n    .map((entry) => {\r\n      if (entry === null || entry === undefined) {\r\n        return '';\r\n      }\r\n      return String(entry);\r\n    })\r\n    .filter((entry) => entry.trim().length > 0);\r\n};\r\n\r\nconst sanitizeSuggestions = (\r\n  payload?: OneHotEncodingRecommendationsResponse | null,\r\n): OneHotEncodingColumnSuggestion[] => {\r\n  if (!payload || !Array.isArray(payload.columns)) {\r\n    return [];\r\n  }\r\n\r\n  return payload.columns\r\n    .map((entry) => {\r\n      if (!entry || typeof entry !== 'object') {\r\n        return null;\r\n      }\r\n\r\n      const column = typeof entry.column === 'string' ? entry.column.trim() : '';\r\n      if (!column) {\r\n        return null;\r\n      }\r\n\r\n      const status = normalizeStatus((entry as any).status);\r\n      const reason = typeof entry.reason === 'string' ? entry.reason : '';\r\n      const dtype = typeof entry.dtype === 'string' ? entry.dtype : null;\r\n      const uniqueCount = typeof entry.unique_count === 'number' ? entry.unique_count : null;\r\n      const uniquePercentage = typeof entry.unique_percentage === 'number' ? entry.unique_percentage : null;\r\n      const missingPercentage = typeof entry.missing_percentage === 'number' ? entry.missing_percentage : null;\r\n      const textCategory = typeof entry.text_category === 'string' ? entry.text_category : null;\r\n      const sampleValues = coerceStringArray((entry as any).sample_values);\r\n      const estimatedDummyColumns = typeof entry.estimated_dummy_columns === 'number'\r\n        ? Math.max(0, Math.round(entry.estimated_dummy_columns))\r\n        : 0;\r\n      const score = typeof entry.score === 'number' ? entry.score : 0;\r\n      const selectable = typeof entry.selectable === 'boolean' ? entry.selectable : true;\r\n      const recommendedDropFirst = typeof entry.recommended_drop_first === 'boolean'\r\n        ? entry.recommended_drop_first\r\n        : false;\r\n\r\n      const sanitized: OneHotEncodingColumnSuggestion = {\r\n        column,\r\n        status,\r\n        reason,\r\n        dtype,\r\n        unique_count: uniqueCount,\r\n        unique_percentage: uniquePercentage,\r\n        missing_percentage: missingPercentage,\r\n        text_category: textCategory,\r\n        sample_values: sampleValues,\r\n        estimated_dummy_columns: estimatedDummyColumns,\r\n        score,\r\n        selectable,\r\n        recommended_drop_first: recommendedDropFirst,\r\n      };\r\n\r\n      return sanitized;\r\n    })\r\n    .filter((entry): entry is OneHotEncodingColumnSuggestion => Boolean(entry));\r\n};\r\n\r\nconst extractMetadata = (\r\n  payload?: OneHotEncodingRecommendationsResponse | null,\r\n): OneHotEncodingRecommendationMetadata => {\r\n  if (!payload || typeof payload !== 'object') {\r\n    return { ...DEFAULT_METADATA };\r\n  }\r\n\r\n  const sampleSize = typeof payload.sample_size === 'number' ? payload.sample_size : null;\r\n  const generatedAt = typeof payload.generated_at === 'string' ? payload.generated_at : null;\r\n  const totalTextColumns = Number(payload.total_text_columns ?? 0) || 0;\r\n  const recommendedCount = Number(payload.recommended_count ?? 0) || 0;\r\n  const cautionedCount = Number(payload.cautioned_count ?? 0) || 0;\r\n  const highCardinalityColumns = coerceStringArray(payload.high_cardinality_columns);\r\n  const notes = coerceStringArray(payload.notes);\r\n\r\n  return {\r\n    sampleSize,\r\n    generatedAt,\r\n    totalTextColumns,\r\n    recommendedCount,\r\n    cautionedCount,\r\n    highCardinalityColumns,\r\n    notes,\r\n  };\r\n};\r\n\r\nexport const useOneHotEncodingRecommendations = ({\r\n  isOneHotEncodingNode,\r\n  sourceId,\r\n  hasReachableSource,\r\n  graphContext,\r\n  targetNodeId,\r\n}: UseOneHotEncodingRecommendationsArgs): UseOneHotEncodingRecommendationsResult => {\r\n  const [isFetching, setIsFetching] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [suggestions, setSuggestions] = useState<OneHotEncodingColumnSuggestion[]>([]);\r\n  const [metadata, setMetadata] = useState<OneHotEncodingRecommendationMetadata>({ ...DEFAULT_METADATA });\r\n  const [requestId, setRequestId] = useState(0);\r\n\r\n  useEffect(() => {\r\n    let isActive = true;\r\n\r\n    const resetState = (message?: string | null) => {\r\n      setSuggestions([]);\r\n      setMetadata({ ...DEFAULT_METADATA });\r\n      setIsFetching(false);\r\n      setError(message ?? null);\r\n    };\r\n\r\n    if (!isOneHotEncodingNode) {\r\n      resetState();\r\n      return () => {\r\n        isActive = false;\r\n      };\r\n    }\r\n\r\n    if (!sourceId) {\r\n      resetState();\r\n      return () => {\r\n        isActive = false;\r\n      };\r\n    }\r\n\r\n    if (!hasReachableSource) {\r\n      resetState('Connect this node to the dataset input to load suggestions.');\r\n      return () => {\r\n        isActive = false;\r\n      };\r\n    }\r\n\r\n    setIsFetching(true);\r\n    setError(null);\r\n\r\n    fetchOneHotEncodingRecommendations(sourceId, {\r\n      graph: graphContext ?? null,\r\n      targetNodeId: targetNodeId ?? null,\r\n    })\r\n      .then((result) => {\r\n        if (!isActive) {\r\n          return;\r\n        }\r\n        setSuggestions(sanitizeSuggestions(result));\r\n        setMetadata(extractMetadata(result));\r\n      })\r\n      .catch((err: any) => {\r\n        if (!isActive) {\r\n          return;\r\n        }\r\n        const message = typeof err?.message === 'string' ? err.message : 'Unable to load one-hot encoding suggestions';\r\n        resetState(message);\r\n      })\r\n      .finally(() => {\r\n        if (isActive) {\r\n          setIsFetching(false);\r\n        }\r\n      });\r\n\r\n    return () => {\r\n      isActive = false;\r\n    };\r\n  }, [graphContext, hasReachableSource, isOneHotEncodingNode, requestId, sourceId, targetNodeId]);\r\n\r\n  const refresh = useCallback(() => {\r\n    if (!isOneHotEncodingNode || !sourceId || !hasReachableSource) {\r\n      return;\r\n    }\r\n    setRequestId((value) => value + 1);\r\n  }, [hasReachableSource, isOneHotEncodingNode, sourceId]);\r\n\r\n  const memoizedMetadata = useMemo(() => metadata, [metadata]);\r\n  const memoizedSuggestions = useMemo(() => suggestions, [suggestions]);\r\n\r\n  return {\r\n    isFetching,\r\n    error,\r\n    suggestions: memoizedSuggestions,\r\n    metadata: memoizedMetadata,\r\n    refresh,\r\n  };\r\n};\r\n","// Guidance text surfaced by NodeSettingsModal for data consistency nodes.\r\nexport type GuidanceEntry = {\r\n  title: string;\r\n  body: string;\r\n};\r\n\r\nexport const DATA_CONSISTENCY_GUIDANCE: Record<string, GuidanceEntry> = {\r\n  trim_whitespace: {\r\n    title: 'Use after Dataset snapshot or Missing indicator nodes',\r\n    body: 'Great for cleaning string columns before alias replacement or case normalization. Auto-detects text columns when left blank.',\r\n  },\r\n  normalize_text_case: {\r\n    title: 'Use after trimming and alias cleanup',\r\n    body: 'Keeps categorical values consistent for joins and grouping. Pair with Dataset profile or Preview to confirm column impacts.',\r\n  },\r\n  replace_aliases_typos: {\r\n    title: 'Requires Dataset profile insights',\r\n    body: 'Apply after profiling so you can confirm value distributions. Combine with custom pairs to align business-specific labels.',\r\n  },\r\n  standardize_date_formats: {\r\n    title: 'Run after parsing-friendly nodes',\r\n    body: 'Normalizes mixed date strings into the format you choose. Works best once whitespace and punctuation cleanup nodes have run.',\r\n  },\r\n  remove_special_characters: {\r\n    title: 'Pair with Trim whitespace or Regex cleanup',\r\n    body: 'Strips punctuation or noise from text fields before alias grouping. Preview to ensure replacements retain the intent of each field.',\r\n  },\r\n  replace_invalid_values: {\r\n    title: 'Use after Outlier diagnostics or Dataset profile',\r\n    body: 'Flags negative, zero, or out-of-range numeric placeholders and converts them to missing for downstream handling.',\r\n  },\r\n  regex_replace_fix: {\r\n    title: 'Configure after reviewing Dataset snapshot',\r\n    body: 'Use presets for quick fixes or supply a custom regex. Ideal before date standardization or alias cleanup passes.',\r\n  },\r\n};\r\n","import React from 'react';\r\nimport type {\r\n  OutlierMethodDetail,\r\n  OutlierMethodName,\r\n  OutlierNodeSignal,\r\n} from '../../../../api';\r\nimport {\r\n  OUTLIER_METHOD_FALLBACK_LABELS,\r\n  OUTLIER_METHOD_ORDER,\r\n  OUTLIER_METHOD_DEFAULT_PARAMETERS,\r\n  OUTLIER_PARAMETER_KEYS,\r\n  type NormalizedOutlierConfig,\r\n  type OutlierMethodOption,\r\n  type OutlierRecommendationRow,\r\n} from './outlierSettings';\r\n\r\nconst formatParameterLabel = (methodDetail: OutlierMethodDetail | null, parameter: string): string => {\r\n  const help = methodDetail?.parameter_help?.[parameter];\r\n  if (help) {\r\n    return help;\r\n  }\r\n  const fallback = parameter.replace(/_/g, ' ').trim();\r\n  return fallback.charAt(0).toUpperCase() + fallback.slice(1);\r\n};\r\n\r\nconst resolvePreviewSummary = (signal: OutlierNodeSignal | null | undefined): string | null => {\r\n  if (!signal) {\r\n    return null;\r\n  }\r\n  const parts: string[] = [];\r\n  if (signal.removed_rows && signal.removed_rows > 0) {\r\n    parts.push(`Removed ${signal.removed_rows} row${signal.removed_rows === 1 ? '' : 's'}`);\r\n  }\r\n  if (Array.isArray(signal.clipped_columns) && signal.clipped_columns.length) {\r\n    const unique = Array.from(new Set(signal.clipped_columns));\r\n    parts.push(`Winsorized ${unique.length} column${unique.length === 1 ? '' : 's'}`);\r\n  }\r\n  if (!parts.length) {\r\n    parts.push('No rows removed or clipped during the last preview');\r\n  }\r\n  if (Array.isArray(signal.skipped_columns) && signal.skipped_columns.length) {\r\n    const skipped = signal.skipped_columns.join(', ');\r\n    parts.push(`Skipped columns: ${skipped}`);\r\n  }\r\n  return parts.join('  ');\r\n};\r\n\r\nconst resolveParameterValue = (\r\n  method: OutlierMethodName,\r\n  parameter: string,\r\n  columnParameters: Record<string, Record<string, number>>,\r\n  column: string,\r\n  methodParameters: Record<OutlierMethodName, Record<string, number>>,\r\n): { value: number | '';\r\n  fallback: number | null } => {\r\n  const columnParameterMap = columnParameters[column] ?? {};\r\n  if (Object.prototype.hasOwnProperty.call(columnParameterMap, parameter)) {\r\n    const numeric = columnParameterMap[parameter];\r\n    if (typeof numeric === 'number' && Number.isFinite(numeric)) {\r\n      return { value: numeric, fallback: null };\r\n    }\r\n  }\r\n  const globalParameters = methodParameters[method] ?? {};\r\n  const globalValue = globalParameters[parameter];\r\n  if (typeof globalValue === 'number' && Number.isFinite(globalValue)) {\r\n    return { value: '', fallback: globalValue };\r\n  }\r\n  const defaultValue = OUTLIER_METHOD_DEFAULT_PARAMETERS[method]?.[parameter] ?? null;\r\n  return { value: '', fallback: defaultValue ?? null };\r\n};\r\n\r\nconst resolvePlaceholder = (fallback: number | null): string => {\r\n  if (typeof fallback === 'number' && Number.isFinite(fallback)) {\r\n    return String(fallback);\r\n  }\r\n  return '';\r\n};\r\n\r\nconst PARAMETER_SUFFIX: Record<string, string> = {\r\n  lower_percentile: '%',\r\n  upper_percentile: '%',\r\n};\r\n\r\ntype OutlierInsightsSectionProps = {\r\n  sourceId?: string | null;\r\n  hasReachableSource: boolean;\r\n  isFetchingOutliers: boolean;\r\n  outlierConfig: NormalizedOutlierConfig;\r\n  outlierMethodOptions: OutlierMethodOption[];\r\n  outlierMethodDetailMap: Map<OutlierMethodName, OutlierMethodDetail>;\r\n  outlierDefaultDetail: OutlierMethodDetail | null;\r\n  outlierAutoDetectEnabled: boolean;\r\n  outlierSelectedCount: number;\r\n  outlierDefaultLabel: string;\r\n  outlierOverrideCount: number;\r\n  outlierParameterOverrideCount: number;\r\n  outlierOverrideExampleSummary: string | null;\r\n  outlierHasOverrides: boolean;\r\n  outlierRecommendationRows: OutlierRecommendationRow[];\r\n  outlierHasRecommendations: boolean;\r\n  outlierStatusMessage: string | null;\r\n  outlierError: string | null;\r\n  outlierSampleSize: number | null;\r\n  relativeOutlierGeneratedAt: string | null;\r\n  outlierPreviewSignal: OutlierNodeSignal | null;\r\n  formatMetricValue: (value: number) => string;\r\n  formatNumericStat: (value: number) => string;\r\n  onApplyAllRecommendations: () => void;\r\n  onClearOverrides: () => void;\r\n  onDefaultMethodChange: (method: OutlierMethodName) => void;\r\n  onAutoDetectToggle: (checked: boolean) => void;\r\n  onOverrideSelect: (column: string, value: string) => void;\r\n  onMethodParameterChange: (method: OutlierMethodName, parameter: string, value: number | null) => void;\r\n  onColumnParameterChange: (column: string, parameter: string, value: number | null) => void;\r\n};\r\n\r\nexport const OutlierInsightsSection: React.FC<OutlierInsightsSectionProps> = ({\r\n  sourceId,\r\n  hasReachableSource,\r\n  isFetchingOutliers,\r\n  outlierConfig,\r\n  outlierMethodOptions,\r\n  outlierMethodDetailMap,\r\n  outlierDefaultDetail,\r\n  outlierAutoDetectEnabled,\r\n  outlierSelectedCount,\r\n  outlierDefaultLabel,\r\n  outlierOverrideCount,\r\n  outlierParameterOverrideCount,\r\n  outlierOverrideExampleSummary,\r\n  outlierHasOverrides,\r\n  outlierRecommendationRows,\r\n  outlierHasRecommendations,\r\n  outlierStatusMessage,\r\n  outlierError,\r\n  outlierSampleSize,\r\n  relativeOutlierGeneratedAt,\r\n  outlierPreviewSignal,\r\n  formatMetricValue,\r\n  formatNumericStat,\r\n  onApplyAllRecommendations,\r\n  onClearOverrides,\r\n  onDefaultMethodChange,\r\n  onAutoDetectToggle,\r\n  onOverrideSelect,\r\n  onMethodParameterChange,\r\n  onColumnParameterChange,\r\n}) => {\r\n  const previewSummary = resolvePreviewSummary(outlierPreviewSignal);\r\n\r\n  return (\r\n    <section className=\"canvas-modal__section\">\r\n      <div className=\"canvas-modal__section-header\">\r\n        <h3>Outlier insights</h3>\r\n        <div className=\"canvas-modal__section-actions\">\r\n          <button\r\n            type=\"button\"\r\n            className=\"btn btn-primary\"\r\n            onClick={onApplyAllRecommendations}\r\n            disabled={!outlierHasRecommendations}\r\n          >\r\n            Apply recommendations\r\n          </button>\r\n          <button\r\n            type=\"button\"\r\n            className=\"btn btn-outline-secondary\"\r\n            onClick={onClearOverrides}\r\n            disabled={!outlierHasOverrides}\r\n          >\r\n            Clear overrides\r\n          </button>\r\n        </div>\r\n      </div>\r\n      <p className=\"canvas-modal__note\">\r\n        Diagnose numeric outliers and configure how to handle them across the dataset. Preview updates immediately, letting you validate the impact before saving this node.\r\n      </p>\r\n      {!sourceId && (\r\n        <p className=\"canvas-modal__note canvas-modal__note--warning\">\r\n          Select a dataset to surface outlier diagnostics.\r\n        </p>\r\n      )}\r\n      {sourceId && !hasReachableSource && (\r\n        <p className=\"canvas-modal__note canvas-modal__note--warning\">\r\n          Connect this step to an upstream output to analyse numeric distributions.\r\n        </p>\r\n      )}\r\n      {relativeOutlierGeneratedAt && (\r\n        <p className=\"canvas-modal__note\">\r\n          Insights generated {relativeOutlierGeneratedAt}\r\n          {outlierSampleSize !== null\r\n            ? ` on ${formatMetricValue(outlierSampleSize)} row${outlierSampleSize === 1 ? '' : 's'}.`\r\n            : '.'}\r\n        </p>\r\n      )}\r\n      {!relativeOutlierGeneratedAt && outlierSampleSize !== null && (\r\n        <p className=\"canvas-modal__note\">\r\n          Insights generated on {formatMetricValue(outlierSampleSize)} row{outlierSampleSize === 1 ? '' : 's'}.\r\n        </p>\r\n      )}\r\n      {previewSummary && <p className=\"canvas-modal__note\">Last preview: {previewSummary}</p>}\r\n      <div className=\"canvas-modal__parameter-grid\">\r\n        <div className=\"canvas-modal__parameter-field\">\r\n          <div className=\"canvas-modal__parameter-label\">\r\n            <span>Default outlier method</span>\r\n          </div>\r\n          <div className=\"canvas-scaling__method-toggle\" role=\"group\" aria-label=\"Default outlier method\">\r\n            {outlierMethodOptions.map((option) => {\r\n              const methodDetail = outlierMethodDetailMap.get(option.value) ?? null;\r\n              const isActive = option.value === outlierConfig.defaultMethod;\r\n              return (\r\n                <button\r\n                  key={option.value}\r\n                  type=\"button\"\r\n                  className={`canvas-scaling__method-button${isActive ? ' canvas-scaling__method-button--active' : ''}`}\r\n                  aria-pressed={isActive}\r\n                  onClick={() => onDefaultMethodChange(option.value)}\r\n                >\r\n                  <span className=\"canvas-scaling__method-label\">{option.label}</span>\r\n                  {methodDetail?.description && (\r\n                    <span className=\"canvas-scaling__method-description\">{methodDetail.description}</span>\r\n                  )}\r\n                </button>\r\n              );\r\n            })}\r\n          </div>\r\n          {outlierDefaultDetail?.description && (\r\n            <p className=\"canvas-modal__parameter-description\">{outlierDefaultDetail.description}</p>\r\n          )}\r\n        </div>\r\n        <div className=\"canvas-modal__parameter-field\">\r\n          <div className=\"canvas-modal__parameter-label\">\r\n            <span>Auto-detect numeric columns</span>\r\n          </div>\r\n          <label className=\"canvas-modal__boolean-control\">\r\n            <input\r\n              type=\"checkbox\"\r\n              checked={outlierAutoDetectEnabled}\r\n              onChange={(event) => onAutoDetectToggle(event.target.checked)}\r\n            />\r\n            <span>{outlierAutoDetectEnabled ? 'Enabled' : 'Disabled'}</span>\r\n          </label>\r\n          <p className=\"canvas-modal__parameter-description\">\r\n            Auto-detection tracks numeric features so newly profiled columns join the node automatically.\r\n          </p>\r\n        </div>\r\n      </div>\r\n\r\n      <section className=\"canvas-modal__parameter-field\">\r\n        <div className=\"canvas-modal__parameter-label\">\r\n          <span>Global method parameters</span>\r\n        </div>\r\n        <p className=\"canvas-modal__parameter-description canvas-outlier__method-note\">\r\n          Tune default thresholds for each strategy. Column overrides can refine these further.\r\n        </p>\r\n        <div className=\"canvas-outlier__method-grid\">\r\n          {OUTLIER_METHOD_ORDER.map((method) => {\r\n            const detail = outlierMethodDetailMap.get(method) ?? null;\r\n            const parameters = OUTLIER_PARAMETER_KEYS[method];\r\n            if (!parameters.length) {\r\n              return null;\r\n            }\r\n            const label = detail?.label ?? OUTLIER_METHOD_FALLBACK_LABELS[method] ?? method;\r\n            return (\r\n              <article key={`outlier-method-${method}`} className=\"canvas-outlier__method-card\">\r\n                <header className=\"canvas-outlier__method-header\">\r\n                  <span className=\"canvas-outlier__method-title\">{label}</span>\r\n                  {detail?.description && (\r\n                    <p className=\"canvas-outlier__method-summary\">{detail.description}</p>\r\n                  )}\r\n                </header>\r\n                <div className=\"canvas-outlier__parameter-list\">\r\n                  {parameters.map((parameter) => {\r\n                  const value = outlierConfig.methodParameters[method]?.[parameter] ?? null;\r\n                  const suffix = PARAMETER_SUFFIX[parameter] ?? '';\r\n                  return (\r\n                      <label key={`${method}-${parameter}`} className=\"canvas-outlier__method-parameter\">\r\n                        <span className=\"canvas-outlier__parameter-label\">\r\n                          {formatParameterLabel(detail, parameter)}\r\n                        </span>\r\n                        <div className=\"canvas-outlier__method-input\">\r\n                          <input\r\n                            type=\"number\"\r\n                            className=\"canvas-outlier__method-input-field\"\r\n                            value={typeof value === 'number' && Number.isFinite(value) ? value : ''}\r\n                            placeholder={resolvePlaceholder(\r\n                              OUTLIER_METHOD_DEFAULT_PARAMETERS[method]?.[parameter] ?? null,\r\n                            )}\r\n                            onChange={(event) => {\r\n                              const raw = event.target.value;\r\n                              if (raw === '') {\r\n                                onMethodParameterChange(method, parameter, null);\r\n                              } else {\r\n                                const parsed = Number(raw);\r\n                                onMethodParameterChange(\r\n                                  method,\r\n                                  parameter,\r\n                                  Number.isFinite(parsed) ? parsed : null,\r\n                                );\r\n                              }\r\n                            }}\r\n                          />\r\n                          {suffix && <span className=\"canvas-outlier__parameter-suffix\">{suffix}</span>}\r\n                        </div>\r\n                      </label>\r\n                    );\r\n                  })}\r\n                </div>\r\n              </article>\r\n            );\r\n          })}\r\n        </div>\r\n      </section>\r\n\r\n      <p className=\"canvas-modal__note\">\r\n        Tracking <strong>{outlierSelectedCount}</strong> column{outlierSelectedCount === 1 ? '' : 's'}  Default method{' '}\r\n        <strong>{outlierDefaultLabel}</strong>{' '}\r\n        {outlierAutoDetectEnabled ? ' Auto-detect on' : ' Auto-detect off'}\r\n        {(() => {\r\n          const totalOverrides = outlierOverrideCount + outlierParameterOverrideCount;\r\n          if (!totalOverrides) {\r\n            return '  No overrides yet';\r\n          }\r\n          const details: string[] = [];\r\n          if (outlierOverrideCount > 0) {\r\n            details.push(\r\n              outlierOverrideExampleSummary\r\n                ? `${outlierOverrideCount} method override${outlierOverrideCount === 1 ? '' : 's'} (${outlierOverrideExampleSummary})`\r\n                : `${outlierOverrideCount} method override${outlierOverrideCount === 1 ? '' : 's'}`,\r\n            );\r\n          }\r\n          if (outlierParameterOverrideCount > 0) {\r\n            details.push(\r\n              `${outlierParameterOverrideCount} parameter override${outlierParameterOverrideCount === 1 ? '' : 's'}`,\r\n            );\r\n          }\r\n          return `  Overrides: ${details.join('; ')}`;\r\n        })()}\r\n      </p>\r\n\r\n      {isFetchingOutliers && <p className=\"canvas-modal__note\">Loading outlier diagnostics</p>}\r\n      {!isFetchingOutliers && outlierError && sourceId && hasReachableSource && (\r\n        <p className=\"canvas-modal__note canvas-modal__note--error\">{outlierError}</p>\r\n      )}\r\n      {!isFetchingOutliers && !outlierError && (\r\n        <>\r\n          {outlierStatusMessage && <p className=\"canvas-modal__note\">{outlierStatusMessage}</p>}\r\n          {outlierRecommendationRows.length > 0 && (\r\n            <div className=\"canvas-cast__body\">\r\n              <div className=\"canvas-cast__table-wrapper\">\r\n                <table className=\"canvas-cast__table canvas-scaling__table\">\r\n                  <thead>\r\n                    <tr>\r\n                      <th scope=\"col\">Column</th>\r\n                      <th scope=\"col\">Recommendation</th>\r\n                      <th scope=\"col\">Distribution</th>\r\n                      <th scope=\"col\">Configured method</th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                    {outlierRecommendationRows.map((row) => {\r\n                      const rowNeedsAttention =\r\n                        !row.isSkipped && !row.isExcluded && row.recommendedMethod && row.recommendedMethod !== row.currentMethod;\r\n                      const rowClasses = ['canvas-cast__row'];\r\n                      if (rowNeedsAttention) {\r\n                        rowClasses.push('canvas-cast__row--attention');\r\n                      }\r\n                      if (row.isOverrideApplied) {\r\n                        rowClasses.push('canvas-cast__row--override');\r\n                      }\r\n                      if (row.isSkipped) {\r\n                        rowClasses.push('canvas-cast__row--muted');\r\n                      }\r\n\r\n                      const selectValue = row.isSkipped\r\n                        ? '__skip__'\r\n                        : row.isOverrideApplied\r\n                          ? row.currentMethod\r\n                          : '__default__';\r\n                      const overrideHelper = row.isOverrideApplied\r\n                        ? `Override -> ${row.currentMethodLabel}`\r\n                        : row.isSkipped\r\n                          ? 'Skipped (column will not be altered)'\r\n                          : row.isSelected\r\n                            ? `Inheriting ${outlierDefaultLabel}`\r\n                            : 'Pending inclusion';\r\n\r\n                      const stats = row.stats;\r\n                      const statsParts: string[] = [];\r\n                      if (typeof stats.valid_count === 'number' && Number.isFinite(stats.valid_count)) {\r\n                        statsParts.push(`${formatMetricValue(stats.valid_count)} valid rows`);\r\n                      }\r\n                      const hasMin = typeof stats.minimum === 'number' && Number.isFinite(stats.minimum);\r\n                      const hasMax = typeof stats.maximum === 'number' && Number.isFinite(stats.maximum);\r\n                      if (hasMin || hasMax) {\r\n                        const minDisplay = hasMin ? formatNumericStat(stats.minimum as number) : '';\r\n                        const maxDisplay = hasMax ? formatNumericStat(stats.maximum as number) : '';\r\n                        statsParts.push(`Range ${minDisplay}  ${maxDisplay}`);\r\n                      }\r\n                      if (typeof stats.mean === 'number' && Number.isFinite(stats.mean)) {\r\n                        statsParts.push(`Mean ${formatNumericStat(stats.mean)}`);\r\n                      }\r\n                      if (typeof stats.median === 'number' && Number.isFinite(stats.median)) {\r\n                        statsParts.push(`Median ${formatNumericStat(stats.median)}`);\r\n                      }\r\n                      if (typeof stats.stddev === 'number' && Number.isFinite(stats.stddev)) {\r\n                        statsParts.push(` ${formatNumericStat(stats.stddev)}`);\r\n                      }\r\n                      const statsSummary = statsParts.length ? statsParts.join('  ') : null;\r\n\r\n                      const recommendationSummary = (() => {\r\n                        if (!row.recommendedMethod || !row.recommendedLabel) {\r\n                          return row.recommendedReason || 'No outlier risk detected';\r\n                        }\r\n                        return row.recommendedReason\r\n                          ? `${row.recommendedLabel}  ${row.recommendedReason}`\r\n                          : row.recommendedLabel;\r\n                      })();\r\n\r\n                      const columnParameters = outlierConfig.columnParameters;\r\n                      const methodParameters = outlierConfig.methodParameters;\r\n                      const parameterKeys = OUTLIER_PARAMETER_KEYS[row.currentMethod] ?? [];\r\n\r\n                      return (\r\n                        <tr key={`outlier-row-${row.column}`} className={rowClasses.join(' ')}>\r\n                          <th scope=\"row\">\r\n                            <div className=\"canvas-cast__column-cell\">\r\n                              <span className=\"canvas-cast__column-name\">{row.column}</span>\r\n                              <div className=\"canvas-cast__column-meta\">\r\n                                {row.dtype && <span className=\"canvas-cast__muted\">dtype: {row.dtype}</span>}\r\n                                {row.isExcluded && (\r\n                                  <span className=\"canvas-cast__muted\">Excluded from outlier evaluation (non-numeric)</span>\r\n                                )}\r\n                                {row.isSelected && !row.isExcluded && (\r\n                                  <span className=\"canvas-cast__badge canvas-cast__badge--selected\">In node</span>\r\n                                )}\r\n                                {row.isSkipped && !row.isExcluded && (\r\n                                  <span className=\"canvas-cast__badge canvas-cast__badge--skipped\">Skipped</span>\r\n                                )}\r\n                                {row.isOverrideApplied && (\r\n                                  <span className=\"canvas-cast__badge canvas-cast__badge--override\">Override</span>\r\n                                )}\r\n                                {row.hasMissing && (\r\n                                  <span className=\"canvas-cast__muted\">Contains missing values</span>\r\n                                )}\r\n                              </div>\r\n                            </div>\r\n                          </th>\r\n                          <td>\r\n                            <div className=\"canvas-cast__recommendation\">\r\n                              {row.recommendedLabel ? (\r\n                                <span\r\n                                  className={`canvas-cast__chip${\r\n                                    rowNeedsAttention\r\n                                      ? ' canvas-cast__chip--attention'\r\n                                      : ' canvas-cast__chip--applied'\r\n                                  }`}\r\n                                >\r\n                                  {row.recommendedLabel}\r\n                                </span>\r\n                              ) : (\r\n                                <span className=\"canvas-cast__chip\">No action needed</span>\r\n                              )}\r\n                              {recommendationSummary && (\r\n                                <span className=\"canvas-cast__recommendation-note\">{recommendationSummary}</span>\r\n                              )}\r\n                            </div>\r\n                          </td>\r\n                          <td>\r\n                            {statsSummary ? (\r\n                              <span>{statsSummary}</span>\r\n                            ) : (\r\n                              <span className=\"canvas-cast__muted\">No distribution summary</span>\r\n                            )}\r\n                          </td>\r\n                          <td>\r\n                            <div className=\"canvas-cast__target\">\r\n                              <select\r\n                                value={selectValue}\r\n                                onChange={(event) => onOverrideSelect(row.column, event.target.value)}\r\n                                disabled={row.isExcluded}\r\n                              >\r\n                                <option value=\"__default__\">Inherit default ({outlierDefaultLabel})</option>\r\n                                <option value=\"__skip__\">Skip outlier handling</option>\r\n                                {outlierMethodOptions.map((option) => (\r\n                                  <option key={`${row.column}-${option.value}`} value={option.value}>\r\n                                    {option.label}\r\n                                  </option>\r\n                                ))}\r\n                              </select>\r\n                              <span className=\"canvas-cast__target-note\">{overrideHelper}</span>\r\n                              {parameterKeys.length > 0 && !row.isExcluded && (\r\n                                <div className=\"canvas-outlier__parameters\">\r\n                                  {parameterKeys.map((parameterKey) => {\r\n                                    const { value, fallback } = resolveParameterValue(\r\n                                      row.currentMethod,\r\n                                      parameterKey,\r\n                                      columnParameters,\r\n                                      row.column,\r\n                                      methodParameters,\r\n                                    );\r\n                                    const suffix = PARAMETER_SUFFIX[parameterKey] ?? '';\r\n                                    return (\r\n                                      <label key={`${row.column}-${row.currentMethod}-${parameterKey}`}>\r\n                                        <span>{parameterKey.replace(/_/g, ' ')}</span>\r\n                                        <input\r\n                                          type=\"number\"\r\n                                          value={value}\r\n                                          placeholder={resolvePlaceholder(fallback)}\r\n                                          onChange={(event) => {\r\n                                            const raw = event.target.value;\r\n                                            if (raw === '') {\r\n                                              onColumnParameterChange(row.column, parameterKey, null);\r\n                                            } else {\r\n                                              const parsed = Number(raw);\r\n                                              onColumnParameterChange(\r\n                                                row.column,\r\n                                                parameterKey,\r\n                                                Number.isFinite(parsed) ? parsed : null,\r\n                                              );\r\n                                            }\r\n                                          }}\r\n                                        />\r\n                                        {suffix && <span className=\"canvas-outlier__parameter-suffix\">{suffix}</span>}\r\n                                      </label>\r\n                                    );\r\n                                  })}\r\n                                </div>\r\n                              )}\r\n                            </div>\r\n                          </td>\r\n                        </tr>\r\n                      );\r\n                    })}\r\n                  </tbody>\r\n                </table>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </>\r\n      )}\r\n    </section>\r\n  );\r\n};\r\n","import React, { useCallback, useEffect, useMemo, useRef, useState, useId } from 'react';\r\nimport type { Node } from 'react-flow-renderer';\r\nimport {\r\n  FeatureMathNodeSignal,\r\n  FeatureNodeParameter,\r\n  OutlierMethodName,\r\n  OutlierNodeSignal,\r\n  TransformerAuditNodeSignal,\r\n  PipelinePreviewSchema,\r\n  SkewnessColumnDistribution,\r\n  ScalingMethodName,\r\n  PolynomialFeaturesNodeSignal,\r\n  FeatureSelectionNodeSignal,\r\n  triggerFullDatasetExecution,\r\n  type BinningColumnRecommendation,\r\n  type BinningExcludedColumn,\r\n} from '../api';\r\nimport {\r\n  DropMissingColumnsSection,\r\n  useDropMissingColumns,\r\n} from './node-settings/nodes/drop_col_rows/DropMissingColumnsSection';\r\nimport { DropMissingRowsSection } from './node-settings/nodes/drop_col_rows/DropMissingRowsSection';\r\nimport { RemoveDuplicatesSection } from './node-settings/nodes/remove_duplicates/RemoveDuplicatesSection';\r\nimport { DEFAULT_KEEP_STRATEGY, type KeepStrategy } from './node-settings/nodes/remove_duplicates/removeDuplicatesSettings';\r\nimport { CastColumnTypesSection } from './node-settings/nodes/cast_column/CastColumnTypesSection';\r\nimport { DataSnapshotSection } from './node-settings/nodes/dataset/DataSnapshotSection';\r\nimport { DatasetProfileSection, useDatasetProfileController } from './node-settings/nodes/dataset/datasetProfile';\r\nimport { NodeSettingsHeader } from './node-settings/layout/NodeSettingsHeader';\r\nimport { NodeSettingsFooter } from './node-settings/layout/NodeSettingsFooter';\r\nimport { ensureArrayOfString } from './node-settings/sharedUtils';\r\nimport {\r\n  formatMetricValue,\r\n  formatMissingPercentage,\r\n  formatNumericStat,\r\n  formatModeStat,\r\n  getPriorityClass,\r\n  getPriorityLabel,\r\n} from './node-settings/formatting';\r\nimport {\r\n  BINNED_SAMPLE_PRESETS,\r\n  normalizeBinningConfigValue,\r\n  type BinnedDistributionBin,\r\n  type BinnedDistributionCard,\r\n  type BinnedSamplePresetValue,\r\n  type BinningLabelFormat,\r\n  type BinningMissingStrategy,\r\n  type BinningStrategy,\r\n  type KBinsEncode,\r\n  type KBinsStrategy,\r\n} from './node-settings/nodes/binning/binningSettings';\r\nimport { BinNumericColumnsSection } from './node-settings/nodes/binning/BinNumericColumnsSection';\r\nimport { BinningInsightsSection } from './node-settings/nodes/binning/BinningInsightsSection';\r\nimport { BinnedDistributionSection } from './node-settings/nodes/binning/BinnedDistributionSection';\r\nimport {\r\n  IMPUTATION_METHOD_OPTIONS,\r\n  buildDefaultOptionsForMethod,\r\n  isNumericImputationMethod,\r\n  normalizeImputationStrategies,\r\n  sanitizeOptionsForMethod,\r\n  serializeImputationStrategies,\r\n  type ImputationMethodOption,\r\n  type ImputationStrategyConfig,\r\n  type ImputationStrategyMethod,\r\n  type ImputationStrategyOptions,\r\n} from './node-settings/nodes/imputation/imputationSettings';\r\nimport { ImputationStrategiesSection, type ImputationSchemaDiagnostics } from './node-settings/nodes/imputation/ImputationStrategiesSection';\r\nimport { SCALING_METHOD_ORDER, normalizeScalingConfigValue } from './node-settings/nodes/scaling/scalingSettings';\r\nimport { ScalingInsightsSection } from './node-settings/nodes/scaling/ScalingInsightsSection';\r\nimport { SkewnessInsightsSection } from './node-settings/nodes/skewness/SkewnessInsightsSection';\r\nimport {\r\n  dedupeSkewnessTransformations,\r\n  normalizeSkewnessTransformations,\r\n  type SkewnessTransformationConfig,\r\n} from './node-settings/nodes/skewness/skewnessSettings';\r\nimport {\r\n  resolveMissingIndicatorSuffix,\r\n  buildMissingIndicatorInsights,\r\n  type MissingIndicatorInsights,\r\n} from './node-settings/nodes/missing_indicator/missingIndicatorSettings';\r\nimport { MissingIndicatorInsightsSection } from './node-settings/nodes/missing_indicator/MissingIndicatorInsightsSection';\r\nimport { ReplaceAliasesSection } from './node-settings/nodes/replace_aliases/ReplaceAliasesSection';\r\nimport {\r\n  ALIAS_MODE_OPTIONS,\r\n  DEFAULT_ALIAS_MODE,\r\n  normalizeAliasStrategies,\r\n  resolveAliasMode,\r\n  serializeAliasStrategies,\r\n  type AliasMode,\r\n  type AliasStrategyConfig,\r\n} from './node-settings/nodes/replace_aliases/replaceAliasesSettings';\r\nimport { StandardizeDatesSection } from './node-settings/nodes/standardize_date/StandardizeDatesSection';\r\nimport {\r\n  DATE_MODE_OPTIONS,\r\n  normalizeDateFormatStrategies,\r\n  resolveDateMode,\r\n  serializeDateFormatStrategies,\r\n  type DateMode,\r\n  type DateFormatStrategyConfig,\r\n} from './node-settings/nodes/standardize_date/standardizeDateSettings';\r\nimport { TrimWhitespaceSection } from './node-settings/nodes/trim_white_space/TrimWhitespaceSection';\r\nimport { RemoveSpecialCharactersSection } from './node-settings/nodes/remove_special_char/RemoveSpecialCharactersSection';\r\nimport { NormalizeTextCaseSection } from './node-settings/nodes/normalize_text/NormalizeTextCaseSection';\r\nimport { RegexCleanupSection } from './node-settings/nodes/regex_node/RegexCleanupSection';\r\nimport { ReplaceInvalidValuesSection } from './node-settings/nodes/replace_invalid_values/ReplaceInvalidValuesSection';\r\nimport { FeatureMathSection } from './node-settings/nodes/feature_math/FeatureMathSection';\r\nimport {\r\n  DATETIME_FEATURE_OPTIONS,\r\n  buildFeatureMathSummaries,\r\n  createFeatureMathOperation,\r\n  FeatureMathOperationDraft,\r\n  FeatureMathOperationType,\r\n  getMethodOptions,\r\n  normalizeFeatureMathOperations,\r\n  serializeFeatureMathOperations,\r\n} from './node-settings/nodes/feature_math/featureMathSettings';\r\nimport { LabelEncodingSection } from './node-settings/nodes/label_encoding/LabelEncodingSection';\r\nimport { TargetEncodingSection } from './node-settings/nodes/target_encoding/TargetEncodingSection';\r\nimport { HashEncodingSection } from './node-settings/nodes/hash_encoding/HashEncodingSection';\r\nimport { PolynomialFeaturesSection } from './node-settings/nodes/polynomial_features/PolynomialFeaturesSection';\r\nimport { FeatureSelectionSection } from './node-settings/nodes/feature_selection/FeatureSelectionSection';\r\nimport { OrdinalEncodingSection } from './node-settings/nodes/ordinal_encoding/OrdinalEncodingSection';\r\nimport { DummyEncodingSection } from './node-settings/nodes/dummy_encoding/DummyEncodingSection';\r\nimport { OneHotEncodingSection } from './node-settings/nodes/one_hot_encoding/OneHotEncodingSection';\r\nimport { TransformerAuditSection } from './node-settings/nodes/transformer_audit/TransformerAuditSection';\r\nimport { FeatureTargetSplitSection } from './node-settings/nodes/modeling/FeatureTargetSplitSection';\r\nimport { TrainTestSplitSection } from './node-settings/nodes/modeling/TrainTestSplitSection';\r\nimport { TrainModelDraftSection } from './node-settings/nodes/modeling/TrainModelDraftSection';\r\nimport { ModelTrainingSection } from './node-settings/nodes/modeling/ModelTrainingSection';\r\nimport { EvaluationPackSection } from './node-settings/nodes/modeling/EvaluationPackSection';\r\nimport { ModelRegistrySection } from './node-settings/nodes/modeling/ModelRegistrySection';\r\nimport { HyperparameterTuningSection } from './node-settings/nodes/modeling/HyperparameterTuningSection';\r\nimport { ClassResamplingSection, type ResamplingSchemaGuard } from './node-settings/nodes/resampling/ClassResamplingSection';\r\nimport { useCatalogFlags } from './node-settings/hooks/useCatalogFlags';\r\nimport { useScalingInsights } from './node-settings/hooks/useScalingInsights';\r\nimport { useBinningInsights } from './node-settings/hooks/useBinningInsights';\r\nimport { useSkewnessInsights } from './node-settings/hooks/useSkewnessInsights';\r\nimport { useBinnedDistribution } from './node-settings/hooks/useBinnedDistribution';\r\nimport { usePipelinePreview } from './node-settings/hooks/usePipelinePreview';\r\nimport { useDropColumnRecommendations } from './node-settings/hooks/useDropColumnRecommendations';\r\nimport { useAliasConfiguration } from './node-settings/hooks/useAliasConfiguration';\r\nimport { useOutlierRecommendations } from './node-settings/hooks/useOutlierRecommendations';\r\nimport { useNumericColumnAnalysis } from './node-settings/hooks/useNumericColumnAnalysis';\r\nimport { useNumericRangeSummaries } from './node-settings/hooks/useNumericRangeSummaries';\r\nimport { usePruneColumnSelections } from './node-settings/hooks/usePruneColumnSelections';\r\nimport { useTextCleanupConfiguration } from './node-settings/hooks/useTextCleanupConfiguration';\r\nimport { useReplaceInvalidConfiguration } from './node-settings/hooks/useReplaceInvalidConfiguration';\r\nimport { useStandardizeDatesConfiguration } from './node-settings/hooks/useStandardizeDatesConfiguration';\r\nimport { useScalingConfiguration } from './node-settings/hooks/useScalingConfiguration';\r\nimport { useOutlierConfiguration } from './node-settings/hooks/useOutlierConfiguration';\r\nimport { useBinningConfiguration } from './node-settings/hooks/useBinningConfiguration';\r\nimport { useImputationConfiguration } from './node-settings/hooks/useImputationConfiguration';\r\nimport { useModelingConfiguration } from './node-settings/hooks/useModelingConfiguration';\r\nimport {\r\n  useSkewnessConfiguration,\r\n  type SkewnessDistributionView,\r\n} from './node-settings/hooks/useSkewnessConfiguration';\r\nimport {\r\n  arraysAreEqual,\r\n  cloneConfig,\r\n  inferColumnSuggestions,\r\n  normalizeConfigBoolean,\r\n  pickAutoDetectValue,\r\n  stableStringify,\r\n} from './node-settings/utils/configParsers';\r\nimport { useLabelEncodingRecommendations } from './node-settings/hooks/useLabelEncodingRecommendations';\r\nimport { useTargetEncodingRecommendations } from './node-settings/hooks/useTargetEncodingRecommendations';\r\nimport { useHashEncodingRecommendations } from './node-settings/hooks/useHashEncodingRecommendations';\r\nimport { useOrdinalEncodingRecommendations } from './node-settings/hooks/useOrdinalEncodingRecommendations';\r\nimport { useDummyEncodingRecommendations } from './node-settings/hooks/useDummyEncodingRecommendations';\r\nimport { useOneHotEncodingRecommendations } from './node-settings/hooks/useOneHotEncodingRecommendations';\r\nimport { formatCellValue, formatColumnType, formatRelativeTime } from './node-settings/utils/formatters';\r\nimport { DATA_CONSISTENCY_GUIDANCE } from './node-settings/utils/guidance';\r\nimport { OutlierInsightsSection } from './node-settings/nodes/outlier/OutlierInsightsSection';\r\nimport { OUTLIER_METHOD_ORDER } from './node-settings/nodes/outlier/outlierSettings';\r\n\r\ntype NodeSettingsModalProps = {\r\n  node: Node;\r\n  onClose: () => void;\r\n  onUpdateConfig: (nodeId: string, config: Record<string, any>) => void;\r\n  onUpdateNodeData?: (nodeId: string, dataUpdates: Record<string, any>) => void;\r\n  sourceId?: string | null;\r\n  graphSnapshot?: {\r\n    nodes: any[];\r\n    edges: any[];\r\n  } | null;\r\n  onResetConfig?: (nodeId: string, config?: Record<string, any> | null) => void;\r\n  defaultConfigTemplate?: Record<string, any> | null;\r\n  isResetAvailable?: boolean;\r\n};\r\n\r\ntype MetadataEntry = {\r\n  label: string;\r\n  value: string;\r\n};\r\n\r\ntype HistogramSparklineProps = {\r\n  counts: number[];\r\n  binEdges: number[];\r\n  className?: string;\r\n};\r\n\r\ntype ConnectionHandleDescriptor = {\r\n  key: string;\r\n  label: string;\r\n  position?: number;\r\n  required?: boolean;\r\n  accepts?: string[];\r\n};\r\n\r\ntype ConnectionInfoSnapshot = {\r\n  inputs?: ConnectionHandleDescriptor[];\r\n  outputs?: ConnectionHandleDescriptor[];\r\n};\r\n\r\nconst toHandleKey = (nodeId: string, handleId?: string | null): string | null => {\r\n  if (!handleId || typeof handleId !== 'string') {\r\n    return null;\r\n  }\r\n  const prefix = `${nodeId}-`;\r\n  if (handleId.startsWith(prefix)) {\r\n    return handleId.slice(prefix.length);\r\n  }\r\n  const parts = handleId.split('-');\r\n  if (parts.length >= 2) {\r\n    return parts.slice(-2).join('-');\r\n  }\r\n  return handleId;\r\n};\r\n\r\nconst HistogramSparkline: React.FC<HistogramSparklineProps> = ({ counts, binEdges, className }) => {\r\n  const gradientId = useId();\r\n  const wrapperClass = className ?? 'canvas-skewness__histogram';\r\n  if (!counts || counts.length === 0 || !binEdges || binEdges.length !== counts.length + 1) {\r\n    return <div className={wrapperClass} aria-hidden=\"true\" />;\r\n  }\r\n\r\n  const maxCount = counts.reduce((acc, value) => Math.max(acc, value), 0);\r\n  const safeMax = maxCount > 0 ? maxCount : 1;\r\n  const binWidth = 100 / counts.length;\r\n\r\n  return (\r\n    <div className={wrapperClass} role=\"img\" aria-label=\"Histogram sparkline\">\r\n      <svg viewBox=\"0 0 100 60\">\r\n        <line x1=\"0\" y1=\"58\" x2=\"100\" y2=\"58\" stroke=\"rgba(148, 163, 184, 0.35)\" strokeWidth=\"0.75\" />\r\n        {counts.map((count, index) => {\r\n          const height = (count / safeMax) * 52;\r\n          const x = index * binWidth;\r\n          const y = 58 - height;\r\n          const width = Math.max(binWidth - 2, 1);\r\n          return (\r\n            <rect\r\n              key={`hist-bin-${index}`}\r\n              x={x + 1}\r\n              y={y}\r\n              width={width}\r\n              height={height}\r\n              rx={1.2}\r\n              ry={1.2}\r\n              fill={`url(#${gradientId})`}\r\n            />\r\n          );\r\n        })}\r\n        <defs>\r\n          <linearGradient id={gradientId} x1=\"0\" x2=\"0\" y1=\"0\" y2=\"1\">\r\n            <stop offset=\"0%\" stopColor=\"rgba(165, 180, 252, 0.95)\" />\r\n            <stop offset=\"100%\" stopColor=\"rgba(129, 140, 248, 0.35)\" />\r\n          </linearGradient>\r\n        </defs>\r\n      </svg>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst FEATURE_MATH_DATETIME_KEYS = new Set(DATETIME_FEATURE_OPTIONS.map((option) => option.value));\r\n\r\nconst sanitizeStringList = (values: string[] | undefined): string[] => {\r\n  if (!values || !values.length) {\r\n    return [];\r\n  }\r\n  return Array.from(\r\n    new Set(values.map((value) => value.trim()).filter((value) => value.length > 0)),\r\n  ).sort((a, b) => a.localeCompare(b));\r\n};\r\n\r\nconst sanitizeConstantsList = (values: number[] | undefined): number[] => {\r\n  if (!values || !values.length) {\r\n    return [];\r\n  }\r\n  return values.filter((value) => Number.isFinite(value));\r\n};\r\n\r\nconst sanitizeDatetimeFeaturesList = (values: string[] | undefined): string[] => {\r\n  const sanitized = sanitizeStringList(values);\r\n  const filtered = sanitized.filter((value) => FEATURE_MATH_DATETIME_KEYS.has(value));\r\n  if (!filtered.length) {\r\n    return ['year', 'month', 'day'];\r\n  }\r\n  return filtered;\r\n};\r\n\r\nconst sanitizeNumberValue = (value: number | null | undefined): number | null => {\r\n  if (value === null || value === undefined) {\r\n    return null;\r\n  }\r\n  return Number.isFinite(value) ? value : null;\r\n};\r\n\r\nconst sanitizeIntegerValue = (value: number | null | undefined): number | null => {\r\n  const numeric = sanitizeNumberValue(value);\r\n  if (numeric === null) {\r\n    return null;\r\n  }\r\n  const rounded = Math.round(numeric);\r\n  return Number.isFinite(rounded) ? rounded : null;\r\n};\r\n\r\nconst sanitizeTimezoneValue = (value: string | undefined): string => {\r\n  if (typeof value !== 'string') {\r\n    return 'UTC';\r\n  }\r\n  const trimmed = value.trim();\r\n  return trimmed || 'UTC';\r\n};\r\n\r\nexport const NodeSettingsModal: React.FC<NodeSettingsModalProps> = ({\r\n  node,\r\n  onClose,\r\n  onUpdateConfig,\r\n  onUpdateNodeData,\r\n  sourceId,\r\n  graphSnapshot,\r\n  onResetConfig,\r\n  defaultConfigTemplate,\r\n  isResetAvailable = false,\r\n}) => {\r\n  const metadata = useMemo<MetadataEntry[]>(() => {\r\n    const entries: MetadataEntry[] = [];\r\n\r\n    if (node?.data?.label) {\r\n      entries.push({ label: 'Label', value: String(node.data.label) });\r\n    }\r\n\r\n    if (node?.data?.description) {\r\n      entries.push({ label: 'Description', value: String(node.data.description) });\r\n    }\r\n\r\n    if (node?.data?.category) {\r\n      entries.push({ label: 'Category', value: String(node.data.category) });\r\n    }\r\n\r\n    if (node?.data?.catalogType) {\r\n      entries.push({ label: 'Node type', value: String(node.data.catalogType) });\r\n    }\r\n\r\n    if (node?.data?.inputs && Array.isArray(node.data.inputs) && node.data.inputs.length) {\r\n      entries.push({ label: 'Inputs', value: node.data.inputs.join(', ') });\r\n    }\r\n\r\n    if (node?.data?.outputs && Array.isArray(node.data.outputs) && node.data.outputs.length) {\r\n      entries.push({ label: 'Outputs', value: node.data.outputs.join(', ') });\r\n    }\r\n\r\n    return entries;\r\n  }, [node]);\r\n\r\n  const title = useMemo(() => {\r\n    const raw = node?.data?.label ?? node?.id;\r\n    return typeof raw === 'string' && raw.trim() ? raw : `Node ${node?.id ?? ''}`;\r\n  }, [node]);\r\n\r\n  const {\r\n    catalogType,\r\n    isDataset,\r\n    isImputerNode,\r\n    isMissingIndicatorNode,\r\n    isReplaceAliasesNode,\r\n    isTrimWhitespaceNode,\r\n    isRemoveSpecialCharsNode,\r\n    isReplaceInvalidValuesNode,\r\n    isRegexCleanupNode,\r\n    isNormalizeTextCaseNode,\r\n    isStandardizeDatesNode,\r\n    isLabelEncodingNode,\r\n    isTargetEncodingNode,\r\n    isHashEncodingNode,\r\n    isFeatureTargetSplitNode,\r\n    isTrainTestSplitNode,\r\n    isTrainModelDraftNode,\r\n    isModelEvaluationNode,\r\n    isModelRegistryNode,\r\n    isHyperparameterTuningNode,\r\n    isClassUndersamplingNode,\r\n    isClassOversamplingNode,\r\n    isOrdinalEncodingNode,\r\n    isDummyEncodingNode,\r\n    isOneHotEncodingNode,\r\n    isFeatureMathNode,\r\n    isCastNode,\r\n    isBinningNode,\r\n    isScalingNode,\r\n    isPolynomialFeaturesNode,\r\n    isFeatureSelectionNode,\r\n    isTransformerAuditNode,\r\n    isOutlierNode,\r\n    isSkewnessNode,\r\n    isSkewnessDistributionNode,\r\n    isBinnedDistributionNode,\r\n    isDataConsistencyNode,\r\n    isInspectionNode,\r\n    isRemoveDuplicatesNode,\r\n    isDropMissingColumnsNode,\r\n    isDropMissingRowsNode,\r\n    isDropMissingNode,\r\n  } = useCatalogFlags(node);\r\n  const datasetBadge = isDataset;\r\n  const isClassResamplingNode = isClassUndersamplingNode || isClassOversamplingNode;\r\n\r\n  const imputationMethodOptions = useMemo<ImputationMethodOption[]>(() => IMPUTATION_METHOD_OPTIONS, []);\r\n\r\n  const imputationMethodValues = useMemo(\r\n    () => imputationMethodOptions.map((option) => option.value),\r\n    [imputationMethodOptions]\r\n  );\r\n\r\n  const parameters = useMemo<FeatureNodeParameter[]>(() => {\r\n    const raw = node?.data?.parameters;\r\n    if (!Array.isArray(raw)) {\r\n      return [];\r\n    }\r\n    return raw\r\n      .filter((parameter) => Boolean(parameter?.name))\r\n      .map((parameter) => ({ ...parameter }));\r\n  }, [node]);\r\n\r\n  const dataConsistencyHint = useMemo(\r\n    () => DATA_CONSISTENCY_GUIDANCE[catalogType] ?? null,\r\n    [catalogType]\r\n  );\r\n\r\n  const nodeId = typeof node?.id === 'string' ? node.id : '';\r\n  const connectionInfo = useMemo<ConnectionInfoSnapshot | null>(() => {\r\n    const rawInfo = node?.data?.connectionInfo as ConnectionInfoSnapshot | undefined;\r\n    if (!rawInfo) {\r\n      return null;\r\n    }\r\n    const cloneHandles = (handles?: ConnectionHandleDescriptor[]) =>\r\n      Array.isArray(handles) ? handles.map((handle) => ({ ...handle })) : [];\r\n    return {\r\n      inputs: cloneHandles(rawInfo.inputs),\r\n      outputs: cloneHandles(rawInfo.outputs),\r\n    };\r\n  }, [node]);\r\n\r\n  const hasRequiredConnections = node?.data?.hasRequiredConnections !== false;\r\n\r\n  const connectedHandleKeys = useMemo(() => {\r\n    if (!nodeId || !graphSnapshot || !Array.isArray(graphSnapshot.edges)) {\r\n      return new Set<string>();\r\n    }\r\n    const keys = graphSnapshot.edges\r\n      .filter((edge: any) => edge?.target === nodeId)\r\n      .map((edge: any) => toHandleKey(nodeId, edge?.targetHandle))\r\n      .filter((value): value is string => Boolean(value));\r\n    return new Set(keys);\r\n  }, [graphSnapshot, nodeId]);\r\n\r\n  const connectedOutputHandleKeys = useMemo(() => {\r\n    if (!nodeId || !graphSnapshot || !Array.isArray(graphSnapshot.edges)) {\r\n      return new Set<string>();\r\n    }\r\n    const keys = graphSnapshot.edges\r\n      .filter((edge: any) => edge?.source === nodeId)\r\n      .map((edge: any) => toHandleKey(nodeId, edge?.sourceHandle))\r\n      .filter((value): value is string => Boolean(value));\r\n    return new Set(keys);\r\n  }, [graphSnapshot, nodeId]);\r\n\r\n  const evaluationSplitConnectivity = useMemo(() => {\r\n    if (!connectionInfo?.inputs || connectionInfo.inputs.length === 0) {\r\n      return undefined;\r\n    }\r\n    let hasRelevant = false;\r\n    const mapping: Partial<Record<'train' | 'validation' | 'test', boolean>> = {};\r\n    connectionInfo.inputs.forEach((handle) => {\r\n      if (!Array.isArray(handle.accepts) || handle.accepts.length === 0) {\r\n        return;\r\n      }\r\n      const isConnected = connectedHandleKeys.has(handle.key);\r\n      handle.accepts.forEach((acceptKey) => {\r\n        if (acceptKey === 'train' || acceptKey === 'validation' || acceptKey === 'test') {\r\n          mapping[acceptKey] = isConnected;\r\n          hasRelevant = true;\r\n        }\r\n      });\r\n    });\r\n    return hasRelevant ? mapping : undefined;\r\n  }, [connectionInfo?.inputs, connectedHandleKeys]);\r\n\r\n  const requiredInputHandles = useMemo(() => {\r\n    if (!connectionInfo?.inputs?.length) {\r\n      return [] as ConnectionHandleDescriptor[];\r\n    }\r\n    return connectionInfo.inputs.filter((handle) => handle.required !== false);\r\n  }, [connectionInfo?.inputs]);\r\n\r\n  const missingRequiredInputs = useMemo(() => {\r\n    if (!requiredInputHandles.length) {\r\n      return [] as ConnectionHandleDescriptor[];\r\n    }\r\n    return requiredInputHandles.filter((handle) => !connectedHandleKeys.has(handle.key));\r\n  }, [connectedHandleKeys, requiredInputHandles]);\r\n\r\n  const connectionReady = hasRequiredConnections && missingRequiredInputs.length === 0;\r\n  const gatedSectionStyle = useMemo<React.CSSProperties | undefined>(() => {\r\n    if (connectionReady) {\r\n      return undefined;\r\n    }\r\n    return {\r\n      opacity: 0.45,\r\n      pointerEvents: 'none',\r\n      userSelect: 'none',\r\n    };\r\n  }, [connectionReady]);\r\n  const gatedAriaDisabled = connectionReady ? undefined : true;\r\n  const canResetNode = useMemo(\r\n    () => Boolean(isResetAvailable && !isDataset && defaultConfigTemplate),\r\n    [defaultConfigTemplate, isDataset, isResetAvailable]\r\n  );\r\n\r\n  const binningColumnsParameter = useMemo(() => {\r\n    if (!isBinningNode) {\r\n      return null;\r\n    }\r\n    return parameters.find((parameter) => parameter.name === 'columns') ?? null;\r\n  }, [isBinningNode, parameters]);\r\n\r\n  const scalingColumnsParameter = useMemo(() => {\r\n    if (!isScalingNode) {\r\n      return null;\r\n    }\r\n    return parameters.find((parameter) => parameter.name === 'columns') ?? null;\r\n  }, [isScalingNode, parameters]);\r\n\r\n  const removeDuplicatesColumnsParameter = useMemo(() => {\r\n    if (!isRemoveDuplicatesNode) {\r\n      return null;\r\n    }\r\n    return parameters.find((parameter) => parameter.name === 'columns') ?? null;\r\n  }, [isRemoveDuplicatesNode, parameters]);\r\n\r\n  const removeDuplicatesKeepParameter = useMemo(() => {\r\n    if (!isRemoveDuplicatesNode) {\r\n      return null;\r\n    }\r\n    return parameters.find((parameter) => parameter.name === 'keep') ?? null;\r\n  }, [isRemoveDuplicatesNode, parameters]);\r\n\r\n  const replaceAliasesCustomPairsParameter = useMemo(() => {\r\n    if (!isReplaceAliasesNode) {\r\n      return null;\r\n    }\r\n    return parameters.find((parameter) => parameter.name === 'custom_pairs') ?? null;\r\n  }, [isReplaceAliasesNode, parameters]);\r\n\r\n  const trimWhitespaceColumnsParameter = useMemo(() => {\r\n    if (!isTrimWhitespaceNode) {\r\n      return null;\r\n    }\r\n    return parameters.find((parameter) => parameter.name === 'columns') ?? null;\r\n  }, [isTrimWhitespaceNode, parameters]);\r\n\r\n  const trimWhitespaceModeParameter = useMemo(() => {\r\n    if (!isTrimWhitespaceNode) {\r\n      return null;\r\n    }\r\n    return parameters.find((parameter) => parameter.name === 'mode') ?? null;\r\n  }, [isTrimWhitespaceNode, parameters]);\r\n\r\n  const removeSpecialColumnsParameter = useMemo(() => {\r\n    if (!isRemoveSpecialCharsNode) {\r\n      return null;\r\n    }\r\n    return parameters.find((parameter) => parameter.name === 'columns') ?? null;\r\n  }, [isRemoveSpecialCharsNode, parameters]);\r\n\r\n  const removeSpecialModeParameter = useMemo(() => {\r\n    if (!isRemoveSpecialCharsNode) {\r\n      return null;\r\n    }\r\n    return parameters.find((parameter) => parameter.name === 'mode') ?? null;\r\n  }, [isRemoveSpecialCharsNode, parameters]);\r\n\r\n  const removeSpecialReplacementParameter = useMemo(() => {\r\n    if (!isRemoveSpecialCharsNode) {\r\n      return null;\r\n    }\r\n    return parameters.find((parameter) => parameter.name === 'replacement') ?? null;\r\n  }, [isRemoveSpecialCharsNode, parameters]);\r\n\r\n  const replaceInvalidColumnsParameter = useMemo(() => {\r\n    if (!isReplaceInvalidValuesNode) {\r\n      return null;\r\n    }\r\n    return parameters.find((parameter) => parameter.name === 'columns') ?? null;\r\n  }, [isReplaceInvalidValuesNode, parameters]);\r\n\r\n  const replaceInvalidModeParameter = useMemo(() => {\r\n    if (!isReplaceInvalidValuesNode) {\r\n      return null;\r\n    }\r\n    return parameters.find((parameter) => parameter.name === 'mode') ?? null;\r\n  }, [isReplaceInvalidValuesNode, parameters]);\r\n\r\n  const replaceInvalidMinValueParameter = useMemo(() => {\r\n    if (!isReplaceInvalidValuesNode) {\r\n      return null;\r\n    }\r\n    return parameters.find((parameter) => parameter.name === 'min_value') ?? null;\r\n  }, [isReplaceInvalidValuesNode, parameters]);\r\n\r\n  const replaceInvalidMaxValueParameter = useMemo(() => {\r\n    if (!isReplaceInvalidValuesNode) {\r\n      return null;\r\n    }\r\n    return parameters.find((parameter) => parameter.name === 'max_value') ?? null;\r\n  }, [isReplaceInvalidValuesNode, parameters]);\r\n\r\n  const regexCleanupColumnsParameter = useMemo(() => {\r\n    if (!isRegexCleanupNode) {\r\n      return null;\r\n    }\r\n    return parameters.find((parameter) => parameter.name === 'columns') ?? null;\r\n  }, [isRegexCleanupNode, parameters]);\r\n\r\n  const regexCleanupModeParameter = useMemo(() => {\r\n    if (!isRegexCleanupNode) {\r\n      return null;\r\n    }\r\n    return parameters.find((parameter) => parameter.name === 'mode') ?? null;\r\n  }, [isRegexCleanupNode, parameters]);\r\n\r\n  const regexCleanupPatternParameter = useMemo(() => {\r\n    if (!isRegexCleanupNode) {\r\n      return null;\r\n    }\r\n    return parameters.find((parameter) => parameter.name === 'pattern') ?? null;\r\n  }, [isRegexCleanupNode, parameters]);\r\n\r\n  const regexCleanupReplacementParameter = useMemo(() => {\r\n    if (!isRegexCleanupNode) {\r\n      return null;\r\n    }\r\n    return parameters.find((parameter) => parameter.name === 'replacement') ?? null;\r\n  }, [isRegexCleanupNode, parameters]);\r\n\r\n  const normalizeCaseColumnsParameter = useMemo(() => {\r\n    if (!isNormalizeTextCaseNode) {\r\n      return null;\r\n    }\r\n    return parameters.find((parameter) => parameter.name === 'columns') ?? null;\r\n  }, [isNormalizeTextCaseNode, parameters]);\r\n\r\n  const normalizeCaseModeParameter = useMemo(() => {\r\n    if (!isNormalizeTextCaseNode) {\r\n      return null;\r\n    }\r\n    return parameters.find((parameter) => parameter.name === 'mode') ?? null;\r\n  }, [isNormalizeTextCaseNode, parameters]);\r\n\r\n  const labelEncodingColumnsParameter = useMemo(() => {\r\n    if (!isLabelEncodingNode) {\r\n      return null;\r\n    }\r\n    return parameters.find((parameter) => parameter.name === 'columns') ?? null;\r\n  }, [isLabelEncodingNode, parameters]);\r\n\r\n  const labelEncodingAutoDetectParameter = useMemo(() => {\r\n    if (!isLabelEncodingNode) {\r\n      return null;\r\n    }\r\n    return parameters.find((parameter) => parameter.name === 'auto_detect') ?? null;\r\n  }, [isLabelEncodingNode, parameters]);\r\n\r\n  const labelEncodingMaxUniqueParameter = useMemo(() => {\r\n    if (!isLabelEncodingNode) {\r\n      return null;\r\n    }\r\n    return parameters.find((parameter) => parameter.name === 'max_unique_values') ?? null;\r\n  }, [isLabelEncodingNode, parameters]);\r\n\r\n  const labelEncodingOutputSuffixParameter = useMemo(() => {\r\n    if (!isLabelEncodingNode) {\r\n      return null;\r\n    }\r\n    return parameters.find((parameter) => parameter.name === 'output_suffix') ?? null;\r\n  }, [isLabelEncodingNode, parameters]);\r\n\r\n  const labelEncodingDropOriginalParameter = useMemo(() => {\r\n    if (!isLabelEncodingNode) {\r\n      return null;\r\n    }\r\n    return parameters.find((parameter) => parameter.name === 'drop_original') ?? null;\r\n  }, [isLabelEncodingNode, parameters]);\r\n\r\n  const labelEncodingMissingStrategyParameter = useMemo(() => {\r\n    if (!isLabelEncodingNode) {\r\n      return null;\r\n    }\r\n    return parameters.find((parameter) => parameter.name === 'missing_strategy') ?? null;\r\n  }, [isLabelEncodingNode, parameters]);\r\n\r\n  const labelEncodingMissingCodeParameter = useMemo(() => {\r\n    if (!isLabelEncodingNode) {\r\n      return null;\r\n    }\r\n    return parameters.find((parameter) => parameter.name === 'missing_code') ?? null;\r\n  }, [isLabelEncodingNode, parameters]);\r\n\r\n  const hashEncodingColumnsParameter = useMemo(() => {\r\n    if (!isHashEncodingNode) {\r\n      return null;\r\n    }\r\n    return parameters.find((parameter) => parameter.name === 'columns') ?? null;\r\n  }, [isHashEncodingNode, parameters]);\r\n\r\n  const hashEncodingAutoDetectParameter = useMemo(() => {\r\n    if (!isHashEncodingNode) {\r\n      return null;\r\n    }\r\n    return parameters.find((parameter) => parameter.name === 'auto_detect') ?? null;\r\n  }, [isHashEncodingNode, parameters]);\r\n\r\n  const hashEncodingMaxCategoriesParameter = useMemo(() => {\r\n    if (!isHashEncodingNode) {\r\n      return null;\r\n    }\r\n    return parameters.find((parameter) => parameter.name === 'max_categories') ?? null;\r\n  }, [isHashEncodingNode, parameters]);\r\n\r\n  const hashEncodingBucketsParameter = useMemo(() => {\r\n    if (!isHashEncodingNode) {\r\n      return null;\r\n    }\r\n    return parameters.find((parameter) => parameter.name === 'n_buckets') ?? null;\r\n  }, [isHashEncodingNode, parameters]);\r\n\r\n  const hashEncodingOutputSuffixParameter = useMemo(() => {\r\n    if (!isHashEncodingNode) {\r\n      return null;\r\n    }\r\n    return parameters.find((parameter) => parameter.name === 'output_suffix') ?? null;\r\n  }, [isHashEncodingNode, parameters]);\r\n\r\n  const hashEncodingDropOriginalParameter = useMemo(() => {\r\n    if (!isHashEncodingNode) {\r\n      return null;\r\n    }\r\n    return parameters.find((parameter) => parameter.name === 'drop_original') ?? null;\r\n  }, [isHashEncodingNode, parameters]);\r\n\r\n  const hashEncodingEncodeMissingParameter = useMemo(() => {\r\n    if (!isHashEncodingNode) {\r\n      return null;\r\n    }\r\n    return parameters.find((parameter) => parameter.name === 'encode_missing') ?? null;\r\n  }, [isHashEncodingNode, parameters]);\r\n\r\n  const polynomialColumnsParameter = useMemo(() => {\r\n    if (!isPolynomialFeaturesNode) {\r\n      return null;\r\n    }\r\n    return parameters.find((parameter) => parameter.name === 'columns') ?? null;\r\n  }, [isPolynomialFeaturesNode, parameters]);\r\n\r\n  const polynomialAutoDetectParameter = useMemo(() => {\r\n    if (!isPolynomialFeaturesNode) {\r\n      return null;\r\n    }\r\n    return parameters.find((parameter) => parameter.name === 'auto_detect') ?? null;\r\n  }, [isPolynomialFeaturesNode, parameters]);\r\n\r\n  const polynomialDegreeParameter = useMemo(() => {\r\n    if (!isPolynomialFeaturesNode) {\r\n      return null;\r\n    }\r\n    return parameters.find((parameter) => parameter.name === 'degree') ?? null;\r\n  }, [isPolynomialFeaturesNode, parameters]);\r\n\r\n  const polynomialIncludeBiasParameter = useMemo(() => {\r\n    if (!isPolynomialFeaturesNode) {\r\n      return null;\r\n    }\r\n    return parameters.find((parameter) => parameter.name === 'include_bias') ?? null;\r\n  }, [isPolynomialFeaturesNode, parameters]);\r\n\r\n  const polynomialInteractionOnlyParameter = useMemo(() => {\r\n    if (!isPolynomialFeaturesNode) {\r\n      return null;\r\n    }\r\n    return parameters.find((parameter) => parameter.name === 'interaction_only') ?? null;\r\n  }, [isPolynomialFeaturesNode, parameters]);\r\n\r\n  const polynomialIncludeInputFeaturesParameter = useMemo(() => {\r\n    if (!isPolynomialFeaturesNode) {\r\n      return null;\r\n    }\r\n    return parameters.find((parameter) => parameter.name === 'include_input_features') ?? null;\r\n  }, [isPolynomialFeaturesNode, parameters]);\r\n\r\n  const polynomialOutputPrefixParameter = useMemo(() => {\r\n    if (!isPolynomialFeaturesNode) {\r\n      return null;\r\n    }\r\n    return parameters.find((parameter) => parameter.name === 'output_prefix') ?? null;\r\n  }, [isPolynomialFeaturesNode, parameters]);\r\n\r\n  const featureSelectionColumnsParameter = useMemo(() => {\r\n    if (!isFeatureSelectionNode) {\r\n      return null;\r\n    }\r\n    return parameters.find((parameter) => parameter.name === 'columns') ?? null;\r\n  }, [isFeatureSelectionNode, parameters]);\r\n\r\n  const featureSelectionAutoDetectParameter = useMemo(() => {\r\n    if (!isFeatureSelectionNode) {\r\n      return null;\r\n    }\r\n    return parameters.find((parameter) => parameter.name === 'auto_detect') ?? null;\r\n  }, [isFeatureSelectionNode, parameters]);\r\n\r\n  const featureSelectionTargetColumnParameter = useMemo(() => {\r\n    if (!isFeatureSelectionNode) {\r\n      return null;\r\n    }\r\n    return parameters.find((parameter) => parameter.name === 'target_column') ?? null;\r\n  }, [isFeatureSelectionNode, parameters]);\r\n\r\n  const featureSelectionMethodParameter = useMemo(() => {\r\n    if (!isFeatureSelectionNode) {\r\n      return null;\r\n    }\r\n    return parameters.find((parameter) => parameter.name === 'method') ?? null;\r\n  }, [isFeatureSelectionNode, parameters]);\r\n\r\n  const featureSelectionScoreFuncParameter = useMemo(() => {\r\n    if (!isFeatureSelectionNode) {\r\n      return null;\r\n    }\r\n    return parameters.find((parameter) => parameter.name === 'score_func') ?? null;\r\n  }, [isFeatureSelectionNode, parameters]);\r\n\r\n  const featureSelectionProblemTypeParameter = useMemo(() => {\r\n    if (!isFeatureSelectionNode) {\r\n      return null;\r\n    }\r\n    return parameters.find((parameter) => parameter.name === 'problem_type') ?? null;\r\n  }, [isFeatureSelectionNode, parameters]);\r\n\r\n  const featureSelectionKParameter = useMemo(() => {\r\n    if (!isFeatureSelectionNode) {\r\n      return null;\r\n    }\r\n    return parameters.find((parameter) => parameter.name === 'k') ?? null;\r\n  }, [isFeatureSelectionNode, parameters]);\r\n\r\n  const featureSelectionPercentileParameter = useMemo(() => {\r\n    if (!isFeatureSelectionNode) {\r\n      return null;\r\n    }\r\n    return parameters.find((parameter) => parameter.name === 'percentile') ?? null;\r\n  }, [isFeatureSelectionNode, parameters]);\r\n\r\n  const featureSelectionAlphaParameter = useMemo(() => {\r\n    if (!isFeatureSelectionNode) {\r\n      return null;\r\n    }\r\n    return parameters.find((parameter) => parameter.name === 'alpha') ?? null;\r\n  }, [isFeatureSelectionNode, parameters]);\r\n\r\n  const featureSelectionThresholdParameter = useMemo(() => {\r\n    if (!isFeatureSelectionNode) {\r\n      return null;\r\n    }\r\n    return parameters.find((parameter) => parameter.name === 'threshold') ?? null;\r\n  }, [isFeatureSelectionNode, parameters]);\r\n\r\n  const featureSelectionModeParameter = useMemo(() => {\r\n    if (!isFeatureSelectionNode) {\r\n      return null;\r\n    }\r\n    return parameters.find((parameter) => parameter.name === 'mode') ?? null;\r\n  }, [isFeatureSelectionNode, parameters]);\r\n\r\n  const featureSelectionEstimatorParameter = useMemo(() => {\r\n    if (!isFeatureSelectionNode) {\r\n      return null;\r\n    }\r\n    return parameters.find((parameter) => parameter.name === 'estimator') ?? null;\r\n  }, [isFeatureSelectionNode, parameters]);\r\n\r\n  const featureSelectionStepParameter = useMemo(() => {\r\n    if (!isFeatureSelectionNode) {\r\n      return null;\r\n    }\r\n    return parameters.find((parameter) => parameter.name === 'step') ?? null;\r\n  }, [isFeatureSelectionNode, parameters]);\r\n\r\n  const featureSelectionMinFeaturesParameter = useMemo(() => {\r\n    if (!isFeatureSelectionNode) {\r\n      return null;\r\n    }\r\n    return parameters.find((parameter) => parameter.name === 'min_features') ?? null;\r\n  }, [isFeatureSelectionNode, parameters]);\r\n\r\n  const featureSelectionMaxFeaturesParameter = useMemo(() => {\r\n    if (!isFeatureSelectionNode) {\r\n      return null;\r\n    }\r\n    return parameters.find((parameter) => parameter.name === 'max_features') ?? null;\r\n  }, [isFeatureSelectionNode, parameters]);\r\n\r\n  const featureSelectionDropUnselectedParameter = useMemo(() => {\r\n    if (!isFeatureSelectionNode) {\r\n      return null;\r\n    }\r\n    return parameters.find((parameter) => parameter.name === 'drop_unselected') ?? null;\r\n  }, [isFeatureSelectionNode, parameters]);\r\n\r\n  const featureMathErrorHandlingParameter = useMemo(() => {\r\n    if (!isFeatureMathNode) {\r\n      return null;\r\n    }\r\n    return parameters.find((parameter) => parameter.name === 'error_handling') ?? null;\r\n  }, [isFeatureMathNode, parameters]);\r\n\r\n  const featureMathAllowOverwriteParameter = useMemo(() => {\r\n    if (!isFeatureMathNode) {\r\n      return null;\r\n    }\r\n    return parameters.find((parameter) => parameter.name === 'allow_overwrite') ?? null;\r\n  }, [isFeatureMathNode, parameters]);\r\n\r\n  const featureMathDefaultTimezoneParameter = useMemo(() => {\r\n    if (!isFeatureMathNode) {\r\n      return null;\r\n    }\r\n    return parameters.find((parameter) => parameter.name === 'default_timezone') ?? null;\r\n  }, [isFeatureMathNode, parameters]);\r\n\r\n  const featureMathEpsilonParameter = useMemo(() => {\r\n    if (!isFeatureMathNode) {\r\n      return null;\r\n    }\r\n    return parameters.find((parameter) => parameter.name === 'epsilon') ?? null;\r\n  }, [isFeatureMathNode, parameters]);\r\n\r\n  const resamplingMethodParameter = useMemo(() => {\r\n    if (!isClassResamplingNode) {\r\n      return null;\r\n    }\r\n    return parameters.find((parameter) => parameter.name === 'method') ?? null;\r\n  }, [isClassResamplingNode, parameters]);\r\n\r\n  const resamplingTargetColumnParameter = useMemo(() => {\r\n    if (!isClassResamplingNode) {\r\n      return null;\r\n    }\r\n    return parameters.find((parameter) => parameter.name === 'target_column') ?? null;\r\n  }, [isClassResamplingNode, parameters]);\r\n\r\n  const resamplingSamplingStrategyParameter = useMemo(() => {\r\n    if (!isClassResamplingNode) {\r\n      return null;\r\n    }\r\n    return parameters.find((parameter) => parameter.name === 'sampling_strategy') ?? null;\r\n  }, [isClassResamplingNode, parameters]);\r\n\r\n  const resamplingRandomStateParameter = useMemo(() => {\r\n    if (!isClassResamplingNode) {\r\n      return null;\r\n    }\r\n    return parameters.find((parameter) => parameter.name === 'random_state') ?? null;\r\n  }, [isClassResamplingNode, parameters]);\r\n\r\n  const resamplingKNeighborsParameter = useMemo(() => {\r\n    if (!isClassOversamplingNode) {\r\n      return null;\r\n    }\r\n    return parameters.find((parameter) => parameter.name === 'k_neighbors') ?? null;\r\n  }, [isClassOversamplingNode, parameters]);\r\n\r\n  const resamplingReplacementParameter = useMemo(() => {\r\n    if (!isClassUndersamplingNode) {\r\n      return null;\r\n    }\r\n    return parameters.find((parameter) => parameter.name === 'replacement') ?? null;\r\n  }, [isClassUndersamplingNode, parameters]);\r\n\r\n  const featureTargetSplitTargetColumnParameter = useMemo(() => {\r\n    if (!isFeatureTargetSplitNode) {\r\n      return null;\r\n    }\r\n    return parameters.find((parameter) => parameter.name === 'target_column') ?? null;\r\n  }, [isFeatureTargetSplitNode, parameters]);\r\n\r\n  const trainModelTargetColumnParameter = useMemo(() => {\r\n    if (!(isTrainModelDraftNode || isHyperparameterTuningNode)) {\r\n      return null;\r\n    }\r\n    return parameters.find((parameter) => parameter.name === 'target_column') ?? null;\r\n  }, [isHyperparameterTuningNode, isTrainModelDraftNode, parameters]);\r\n\r\n  const trainModelProblemTypeParameter = useMemo(() => {\r\n    if (!(isTrainModelDraftNode || isHyperparameterTuningNode)) {\r\n      return null;\r\n    }\r\n    return parameters.find((parameter) => parameter.name === 'problem_type') ?? null;\r\n  }, [isHyperparameterTuningNode, isTrainModelDraftNode, parameters]);\r\n\r\n  const trainModelModelTypeParameter = useMemo(() => {\r\n    if (!(isTrainModelDraftNode || isHyperparameterTuningNode)) {\r\n      return null;\r\n    }\r\n    return parameters.find((parameter) => parameter.name === 'model_type') ?? null;\r\n  }, [isHyperparameterTuningNode, isTrainModelDraftNode, parameters]);\r\n\r\n  const trainModelHyperparametersParameter = useMemo(() => {\r\n    if (!isTrainModelDraftNode) {\r\n      return null;\r\n    }\r\n    return parameters.find((parameter) => parameter.name === 'hyperparameters') ?? null;\r\n  }, [isTrainModelDraftNode, parameters]);\r\n\r\n  const hyperparameterTuningSearchStrategyParameter = useMemo(() => {\r\n    if (!isHyperparameterTuningNode) {\r\n      return null;\r\n    }\r\n    return parameters.find((parameter) => parameter.name === 'search_strategy') ?? null;\r\n  }, [isHyperparameterTuningNode, parameters]);\r\n\r\n  const hyperparameterTuningSearchIterationsParameter = useMemo(() => {\r\n    if (!isHyperparameterTuningNode) {\r\n      return null;\r\n    }\r\n    return parameters.find((parameter) => parameter.name === 'search_iterations') ?? null;\r\n  }, [isHyperparameterTuningNode, parameters]);\r\n\r\n  const hyperparameterTuningSearchRandomStateParameter = useMemo(() => {\r\n    if (!isHyperparameterTuningNode) {\r\n      return null;\r\n    }\r\n    return parameters.find((parameter) => parameter.name === 'search_random_state') ?? null;\r\n  }, [isHyperparameterTuningNode, parameters]);\r\n\r\n  const hyperparameterTuningScoringMetricParameter = useMemo(() => {\r\n    if (!isHyperparameterTuningNode) {\r\n      return null;\r\n    }\r\n    return parameters.find((parameter) => parameter.name === 'scoring_metric') ?? null;\r\n  }, [isHyperparameterTuningNode, parameters]);\r\n\r\n  const trainModelCvEnabledParameter = useMemo(() => {\r\n    if (!(isTrainModelDraftNode || isHyperparameterTuningNode)) {\r\n      return null;\r\n    }\r\n    return parameters.find((parameter) => parameter.name === 'cv_enabled') ?? null;\r\n  }, [isHyperparameterTuningNode, isTrainModelDraftNode, parameters]);\r\n\r\n  const trainModelCvStrategyParameter = useMemo(() => {\r\n    if (!(isTrainModelDraftNode || isHyperparameterTuningNode)) {\r\n      return null;\r\n    }\r\n    return parameters.find((parameter) => parameter.name === 'cv_strategy') ?? null;\r\n  }, [isHyperparameterTuningNode, isTrainModelDraftNode, parameters]);\r\n\r\n  const trainModelCvFoldsParameter = useMemo(() => {\r\n    if (!(isTrainModelDraftNode || isHyperparameterTuningNode)) {\r\n      return null;\r\n    }\r\n    return parameters.find((parameter) => parameter.name === 'cv_folds') ?? null;\r\n  }, [isHyperparameterTuningNode, isTrainModelDraftNode, parameters]);\r\n\r\n  const trainModelCvShuffleParameter = useMemo(() => {\r\n    if (!(isTrainModelDraftNode || isHyperparameterTuningNode)) {\r\n      return null;\r\n    }\r\n    return parameters.find((parameter) => parameter.name === 'cv_shuffle') ?? null;\r\n  }, [isHyperparameterTuningNode, isTrainModelDraftNode, parameters]);\r\n\r\n  const trainModelCvRandomStateParameter = useMemo(() => {\r\n    if (!(isTrainModelDraftNode || isHyperparameterTuningNode)) {\r\n      return null;\r\n    }\r\n    return parameters.find((parameter) => parameter.name === 'cv_random_state') ?? null;\r\n  }, [isHyperparameterTuningNode, isTrainModelDraftNode, parameters]);\r\n\r\n  const trainModelCvRefitStrategyParameter = useMemo(() => {\r\n    if (!isTrainModelDraftNode) {\r\n      return null;\r\n    }\r\n    return parameters.find((parameter) => parameter.name === 'cv_refit_strategy') ?? null;\r\n  }, [isTrainModelDraftNode, parameters]);\r\n\r\n  const targetEncodingColumnsParameter = useMemo(() => {\r\n    if (!isTargetEncodingNode) {\r\n      return null;\r\n    }\r\n    return parameters.find((parameter) => parameter.name === 'columns') ?? null;\r\n  }, [isTargetEncodingNode, parameters]);\r\n\r\n  const targetEncodingTargetColumnParameter = useMemo(() => {\r\n    if (!isTargetEncodingNode) {\r\n      return null;\r\n    }\r\n    return parameters.find((parameter) => parameter.name === 'target_column') ?? null;\r\n  }, [isTargetEncodingNode, parameters]);\r\n\r\n  const targetEncodingAutoDetectParameter = useMemo(() => {\r\n    if (!isTargetEncodingNode) {\r\n      return null;\r\n    }\r\n    return parameters.find((parameter) => parameter.name === 'auto_detect') ?? null;\r\n  }, [isTargetEncodingNode, parameters]);\r\n\r\n  const targetEncodingMaxCategoriesParameter = useMemo(() => {\r\n    if (!isTargetEncodingNode) {\r\n      return null;\r\n    }\r\n    return parameters.find((parameter) => parameter.name === 'max_categories') ?? null;\r\n  }, [isTargetEncodingNode, parameters]);\r\n\r\n  const targetEncodingOutputSuffixParameter = useMemo(() => {\r\n    if (!isTargetEncodingNode) {\r\n      return null;\r\n    }\r\n    return parameters.find((parameter) => parameter.name === 'output_suffix') ?? null;\r\n  }, [isTargetEncodingNode, parameters]);\r\n\r\n  const targetEncodingDropOriginalParameter = useMemo(() => {\r\n    if (!isTargetEncodingNode) {\r\n      return null;\r\n    }\r\n    return parameters.find((parameter) => parameter.name === 'drop_original') ?? null;\r\n  }, [isTargetEncodingNode, parameters]);\r\n\r\n  const targetEncodingSmoothingParameter = useMemo(() => {\r\n    if (!isTargetEncodingNode) {\r\n      return null;\r\n    }\r\n    return parameters.find((parameter) => parameter.name === 'smoothing') ?? null;\r\n  }, [isTargetEncodingNode, parameters]);\r\n\r\n  const targetEncodingEncodeMissingParameter = useMemo(() => {\r\n    if (!isTargetEncodingNode) {\r\n      return null;\r\n    }\r\n    return parameters.find((parameter) => parameter.name === 'encode_missing') ?? null;\r\n  }, [isTargetEncodingNode, parameters]);\r\n\r\n  const targetEncodingHandleUnknownParameter = useMemo(() => {\r\n    if (!isTargetEncodingNode) {\r\n      return null;\r\n    }\r\n    return parameters.find((parameter) => parameter.name === 'handle_unknown') ?? null;\r\n  }, [isTargetEncodingNode, parameters]);\r\n\r\n  const ordinalEncodingColumnsParameter = useMemo(() => {\r\n    if (!isOrdinalEncodingNode) {\r\n      return null;\r\n    }\r\n    return parameters.find((parameter) => parameter.name === 'columns') ?? null;\r\n  }, [isOrdinalEncodingNode, parameters]);\r\n\r\n  const ordinalEncodingAutoDetectParameter = useMemo(() => {\r\n    if (!isOrdinalEncodingNode) {\r\n      return null;\r\n    }\r\n    return parameters.find((parameter) => parameter.name === 'auto_detect') ?? null;\r\n  }, [isOrdinalEncodingNode, parameters]);\r\n\r\n  const ordinalEncodingMaxCategoriesParameter = useMemo(() => {\r\n    if (!isOrdinalEncodingNode) {\r\n      return null;\r\n    }\r\n    return parameters.find((parameter) => parameter.name === 'max_categories') ?? null;\r\n  }, [isOrdinalEncodingNode, parameters]);\r\n\r\n  const ordinalEncodingOutputSuffixParameter = useMemo(() => {\r\n    if (!isOrdinalEncodingNode) {\r\n      return null;\r\n    }\r\n    return parameters.find((parameter) => parameter.name === 'output_suffix') ?? null;\r\n  }, [isOrdinalEncodingNode, parameters]);\r\n\r\n  const ordinalEncodingDropOriginalParameter = useMemo(() => {\r\n    if (!isOrdinalEncodingNode) {\r\n      return null;\r\n    }\r\n    return parameters.find((parameter) => parameter.name === 'drop_original') ?? null;\r\n  }, [isOrdinalEncodingNode, parameters]);\r\n\r\n  const ordinalEncodingEncodeMissingParameter = useMemo(() => {\r\n    if (!isOrdinalEncodingNode) {\r\n      return null;\r\n    }\r\n    return parameters.find((parameter) => parameter.name === 'encode_missing') ?? null;\r\n  }, [isOrdinalEncodingNode, parameters]);\r\n\r\n  const ordinalEncodingHandleUnknownParameter = useMemo(() => {\r\n    if (!isOrdinalEncodingNode) {\r\n      return null;\r\n    }\r\n    return parameters.find((parameter) => parameter.name === 'handle_unknown') ?? null;\r\n  }, [isOrdinalEncodingNode, parameters]);\r\n\r\n  const ordinalEncodingUnknownValueParameter = useMemo(() => {\r\n    if (!isOrdinalEncodingNode) {\r\n      return null;\r\n    }\r\n    return parameters.find((parameter) => parameter.name === 'unknown_value') ?? null;\r\n  }, [isOrdinalEncodingNode, parameters]);\r\n\r\n  const dummyEncodingColumnsParameter = useMemo(() => {\r\n    if (!isDummyEncodingNode) {\r\n      return null;\r\n    }\r\n    return parameters.find((parameter) => parameter.name === 'columns') ?? null;\r\n  }, [isDummyEncodingNode, parameters]);\r\n\r\n  const dummyEncodingAutoDetectParameter = useMemo(() => {\r\n    if (!isDummyEncodingNode) {\r\n      return null;\r\n    }\r\n    return parameters.find((parameter) => parameter.name === 'auto_detect') ?? null;\r\n  }, [isDummyEncodingNode, parameters]);\r\n\r\n  const dummyEncodingMaxCategoriesParameter = useMemo(() => {\r\n    if (!isDummyEncodingNode) {\r\n      return null;\r\n    }\r\n    return parameters.find((parameter) => parameter.name === 'max_categories') ?? null;\r\n  }, [isDummyEncodingNode, parameters]);\r\n\r\n  const dummyEncodingDropFirstParameter = useMemo(() => {\r\n    if (!isDummyEncodingNode) {\r\n      return null;\r\n    }\r\n    return parameters.find((parameter) => parameter.name === 'drop_first') ?? null;\r\n  }, [isDummyEncodingNode, parameters]);\r\n\r\n  const dummyEncodingIncludeMissingParameter = useMemo(() => {\r\n    if (!isDummyEncodingNode) {\r\n      return null;\r\n    }\r\n    return parameters.find((parameter) => parameter.name === 'include_missing') ?? null;\r\n  }, [isDummyEncodingNode, parameters]);\r\n\r\n  const dummyEncodingDropOriginalParameter = useMemo(() => {\r\n    if (!isDummyEncodingNode) {\r\n      return null;\r\n    }\r\n    return parameters.find((parameter) => parameter.name === 'drop_original') ?? null;\r\n  }, [isDummyEncodingNode, parameters]);\r\n\r\n  const dummyEncodingPrefixSeparatorParameter = useMemo(() => {\r\n    if (!isDummyEncodingNode) {\r\n      return null;\r\n    }\r\n    return parameters.find((parameter) => parameter.name === 'prefix_separator') ?? null;\r\n  }, [isDummyEncodingNode, parameters]);\r\n\r\n  const oneHotEncodingColumnsParameter = useMemo(() => {\r\n    if (!isOneHotEncodingNode) {\r\n      return null;\r\n    }\r\n    return parameters.find((parameter) => parameter.name === 'columns') ?? null;\r\n  }, [isOneHotEncodingNode, parameters]);\r\n\r\n  const oneHotEncodingAutoDetectParameter = useMemo(() => {\r\n    if (!isOneHotEncodingNode) {\r\n      return null;\r\n    }\r\n    return parameters.find((parameter) => parameter.name === 'auto_detect') ?? null;\r\n  }, [isOneHotEncodingNode, parameters]);\r\n\r\n  const oneHotEncodingMaxCategoriesParameter = useMemo(() => {\r\n    if (!isOneHotEncodingNode) {\r\n      return null;\r\n    }\r\n    return parameters.find((parameter) => parameter.name === 'max_categories') ?? null;\r\n  }, [isOneHotEncodingNode, parameters]);\r\n\r\n  const oneHotEncodingDropFirstParameter = useMemo(() => {\r\n    if (!isOneHotEncodingNode) {\r\n      return null;\r\n    }\r\n    return parameters.find((parameter) => parameter.name === 'drop_first') ?? null;\r\n  }, [isOneHotEncodingNode, parameters]);\r\n\r\n  const oneHotEncodingIncludeMissingParameter = useMemo(() => {\r\n    if (!isOneHotEncodingNode) {\r\n      return null;\r\n    }\r\n    return parameters.find((parameter) => parameter.name === 'include_missing') ?? null;\r\n  }, [isOneHotEncodingNode, parameters]);\r\n\r\n  const oneHotEncodingDropOriginalParameter = useMemo(() => {\r\n    if (!isOneHotEncodingNode) {\r\n      return null;\r\n    }\r\n    return parameters.find((parameter) => parameter.name === 'drop_original') ?? null;\r\n  }, [isOneHotEncodingNode, parameters]);\r\n\r\n  const oneHotEncodingPrefixSeparatorParameter = useMemo(() => {\r\n    if (!isOneHotEncodingNode) {\r\n      return null;\r\n    }\r\n    return parameters.find((parameter) => parameter.name === 'prefix_separator') ?? null;\r\n  }, [isOneHotEncodingNode, parameters]);\r\n\r\n  const missingIndicatorColumnsParameter = useMemo(() => {\r\n    if (!isMissingIndicatorNode) {\r\n      return null;\r\n    }\r\n    return parameters.find((parameter) => parameter.name === 'columns') ?? null;\r\n  }, [isMissingIndicatorNode, parameters]);\r\n\r\n  const missingIndicatorSuffixParameter = useMemo(() => {\r\n    if (!isMissingIndicatorNode) {\r\n      return null;\r\n    }\r\n    return parameters.find((parameter) => parameter.name === 'flag_suffix') ?? null;\r\n  }, [isMissingIndicatorNode, parameters]);\r\n\r\n  const scalingDefaultMethodParameter = useMemo(() => {\r\n    if (!isScalingNode) {\r\n      return null;\r\n    }\r\n    return parameters.find((parameter) => parameter.name === 'default_method') ?? null;\r\n  }, [isScalingNode, parameters]);\r\n\r\n  const scalingAutoDetectParameter = useMemo(() => {\r\n    if (!isScalingNode) {\r\n      return null;\r\n    }\r\n    return parameters.find((parameter) => parameter.name === 'auto_detect') ?? null;\r\n  }, [isScalingNode, parameters]);\r\n\r\n  const requiresColumnCatalog = useMemo(\r\n    () =>\r\n      parameters.some(\r\n        (parameter) =>\r\n          parameter?.type === 'multi_select' && parameter?.source?.type !== 'drop_column_recommendations'\r\n      ),\r\n    [parameters]\r\n  );\r\n\r\n  const dropColumnParameter = useMemo(\r\n    () => parameters.find((parameter) => parameter?.source?.type === 'drop_column_recommendations') ?? null,\r\n    [parameters],\r\n  );\r\n\r\n  const dropRowsAnyParameter = useMemo(\r\n    () => parameters.find((parameter) => parameter.name === 'drop_if_any_missing') ?? null,\r\n    [parameters],\r\n  );\r\n\r\n  const filteredParameters = useMemo(() => {\r\n    let result = parameters;\r\n    result = result.filter((parameter) => parameter?.source?.type !== 'drop_column_recommendations');\r\n    if (isDropMissingColumnsNode || isDropMissingRowsNode) {\r\n      result = result.filter((parameter) => parameter.name !== 'missing_threshold');\r\n    }\r\n    if (isDropMissingRowsNode) {\r\n      result = result.filter((parameter) => parameter.name !== 'drop_if_any_missing');\r\n    }\r\n    if (isImputerNode) {\r\n      result = result.filter((parameter) => parameter.name !== 'strategies');\r\n    }\r\n    if (isSkewnessNode) {\r\n      result = result.filter((parameter) => parameter.name !== 'transformations');\r\n    }\r\n    if (isCastNode) {\r\n      result = result.filter((parameter) => parameter.name !== 'column_overrides');\r\n    }\r\n    if (isBinningNode) {\r\n      result = result.filter((parameter) => parameter.name !== 'columns');\r\n    }\r\n    if (isScalingNode) {\r\n      result = result.filter(\r\n        (parameter) => !['columns', 'default_method', 'auto_detect'].includes(parameter.name)\r\n      );\r\n    }\r\n    if (isRemoveDuplicatesNode) {\r\n      result = result.filter((parameter) => parameter.name !== 'columns' && parameter.name !== 'keep');\r\n    }\r\n    if (isMissingIndicatorNode) {\r\n      result = result.filter((parameter) => parameter.name !== 'columns' && parameter.name !== 'flag_suffix');\r\n    }\r\n    if (isReplaceAliasesNode) {\r\n      result = result.filter(\r\n        (parameter) => !['columns', 'mode', 'custom_pairs'].includes(parameter.name),\r\n      );\r\n    }\r\n    if (isTrimWhitespaceNode) {\r\n      result = result.filter((parameter) => !['columns', 'mode'].includes(parameter.name));\r\n    }\r\n    if (isRemoveSpecialCharsNode) {\r\n      result = result.filter((parameter) => !['columns', 'mode', 'replacement'].includes(parameter.name));\r\n    }\r\n    if (isReplaceInvalidValuesNode) {\r\n      result = result.filter(\r\n        (parameter) => !['columns', 'mode', 'min_value', 'max_value'].includes(parameter.name),\r\n      );\r\n    }\r\n    if (isRegexCleanupNode) {\r\n      result = result.filter((parameter) => !['columns', 'mode', 'pattern', 'replacement'].includes(parameter.name));\r\n    }\r\n    if (isNormalizeTextCaseNode) {\r\n      result = result.filter((parameter) => !['columns', 'mode'].includes(parameter.name));\r\n    }\r\n    if (isStandardizeDatesNode) {\r\n      result = result.filter((parameter) => !['columns', 'mode'].includes(parameter.name));\r\n    }\r\n    if (isClassUndersamplingNode) {\r\n      result = result.filter(\r\n        (parameter) =>\r\n          !['method', 'target_column', 'sampling_strategy', 'random_state', 'replacement'].includes(parameter.name),\r\n      );\r\n    }\r\n    if (isTrainModelDraftNode) {\r\n      result = result.filter(\r\n        (parameter) =>\r\n          ![\r\n            'target_column',\r\n            'problem_type',\r\n            'cv_enabled',\r\n            'cv_strategy',\r\n            'cv_folds',\r\n            'cv_shuffle',\r\n            'cv_random_state',\r\n            'cv_refit_strategy',\r\n          ].includes(parameter.name),\r\n      );\r\n    }\r\n    if (isClassOversamplingNode) {\r\n      result = result.filter(\r\n        (parameter) =>\r\n          !['method', 'target_column', 'sampling_strategy', 'random_state'].includes(parameter.name),\r\n      );\r\n    }\r\n    if (isFeatureTargetSplitNode) {\r\n      result = result.filter((parameter) => parameter.name !== 'target_column');\r\n    }\r\n    if (isLabelEncodingNode) {\r\n      result = result.filter(\r\n        (parameter) =>\r\n          ![\r\n            'columns',\r\n            'auto_detect',\r\n            'max_unique_values',\r\n            'output_suffix',\r\n            'drop_original',\r\n            'missing_strategy',\r\n            'missing_code',\r\n          ].includes(parameter.name),\r\n      );\r\n    }\r\n    if (isOrdinalEncodingNode) {\r\n      result = result.filter(\r\n        (parameter) =>\r\n          ![\r\n            'columns',\r\n            'auto_detect',\r\n            'max_categories',\r\n            'output_suffix',\r\n            'drop_original',\r\n            'encode_missing',\r\n            'handle_unknown',\r\n            'unknown_value',\r\n          ].includes(parameter.name),\r\n      );\r\n    }\r\n    if (isDummyEncodingNode) {\r\n      result = result.filter(\r\n        (parameter) =>\r\n          ![\r\n            'columns',\r\n            'auto_detect',\r\n            'max_categories',\r\n            'drop_first',\r\n            'include_missing',\r\n            'drop_original',\r\n            'prefix_separator',\r\n          ].includes(parameter.name),\r\n      );\r\n    }\r\n    if (isOneHotEncodingNode) {\r\n      result = result.filter(\r\n        (parameter) =>\r\n          ![\r\n            'columns',\r\n            'auto_detect',\r\n            'max_categories',\r\n            'drop_first',\r\n            'include_missing',\r\n            'drop_original',\r\n            'prefix_separator',\r\n          ].includes(parameter.name),\r\n      );\r\n    }\r\n    return result;\r\n  }, [\r\n    isBinningNode,\r\n    isCastNode,\r\n    isDropMissingColumnsNode,\r\n    isDropMissingRowsNode,\r\n    isImputerNode,\r\n    isMissingIndicatorNode,\r\n    isReplaceAliasesNode,\r\n    isTrimWhitespaceNode,\r\n    isRemoveSpecialCharsNode,\r\n    isReplaceInvalidValuesNode,\r\n    isRegexCleanupNode,\r\n    isNormalizeTextCaseNode,\r\n    isStandardizeDatesNode,\r\n    isClassUndersamplingNode,\r\n    isClassOversamplingNode,\r\n    isTrainModelDraftNode,\r\n    isLabelEncodingNode,\r\n    isOrdinalEncodingNode,\r\n    isDummyEncodingNode,\r\n    isOneHotEncodingNode,\r\n    isRemoveDuplicatesNode,\r\n    isSkewnessNode,\r\n    isFeatureTargetSplitNode,\r\n    parameters,\r\n  ]);\r\n\r\n  const dataConsistencyParameters = useMemo(\r\n    () => (isDataConsistencyNode ? filteredParameters : []),\r\n    [filteredParameters, isDataConsistencyNode],\r\n  );\r\n\r\n  const shouldLoadSkewnessInsights = isSkewnessNode || isSkewnessDistributionNode;\r\n\r\n  const initialConfig = useMemo(() => {\r\n    const base = cloneConfig(node?.data?.config ?? {});\r\n    if (!base || typeof base !== 'object' || Array.isArray(base)) {\r\n      return {};\r\n    }\r\n    if (!base.column_overrides || typeof base.column_overrides !== 'object' || Array.isArray(base.column_overrides)) {\r\n      base.column_overrides = {};\r\n    }\r\n    return base;\r\n  }, [node?.id, node?.data?.config]);\r\n  const [configState, setConfigState] = useState<Record<string, any>>(initialConfig);\r\n\r\n  const targetEncodingFallbackAppliedRef = useRef(false);\r\n  const stableInitialConfig = useMemo(() => stableStringify(initialConfig), [initialConfig]);\r\n  const stableCurrentConfig = useMemo(() => stableStringify(configState), [configState]);\r\n\r\n  const modelRegistryConfig = useMemo(() => {\r\n    if (!isModelRegistryNode) {\r\n      return null;\r\n    }\r\n    return configState ? { ...configState } : {};\r\n  }, [configState, isModelRegistryNode]);\r\n\r\n  const imputerStrategies = useMemo(\r\n    () => normalizeImputationStrategies(configState?.strategies, imputationMethodValues),\r\n    [configState?.strategies, imputationMethodValues]\r\n  );\r\n  const imputerStrategyCount = imputerStrategies.length;\r\n\r\n  const skewnessTransformations = useMemo(\r\n    () => dedupeSkewnessTransformations(normalizeSkewnessTransformations(configState?.transformations)),\r\n    [configState?.transformations],\r\n  );\r\n\r\n  const graphContext = useMemo(() => {\r\n    if (!graphSnapshot) {\r\n      return null;\r\n    }\r\n    const nodes = Array.isArray(graphSnapshot.nodes) ? graphSnapshot.nodes : [];\r\n    const edges = Array.isArray(graphSnapshot.edges) ? graphSnapshot.edges : [];\r\n    return { nodes, edges };\r\n  }, [graphSnapshot]);\r\n\r\n  const graphNodes = useMemo(() => (graphSnapshot && Array.isArray(graphSnapshot.nodes) ? graphSnapshot.nodes : []), [graphSnapshot]);\r\n  const graphEdges = useMemo(() => (graphSnapshot && Array.isArray(graphSnapshot.edges) ? graphSnapshot.edges : []), [graphSnapshot]);\r\n  const graphNodeCount = graphNodes.length;\r\n\r\n  const upstreamNodeIds = useMemo(() => {\r\n    if (!nodeId || !graphEdges.length) {\r\n      return [] as string[];\r\n    }\r\n    const visited = new Set<string>();\r\n    const stack: string[] = [nodeId];\r\n    while (stack.length) {\r\n      const current = stack.pop();\r\n      if (!current) {\r\n        continue;\r\n      }\r\n      graphEdges.forEach((edge: any) => {\r\n        const sourceRaw = edge && typeof edge.source === 'string' ? edge.source.trim() : '';\r\n        const targetRaw = edge && typeof edge.target === 'string' ? edge.target.trim() : '';\r\n        if (!sourceRaw || !targetRaw) {\r\n          return;\r\n        }\r\n        if (targetRaw === current && !visited.has(sourceRaw)) {\r\n          visited.add(sourceRaw);\r\n          stack.push(sourceRaw);\r\n        }\r\n      });\r\n    }\r\n    const ordered = Array.from(visited);\r\n    ordered.sort();\r\n    return ordered;\r\n  }, [graphEdges, nodeId]);\r\n\r\n  const upstreamTargetColumn = useMemo(() => {\r\n    if (!upstreamNodeIds.length) {\r\n      return '';\r\n    }\r\n\r\n    // Prioritize feature_target_split over train_test_split\r\n    let featureTargetSplitColumn = '';\r\n    let trainTestSplitColumn = '';\r\n\r\n    for (const upstreamId of upstreamNodeIds) {\r\n      const upstreamNode = graphNodes.find((n: any) => n?.id === upstreamId);\r\n      if (!upstreamNode) {\r\n        continue;\r\n      }\r\n\r\n      const catalogType = String(upstreamNode?.data?.catalogType ?? '').toLowerCase().trim();\r\n      \r\n      if (catalogType === 'feature_target_split') {\r\n        const targetCol = upstreamNode?.data?.config?.target_column;\r\n        if (typeof targetCol === 'string' && targetCol.trim()) {\r\n          featureTargetSplitColumn = targetCol.trim();\r\n        }\r\n      } else if (catalogType === 'train_test_split') {\r\n        const targetCol = upstreamNode?.data?.config?.target_column;\r\n        if (typeof targetCol === 'string' && targetCol.trim()) {\r\n          trainTestSplitColumn = targetCol.trim();\r\n        }\r\n      }\r\n    }\r\n\r\n    // Return feature_target_split column if available, otherwise train_test_split\r\n    return featureTargetSplitColumn || trainTestSplitColumn || '';\r\n  }, [graphNodes, upstreamNodeIds]);\r\n\r\n  const {\r\n    featureTargetSplitConfig,\r\n    trainTestSplitConfig,\r\n    resamplingConfig,\r\n    trainModelDraftConfig,\r\n    trainModelRuntimeConfig,\r\n    trainModelCVConfig,\r\n    filteredModelTypeOptions,\r\n  } = useModelingConfiguration({\r\n    configState,\r\n    setConfigState,\r\n    isFeatureTargetSplitNode,\r\n    isTrainTestSplitNode,\r\n    isTrainModelDraftNode,\r\n  isHyperparameterTuningNode,\r\n    isClassResamplingNode,\r\n    isClassOversamplingNode,\r\n    isClassUndersamplingNode,\r\n    upstreamTargetColumn,\r\n    nodeId,\r\n    modelTypeOptions: trainModelModelTypeParameter?.options ?? null,\r\n  });\r\n\r\n  const featureMathOperations = useMemo<FeatureMathOperationDraft[]>(() => {\r\n    if (!isFeatureMathNode) {\r\n      return [];\r\n    }\r\n    return normalizeFeatureMathOperations(configState?.operations ?? []);\r\n  }, [configState?.operations, isFeatureMathNode]);\r\n\r\n  const upstreamConfigFingerprints = useMemo(() => {\r\n    if (!upstreamNodeIds.length) {\r\n      return {} as Record<string, any>;\r\n    }\r\n    const map: Record<string, any> = {};\r\n    upstreamNodeIds.forEach((identifier) => {\r\n      const match = graphNodes.find((entry: any) => entry && typeof entry.id === 'string' && entry.id === identifier);\r\n      if (!match) {\r\n        return;\r\n      }\r\n      const configPayload = match?.data?.config ?? null;\r\n      map[identifier] = configPayload;\r\n    });\r\n    return map;\r\n  }, [graphNodes, upstreamNodeIds]);\r\n\r\n  const previewSignature = useMemo(() => {\r\n    return stableStringify({\r\n      sourceId: sourceId ?? null,\r\n      nodeId: nodeId || null,\r\n      config: configState,\r\n      upstreamIds: upstreamNodeIds,\r\n      upstreamConfig: upstreamConfigFingerprints,\r\n    });\r\n  }, [configState, nodeId, sourceId, upstreamConfigFingerprints, upstreamNodeIds]);\r\n\r\n  const [cachedPreviewSchema, setCachedPreviewSchema] = useState<PipelinePreviewSchema | null>(null);\r\n\r\n  const cachedSchemaColumns = useMemo(() => cachedPreviewSchema?.columns ?? [], [cachedPreviewSchema]);\r\n\r\n  const datasetNodeIds = useMemo(() => {\r\n    const result = new Set<string>();\r\n    graphNodes.forEach((entry: any) => {\r\n      if (!entry) {\r\n        return;\r\n      }\r\n      const entryId = typeof entry.id === 'string' ? entry.id.trim() : String(entry?.id ?? '').trim();\r\n      if (!entryId) {\r\n        return;\r\n      }\r\n      const entryData = entry?.data ?? {};\r\n      if (entryId === 'dataset-source' || entryData?.isDataset === true || entryData?.catalogType === 'dataset') {\r\n        result.add(entryId);\r\n      }\r\n    });\r\n    if (!result.size) {\r\n      result.add('dataset-source');\r\n    }\r\n    return Array.from(result);\r\n  }, [graphNodes]);\r\n\r\n  const hasReachableSource = useMemo(() => {\r\n    if (!nodeId) {\r\n      return false;\r\n    }\r\n\r\n    if (isDataset) {\r\n      return true;\r\n    }\r\n\r\n    if (!graphEdges.length) {\r\n      return datasetNodeIds.includes(nodeId);\r\n    }\r\n\r\n    const adjacency = new Map<string, string[]>();\r\n    graphEdges.forEach((edge: any) => {\r\n      const rawSource = edge?.source;\r\n      const rawTarget = edge?.target;\r\n      const source = typeof rawSource === 'string' ? rawSource.trim() : String(rawSource ?? '').trim();\r\n      const target = typeof rawTarget === 'string' ? rawTarget.trim() : String(rawTarget ?? '').trim();\r\n      if (!source || !target) {\r\n        return;\r\n      }\r\n      const list = adjacency.get(source);\r\n      if (list) {\r\n        list.push(target);\r\n      } else {\r\n        adjacency.set(source, [target]);\r\n      }\r\n    });\r\n\r\n    const visited = new Set<string>();\r\n    const stack = [...datasetNodeIds];\r\n\r\n    while (stack.length) {\r\n      const current = stack.pop();\r\n      if (!current || visited.has(current)) {\r\n        continue;\r\n      }\r\n      visited.add(current);\r\n      const neighbors = adjacency.get(current);\r\n      if (neighbors) {\r\n        neighbors.forEach((neighbor) => {\r\n          if (neighbor && !visited.has(neighbor)) {\r\n            stack.push(neighbor);\r\n          }\r\n        });\r\n      }\r\n    }\r\n\r\n    return visited.has(nodeId);\r\n  }, [datasetNodeIds, graphEdges, isDataset, nodeId]);\r\n\r\n  const oversamplingSchemaGuard = useMemo<ResamplingSchemaGuard | null>(() => {\r\n    if (!isClassOversamplingNode) {\r\n      return null;\r\n    }\r\n    if (!cachedSchemaColumns.length) {\r\n      return null;\r\n    }\r\n    const targetColumn = resamplingConfig?.targetColumn;\r\n    if (!targetColumn) {\r\n      return null;\r\n    }\r\n\r\n    const allowedFamilies = new Set(['numeric', 'integer', 'boolean']);\r\n    const blockedDetails = cachedSchemaColumns\r\n      .filter((column) => column && column.name !== targetColumn)\r\n      .filter((column) => !allowedFamilies.has(String(column.logical_family ?? 'unknown')))\r\n      .map((column) => ({\r\n        name: column.name,\r\n        logical_family: String(column.logical_family ?? 'unknown'),\r\n      }));\r\n\r\n    if (!blockedDetails.length) {\r\n      return null;\r\n    }\r\n\r\n    return {\r\n      blocked: true,\r\n      message:\r\n        'Class oversampling requires numeric feature columns. Encode or cast the listed fields before refreshing the preview.',\r\n      columns: blockedDetails.map((detail) => detail.name),\r\n      details: blockedDetails,\r\n    };\r\n  }, [cachedSchemaColumns, isClassOversamplingNode, resamplingConfig?.targetColumn]);\r\n\r\n  const imputationSchemaDiagnostics = useMemo<ImputationSchemaDiagnostics | null>(() => {\r\n    if (!isImputerNode) {\r\n      return null;\r\n    }\r\n    if (!cachedSchemaColumns.length) {\r\n      return null;\r\n    }\r\n    if (!imputerStrategies.length) {\r\n      return null;\r\n    }\r\n\r\n    const numericFamilies = new Set(['numeric', 'integer']);\r\n    const columnLookup = new Map(cachedSchemaColumns.map((column) => [column.name, column]));\r\n    const entries: ImputationSchemaDiagnostics['entries'] = [];\r\n\r\n    imputerStrategies.forEach((strategy, index) => {\r\n      if (!isNumericImputationMethod(strategy.method)) {\r\n        return;\r\n      }\r\n      if (!Array.isArray(strategy.columns) || !strategy.columns.length) {\r\n        return;\r\n      }\r\n\r\n      const invalidDetails = strategy.columns\r\n        .map((columnName) => columnLookup.get(columnName))\r\n        .filter((column): column is NonNullable<(typeof cachedSchemaColumns)[number]> => Boolean(column))\r\n        .filter((column) => !numericFamilies.has(String(column.logical_family ?? 'unknown')))\r\n        .map((column) => ({\r\n          name: column.name,\r\n          logical_family: String(column.logical_family ?? 'unknown'),\r\n        }));\r\n\r\n      if (invalidDetails.length) {\r\n        entries.push({\r\n          index,\r\n          columns: invalidDetails.map((detail) => detail.name),\r\n          details: invalidDetails,\r\n        });\r\n      }\r\n    });\r\n\r\n    if (!entries.length) {\r\n      return null;\r\n    }\r\n\r\n    return {\r\n      blocked: true,\r\n      message:\r\n        'Numeric imputation methods can only target numeric columns. Recast or adjust the highlighted fields before running the preview.',\r\n      entries,\r\n    };\r\n  }, [cachedSchemaColumns, imputerStrategies, isImputerNode]);\r\n\r\n  const skipPreview = Boolean(oversamplingSchemaGuard?.blocked || imputationSchemaDiagnostics?.blocked);\r\n\r\n  const [availableColumns, setAvailableColumns] = useState<string[]>([]);\r\n  const [columnSearch, setColumnSearch] = useState('');\r\n  const [columnMissingMap, setColumnMissingMap] = useState<Record<string, number>>({});\r\n  const [columnTypeMap, setColumnTypeMap] = useState<Record<string, string>>({});\r\n  const [columnSuggestions, setColumnSuggestions] = useState<Record<string, string[]>>({});\r\n  const [imputerMissingFilter, setImputerMissingFilter] = useState(0);\r\n\r\n  const hasDropColumnParameter = Boolean(dropColumnParameter);\r\n\r\n  const {\r\n    hasDropColumnSource,\r\n    availableFilters,\r\n    activeFilterId,\r\n    setActiveFilterId,\r\n    recommendations,\r\n    filteredRecommendations,\r\n    formatSignalName,\r\n    isFetchingRecommendations,\r\n    recommendationsError,\r\n    recommendationsGeneratedAt,\r\n    suggestedThreshold,\r\n    refreshRecommendations,\r\n  } = useDropMissingColumns({\r\n    hasDropColumnSource: hasDropColumnParameter,\r\n    sourceId,\r\n    nodeId,\r\n    graphContext,\r\n    hasReachableSource,\r\n    columnTypeMap,\r\n    setAvailableColumns,\r\n    setColumnSearch,\r\n    setColumnMissingMap,\r\n    setColumnTypeMap,\r\n    setColumnSuggestions,\r\n  });\r\n\r\n  useDropColumnRecommendations({\r\n    shouldLoad: isImputerNode,\r\n    sourceId,\r\n    hasReachableSource,\r\n    graphContext,\r\n    targetNodeId: node?.id ?? null,\r\n    setAvailableColumns,\r\n    setColumnMissingMap,\r\n  });\r\n\r\n  const {\r\n    isFetching: isFetchingLabelEncoding,\r\n    error: labelEncodingError,\r\n    suggestions: labelEncodingSuggestions,\r\n    metadata: labelEncodingMetadata,\r\n  } = useLabelEncodingRecommendations({\r\n    isLabelEncodingNode,\r\n    sourceId,\r\n    hasReachableSource,\r\n    graphContext,\r\n    targetNodeId: node?.id ?? null,\r\n  });\r\n\r\n  const {\r\n    isFetching: isFetchingTargetEncoding,\r\n    error: targetEncodingError,\r\n    suggestions: targetEncodingSuggestions,\r\n    metadata: targetEncodingMetadata,\r\n  } = useTargetEncodingRecommendations({\r\n    isTargetEncodingNode,\r\n    sourceId,\r\n    hasReachableSource,\r\n    graphContext,\r\n    targetNodeId: node?.id ?? null,\r\n  });\r\n\r\n  const {\r\n    isFetching: isFetchingHashEncoding,\r\n    error: hashEncodingError,\r\n    suggestions: hashEncodingSuggestions,\r\n    metadata: hashEncodingMetadata,\r\n  } = useHashEncodingRecommendations({\r\n    isHashEncodingNode,\r\n    sourceId,\r\n    hasReachableSource,\r\n    graphContext,\r\n    targetNodeId: node?.id ?? null,\r\n  });\r\n\r\n  const {\r\n    isFetching: isFetchingOrdinalEncoding,\r\n    error: ordinalEncodingError,\r\n    suggestions: ordinalEncodingSuggestions,\r\n    metadata: ordinalEncodingMetadata,\r\n  } = useOrdinalEncodingRecommendations({\r\n    isOrdinalEncodingNode,\r\n    sourceId,\r\n    hasReachableSource,\r\n    graphContext,\r\n    targetNodeId: node?.id ?? null,\r\n  });\r\n\r\n  const {\r\n    isFetching: isFetchingDummyEncoding,\r\n    error: dummyEncodingError,\r\n    suggestions: dummyEncodingSuggestions,\r\n    metadata: dummyEncodingMetadata,\r\n  } = useDummyEncodingRecommendations({\r\n    isDummyEncodingNode,\r\n    sourceId,\r\n    hasReachableSource,\r\n    graphContext,\r\n    targetNodeId: node?.id ?? null,\r\n  });\r\n\r\n  const {\r\n    isFetching: isFetchingOneHotEncoding,\r\n    error: oneHotEncodingError,\r\n    suggestions: oneHotEncodingSuggestions,\r\n    metadata: oneHotEncodingMetadata,\r\n  } = useOneHotEncodingRecommendations({\r\n    isOneHotEncodingNode,\r\n    sourceId,\r\n    hasReachableSource,\r\n    graphContext,\r\n    targetNodeId: node?.id ?? null,\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (!isLabelEncodingNode) {\r\n      return;\r\n    }\r\n    if (!labelEncodingMetadata.autoDetectDefault) {\r\n      return;\r\n    }\r\n    if (configState?.auto_detect === true) {\r\n      return;\r\n    }\r\n    if (configState?.auto_detect === false) {\r\n      return;\r\n    }\r\n    setConfigState((previous) => {\r\n      if (previous?.auto_detect !== undefined && previous.auto_detect !== null) {\r\n        return previous;\r\n      }\r\n      return {\r\n        ...previous,\r\n        auto_detect: true,\r\n      };\r\n    });\r\n  }, [configState?.auto_detect, isLabelEncodingNode, labelEncodingMetadata.autoDetectDefault, setConfigState]);\r\n\r\n  useEffect(() => {\r\n    if (!isTargetEncodingNode) {\r\n      return;\r\n    }\r\n    if (!targetEncodingMetadata.autoDetectDefault) {\r\n      return;\r\n    }\r\n    if (configState?.auto_detect === true) {\r\n      return;\r\n    }\r\n    if (configState?.auto_detect === false) {\r\n      return;\r\n    }\r\n    setConfigState((previous) => {\r\n      if (previous?.auto_detect !== undefined && previous.auto_detect !== null) {\r\n        return previous;\r\n      }\r\n      return {\r\n        ...previous,\r\n        auto_detect: true,\r\n      };\r\n    });\r\n  }, [configState?.auto_detect, isTargetEncodingNode, setConfigState, targetEncodingMetadata.autoDetectDefault]);\r\n\r\n  useEffect(() => {\r\n    if (!isHashEncodingNode) {\r\n      return;\r\n    }\r\n    if (!hashEncodingMetadata.autoDetectDefault) {\r\n      return;\r\n    }\r\n    if (configState?.auto_detect === true) {\r\n      return;\r\n    }\r\n    if (configState?.auto_detect === false) {\r\n      return;\r\n    }\r\n    setConfigState((previous) => {\r\n      if (previous?.auto_detect !== undefined && previous.auto_detect !== null) {\r\n        return previous;\r\n      }\r\n      return {\r\n        ...previous,\r\n        auto_detect: true,\r\n      };\r\n    });\r\n  }, [configState?.auto_detect, hashEncodingMetadata.autoDetectDefault, isHashEncodingNode, setConfigState]);\r\n\r\n  useEffect(() => {\r\n    if (!isHashEncodingNode) {\r\n      return;\r\n    }\r\n    const suggestedBuckets = hashEncodingMetadata.suggestedBucketDefault;\r\n    if (!suggestedBuckets || !Number.isFinite(suggestedBuckets)) {\r\n      return;\r\n    }\r\n    const numericBuckets = Math.max(2, Math.round(suggestedBuckets));\r\n    setConfigState((previous) => {\r\n      if (!previous || typeof previous !== 'object' || Array.isArray(previous)) {\r\n        return previous;\r\n      }\r\n      const current = previous.n_buckets;\r\n      if (current !== undefined && current !== null) {\r\n        const numericCurrent = Number(current);\r\n        if (Number.isFinite(numericCurrent) && Math.round(numericCurrent) > 0) {\r\n          return previous;\r\n        }\r\n      }\r\n      return {\r\n        ...previous,\r\n        n_buckets: numericBuckets,\r\n      };\r\n    });\r\n  }, [hashEncodingMetadata.suggestedBucketDefault, isHashEncodingNode, setConfigState]);\r\n\r\n  useEffect(() => {\r\n    if (!isTargetEncodingNode) {\r\n      return;\r\n    }\r\n    if (!targetEncodingMetadata.enableGlobalFallbackDefault) {\r\n      return;\r\n    }\r\n\r\n    const encodeMissingActive = typeof configState?.encode_missing === 'boolean' ? configState.encode_missing : null;\r\n    const currentHandleUnknown = typeof configState?.handle_unknown === 'string'\r\n      ? configState.handle_unknown.trim().toLowerCase()\r\n      : '';\r\n\r\n    if (encodeMissingActive === true && currentHandleUnknown === 'global_mean') {\r\n      return;\r\n    }\r\n\r\n    setConfigState((previous) => {\r\n      const previousEncodeMissing = typeof previous?.encode_missing === 'boolean' ? previous.encode_missing : null;\r\n      const previousHandleUnknown = typeof previous?.handle_unknown === 'string'\r\n        ? previous.handle_unknown.trim().toLowerCase()\r\n        : '';\r\n\r\n      if (previousEncodeMissing === true && previousHandleUnknown === 'global_mean') {\r\n        return previous;\r\n      }\r\n\r\n      const next: Record<string, any> = { ...previous };\r\n\r\n      if (previousEncodeMissing !== true) {\r\n        next.encode_missing = true;\r\n      }\r\n\r\n      if (previousHandleUnknown !== 'global_mean') {\r\n        next.handle_unknown = 'global_mean';\r\n      }\r\n\r\n      return next;\r\n    });\r\n  }, [\r\n    configState?.encode_missing,\r\n    configState?.handle_unknown,\r\n    isTargetEncodingNode,\r\n    setConfigState,\r\n    targetEncodingMetadata.enableGlobalFallbackDefault,\r\n  ]);\r\n\r\n  useEffect(() => {\r\n    if (!isOrdinalEncodingNode) {\r\n      return;\r\n    }\r\n    if (!ordinalEncodingMetadata.autoDetectDefault) {\r\n      return;\r\n    }\r\n    if (configState?.auto_detect === true) {\r\n      return;\r\n    }\r\n    if (configState?.auto_detect === false) {\r\n      return;\r\n    }\r\n    setConfigState((previous) => {\r\n      if (previous?.auto_detect !== undefined && previous.auto_detect !== null) {\r\n        return previous;\r\n      }\r\n      return {\r\n        ...previous,\r\n        auto_detect: true,\r\n      };\r\n    });\r\n  }, [configState?.auto_detect, isOrdinalEncodingNode, ordinalEncodingMetadata.autoDetectDefault, setConfigState]);\r\n\r\n  useEffect(() => {\r\n    if (!isOrdinalEncodingNode) {\r\n      return;\r\n    }\r\n    if (!ordinalEncodingMetadata.enableUnknownDefault) {\r\n      return;\r\n    }\r\n    const raw = typeof configState?.handle_unknown === 'string' ? configState.handle_unknown.trim().toLowerCase() : '';\r\n    if (raw) {\r\n      return;\r\n    }\r\n    setConfigState((previous) => {\r\n      const current = typeof previous?.handle_unknown === 'string' ? previous.handle_unknown.trim().toLowerCase() : '';\r\n      if (current) {\r\n        return previous;\r\n      }\r\n      return {\r\n        ...previous,\r\n        handle_unknown: 'use_encoded_value',\r\n      };\r\n    });\r\n  }, [configState?.handle_unknown, isOrdinalEncodingNode, ordinalEncodingMetadata.enableUnknownDefault, setConfigState]);\r\n\r\n  useEffect(() => {\r\n    if (!isDummyEncodingNode) {\r\n      return;\r\n    }\r\n    if (!dummyEncodingMetadata.autoDetectDefault) {\r\n      return;\r\n    }\r\n    if (configState?.auto_detect === true) {\r\n      return;\r\n    }\r\n    if (configState?.auto_detect === false) {\r\n      return;\r\n    }\r\n    setConfigState((previous) => {\r\n      if (previous?.auto_detect !== undefined && previous.auto_detect !== null) {\r\n        return previous;\r\n      }\r\n      return {\r\n        ...previous,\r\n        auto_detect: true,\r\n      };\r\n    });\r\n  }, [configState?.auto_detect, dummyEncodingMetadata.autoDetectDefault, isDummyEncodingNode, setConfigState]);\r\n\r\n  useEffect(() => {\r\n    if (!requiresColumnCatalog && !isImputerNode) {\r\n      return;\r\n    }\r\n\r\n    if (sourceId && hasReachableSource) {\r\n      return;\r\n    }\r\n\r\n    setAvailableColumns([]);\r\n    setColumnMissingMap({});\r\n    setColumnTypeMap({});\r\n    setColumnSuggestions({});\r\n    setColumnSearch('');\r\n\r\n  }, [hasReachableSource, isImputerNode, requiresColumnCatalog, sourceId]);\r\n\r\n  // Only reset config state when the node ID changes (i.e., when switching to a different node)\r\n  // Don't reset when the node object reference changes due to other updates\r\n  const currentNodeId = node?.id;\r\n  const lastNodeIdRef = useRef<string | undefined>(currentNodeId);\r\n  \r\n  useEffect(() => {\r\n    if (lastNodeIdRef.current !== currentNodeId) {\r\n      lastNodeIdRef.current = currentNodeId;\r\n      setConfigState(initialConfig);\r\n      targetEncodingFallbackAppliedRef.current = false;\r\n    }\r\n  }, [currentNodeId]); // Removed initialConfig from dependencies!\r\n\r\n  useEffect(() => {\r\n    setImputerMissingFilter(0);\r\n  }, [isImputerNode, node?.id]);\r\n\r\n  const [binnedSamplePreset, setBinnedSamplePreset] = useState<BinnedSamplePresetValue>('500');\r\n\r\n  const [collapsedStrategies, setCollapsedStrategies] = useState<Set<number>>(() => new Set());\r\n  const [collapsedFeatureMath, setCollapsedFeatureMath] = useState<Set<string>>(() => new Set());\r\n\r\n  useEffect(() => {\r\n    setCollapsedStrategies(new Set());\r\n  }, [stableInitialConfig]);\r\n\r\n  useEffect(() => {\r\n    if (!isTargetEncodingNode) {\r\n      targetEncodingFallbackAppliedRef.current = false;\r\n      return;\r\n    }\r\n    if (!targetEncodingMetadata.enableGlobalFallbackDefault) {\r\n      return;\r\n    }\r\n    if (targetEncodingFallbackAppliedRef.current) {\r\n      return;\r\n    }\r\n\r\n    const encodeMissingActive = typeof configState?.encode_missing === 'boolean' ? configState.encode_missing : null;\r\n    const currentHandleUnknown = typeof configState?.handle_unknown === 'string'\r\n      ? configState.handle_unknown.trim().toLowerCase()\r\n      : '';\r\n\r\n    if (encodeMissingActive === true && currentHandleUnknown === 'global_mean') {\r\n      targetEncodingFallbackAppliedRef.current = true;\r\n      return;\r\n    }\r\n\r\n    setConfigState((previous) => {\r\n      const previousEncodeMissing = typeof previous?.encode_missing === 'boolean' ? previous.encode_missing : null;\r\n      const previousHandleUnknown = typeof previous?.handle_unknown === 'string'\r\n        ? previous.handle_unknown.trim().toLowerCase()\r\n        : '';\r\n\r\n      if (previousEncodeMissing === true && previousHandleUnknown === 'global_mean') {\r\n        targetEncodingFallbackAppliedRef.current = true;\r\n        return previous;\r\n      }\r\n\r\n      const next: Record<string, any> = { ...previous };\r\n\r\n      if (previousEncodeMissing !== true) {\r\n        next.encode_missing = true;\r\n      }\r\n\r\n      if (previousHandleUnknown !== 'global_mean') {\r\n        next.handle_unknown = 'global_mean';\r\n      }\r\n\r\n      targetEncodingFallbackAppliedRef.current = true;\r\n      return next;\r\n    });\r\n  }, [\r\n    configState?.encode_missing,\r\n    configState?.handle_unknown,\r\n    isTargetEncodingNode,\r\n    setConfigState,\r\n    targetEncodingMetadata.enableGlobalFallbackDefault,\r\n  ]);\r\n\r\n  const isPreviewNode = useMemo(() => node?.data?.catalogType === 'data_preview', [node?.data?.catalogType]);\r\n  const isDatasetProfileNode = useMemo(\r\n    () => node?.data?.catalogType === 'dataset_profile',\r\n    [node?.data?.catalogType]\r\n  );\r\n  const profilingGraphSignature = useMemo(() => (graphContext ? stableStringify(graphContext) : ''), [graphContext]);\r\n\r\n  const datasetProfileController = useDatasetProfileController({\r\n    node,\r\n    isDatasetProfileNode,\r\n    sourceId,\r\n    hasReachableSource,\r\n    graphContext,\r\n    profilingGraphSignature,\r\n    formatRelativeTime,\r\n  });\r\n  const { profileState } = datasetProfileController;\r\n\r\n  const shouldFetchPreview = useMemo(() => {\r\n    if (!graphSnapshot) {\r\n      return false;\r\n    }\r\n    if (!graphNodeCount) {\r\n      return false;\r\n    }\r\n    if (!hasReachableSource) {\r\n      return false;\r\n    }\r\n    return true;\r\n  }, [graphNodeCount, graphSnapshot, hasReachableSource, sourceId]);\r\n\r\n  const canTriggerPreview = useMemo(() => {\r\n    if (!graphSnapshot) {\r\n      return false;\r\n    }\r\n    if (!sourceId) {\r\n      return false;\r\n    }\r\n    if (!hasReachableSource) {\r\n      return false;\r\n    }\r\n    return graphNodeCount > 0;\r\n  }, [graphNodeCount, graphSnapshot, hasReachableSource, sourceId]);\r\n\r\n  const shouldIncludeSignals =\r\n    isPreviewNode ||\r\n    isFeatureMathNode ||\r\n    isPolynomialFeaturesNode ||\r\n    isFeatureSelectionNode ||\r\n    isTrainTestSplitNode ||\r\n    isOutlierNode ||\r\n    isTransformerAuditNode;\r\n\r\n  const { previewState, refreshPreview } = usePipelinePreview({\r\n    shouldFetchPreview,\r\n    sourceId,\r\n    canTriggerPreview,\r\n    graphSnapshot: graphSnapshot ?? null,\r\n    isPreviewNode,\r\n    targetNodeId: node?.id ?? null,\r\n    previewSignature,\r\n    skipPreview,\r\n    requestPreviewRows: isPreviewNode,\r\n    includeSignals: shouldIncludeSignals,\r\n  });\r\n\r\n  const featureMathSignals = useMemo<FeatureMathNodeSignal[]>(() => {\r\n    if (!isFeatureMathNode) {\r\n      return [];\r\n    }\r\n    const rawSignals = previewState.data?.signals?.feature_math;\r\n    return Array.isArray(rawSignals) ? rawSignals : [];\r\n  }, [isFeatureMathNode, previewState.data?.signals?.feature_math]);\r\n\r\n  const polynomialSignal = useMemo<PolynomialFeaturesNodeSignal | null>(() => {\r\n    if (!isPolynomialFeaturesNode) {\r\n      return null;\r\n    }\r\n    const rawSignals = previewState.data?.signals?.polynomial_features;\r\n    if (!Array.isArray(rawSignals) || rawSignals.length === 0) {\r\n      return null;\r\n    }\r\n    const matching = nodeId\r\n      ? rawSignals.find((entry) => entry && typeof entry.node_id === 'string' && entry.node_id === nodeId)\r\n      : null;\r\n    return matching ?? rawSignals[0] ?? null;\r\n  }, [isPolynomialFeaturesNode, nodeId, previewState.data?.signals?.polynomial_features]);\r\n\r\n  const featureSelectionSignal = useMemo<FeatureSelectionNodeSignal | null>(() => {\r\n    if (!isFeatureSelectionNode) {\r\n      return null;\r\n    }\r\n    const rawSignals = previewState.data?.signals?.feature_selection;\r\n    if (!Array.isArray(rawSignals) || rawSignals.length === 0) {\r\n      return null;\r\n    }\r\n    const matching = nodeId\r\n      ? rawSignals.find((entry) => entry && typeof entry.node_id === 'string' && entry.node_id === nodeId)\r\n      : null;\r\n    return matching ?? rawSignals[0] ?? null;\r\n  }, [isFeatureSelectionNode, nodeId, previewState.data?.signals?.feature_selection]);\r\n\r\n  useEffect(() => {\r\n    if (!isFeatureSelectionNode) {\r\n      return;\r\n    }\r\n\r\n    const normalizedSignalTarget =\r\n      typeof featureSelectionSignal?.target_column === 'string'\r\n        ? featureSelectionSignal.target_column.trim()\r\n        : '';\r\n    const fallbackTarget = typeof upstreamTargetColumn === 'string' ? upstreamTargetColumn.trim() : '';\r\n    const resolvedTarget = normalizedSignalTarget || fallbackTarget;\r\n\r\n    if (!resolvedTarget) {\r\n      return;\r\n    }\r\n\r\n    setConfigState((previous) => {\r\n      const currentTarget =\r\n        typeof previous?.target_column === 'string' ? previous.target_column.trim() : '';\r\n      if (currentTarget) {\r\n        return previous;\r\n      }\r\n      return {\r\n        ...previous,\r\n        target_column: resolvedTarget,\r\n      };\r\n    });\r\n  }, [featureSelectionSignal?.target_column, isFeatureSelectionNode, setConfigState, upstreamTargetColumn]);\r\n\r\n  useEffect(() => {\r\n    if (!isFeatureSelectionNode) {\r\n      return;\r\n    }\r\n\r\n    const backendK =\r\n      typeof featureSelectionSignal?.k === 'number' && Number.isFinite(featureSelectionSignal.k)\r\n        ? Math.max(0, Math.trunc(featureSelectionSignal.k))\r\n        : null;\r\n    const selectedCount = Array.isArray(featureSelectionSignal?.selected_columns)\r\n      ? featureSelectionSignal.selected_columns.length\r\n      : null;\r\n\r\n    const candidate = (backendK ?? selectedCount) ?? null;\r\n    if (candidate === null || candidate <= 0) {\r\n      return;\r\n    }\r\n\r\n    setConfigState((previous) => {\r\n      const rawValue = previous?.k;\r\n      let normalizedCurrent: number | null = null;\r\n\r\n      if (typeof rawValue === 'number' && Number.isFinite(rawValue)) {\r\n        normalizedCurrent = Math.trunc(rawValue);\r\n      } else if (typeof rawValue === 'string') {\r\n        const parsed = Number(rawValue);\r\n        if (Number.isFinite(parsed)) {\r\n          normalizedCurrent = Math.trunc(parsed);\r\n        }\r\n      }\r\n\r\n      if (normalizedCurrent !== null && normalizedCurrent <= candidate) {\r\n        return previous;\r\n      }\r\n\r\n      return {\r\n        ...previous,\r\n        k: candidate,\r\n      };\r\n    });\r\n  }, [\r\n    featureSelectionSignal?.k,\r\n    featureSelectionSignal?.selected_columns,\r\n    isFeatureSelectionNode,\r\n    setConfigState,\r\n  ]);\r\n\r\n  const featureMathSummaries = useMemo(\r\n    () => (isFeatureMathNode ? buildFeatureMathSummaries(featureMathOperations, featureMathSignals) : []),\r\n    [featureMathOperations, featureMathSignals, isFeatureMathNode],\r\n  );\r\n\r\n  useEffect(() => {\r\n    if (!isFeatureMathNode) {\r\n      setCollapsedFeatureMath(() => new Set());\r\n      return;\r\n    }\r\n    setCollapsedFeatureMath((previous) => {\r\n      if (!previous.size) {\r\n        return previous;\r\n      }\r\n      const validIds = new Set(featureMathOperations.map((operation) => operation.id));\r\n      const next = new Set<string>();\r\n      previous.forEach((id) => {\r\n        if (validIds.has(id)) {\r\n          next.add(id);\r\n        }\r\n      });\r\n      return next.size === previous.size ? previous : next;\r\n    });\r\n  }, [featureMathOperations, isFeatureMathNode]);\r\n\r\n  const {\r\n    outlierData,\r\n    outlierError,\r\n    isFetchingOutliers,\r\n    refreshOutliers,\r\n  } = useOutlierRecommendations({\r\n    isOutlierNode,\r\n    sourceId,\r\n    hasReachableSource,\r\n    graphContext,\r\n    targetNodeId: nodeId || null,\r\n  });\r\n\r\n  const {\r\n    scalingData,\r\n    scalingError,\r\n    isFetchingScaling,\r\n    refreshScaling,\r\n  } = useScalingInsights({\r\n    isScalingNode,\r\n    sourceId,\r\n    hasReachableSource,\r\n    graphContext,\r\n    targetNodeId: node?.id ?? null,\r\n  });\r\n\r\n  const {\r\n    binningData,\r\n    binningError,\r\n    isFetchingBinning,\r\n    refreshBinning,\r\n  } = useBinningInsights({\r\n    isBinningNode,\r\n    sourceId,\r\n    hasReachableSource,\r\n    graphContext,\r\n    targetNodeId: node?.id ?? null,\r\n  });\r\n\r\n  const handleRefreshPreview = useCallback(() => {\r\n    setCachedPreviewSchema(null);\r\n    refreshPreview();\r\n    if (isScalingNode) {\r\n      refreshScaling();\r\n    }\r\n    if (isBinningNode) {\r\n      refreshBinning();\r\n    }\r\n    if (isOutlierNode) {\r\n      refreshOutliers();\r\n    }\r\n  }, [\r\n    isBinningNode,\r\n    isOutlierNode,\r\n    isScalingNode,\r\n    refreshBinning,\r\n    refreshOutliers,\r\n    refreshPreview,\r\n    refreshScaling,\r\n  ]);\r\n\r\n  useEffect(() => {\r\n    const nextSchema = previewState.data?.schema ?? null;\r\n    if (!nextSchema) {\r\n      return;\r\n    }\r\n    setCachedPreviewSchema((previous) => {\r\n      if (previous?.signature && nextSchema.signature && previous.signature === nextSchema.signature) {\r\n        return previous;\r\n      }\r\n      return nextSchema;\r\n    });\r\n  }, [previewState.data?.schema]);\r\n\r\n  useEffect(() => {\r\n    setCachedPreviewSchema(null);\r\n  }, [sourceId]);\r\n\r\n  useEffect(() => {\r\n    setCachedPreviewSchema(null);\r\n  }, [previewSignature]);\r\n\r\n  const {\r\n    binnedDistributionData,\r\n    binnedDistributionError,\r\n    isFetchingBinnedDistribution,\r\n    refreshBinnedDistribution,\r\n  } = useBinnedDistribution({\r\n    isBinnedDistributionNode,\r\n    sourceId,\r\n    hasReachableSource,\r\n    graphContext,\r\n    targetNodeId: node?.id ?? null,\r\n    samplePreset: binnedSamplePreset,\r\n  });\r\n\r\n  const {\r\n    skewnessData,\r\n    skewnessError,\r\n    isFetchingSkewness,\r\n    refreshSkewness,\r\n  } = useSkewnessInsights({\r\n    shouldLoad: shouldLoadSkewnessInsights,\r\n    sourceId,\r\n    graphContext,\r\n    targetNodeId: node?.id ?? null,\r\n    transformations: skewnessTransformations,\r\n  });\r\n\r\n  const previewColumns = useMemo(() => {\r\n    const rawColumns = previewState.data?.columns;\r\n    if (!Array.isArray(rawColumns)) {\r\n      return [] as string[];\r\n    }\r\n    return rawColumns.filter((column): column is string => typeof column === 'string');\r\n  }, [previewState.data?.columns]);\r\n\r\n  const previewColumnStats = useMemo(() => {\r\n    const stats = previewState.data?.column_stats;\r\n    if (!Array.isArray(stats)) {\r\n      return [] as any[];\r\n    }\r\n    return stats;\r\n  }, [previewState.data?.column_stats]);\r\n\r\n  const activeFlagSuffix = useMemo(() => {\r\n    if (!isMissingIndicatorNode) {\r\n      return '';\r\n    }\r\n    return resolveMissingIndicatorSuffix(configState?.flag_suffix, node?.data?.config?.flag_suffix);\r\n  }, [configState?.flag_suffix, isMissingIndicatorNode, node?.data?.config?.flag_suffix]);\r\n\r\n  const missingIndicatorColumns = useMemo(() => {\r\n    if (!isMissingIndicatorNode) {\r\n      return [] as string[];\r\n    }\r\n    return ensureArrayOfString(configState?.columns);\r\n  }, [configState?.columns, isMissingIndicatorNode]);\r\n\r\n  const missingIndicatorInsights = useMemo<MissingIndicatorInsights>(() => {\r\n    if (!isMissingIndicatorNode) {\r\n      return { rows: [], flaggedColumnsInDataset: [], conflictCount: 0 };\r\n    }\r\n    return buildMissingIndicatorInsights({\r\n      selectedColumns: missingIndicatorColumns,\r\n      availableColumns,\r\n      columnMissingMap,\r\n      suffix: activeFlagSuffix,\r\n    });\r\n  }, [activeFlagSuffix, availableColumns, columnMissingMap, isMissingIndicatorNode, missingIndicatorColumns]);\r\n\r\n  const previewSampleRows = useMemo(() => {\r\n    if (!Array.isArray(previewState.data?.sample_rows)) {\r\n      return [] as Record<string, any>[];\r\n    }\r\n    return previewState.data.sample_rows;\r\n  }, [previewState.data?.sample_rows]);\r\n\r\n  const {\r\n    aliasAutoDetectMeta,\r\n    aliasStrategies,\r\n    aliasStrategyCount,\r\n    aliasSelectedColumns,\r\n    aliasAutoDetectEnabled,\r\n    replaceAliasesCustomPairsValue,\r\n    aliasColumnSummary,\r\n    aliasCustomPairSummary,\r\n    aliasSampleMap,\r\n    aliasColumnOptions,\r\n  } = useAliasConfiguration({\r\n    isReplaceAliasesNode,\r\n    configState,\r\n    nodeConfig: node?.data?.config ?? null,\r\n    availableColumns,\r\n    columnTypeMap,\r\n    previewSampleRows,\r\n  });\r\n\r\n  const {\r\n    trimWhitespace: {\r\n      columnSummary: trimWhitespaceColumnSummary,\r\n      sampleMap: trimWhitespaceSampleMap,\r\n      modeDetails: trimWhitespaceModeDetails,\r\n    },\r\n    removeSpecial: {\r\n      columnSummary: removeSpecialColumnSummary,\r\n      sampleMap: removeSpecialSampleMap,\r\n      modeDetails: removeSpecialModeDetails,\r\n      selectedMode: removeSpecialMode,\r\n    },\r\n    regexCleanup: {\r\n      columnSummary: regexCleanupColumnSummary,\r\n      sampleMap: regexCleanupSampleMap,\r\n      modeDetails: regexCleanupModeDetails,\r\n      selectedMode: regexCleanupMode,\r\n      replacementValue: regexCleanupReplacementValue,\r\n    },\r\n    normalizeCase: {\r\n      columnSummary: normalizeCaseColumnSummary,\r\n      sampleMap: normalizeCaseSampleMap,\r\n      modeDetails: normalizeCaseModeDetails,\r\n      selectedMode: normalizeCaseMode,\r\n    },\r\n  } = useTextCleanupConfiguration({\r\n    isTrimWhitespaceNode,\r\n    isRemoveSpecialCharsNode,\r\n    isRegexCleanupNode,\r\n    isNormalizeTextCaseNode,\r\n    configState,\r\n    nodeConfig: node?.data?.config ?? null,\r\n    availableColumns,\r\n    columnTypeMap,\r\n    previewSampleRows,\r\n  });\r\n\r\n  const {\r\n    selectedMode: replaceInvalidMode,\r\n    modeDetails: replaceInvalidModeDetails,\r\n    sampleMap: replaceInvalidSampleMap,\r\n    columnSummary: replaceInvalidColumnSummary,\r\n    minValue: replaceInvalidMinValue,\r\n    maxValue: replaceInvalidMaxValue,\r\n  } = useReplaceInvalidConfiguration({\r\n    isReplaceInvalidValuesNode,\r\n    configState,\r\n    nodeConfig: node?.data?.config ?? null,\r\n    availableColumns,\r\n    columnTypeMap,\r\n    previewSampleRows,\r\n  });\r\n\r\n  const {\r\n    selectedMode: standardizeDatesMode,\r\n    strategies: dateStrategies,\r\n    sampleMap: standardizeDatesSampleMap,\r\n    columnSummary: standardizeDatesColumnSummary,\r\n    columnOptions: dateColumnOptions,\r\n  } = useStandardizeDatesConfiguration({\r\n    isStandardizeDatesNode,\r\n    configState,\r\n    nodeConfig: node?.data?.config ?? null,\r\n    availableColumns,\r\n    columnTypeMap,\r\n    previewSampleRows,\r\n  });\r\n\r\n  const shouldAnalyzeNumericColumns = isBinningNode || isScalingNode || isOutlierNode;\r\n  const { numericExcludedColumns } = useNumericColumnAnalysis({\r\n    shouldAnalyze: shouldAnalyzeNumericColumns,\r\n    availableColumns,\r\n    columnTypeMap,\r\n    previewSampleRows,\r\n  });\r\n  \r\n  const {\r\n    scalingConfig,\r\n    scalingExcludedColumns,\r\n    scalingMethodDetailMap,\r\n    scalingMethodOptions,\r\n    scalingRecommendations,\r\n    scalingRecommendationRows,\r\n    scalingSelectedCount,\r\n    scalingOverrideCount,\r\n    scalingDefaultDetail,\r\n    scalingDefaultLabel,\r\n    scalingAutoDetectEnabled,\r\n    scalingHasRecommendations,\r\n    scalingStatusMessage,\r\n    scalingOverrideExampleSummary,\r\n  } = useScalingConfiguration({\r\n    isScalingNode,\r\n    configState,\r\n    numericExcludedColumns,\r\n    scalingData,\r\n  });\r\n\r\n  const {\r\n    outlierConfig,\r\n    outlierExcludedColumns,\r\n    outlierMethodLabelMap,\r\n    outlierMethodDetailMap,\r\n    outlierMethodOptions,\r\n    outlierRecommendations,\r\n    outlierRecommendationRows,\r\n    outlierSelectedCount,\r\n    outlierOverrideCount,\r\n    outlierParameterOverrideCount,\r\n    outlierDefaultDetail,\r\n    outlierDefaultLabel,\r\n    outlierAutoDetectEnabled,\r\n    outlierHasRecommendations,\r\n    outlierStatusMessage,\r\n    outlierOverrideExampleSummary,\r\n  } = useOutlierConfiguration({\r\n    isOutlierNode,\r\n    configState,\r\n    numericExcludedColumns,\r\n    outlierData,\r\n  });\r\n  const outlierSampleSize = typeof outlierData?.sample_size === 'number' ? outlierData.sample_size : null;\r\n  const relativeOutlierGeneratedAt = null;\r\n  const outlierHasOverrides = outlierOverrideCount > 0 || outlierParameterOverrideCount > 0;\r\n  const outlierOverrideSummaryDisplay = useMemo(() => {\r\n    if (outlierOverrideCount > 0) {\r\n      return outlierOverrideExampleSummary;\r\n    }\r\n    if (outlierParameterOverrideCount > 0) {\r\n      return `${outlierParameterOverrideCount} column${outlierParameterOverrideCount === 1 ? '' : 's'} with parameter overrides`;\r\n    }\r\n    return null;\r\n  }, [outlierOverrideCount, outlierParameterOverrideCount, outlierOverrideExampleSummary]);\r\n\r\n  const {\r\n    binningConfig,\r\n    binningSelectedCount,\r\n    binningDefaultLabel,\r\n    binningOverrideColumns,\r\n    binningOverrideCount,\r\n    binningOverrideSummary,\r\n    fieldIds: binningFieldIds,\r\n    customEdgeDrafts: binningCustomEdgeDrafts,\r\n    setCustomEdgeDrafts: setBinningCustomEdgeDrafts,\r\n    customLabelDrafts: binningCustomLabelDrafts,\r\n    setCustomLabelDrafts: setBinningCustomLabelDrafts,\r\n  } = useBinningConfiguration({\r\n    configState,\r\n    nodeId,\r\n  });\r\n  const removeDuplicatesKeepSelectId = `${nodeId || 'node'}-remove-duplicates-keep`;\r\n\r\n  const selectedColumns = useMemo(() => {\r\n    if (isScalingNode) {\r\n      return scalingConfig.columns;\r\n    }\r\n    if (isBinningNode) {\r\n      return binningConfig.columns;\r\n    }\r\n    if (isOutlierNode) {\r\n      return outlierConfig.columns;\r\n    }\r\n    return ensureArrayOfString(configState?.columns);\r\n  }, [binningConfig.columns, configState, isBinningNode, isOutlierNode, isScalingNode, outlierConfig.columns, scalingConfig.columns]);\r\n\r\n  const binningInsightsRecommendations = useMemo<BinningColumnRecommendation[]>(() => {\r\n    const rows = binningData?.columns;\r\n    if (!Array.isArray(rows)) {\r\n      return [];\r\n    }\r\n    return rows.filter((entry): entry is BinningColumnRecommendation => {\r\n      if (!entry || typeof entry.column !== 'string') {\r\n        return false;\r\n      }\r\n      return Boolean(entry.column.trim());\r\n    });\r\n  }, [binningData?.columns]);\r\n\r\n  const binningRecommendedColumnSet = useMemo(() => {\r\n    if (!binningInsightsRecommendations.length) {\r\n      return new Set<string>();\r\n    }\r\n    const normalized = new Set<string>();\r\n    binningInsightsRecommendations.forEach((entry) => {\r\n      const columnName = typeof entry.column === 'string' ? entry.column.trim() : '';\r\n      if (!columnName) {\r\n        return;\r\n      }\r\n      normalized.add(columnName);\r\n    });\r\n    return normalized;\r\n  }, [binningInsightsRecommendations]);\r\n\r\n  const binningAllNumericColumns = useMemo(() => {\r\n    if (!isBinningNode) {\r\n      return [] as string[];\r\n    }\r\n    const normalized = new Set<string>();\r\n    availableColumns.forEach((column) => {\r\n      if (numericExcludedColumns.has(column)) {\r\n        return;\r\n      }\r\n      const trimmed = column.trim();\r\n      if (trimmed) {\r\n        normalized.add(trimmed);\r\n      }\r\n    });\r\n    binningInsightsRecommendations.forEach((entry) => {\r\n      const columnName = typeof entry.column === 'string' ? entry.column.trim() : '';\r\n      if (!columnName) {\r\n        return;\r\n      }\r\n      if (!numericExcludedColumns.has(columnName) || binningRecommendedColumnSet.has(columnName)) {\r\n        normalized.add(columnName);\r\n      }\r\n    });\r\n    selectedColumns.forEach((column) => {\r\n      const columnName = typeof column === 'string' ? column.trim() : '';\r\n      if (!columnName) {\r\n        return;\r\n      }\r\n      if (!numericExcludedColumns.has(columnName) || binningRecommendedColumnSet.has(columnName)) {\r\n        normalized.add(columnName);\r\n      }\r\n    });\r\n    return Array.from(normalized).sort((a, b) => a.localeCompare(b));\r\n  }, [availableColumns, binningInsightsRecommendations, binningRecommendedColumnSet, isBinningNode, numericExcludedColumns, selectedColumns]);\r\n\r\n  const binningNumericColumnsNotSelected = useMemo(() => {\r\n    if (!isBinningNode || !binningAllNumericColumns.length) {\r\n      return [] as string[];\r\n    }\r\n    return binningAllNumericColumns.filter((column) => !selectedColumns.includes(column));\r\n  }, [binningAllNumericColumns, isBinningNode, selectedColumns]);\r\n\r\n  const canApplyAllBinningNumeric = binningNumericColumnsNotSelected.length > 0;\r\n\r\n  const removeDuplicatesKeep = useMemo<KeepStrategy>(() => {\r\n    const raw = typeof configState?.keep === 'string' ? configState.keep.trim().toLowerCase() : '';\r\n    if (raw === 'last' || raw === 'none') {\r\n      return raw;\r\n    }\r\n    return DEFAULT_KEEP_STRATEGY;\r\n  }, [configState?.keep]);\r\n\r\n  const {\r\n    binningExcludedColumns,\r\n    binningColumnPreviewMap,\r\n    manualBoundColumns,\r\n    manualRangeFallbackMap,\r\n  } = useNumericRangeSummaries({\r\n    isBinningNode,\r\n    numericExcludedColumns,\r\n    selectedColumns,\r\n    previewSampleRows,\r\n    availableColumns,\r\n    recommendedColumns: binningRecommendedColumnSet,\r\n  });\r\n\r\n  const binningInsightsExcludedColumns = useMemo<BinningExcludedColumn[]>(() => {\r\n    const rows = binningData?.excluded_columns;\r\n    if (!Array.isArray(rows)) {\r\n      return [];\r\n    }\r\n    return rows.filter((entry): entry is BinningExcludedColumn => {\r\n      if (!entry || typeof entry.column !== 'string') {\r\n        return false;\r\n      }\r\n      return Boolean(entry.column.trim());\r\n    });\r\n  }, [binningData?.excluded_columns]);\r\n\r\n  usePruneColumnSelections({\r\n    isScalingNode,\r\n    isBinningNode,\r\n    isOutlierNode,\r\n    scalingExcludedColumns,\r\n    binningExcludedColumns,\r\n    outlierExcludedColumns,\r\n    setConfigState,\r\n  });\r\n\r\n  const outlierPreviewSignal = useMemo<OutlierNodeSignal | null>(() => {\r\n    if (!isOutlierNode) {\r\n      return null;\r\n    }\r\n    const signals = previewState.data?.signals?.outlier_removal;\r\n    if (!Array.isArray(signals) || !signals.length) {\r\n      return null;\r\n    }\r\n    if (!nodeId) {\r\n      return (signals[signals.length - 1] as OutlierNodeSignal | undefined) ?? null;\r\n    }\r\n    const match = signals.find((signal: any) => signal && signal.node_id === nodeId);\r\n    return (match as OutlierNodeSignal | undefined) ?? ((signals[signals.length - 1] as OutlierNodeSignal | undefined) ?? null);\r\n  }, [isOutlierNode, nodeId, previewState.data?.signals?.outlier_removal]);\r\n\r\n  const transformerAuditSignal = useMemo<TransformerAuditNodeSignal | null>(() => {\r\n    if (!isTransformerAuditNode) {\r\n      return null;\r\n    }\r\n    const signals = previewState.data?.signals?.transformer_audit;\r\n    if (!Array.isArray(signals) || !signals.length) {\r\n      return null;\r\n    }\r\n    if (!nodeId) {\r\n      return (signals[signals.length - 1] as TransformerAuditNodeSignal | undefined) ?? null;\r\n    }\r\n    const match = signals.find((signal: any) => signal && signal.node_id === nodeId);\r\n    return (\r\n      (match as TransformerAuditNodeSignal | undefined) ??\r\n      ((signals[signals.length - 1] as TransformerAuditNodeSignal | undefined) ?? null)\r\n    );\r\n  }, [isTransformerAuditNode, nodeId, previewState.data?.signals?.transformer_audit]);\r\n\r\n  useEffect(() => {\r\n    const stats = Array.isArray(previewState.data?.column_stats) ? previewState.data.column_stats : [];\r\n\r\n    if (!stats.length) {\r\n      if (previewState.status === 'loading') {\r\n        return;\r\n      }\r\n      setColumnTypeMap((previous) => (Object.keys(previous).length ? {} : previous));\r\n      setColumnSuggestions((previous) => (Object.keys(previous).length ? {} : previous));\r\n      return;\r\n    }\r\n\r\n    const nextTypeMap: Record<string, string> = {};\r\n    const nextSuggestionMap: Record<string, string[]> = {};\r\n\r\n    stats.forEach((stat) => {\r\n      if (!stat || !stat.name) {\r\n        return;\r\n      }\r\n      const name = String(stat.name).trim();\r\n      if (!name) {\r\n        return;\r\n      }\r\n      if (activeFlagSuffix && name.endsWith(activeFlagSuffix)) {\r\n        return;\r\n      }\r\n      const dtype = typeof stat.dtype === 'string' ? stat.dtype : null;\r\n      if (dtype) {\r\n        nextTypeMap[name] = dtype;\r\n      }\r\n      const sampledValues = previewSampleRows.map((row) => (row && Object.prototype.hasOwnProperty.call(row, name) ? row[name] : undefined));\r\n      const suggestions = inferColumnSuggestions(dtype, sampledValues);\r\n      if (suggestions.length) {\r\n        nextSuggestionMap[name] = suggestions;\r\n      }\r\n    });\r\n\r\n    setColumnTypeMap((previous) => {\r\n      const previousEntries = Object.entries(previous);\r\n      const nextEntries = Object.entries(nextTypeMap);\r\n      if (\r\n        previousEntries.length === nextEntries.length &&\r\n        previousEntries.every(([key, value]) => Object.prototype.hasOwnProperty.call(nextTypeMap, key) && nextTypeMap[key] === value)\r\n      ) {\r\n        return previous;\r\n      }\r\n      return nextTypeMap;\r\n    });\r\n\r\n    setColumnSuggestions((previous) => {\r\n      const previousKeys = Object.keys(previous);\r\n      const nextKeys = Object.keys(nextSuggestionMap);\r\n      if (\r\n        previousKeys.length === nextKeys.length &&\r\n        previousKeys.every((key) => {\r\n          if (!Object.prototype.hasOwnProperty.call(nextSuggestionMap, key)) {\r\n            return false;\r\n          }\r\n          const existing = previous[key] ?? [];\r\n          const next = nextSuggestionMap[key] ?? [];\r\n          return arraysAreEqual(existing, next);\r\n        })\r\n      ) {\r\n        return previous;\r\n      }\r\n      return nextSuggestionMap;\r\n    });\r\n  }, [activeFlagSuffix, previewSampleRows, previewState.data?.column_stats, previewState.status]);\r\n\r\n  useEffect(() => {\r\n    if (!requiresColumnCatalog) {\r\n      return;\r\n    }\r\n\r\n    if (!hasReachableSource) {\r\n      return;\r\n    }\r\n\r\n    const nextColumns = new Set<string>();\r\n\r\n    const previewColumns = Array.isArray(previewState.data?.columns) ? previewState.data.columns : [];\r\n    previewColumns.forEach((column) => {\r\n      const normalized = typeof column === 'string' ? column.trim() : '';\r\n      if (!normalized) {\r\n        return;\r\n      }\r\n      if (activeFlagSuffix && normalized.endsWith(activeFlagSuffix)) {\r\n        return;\r\n      }\r\n      nextColumns.add(normalized);\r\n    });\r\n\r\n    const previewStats = Array.isArray(previewState.data?.column_stats) ? previewState.data.column_stats : [];\r\n    const nextMissingMap: Record<string, number> = {};\r\n\r\n    previewStats.forEach((stat) => {\r\n      if (!stat || !stat.name) {\r\n        return;\r\n      }\r\n      const name = String(stat.name).trim();\r\n      if (!name) {\r\n        return;\r\n      }\r\n      if (activeFlagSuffix && name.endsWith(activeFlagSuffix)) {\r\n        return;\r\n      }\r\n      nextColumns.add(name);\r\n      const numeric = Number(stat.missing_percentage);\r\n      if (!Number.isNaN(numeric) && numeric >= 0) {\r\n        nextMissingMap[name] = numeric;\r\n      }\r\n    });\r\n\r\n    ensureArrayOfString(node?.data?.columns).forEach((column) => {\r\n      if (column && !(activeFlagSuffix && column.endsWith(activeFlagSuffix))) {\r\n        nextColumns.add(column);\r\n      }\r\n    });\r\n    selectedColumns.forEach((column) => {\r\n      if (column && !(activeFlagSuffix && column.endsWith(activeFlagSuffix))) {\r\n        nextColumns.add(column);\r\n      }\r\n    });\r\n\r\n    if (nextColumns.size === 0) {\r\n      return;\r\n    }\r\n\r\n    const orderedColumns = Array.from(nextColumns).sort((a, b) => a.localeCompare(b));\r\n    setAvailableColumns((previous) => (arraysAreEqual(previous, orderedColumns) ? previous : orderedColumns));\r\n\r\n    if (Object.keys(nextMissingMap).length > 0) {\r\n      setColumnMissingMap((previous) => ({ ...previous, ...nextMissingMap }));\r\n    }\r\n  }, [\r\n    activeFlagSuffix,\r\n    hasReachableSource,\r\n    node?.data?.columns,\r\n    previewState.data?.column_stats,\r\n    previewState.data?.columns,\r\n    requiresColumnCatalog,\r\n    selectedColumns,\r\n  ]);\r\n  const normalizedColumnSearch = useMemo(() => columnSearch.trim().toLowerCase(), [columnSearch]);\r\n\r\n  const filteredColumnOptions = useMemo(() => {\r\n    if (!normalizedColumnSearch) {\r\n      return availableColumns;\r\n    }\r\n    return availableColumns.filter((column) => column.toLowerCase().includes(normalizedColumnSearch));\r\n  }, [availableColumns, normalizedColumnSearch]);\r\n\r\n  const updateSkewnessTransformations = useCallback(\r\n    (updater: (current: SkewnessTransformationConfig[]) => SkewnessTransformationConfig[]) => {\r\n      setConfigState((previous) => {\r\n        const currentTransformations = dedupeSkewnessTransformations(\r\n          normalizeSkewnessTransformations(previous?.transformations),\r\n        );\r\n        const nextTransformations = dedupeSkewnessTransformations(updater(currentTransformations));\r\n        return {\r\n          ...previous,\r\n          transformations: nextTransformations.map((entry) => ({ ...entry })),\r\n        };\r\n      });\r\n    },\r\n    []\r\n  );\r\n\r\n\r\n  const {\r\n    skewnessThreshold,\r\n    skewnessViewMode,\r\n    setSkewnessViewMode,\r\n    skewnessGroupByMethod,\r\n    setSkewnessGroupByMethod,\r\n    skewnessDistributionView,\r\n    setSkewnessDistributionView,\r\n    skewnessRecommendedCount,\r\n    skewnessNumericCount,\r\n    skewnessTransformationsCount,\r\n    hasSkewnessAutoRecommendations,\r\n    skewnessRows,\r\n    skewnessTableGroups,\r\n    skewnessDistributionCards,\r\n    getSkewnessMethodLabel,\r\n    getSkewnessMethodStatus,\r\n    applySkewnessRecommendations: handleApplySkewnessRecommendations,\r\n    handleSkewnessOverrideChange,\r\n    clearSkewnessTransformations,\r\n  } = useSkewnessConfiguration({\r\n    skewnessData,\r\n    shouldLoadInsights: shouldLoadSkewnessInsights,\r\n    skewnessTransformations,\r\n    availableColumns,\r\n    previewColumns,\r\n    columnTypeMap,\r\n    updateSkewnessTransformations,\r\n  });\r\n\r\n  const {\r\n    imputerColumnOptions,\r\n    imputerMissingSliderMax,\r\n    imputerFilteredOptionCount,\r\n    imputerMissingFilterActive,\r\n  } = useImputationConfiguration({\r\n    isImputerNode,\r\n    imputerStrategies,\r\n    availableColumns,\r\n    columnMissingMap,\r\n    previewColumns,\r\n    previewColumnStats,\r\n    nodeColumns: node?.data?.columns,\r\n    imputerMissingFilter,\r\n  });\r\n\r\n  const thresholdParameter = useMemo(\r\n    () => parameters.find((parameter) => parameter.name === 'missing_threshold'),\r\n    [parameters]\r\n  );\r\n  const thresholdParameterName = thresholdParameter?.name ?? null;\r\n\r\n  const normalizedSuggestedThreshold = useMemo(() => {\r\n    if (suggestedThreshold === null || Number.isNaN(Number(suggestedThreshold))) {\r\n      return null;\r\n    }\r\n    const numeric = Number(suggestedThreshold);\r\n    return Math.round(numeric * 10) / 10;\r\n  }, [suggestedThreshold]);\r\n\r\n  const thresholdMatchesSuggestion = useMemo(() => {\r\n    if (thresholdParameterName === null || normalizedSuggestedThreshold === null) {\r\n      return false;\r\n    }\r\n    const currentValue = Number(configState?.[thresholdParameterName]);\r\n    return !Number.isNaN(currentValue) && currentValue === normalizedSuggestedThreshold;\r\n  }, [configState, normalizedSuggestedThreshold, thresholdParameterName]);\r\n\r\n  const showDropMissingRowsSection =\r\n    isDropMissingRowsNode && Boolean(thresholdParameter || dropRowsAnyParameter);\r\n\r\n  const handleParameterChange = useCallback((name: string, value: any) => {\r\n    if (!name) {\r\n      return;\r\n    }\r\n    setConfigState((previous) => {\r\n      const next = { ...previous };\r\n      if (value === undefined) {\r\n        delete next[name];\r\n      } else {\r\n        next[name] = value;\r\n      }\r\n      return next;\r\n    });\r\n  }, []);\r\n\r\n  const handleNumberChange = useCallback(\r\n    (name: string, rawValue: string) => {\r\n      if (!name) {\r\n        return;\r\n      }\r\n      if (rawValue === '') {\r\n        handleParameterChange(name, undefined);\r\n        return;\r\n      }\r\n      const numericValue = Number(rawValue);\r\n      if (Number.isNaN(numericValue)) {\r\n        return;\r\n      }\r\n      handleParameterChange(name, numericValue);\r\n    },\r\n    [handleParameterChange]\r\n  );\r\n\r\n  const handlePercentileChange = useCallback(\r\n    (name: 'lower_percentile' | 'upper_percentile', rawValue: string) => {\r\n      if (!name) {\r\n        return;\r\n      }\r\n      if (rawValue === '') {\r\n        handleParameterChange(name, undefined);\r\n        return;\r\n      }\r\n      const numericValue = Number(rawValue);\r\n      if (!Number.isFinite(numericValue)) {\r\n        return;\r\n      }\r\n      const clamped = Math.min(Math.max(numericValue, 0), 100);\r\n      handleParameterChange(name, clamped);\r\n    },\r\n    [handleParameterChange]\r\n  );\r\n\r\n  const handleManualBoundChange = useCallback(\r\n    (column: string, bound: 'lower' | 'upper', rawValue: string) => {\r\n      const normalizedColumn = String(column ?? '').trim();\r\n      if (!normalizedColumn) {\r\n        return;\r\n      }\r\n      setConfigState((previous) => {\r\n        const source =\r\n          previous.manual_bounds &&\r\n          typeof previous.manual_bounds === 'object' &&\r\n          !Array.isArray(previous.manual_bounds)\r\n            ? { ...previous.manual_bounds }\r\n            : {};\r\n        const existing = source[normalizedColumn] && typeof source[normalizedColumn] === 'object'\r\n          ? { ...source[normalizedColumn] }\r\n          : { lower: null, upper: null };\r\n\r\n        if (rawValue === '') {\r\n          if (bound === 'lower') {\r\n            existing.lower = null;\r\n          } else {\r\n            existing.upper = null;\r\n          }\r\n        } else {\r\n          const numeric = Number(rawValue);\r\n          if (!Number.isFinite(numeric)) {\r\n            return previous;\r\n          }\r\n          if (bound === 'lower') {\r\n            existing.lower = numeric;\r\n          } else {\r\n            existing.upper = numeric;\r\n          }\r\n        }\r\n\r\n        const normalizedLower = existing.lower ?? null;\r\n        const normalizedUpper = existing.upper ?? null;\r\n\r\n        if (normalizedLower === null && normalizedUpper === null) {\r\n          delete source[normalizedColumn];\r\n        } else {\r\n          source[normalizedColumn] = {\r\n            lower: normalizedLower,\r\n            upper: normalizedUpper,\r\n          };\r\n        }\r\n\r\n        return {\r\n          ...previous,\r\n          manual_bounds: source,\r\n        };\r\n      });\r\n    },\r\n    []\r\n  );\r\n\r\n  const handleClearManualBound = useCallback((column: string) => {\r\n    const normalizedColumn = String(column ?? '').trim();\r\n    if (!normalizedColumn) {\r\n      return;\r\n    }\r\n    setConfigState((previous) => {\r\n      const source =\r\n        previous.manual_bounds &&\r\n        typeof previous.manual_bounds === 'object' &&\r\n        !Array.isArray(previous.manual_bounds)\r\n          ? previous.manual_bounds\r\n          : null;\r\n      if (!source || !Object.prototype.hasOwnProperty.call(source, normalizedColumn)) {\r\n        return previous;\r\n      }\r\n      const nextBounds = { ...source };\r\n      delete nextBounds[normalizedColumn];\r\n      return {\r\n        ...previous,\r\n        manual_bounds: nextBounds,\r\n      };\r\n    });\r\n  }, []);\r\n\r\n  const handleBooleanChange = useCallback(\r\n    (name: string, checked: boolean) => {\r\n      handleParameterChange(name, checked);\r\n    },\r\n    [handleParameterChange]\r\n  );\r\n\r\n  const handleTextChange = useCallback(\r\n    (name: string, nextValue: string) => {\r\n      handleParameterChange(name, nextValue);\r\n    },\r\n    [handleParameterChange]\r\n  );\r\n\r\n  const handleBinningIntegerChange = useCallback(\r\n    (\r\n      field: 'equal_width_bins' | 'equal_frequency_bins' | 'precision' | 'kbins_n_bins',\r\n      rawValue: string,\r\n      min: number,\r\n      max: number\r\n    ) => {\r\n      setConfigState((previous) => {\r\n        const previousValue =\r\n          typeof previous?.[field] === 'number' && Number.isFinite(previous[field]) ? previous[field] : undefined;\r\n        if (rawValue === '') {\r\n          if (previousValue === undefined) {\r\n            return previous;\r\n          }\r\n          const next: Record<string, any> = { ...previous };\r\n          delete next[field];\r\n          return next;\r\n        }\r\n        const numeric = Number(rawValue);\r\n        if (!Number.isFinite(numeric)) {\r\n          return previous;\r\n        }\r\n        const clamped = Math.min(Math.max(Math.round(numeric), min), max);\r\n        if (previousValue === clamped) {\r\n          return previous;\r\n        }\r\n        return {\r\n          ...previous,\r\n          [field]: clamped,\r\n        };\r\n      });\r\n    },\r\n    []\r\n  );\r\n\r\n  const handleBinningBooleanToggle = useCallback((field: 'include_lowest' | 'drop_original', value: boolean) => {\r\n    setConfigState((previous) => {\r\n      const current = Boolean(previous?.[field]);\r\n      if (current === value) {\r\n        return previous;\r\n      }\r\n      return {\r\n        ...previous,\r\n        [field]: value,\r\n      };\r\n    });\r\n  }, []);\r\n\r\n  const handleBinningSuffixChange = useCallback((value: string) => {\r\n    const trimmed = value.trim();\r\n    setConfigState((previous) => {\r\n      const current = typeof previous?.output_suffix === 'string' ? previous.output_suffix : '';\r\n      if (!trimmed) {\r\n        if (!current) {\r\n          return previous;\r\n        }\r\n        const next: Record<string, any> = { ...previous };\r\n        delete next.output_suffix;\r\n        return next;\r\n      }\r\n      if (current === trimmed) {\r\n        return previous;\r\n      }\r\n      return {\r\n        ...previous,\r\n        output_suffix: trimmed,\r\n      };\r\n    });\r\n  }, []);\r\n\r\n  const handleBinningLabelFormatChange = useCallback((value: BinningLabelFormat) => {\r\n    setConfigState((previous) => {\r\n      const raw = typeof previous?.label_format === 'string' ? previous.label_format : '';\r\n      const current = (['range', 'bin_index', 'ordinal', 'column_suffix'] as BinningLabelFormat[]).includes(\r\n        raw as BinningLabelFormat,\r\n      )\r\n        ? (raw as BinningLabelFormat)\r\n        : 'range';\r\n      if (current === value) {\r\n        return previous;\r\n      }\r\n      return {\r\n        ...previous,\r\n        label_format: value,\r\n      };\r\n    });\r\n  }, []);\r\n\r\n  const handleBinningMissingStrategyChange = useCallback((value: BinningMissingStrategy) => {\r\n    setConfigState((previous) => {\r\n      const current = previous?.missing_strategy === 'label' ? 'label' : 'keep';\r\n      if (current === value) {\r\n        return previous;\r\n      }\r\n      const next: Record<string, any> = {\r\n        ...previous,\r\n        missing_strategy: value,\r\n      };\r\n      if (value !== 'label' && Object.prototype.hasOwnProperty.call(next, 'missing_label')) {\r\n        delete next.missing_label;\r\n      }\r\n      return next;\r\n    });\r\n  }, []);\r\n\r\n  const handleBinningMissingLabelChange = useCallback((value: string) => {\r\n    const trimmed = value.trim();\r\n    setConfigState((previous) => {\r\n      const current = typeof previous?.missing_label === 'string' ? previous.missing_label : '';\r\n      if (!trimmed) {\r\n        if (!current) {\r\n          return previous;\r\n        }\r\n        const next: Record<string, any> = { ...previous };\r\n        delete next.missing_label;\r\n        return next;\r\n      }\r\n      if (current === trimmed) {\r\n        return previous;\r\n      }\r\n      return {\r\n        ...previous,\r\n        missing_label: trimmed,\r\n      };\r\n    });\r\n  }, []);\r\n\r\n  const handleBinningCustomBinsChange = useCallback((column: string, rawValue: string) => {\r\n    const normalizedColumn = String(column ?? '').trim();\r\n    if (!normalizedColumn) {\r\n      return;\r\n    }\r\n    setBinningCustomEdgeDrafts((previous) => ({\r\n      ...previous,\r\n      [normalizedColumn]: rawValue,\r\n    }));\r\n    setConfigState((previous) => {\r\n      const existingRaw = previous?.custom_bins;\r\n      const existing =\r\n        existingRaw && typeof existingRaw === 'object' && !Array.isArray(existingRaw)\r\n          ? (existingRaw as Record<string, number[]>)\r\n          : {};\r\n      const existingEntry = Array.isArray(existing[normalizedColumn]) ? existing[normalizedColumn] : undefined;\r\n      const parsed = rawValue\r\n        .split(/[,\\n]/)\r\n        .map((segment) => segment.trim())\r\n        .filter(Boolean)\r\n        .map((segment) => Number(segment))\r\n        .filter((value) => Number.isFinite(value))\r\n        .sort((a, b) => a - b);\r\n      const unique = parsed.filter((value, index, array) => index === 0 || value !== array[index - 1]);\r\n      const hasValidEntry = unique.length >= 2;\r\n      if (hasValidEntry && existingEntry) {\r\n        if (existingEntry.length === unique.length && existingEntry.every((value, index) => value === unique[index])) {\r\n          return previous;\r\n        }\r\n      }\r\n      if (!hasValidEntry && !existingEntry) {\r\n        return previous;\r\n      }\r\n      const nextState: Record<string, any> = { ...previous };\r\n      const nextBins: Record<string, number[]> = { ...existing };\r\n      if (hasValidEntry) {\r\n        nextBins[normalizedColumn] = unique;\r\n      } else {\r\n        delete nextBins[normalizedColumn];\r\n      }\r\n      if (Object.keys(nextBins).length > 0) {\r\n        nextState.custom_bins = nextBins;\r\n      } else {\r\n        delete nextState.custom_bins;\r\n      }\r\n      return nextState;\r\n    });\r\n  }, []);\r\n\r\n  const handleBinningCustomLabelsChange = useCallback((column: string, rawValue: string) => {\r\n    const normalizedColumn = String(column ?? '').trim();\r\n    if (!normalizedColumn) {\r\n      return;\r\n    }\r\n    setBinningCustomLabelDrafts((previous) => ({\r\n      ...previous,\r\n      [normalizedColumn]: rawValue,\r\n    }));\r\n    setConfigState((previous) => {\r\n      const existingRaw = previous?.custom_labels;\r\n      const existing =\r\n        existingRaw && typeof existingRaw === 'object' && !Array.isArray(existingRaw)\r\n          ? (existingRaw as Record<string, string[]>)\r\n          : {};\r\n      const existingEntry = Array.isArray(existing[normalizedColumn]) ? existing[normalizedColumn] : undefined;\r\n      const parsed = rawValue\r\n        .split(/[,\\n]/)\r\n        .map((segment) => segment.trim())\r\n        .filter(Boolean);\r\n      if (parsed.length > 0 && existingEntry) {\r\n        if (existingEntry.length === parsed.length && existingEntry.every((value, index) => value === parsed[index])) {\r\n          return previous;\r\n        }\r\n      }\r\n      if (parsed.length === 0 && !existingEntry) {\r\n        return previous;\r\n      }\r\n      const nextState: Record<string, any> = { ...previous };\r\n      const nextLabels: Record<string, string[]> = { ...existing };\r\n      if (parsed.length > 0) {\r\n        nextLabels[normalizedColumn] = parsed;\r\n      } else {\r\n        delete nextLabels[normalizedColumn];\r\n      }\r\n      if (Object.keys(nextLabels).length > 0) {\r\n        nextState.custom_labels = nextLabels;\r\n      } else {\r\n        delete nextState.custom_labels;\r\n      }\r\n      return nextState;\r\n    });\r\n  }, []);\r\n\r\n  const handleBinningClearCustomColumn = useCallback((column: string) => {\r\n    const normalizedColumn = String(column ?? '').trim();\r\n    if (!normalizedColumn) {\r\n      return;\r\n    }\r\n    setBinningCustomEdgeDrafts((previous) => {\r\n      if (!Object.prototype.hasOwnProperty.call(previous, normalizedColumn)) {\r\n        return previous;\r\n      }\r\n      const next = { ...previous };\r\n      delete next[normalizedColumn];\r\n      return next;\r\n    });\r\n    setBinningCustomLabelDrafts((previous) => {\r\n      if (!Object.prototype.hasOwnProperty.call(previous, normalizedColumn)) {\r\n        return previous;\r\n      }\r\n      const next = { ...previous };\r\n      delete next[normalizedColumn];\r\n      return next;\r\n    });\r\n    setConfigState((previous) => {\r\n      let changed = false;\r\n      const nextState: Record<string, any> = { ...previous };\r\n      if (\r\n        previous?.custom_bins &&\r\n        typeof previous.custom_bins === 'object' &&\r\n        !Array.isArray(previous.custom_bins) &&\r\n        Object.prototype.hasOwnProperty.call(previous.custom_bins, normalizedColumn)\r\n      ) {\r\n        const nextBins = { ...(previous.custom_bins as Record<string, number[]>) };\r\n        delete nextBins[normalizedColumn];\r\n        if (Object.keys(nextBins).length > 0) {\r\n          nextState.custom_bins = nextBins;\r\n        } else {\r\n          delete nextState.custom_bins;\r\n        }\r\n        changed = true;\r\n      }\r\n      if (\r\n        previous?.custom_labels &&\r\n        typeof previous.custom_labels === 'object' &&\r\n        !Array.isArray(previous.custom_labels) &&\r\n        Object.prototype.hasOwnProperty.call(previous.custom_labels, normalizedColumn)\r\n      ) {\r\n        const nextLabels = { ...(previous.custom_labels as Record<string, string[]>) };\r\n        delete nextLabels[normalizedColumn];\r\n        if (Object.keys(nextLabels).length > 0) {\r\n          nextState.custom_labels = nextLabels;\r\n        } else {\r\n          delete nextState.custom_labels;\r\n        }\r\n        changed = true;\r\n      }\r\n      if (!changed) {\r\n        return previous;\r\n      }\r\n      return nextState;\r\n    });\r\n  }, []);\r\n\r\n  const updateBinningColumnOverride = useCallback(\r\n    (\r\n      column: string,\r\n      mutator: (current: Record<string, any>) => Record<string, any> | null,\r\n    ) => {\r\n      const normalizedColumn = String(column ?? '').trim();\r\n      if (!normalizedColumn) {\r\n        return;\r\n      }\r\n      setConfigState((previous) => {\r\n        const sourceOverrides = (() => {\r\n          if (\r\n            previous?.column_strategies &&\r\n            typeof previous.column_strategies === 'object' &&\r\n            !Array.isArray(previous.column_strategies)\r\n          ) {\r\n            return previous.column_strategies as Record<string, any>;\r\n          }\r\n          if (\r\n            previous?.column_overrides &&\r\n            typeof previous.column_overrides === 'object' &&\r\n            !Array.isArray(previous.column_overrides)\r\n          ) {\r\n            return previous.column_overrides as Record<string, any>;\r\n          }\r\n          return {};\r\n        })();\r\n\r\n        const workingOverrides: Record<string, any> = { ...sourceOverrides };\r\n        const rawExisting = workingOverrides[normalizedColumn];\r\n        const existingOverride =\r\n          rawExisting && typeof rawExisting === 'object' && !Array.isArray(rawExisting)\r\n            ? { ...rawExisting }\r\n            : {};\r\n\r\n        const mutated = mutator(existingOverride);\r\n        const hasOverride = Boolean(mutated && Object.keys(mutated).length);\r\n\r\n        if (hasOverride) {\r\n          workingOverrides[normalizedColumn] = mutated as Record<string, any>;\r\n        } else {\r\n          delete workingOverrides[normalizedColumn];\r\n        }\r\n\r\n        const nextState: Record<string, any> = { ...previous };\r\n\r\n        if (hasOverride) {\r\n          const currentColumns = new Set(ensureArrayOfString(previous?.columns));\r\n          if (!currentColumns.has(normalizedColumn)) {\r\n            currentColumns.add(normalizedColumn);\r\n            nextState.columns = Array.from(currentColumns).sort((a, b) => a.localeCompare(b));\r\n          }\r\n        }\r\n\r\n        if (Object.keys(workingOverrides).length) {\r\n          nextState.column_overrides = workingOverrides;\r\n          nextState.column_strategies = workingOverrides;\r\n        } else {\r\n          if (Object.prototype.hasOwnProperty.call(nextState, 'column_overrides')) {\r\n            delete nextState.column_overrides;\r\n          }\r\n          if (Object.prototype.hasOwnProperty.call(nextState, 'column_strategies')) {\r\n            delete nextState.column_strategies;\r\n          }\r\n        }\r\n\r\n        return nextState;\r\n      });\r\n    },\r\n    [setConfigState],\r\n  );\r\n\r\n  const handleBinningOverrideStrategyChange = useCallback(\r\n    (\r\n      column: string,\r\n      value: BinningStrategy | '__default__',\r\n      options?: { recommendedBins?: number | null },\r\n    ) => {\r\n      const normalizedColumn = String(column ?? '').trim();\r\n      if (!normalizedColumn) {\r\n        return;\r\n      }\r\n\r\n      if (value === '__default__') {\r\n        handleBinningClearCustomColumn(normalizedColumn);\r\n        updateBinningColumnOverride(normalizedColumn, () => null);\r\n        return;\r\n      }\r\n\r\n      const recommendedBins = Number.isFinite(options?.recommendedBins)\r\n        ? Math.round(options!.recommendedBins as number)\r\n        : null;\r\n\r\n      updateBinningColumnOverride(normalizedColumn, (current) => {\r\n        const next = { ...current } as Record<string, any>;\r\n\r\n        next.strategy = value;\r\n\r\n        const resolveBins = (fallback: number) => {\r\n          const candidate = recommendedBins ?? fallback;\r\n          return Math.min(200, Math.max(2, Math.round(candidate)));\r\n        };\r\n\r\n        if (value === 'equal_width') {\r\n          next.equal_width_bins = resolveBins(binningConfig.equalWidthBins);\r\n          delete next.equal_frequency_bins;\r\n          delete next.kbins_n_bins;\r\n          delete next.kbins_encode;\r\n          delete next.kbins_strategy;\r\n        } else if (value === 'equal_frequency') {\r\n          next.equal_frequency_bins = resolveBins(binningConfig.equalFrequencyBins);\r\n          delete next.equal_width_bins;\r\n          delete next.kbins_n_bins;\r\n          delete next.kbins_encode;\r\n          delete next.kbins_strategy;\r\n        } else if (value === 'kbins') {\r\n          next.kbins_n_bins = resolveBins(binningConfig.kbinsNBins);\r\n          next.kbins_encode = binningConfig.kbinsEncode;\r\n          next.kbins_strategy = binningConfig.kbinsStrategy;\r\n          delete next.equal_width_bins;\r\n          delete next.equal_frequency_bins;\r\n        } else if (value === 'custom') {\r\n          delete next.equal_width_bins;\r\n          delete next.equal_frequency_bins;\r\n          delete next.kbins_n_bins;\r\n          delete next.kbins_encode;\r\n          delete next.kbins_strategy;\r\n        }\r\n\r\n        if (!Object.keys(next).length) {\r\n          return null;\r\n        }\r\n        return next;\r\n      });\r\n\r\n      if (value !== 'custom') {\r\n        handleBinningClearCustomColumn(normalizedColumn);\r\n      }\r\n    },\r\n    [\r\n      binningConfig.equalFrequencyBins,\r\n      binningConfig.equalWidthBins,\r\n      binningConfig.kbinsEncode,\r\n      binningConfig.kbinsNBins,\r\n      binningConfig.kbinsStrategy,\r\n      handleBinningClearCustomColumn,\r\n      updateBinningColumnOverride,\r\n    ],\r\n  );\r\n\r\n  const handleBinningOverrideNumberChange = useCallback(\r\n    (column: string, field: 'equal_width_bins' | 'equal_frequency_bins' | 'kbins_n_bins', rawValue: string) => {\r\n      const normalizedColumn = String(column ?? '').trim();\r\n      if (!normalizedColumn) {\r\n        return;\r\n      }\r\n\r\n      updateBinningColumnOverride(normalizedColumn, (current) => {\r\n        const next = { ...current } as Record<string, any>;\r\n\r\n        if (!rawValue.trim()) {\r\n          delete next[field];\r\n        } else {\r\n          const numeric = Number(rawValue);\r\n          if (!Number.isFinite(numeric)) {\r\n            return current;\r\n          }\r\n          const clamped = Math.min(200, Math.max(2, Math.round(numeric)));\r\n          next[field] = clamped;\r\n          if (field === 'equal_width_bins') {\r\n            next.strategy = 'equal_width';\r\n            delete next.equal_frequency_bins;\r\n            delete next.kbins_n_bins;\r\n            delete next.kbins_encode;\r\n            delete next.kbins_strategy;\r\n          } else if (field === 'equal_frequency_bins') {\r\n            next.strategy = 'equal_frequency';\r\n            delete next.equal_width_bins;\r\n            delete next.kbins_n_bins;\r\n            delete next.kbins_encode;\r\n            delete next.kbins_strategy;\r\n          } else if (field === 'kbins_n_bins') {\r\n            next.strategy = 'kbins';\r\n            delete next.equal_width_bins;\r\n            delete next.equal_frequency_bins;\r\n          }\r\n        }\r\n\r\n        if (!Object.keys(next).length) {\r\n          return null;\r\n        }\r\n        return next;\r\n      });\r\n\r\n      handleBinningClearCustomColumn(normalizedColumn);\r\n    },\r\n    [handleBinningClearCustomColumn, updateBinningColumnOverride],\r\n  );\r\n\r\n  const handleBinningOverrideKbinsEncodeChange = useCallback(\r\n    (column: string, value: KBinsEncode | null) => {\r\n      const normalizedColumn = String(column ?? '').trim();\r\n      if (!normalizedColumn) {\r\n        return;\r\n      }\r\n      updateBinningColumnOverride(normalizedColumn, (current) => {\r\n        const next = { ...current } as Record<string, any>;\r\n        if (value) {\r\n          next.strategy = 'kbins';\r\n          next.kbins_encode = value;\r\n        } else {\r\n          delete next.kbins_encode;\r\n        }\r\n        if (!Object.keys(next).length) {\r\n          return null;\r\n        }\r\n        return next;\r\n      });\r\n    },\r\n    [updateBinningColumnOverride],\r\n  );\r\n\r\n  const handleBinningOverrideKbinsStrategyChange = useCallback(\r\n    (column: string, value: KBinsStrategy | null) => {\r\n      const normalizedColumn = String(column ?? '').trim();\r\n      if (!normalizedColumn) {\r\n        return;\r\n      }\r\n      updateBinningColumnOverride(normalizedColumn, (current) => {\r\n        const next = { ...current } as Record<string, any>;\r\n        if (value) {\r\n          next.strategy = 'kbins';\r\n          next.kbins_strategy = value;\r\n        } else {\r\n          delete next.kbins_strategy;\r\n        }\r\n        if (!Object.keys(next).length) {\r\n          return null;\r\n        }\r\n        return next;\r\n      });\r\n    },\r\n    [updateBinningColumnOverride],\r\n  );\r\n\r\n  const handleBinningClearOverride = useCallback(\r\n    (column: string) => {\r\n      const normalizedColumn = String(column ?? '').trim();\r\n      if (!normalizedColumn) {\r\n        return;\r\n      }\r\n      handleBinningClearCustomColumn(normalizedColumn);\r\n      updateBinningColumnOverride(normalizedColumn, () => null);\r\n    },\r\n    [handleBinningClearCustomColumn, updateBinningColumnOverride],\r\n  );\r\n\r\n  const handleBinningClearOverrides = useCallback(() => {\r\n    setConfigState((previous) => {\r\n      const hasOverrides =\r\n        (previous?.column_strategies &&\r\n          typeof previous.column_strategies === 'object' &&\r\n          !Array.isArray(previous.column_strategies) &&\r\n          Object.keys(previous.column_strategies).length > 0) ||\r\n        (previous?.column_overrides &&\r\n          typeof previous.column_overrides === 'object' &&\r\n          !Array.isArray(previous.column_overrides) &&\r\n          Object.keys(previous.column_overrides).length > 0);\r\n\r\n      if (!hasOverrides) {\r\n        return previous;\r\n      }\r\n\r\n      const nextState = { ...previous } as Record<string, any>;\r\n      if (Object.prototype.hasOwnProperty.call(nextState, 'column_overrides')) {\r\n        delete nextState.column_overrides;\r\n      }\r\n      if (Object.prototype.hasOwnProperty.call(nextState, 'column_strategies')) {\r\n        delete nextState.column_strategies;\r\n      }\r\n      return nextState;\r\n    });\r\n  }, [setConfigState]);\r\n\r\n  const handleBinningApplyStrategies = useCallback(() => {\r\n    if (!binningInsightsRecommendations.length) {\r\n      return;\r\n    }\r\n    binningInsightsRecommendations.forEach((entry) => {\r\n      const columnName = typeof entry?.column === 'string' ? entry.column.trim() : '';\r\n      if (!columnName) {\r\n        return;\r\n      }\r\n      const strategy = (entry.recommended_strategy as BinningStrategy) ?? 'equal_width';\r\n      handleBinningOverrideStrategyChange(columnName, strategy, {\r\n        recommendedBins: Number.isFinite(entry?.recommended_bins) ? entry.recommended_bins : null,\r\n      });\r\n    });\r\n  }, [binningInsightsRecommendations, handleBinningOverrideStrategyChange]);\r\n\r\n  const handleBinningApplyColumns = useCallback((columns: Iterable<string>) => {\r\n    if (!columns) {\r\n      return;\r\n    }\r\n    const normalizedColumns: string[] = [];\r\n    for (const column of columns) {\r\n      const name = typeof column === 'string' ? column.trim() : '';\r\n      if (!name) {\r\n        continue;\r\n      }\r\n      normalizedColumns.push(name);\r\n    }\r\n    if (!normalizedColumns.length) {\r\n      return;\r\n    }\r\n    setConfigState((previous) => {\r\n      const base = previous && typeof previous === 'object' ? previous : {};\r\n      const currentColumns = new Set(ensureArrayOfString(base.columns));\r\n      let changed = false;\r\n      normalizedColumns.forEach((column) => {\r\n        if (currentColumns.has(column)) {\r\n          return;\r\n        }\r\n        currentColumns.add(column);\r\n        changed = true;\r\n      });\r\n      if (!changed) {\r\n        return previous;\r\n      }\r\n      const nextState: Record<string, any> = { ...base };\r\n      nextState.columns = Array.from(currentColumns).sort((a, b) => a.localeCompare(b));\r\n      return nextState;\r\n    });\r\n  }, []);\r\n\r\n  const handleApplyAllBinningNumeric = useCallback(() => {\r\n    if (!binningAllNumericColumns.length) {\r\n      return;\r\n    }\r\n    handleBinningApplyColumns(binningAllNumericColumns);\r\n  }, [binningAllNumericColumns, handleBinningApplyColumns]);\r\n\r\n  const handleToggleColumn = useCallback(\r\n    (column: string) => {\r\n      const normalizedColumn = String(column ?? '').trim();\r\n      if (!normalizedColumn) {\r\n        return;\r\n      }\r\n      setConfigState((previous) => {\r\n        const current = ensureArrayOfString(previous.columns);\r\n        const exists = current.includes(normalizedColumn);\r\n        const nextColumns = exists\r\n          ? current.filter((item) => item !== normalizedColumn)\r\n          : [...current, normalizedColumn];\r\n\r\n        let manualChanged = false;\r\n        let manualBounds = previous.manual_bounds;\r\n        if (\r\n          exists &&\r\n          manualBounds &&\r\n          typeof manualBounds === 'object' &&\r\n          !Array.isArray(manualBounds) &&\r\n          Object.prototype.hasOwnProperty.call(manualBounds, normalizedColumn)\r\n        ) {\r\n          manualBounds = { ...manualBounds };\r\n          delete manualBounds[normalizedColumn];\r\n          manualChanged = true;\r\n        }\r\n\r\n        const result: Record<string, any> = {\r\n          ...previous,\r\n          columns: nextColumns,\r\n        };\r\n\r\n        if (manualChanged) {\r\n          result.manual_bounds = manualBounds;\r\n        }\r\n\r\n        if (isBinningNode) {\r\n          const selectedSet = new Set(nextColumns);\r\n\r\n          if (\r\n            previous.custom_bins &&\r\n            typeof previous.custom_bins === 'object' &&\r\n            !Array.isArray(previous.custom_bins)\r\n          ) {\r\n            const nextBins: Record<string, number[]> = {};\r\n            Object.entries(previous.custom_bins).forEach(([key, value]) => {\r\n              if (selectedSet.has(key) && Array.isArray(value) && value.length) {\r\n                nextBins[key] = [...value];\r\n              }\r\n            });\r\n            if (Object.keys(nextBins).length) {\r\n              result.custom_bins = nextBins;\r\n            } else if ('custom_bins' in result) {\r\n              delete result.custom_bins;\r\n            }\r\n          } else if ('custom_bins' in result) {\r\n            delete result.custom_bins;\r\n          }\r\n\r\n          if (\r\n            previous.custom_labels &&\r\n            typeof previous.custom_labels === 'object' &&\r\n            !Array.isArray(previous.custom_labels)\r\n          ) {\r\n            const nextLabels: Record<string, string[]> = {};\r\n            Object.entries(previous.custom_labels).forEach(([key, value]) => {\r\n              if (selectedSet.has(key) && Array.isArray(value) && value.length) {\r\n                nextLabels[key] = value.map((entry) => String(entry));\r\n              }\r\n            });\r\n            if (Object.keys(nextLabels).length) {\r\n              result.custom_labels = nextLabels;\r\n            } else if ('custom_labels' in result) {\r\n              delete result.custom_labels;\r\n            }\r\n          } else if ('custom_labels' in result) {\r\n            delete result.custom_labels;\r\n          }\r\n\r\n          if (\r\n            previous.column_overrides &&\r\n            typeof previous.column_overrides === 'object' &&\r\n            !Array.isArray(previous.column_overrides)\r\n          ) {\r\n            const nextOverrides: Record<string, any> = {};\r\n            Object.entries(previous.column_overrides as Record<string, any>).forEach(([key, value]) => {\r\n              if (selectedSet.has(key) && value && typeof value === 'object' && !Array.isArray(value)) {\r\n                nextOverrides[key] = { ...(value as Record<string, any>) };\r\n              }\r\n            });\r\n            if (Object.keys(nextOverrides).length) {\r\n              result.column_overrides = nextOverrides;\r\n              result.column_strategies = nextOverrides;\r\n            } else {\r\n              if ('column_overrides' in result) {\r\n                delete result.column_overrides;\r\n              }\r\n              if ('column_strategies' in result) {\r\n                delete result.column_strategies;\r\n              }\r\n            }\r\n          } else {\r\n            if ('column_overrides' in result) {\r\n              delete result.column_overrides;\r\n            }\r\n            if ('column_strategies' in result) {\r\n              delete result.column_strategies;\r\n            }\r\n          }\r\n        }\r\n\r\n        if (isScalingNode) {\r\n          let nextMethods: Record<string, ScalingMethodName> | null = null;\r\n          if (\r\n            previous.column_methods &&\r\n            typeof previous.column_methods === 'object' &&\r\n            !Array.isArray(previous.column_methods)\r\n          ) {\r\n            nextMethods = {};\r\n            Object.entries(previous.column_methods as Record<string, any>).forEach(([key, value]) => {\r\n              const methodKey = typeof value === 'string' ? (value.trim() as ScalingMethodName) : null;\r\n              if (!methodKey || !SCALING_METHOD_ORDER.includes(methodKey)) {\r\n                return;\r\n              }\r\n              if (exists && key === normalizedColumn) {\r\n                return;\r\n              }\r\n              nextMethods![key] = methodKey;\r\n            });\r\n          }\r\n\r\n          if (nextMethods && Object.keys(nextMethods).length) {\r\n            result.column_methods = nextMethods;\r\n          } else if (exists && Object.prototype.hasOwnProperty.call(result, 'column_methods')) {\r\n            delete result.column_methods;\r\n          }\r\n        }\r\n\r\n        return result;\r\n      });\r\n    },\r\n    [isBinningNode, isScalingNode]\r\n  );\r\n\r\n  const handleApplyAllRecommended = useCallback(() => {\r\n    if (!recommendations.length) {\r\n      return;\r\n    }\r\n    setConfigState((previous) => {\r\n      const next = new Set(ensureArrayOfString(previous.columns));\r\n      recommendations.forEach((candidate) => {\r\n        if (candidate?.name) {\r\n          next.add(String(candidate.name));\r\n        }\r\n      });\r\n      return {\r\n        ...previous,\r\n        columns: Array.from(next),\r\n      };\r\n    });\r\n  }, [recommendations]);\r\n\r\n  const handleApplyLabelEncodingRecommended = useCallback((columns: string[]) => {\r\n    if (!columns.length) {\r\n      return;\r\n    }\r\n    setConfigState((previous) => {\r\n      const next = new Set(ensureArrayOfString(previous.columns));\r\n      columns.forEach((column) => {\r\n        const normalized = String(column ?? '').trim();\r\n        if (normalized) {\r\n          next.add(normalized);\r\n        }\r\n      });\r\n      const ordered = Array.from(next).sort((a, b) => a.localeCompare(b));\r\n      return {\r\n        ...previous,\r\n        columns: ordered,\r\n      };\r\n    });\r\n  }, []);\r\n\r\n  const handleApplyTargetEncodingRecommended = useCallback(\r\n    (columns: string[]) => {\r\n      if (!columns.length) {\r\n        return;\r\n      }\r\n\r\n      setConfigState((previous) => {\r\n        const next = new Set(ensureArrayOfString(previous.columns));\r\n        let shouldEnableFallback = false;\r\n\r\n        columns.forEach((column) => {\r\n          const normalized = String(column ?? '').trim();\r\n          if (!normalized) {\r\n            return;\r\n          }\r\n          next.add(normalized);\r\n          if (!shouldEnableFallback) {\r\n            const suggestion = targetEncodingSuggestions.find((entry) => entry.column === normalized);\r\n            if (suggestion?.recommended_use_global_fallback) {\r\n              shouldEnableFallback = true;\r\n            }\r\n          }\r\n        });\r\n\r\n        const ordered = Array.from(next).sort((a, b) => a.localeCompare(b));\r\n        const result: Record<string, any> = {\r\n          ...previous,\r\n          columns: ordered,\r\n        };\r\n\r\n        if (shouldEnableFallback) {\r\n          targetEncodingFallbackAppliedRef.current = true;\r\n          result.encode_missing = true;\r\n          result.handle_unknown = 'global_mean';\r\n        }\r\n\r\n        return result;\r\n      });\r\n    },\r\n    [targetEncodingSuggestions],\r\n  );\r\n\r\n  const handleApplyHashEncodingRecommended = useCallback(\r\n    (columns: string[]) => {\r\n      if (!columns.length) {\r\n        return;\r\n      }\r\n\r\n      setConfigState((previous) => {\r\n        const next = new Set(ensureArrayOfString(previous.columns));\r\n        let recommendedBuckets = 0;\r\n\r\n        columns.forEach((column) => {\r\n          const normalized = String(column ?? '').trim();\r\n          if (!normalized) {\r\n            return;\r\n          }\r\n          next.add(normalized);\r\n          const suggestion = hashEncodingSuggestions.find((entry) => entry.column === normalized);\r\n          if (suggestion && suggestion.recommended_bucket_count > recommendedBuckets) {\r\n            recommendedBuckets = suggestion.recommended_bucket_count;\r\n          }\r\n        });\r\n\r\n        const ordered = Array.from(next).sort((a, b) => a.localeCompare(b));\r\n        const result: Record<string, any> = {\r\n          ...previous,\r\n          columns: ordered,\r\n        };\r\n\r\n        if (recommendedBuckets > 0) {\r\n          const currentBuckets = Number(previous?.n_buckets);\r\n          if (!Number.isFinite(currentBuckets) || currentBuckets <= 0) {\r\n            result.n_buckets = recommendedBuckets;\r\n          }\r\n        }\r\n\r\n        return result;\r\n      });\r\n    },\r\n    [hashEncodingSuggestions],\r\n  );\r\n\r\n  const handleApplyOrdinalEncodingRecommended = useCallback(\r\n    (columns: string[]) => {\r\n      if (!columns.length) {\r\n        return;\r\n      }\r\n      setConfigState((previous) => {\r\n        const next = new Set(ensureArrayOfString(previous.columns));\r\n        let shouldEnableUnknown = false;\r\n        let shouldEncodeMissing = false;\r\n\r\n        columns.forEach((column) => {\r\n          const normalized = String(column ?? '').trim();\r\n          if (!normalized) {\r\n            return;\r\n          }\r\n          next.add(normalized);\r\n          if (!shouldEnableUnknown || !shouldEncodeMissing) {\r\n            const suggestion = ordinalEncodingSuggestions.find((entry) => entry.column === normalized);\r\n            if (suggestion?.recommended_handle_unknown) {\r\n              shouldEnableUnknown = true;\r\n            }\r\n            if ((suggestion?.missing_percentage ?? 0) > 0) {\r\n              shouldEncodeMissing = true;\r\n            }\r\n          }\r\n        });\r\n\r\n        const ordered = Array.from(next).sort((a, b) => a.localeCompare(b));\r\n        const result: Record<string, any> = {\r\n          ...previous,\r\n          columns: ordered,\r\n        };\r\n\r\n        if (shouldEnableUnknown) {\r\n          result.handle_unknown = 'use_encoded_value';\r\n        }\r\n        if (shouldEncodeMissing) {\r\n          result.encode_missing = true;\r\n        }\r\n\r\n        return result;\r\n      });\r\n    },\r\n    [ordinalEncodingSuggestions],\r\n  );\r\n\r\n  const handleApplyDummyEncodingRecommended = useCallback(\r\n    (columns: string[]) => {\r\n      if (!columns.length) {\r\n        return;\r\n      }\r\n      setConfigState((previous) => {\r\n        const next = new Set(ensureArrayOfString(previous.columns));\r\n        let enforceDropFirst = previous?.drop_first === true;\r\n\r\n        columns.forEach((column) => {\r\n          const normalized = String(column ?? '').trim();\r\n          if (!normalized) {\r\n            return;\r\n          }\r\n          next.add(normalized);\r\n          if (!enforceDropFirst) {\r\n            const suggestion = dummyEncodingSuggestions.find((entry) => entry.column === normalized);\r\n            if (suggestion?.recommended_drop_first) {\r\n              enforceDropFirst = true;\r\n            }\r\n          }\r\n        });\r\n\r\n        const ordered = Array.from(next).sort((a, b) => a.localeCompare(b));\r\n        const result: Record<string, any> = {\r\n          ...previous,\r\n          columns: ordered,\r\n        };\r\n\r\n        if (enforceDropFirst) {\r\n          result.drop_first = true;\r\n        }\r\n\r\n        return result;\r\n      });\r\n    },\r\n    [dummyEncodingSuggestions]\r\n  );\r\n\r\n  const handleApplyOneHotEncodingRecommended = useCallback(\r\n    (columns: string[]) => {\r\n      if (!columns.length) {\r\n        return;\r\n      }\r\n      setConfigState((previous) => {\r\n        const next = new Set(ensureArrayOfString(previous.columns));\r\n        let shouldEnableDropFirst = false;\r\n\r\n        columns.forEach((column) => {\r\n          const normalized = String(column ?? '').trim();\r\n          if (!normalized) {\r\n            return;\r\n          }\r\n          next.add(normalized);\r\n          if (!shouldEnableDropFirst) {\r\n            const suggestion = oneHotEncodingSuggestions.find((entry) => entry.column === normalized);\r\n            if (suggestion?.recommended_drop_first) {\r\n              shouldEnableDropFirst = true;\r\n            }\r\n          }\r\n        });\r\n\r\n        const ordered = Array.from(next).sort((a, b) => a.localeCompare(b));\r\n        const result: Record<string, any> = {\r\n          ...previous,\r\n          columns: ordered,\r\n        };\r\n\r\n        if (shouldEnableDropFirst) {\r\n          result.drop_first = true;\r\n        }\r\n\r\n        return result;\r\n      });\r\n    },\r\n    [oneHotEncodingSuggestions]\r\n  );\r\n\r\n  const handleSelectAllColumns = useCallback(() => {\r\n    if (!availableColumns.length) {\r\n      return;\r\n    }\r\n    setConfigState((previous) => {\r\n      const aggregate = new Set(ensureArrayOfString(previous.columns));\r\n      const eligibleColumns = availableColumns.filter((column) => {\r\n        if (isBinningNode) {\r\n          return !binningExcludedColumns.has(column);\r\n        }\r\n        if (isScalingNode) {\r\n          return !scalingExcludedColumns.has(column);\r\n        }\r\n        return true;\r\n      });\r\n      eligibleColumns.forEach((column) => aggregate.add(column));\r\n      return {\r\n        ...previous,\r\n        columns: Array.from(aggregate).sort((a, b) => a.localeCompare(b)),\r\n      };\r\n    });\r\n  }, [availableColumns, binningExcludedColumns, isBinningNode, isScalingNode, scalingExcludedColumns]);\r\n\r\n  const handleOutlierDefaultMethodChange = useCallback(\r\n    (method: OutlierMethodName) => {\r\n      if (!OUTLIER_METHOD_ORDER.includes(method)) {\r\n        return;\r\n      }\r\n      setConfigState((previous) => {\r\n        if (previous?.default_method === method) {\r\n          return previous;\r\n        }\r\n        return {\r\n          ...previous,\r\n          default_method: method,\r\n        };\r\n      });\r\n    },\r\n    [setConfigState]\r\n  );\r\n\r\n  const handleOutlierAutoDetectToggle = useCallback(\r\n    (value: boolean) => {\r\n      setConfigState((previous) => {\r\n        const current = typeof previous?.auto_detect === 'boolean' ? previous.auto_detect : true;\r\n        if (current === value) {\r\n          return previous;\r\n        }\r\n        return {\r\n          ...previous,\r\n          auto_detect: value,\r\n        };\r\n      });\r\n    },\r\n    [setConfigState]\r\n  );\r\n\r\n  const setOutlierColumnMethod = useCallback(\r\n    (column: string, method: OutlierMethodName | null) => {\r\n      const normalized = String(column ?? '').trim();\r\n      if (!normalized) {\r\n        return;\r\n      }\r\n\r\n      setConfigState((previous) => {\r\n        if (!previous || typeof previous !== 'object') {\r\n          return previous;\r\n        }\r\n\r\n        const currentColumns = ensureArrayOfString(previous.columns);\r\n        const columnSet = new Set(currentColumns);\r\n\r\n        const existingMethods =\r\n          previous.column_methods &&\r\n          typeof previous.column_methods === 'object' &&\r\n          !Array.isArray(previous.column_methods)\r\n            ? { ...(previous.column_methods as Record<string, OutlierMethodName>) }\r\n            : {};\r\n\r\n        let changed = false;\r\n\r\n        if (method) {\r\n          if (!OUTLIER_METHOD_ORDER.includes(method)) {\r\n            return previous;\r\n          }\r\n          if (existingMethods[normalized] !== method) {\r\n            existingMethods[normalized] = method;\r\n            changed = true;\r\n          }\r\n          if (!columnSet.has(normalized)) {\r\n            columnSet.add(normalized);\r\n            changed = true;\r\n          }\r\n        } else if (Object.prototype.hasOwnProperty.call(existingMethods, normalized)) {\r\n          delete existingMethods[normalized];\r\n          changed = true;\r\n        }\r\n\r\n        if (!changed) {\r\n          return previous;\r\n        }\r\n\r\n        const nextState: Record<string, any> = {\r\n          ...previous,\r\n        };\r\n\r\n        nextState.columns = Array.from(columnSet).sort((a, b) => a.localeCompare(b));\r\n\r\n        if (Object.keys(existingMethods).length) {\r\n          nextState.column_methods = existingMethods;\r\n        } else if (Object.prototype.hasOwnProperty.call(nextState, 'column_methods')) {\r\n          delete nextState.column_methods;\r\n        }\r\n\r\n        return nextState;\r\n      });\r\n    },\r\n    [setConfigState]\r\n  );\r\n\r\n  const handleOutlierClearOverrides = useCallback(() => {\r\n    setConfigState((previous) => {\r\n      if (!previous || typeof previous !== 'object') {\r\n        return previous;\r\n      }\r\n\r\n      const hasColumnMethods =\r\n        previous.column_methods &&\r\n        typeof previous.column_methods === 'object' &&\r\n        !Array.isArray(previous.column_methods) &&\r\n        Object.keys(previous.column_methods).length > 0;\r\n\r\n      const hasColumnParameters =\r\n        previous.column_parameters &&\r\n        typeof previous.column_parameters === 'object' &&\r\n        !Array.isArray(previous.column_parameters) &&\r\n        Object.keys(previous.column_parameters).length > 0;\r\n\r\n      if (!hasColumnMethods && !hasColumnParameters) {\r\n        return previous;\r\n      }\r\n\r\n      const nextState: Record<string, any> = { ...previous };\r\n\r\n      if (hasColumnMethods) {\r\n        delete nextState.column_methods;\r\n      }\r\n\r\n      if (hasColumnParameters) {\r\n        delete nextState.column_parameters;\r\n      }\r\n\r\n      return nextState;\r\n    });\r\n  }, [setConfigState]);\r\n\r\n  const handleOutlierApplyAllRecommendations = useCallback(() => {\r\n    if (!outlierRecommendationRows.length) {\r\n      return;\r\n    }\r\n\r\n    setConfigState((previous) => {\r\n      if (!previous || typeof previous !== 'object') {\r\n        return previous;\r\n      }\r\n\r\n      const currentColumns = new Set(ensureArrayOfString(previous.columns));\r\n      const skippedSet = new Set(ensureArrayOfString(previous.skipped_columns));\r\n      const nextMethods =\r\n        previous.column_methods &&\r\n        typeof previous.column_methods === 'object' &&\r\n        !Array.isArray(previous.column_methods)\r\n          ? { ...(previous.column_methods as Record<string, OutlierMethodName>) }\r\n          : {};\r\n      const nextParameters =\r\n        previous.column_parameters &&\r\n        typeof previous.column_parameters === 'object' &&\r\n        !Array.isArray(previous.column_parameters)\r\n          ? { ...(previous.column_parameters as Record<string, Record<string, number>>) }\r\n          : {};\r\n\r\n      let updated = false;\r\n\r\n      outlierRecommendationRows.forEach((row) => {\r\n        if (!row || row.isExcluded || !row.recommendedMethod) {\r\n          return;\r\n        }\r\n\r\n        const columnKey = String(row.column ?? '').trim();\r\n        if (!columnKey || outlierExcludedColumns.has(columnKey)) {\r\n          return;\r\n        }\r\n\r\n        const recommendedMethod = row.recommendedMethod;\r\n        if (!OUTLIER_METHOD_ORDER.includes(recommendedMethod)) {\r\n          return;\r\n        }\r\n\r\n        if (skippedSet.has(columnKey)) {\r\n          skippedSet.delete(columnKey);\r\n          updated = true;\r\n        }\r\n\r\n        if (!currentColumns.has(columnKey)) {\r\n          currentColumns.add(columnKey);\r\n          updated = true;\r\n        }\r\n\r\n        if (recommendedMethod === outlierConfig.defaultMethod) {\r\n          if (Object.prototype.hasOwnProperty.call(nextMethods, columnKey)) {\r\n            delete nextMethods[columnKey];\r\n            updated = true;\r\n          }\r\n        } else if (nextMethods[columnKey] !== recommendedMethod) {\r\n          nextMethods[columnKey] = recommendedMethod;\r\n          updated = true;\r\n        }\r\n\r\n        if (Object.prototype.hasOwnProperty.call(nextParameters, columnKey)) {\r\n          delete nextParameters[columnKey];\r\n          updated = true;\r\n        }\r\n      });\r\n\r\n      if (!updated) {\r\n        return previous;\r\n      }\r\n\r\n      const nextState: Record<string, any> = {\r\n        ...previous,\r\n        columns: Array.from(currentColumns).sort((a, b) => a.localeCompare(b)),\r\n      };\r\n\r\n      if (skippedSet.size) {\r\n        nextState.skipped_columns = Array.from(skippedSet).sort((a, b) => a.localeCompare(b));\r\n      } else if (Object.prototype.hasOwnProperty.call(nextState, 'skipped_columns')) {\r\n        delete nextState.skipped_columns;\r\n      }\r\n\r\n      if (Object.keys(nextMethods).length) {\r\n        nextState.column_methods = nextMethods;\r\n      } else if (Object.prototype.hasOwnProperty.call(nextState, 'column_methods')) {\r\n        delete nextState.column_methods;\r\n      }\r\n\r\n      if (Object.keys(nextParameters).length) {\r\n        nextState.column_parameters = nextParameters;\r\n      } else if (Object.prototype.hasOwnProperty.call(nextState, 'column_parameters')) {\r\n        delete nextState.column_parameters;\r\n      }\r\n\r\n      return nextState;\r\n    });\r\n  }, [outlierConfig.defaultMethod, outlierExcludedColumns, outlierRecommendationRows, setConfigState]);\r\n\r\n  const handleOutlierSkipColumn = useCallback(\r\n    (column: string) => {\r\n      const normalized = String(column ?? '').trim();\r\n      if (!normalized) {\r\n        return;\r\n      }\r\n\r\n      setConfigState((previous) => {\r\n        if (!previous || typeof previous !== 'object') {\r\n          return previous;\r\n        }\r\n\r\n        const currentColumns = ensureArrayOfString(previous.columns);\r\n        const filteredColumns = currentColumns.filter((value) => value !== normalized);\r\n\r\n        const skippedSet = new Set(ensureArrayOfString(previous.skipped_columns));\r\n        const skipSize = skippedSet.size;\r\n        skippedSet.add(normalized);\r\n        const skipChanged = skipSize !== skippedSet.size;\r\n\r\n        const existingMethods =\r\n          previous.column_methods &&\r\n          typeof previous.column_methods === 'object' &&\r\n          !Array.isArray(previous.column_methods)\r\n            ? { ...(previous.column_methods as Record<string, OutlierMethodName>) }\r\n            : {};\r\n        const hadMethod = Object.prototype.hasOwnProperty.call(existingMethods, normalized);\r\n        if (hadMethod) {\r\n          delete existingMethods[normalized];\r\n        }\r\n\r\n        const existingParameters =\r\n          previous.column_parameters &&\r\n          typeof previous.column_parameters === 'object' &&\r\n          !Array.isArray(previous.column_parameters)\r\n            ? { ...(previous.column_parameters as Record<string, Record<string, number>>) }\r\n            : {};\r\n        const hadParameters = Object.prototype.hasOwnProperty.call(existingParameters, normalized);\r\n        if (hadParameters) {\r\n          delete existingParameters[normalized];\r\n        }\r\n\r\n        const columnsChanged = filteredColumns.length !== currentColumns.length;\r\n\r\n        if (!columnsChanged && !skipChanged && !hadMethod && !hadParameters) {\r\n          return previous;\r\n        }\r\n\r\n        const nextState: Record<string, any> = {\r\n          ...previous,\r\n          columns: filteredColumns.sort((a, b) => a.localeCompare(b)),\r\n          skipped_columns: Array.from(skippedSet).sort((a, b) => a.localeCompare(b)),\r\n        };\r\n\r\n        if (Object.keys(existingMethods).length) {\r\n          nextState.column_methods = existingMethods;\r\n        } else if (Object.prototype.hasOwnProperty.call(nextState, 'column_methods')) {\r\n          delete nextState.column_methods;\r\n        }\r\n\r\n        if (Object.keys(existingParameters).length) {\r\n          nextState.column_parameters = existingParameters;\r\n        } else if (Object.prototype.hasOwnProperty.call(nextState, 'column_parameters')) {\r\n          delete nextState.column_parameters;\r\n        }\r\n\r\n        return nextState;\r\n      });\r\n    },\r\n    [setConfigState]\r\n  );\r\n\r\n  const handleOutlierUnskipColumn = useCallback(\r\n    (column: string) => {\r\n      const normalized = String(column ?? '').trim();\r\n      if (!normalized) {\r\n        return;\r\n      }\r\n\r\n      setConfigState((previous) => {\r\n        if (!previous || typeof previous !== 'object') {\r\n          return previous;\r\n        }\r\n\r\n        const skipped = ensureArrayOfString(previous.skipped_columns);\r\n        if (!skipped.includes(normalized)) {\r\n          return previous;\r\n        }\r\n\r\n        const nextSkipped = skipped.filter((value) => value !== normalized);\r\n        const currentColumns = new Set(ensureArrayOfString(previous.columns));\r\n        if (!currentColumns.has(normalized)) {\r\n          currentColumns.add(normalized);\r\n        }\r\n\r\n        const nextState: Record<string, any> = {\r\n          ...previous,\r\n          columns: Array.from(currentColumns).sort((a, b) => a.localeCompare(b)),\r\n        };\r\n\r\n        if (nextSkipped.length) {\r\n          nextState.skipped_columns = nextSkipped.sort((a, b) => a.localeCompare(b));\r\n        } else if (Object.prototype.hasOwnProperty.call(nextState, 'skipped_columns')) {\r\n          delete nextState.skipped_columns;\r\n        }\r\n\r\n        return nextState;\r\n      });\r\n    },\r\n    [setConfigState]\r\n  );\r\n\r\n  const handleOutlierOverrideSelect = useCallback(\r\n    (column: string, value: string) => {\r\n      if (value === '__skip__') {\r\n        handleOutlierSkipColumn(column);\r\n        return;\r\n      }\r\n\r\n      if (value === '__default__') {\r\n        handleOutlierUnskipColumn(column);\r\n        setOutlierColumnMethod(column, null);\r\n        return;\r\n      }\r\n\r\n      if (OUTLIER_METHOD_ORDER.includes(value as OutlierMethodName)) {\r\n        handleOutlierUnskipColumn(column);\r\n        setOutlierColumnMethod(column, value as OutlierMethodName);\r\n      }\r\n    },\r\n    [handleOutlierSkipColumn, handleOutlierUnskipColumn, setOutlierColumnMethod]\r\n  );\r\n\r\n  const handleOutlierMethodParameterChange = useCallback(\r\n    (method: OutlierMethodName, parameter: string, value: number | null) => {\r\n      const normalizedParameter = String(parameter ?? '').trim().toLowerCase();\r\n\r\n      setConfigState((previous) => {\r\n        if (!previous || typeof previous !== 'object') {\r\n          return previous;\r\n        }\r\n\r\n        const baseParameters: Partial<Record<OutlierMethodName, Record<string, number>>> =\r\n          previous.method_parameters &&\r\n          typeof previous.method_parameters === 'object' &&\r\n          !Array.isArray(previous.method_parameters)\r\n            ? { ...(previous.method_parameters as Record<OutlierMethodName, Record<string, number>>) }\r\n            : {};\r\n\r\n        const methodParameters = {\r\n          ...(baseParameters[method] ?? {}),\r\n        };\r\n\r\n        const numericValue = typeof value === 'number' && Number.isFinite(value) ? value : null;\r\n        let changed = false;\r\n\r\n        if (numericValue === null) {\r\n          if (Object.prototype.hasOwnProperty.call(methodParameters, normalizedParameter)) {\r\n            delete methodParameters[normalizedParameter];\r\n            changed = true;\r\n          }\r\n        } else if (methodParameters[normalizedParameter] !== numericValue) {\r\n          methodParameters[normalizedParameter] = numericValue;\r\n          changed = true;\r\n        }\r\n\r\n        if (!changed) {\r\n          return previous;\r\n        }\r\n\r\n        if (Object.keys(methodParameters).length) {\r\n          baseParameters[method] = methodParameters;\r\n        } else {\r\n          delete baseParameters[method];\r\n        }\r\n\r\n        if (!Object.keys(baseParameters).length) {\r\n          const nextState = { ...previous };\r\n          if (Object.prototype.hasOwnProperty.call(nextState, 'method_parameters')) {\r\n            delete nextState.method_parameters;\r\n          }\r\n          return nextState;\r\n        }\r\n\r\n        return {\r\n          ...previous,\r\n          method_parameters: baseParameters,\r\n        };\r\n      });\r\n    },\r\n    [setConfigState]\r\n  );\r\n\r\n  const handleOutlierColumnParameterChange = useCallback(\r\n    (column: string, parameter: string, value: number | null) => {\r\n      const normalizedColumn = String(column ?? '').trim();\r\n      if (!normalizedColumn) {\r\n        return;\r\n      }\r\n      const normalizedParameter = String(parameter ?? '').trim().toLowerCase();\r\n\r\n      setConfigState((previous) => {\r\n        if (!previous || typeof previous !== 'object') {\r\n          return previous;\r\n        }\r\n\r\n        const baseParameters =\r\n          previous.column_parameters &&\r\n          typeof previous.column_parameters === 'object' &&\r\n          !Array.isArray(previous.column_parameters)\r\n            ? { ...(previous.column_parameters as Record<string, Record<string, number>>) }\r\n            : {};\r\n\r\n        const columnParameters = {\r\n          ...(baseParameters[normalizedColumn] ?? {}),\r\n        };\r\n\r\n        const numericValue = typeof value === 'number' && Number.isFinite(value) ? value : null;\r\n        let changed = false;\r\n\r\n        if (numericValue === null) {\r\n          if (Object.prototype.hasOwnProperty.call(columnParameters, normalizedParameter)) {\r\n            delete columnParameters[normalizedParameter];\r\n            changed = true;\r\n          }\r\n        } else if (columnParameters[normalizedParameter] !== numericValue) {\r\n          columnParameters[normalizedParameter] = numericValue;\r\n          changed = true;\r\n        }\r\n\r\n        if (!changed) {\r\n          return previous;\r\n        }\r\n\r\n        if (Object.keys(columnParameters).length) {\r\n          baseParameters[normalizedColumn] = columnParameters;\r\n        } else {\r\n          delete baseParameters[normalizedColumn];\r\n        }\r\n\r\n        if (!Object.keys(baseParameters).length) {\r\n          const nextState = { ...previous };\r\n          if (Object.prototype.hasOwnProperty.call(nextState, 'column_parameters')) {\r\n            delete nextState.column_parameters;\r\n          }\r\n          return nextState;\r\n        }\r\n\r\n        return {\r\n          ...previous,\r\n          column_parameters: baseParameters,\r\n        };\r\n      });\r\n    },\r\n    [setConfigState]\r\n  );\r\n\r\n  const handleScalingDefaultMethodChange = useCallback(\r\n    (method: ScalingMethodName) => {\r\n      if (!SCALING_METHOD_ORDER.includes(method)) {\r\n        return;\r\n      }\r\n      setConfigState((previous) => {\r\n        if (previous?.default_method === method) {\r\n          return previous;\r\n        }\r\n        return {\r\n          ...previous,\r\n          default_method: method,\r\n        };\r\n      });\r\n    },\r\n    [setConfigState]\r\n  );\r\n\r\n  const handleScalingAutoDetectToggle = useCallback(\r\n    (value: boolean) => {\r\n      setConfigState((previous) => {\r\n        const current = typeof previous?.auto_detect === 'boolean' ? previous.auto_detect : true;\r\n        if (current === value) {\r\n          return previous;\r\n        }\r\n        return {\r\n          ...previous,\r\n          auto_detect: value,\r\n        };\r\n      });\r\n    },\r\n    [setConfigState]\r\n  );\r\n\r\n  const setScalingColumnMethod = useCallback(\r\n    (column: string, method: ScalingMethodName | null) => {\r\n      const normalized = String(column ?? '').trim();\r\n      if (!normalized) {\r\n        return;\r\n      }\r\n\r\n      setConfigState((previous) => {\r\n        const currentColumns = ensureArrayOfString(previous.columns);\r\n        const hasColumn = currentColumns.includes(normalized);\r\n        const existingMethods =\r\n          previous.column_methods &&\r\n          typeof previous.column_methods === 'object' &&\r\n          !Array.isArray(previous.column_methods)\r\n            ? { ...(previous.column_methods as Record<string, ScalingMethodName>) }\r\n            : {};\r\n\r\n        if (method) {\r\n          if (!SCALING_METHOD_ORDER.includes(method)) {\r\n            return previous;\r\n          }\r\n          const currentMethod = existingMethods[normalized] ?? null;\r\n          const needsMethodUpdate = currentMethod !== method;\r\n          const needsColumnUpdate = !hasColumn;\r\n          if (!needsMethodUpdate && !needsColumnUpdate) {\r\n            return previous;\r\n          }\r\n          existingMethods[normalized] = method;\r\n          const nextColumns = needsColumnUpdate\r\n            ? [...currentColumns, normalized].sort((a, b) => a.localeCompare(b))\r\n            : currentColumns;\r\n          return {\r\n            ...previous,\r\n            columns: nextColumns,\r\n            column_methods: existingMethods,\r\n          };\r\n        }\r\n\r\n        if (!Object.prototype.hasOwnProperty.call(existingMethods, normalized)) {\r\n          return previous;\r\n        }\r\n\r\n        delete existingMethods[normalized];\r\n        if (Object.keys(existingMethods).length) {\r\n          return {\r\n            ...previous,\r\n            column_methods: existingMethods,\r\n          };\r\n        }\r\n\r\n        const nextState: Record<string, any> = {\r\n          ...previous,\r\n        };\r\n        if (Object.prototype.hasOwnProperty.call(nextState, 'column_methods')) {\r\n          delete nextState.column_methods;\r\n        }\r\n        return nextState;\r\n      });\r\n    },\r\n    [setConfigState]\r\n  );\r\n\r\n  const handleScalingClearOverrides = useCallback(() => {\r\n    setConfigState((previous) => {\r\n      if (\r\n        !previous.column_methods ||\r\n        typeof previous.column_methods !== 'object' ||\r\n        Array.isArray(previous.column_methods) ||\r\n        !Object.keys(previous.column_methods).length\r\n      ) {\r\n        return previous;\r\n      }\r\n      const nextState = { ...previous } as Record<string, any>;\r\n      delete nextState.column_methods;\r\n      return nextState;\r\n    });\r\n  }, [setConfigState]);\r\n\r\n  const handleScalingApplyAllRecommendations = useCallback(() => {\r\n    if (!scalingRecommendations.length) {\r\n      return;\r\n    }\r\n    setConfigState((previous) => {\r\n      const currentColumns = ensureArrayOfString(previous.columns);\r\n      const columnSet = new Set(currentColumns);\r\n      const skippedSet = new Set(ensureArrayOfString(previous.skipped_columns));\r\n      const nextMethods =\r\n        previous.column_methods &&\r\n        typeof previous.column_methods === 'object' &&\r\n        !Array.isArray(previous.column_methods)\r\n          ? { ...(previous.column_methods as Record<string, ScalingMethodName>) }\r\n          : {};\r\n\r\n      let updated = false;\r\n\r\n      scalingRecommendations.forEach((entry) => {\r\n        const normalized = String(entry.column ?? '').trim();\r\n        const method = entry.recommended_method;\r\n        if (!normalized || !SCALING_METHOD_ORDER.includes(method)) {\r\n          return;\r\n        }\r\n        if (skippedSet.has(normalized)) {\r\n          return;\r\n        }\r\n        if (nextMethods[normalized] !== method) {\r\n          nextMethods[normalized] = method;\r\n          updated = true;\r\n        }\r\n        if (!columnSet.has(normalized)) {\r\n          columnSet.add(normalized);\r\n          updated = true;\r\n        }\r\n      });\r\n\r\n      if (!updated) {\r\n        return previous;\r\n      }\r\n\r\n      const nextColumns = Array.from(columnSet).sort((a, b) => a.localeCompare(b));\r\n\r\n      return {\r\n        ...previous,\r\n        columns: nextColumns,\r\n        column_methods: nextMethods,\r\n      };\r\n    });\r\n  }, [scalingRecommendations, setConfigState]);\r\n\r\n  const handleScalingSkipColumn = useCallback(\r\n    (column: string) => {\r\n      const normalized = String(column ?? '').trim();\r\n      if (!normalized) {\r\n        return;\r\n      }\r\n      setConfigState((previous) => {\r\n        const currentColumns = ensureArrayOfString(previous.columns);\r\n        const filteredColumns = currentColumns.filter((value) => value !== normalized);\r\n\r\n        const skippedSet = new Set(ensureArrayOfString(previous.skipped_columns));\r\n        const sizeBefore = skippedSet.size;\r\n        skippedSet.add(normalized);\r\n        const skipChanged = skippedSet.size !== sizeBefore;\r\n\r\n        const rawColumnMethods =\r\n          previous.column_methods && typeof previous.column_methods === 'object' && !Array.isArray(previous.column_methods)\r\n            ? { ...(previous.column_methods as Record<string, ScalingMethodName>) }\r\n            : {};\r\n        const hadMethod = Object.prototype.hasOwnProperty.call(rawColumnMethods, normalized);\r\n        if (hadMethod) {\r\n          delete rawColumnMethods[normalized];\r\n        }\r\n\r\n        if (!skipChanged && filteredColumns.length === currentColumns.length && !hadMethod) {\r\n          return previous;\r\n        }\r\n\r\n        return {\r\n          ...previous,\r\n          columns: filteredColumns.sort((a, b) => a.localeCompare(b)),\r\n          column_methods: rawColumnMethods,\r\n          skipped_columns: Array.from(skippedSet).sort((a, b) => a.localeCompare(b)),\r\n        };\r\n      });\r\n    },\r\n    [setConfigState]\r\n  );\r\n\r\n  const handleScalingUnskipColumn = useCallback(\r\n    (column: string) => {\r\n      const normalized = String(column ?? '').trim();\r\n      if (!normalized) {\r\n        return;\r\n      }\r\n      setConfigState((previous) => {\r\n        const skipped = ensureArrayOfString(previous.skipped_columns);\r\n        if (!skipped.includes(normalized)) {\r\n          return previous;\r\n        }\r\n\r\n        const nextSkippedSet = new Set(skipped);\r\n        nextSkippedSet.delete(normalized);\r\n\r\n        const currentColumns = new Set(ensureArrayOfString(previous.columns));\r\n        const hadColumn = currentColumns.has(normalized);\r\n        if (!hadColumn) {\r\n          currentColumns.add(normalized);\r\n        }\r\n\r\n        return {\r\n          ...previous,\r\n          columns: Array.from(currentColumns).sort((a, b) => a.localeCompare(b)),\r\n          skipped_columns: Array.from(nextSkippedSet).sort((a, b) => a.localeCompare(b)),\r\n        };\r\n      });\r\n    },\r\n    [setConfigState]\r\n  );\r\n\r\n  const handleScalingOverrideSelect = useCallback(\r\n    (column: string, value: string) => {\r\n      if (value === '__skip__') {\r\n        handleScalingSkipColumn(column);\r\n        return;\r\n      }\r\n\r\n      if (value === '__default__') {\r\n        handleScalingUnskipColumn(column);\r\n        setScalingColumnMethod(column, null);\r\n        return;\r\n      }\r\n\r\n      if (SCALING_METHOD_ORDER.includes(value as ScalingMethodName)) {\r\n        handleScalingUnskipColumn(column);\r\n        setScalingColumnMethod(column, value as ScalingMethodName);\r\n      }\r\n    },\r\n    [handleScalingSkipColumn, handleScalingUnskipColumn, setScalingColumnMethod]\r\n  );\r\n\r\n  const handleClearColumns = useCallback(() => {\r\n    setConfigState((previous) => {\r\n      const next: Record<string, any> = {\r\n        ...previous,\r\n        columns: [],\r\n      };\r\n      if (\r\n        previous?.manual_bounds &&\r\n        typeof previous.manual_bounds === 'object' &&\r\n        !Array.isArray(previous.manual_bounds) &&\r\n        Object.keys(previous.manual_bounds).length\r\n      ) {\r\n        next.manual_bounds = {};\r\n      }\r\n      if (isBinningNode) {\r\n        if ('custom_bins' in next) {\r\n          delete next.custom_bins;\r\n        }\r\n        if ('custom_labels' in next) {\r\n          delete next.custom_labels;\r\n        }\r\n        if ('column_overrides' in next) {\r\n          delete next.column_overrides;\r\n        }\r\n        if ('column_strategies' in next) {\r\n          delete next.column_strategies;\r\n        }\r\n      }\r\n      if (isScalingNode && 'column_methods' in next) {\r\n        delete next.column_methods;\r\n      }\r\n      return next;\r\n    });\r\n  }, [isBinningNode, isScalingNode]);\r\n\r\n  const handleRemoveColumn = useCallback((column: string) => {\r\n    const normalizedColumn = String(column ?? '').trim();\r\n    if (!normalizedColumn) {\r\n      return;\r\n    }\r\n    setConfigState((previous) => {\r\n      const current = ensureArrayOfString(previous.columns);\r\n      if (!current.includes(normalizedColumn)) {\r\n        return previous;\r\n      }\r\n      const nextColumns = current.filter((item) => item !== normalizedColumn);\r\n      let manualChanged = false;\r\n      let manualBounds = previous.manual_bounds;\r\n      if (\r\n        manualBounds &&\r\n        typeof manualBounds === 'object' &&\r\n        !Array.isArray(manualBounds) &&\r\n        Object.prototype.hasOwnProperty.call(manualBounds, normalizedColumn)\r\n      ) {\r\n        manualBounds = { ...manualBounds };\r\n        delete manualBounds[normalizedColumn];\r\n        manualChanged = true;\r\n      }\r\n      const result: Record<string, any> = {\r\n        ...previous,\r\n        columns: nextColumns,\r\n      };\r\n\r\n      if (manualChanged) {\r\n        result.manual_bounds = manualBounds;\r\n      }\r\n\r\n      if (isBinningNode) {\r\n        if (\r\n          previous.custom_bins &&\r\n          typeof previous.custom_bins === 'object' &&\r\n          !Array.isArray(previous.custom_bins)\r\n        ) {\r\n          const nextBins: Record<string, number[]> = {};\r\n          Object.entries(previous.custom_bins).forEach(([key, value]) => {\r\n            if (key !== normalizedColumn && Array.isArray(value) && value.length) {\r\n              nextBins[key] = [...value];\r\n            }\r\n          });\r\n          if (Object.keys(nextBins).length) {\r\n            result.custom_bins = nextBins;\r\n          } else if ('custom_bins' in result) {\r\n            delete result.custom_bins;\r\n          }\r\n        } else if ('custom_bins' in result) {\r\n          delete result.custom_bins;\r\n        }\r\n\r\n        if (\r\n          previous.custom_labels &&\r\n          typeof previous.custom_labels === 'object' &&\r\n          !Array.isArray(previous.custom_labels)\r\n        ) {\r\n          const nextLabels: Record<string, string[]> = {};\r\n          Object.entries(previous.custom_labels).forEach(([key, value]) => {\r\n            if (key !== normalizedColumn && Array.isArray(value) && value.length) {\r\n              nextLabels[key] = value.map((entry) => String(entry));\r\n            }\r\n          });\r\n          if (Object.keys(nextLabels).length) {\r\n            result.custom_labels = nextLabels;\r\n          } else if ('custom_labels' in result) {\r\n            delete result.custom_labels;\r\n          }\r\n        } else if ('custom_labels' in result) {\r\n          delete result.custom_labels;\r\n        }\r\n\r\n        if (\r\n          previous.column_overrides &&\r\n          typeof previous.column_overrides === 'object' &&\r\n          !Array.isArray(previous.column_overrides)\r\n        ) {\r\n          const nextOverrides: Record<string, any> = {};\r\n          Object.entries(previous.column_overrides as Record<string, any>).forEach(([key, value]) => {\r\n            if (key !== normalizedColumn && value && typeof value === 'object' && !Array.isArray(value)) {\r\n              nextOverrides[key] = { ...(value as Record<string, any>) };\r\n            }\r\n          });\r\n          if (Object.keys(nextOverrides).length) {\r\n            result.column_overrides = nextOverrides;\r\n            result.column_strategies = nextOverrides;\r\n          } else {\r\n            if ('column_overrides' in result) {\r\n              delete result.column_overrides;\r\n            }\r\n            if ('column_strategies' in result) {\r\n              delete result.column_strategies;\r\n            }\r\n          }\r\n        } else {\r\n          if ('column_overrides' in result) {\r\n            delete result.column_overrides;\r\n          }\r\n          if ('column_strategies' in result) {\r\n            delete result.column_strategies;\r\n          }\r\n        }\r\n      }\r\n\r\n      if (isScalingNode) {\r\n        if (\r\n          previous.column_methods &&\r\n          typeof previous.column_methods === 'object' &&\r\n          !Array.isArray(previous.column_methods)\r\n        ) {\r\n          const nextMethods: Record<string, ScalingMethodName> = {};\r\n          Object.entries(previous.column_methods as Record<string, any>).forEach(([key, value]) => {\r\n            const methodKey = typeof value === 'string' ? (value.trim() as ScalingMethodName) : null;\r\n            if (!methodKey || !SCALING_METHOD_ORDER.includes(methodKey)) {\r\n              return;\r\n            }\r\n            if (key === normalizedColumn) {\r\n              return;\r\n            }\r\n            nextMethods[key] = methodKey;\r\n          });\r\n          if (Object.keys(nextMethods).length) {\r\n            result.column_methods = nextMethods;\r\n          } else if (Object.prototype.hasOwnProperty.call(result, 'column_methods')) {\r\n            delete result.column_methods;\r\n          }\r\n        } else if (Object.prototype.hasOwnProperty.call(result, 'column_methods')) {\r\n          delete result.column_methods;\r\n        }\r\n      }\r\n\r\n      return result;\r\n    });\r\n  }, [isBinningNode, isScalingNode]);\r\n\r\n  const handleApplySuggestedThreshold = useCallback(() => {\r\n    if (normalizedSuggestedThreshold === null || !thresholdParameterName) {\r\n      return;\r\n    }\r\n    handleParameterChange(thresholdParameterName, normalizedSuggestedThreshold);\r\n  }, [handleParameterChange, normalizedSuggestedThreshold, thresholdParameterName]);\r\n\r\n  const handleResetNode = useCallback(() => {\r\n    if (!canResetNode || !nodeId) {\r\n      return;\r\n    }\r\n    const template = cloneConfig(defaultConfigTemplate ?? {});\r\n    if (isTargetEncodingNode) {\r\n      targetEncodingFallbackAppliedRef.current = false;\r\n    }\r\n    setConfigState(template);\r\n    onResetConfig?.(nodeId, template);\r\n  }, [canResetNode, defaultConfigTemplate, isTargetEncodingNode, nodeId, onResetConfig, targetEncodingFallbackAppliedRef]);\r\n\r\n  const handleSave = useCallback((options?: { closeModal?: boolean }) => {\r\n    let payload = cloneConfig(configState);\r\n    \r\n    if (isBinningNode) {\r\n      const normalized = normalizeBinningConfigValue(payload);\r\n      payload = {\r\n        ...payload,\r\n        strategy: normalized.strategy,\r\n        columns: normalized.columns,\r\n        equal_width_bins: normalized.equalWidthBins,\r\n        equal_frequency_bins: normalized.equalFrequencyBins,\r\n        include_lowest: normalized.includeLowest,\r\n        precision: normalized.precision,\r\n        duplicates: normalized.duplicates,\r\n        output_suffix: normalized.outputSuffix,\r\n        drop_original: normalized.dropOriginal,\r\n        label_format: normalized.labelFormat,\r\n        missing_strategy: normalized.missingStrategy,\r\n      };\r\n\r\n      if (normalized.missingStrategy === 'label') {\r\n        payload.missing_label = normalized.missingLabel;\r\n      } else if (Object.prototype.hasOwnProperty.call(payload, 'missing_label')) {\r\n        delete payload.missing_label;\r\n      }\r\n\r\n      if (Object.keys(normalized.customBins).length) {\r\n        payload.custom_bins = normalized.customBins;\r\n      } else if (Object.prototype.hasOwnProperty.call(payload, 'custom_bins')) {\r\n        delete payload.custom_bins;\r\n      }\r\n\r\n      if (Object.keys(normalized.customLabels).length) {\r\n        payload.custom_labels = normalized.customLabels;\r\n      } else if (Object.prototype.hasOwnProperty.call(payload, 'custom_labels')) {\r\n        delete payload.custom_labels;\r\n      }\r\n    }\r\n\r\n    if (isScalingNode) {\r\n      const normalized = normalizeScalingConfigValue(payload);\r\n      payload = {\r\n        ...payload,\r\n        columns: normalized.columns,\r\n        default_method: normalized.defaultMethod,\r\n        auto_detect: normalized.autoDetect,\r\n        skipped_columns: normalized.skippedColumns,\r\n      };\r\n      \r\n      // Only include column_methods if there are overrides\r\n      if (Object.keys(normalized.columnMethods).length > 0) {\r\n        payload.column_methods = normalized.columnMethods;\r\n      } else if (Object.prototype.hasOwnProperty.call(payload, 'column_methods')) {\r\n        delete payload.column_methods;\r\n      }\r\n    }\r\n\r\n    onUpdateConfig(node.id, payload);\r\n    if (options?.closeModal !== false) {\r\n      onClose();\r\n    }\r\n    \r\n    // Trigger full dataset execution in background after saving\r\n    // This pre-loads the full dataset for this node's transformations\r\n    // Skip for inspection nodes (they only view data, don't transform it)\r\n    if (sourceId && graphSnapshot && !isInspectionNode) {\r\n      // Set loading status immediately\r\n      if (onUpdateNodeData) {\r\n        onUpdateNodeData(node.id, { backgroundExecutionStatus: 'loading' });\r\n      }\r\n      \r\n      triggerFullDatasetExecution({\r\n        dataset_source_id: sourceId,\r\n        graph: {\r\n          nodes: graphSnapshot.nodes || [],\r\n          edges: graphSnapshot.edges || [],\r\n        },\r\n        target_node_id: node.id,\r\n      })\r\n        .then(() => {\r\n          // Update to success when complete\r\n          if (onUpdateNodeData) {\r\n            onUpdateNodeData(node.id, { backgroundExecutionStatus: 'success' });\r\n          }\r\n        })\r\n        .catch((error) => {\r\n          // Update to error on failure\r\n          if (onUpdateNodeData) {\r\n            onUpdateNodeData(node.id, { backgroundExecutionStatus: 'error' });\r\n          }\r\n          // Silent fail - this is a background optimization, not critical\r\n          console.warn('Background full dataset execution failed:', error);\r\n        });\r\n    }\r\n  }, [\r\n    configState,\r\n    isBinningNode,\r\n    node.id,\r\n    onClose,\r\n    onUpdateConfig,\r\n    onUpdateNodeData,\r\n    sourceId,\r\n    graphSnapshot,\r\n    isInspectionNode,\r\n  ]);\r\n\r\n  const canApplySuggestedThreshold =\r\n    normalizedSuggestedThreshold !== null && !thresholdMatchesSuggestion;\r\n  const selectionCount = selectedColumns.length;\r\n  const relativeGeneratedAt = formatRelativeTime(recommendationsGeneratedAt);\r\n  const relativeScalingGeneratedAt = formatRelativeTime(scalingData?.generated_at ?? null);\r\n  const relativeBinningGeneratedAt = formatRelativeTime(binningData?.generated_at ?? null);\r\n  const relativeBinnedGeneratedAt = formatRelativeTime(binnedDistributionData?.generated_at ?? null);\r\n  const scalingSampleSizeNumeric = Number(scalingData?.sample_size);\r\n  const scalingSampleSize = Number.isFinite(scalingSampleSizeNumeric)\r\n    ? Math.max(0, Math.round(scalingSampleSizeNumeric))\r\n    : null;\r\n  const binningSampleSizeNumeric = Number(binningData?.sample_size);\r\n  const binningSampleSize = Number.isFinite(binningSampleSizeNumeric)\r\n    ? Math.max(0, Math.round(binningSampleSizeNumeric))\r\n    : null;\r\n  const binnedSampleSizeNumeric = Number(binnedDistributionData?.sample_size);\r\n  const binnedSampleSize = Number.isFinite(binnedSampleSizeNumeric)\r\n    ? Math.max(0, Math.round(binnedSampleSizeNumeric))\r\n    : null;\r\n  const showRecommendations = hasDropColumnSource && Boolean(sourceId) && hasReachableSource;\r\n  const showSaveButton = !datasetBadge && !isInspectionNode;\r\n  const canSave = showSaveButton && stableInitialConfig !== stableCurrentConfig;\r\n  const isProfileLoading = profileState.status === 'loading';\r\n  const isPreviewLoading = previewState.status === 'loading';\r\n  const hasActiveAsyncWork =\r\n    isProfileLoading ||\r\n    isPreviewLoading ||\r\n    isFetchingScaling ||\r\n    isFetchingBinning ||\r\n    isFetchingHashEncoding ||\r\n    isFetchingBinnedDistribution ||\r\n    isFetchingRecommendations;\r\n\r\n  const busyLabel = useMemo(() => {\r\n    if (isProfileLoading) {\r\n      return 'Generating dataset profile';\r\n    }\r\n    if (isFetchingScaling) {\r\n      return 'Loading scaling insights';\r\n    }\r\n    if (isFetchingBinning) {\r\n      return 'Loading binning insights';\r\n    }\r\n    if (isFetchingHashEncoding) {\r\n      return 'Loading hash encoding insights';\r\n    }\r\n    if (isFetchingBinnedDistribution) {\r\n      return 'Computing binned distributions';\r\n    }\r\n    if (isFetchingRecommendations) {\r\n      return 'Fetching column recommendations';\r\n    }\r\n    if (isPreviewLoading) {\r\n      return isPreviewNode ? 'Loading dataset preview' : 'Analyzing node outputs';\r\n    }\r\n    return null;\r\n  }, [\r\n    isFetchingBinnedDistribution,\r\n    isFetchingRecommendations,\r\n    isFetchingScaling,\r\n    isFetchingBinning,\r\n    isFetchingHashEncoding,\r\n    isFetchingSkewness,\r\n    isPreviewLoading,\r\n    isProfileLoading,\r\n    isPreviewNode,\r\n  ]);\r\n  const footerBusyLabel = busyLabel ?? (hasActiveAsyncWork ? 'Processing' : null);\r\n\r\n  const updateImputerStrategies = useCallback(\r\n    (updater: (current: ImputationStrategyConfig[]) => ImputationStrategyConfig[]) => {\r\n      setConfigState((previous) => {\r\n        const currentStrategies = normalizeImputationStrategies(previous?.strategies, imputationMethodValues);\r\n        const nextStrategies = updater(currentStrategies).map((strategy) => ({\r\n          ...strategy,\r\n          options: sanitizeOptionsForMethod(strategy.method, strategy.options),\r\n        }));\r\n        return {\r\n          ...previous,\r\n          strategies: serializeImputationStrategies(nextStrategies),\r\n        };\r\n      });\r\n    },\r\n    [imputationMethodValues]\r\n  );\r\n\r\n  const updateAliasStrategies = useCallback(\r\n    (updater: (current: AliasStrategyConfig[]) => AliasStrategyConfig[]) => {\r\n      if (!isReplaceAliasesNode) {\r\n        return;\r\n      }\r\n\r\n      setConfigState((previous) => {\r\n        if (!isReplaceAliasesNode) {\r\n          return previous;\r\n        }\r\n\r\n        const fallbackColumns = ensureArrayOfString(previous?.columns ?? node?.data?.config?.columns);\r\n        const fallbackMode = resolveAliasMode(previous?.mode, node?.data?.config?.mode);\r\n\r\n        const fallbackAutoDetect = (() => {\r\n          const localValue = pickAutoDetectValue(previous as Record<string, unknown>);\r\n          if (localValue !== undefined) {\r\n            const normalized = normalizeConfigBoolean(localValue);\r\n            if (normalized !== null) {\r\n              return normalized;\r\n            }\r\n          }\r\n          const nodeValue = pickAutoDetectValue(node?.data?.config as Record<string, unknown> | undefined);\r\n          if (nodeValue !== undefined) {\r\n            const normalized = normalizeConfigBoolean(nodeValue);\r\n            if (normalized !== null) {\r\n              return normalized;\r\n            }\r\n          }\r\n          return fallbackColumns.length === 0;\r\n        })();\r\n\r\n        const rawStrategies =\r\n          previous?.alias_strategies ??\r\n          previous?.strategies ??\r\n          node?.data?.config?.alias_strategies ??\r\n          node?.data?.config?.strategies;\r\n\r\n        const currentStrategies = normalizeAliasStrategies(rawStrategies, {\r\n          mode: fallbackMode,\r\n          columns: fallbackColumns,\r\n          autoDetect: fallbackAutoDetect,\r\n        });\r\n\r\n        const nextStrategies = updater(currentStrategies).map((strategy) => ({\r\n          mode: resolveAliasMode(strategy.mode, fallbackMode),\r\n          columns: Array.from(\r\n            new Set(strategy.columns.map((column) => column.trim()).filter(Boolean)),\r\n          ).sort((a, b) => a.localeCompare(b)),\r\n          autoDetect: Boolean(strategy.autoDetect),\r\n        }));\r\n\r\n        const serialized = serializeAliasStrategies(nextStrategies);\r\n        const unionColumns = Array.from(\r\n          new Set(\r\n            nextStrategies.flatMap((strategy) => strategy.columns),\r\n          ),\r\n        ).sort((a, b) => a.localeCompare(b));\r\n\r\n        const primaryMode = nextStrategies[0]?.mode ?? fallbackMode;\r\n        const autoDetectAny = nextStrategies.length\r\n          ? nextStrategies.some((strategy) => strategy.autoDetect)\r\n          : fallbackAutoDetect;\r\n\r\n        return {\r\n          ...previous,\r\n          alias_strategies: serialized,\r\n          columns: unionColumns,\r\n          mode: primaryMode,\r\n          auto_detect: autoDetectAny,\r\n        };\r\n      });\r\n    },\r\n    [isReplaceAliasesNode, node?.data?.config]\r\n  );\r\n\r\n  const updateDateStrategies = useCallback(\r\n    (updater: (current: DateFormatStrategyConfig[]) => DateFormatStrategyConfig[]) => {\r\n      setConfigState((previous) => {\r\n        if (!isStandardizeDatesNode) {\r\n          return previous;\r\n        }\r\n\r\n        const fallbackColumns = ensureArrayOfString(previous?.columns ?? node?.data?.config?.columns);\r\n        const fallbackMode = resolveDateMode(previous?.mode, node?.data?.config?.mode);\r\n        const fallbackAutoDetect = fallbackColumns.length === 0;\r\n\r\n        const currentStrategies = normalizeDateFormatStrategies(\r\n          previous?.format_strategies ?? node?.data?.config?.format_strategies,\r\n          {\r\n            columns: fallbackColumns,\r\n            mode: fallbackMode,\r\n            autoDetect: fallbackAutoDetect,\r\n          },\r\n        );\r\n\r\n        const nextStrategies = updater(currentStrategies);\r\n        const serialized = serializeDateFormatStrategies(nextStrategies);\r\n        const unionColumns = Array.from(\r\n          new Set(\r\n            nextStrategies.flatMap((strategy) =>\r\n              strategy.columns.map((column) => column.trim()).filter(Boolean),\r\n            ),\r\n          ),\r\n        ).sort((a, b) => a.localeCompare(b));\r\n        const primaryMode = nextStrategies[0]?.mode ?? fallbackMode;\r\n\r\n        return {\r\n          ...previous,\r\n          format_strategies: serialized,\r\n          columns: unionColumns,\r\n          mode: primaryMode,\r\n        };\r\n      });\r\n    },\r\n    [isStandardizeDatesNode, node?.data?.config?.columns, node?.data?.config?.format_strategies, node?.data?.config?.mode],\r\n  );\r\n  const handleRefreshBinnedDistribution = useCallback(() => {\r\n    if (!sourceId) {\r\n      return;\r\n    }\r\n    refreshBinnedDistribution();\r\n  }, [refreshBinnedDistribution, sourceId]);\r\n\r\n  const binnedDistributionCards = useMemo<BinnedDistributionCard[]>(() => {\r\n    if (!isBinnedDistributionNode) {\r\n      return [];\r\n    }\r\n\r\n    const rawColumns = Array.isArray(binnedDistributionData?.columns) ? binnedDistributionData?.columns : [];\r\n\r\n    const cards = rawColumns\r\n      .map((entry) => {\r\n        if (!entry || !entry.column) {\r\n          return null;\r\n        }\r\n\r\n        const totalRowsNumeric = Number(entry.total_rows);\r\n        const totalRows = Number.isFinite(totalRowsNumeric) ? Math.max(0, Math.round(totalRowsNumeric)) : 0;\r\n        if (totalRows <= 0) {\r\n          return null;\r\n        }\r\n\r\n        const rawBins = Array.isArray(entry.bins) ? entry.bins : [];\r\n        const sanitizedBins = rawBins\r\n          .map((bin): BinnedDistributionBin | null => {\r\n            if (!bin) {\r\n              return null;\r\n            }\r\n\r\n            const labelRaw = typeof bin.label === 'string' ? bin.label.trim() : String(bin.label ?? '');\r\n            const label = labelRaw || (bin.is_missing ? 'Missing' : 'Unlabeled bin');\r\n\r\n            const numericCount = Number(bin.count);\r\n            if (!Number.isFinite(numericCount)) {\r\n              return null;\r\n            }\r\n\r\n            const safeCount = Math.max(0, Math.round(numericCount));\r\n\r\n            const numericPercentage = Number(bin.percentage);\r\n            const clampedPercentage = Number.isFinite(numericPercentage)\r\n              ? Math.min(100, Math.max(0, numericPercentage))\r\n              : 0;\r\n            const roundedPercentage = Number(clampedPercentage.toFixed(2));\r\n\r\n            return {\r\n              label,\r\n              count: safeCount,\r\n              percentage: roundedPercentage,\r\n              isMissing: Boolean(bin.is_missing),\r\n            };\r\n          })\r\n          .filter((bin): bin is BinnedDistributionBin => Boolean(bin));\r\n\r\n        if (!sanitizedBins.length) {\r\n          return null;\r\n        }\r\n\r\n        sanitizedBins.sort((a, b) => {\r\n          if (a.isMissing !== b.isMissing) {\r\n            return a.isMissing ? 1 : -1;\r\n          }\r\n          if (a.count !== b.count) {\r\n            return b.count - a.count;\r\n          }\r\n          return a.label.localeCompare(b.label);\r\n        });\r\n\r\n        const totalBinCount = sanitizedBins.length;\r\n        const MAX_BINS = 12;\r\n        const hasMoreBins = totalBinCount > MAX_BINS;\r\n        const bins = hasMoreBins ? sanitizedBins.slice(0, MAX_BINS) : sanitizedBins;\r\n\r\n        const missingRowsNumeric = Number(entry.missing_rows);\r\n        const missingRows = Number.isFinite(missingRowsNumeric) ? Math.max(0, Math.round(missingRowsNumeric)) : 0;\r\n\r\n        const distinctBinsNumeric = Number(entry.distinct_bins);\r\n        const distinctBins = Number.isFinite(distinctBinsNumeric)\r\n          ? Math.max(0, Math.round(distinctBinsNumeric))\r\n          : sanitizedBins.length;\r\n\r\n        const rawTopLabel = entry.top_label;\r\n        let topLabel = typeof rawTopLabel === 'string' ? rawTopLabel.trim() || null : rawTopLabel ?? null;\r\n        const topCountNumeric = Number(entry.top_count);\r\n        let topCount = Number.isFinite(topCountNumeric) ? Math.max(0, Math.round(topCountNumeric)) : null;\r\n        const topPercentageNumeric = Number(entry.top_percentage);\r\n        let topPercentage = Number.isFinite(topPercentageNumeric)\r\n          ? Number(Math.min(100, Math.max(0, topPercentageNumeric)).toFixed(2))\r\n          : null;\r\n\r\n        if ((topLabel === null || topCount === null || topPercentage === null) && bins.length) {\r\n          topLabel = bins[0].label;\r\n          topCount = bins[0].count;\r\n          topPercentage = bins[0].percentage;\r\n        }\r\n\r\n        const sourceColumn = typeof entry.source_column === 'string' ? entry.source_column.trim() || null : entry.source_column ?? null;\r\n\r\n        return {\r\n          column: entry.column,\r\n          sourceColumn,\r\n          totalRows,\r\n          missingRows,\r\n          distinctBins,\r\n          topLabel,\r\n          topCount,\r\n          topPercentage,\r\n          bins,\r\n          hasMoreBins,\r\n          totalBinCount,\r\n        } as BinnedDistributionCard;\r\n      })\r\n      .filter((card): card is BinnedDistributionCard => Boolean(card));\r\n\r\n    cards.sort((a, b) => {\r\n      const diff = (b.topCount ?? 0) - (a.topCount ?? 0);\r\n      if (diff !== 0) {\r\n        return diff;\r\n      }\r\n      return a.column.localeCompare(b.column);\r\n    });\r\n\r\n    return cards;\r\n  }, [binnedDistributionData, isBinnedDistributionNode]);\r\n\r\n  const handleAddImputerStrategy = useCallback(() => {\r\n    const nextIndex = imputerStrategyCount;\r\n    const defaultMethod = imputationMethodOptions[0]?.value ?? 'mean';\r\n    updateImputerStrategies((current) => [\r\n      ...current,\r\n      {\r\n        method: defaultMethod,\r\n        columns: [],\r\n        options: sanitizeOptionsForMethod(defaultMethod, buildDefaultOptionsForMethod(defaultMethod)),\r\n      },\r\n    ]);\r\n    setCollapsedStrategies((previous) => {\r\n      const next = new Set(previous);\r\n      next.delete(nextIndex);\r\n      return next;\r\n    });\r\n  }, [imputationMethodOptions, imputerStrategyCount, updateImputerStrategies]);\r\n\r\n  const handleRemoveImputerStrategy = useCallback(\r\n    (index: number) => {\r\n      updateImputerStrategies((current) => current.filter((_, idx) => idx !== index));\r\n      setCollapsedStrategies((previous) => {\r\n        const next = new Set<number>();\r\n        previous.forEach((value) => {\r\n          if (value === index) {\r\n            return;\r\n          }\r\n          next.add(value > index ? value - 1 : value);\r\n        });\r\n        return next;\r\n      });\r\n    },\r\n    [updateImputerStrategies]\r\n  );\r\n\r\n  const toggleImputerStrategySection = useCallback((index: number) => {\r\n    setCollapsedStrategies((previous) => {\r\n      const next = new Set(previous);\r\n      if (next.has(index)) {\r\n        next.delete(index);\r\n      } else {\r\n        next.add(index);\r\n      }\r\n      return next;\r\n    });\r\n  }, []);\r\n\r\n  const handleImputerMethodChange = useCallback(\r\n    (index: number, method: ImputationStrategyMethod) => {\r\n      updateImputerStrategies((current) =>\r\n        current.map((strategy, idx) =>\r\n          idx === index\r\n            ? {\r\n                ...strategy,\r\n                method,\r\n                options: sanitizeOptionsForMethod(method, strategy.options),\r\n              }\r\n            : strategy\r\n        )\r\n      );\r\n    },\r\n    [updateImputerStrategies]\r\n  );\r\n\r\n  const handleImputerOptionNumberChange = useCallback(\r\n    (index: number, key: 'neighbors' | 'max_iter', rawValue: string) => {\r\n      updateImputerStrategies((current) =>\r\n        current.map((strategy, idx) => {\r\n          if (idx !== index) {\r\n            return strategy;\r\n          }\r\n          const nextOptions: ImputationStrategyOptions = {\r\n            ...(strategy.options ?? {}),\r\n          };\r\n          if (rawValue === '') {\r\n            delete nextOptions[key];\r\n          } else {\r\n            const parsed = Number(rawValue);\r\n            if (!Number.isFinite(parsed)) {\r\n              return strategy;\r\n            }\r\n            nextOptions[key] = parsed;\r\n          }\r\n          return {\r\n            ...strategy,\r\n            options: sanitizeOptionsForMethod(strategy.method, nextOptions),\r\n          };\r\n        })\r\n      );\r\n    },\r\n    [updateImputerStrategies]\r\n  );\r\n\r\n  const handleImputerColumnsChange = useCallback(\r\n    (index: number, value: string) => {\r\n      const normalized = value\r\n        .split(',')\r\n        .map((column) => column.trim())\r\n        .filter(Boolean);\r\n      updateImputerStrategies((current) =>\r\n        current.map((strategy, idx) => (idx === index ? { ...strategy, columns: normalized } : strategy))\r\n      );\r\n    },\r\n    [updateImputerStrategies]\r\n  );\r\n\r\n  const handleImputerColumnToggle = useCallback(\r\n    (index: number, column: string) => {\r\n      const normalized = column.trim();\r\n      if (!normalized) {\r\n        return;\r\n      }\r\n\r\n      updateImputerStrategies((current) =>\r\n        current.map((strategy, idx) => {\r\n          if (idx !== index) {\r\n            return strategy;\r\n          }\r\n          const hasColumn = strategy.columns.includes(normalized);\r\n          const nextColumns = hasColumn\r\n            ? strategy.columns.filter((item) => item !== normalized)\r\n            : [...strategy.columns, normalized];\r\n          nextColumns.sort((a, b) => a.localeCompare(b));\r\n          return {\r\n            ...strategy,\r\n            columns: nextColumns,\r\n          };\r\n        })\r\n      );\r\n    },\r\n    [updateImputerStrategies]\r\n  );\r\n\r\n  const handleImputerMissingFilterChange = useCallback(\r\n    (value: number) => {\r\n      setImputerMissingFilter(value);\r\n    },\r\n    [setImputerMissingFilter]\r\n  );\r\n\r\n  const handleAddDateStrategy = useCallback(() => {\r\n    const nextIndex = dateStrategies.length;\r\n    updateDateStrategies((current) => {\r\n      const assigned = new Set<string>();\r\n      current.forEach((strategy) => {\r\n        strategy.columns.forEach((column) => {\r\n          const normalized = column.trim();\r\n          if (normalized) {\r\n            assigned.add(normalized);\r\n          }\r\n        });\r\n      });\r\n      const suggested = standardizeDatesColumnSummary.recommendedColumns.find((column) => !assigned.has(column));\r\n      const defaultMode = current.length\r\n        ? current[current.length - 1].mode\r\n        : DATE_MODE_OPTIONS[0]?.value ?? standardizeDatesMode;\r\n      const nextStrategy: DateFormatStrategyConfig = {\r\n        mode: defaultMode,\r\n        columns: suggested ? [suggested] : [],\r\n        autoDetect: !suggested,\r\n      };\r\n      return [...current, nextStrategy];\r\n    });\r\n    setCollapsedStrategies((previous) => {\r\n      const next = new Set(previous);\r\n      next.delete(nextIndex);\r\n      return next;\r\n    });\r\n  }, [dateStrategies.length, setCollapsedStrategies, standardizeDatesColumnSummary.recommendedColumns, standardizeDatesMode, updateDateStrategies]);\r\n\r\n  const handleRemoveDateStrategy = useCallback(\r\n    (index: number) => {\r\n      updateDateStrategies((current) => current.filter((_, idx) => idx !== index));\r\n      setCollapsedStrategies((previous) => {\r\n        const next = new Set<number>();\r\n        previous.forEach((value) => {\r\n          if (value === index) {\r\n            return;\r\n          }\r\n          next.add(value > index ? value - 1 : value);\r\n        });\r\n        return next;\r\n      });\r\n    },\r\n    [setCollapsedStrategies, updateDateStrategies],\r\n  );\r\n\r\n  const toggleDateStrategySection = useCallback((index: number) => {\r\n    setCollapsedStrategies((previous) => {\r\n      const next = new Set(previous);\r\n      if (next.has(index)) {\r\n        next.delete(index);\r\n      } else {\r\n        next.add(index);\r\n      }\r\n      return next;\r\n    });\r\n  }, []);\r\n\r\n  const handleDateStrategyModeChange = useCallback(\r\n    (index: number, mode: DateMode) => {\r\n      updateDateStrategies((current) =>\r\n        current.map((strategy, idx) => (idx === index ? { ...strategy, mode } : strategy)),\r\n      );\r\n    },\r\n    [updateDateStrategies],\r\n  );\r\n\r\n  const handleDateStrategyColumnsChange = useCallback(\r\n    (index: number, value: string) => {\r\n      const normalized = value\r\n        .split(',')\r\n        .map((column) => column.trim())\r\n        .filter(Boolean)\r\n        .sort((a, b) => a.localeCompare(b));\r\n      updateDateStrategies((current) =>\r\n        current.map((strategy, idx) => (idx === index ? { ...strategy, columns: normalized } : strategy)),\r\n      );\r\n    },\r\n    [updateDateStrategies],\r\n  );\r\n\r\n  const handleDateStrategyColumnToggle = useCallback(\r\n    (index: number, column: string) => {\r\n      const normalized = column.trim();\r\n      if (!normalized) {\r\n        return;\r\n      }\r\n      updateDateStrategies((current) =>\r\n        current.map((strategy, idx) => {\r\n          if (idx !== index) {\r\n            return strategy;\r\n          }\r\n          const hasColumn = strategy.columns.includes(normalized);\r\n          const nextColumns = hasColumn\r\n            ? strategy.columns.filter((entry) => entry !== normalized)\r\n            : [...strategy.columns, normalized];\r\n          nextColumns.sort((a, b) => a.localeCompare(b));\r\n          return {\r\n            ...strategy,\r\n            columns: nextColumns,\r\n          };\r\n        }),\r\n      );\r\n    },\r\n    [updateDateStrategies],\r\n  );\r\n\r\n  const handleDateStrategyAutoDetectToggle = useCallback(\r\n    (index: number, enabled: boolean) => {\r\n      updateDateStrategies((current) =>\r\n        current.map((strategy, idx) => (idx === index ? { ...strategy, autoDetect: enabled } : strategy)),\r\n      );\r\n    },\r\n    [updateDateStrategies],\r\n  );\r\n\r\n  const updateFeatureMathOperations = useCallback(\r\n    (updater: (operations: FeatureMathOperationDraft[]) => FeatureMathOperationDraft[]) => {\r\n      setConfigState((previous) => {\r\n        if (!isFeatureMathNode) {\r\n          return previous;\r\n        }\r\n        const baseConfig =\r\n          previous && typeof previous === 'object' && !Array.isArray(previous) ? { ...previous } : {};\r\n        const existingOperations = normalizeFeatureMathOperations(\r\n          Array.isArray((previous as any)?.operations) ? (previous as any).operations : [],\r\n        );\r\n        const nextOperations = updater(existingOperations);\r\n        baseConfig.operations = serializeFeatureMathOperations(nextOperations);\r\n        return baseConfig;\r\n      });\r\n    },\r\n    [isFeatureMathNode, setConfigState],\r\n  );\r\n\r\n  const handleAddFeatureMathOperation = useCallback(\r\n    (operationType: FeatureMathOperationType) => {\r\n      if (!isFeatureMathNode) {\r\n        return;\r\n      }\r\n      let createdOperationId = '';\r\n      updateFeatureMathOperations((current) => {\r\n        const existingIds = new Set(current.map((operation) => operation.id));\r\n        const draft = createFeatureMathOperation(operationType, existingIds);\r\n        createdOperationId = draft.id;\r\n        return [...current, draft];\r\n      });\r\n      if (createdOperationId) {\r\n        setCollapsedFeatureMath((previous) => {\r\n          const next = new Set(previous);\r\n          next.delete(createdOperationId);\r\n          return next;\r\n        });\r\n      }\r\n    },\r\n    [isFeatureMathNode, setCollapsedFeatureMath, updateFeatureMathOperations],\r\n  );\r\n\r\n  const handleDuplicateFeatureMathOperation = useCallback(\r\n    (operationId: string) => {\r\n      if (!isFeatureMathNode) {\r\n        return;\r\n      }\r\n      let createdOperationId = '';\r\n      updateFeatureMathOperations((current) => {\r\n        const index = current.findIndex((operation) => operation.id === operationId);\r\n        if (index === -1) {\r\n          return current;\r\n        }\r\n        const source = current[index];\r\n        const existingIds = new Set(current.map((operation) => operation.id));\r\n        const seed = createFeatureMathOperation(source.type, existingIds);\r\n        createdOperationId = seed.id;\r\n        const duplicate: FeatureMathOperationDraft = {\r\n          ...source,\r\n          id: seed.id,\r\n          inputColumns: [...source.inputColumns],\r\n          secondaryColumns: [...source.secondaryColumns],\r\n          constants: [...source.constants],\r\n          datetimeFeatures: [...source.datetimeFeatures],\r\n          outputColumn: source.outputColumn ? `${source.outputColumn}_copy` : '',\r\n        };\r\n        const next = [...current];\r\n        next.splice(index + 1, 0, duplicate);\r\n        return next;\r\n      });\r\n      if (createdOperationId) {\r\n        setCollapsedFeatureMath((previous) => {\r\n          const next = new Set(previous);\r\n          next.delete(createdOperationId);\r\n          return next;\r\n        });\r\n      }\r\n    },\r\n    [isFeatureMathNode, setCollapsedFeatureMath, updateFeatureMathOperations],\r\n  );\r\n\r\n  const handleRemoveFeatureMathOperation = useCallback(\r\n    (operationId: string) => {\r\n      if (!isFeatureMathNode) {\r\n        return;\r\n      }\r\n      updateFeatureMathOperations((current) => current.filter((operation) => operation.id !== operationId));\r\n      setCollapsedFeatureMath((previous) => {\r\n        const next = new Set(previous);\r\n        next.delete(operationId);\r\n        return next;\r\n      });\r\n    },\r\n    [isFeatureMathNode, setCollapsedFeatureMath, updateFeatureMathOperations],\r\n  );\r\n\r\n  const handleReorderFeatureMathOperation = useCallback(\r\n    (operationId: string, direction: 'up' | 'down') => {\r\n      if (!isFeatureMathNode) {\r\n        return;\r\n      }\r\n      updateFeatureMathOperations((current) => {\r\n        const index = current.findIndex((operation) => operation.id === operationId);\r\n        if (index === -1) {\r\n          return current;\r\n        }\r\n        const targetIndex = direction === 'up' ? index - 1 : index + 1;\r\n        if (targetIndex < 0 || targetIndex >= current.length) {\r\n          return current;\r\n        }\r\n        const next = [...current];\r\n        const [moved] = next.splice(index, 1);\r\n        next.splice(targetIndex, 0, moved);\r\n        return next;\r\n      });\r\n    },\r\n    [isFeatureMathNode, updateFeatureMathOperations],\r\n  );\r\n\r\n  const handleToggleFeatureMathOperation = useCallback((operationId: string) => {\r\n    setCollapsedFeatureMath((previous) => {\r\n      const next = new Set(previous);\r\n      if (next.has(operationId)) {\r\n        next.delete(operationId);\r\n      } else {\r\n        next.add(operationId);\r\n      }\r\n      return next;\r\n    });\r\n  }, []);\r\n\r\n  const handleFeatureMathOperationChange = useCallback(\r\n    (operationId: string, updates: Partial<FeatureMathOperationDraft>) => {\r\n      if (!isFeatureMathNode) {\r\n        return;\r\n      }\r\n      updateFeatureMathOperations((current) =>\r\n        current.map((operation) => {\r\n          if (operation.id !== operationId) {\r\n            return operation;\r\n          }\r\n\r\n          let next: FeatureMathOperationDraft = { ...operation };\r\n\r\n          if (updates.type) {\r\n            next.type = updates.type;\r\n          }\r\n\r\n          if (updates.method !== undefined) {\r\n            next.method = updates.method;\r\n          }\r\n\r\n          if (updates.inputColumns !== undefined) {\r\n            next.inputColumns = sanitizeStringList(updates.inputColumns);\r\n          }\r\n\r\n          if (updates.secondaryColumns !== undefined) {\r\n            next.secondaryColumns = sanitizeStringList(updates.secondaryColumns);\r\n          }\r\n\r\n          if (updates.constants !== undefined) {\r\n            next.constants = sanitizeConstantsList(updates.constants);\r\n          }\r\n\r\n          if (updates.outputColumn !== undefined) {\r\n            next.outputColumn = updates.outputColumn.trim();\r\n          }\r\n\r\n          if (updates.outputPrefix !== undefined) {\r\n            next.outputPrefix = updates.outputPrefix.trim();\r\n          }\r\n\r\n          if (updates.datetimeFeatures !== undefined) {\r\n            next.datetimeFeatures = sanitizeDatetimeFeaturesList(updates.datetimeFeatures);\r\n          }\r\n\r\n          if (updates.timezone !== undefined) {\r\n            next.timezone = sanitizeTimezoneValue(updates.timezone);\r\n          }\r\n\r\n          if (updates.fillna !== undefined) {\r\n            next.fillna = sanitizeNumberValue(updates.fillna);\r\n          }\r\n\r\n          if (updates.roundDigits !== undefined) {\r\n            next.roundDigits = sanitizeIntegerValue(updates.roundDigits);\r\n          }\r\n\r\n          if (updates.normalize !== undefined) {\r\n            next.normalize = updates.normalize;\r\n          }\r\n\r\n          if (updates.epsilon !== undefined) {\r\n            next.epsilon = sanitizeNumberValue(updates.epsilon);\r\n          }\r\n\r\n          if (updates.allowOverwrite !== undefined) {\r\n            next.allowOverwrite = updates.allowOverwrite;\r\n          }\r\n\r\n          if (updates.description !== undefined) {\r\n            const trimmed = typeof updates.description === 'string' ? updates.description.trim() : '';\r\n            next.description = trimmed ? trimmed : undefined;\r\n          }\r\n\r\n          const resolvedType = next.type;\r\n          const methodChoices = getMethodOptions(resolvedType);\r\n          if (methodChoices.length) {\r\n            const allowed = new Set(methodChoices.map((option) => option.value));\r\n            if (!allowed.has(next.method)) {\r\n              next.method = methodChoices[0].value;\r\n            }\r\n          } else if (resolvedType === 'ratio') {\r\n            next.method = 'ratio';\r\n          } else if (resolvedType === 'datetime_extract') {\r\n            next.method = 'datetime_extract';\r\n          }\r\n\r\n          next.inputColumns = sanitizeStringList(next.inputColumns);\r\n          if (resolvedType === 'ratio' || resolvedType === 'similarity') {\r\n            next.secondaryColumns = sanitizeStringList(next.secondaryColumns);\r\n          } else {\r\n            next.secondaryColumns = [];\r\n          }\r\n\r\n          next.constants = sanitizeConstantsList(next.constants);\r\n          next.fillna = sanitizeNumberValue(next.fillna);\r\n          next.roundDigits = sanitizeIntegerValue(next.roundDigits);\r\n          next.epsilon = sanitizeNumberValue(next.epsilon);\r\n\r\n          if (resolvedType === 'datetime_extract') {\r\n            next.datetimeFeatures = sanitizeDatetimeFeaturesList(next.datetimeFeatures);\r\n            next.timezone = sanitizeTimezoneValue(next.timezone);\r\n          } else {\r\n            next.datetimeFeatures = [];\r\n            next.timezone = 'UTC';\r\n          }\r\n\r\n          if (resolvedType !== 'similarity') {\r\n            next.normalize = false;\r\n          } else {\r\n            next.normalize = Boolean(next.normalize);\r\n          }\r\n\r\n          if (typeof next.allowOverwrite !== 'boolean') {\r\n            next.allowOverwrite = null;\r\n          }\r\n\r\n          next.outputColumn = next.outputColumn.trim();\r\n          next.outputPrefix = next.outputPrefix.trim();\r\n\r\n          return next;\r\n        }),\r\n      );\r\n    },\r\n    [isFeatureMathNode, updateFeatureMathOperations],\r\n  );\r\n\r\n  const handleAddAliasStrategy = useCallback(() => {\r\n    if (!isReplaceAliasesNode) {\r\n      return;\r\n    }\r\n    const nextIndex = aliasStrategyCount;\r\n    updateAliasStrategies((current) => {\r\n      const assigned = new Set<string>();\r\n      current.forEach((strategy) => {\r\n        strategy.columns.forEach((column) => {\r\n          const normalized = column.trim();\r\n          if (normalized) {\r\n            assigned.add(normalized);\r\n          }\r\n        });\r\n      });\r\n      const suggested = aliasColumnSummary.recommendedColumns.find((column) => !assigned.has(column));\r\n      const defaultMode = current.length\r\n        ? current[current.length - 1].mode\r\n        : ALIAS_MODE_OPTIONS[0]?.value ?? DEFAULT_ALIAS_MODE;\r\n      const nextStrategy: AliasStrategyConfig = {\r\n        mode: defaultMode,\r\n        columns: suggested ? [suggested] : [],\r\n        autoDetect: !suggested,\r\n      };\r\n      return [...current, nextStrategy];\r\n    });\r\n    setCollapsedStrategies((previous) => {\r\n      const next = new Set(previous);\r\n      next.delete(nextIndex);\r\n      return next;\r\n    });\r\n  }, [aliasColumnSummary.recommendedColumns, aliasStrategyCount, isReplaceAliasesNode, setCollapsedStrategies, updateAliasStrategies]);\r\n\r\n  const handleRemoveAliasStrategy = useCallback(\r\n    (index: number) => {\r\n      updateAliasStrategies((current) => current.filter((_, idx) => idx !== index));\r\n      setCollapsedStrategies((previous) => {\r\n        const next = new Set<number>();\r\n        previous.forEach((value) => {\r\n          if (value === index) {\r\n            return;\r\n          }\r\n          next.add(value > index ? value - 1 : value);\r\n        });\r\n        return next;\r\n      });\r\n    },\r\n    [setCollapsedStrategies, updateAliasStrategies],\r\n  );\r\n\r\n  const toggleAliasStrategySection = useCallback((index: number) => {\r\n    setCollapsedStrategies((previous) => {\r\n      const next = new Set(previous);\r\n      if (next.has(index)) {\r\n        next.delete(index);\r\n      } else {\r\n        next.add(index);\r\n      }\r\n      return next;\r\n    });\r\n  }, []);\r\n\r\n  const handleAliasModeChange = useCallback(\r\n    (index: number, mode: AliasMode) => {\r\n      updateAliasStrategies((current) =>\r\n        current.map((strategy, idx) => (idx === index ? { ...strategy, mode } : strategy)),\r\n      );\r\n    },\r\n    [updateAliasStrategies],\r\n  );\r\n\r\n  const handleAliasColumnToggle = useCallback(\r\n    (index: number, column: string) => {\r\n      const normalized = column.trim();\r\n      if (!normalized) {\r\n        return;\r\n      }\r\n      updateAliasStrategies((current) =>\r\n        current.map((strategy, idx) => {\r\n          if (idx !== index) {\r\n            return strategy;\r\n          }\r\n          const hasColumn = strategy.columns.includes(normalized);\r\n          const nextColumns = hasColumn\r\n            ? strategy.columns.filter((entry) => entry !== normalized)\r\n            : [...strategy.columns, normalized];\r\n          nextColumns.sort((a, b) => a.localeCompare(b));\r\n          return {\r\n            ...strategy,\r\n            columns: nextColumns,\r\n          };\r\n        }),\r\n      );\r\n    },\r\n    [updateAliasStrategies],\r\n  );\r\n\r\n  const handleAliasColumnsChange = useCallback(\r\n    (index: number, value: string) => {\r\n      const entries = value\r\n        .split(',')\r\n        .map((column) => column.trim())\r\n        .filter(Boolean);\r\n      const nextColumns = Array.from(new Set(entries)).sort((a, b) => a.localeCompare(b));\r\n      updateAliasStrategies((current) =>\r\n        current.map((strategy, idx) => (idx === index ? { ...strategy, columns: nextColumns } : strategy)),\r\n      );\r\n    },\r\n    [updateAliasStrategies],\r\n  );\r\n\r\n  const handleAliasAutoDetectToggle = useCallback(\r\n    (index: number, enabled: boolean) => {\r\n      updateAliasStrategies((current) =>\r\n        current.map((strategy, idx) => (idx === index ? { ...strategy, autoDetect: enabled } : strategy)),\r\n      );\r\n    },\r\n    [updateAliasStrategies],\r\n  );\r\n\r\n  const renderMultiSelectField = useCallback(\r\n    (parameter: FeatureNodeParameter) => {\r\n      const requiresRecommendations = parameter?.source?.type === 'drop_column_recommendations';\r\n      const isCatalogOnly = !requiresRecommendations;\r\n      const isCatalogLoading = isCatalogOnly && previewState.status === 'loading';\r\n      const isBinningColumnsParameter = isBinningNode && parameter.name === 'columns';\r\n      const isScalingColumnsParameter = isScalingNode && parameter.name === 'columns';\r\n\r\n      const binningCandidateColumns = (() => {\r\n        if (!isBinningColumnsParameter) {\r\n          return [] as string[];\r\n        }\r\n        const merged = [...binningAllNumericColumns];\r\n        if (binningRecommendedColumnSet.size > 0) {\r\n          binningRecommendedColumnSet.forEach((column) => {\r\n            if (!merged.includes(column)) {\r\n              merged.push(column);\r\n            }\r\n          });\r\n        }\r\n        selectedColumns.forEach((column) => {\r\n          if (column && !merged.includes(column)) {\r\n            merged.push(column);\r\n          }\r\n        });\r\n        return merged;\r\n      })();\r\n\r\n      const displayedColumns = (() => {\r\n        if (isBinningColumnsParameter) {\r\n          return binningCandidateColumns;\r\n        }\r\n        if (isScalingColumnsParameter) {\r\n          return availableColumns.filter((column) => !scalingExcludedColumns.has(column));\r\n        }\r\n        return availableColumns;\r\n      })();\r\n\r\n      const renderedColumnOptions = (() => {\r\n        if (isBinningColumnsParameter) {\r\n          if (!normalizedColumnSearch) {\r\n            return binningCandidateColumns;\r\n          }\r\n          return binningCandidateColumns.filter((column) =>\r\n            column.toLowerCase().includes(normalizedColumnSearch)\r\n          );\r\n        }\r\n        if (isScalingColumnsParameter) {\r\n          return filteredColumnOptions.filter((column) => !scalingExcludedColumns.has(column));\r\n        }\r\n        return filteredColumnOptions;\r\n      })();\r\n\r\n      const selectionDisplayCount = isBinningColumnsParameter\r\n        ? selectedColumns.filter((column) => !binningExcludedColumns.has(column)).length\r\n        : isScalingColumnsParameter\r\n          ? selectedColumns.filter((column) => !scalingExcludedColumns.has(column)).length\r\n          : selectionCount;\r\n\r\n      const allColumnsSelected =\r\n        isCatalogOnly && displayedColumns.length > 0 && selectionDisplayCount >= displayedColumns.length;\r\n      const showMissingMetric = requiresRecommendations || isImputerNode;\r\n      const availableColumnSet = new Set(displayedColumns);\r\n      const suggestionSummaries =\r\n        isCastNode && isCatalogOnly\r\n          ? Object.entries(columnSuggestions)\r\n              .filter(([name, suggestions]) => availableColumnSet.has(name) && suggestions.length > 0)\r\n              .map(([name, suggestions]) => `${name}: ${suggestions.join(', ')}`)\r\n              .slice(0, 4)\r\n          : [];\r\n      const binningExcludedPreview = isBinningColumnsParameter ? Array.from(binningExcludedColumns).slice(0, 4) : [];\r\n      const scalingExcludedPreview = isScalingColumnsParameter ? Array.from(scalingExcludedColumns).slice(0, 4) : [];\r\n      const hasBackendRecommendations = isBinningColumnsParameter && binningRecommendedColumnSet.size > 0;\r\n      const canAddRecommendedColumns = hasBackendRecommendations\r\n        ? Array.from(binningRecommendedColumnSet).some((column) => !selectedColumns.includes(column))\r\n        : false;\r\n\r\n\r\n      return (\r\n        <div\r\n          key={parameter.name}\r\n          className=\"canvas-modal__parameter-field canvas-modal__parameter-field--multiselect\"\r\n        >\r\n          <div className=\"canvas-modal__parameter-label\">\r\n            <span>{parameter.label}</span>\r\n            {requiresRecommendations && sourceId && (\r\n              <div className=\"canvas-modal__parameter-actions\">\r\n                <button\r\n                  type=\"button\"\r\n                  className=\"btn btn-outline-secondary\"\r\n                  onClick={refreshRecommendations}\r\n                  disabled={isFetchingRecommendations || !hasReachableSource}\r\n                >\r\n                  {isFetchingRecommendations ? 'Refreshing' : 'Refresh suggestions'}\r\n                </button>\r\n              </div>\r\n            )}\r\n          </div>\r\n          {parameter.description && (\r\n            <p className=\"canvas-modal__parameter-description\">{parameter.description}</p>\r\n          )}\r\n\r\n          {suggestionSummaries.length > 0 && (\r\n            <p className=\"canvas-modal__note\">\r\n              Smart suggestions: {suggestionSummaries.join('; ')}\r\n            </p>\r\n          )}\r\n\r\n          {isBinningColumnsParameter && binningExcludedColumns.size > 0 && (\r\n            <p className=\"canvas-modal__note\">\r\n              Skipping {binningExcludedColumns.size} non-numeric column\r\n              {binningExcludedColumns.size === 1 ? '' : 's'}\r\n              {binningExcludedPreview.length\r\n                ? ` (examples: ${binningExcludedPreview.join(', ')}${binningExcludedColumns.size > binningExcludedPreview.length ? ', ' : ''})`\r\n                : ''}\r\n               binning only supports numeric inputs.\r\n            </p>\r\n          )}\r\n\r\n          {isScalingColumnsParameter && scalingExcludedColumns.size > 0 && (\r\n            <p className=\"canvas-modal__note\">\r\n              Skipping {scalingExcludedColumns.size} non-numeric column\r\n              {scalingExcludedColumns.size === 1 ? '' : 's'}\r\n              {scalingExcludedPreview.length\r\n                ? ` (examples: ${scalingExcludedPreview.join(', ')}${scalingExcludedColumns.size > scalingExcludedPreview.length ? ', ' : ''})`\r\n                : ''}\r\n               scaling only supports numeric inputs.\r\n            </p>\r\n          )}\r\n\r\n          {requiresRecommendations && (\r\n            <DropMissingColumnsSection\r\n              sourceId={sourceId}\r\n              availableFilters={availableFilters}\r\n              activeFilterId={activeFilterId}\r\n              setActiveFilterId={setActiveFilterId}\r\n              recommendations={recommendations}\r\n              filteredRecommendations={filteredRecommendations}\r\n              isFetchingRecommendations={isFetchingRecommendations}\r\n              recommendationsError={recommendationsError}\r\n              relativeGeneratedAt={relativeGeneratedAt}\r\n              formatSignalName={formatSignalName}\r\n              formatMissingPercentage={formatMissingPercentage}\r\n              getPriorityClass={getPriorityClass}\r\n              getPriorityLabel={getPriorityLabel}\r\n              handleToggleColumn={handleToggleColumn}\r\n              selectedColumns={selectedColumns}\r\n            />\r\n          )}\r\n\r\n          <div className=\"canvas-modal__note\">\r\n            Selected columns: <strong>{selectionDisplayCount}</strong>\r\n          </div>\r\n\r\n          {selectionDisplayCount > 0 && (\r\n            <div className=\"canvas-modal__selection-summary\">\r\n              <h4>Selected columns</h4>\r\n              <div className=\"canvas-modal__selection-chips\">\r\n                {selectedColumns.map((column) => (\r\n                  <span key={column} className=\"canvas-modal__selection-chip\">\r\n                    {column}\r\n                    <button\r\n                      type=\"button\"\r\n                      onClick={() => handleRemoveColumn(column)}\r\n                      aria-label={`Remove ${column}`}\r\n                    >\r\n                      \r\n                    </button>\r\n                  </span>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          <div className=\"canvas-modal__multi-select-actions\">\r\n            {requiresRecommendations && (\r\n              <button\r\n                type=\"button\"\r\n                className=\"btn btn-outline-secondary\"\r\n                onClick={handleApplyAllRecommended}\r\n                disabled={!recommendations.length}\r\n              >\r\n                Use all recommendations\r\n              </button>\r\n            )}\r\n            {hasBackendRecommendations && (\r\n              <button\r\n                type=\"button\"\r\n                className=\"btn btn-outline-secondary\"\r\n                onClick={() => handleBinningApplyColumns(binningRecommendedColumnSet)}\r\n                disabled={!canAddRecommendedColumns}\r\n              >\r\n                Add recommended columns\r\n              </button>\r\n            )}\r\n            {isCatalogOnly && (\r\n              <button\r\n                type=\"button\"\r\n                className=\"btn btn-outline-secondary\"\r\n                onClick={handleSelectAllColumns}\r\n                disabled={!displayedColumns.length || allColumnsSelected}\r\n              >\r\n                Select all columns\r\n              </button>\r\n            )}\r\n            <button\r\n              type=\"button\"\r\n              className=\"btn btn-outline-secondary\"\r\n              onClick={handleClearColumns}\r\n              disabled={!selectionCount}\r\n            >\r\n              Clear selection\r\n            </button>\r\n          </div>\r\n\r\n          <div className=\"canvas-modal__all-columns\">\r\n            <h4>All columns</h4>\r\n            <div className=\"canvas-modal__all-columns-search\">\r\n              <input\r\n                type=\"text\"\r\n                className=\"canvas-modal__custom-input\"\r\n                value={columnSearch}\r\n                onChange={(event) => setColumnSearch(event.target.value)}\r\n                placeholder=\"Search columns\"\r\n                aria-label=\"Search columns\"\r\n              />\r\n            </div>\r\n            <div className=\"canvas-modal__all-columns-list\" role=\"group\" aria-label=\"All columns\">\r\n              {renderedColumnOptions.length ? (\r\n                renderedColumnOptions.map((column) => {\r\n                  const isSelected = selectedColumns.includes(column);\r\n                  const missingValue = Object.prototype.hasOwnProperty.call(columnMissingMap, column)\r\n                    ? columnMissingMap[column]\r\n                    : undefined;\r\n                  const missingLabel = formatMissingPercentage(\r\n                    typeof missingValue === 'number' ? missingValue : null\r\n                  );\r\n                  const columnType = columnTypeMap[column] ?? null;\r\n                  const columnSuggestionList = columnSuggestions[column] ?? [];\r\n                  const rangeMeta: { min: number | null; max: number | null; distinct?: number | null } | undefined =\r\n                    isBinningColumnsParameter\r\n                      ? binningColumnPreviewMap[column]\r\n                      : undefined;\r\n                  const hasRangeMeta = Boolean(\r\n                    rangeMeta &&\r\n                      ((rangeMeta.min !== null && rangeMeta.min !== undefined) ||\r\n                        (rangeMeta.max !== null && rangeMeta.max !== undefined))\r\n                  );\r\n                  const distinctCount = isBinningColumnsParameter ? rangeMeta?.distinct ?? null : null;\r\n                  const hasDistinctMeta =\r\n                    isBinningColumnsParameter && distinctCount !== null && Number.isFinite(distinctCount);\r\n                  const distinctDisplayValue = hasDistinctMeta ? (distinctCount as number) : null;\r\n                  const showTypeMeta = !isBinningColumnsParameter;\r\n                  const shouldShowMetaRow = showTypeMeta || showMissingMetric || hasRangeMeta || hasDistinctMeta;\r\n                  const hasSuggestionHints = showTypeMeta && columnSuggestionList.length > 0;\r\n                  return (\r\n                    <label\r\n                      key={column}\r\n                      className={`canvas-modal__checkbox-item canvas-modal__checkbox-item--compact${\r\n                        isSelected ? ' canvas-modal__checkbox-item--selected' : ''\r\n                      }`}\r\n                    >\r\n                      <input type=\"checkbox\" checked={isSelected} onChange={() => handleToggleColumn(column)} />\r\n                      <div className=\"canvas-modal__column-option\">\r\n                        <span className=\"canvas-modal__column-option-name\">{column}</span>\r\n                        {shouldShowMetaRow && (\r\n                          <div className=\"canvas-modal__column-option-meta\">\r\n                            {showTypeMeta && (\r\n                              <span className=\"canvas-modal__column-option-metric\">\r\n                                Type: {formatColumnType(columnType)}\r\n                              </span>\r\n                            )}\r\n                            {showMissingMetric && (\r\n                              <span className=\"canvas-modal__column-option-metric\">Missing: {missingLabel}</span>\r\n                            )}\r\n                            {hasRangeMeta && (\r\n                              <span className=\"canvas-modal__column-option-metric\">\r\n                                {isBinningColumnsParameter ? 'Sample range' : 'Range'}:{' '}\r\n                                {rangeMeta && rangeMeta.min !== null && rangeMeta.min !== undefined\r\n                                  ? formatNumericStat(rangeMeta.min)\r\n                                  : ''}{' '}\r\n                                {' '}\r\n                                {rangeMeta && rangeMeta.max !== null && rangeMeta.max !== undefined\r\n                                  ? formatNumericStat(rangeMeta.max)\r\n                                  : ''}\r\n                              </span>\r\n                            )}\r\n                            {hasDistinctMeta && distinctDisplayValue !== null && (\r\n                              <span className=\"canvas-modal__column-option-metric\">\r\n                                Distinct sample values: {formatMetricValue(distinctDisplayValue)}\r\n                              </span>\r\n                            )}\r\n                          </div>\r\n                        )}\r\n                        {hasSuggestionHints && (\r\n                          <span className=\"canvas-modal__column-option-hint\">\r\n                            Suggested: {columnSuggestionList.join(', ')}\r\n                          </span>\r\n                        )}\r\n                      </div>\r\n                    </label>\r\n                  );\r\n                })\r\n              ) : (\r\n                <p className=\"canvas-modal__note\">\r\n                  {availableColumns.length\r\n                    ? isBinningColumnsParameter && displayedColumns.length === 0\r\n                      ? 'No eligible columns for binning (non-numeric fields are skipped).'\r\n                      : 'No columns match your search.'\r\n                    : isCatalogLoading\r\n                      ? 'Loading column catalog'\r\n                      : !sourceId\r\n                        ? 'Select a dataset to load column catalog.'\r\n                        : !hasReachableSource\r\n                          ? 'Connect this step to an upstream output to load column catalog.'\r\n                          : 'Column catalog unavailable for this dataset.'}\r\n                </p>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      );\r\n    },\r\n    [\r\n      activeFilterId,\r\n      availableColumns,\r\n      availableFilters,\r\n      columnMissingMap,\r\n      columnSearch,\r\n      columnSuggestions,\r\n      columnTypeMap,\r\n  binningAllNumericColumns,\r\n  numericExcludedColumns,\r\n      filteredColumnOptions,\r\n      filteredRecommendations,\r\n      formatSignalName,\r\n      handleApplyAllRecommended,\r\n  handleBinningApplyColumns,\r\n      handleClearColumns,\r\n      handleRemoveColumn,\r\n      handleSelectAllColumns,\r\n      handleToggleColumn,\r\n      hasReachableSource,\r\n      isCastNode,\r\n      isFetchingRecommendations,\r\n      isBinningNode,\r\n  binningRecommendedColumnSet,\r\n      binningColumnPreviewMap,\r\n      isImputerNode,\r\n      isScalingNode,\r\n      binningExcludedColumns,\r\n      previewState.status,\r\n      recommendations,\r\n      recommendationsError,\r\n      relativeGeneratedAt,\r\n      selectedColumns,\r\n      selectionCount,\r\n      setActiveFilterId,\r\n      setColumnSearch,\r\n      scalingExcludedColumns,\r\n      showRecommendations,\r\n      sourceId,\r\n      refreshRecommendations,\r\n      normalizedColumnSearch,\r\n    ]\r\n  );\r\n\r\n  const renderParameterField = useCallback(\r\n    (parameter: FeatureNodeParameter) => {\r\n      if (!parameter?.name) {\r\n        return null;\r\n      }\r\n\r\n      if (parameter.type === 'multi_select') {\r\n        return renderMultiSelectField(parameter);\r\n      }\r\n\r\n      if (parameter.type === 'number') {\r\n        const inputId = `node-${node.id}-${parameter.name}`;\r\n        const value = configState?.[parameter.name];\r\n        const numericValue = typeof value === 'number' ? value : value ?? '';\r\n\r\n        return (\r\n          <div key={parameter.name} className=\"canvas-modal__parameter-field\">\r\n            <label htmlFor={inputId} className=\"canvas-modal__parameter-label\">\r\n              <span>{parameter.label}</span>\r\n              {parameter.unit && <span className=\"canvas-modal__parameter-unit\">{parameter.unit}</span>}\r\n            </label>\r\n            {parameter.description && (\r\n              <p className=\"canvas-modal__parameter-description\">{parameter.description}</p>\r\n            )}\r\n            <div className=\"canvas-modal__parameter-control\">\r\n              <input\r\n                id={inputId}\r\n                type=\"number\"\r\n                className=\"canvas-modal__input\"\r\n                value={numericValue}\r\n                min={parameter.min !== undefined ? parameter.min : undefined}\r\n                max={parameter.max !== undefined ? parameter.max : undefined}\r\n                step={parameter.step !== undefined ? parameter.step : 'any'}\r\n                onChange={(event) => handleNumberChange(parameter.name, event.target.value)}\r\n              />\r\n              {parameter.unit && (\r\n                <span className=\"canvas-modal__parameter-unit\">{parameter.unit}</span>\r\n              )}\r\n            </div>\r\n            {thresholdParameterName === parameter.name &&\r\n              normalizedSuggestedThreshold !== null &&\r\n              showRecommendations && (\r\n                <div className=\"canvas-modal__note\">\r\n                  Suggested threshold from EDA:{' '}\r\n                  <strong>{formatMissingPercentage(normalizedSuggestedThreshold)}</strong>\r\n                  <button\r\n                    type=\"button\"\r\n                    className=\"btn btn-outline-secondary\"\r\n                    onClick={handleApplySuggestedThreshold}\r\n                    disabled={!canApplySuggestedThreshold}\r\n                  >\r\n                    {thresholdMatchesSuggestion ? 'Applied' : 'Apply suggestion'}\r\n                  </button>\r\n                </div>\r\n              )}\r\n          </div>\r\n        );\r\n      }\r\n\r\n      if (parameter.type === 'boolean') {\r\n        const inputId = `node-${node.id}-${parameter.name}`;\r\n        const checked = Boolean(configState?.[parameter.name]);\r\n\r\n        return (\r\n          <div key={parameter.name} className=\"canvas-modal__parameter-field\">\r\n            <div className=\"canvas-modal__parameter-label\">\r\n              <label htmlFor={inputId}>{parameter.label}</label>\r\n            </div>\r\n            {parameter.description && (\r\n              <p className=\"canvas-modal__parameter-description\">{parameter.description}</p>\r\n            )}\r\n            <label className=\"canvas-modal__boolean-control\">\r\n              <input\r\n                id={inputId}\r\n                type=\"checkbox\"\r\n                checked={checked}\r\n                onChange={(event) => handleBooleanChange(parameter.name, event.target.checked)}\r\n              />\r\n              <span>{checked ? 'Enabled' : 'Disabled'}</span>\r\n            </label>\r\n          </div>\r\n        );\r\n      }\r\n\r\n      if (parameter.type === 'select') {\r\n        const inputId = `node-${node.id}-${parameter.name}`;\r\n        const options = Array.isArray(parameter.options) ? parameter.options : [];\r\n        const currentValue = configState?.[parameter.name];\r\n        const defaultValue =\r\n          typeof parameter.default === 'string'\r\n            ? parameter.default\r\n            : options.find((option) => option && typeof option.value === 'string')?.value ?? '';\r\n        const value =\r\n          typeof currentValue === 'string' && currentValue.trim().length\r\n            ? currentValue\r\n            : defaultValue;\r\n\r\n        return (\r\n          <div key={parameter.name} className=\"canvas-modal__parameter-field\">\r\n            <label htmlFor={inputId} className=\"canvas-modal__parameter-label\">\r\n              {parameter.label}\r\n            </label>\r\n            {parameter.description && (\r\n              <p className=\"canvas-modal__parameter-description\">{parameter.description}</p>\r\n            )}\r\n            <select\r\n              id={inputId}\r\n              className=\"canvas-modal__input\"\r\n              value={value}\r\n              onChange={(event) => handleTextChange(parameter.name, event.target.value)}\r\n            >\r\n              {options.map((option) => (\r\n                <option key={option.value} value={option.value} title={option.description ?? undefined}>\r\n                  {option.label ?? option.value}\r\n                </option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n        );\r\n      }\r\n\r\n      if (parameter.type === 'textarea') {\r\n        const inputId = `node-${node.id}-${parameter.name}`;\r\n        \r\n        // Special handling for hyperparameters - convert JSON to simple format\r\n        if (parameter.name === 'hyperparameters') {\r\n          let displayValue = '';\r\n          let internalValue = configState?.[parameter.name];\r\n          \r\n          // Convert JSON to simple key: value format for display\r\n          if (typeof internalValue === 'string' && internalValue.trim()) {\r\n            try {\r\n              const parsed = JSON.parse(internalValue);\r\n              if (parsed && typeof parsed === 'object' && !Array.isArray(parsed)) {\r\n                displayValue = Object.entries(parsed)\r\n                  .map(([key, value]) => `${key}: ${JSON.stringify(value)}`)\r\n                  .join('\\n');\r\n              } else {\r\n                displayValue = internalValue;\r\n              }\r\n            } catch {\r\n              displayValue = internalValue;\r\n            }\r\n          } else if (internalValue && typeof internalValue === 'object' && !Array.isArray(internalValue)) {\r\n            displayValue = Object.entries(internalValue)\r\n              .map(([key, value]) => `${key}: ${JSON.stringify(value)}`)\r\n              .join('\\n');\r\n          }\r\n\r\n          return (\r\n            <div key={parameter.name} className=\"canvas-modal__parameter-field\">\r\n              <label htmlFor={inputId} className=\"canvas-modal__parameter-label\">\r\n                {parameter.label}\r\n              </label>\r\n              <p className=\"canvas-modal__parameter-description\">\r\n                {parameter.description || 'Enter parameters as key: value pairs (one per line)'}\r\n              </p>\r\n              <textarea\r\n                id={inputId}\r\n                className=\"canvas-modal__input canvas-modal__input--wide\"\r\n                value={displayValue}\r\n                placeholder={'n_estimators: 100\\nmax_depth: 10\\nlearning_rate: 0.01'}\r\n                onChange={(event) => {\r\n                  const text = event.target.value;\r\n                  // Convert simple format to JSON\r\n                  const lines = text.split('\\n').filter(line => line.trim());\r\n                  const params: Record<string, any> = {};\r\n                  \r\n                  for (const line of lines) {\r\n                    const colonIndex = line.indexOf(':');\r\n                    if (colonIndex === -1) continue;\r\n                    \r\n                    const key = line.substring(0, colonIndex).trim();\r\n                    const valueStr = line.substring(colonIndex + 1).trim();\r\n                    \r\n                    if (!key) continue;\r\n                    \r\n                    // Try to parse the value\r\n                    try {\r\n                      params[key] = JSON.parse(valueStr);\r\n                    } catch {\r\n                      // If parse fails, treat as string\r\n                      params[key] = valueStr;\r\n                    }\r\n                  }\r\n                  \r\n                  // Store as JSON string\r\n                  handleTextChange(parameter.name, JSON.stringify(params, null, 2));\r\n                }}\r\n                rows={6}\r\n              />\r\n            </div>\r\n          );\r\n        }\r\n\r\n        // Default textarea handling for non-hyperparameters\r\n        const value = typeof configState?.[parameter.name] === 'string' ? configState?.[parameter.name] : '';\r\n\r\n        return (\r\n          <div key={parameter.name} className=\"canvas-modal__parameter-field\">\r\n            <label htmlFor={inputId} className=\"canvas-modal__parameter-label\">\r\n              {parameter.label}\r\n            </label>\r\n            {parameter.description && (\r\n              <p className=\"canvas-modal__parameter-description\">{parameter.description}</p>\r\n            )}\r\n            <textarea\r\n              id={inputId}\r\n              className=\"canvas-modal__input canvas-modal__input--wide\"\r\n              value={value}\r\n              placeholder={parameter.placeholder ?? ''}\r\n              onChange={(event) => handleTextChange(parameter.name, event.target.value)}\r\n              rows={4}\r\n            />\r\n          </div>\r\n        );\r\n      }\r\n\r\n      const inputId = `node-${node.id}-${parameter.name}`;\r\n      const value = configState?.[parameter.name] ?? '';\r\n\r\n      return (\r\n        <div key={parameter.name} className=\"canvas-modal__parameter-field\">\r\n          <label htmlFor={inputId} className=\"canvas-modal__parameter-label\">\r\n            {parameter.label}\r\n          </label>\r\n          {parameter.description && (\r\n            <p className=\"canvas-modal__parameter-description\">{parameter.description}</p>\r\n          )}\r\n          <input\r\n            id={inputId}\r\n            type=\"text\"\r\n            className=\"canvas-modal__input canvas-modal__input--wide\"\r\n            value={value}\r\n            placeholder={parameter.placeholder ?? ''}\r\n            onChange={(event) => handleTextChange(parameter.name, event.target.value)}\r\n          />\r\n        </div>\r\n      );\r\n    },\r\n    [\r\n      canApplySuggestedThreshold,\r\n      configState,\r\n      handleApplySuggestedThreshold,\r\n      handleBooleanChange,\r\n      handleNumberChange,\r\n      handleTextChange,\r\n      node.id,\r\n      normalizedSuggestedThreshold,\r\n      renderMultiSelectField,\r\n      showRecommendations,\r\n      thresholdMatchesSuggestion,\r\n      thresholdParameterName,\r\n    ]\r\n  );\r\n\r\n  const handleRemoveDuplicatesKeepChange = useCallback(\r\n    (value: KeepStrategy) => {\r\n      setConfigState((previous) => ({\r\n        ...previous,\r\n        keep: value,\r\n      }));\r\n    },\r\n    [setConfigState],\r\n  );\r\n\r\n  return (\r\n    <div className=\"canvas-modal\" role=\"dialog\" aria-modal=\"true\" aria-labelledby=\"node-settings-title\">\r\n      <div className=\"canvas-modal__backdrop\" onClick={onClose} />\r\n      <div className=\"canvas-modal__panel\">\r\n        <NodeSettingsHeader\r\n          title={title}\r\n          isDataset={datasetBadge}\r\n          onClose={onClose}\r\n          canResetNode={canResetNode}\r\n          onResetNode={handleResetNode}\r\n        />\r\n\r\n        <div className=\"canvas-modal__body\">\r\n          {connectionInfo && (\r\n            <section className=\"canvas-modal__section\">\r\n              <div className=\"canvas-modal__section-header\">\r\n                <h3>Connection requirements</h3>\r\n              </div>\r\n              <p\r\n                className={\r\n                  connectionReady\r\n                    ? 'canvas-modal__note'\r\n                    : 'canvas-modal__note canvas-modal__note--warning'\r\n                }\r\n              >\r\n                <strong>{connectionReady ? 'Ready to execute.' : 'Missing required connections.'}</strong>{' '}\r\n                {connectionReady\r\n                  ? 'All required inputs are connected; you can continue configuring this node.'\r\n                  : 'Connect the required inputs listed below before running training or evaluation workflows.'}\r\n              </p>\r\n              {connectionInfo.inputs && connectionInfo.inputs.length > 0 && (\r\n                <div className=\"canvas-modal__note\">\r\n                  <strong>Inputs</strong>\r\n                  <ul>\r\n                    {connectionInfo.inputs.map((handle) => {\r\n                      const isConnected = connectedHandleKeys.has(handle.key);\r\n                      const isRequired = handle.required !== false;\r\n                      return (\r\n                        <li key={`inputs-${handle.key}`}>\r\n                          <span>{handle.label}</span>\r\n                          <span>{' - '}</span>\r\n                          <span>{isConnected ? 'Connected' : isRequired ? 'Missing' : 'Optional'}</span>\r\n                        </li>\r\n                      );\r\n                    })}\r\n                  </ul>\r\n                </div>\r\n              )}\r\n              {connectionInfo.outputs && connectionInfo.outputs.length > 0 && (\r\n                <div className=\"canvas-modal__note\">\r\n                  <strong>Outputs</strong>\r\n                  <ul>\r\n                    {connectionInfo.outputs.map((handle) => {\r\n                      const isConnected = connectedOutputHandleKeys.has(handle.key);\r\n                      const isRequired = handle.required !== false;\r\n                      return (\r\n                        <li key={`outputs-${handle.key}`}>\r\n                          <span>{handle.label}</span>\r\n                          <span>{' - '}</span>\r\n                          <span>{isConnected ? 'Connected' : isRequired ? 'Unlinked' : 'Optional'}</span>\r\n                        </li>\r\n                      );\r\n                    })}\r\n                  </ul>\r\n                </div>\r\n              )}\r\n            </section>\r\n          )}\r\n          {showDropMissingRowsSection && (\r\n            <DropMissingRowsSection\r\n              thresholdParameter={thresholdParameter ?? null}\r\n              dropIfAnyParameter={dropRowsAnyParameter}\r\n              renderParameterField={renderParameterField}\r\n            />\r\n          )}\r\n          {dropColumnParameter && (\r\n            <section className=\"canvas-modal__section\">\r\n              <div className=\"canvas-modal__section-header\">\r\n                <h3>Missingness recommendations</h3>\r\n              </div>\r\n              {thresholdParameter && renderParameterField(thresholdParameter)}\r\n              {renderMultiSelectField(dropColumnParameter)}\r\n            </section>\r\n          )}\r\n          {isMissingIndicatorNode && (\r\n            <>\r\n              <MissingIndicatorInsightsSection\r\n                suffix={activeFlagSuffix}\r\n                insights={missingIndicatorInsights}\r\n                formatMissingPercentage={formatMissingPercentage}\r\n              />\r\n              {(missingIndicatorColumnsParameter || missingIndicatorSuffixParameter) && (\r\n                <section className=\"canvas-modal__section\">\r\n                  <div className=\"canvas-modal__section-header\">\r\n                    <h3>Missing indicator settings</h3>\r\n                  </div>\r\n                  <div className=\"canvas-modal__parameter-list\">\r\n                    {missingIndicatorColumnsParameter ? renderParameterField(missingIndicatorColumnsParameter) : null}\r\n                    {missingIndicatorSuffixParameter ? renderParameterField(missingIndicatorSuffixParameter) : null}\r\n                  </div>\r\n                </section>\r\n              )}\r\n            </>\r\n          )}\r\n          {isPreviewNode && (\r\n            <DataSnapshotSection\r\n              previewState={previewState}\r\n              datasetSourceId={sourceId ?? null}\r\n              canTriggerPreview={canTriggerPreview}\r\n              onRefresh={handleRefreshPreview}\r\n              formatCellValue={formatCellValue}\r\n              formatMetricValue={formatMetricValue}\r\n              formatMissingPercentage={formatMissingPercentage}\r\n              formatNumericStat={formatNumericStat}\r\n              formatModeStat={formatModeStat}\r\n            />\r\n          )}\r\n          <DatasetProfileSection\r\n            isDatasetProfileNode={isDatasetProfileNode}\r\n            controller={datasetProfileController}\r\n            formatCellValue={formatCellValue}\r\n            formatNumericStat={formatNumericStat}\r\n            formatMissingPercentage={formatMissingPercentage}\r\n          />\r\n          {dataConsistencyHint && (\r\n            <section className=\"canvas-modal__section\">\r\n              <p className=\"canvas-modal__note\">\r\n                <strong>{dataConsistencyHint.title}.</strong> {dataConsistencyHint.body}\r\n              </p>\r\n            </section>\r\n          )}\r\n          {isTrimWhitespaceNode && (\r\n            <TrimWhitespaceSection\r\n              sourceId={sourceId}\r\n              hasReachableSource={hasReachableSource}\r\n              columnsParameter={trimWhitespaceColumnsParameter}\r\n              modeParameter={trimWhitespaceModeParameter}\r\n              renderMultiSelectField={renderMultiSelectField}\r\n              renderParameterField={renderParameterField}\r\n              columnSummary={trimWhitespaceColumnSummary}\r\n              modeDetails={trimWhitespaceModeDetails}\r\n              sampleMap={trimWhitespaceSampleMap}\r\n            />\r\n          )}\r\n          {isRemoveSpecialCharsNode && (\r\n            <RemoveSpecialCharactersSection\r\n              sourceId={sourceId}\r\n              hasReachableSource={hasReachableSource}\r\n              columnsParameter={removeSpecialColumnsParameter}\r\n              modeParameter={removeSpecialModeParameter}\r\n              replacementParameter={removeSpecialReplacementParameter}\r\n              renderMultiSelectField={renderMultiSelectField}\r\n              renderParameterField={renderParameterField}\r\n              columnSummary={removeSpecialColumnSummary}\r\n              modeDetails={removeSpecialModeDetails}\r\n              sampleMap={removeSpecialSampleMap}\r\n            />\r\n          )}\r\n          {isReplaceInvalidValuesNode && (\r\n            <ReplaceInvalidValuesSection\r\n              sourceId={sourceId}\r\n              hasReachableSource={hasReachableSource}\r\n              columnsParameter={replaceInvalidColumnsParameter}\r\n              modeParameter={replaceInvalidModeParameter}\r\n              minValueParameter={replaceInvalidMinValueParameter}\r\n              maxValueParameter={replaceInvalidMaxValueParameter}\r\n              renderMultiSelectField={renderMultiSelectField}\r\n              renderParameterField={renderParameterField}\r\n              columnSummary={replaceInvalidColumnSummary}\r\n              modeDetails={replaceInvalidModeDetails}\r\n              sampleMap={replaceInvalidSampleMap}\r\n              selectedMode={replaceInvalidMode}\r\n              minValue={replaceInvalidMinValue}\r\n              maxValue={replaceInvalidMaxValue}\r\n            />\r\n          )}\r\n          {isRegexCleanupNode && (\r\n            <RegexCleanupSection\r\n              sourceId={sourceId}\r\n              hasReachableSource={hasReachableSource}\r\n              columnsParameter={regexCleanupColumnsParameter}\r\n              modeParameter={regexCleanupModeParameter}\r\n              patternParameter={regexCleanupPatternParameter}\r\n              replacementParameter={regexCleanupReplacementParameter}\r\n              renderMultiSelectField={renderMultiSelectField}\r\n              renderParameterField={renderParameterField}\r\n              columnSummary={regexCleanupColumnSummary}\r\n              modeDetails={regexCleanupModeDetails}\r\n              sampleMap={regexCleanupSampleMap}\r\n              selectedMode={regexCleanupMode}\r\n              replacementValue={regexCleanupReplacementValue}\r\n            />\r\n          )}\r\n          {isNormalizeTextCaseNode && (\r\n            <NormalizeTextCaseSection\r\n              sourceId={sourceId}\r\n              hasReachableSource={hasReachableSource}\r\n              columnsParameter={normalizeCaseColumnsParameter}\r\n              modeParameter={normalizeCaseModeParameter}\r\n              renderMultiSelectField={renderMultiSelectField}\r\n              renderParameterField={renderParameterField}\r\n              columnSummary={normalizeCaseColumnSummary}\r\n              modeDetails={normalizeCaseModeDetails}\r\n              sampleMap={normalizeCaseSampleMap}\r\n              selectedMode={normalizeCaseMode}\r\n            />\r\n          )}\r\n          {isFeatureMathNode && (\r\n            <FeatureMathSection\r\n              operations={featureMathOperations}\r\n              summaries={featureMathSummaries}\r\n              collapsed={collapsedFeatureMath}\r\n              onToggleCollapsed={handleToggleFeatureMathOperation}\r\n              onAddOperation={handleAddFeatureMathOperation}\r\n              onDuplicateOperation={handleDuplicateFeatureMathOperation}\r\n              onRemoveOperation={handleRemoveFeatureMathOperation}\r\n              onReorderOperation={handleReorderFeatureMathOperation}\r\n              onOperationChange={handleFeatureMathOperationChange}\r\n              availableColumns={availableColumns}\r\n              signals={featureMathSignals}\r\n              previewStatus={previewState.status}\r\n              errorHandlingParameter={featureMathErrorHandlingParameter}\r\n              allowOverwriteParameter={featureMathAllowOverwriteParameter}\r\n              defaultTimezoneParameter={featureMathDefaultTimezoneParameter}\r\n              epsilonParameter={featureMathEpsilonParameter}\r\n              renderParameterField={renderParameterField}\r\n              canResetNode={canResetNode}\r\n              onResetNode={handleResetNode}\r\n            />\r\n          )}\r\n          {isOrdinalEncodingNode && (\r\n            <OrdinalEncodingSection\r\n              sourceId={sourceId}\r\n              hasReachableSource={hasReachableSource}\r\n              isFetching={isFetchingOrdinalEncoding}\r\n              error={ordinalEncodingError}\r\n              suggestions={ordinalEncodingSuggestions}\r\n              metadata={ordinalEncodingMetadata}\r\n              columnsParameter={ordinalEncodingColumnsParameter}\r\n              autoDetectParameter={ordinalEncodingAutoDetectParameter}\r\n              maxCategoriesParameter={ordinalEncodingMaxCategoriesParameter}\r\n              outputSuffixParameter={ordinalEncodingOutputSuffixParameter}\r\n              dropOriginalParameter={ordinalEncodingDropOriginalParameter}\r\n              encodeMissingParameter={ordinalEncodingEncodeMissingParameter}\r\n              handleUnknownParameter={ordinalEncodingHandleUnknownParameter}\r\n              unknownValueParameter={ordinalEncodingUnknownValueParameter}\r\n              selectedColumns={selectedColumns}\r\n              renderParameterField={renderParameterField}\r\n              onToggleColumn={handleToggleColumn}\r\n              onApplyRecommended={handleApplyOrdinalEncodingRecommended}\r\n              formatMissingPercentage={formatMissingPercentage}\r\n            />\r\n          )}\r\n          {isTargetEncodingNode && (\r\n            <TargetEncodingSection\r\n              sourceId={sourceId}\r\n              hasReachableSource={hasReachableSource}\r\n              isFetching={isFetchingTargetEncoding}\r\n              error={targetEncodingError}\r\n              suggestions={targetEncodingSuggestions}\r\n              metadata={targetEncodingMetadata}\r\n              columnsParameter={targetEncodingColumnsParameter}\r\n              targetColumnParameter={targetEncodingTargetColumnParameter}\r\n              autoDetectParameter={targetEncodingAutoDetectParameter}\r\n              maxCategoriesParameter={targetEncodingMaxCategoriesParameter}\r\n              outputSuffixParameter={targetEncodingOutputSuffixParameter}\r\n              dropOriginalParameter={targetEncodingDropOriginalParameter}\r\n              smoothingParameter={targetEncodingSmoothingParameter}\r\n              encodeMissingParameter={targetEncodingEncodeMissingParameter}\r\n              handleUnknownParameter={targetEncodingHandleUnknownParameter}\r\n              selectedColumns={selectedColumns}\r\n              renderParameterField={renderParameterField}\r\n              onToggleColumn={handleToggleColumn}\r\n              onApplyRecommended={handleApplyTargetEncodingRecommended}\r\n              formatMissingPercentage={formatMissingPercentage}\r\n            />\r\n          )}\r\n          {isDummyEncodingNode && (\r\n            <DummyEncodingSection\r\n              sourceId={sourceId}\r\n              hasReachableSource={hasReachableSource}\r\n              isFetching={isFetchingDummyEncoding}\r\n              error={dummyEncodingError}\r\n              suggestions={dummyEncodingSuggestions}\r\n              metadata={dummyEncodingMetadata}\r\n              columnsParameter={dummyEncodingColumnsParameter}\r\n              autoDetectParameter={dummyEncodingAutoDetectParameter}\r\n              maxCategoriesParameter={dummyEncodingMaxCategoriesParameter}\r\n              dropFirstParameter={dummyEncodingDropFirstParameter}\r\n              includeMissingParameter={dummyEncodingIncludeMissingParameter}\r\n              dropOriginalParameter={dummyEncodingDropOriginalParameter}\r\n              prefixSeparatorParameter={dummyEncodingPrefixSeparatorParameter}\r\n              selectedColumns={selectedColumns}\r\n              renderParameterField={renderParameterField}\r\n              onToggleColumn={handleToggleColumn}\r\n              onApplyRecommended={handleApplyDummyEncodingRecommended}\r\n              formatMissingPercentage={formatMissingPercentage}\r\n            />\r\n          )}\r\n          {isOneHotEncodingNode && (\r\n            <OneHotEncodingSection\r\n              sourceId={sourceId}\r\n              hasReachableSource={hasReachableSource}\r\n              isFetching={isFetchingOneHotEncoding}\r\n              error={oneHotEncodingError}\r\n              suggestions={oneHotEncodingSuggestions}\r\n              metadata={oneHotEncodingMetadata}\r\n              columnsParameter={oneHotEncodingColumnsParameter}\r\n              autoDetectParameter={oneHotEncodingAutoDetectParameter}\r\n              maxCategoriesParameter={oneHotEncodingMaxCategoriesParameter}\r\n              dropFirstParameter={oneHotEncodingDropFirstParameter}\r\n              includeMissingParameter={oneHotEncodingIncludeMissingParameter}\r\n              dropOriginalParameter={oneHotEncodingDropOriginalParameter}\r\n              prefixSeparatorParameter={oneHotEncodingPrefixSeparatorParameter}\r\n              selectedColumns={selectedColumns}\r\n              renderParameterField={renderParameterField}\r\n              onToggleColumn={handleToggleColumn}\r\n              onApplyRecommended={handleApplyOneHotEncodingRecommended}\r\n              formatMissingPercentage={formatMissingPercentage}\r\n            />\r\n          )}\r\n          {isFeatureTargetSplitNode && (\r\n            <FeatureTargetSplitSection\r\n              nodeId={nodeId}\r\n              sourceId={sourceId}\r\n              hasReachableSource={hasReachableSource}\r\n              previewState={previewState}\r\n              onRefreshPreview={handleRefreshPreview}\r\n              config={featureTargetSplitConfig}\r\n              targetColumnParameter={featureTargetSplitTargetColumnParameter}\r\n              renderParameterField={renderParameterField}\r\n              formatMetricValue={formatMetricValue}\r\n              formatMissingPercentage={formatMissingPercentage}\r\n              canResetNode={canResetNode}\r\n              onResetNode={handleResetNode}\r\n            />\r\n          )}\r\n          {isTrainTestSplitNode && (\r\n            <TrainTestSplitSection\r\n              nodeId={nodeId}\r\n              sourceId={sourceId}\r\n              hasReachableSource={hasReachableSource}\r\n              previewState={previewState}\r\n              onRefreshPreview={handleRefreshPreview}\r\n              config={trainTestSplitConfig}\r\n              parameters={parameters}\r\n              renderParameterField={renderParameterField}\r\n              formatMetricValue={formatMetricValue}\r\n              canResetNode={canResetNode}\r\n              onResetNode={handleResetNode}\r\n            />\r\n          )}\r\n          {isClassResamplingNode && (\r\n            <ClassResamplingSection\r\n              mode={isClassOversamplingNode ? 'oversampling' : 'undersampling'}\r\n              sourceId={sourceId}\r\n              hasReachableSource={hasReachableSource}\r\n              previewState={previewState}\r\n              onRefreshPreview={handleRefreshPreview}\r\n              config={resamplingConfig}\r\n              methodParameter={resamplingMethodParameter}\r\n              targetColumnParameter={resamplingTargetColumnParameter}\r\n              samplingStrategyParameter={resamplingSamplingStrategyParameter}\r\n              randomStateParameter={resamplingRandomStateParameter}\r\n              kNeighborsParameter={isClassOversamplingNode ? resamplingKNeighborsParameter : null}\r\n              replacementParameter={isClassUndersamplingNode ? resamplingReplacementParameter : null}\r\n              renderParameterField={renderParameterField}\r\n              formatMetricValue={formatMetricValue}\r\n              formatMissingPercentage={formatMissingPercentage}\r\n              schemaGuard={oversamplingSchemaGuard}\r\n            />\r\n          )}\r\n          {(isTrainModelDraftNode || isHyperparameterTuningNode) && (\r\n            <TrainModelDraftSection\r\n              sourceId={sourceId}\r\n              hasReachableSource={hasReachableSource}\r\n              previewState={previewState}\r\n              onRefreshPreview={handleRefreshPreview}\r\n              config={trainModelDraftConfig}\r\n              targetColumnParameter={trainModelTargetColumnParameter}\r\n              problemTypeParameter={trainModelProblemTypeParameter}\r\n              renderParameterField={renderParameterField}\r\n              formatMetricValue={formatMetricValue}\r\n              formatMissingPercentage={formatMissingPercentage}\r\n              schemaColumns={cachedSchemaColumns}\r\n            />\r\n          )}\r\n          {isTrainModelDraftNode && (\r\n            <div style={gatedSectionStyle} aria-disabled={gatedAriaDisabled}>\r\n              <ModelTrainingSection\r\n                nodeId={nodeId}\r\n                sourceId={sourceId}\r\n                graph={graphContext}\r\n                config={trainModelDraftConfig}\r\n                runtimeConfig={trainModelRuntimeConfig}\r\n                cvConfig={trainModelCVConfig}\r\n                draftConfigState={configState}\r\n                renderParameterField={renderParameterField}\r\n                modelTypeParameter={trainModelModelTypeParameter}\r\n                modelTypeOptions={filteredModelTypeOptions}\r\n                hyperparametersParameter={trainModelHyperparametersParameter}\r\n                cvEnabledParameter={trainModelCvEnabledParameter}\r\n                cvStrategyParameter={trainModelCvStrategyParameter}\r\n                cvFoldsParameter={trainModelCvFoldsParameter}\r\n                cvShuffleParameter={trainModelCvShuffleParameter}\r\n                cvRandomStateParameter={trainModelCvRandomStateParameter}\r\n                cvRefitStrategyParameter={trainModelCvRefitStrategyParameter}\r\n                onSaveDraftConfig={handleSave}\r\n              />\r\n            </div>\r\n          )}\r\n          {isModelEvaluationNode && (\r\n            <div style={gatedSectionStyle} aria-disabled={gatedAriaDisabled}>\r\n              <EvaluationPackSection\r\n                nodeId={nodeId}\r\n                sourceId={sourceId}\r\n                graph={graphContext}\r\n                config={configState}\r\n                setConfigState={setConfigState}\r\n                renderParameterField={renderParameterField}\r\n                formatMetricValue={formatMetricValue}\r\n                connectedSplitHandles={evaluationSplitConnectivity}\r\n                canResetNode={canResetNode}\r\n                onResetNode={handleResetNode}\r\n              />\r\n            </div>\r\n          )}\r\n          {isModelRegistryNode && (\r\n            <div style={gatedSectionStyle} aria-disabled={gatedAriaDisabled}>\r\n              <ModelRegistrySection\r\n                nodeId={nodeId}\r\n                sourceId={sourceId}\r\n                graph={graphContext}\r\n                parameters={parameters}\r\n                config={modelRegistryConfig}\r\n                renderParameterField={renderParameterField}\r\n              />\r\n            </div>\r\n          )}\r\n          {isHyperparameterTuningNode && (\r\n            <div style={gatedSectionStyle} aria-disabled={gatedAriaDisabled}>\r\n              <HyperparameterTuningSection\r\n                nodeId={nodeId}\r\n                sourceId={sourceId}\r\n                graph={graphContext}\r\n                config={trainModelDraftConfig}\r\n                runtimeConfig={trainModelRuntimeConfig}\r\n                cvConfig={trainModelCVConfig}\r\n                draftConfigState={configState}\r\n                renderParameterField={renderParameterField}\r\n                modelTypeParameter={trainModelModelTypeParameter}\r\n                modelTypeOptions={filteredModelTypeOptions}\r\n                searchStrategyParameter={hyperparameterTuningSearchStrategyParameter}\r\n                searchIterationsParameter={hyperparameterTuningSearchIterationsParameter}\r\n                searchRandomStateParameter={hyperparameterTuningSearchRandomStateParameter}\r\n                scoringMetricParameter={hyperparameterTuningScoringMetricParameter}\r\n                setDraftConfigState={setConfigState}\r\n                onSaveDraftConfig={handleSave}\r\n              />\r\n            </div>\r\n          )}\r\n          {isLabelEncodingNode && (\r\n            <LabelEncodingSection\r\n              sourceId={sourceId}\r\n              hasReachableSource={hasReachableSource}\r\n              isFetching={isFetchingLabelEncoding}\r\n              error={labelEncodingError}\r\n              suggestions={labelEncodingSuggestions}\r\n              metadata={labelEncodingMetadata}\r\n              columnsParameter={labelEncodingColumnsParameter}\r\n              autoDetectParameter={labelEncodingAutoDetectParameter}\r\n              maxUniqueParameter={labelEncodingMaxUniqueParameter}\r\n              outputSuffixParameter={labelEncodingOutputSuffixParameter}\r\n              dropOriginalParameter={labelEncodingDropOriginalParameter}\r\n              missingStrategyParameter={labelEncodingMissingStrategyParameter}\r\n              missingCodeParameter={labelEncodingMissingCodeParameter}\r\n              selectedColumns={selectedColumns}\r\n              renderParameterField={renderParameterField}\r\n              onToggleColumn={handleToggleColumn}\r\n              onApplyRecommended={handleApplyLabelEncodingRecommended}\r\n              formatMissingPercentage={formatMissingPercentage}\r\n            />\r\n          )}\r\n          {isHashEncodingNode && (\r\n            <HashEncodingSection\r\n              sourceId={sourceId}\r\n              hasReachableSource={hasReachableSource}\r\n              isFetching={isFetchingHashEncoding}\r\n              error={hashEncodingError}\r\n              suggestions={hashEncodingSuggestions}\r\n              metadata={hashEncodingMetadata}\r\n              columnsParameter={hashEncodingColumnsParameter}\r\n              autoDetectParameter={hashEncodingAutoDetectParameter}\r\n              maxCategoriesParameter={hashEncodingMaxCategoriesParameter}\r\n              bucketsParameter={hashEncodingBucketsParameter}\r\n              outputSuffixParameter={hashEncodingOutputSuffixParameter}\r\n              dropOriginalParameter={hashEncodingDropOriginalParameter}\r\n              encodeMissingParameter={hashEncodingEncodeMissingParameter}\r\n              selectedColumns={selectedColumns}\r\n              renderParameterField={renderParameterField}\r\n              onToggleColumn={handleToggleColumn}\r\n              onApplyRecommended={handleApplyHashEncodingRecommended}\r\n              canResetNode={canResetNode}\r\n              onResetNode={handleResetNode}\r\n              formatMissingPercentage={formatMissingPercentage}\r\n            />\r\n          )}\r\n          {isPolynomialFeaturesNode && (\r\n            <PolynomialFeaturesSection\r\n              columnsParameter={polynomialColumnsParameter}\r\n              autoDetectParameter={polynomialAutoDetectParameter}\r\n              degreeParameter={polynomialDegreeParameter}\r\n              includeBiasParameter={polynomialIncludeBiasParameter}\r\n              interactionOnlyParameter={polynomialInteractionOnlyParameter}\r\n              includeInputFeaturesParameter={polynomialIncludeInputFeaturesParameter}\r\n              outputPrefixParameter={polynomialOutputPrefixParameter}\r\n              renderParameterField={renderParameterField}\r\n              signal={polynomialSignal}\r\n              canResetNode={canResetNode}\r\n              onResetNode={handleResetNode}\r\n            />\r\n          )}\r\n          {isFeatureSelectionNode && (\r\n            <FeatureSelectionSection\r\n              columnsParameter={featureSelectionColumnsParameter}\r\n              autoDetectParameter={featureSelectionAutoDetectParameter}\r\n              targetColumnParameter={featureSelectionTargetColumnParameter}\r\n              methodParameter={featureSelectionMethodParameter}\r\n              scoreFuncParameter={featureSelectionScoreFuncParameter}\r\n              problemTypeParameter={featureSelectionProblemTypeParameter}\r\n              kParameter={featureSelectionKParameter}\r\n              percentileParameter={featureSelectionPercentileParameter}\r\n              alphaParameter={featureSelectionAlphaParameter}\r\n              thresholdParameter={featureSelectionThresholdParameter}\r\n              modeParameter={featureSelectionModeParameter}\r\n              estimatorParameter={featureSelectionEstimatorParameter}\r\n              stepParameter={featureSelectionStepParameter}\r\n              minFeaturesParameter={featureSelectionMinFeaturesParameter}\r\n              maxFeaturesParameter={featureSelectionMaxFeaturesParameter}\r\n              dropUnselectedParameter={featureSelectionDropUnselectedParameter}\r\n              renderParameterField={renderParameterField}\r\n              signal={featureSelectionSignal}\r\n              canResetNode={canResetNode}\r\n              onResetNode={handleResetNode}\r\n            />\r\n          )}\r\n          {isStandardizeDatesNode && (\r\n            <StandardizeDatesSection\r\n              hasSource={Boolean(sourceId)}\r\n              hasReachableSource={hasReachableSource}\r\n              strategies={dateStrategies}\r\n              columnSummary={standardizeDatesColumnSummary}\r\n              columnOptions={dateColumnOptions}\r\n              sampleMap={standardizeDatesSampleMap}\r\n              collapsedStrategies={collapsedStrategies}\r\n              onToggleStrategy={toggleDateStrategySection}\r\n              onRemoveStrategy={handleRemoveDateStrategy}\r\n              onAddStrategy={handleAddDateStrategy}\r\n              onModeChange={handleDateStrategyModeChange}\r\n              onColumnToggle={handleDateStrategyColumnToggle}\r\n              onColumnsChange={handleDateStrategyColumnsChange}\r\n              onAutoDetectToggle={handleDateStrategyAutoDetectToggle}\r\n              modeOptions={DATE_MODE_OPTIONS}\r\n            />\r\n          )}\r\n          {isReplaceAliasesNode && (\r\n            <ReplaceAliasesSection\r\n              hasSource={Boolean(sourceId)}\r\n              hasReachableSource={hasReachableSource}\r\n              strategies={aliasStrategies}\r\n              columnSummary={aliasColumnSummary}\r\n              columnOptions={aliasColumnOptions}\r\n              sampleMap={aliasSampleMap}\r\n              customPairSummary={aliasCustomPairSummary}\r\n              customPairsParameter={replaceAliasesCustomPairsParameter}\r\n              collapsedStrategies={collapsedStrategies}\r\n              onToggleStrategy={toggleAliasStrategySection}\r\n              onRemoveStrategy={handleRemoveAliasStrategy}\r\n              onAddStrategy={handleAddAliasStrategy}\r\n              onModeChange={handleAliasModeChange}\r\n              onAutoDetectToggle={handleAliasAutoDetectToggle}\r\n              onColumnToggle={handleAliasColumnToggle}\r\n              onColumnsChange={handleAliasColumnsChange}\r\n              renderParameterField={renderParameterField}\r\n            />\r\n          )}\r\n          {isImputerNode && (\r\n            <ImputationStrategiesSection\r\n              hasSource={Boolean(sourceId)}\r\n              hasReachableSource={hasReachableSource}\r\n              strategies={imputerStrategies}\r\n              columnOptions={imputerColumnOptions}\r\n              methodOptions={imputationMethodOptions}\r\n              missingFilter={imputerMissingFilter}\r\n              missingFilterMax={imputerMissingSliderMax}\r\n              missingFilterActive={imputerMissingFilterActive}\r\n              filteredOptionCount={imputerFilteredOptionCount}\r\n              collapsedStrategies={collapsedStrategies}\r\n              onToggleStrategy={toggleImputerStrategySection}\r\n              onRemoveStrategy={handleRemoveImputerStrategy}\r\n              onAddStrategy={handleAddImputerStrategy}\r\n              onMethodChange={handleImputerMethodChange}\r\n              onOptionNumberChange={handleImputerOptionNumberChange}\r\n              onColumnsChange={handleImputerColumnsChange}\r\n              onColumnToggle={handleImputerColumnToggle}\r\n              onMissingFilterChange={handleImputerMissingFilterChange}\r\n              formatMissingPercentage={formatMissingPercentage}\r\n              formatNumericStat={formatNumericStat}\r\n              formatModeStat={formatModeStat}\r\n              schemaDiagnostics={imputationSchemaDiagnostics}\r\n            />\r\n          )}\r\n          {isCastNode && (\r\n            <CastColumnTypesSection\r\n              configState={configState}\r\n              setConfigState={setConfigState}\r\n              availableColumns={availableColumns}\r\n              columnTypeMap={columnTypeMap}\r\n              columnSuggestions={columnSuggestions}\r\n              selectedColumns={selectedColumns}\r\n              previewColumns={previewColumns}\r\n              previewStatus={previewState.status}\r\n              sourceId={sourceId}\r\n              hasReachableSource={hasReachableSource}\r\n            />\r\n          )}\r\n          {isOutlierNode && (\r\n            <OutlierInsightsSection\r\n              sourceId={sourceId}\r\n              hasReachableSource={hasReachableSource}\r\n              isFetchingOutliers={isFetchingOutliers}\r\n              outlierConfig={outlierConfig}\r\n              outlierMethodOptions={outlierMethodOptions}\r\n              outlierMethodDetailMap={outlierMethodDetailMap}\r\n              outlierDefaultDetail={outlierDefaultDetail}\r\n              outlierAutoDetectEnabled={outlierAutoDetectEnabled}\r\n              outlierSelectedCount={outlierSelectedCount}\r\n              outlierDefaultLabel={outlierDefaultLabel}\r\n              outlierOverrideCount={outlierOverrideCount}\r\n              outlierParameterOverrideCount={outlierParameterOverrideCount}\r\n              outlierOverrideExampleSummary={outlierOverrideSummaryDisplay}\r\n              outlierHasOverrides={outlierHasOverrides}\r\n              outlierRecommendationRows={outlierRecommendationRows}\r\n              outlierHasRecommendations={outlierHasRecommendations}\r\n              outlierStatusMessage={outlierStatusMessage}\r\n              outlierError={outlierError}\r\n              outlierSampleSize={outlierSampleSize}\r\n              relativeOutlierGeneratedAt={relativeOutlierGeneratedAt}\r\n              outlierPreviewSignal={outlierPreviewSignal}\r\n              formatMetricValue={formatMetricValue}\r\n              formatNumericStat={formatNumericStat}\r\n              onApplyAllRecommendations={handleOutlierApplyAllRecommendations}\r\n              onClearOverrides={handleOutlierClearOverrides}\r\n              onDefaultMethodChange={handleOutlierDefaultMethodChange}\r\n              onAutoDetectToggle={handleOutlierAutoDetectToggle}\r\n              onOverrideSelect={handleOutlierOverrideSelect}\r\n              onMethodParameterChange={handleOutlierMethodParameterChange}\r\n              onColumnParameterChange={handleOutlierColumnParameterChange}\r\n            />\r\n          )}\r\n          {isScalingNode && (\r\n            <ScalingInsightsSection\r\n              sourceId={sourceId}\r\n              hasReachableSource={hasReachableSource}\r\n              isFetchingScaling={isFetchingScaling}\r\n              scalingConfig={scalingConfig}\r\n              scalingMethodOptions={scalingMethodOptions}\r\n              scalingMethodDetailMap={scalingMethodDetailMap}\r\n              scalingDefaultDetail={scalingDefaultDetail}\r\n              scalingAutoDetectEnabled={scalingAutoDetectEnabled}\r\n              scalingSelectedCount={scalingSelectedCount}\r\n              scalingDefaultLabel={scalingDefaultLabel}\r\n              scalingOverrideCount={scalingOverrideCount}\r\n              scalingOverrideExampleSummary={scalingOverrideExampleSummary}\r\n              scalingRecommendationRows={scalingRecommendationRows}\r\n              scalingHasRecommendations={scalingHasRecommendations}\r\n              scalingStatusMessage={scalingStatusMessage}\r\n              scalingError={scalingError}\r\n              scalingSampleSize={scalingSampleSize}\r\n              relativeScalingGeneratedAt={relativeScalingGeneratedAt}\r\n              formatMetricValue={formatMetricValue}\r\n              formatNumericStat={formatNumericStat}\r\n              formatMissingPercentage={formatMissingPercentage}\r\n              onApplyAllRecommendations={handleScalingApplyAllRecommendations}\r\n              onClearOverrides={handleScalingClearOverrides}\r\n              onDefaultMethodChange={handleScalingDefaultMethodChange}\r\n              onAutoDetectToggle={handleScalingAutoDetectToggle}\r\n              onOverrideSelect={handleScalingOverrideSelect}\r\n            />\r\n          )}\r\n          {isBinningNode && (\r\n            <>\r\n              <BinningInsightsSection\r\n                hasSource={Boolean(sourceId)}\r\n                hasReachableSource={hasReachableSource}\r\n                isFetching={isFetchingBinning}\r\n                error={binningError}\r\n                relativeGeneratedAt={relativeBinningGeneratedAt}\r\n                sampleSize={binningSampleSize}\r\n                binningConfig={binningConfig}\r\n                binningDefaultLabel={binningDefaultLabel}\r\n                binningOverrideCount={binningOverrideCount}\r\n                binningOverrideSummary={binningOverrideSummary}\r\n                recommendations={binningInsightsRecommendations}\r\n                excludedColumns={binningInsightsExcludedColumns}\r\n                numericColumnCount={binningAllNumericColumns.length}\r\n                canApplyAllNumeric={canApplyAllBinningNumeric}\r\n                onApplyAllNumeric={handleApplyAllBinningNumeric}\r\n                onApplyStrategies={handleBinningApplyStrategies}\r\n                onClearOverrides={handleBinningClearOverrides}\r\n                customEdgeDrafts={binningCustomEdgeDrafts}\r\n                customLabelDrafts={binningCustomLabelDrafts}\r\n                onOverrideStrategyChange={handleBinningOverrideStrategyChange}\r\n                onOverrideNumberChange={handleBinningOverrideNumberChange}\r\n                onOverrideKbinsEncodeChange={handleBinningOverrideKbinsEncodeChange}\r\n                onOverrideKbinsStrategyChange={handleBinningOverrideKbinsStrategyChange}\r\n                onOverrideClear={handleBinningClearOverride}\r\n                onCustomBinsChange={handleBinningCustomBinsChange}\r\n                onCustomLabelsChange={handleBinningCustomLabelsChange}\r\n                onClearCustomColumn={handleBinningClearCustomColumn}\r\n                formatMetricValue={formatMetricValue}\r\n                formatNumericStat={formatNumericStat}\r\n              />\r\n              <BinNumericColumnsSection\r\n                config={binningConfig}\r\n                fieldIds={binningFieldIds}\r\n                onIntegerChange={handleBinningIntegerChange}\r\n                onBooleanToggle={handleBinningBooleanToggle}\r\n                onSuffixChange={handleBinningSuffixChange}\r\n                onLabelFormatChange={handleBinningLabelFormatChange}\r\n                onMissingStrategyChange={handleBinningMissingStrategyChange}\r\n                onMissingLabelChange={handleBinningMissingLabelChange}\r\n              />\r\n            </>\r\n          )}\r\n          {isSkewnessNode && (\r\n            <SkewnessInsightsSection\r\n              sourceId={sourceId}\r\n              hasReachableSource={hasReachableSource}\r\n              isFetchingSkewness={isFetchingSkewness}\r\n              skewnessThreshold={skewnessThreshold}\r\n              skewnessError={skewnessError}\r\n              skewnessViewMode={skewnessViewMode}\r\n              skewnessRecommendedCount={skewnessRecommendedCount}\r\n              skewnessNumericCount={skewnessNumericCount}\r\n              skewnessGroupByMethod={skewnessGroupByMethod}\r\n              skewnessRows={skewnessRows}\r\n              skewnessTableGroups={skewnessTableGroups}\r\n              hasSkewnessAutoRecommendations={hasSkewnessAutoRecommendations}\r\n              skewnessTransformationsCount={skewnessTransformationsCount}\r\n              isFetchingRecommendations={isFetchingRecommendations}\r\n              getSkewnessMethodLabel={getSkewnessMethodLabel}\r\n              getSkewnessMethodStatus={getSkewnessMethodStatus}\r\n              onApplyRecommendations={handleApplySkewnessRecommendations}\r\n              onViewModeChange={setSkewnessViewMode}\r\n              onGroupByToggle={setSkewnessGroupByMethod}\r\n              onOverrideChange={handleSkewnessOverrideChange}\r\n              onClearSelections={clearSkewnessTransformations}\r\n            />\r\n          )}\r\n          {isSkewnessDistributionNode && (\r\n            <section className=\"canvas-modal__section\">\r\n              <div className=\"canvas-modal__section-header\">\r\n                <h3>Skewness distributions</h3>\r\n                <div className=\"canvas-modal__section-actions\">\r\n                  <div className=\"canvas-skewness__segmented\" role=\"group\" aria-label=\"Distribution view\">\r\n                    <button\r\n                      type=\"button\"\r\n                      className=\"canvas-skewness__segmented-button\"\r\n                      data-active={skewnessDistributionView === 'before'}\r\n                      onClick={() => setSkewnessDistributionView('before')}\r\n                      disabled={!skewnessDistributionCards.length}\r\n                    >\r\n                      Before\r\n                    </button>\r\n                    <button\r\n                      type=\"button\"\r\n                      className=\"canvas-skewness__segmented-button\"\r\n                      data-active={skewnessDistributionView === 'after'}\r\n                      onClick={() => setSkewnessDistributionView('after')}\r\n                      disabled={!skewnessDistributionCards.length}\r\n                    >\r\n                      After\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              {skewnessThreshold !== null && (\r\n                <p className=\"canvas-modal__note\">\r\n                  Columns with |skewness|  {skewnessThreshold.toFixed(2)} are visualized below.\r\n                </p>\r\n              )}\r\n              {isFetchingSkewness && skewnessDistributionCards.length === 0 && <p className=\"canvas-modal__note\">Loading skewness distributions</p>}\r\n              {!isFetchingSkewness && skewnessError && (\r\n                <p className=\"canvas-modal__note canvas-modal__note--error\">{skewnessError}</p>\r\n              )}\r\n              {(!isFetchingSkewness || skewnessDistributionCards.length > 0) && !skewnessError && (\r\n                skewnessDistributionCards.length ? (\r\n                  <div className=\"canvas-skewness__distribution-grid\">\r\n                    {skewnessDistributionCards.map((card) => {\r\n                      const renderDistributionSection = (\r\n                        distribution: SkewnessColumnDistribution,\r\n                        sectionLabel: string,\r\n                        methodLabel?: string | null,\r\n                      ) => {\r\n                        const validSamples = Math.max(0, distribution.sample_size || 0);\r\n                        const missingSamples = Math.max(0, distribution.missing_count || 0);\r\n                        return (\r\n                          <div className=\"canvas-skewness__distribution-block\" key={sectionLabel}>\r\n                            <div className=\"canvas-skewness__distribution-block-title\">\r\n                              <span>{sectionLabel}</span>\r\n                              {methodLabel ? (\r\n                                <span className=\"canvas-skewness__distribution-block-method\">{methodLabel}</span>\r\n                              ) : null}\r\n                            </div>\r\n                            <HistogramSparkline\r\n                              counts={distribution.counts}\r\n                              binEdges={distribution.bin_edges}\r\n                              className=\"canvas-skewness__histogram\"\r\n                            />\r\n                            <div className=\"canvas-skewness__distribution-stats\">\r\n                              <div>\r\n                                <span className=\"canvas-skewness__stat-label\">Min</span>\r\n                                <span className=\"canvas-skewness__stat-value\">{formatNumericStat(distribution.minimum)}</span>\r\n                              </div>\r\n                              <div>\r\n                                <span className=\"canvas-skewness__stat-label\">Median</span>\r\n                                <span className=\"canvas-skewness__stat-value\">{formatNumericStat(distribution.median)}</span>\r\n                              </div>\r\n                              <div>\r\n                                <span className=\"canvas-skewness__stat-label\">Max</span>\r\n                                <span className=\"canvas-skewness__stat-value\">{formatNumericStat(distribution.maximum)}</span>\r\n                              </div>\r\n                              <div>\r\n                                <span className=\"canvas-skewness__stat-label\">Mean</span>\r\n                                <span className=\"canvas-skewness__stat-value\">{formatNumericStat(distribution.mean)}</span>\r\n                              </div>\r\n                              <div>\r\n                                <span className=\"canvas-skewness__stat-label\">Std dev</span>\r\n                                <span className=\"canvas-skewness__stat-value\">{formatNumericStat(distribution.stddev)}</span>\r\n                              </div>\r\n                              <div>\r\n                                <span className=\"canvas-skewness__stat-label\">Valid</span>\r\n                                <span className=\"canvas-skewness__stat-value\">{validSamples.toLocaleString()}</span>\r\n                              </div>\r\n                              <div>\r\n                                <span className=\"canvas-skewness__stat-label\">Missing</span>\r\n                                <span className=\"canvas-skewness__stat-value\">{missingSamples.toLocaleString()}</span>\r\n                              </div>\r\n                            </div>\r\n                          </div>\r\n                        );\r\n                      };\r\n\r\n                      const afterDistribution = card.distributionAfter;\r\n                      const showBefore = skewnessDistributionView === 'before';\r\n                      const showAfter = skewnessDistributionView === 'after' && Boolean(afterDistribution);\r\n                      const showAfterPlaceholder = skewnessDistributionView === 'after' && !afterDistribution;\r\n\r\n                      const footnoteMessage = skewnessDistributionView === 'before'\r\n                        ? 'Showing the original distribution returned by the skewness analysis.'\r\n                        : afterDistribution\r\n                          ? 'Showing the recomputed distribution after the applied transform.'\r\n                          : 'A transformed distribution is not available yet for this column.';\r\n\r\n                      return (\r\n                        <article\r\n                          key={`skewness-dist-${card.column}`}\r\n                          className=\"canvas-skewness__distribution-card\"\r\n                          aria-label={`Distribution for ${card.column}`}\r\n                        >\r\n                          <header className=\"canvas-skewness__distribution-header\">\r\n                            <div>\r\n                              <h4>{card.column}</h4>\r\n                              <div className=\"canvas-skewness__distribution-tags\">\r\n                                {card.directionLabel && (\r\n                                  <span className=\"canvas-skewness__chip canvas-skewness__chip--muted\">{card.directionLabel}</span>\r\n                                )}\r\n                                {card.magnitudeLabel && (\r\n                                  <span className=\"canvas-skewness__chip canvas-skewness__chip--muted\">{card.magnitudeLabel}</span>\r\n                                )}\r\n                                {card.recommendedLabel && (\r\n                                  <span className=\"canvas-skewness__chip canvas-skewness__chip--recommended\">\r\n                                    Suggested: {card.recommendedLabel}\r\n                                  </span>\r\n                                )}\r\n                                {card.appliedLabel && (\r\n                                  <span className=\"canvas-skewness__chip canvas-skewness__chip--applied\">\r\n                                    Applied: {card.appliedLabel}\r\n                                  </span>\r\n                                )}\r\n                              </div>\r\n                            </div>\r\n                            <div className=\"canvas-skewness__distribution-skew\">\r\n                              <span>Skewness</span>\r\n                              <strong>{card.skewness !== null ? formatMetricValue(card.skewness, 2) : ''}</strong>\r\n                            </div>\r\n                          </header>\r\n                          {card.summary && (\r\n                            <p className=\"canvas-skewness__distribution-summary\">{card.summary}</p>\r\n                          )}\r\n                          <div className=\"canvas-skewness__distribution-comparison\">\r\n                            {showBefore\r\n                              ? renderDistributionSection(card.distributionBefore, 'Before transform')\r\n                              : null}\r\n                            {showAfter && afterDistribution\r\n                              ? renderDistributionSection(afterDistribution, 'After transform', card.appliedLabel)\r\n                              : null}\r\n                            {showAfterPlaceholder ? (\r\n                              <div className=\"canvas-skewness__distribution-empty\">\r\n                                After transform data isnt available yet. Apply a skewness method and rerun the node to\r\n                                generate this view.\r\n                              </div>\r\n                            ) : null}\r\n                          </div>\r\n                          <footer className=\"canvas-skewness__distribution-footnote\">\r\n                            Histogram bins are based on the sampled rows returned by the skewness analysis. {footnoteMessage}\r\n                          </footer>\r\n                        </article>\r\n                      );\r\n                    })}\r\n                  </div>\r\n                ) : (\r\n                  <p className=\"canvas-modal__note\">\r\n                    No columns met the skewness threshold for visualization. Refresh with a larger sample if needed.\r\n                  </p>\r\n                )\r\n              )}\r\n            </section>\r\n          )}\r\n          {isBinnedDistributionNode && (\r\n            <BinnedDistributionSection\r\n              cards={binnedDistributionCards}\r\n              selectedPreset={binnedSamplePreset}\r\n              onSelectPreset={(value) => setBinnedSamplePreset(value)}\r\n              isFetching={isFetchingBinnedDistribution}\r\n              sampleSize={binnedSampleSize}\r\n              relativeGeneratedAt={relativeBinnedGeneratedAt}\r\n              error={binnedDistributionError}\r\n              onRefresh={handleRefreshBinnedDistribution}\r\n              canRefresh={Boolean(sourceId)}\r\n            />\r\n          )}\r\n          {isRemoveDuplicatesNode && (\r\n            <RemoveDuplicatesSection\r\n              sourceId={sourceId}\r\n              hasReachableSource={hasReachableSource}\r\n              removeDuplicatesColumnsParameter={removeDuplicatesColumnsParameter}\r\n              removeDuplicatesKeepParameter={removeDuplicatesKeepParameter}\r\n              renderMultiSelectField={renderMultiSelectField}\r\n              removeDuplicatesKeepSelectId={removeDuplicatesKeepSelectId}\r\n              removeDuplicatesKeep={removeDuplicatesKeep}\r\n              onKeepChange={handleRemoveDuplicatesKeepChange}\r\n            />\r\n          )}\r\n          {isDataConsistencyNode && dataConsistencyParameters.length > 0 && (\r\n            <section className=\"canvas-modal__section\">\r\n              <div className=\"canvas-modal__section-header\">\r\n                <h3>Data consistency settings</h3>\r\n                {canResetNode && (\r\n                  <div className=\"canvas-modal__section-actions\">\r\n                    <button\r\n                      type=\"button\"\r\n                      className=\"btn btn-outline-secondary\"\r\n                      onClick={handleResetNode}\r\n                    >\r\n                      Reset node\r\n                    </button>\r\n                  </div>\r\n                )}\r\n              </div>\r\n              <div className=\"canvas-modal__parameter-list\">\r\n                {dataConsistencyParameters.map((parameter) => renderParameterField(parameter))}\r\n              </div>\r\n            </section>\r\n          )}\r\n          {isTransformerAuditNode && (\r\n            <TransformerAuditSection\r\n              signal={transformerAuditSignal}\r\n              previewStatus={previewState.status}\r\n              hasSource={Boolean(sourceId)}\r\n              hasReachableSource={hasReachableSource}\r\n              onRefreshPreview={handleRefreshPreview}\r\n            />\r\n          )}\r\n          <section className=\"canvas-modal__section\">\r\n            <h3>Node details</h3>\r\n            {metadata.length ? (\r\n              <dl className=\"canvas-modal__metadata\">\r\n                {metadata.map((entry, index) => (\r\n                  <div key={`${entry.label}-${index}`} className=\"canvas-modal__metadata-row\">\r\n                    <dt>{entry.label}</dt>\r\n                    <dd>{entry.value}</dd>\r\n                  </div>\r\n                ))}\r\n              </dl>\r\n            ) : (\r\n              <p className=\"canvas-modal__empty\">No metadata available for this node.</p>\r\n            )}\r\n          </section>\r\n\r\n\r\n        </div>\r\n\r\n        <NodeSettingsFooter\r\n          onClose={onClose}\r\n          canResetNode={canResetNode}\r\n          onResetNode={handleResetNode}\r\n          showSaveButton={showSaveButton}\r\n          canSave={canSave}\r\n          onSave={handleSave}\r\n          isBusy={hasActiveAsyncWork}\r\n          busyLabel={footerBusyLabel}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","export const SPLIT_DEFINITIONS = [\r\n  { key: 'train', label: 'Train' },\r\n  { key: 'test', label: 'Test' },\r\n  { key: 'validation', label: 'Validation' },\r\n] as const;\r\nexport type SplitTypeKey = (typeof SPLIT_DEFINITIONS)[number]['key'];\r\n\r\nexport const SPLIT_TYPE_ORDER: SplitTypeKey[] = SPLIT_DEFINITIONS.map((definition) => definition.key);\r\n\r\nexport const SPLIT_LABEL_MAP: Record<SplitTypeKey, string> = SPLIT_DEFINITIONS.reduce(\r\n  (accumulator, definition) => ({\r\n    ...accumulator,\r\n    [definition.key]: definition.label,\r\n  }),\r\n  {} as Record<SplitTypeKey, string>\r\n);\r\n\r\nexport const isValidSplitKey = (value: unknown): value is SplitTypeKey =>\r\n  typeof value === 'string' && SPLIT_TYPE_ORDER.includes(value as SplitTypeKey);\r\n\r\nexport const sanitizeSplitList = (value?: unknown): SplitTypeKey[] => {\r\n  if (!Array.isArray(value)) {\r\n    return [];\r\n  }\r\n\r\n  const uniqueKeys = new Set<SplitTypeKey>();\r\n  value.forEach((entry) => {\r\n    if (isValidSplitKey(entry)) {\r\n      uniqueKeys.add(entry);\r\n    }\r\n  });\r\n\r\n  return SPLIT_TYPE_ORDER.filter((key) => uniqueKeys.has(key));\r\n};\r\n\r\nexport const areSplitArraysEqual = (\r\n  a?: SplitTypeKey[] | null,\r\n  b?: SplitTypeKey[] | null\r\n): boolean => {\r\n  const first = sanitizeSplitList(a);\r\n  const second = sanitizeSplitList(b);\r\n\r\n  if (first.length !== second.length) {\r\n    return false;\r\n  }\r\n\r\n  return first.every((value, index) => value === second[index]);\r\n};\r\n\r\nexport const getSplitKeyFromHandle = (handleId?: string | null): SplitTypeKey | null => {\r\n  if (!handleId || typeof handleId !== 'string') {\r\n    return null;\r\n  }\r\n\r\n  return SPLIT_TYPE_ORDER.find((key) => handleId.endsWith(`-${key}`)) ?? null;\r\n};\r\n\r\nexport const getSplitHandlePosition = (index: number, total: number): string => {\r\n  if (total <= 1) {\r\n    return '50%';\r\n  }\r\n\r\n  const step = 100 / (total + 1);\r\n  const position = Math.round((index + 1) * step);\r\n  return `${position}%`;\r\n};\r\n","import type { ConnectionMatcherKey, NodeConnectionInfo, NodeHandleDefinition } from '../types/nodes';\r\nimport { getSplitHandlePosition } from './splits';\r\n\r\nexport const CONNECTION_ACCEPT_MATCHERS: Record<ConnectionMatcherKey, (handleId: string) => boolean> = {\r\n  train: (handleId) => handleId.endsWith('-train'),\r\n  validation: (handleId) => handleId.endsWith('-validation'),\r\n  test: (handleId) => handleId.endsWith('-test'),\r\n  model: (handleId) => handleId.endsWith('-model-out'),\r\n  params: (handleId) => handleId.endsWith('-best-params-out'),\r\n};\r\n\r\nexport const NODE_HANDLE_CONFIG: Record<string, NodeConnectionInfo> = {\r\n  hyperparameter_tuning: {\r\n    inputs: [\r\n      { key: 'train-in', label: 'Train Split', position: 35, required: true, accepts: ['train'] },\r\n      { key: 'validation-in', label: 'Validation Split', position: 65, required: true, accepts: ['validation'] },\r\n    ],\r\n    outputs: [{ key: 'best-params-out', label: 'Best Params', position: 50 }],\r\n  },\r\n  train_model_draft: {\r\n    inputs: [\r\n      { key: 'train-in', label: 'Train Split', position: 40, required: true, accepts: ['train'] },\r\n      { key: 'params-in', label: 'Best Params', position: 60, required: false, accepts: ['params'] },\r\n    ],\r\n    outputs: [{ key: 'model-out', label: 'Model', position: 50 }],\r\n  },\r\n  model_evaluation: {\r\n    inputs: [\r\n      { key: 'train-in', label: 'Train Split', position: 20, required: false, accepts: ['train'] },\r\n      { key: 'test-in', label: 'Test Split', position: 40, required: false, accepts: ['test'] },\r\n      { key: 'validation-in', label: 'Validation Split', position: 60, required: false, accepts: ['validation'] },\r\n      { key: 'models-in', label: 'Model', position: 80, required: true, accepts: ['model'] },\r\n    ],\r\n  },\r\n  model_registry_overview: {\r\n    inputs: [{ key: 'models-in', label: 'Model', position: 50, required: true, accepts: ['model'] }],\r\n  },\r\n};\r\n\r\nexport const resolveHandleTopPosition = (\r\n  definition: NodeHandleDefinition,\r\n  index: number,\r\n  total: number\r\n): string => {\r\n  if (typeof definition.position === 'number' && Number.isFinite(definition.position)) {\r\n    const clamped = Math.min(Math.max(definition.position, 5), 95);\r\n    return `${clamped}%`;\r\n  }\r\n  return getSplitHandlePosition(index, total);\r\n};\r\n\r\nexport const formatHandleDisplayLabel = (definition: NodeHandleDefinition): string => {\r\n  if (definition.required === false) {\r\n    return `${definition.label} (optional)`;\r\n  }\r\n  return `${definition.label} (required)`;\r\n};\r\n\r\nexport const formatConnectionDescriptor = (definition: NodeHandleDefinition): string =>\r\n  definition.required === false ? `${definition.label} (optional)` : `${definition.label} (required)`;\r\n\r\nexport const extractHandleKey = (nodeId: string, handleId?: string | null): string | null => {\r\n  if (!handleId || typeof handleId !== 'string') {\r\n    return null;\r\n  }\r\n  const prefix = `${nodeId}-`;\r\n  if (handleId.startsWith(prefix)) {\r\n    return handleId.slice(prefix.length);\r\n  }\r\n  const parts = handleId.split('-');\r\n  if (parts.length >= 2) {\r\n    return parts.slice(-2).join('-');\r\n  }\r\n  return handleId;\r\n};\r\n","export const HANDLE_BASE_SIZE = 28;\r\nexport const DEFAULT_NODE_WIDTH = 320;\r\nexport const DEFAULT_NODE_MIN_HEIGHT = 170;\r\n\r\nexport const DROP_MISSING_LEGACY_DESCRIPTION =\r\n  'Removes columns whose missing percentage exceeds a configurable threshold and applies EDA-backed column drop recommendations.';\r\nexport const DROP_MISSING_DISPLAY_DESCRIPTION = 'Drop columns';\r\n\r\nexport const AUTO_CONFIRMED_NODE_TYPES = new Set(['transformer_audit']);\r\n","// @ts-nocheck\r\nimport React, { useCallback, useMemo } from 'react';\r\nimport { Handle, NodeProps, Position } from 'react-flow-renderer';\r\nimport type { FeatureNodeData } from '../../types/nodes';\r\nimport {\r\n  NODE_HANDLE_CONFIG,\r\n  formatHandleDisplayLabel,\r\n  resolveHandleTopPosition,\r\n} from '../../constants/nodeHandles';\r\nimport {\r\n  SPLIT_LABEL_MAP,\r\n  SPLIT_TYPE_ORDER,\r\n  sanitizeSplitList,\r\n  getSplitHandlePosition,\r\n} from '../../constants/splits';\r\nimport { HANDLE_BASE_SIZE, DROP_MISSING_DISPLAY_DESCRIPTION, DROP_MISSING_LEGACY_DESCRIPTION } from '../../constants/defaults';\r\n\r\nconst buildHandleStyle = (type: 'target' | 'source'): React.CSSProperties => ({\r\n  width: `${HANDLE_BASE_SIZE}px`,\r\n  height: `${HANDLE_BASE_SIZE}px`,\r\n  borderRadius: '999px',\r\n  border: type === 'target' ? '1px solid rgba(148, 163, 184, 0.55)' : '1px solid rgba(45, 212, 191, 0.55)',\r\n  background: type === 'target' ? 'rgba(148, 163, 184, 0.22)' : 'rgba(45, 212, 191, 0.18)',\r\n  boxShadow: type === 'target' ? '0 0 0 3px rgba(148, 163, 184, 0.18)' : '0 0 0 3px rgba(45, 212, 191, 0.18)',\r\n  backdropFilter: 'blur(2px)',\r\n});\r\n\r\nconst FeatureCanvasNode: React.FC<NodeProps<FeatureNodeData>> = ({ id, data, selected }) => {\r\n  const label = data?.label ?? id;\r\n  const isDataset = Boolean(data?.isDataset ?? id === 'dataset-source');\r\n  const isRemovable = data?.isRemovable ?? !isDataset;\r\n  const isSplitNode = data?.catalogType === 'train_test_split';\r\n  const defaultDescription = isDataset ? 'Primary dataset input' : undefined;\r\n  const rawDescription = data?.description ?? defaultDescription;\r\n  const shouldDisplayDropMissingShort =\r\n    data?.catalogType === 'drop_missing_columns' || rawDescription === DROP_MISSING_LEGACY_DESCRIPTION;\r\n  const description = shouldDisplayDropMissingShort ? DROP_MISSING_DISPLAY_DESCRIPTION : rawDescription;\r\n  const backgroundStatus = data?.backgroundExecutionStatus ?? 'idle';\r\n  const hasRequiredConnections = data?.hasRequiredConnections ?? true;\r\n  const needsConnection = !hasRequiredConnections;\r\n  const catalogType = data?.catalogType ?? '';\r\n  const isModelingNode = ['hyperparameter_tuning', 'train_model_draft', 'model_evaluation', 'model_registry_overview'].includes(\r\n    catalogType\r\n  );\r\n\r\n  const handleRemove = useCallback(\r\n    (event: React.MouseEvent) => {\r\n      event.stopPropagation();\r\n      data?.onRemoveNode?.(id);\r\n    },\r\n    [data, id]\r\n  );\r\n\r\n  const targetHandles = useMemo(() => {\r\n    if (isDataset) {\r\n      return [];\r\n    }\r\n\r\n    const catalogType = data?.catalogType ?? '';\r\n    const handleConfig = catalogType ? NODE_HANDLE_CONFIG[catalogType] : undefined;\r\n\r\n    if (handleConfig?.inputs && handleConfig.inputs.length) {\r\n      const total = handleConfig.inputs.length;\r\n      return handleConfig.inputs.map((definition, index) => ({\r\n        position: Position.Left,\r\n        id: `${id}-${definition.key}`,\r\n        label: formatHandleDisplayLabel(definition),\r\n        style: { top: resolveHandleTopPosition(definition, index, total) },\r\n      }));\r\n    }\r\n\r\n    return [\r\n      { position: Position.Left, id: `${id}-target` },\r\n      { position: Position.Top, id: `${id}-target-top` },\r\n    ];\r\n  }, [data?.catalogType, id, isDataset]);\r\n\r\n  const sourceHandles = useMemo(() => {\r\n    if (isDataset) {\r\n      return [\r\n        { position: Position.Left, id: `${id}-source-left` },\r\n        { position: Position.Right, id: `${id}-source` },\r\n        { position: Position.Top, id: `${id}-source-top` },\r\n        { position: Position.Bottom, id: `${id}-source-bottom` },\r\n      ];\r\n    }\r\n\r\n    const catalogType = data?.catalogType ?? '';\r\n    const handleConfig = catalogType ? NODE_HANDLE_CONFIG[catalogType] : undefined;\r\n\r\n    if (handleConfig?.outputs && handleConfig.outputs.length) {\r\n      const total = handleConfig.outputs.length;\r\n      return handleConfig.outputs.map((definition, index) => ({\r\n        position: Position.Right,\r\n        id: `${id}-${definition.key}`,\r\n        label: definition.label,\r\n        style: { top: resolveHandleTopPosition(definition, index, total) },\r\n      }));\r\n    }\r\n\r\n    const activeSplits = isSplitNode ? SPLIT_TYPE_ORDER : sanitizeSplitList(data?.activeSplits ?? []);\r\n    const connectedSplits = sanitizeSplitList(data?.connectedSplits ?? []);\r\n\r\n    if (activeSplits.length) {\r\n      const total = activeSplits.length;\r\n      return activeSplits.map((splitKey, index) => ({\r\n        position: Position.Right,\r\n        id: `${id}-${splitKey}`,\r\n        style: { top: getSplitHandlePosition(index, total) },\r\n        label: (() => {\r\n          const baseLabel = SPLIT_LABEL_MAP[splitKey];\r\n          if (isSplitNode) {\r\n            if (splitKey === 'validation') {\r\n              const validationSize = Number(data?.config?.validation_size ?? 0);\r\n              if (!(validationSize > 0)) {\r\n                return `${baseLabel} (disabled)`;\r\n              }\r\n            }\r\n            if (!connectedSplits.includes(splitKey)) {\r\n              return `${baseLabel} (not set)`;\r\n            }\r\n          }\r\n          return baseLabel;\r\n        })(),\r\n      }));\r\n    }\r\n\r\n    return [\r\n      { position: Position.Right, id: `${id}-source` },\r\n      { position: Position.Bottom, id: `${id}-source-bottom` },\r\n    ];\r\n  }, [data?.activeSplits, data?.catalogType, data?.connectedSplits, data?.config?.validation_size, id, isDataset, isSplitNode]);\r\n\r\n  const renderHandle = useCallback((handleConfig, type: 'target' | 'source') => {\r\n    const { position, id: handleId, style, label } = handleConfig;\r\n    const isSplitHandle = handleId.includes('-train') || handleId.includes('-test') || handleId.includes('-validation');\r\n\r\n    return (\r\n      <React.Fragment key={handleId}>\r\n        <Handle\r\n          type={type}\r\n          position={position}\r\n          id={handleId}\r\n          className={`feature-node__handle feature-node__handle--${type}`}\r\n          style={{\r\n            ...buildHandleStyle(type),\r\n            ...(style ?? {}),\r\n            ...(isSplitHandle\r\n              ? {\r\n                  opacity: 1,\r\n                  visibility: 'visible',\r\n                  pointerEvents: 'all',\r\n                }\r\n              : {}),\r\n          }}\r\n        />\r\n        {label && type === 'source' && (\r\n          <div\r\n            className=\"feature-node__handle-label\"\r\n            style={{\r\n              position: 'absolute',\r\n              right: '-8px',\r\n              top: style?.top || '50%',\r\n              transform: 'translate(100%, calc(-100% - 8px))',\r\n              fontSize: '0.7rem',\r\n              fontWeight: '600',\r\n              color: 'rgba(148, 163, 184, 0.9)',\r\n              background: 'rgba(15, 23, 42, 0.95)',\r\n              padding: '3px 8px',\r\n              borderRadius: '4px',\r\n              whiteSpace: 'nowrap',\r\n              pointerEvents: 'none',\r\n              zIndex: 100,\r\n              border: '1px solid rgba(71, 85, 105, 0.5)',\r\n              boxShadow: '0 2px 4px rgba(0, 0, 0, 0.2)',\r\n            }}\r\n          >\r\n            {label}\r\n          </div>\r\n        )}\r\n        {label && type === 'target' && (\r\n          <div\r\n            className=\"feature-node__handle-label\"\r\n            style={{\r\n              position: 'absolute',\r\n              left: '-8px',\r\n              top: style?.top || '50%',\r\n              transform: 'translate(-100%, calc(-100% - 8px))',\r\n              fontSize: '0.7rem',\r\n              fontWeight: '600',\r\n              color: 'rgba(148, 163, 184, 0.9)',\r\n              background: 'rgba(15, 23, 42, 0.95)',\r\n              padding: '3px 8px',\r\n              borderRadius: '4px',\r\n              whiteSpace: 'nowrap',\r\n              pointerEvents: 'none',\r\n              zIndex: 100,\r\n              border: '1px solid rgba(71, 85, 105, 0.5)',\r\n              boxShadow: '0 2px 4px rgba(0, 0, 0, 0.2)',\r\n            }}\r\n          >\r\n            {label}\r\n          </div>\r\n        )}\r\n      </React.Fragment>\r\n    );\r\n  }, []);\r\n\r\n  return (\r\n    <div className={`feature-node${selected ? ' feature-node--selected' : ''}${isDataset ? ' feature-node--dataset' : ''}`}>\r\n      {targetHandles.map((handle) => renderHandle(handle, 'target'))}\r\n      <div className=\"feature-node__header\">\r\n        <div className=\"feature-node__title-group\">\r\n          <span className=\"feature-node__drag-handle\" aria-hidden=\"true\">\r\n            \r\n          </span>\r\n          <span className=\"feature-node__title\">{label}</span>\r\n        </div>\r\n        <div className=\"feature-node__controls\">\r\n          {needsConnection && isModelingNode && (\r\n            <span\r\n              className=\"feature-node__status-indicator feature-node__status-indicator--warning\"\r\n              title=\"Required connections missing\"\r\n              style={{\r\n                background: 'rgba(251, 191, 36, 0.2)',\r\n                color: 'rgb(245, 158, 11)',\r\n                border: '1px solid rgba(245, 158, 11, 0.3)',\r\n              }}\r\n            >\r\n              \r\n            </span>\r\n          )}\r\n          {backgroundStatus === 'loading' && (\r\n            <span\r\n              className=\"feature-node__status-indicator feature-node__status-indicator--loading\"\r\n              title=\"Loading full dataset in background...\"\r\n            >\r\n              <svg className=\"feature-node__spinner\" viewBox=\"0 0 24 24\">\r\n                <circle\r\n                  cx=\"12\"\r\n                  cy=\"12\"\r\n                  r=\"10\"\r\n                  stroke=\"currentColor\"\r\n                  strokeWidth=\"3\"\r\n                  fill=\"none\"\r\n                  strokeDasharray=\"60\"\r\n                  strokeDashoffset=\"30\"\r\n                  strokeLinecap=\"round\"\r\n                />\r\n              </svg>\r\n            </span>\r\n          )}\r\n          {backgroundStatus === 'success' && (\r\n            <span\r\n              className=\"feature-node__status-indicator feature-node__status-indicator--success\"\r\n              title=\"Full dataset ready\"\r\n            >\r\n              \r\n            </span>\r\n          )}\r\n          {backgroundStatus === 'error' && (\r\n            <span\r\n              className=\"feature-node__status-indicator feature-node__status-indicator--error\"\r\n              title=\"Background execution failed\"\r\n            >\r\n              !\r\n            </span>\r\n          )}\r\n          {isRemovable && (\r\n            <button\r\n              className=\"feature-node__control feature-node__control--danger\"\r\n              type=\"button\"\r\n              onClick={handleRemove}\r\n              title=\"Remove node\"\r\n            >\r\n              \r\n            </button>\r\n          )}\r\n        </div>\r\n      </div>\r\n      {description && <p className=\"feature-node__description\">{description}</p>}\r\n      {sourceHandles.map((handle) => renderHandle(handle, 'source'))}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default FeatureCanvasNode;\r\n","import type { FeatureNodeCatalogEntry } from '../../api';\r\nimport type { FeatureNodeParameter } from '../types/nodes';\r\nimport { AUTO_CONFIRMED_NODE_TYPES, DROP_MISSING_DISPLAY_DESCRIPTION, DROP_MISSING_LEGACY_DESCRIPTION } from '../constants/defaults';\r\n\r\nexport const PENDING_CONFIRMATION_FLAG = '__pending_confirmation__';\r\n\r\nconst COLUMN_ARRAY_KEY_PATTERNS = [\r\n  /^columns?$/i,\r\n  /_columns$/i,\r\n  /_features$/i,\r\n  /_list$/i,\r\n  /_ids$/i,\r\n  /^selected_/i,\r\n  /^target_/i,\r\n  /^include_/i,\r\n  /^exclude_/i,\r\n  /^skipped_/i,\r\n  /_rules$/i,\r\n  /_transformations$/i,\r\n  /^strategies$/i,\r\n  /^recommendations$/i,\r\n];\r\n\r\nconst COLUMN_MAP_KEY_PATTERNS = [/methods$/i, /overrides$/i, /mapping$/i, /weights$/i, /assignments$/i];\r\n\r\nexport const isPlainObject = (value: any) => value && typeof value === 'object' && !Array.isArray(value);\r\n\r\nexport const cloneConfig = (value: any) => {\r\n  if (value === undefined || value === null) {\r\n    return {};\r\n  }\r\n  try {\r\n    return JSON.parse(JSON.stringify(value));\r\n  } catch (error) {\r\n    return { ...value };\r\n  }\r\n};\r\n\r\nexport const isAutoConfirmedCatalogType = (catalogType?: string | null) =>\r\n  typeof catalogType === 'string' && AUTO_CONFIRMED_NODE_TYPES.has(catalogType);\r\n\r\nexport const sanitizeDefaultConfigForNode = (catalogNode?: FeatureNodeCatalogEntry | null) => {\r\n  const defaultConfig = catalogNode?.default_config;\r\n  const nodeType = catalogNode?.type ?? '';\r\n  const requiresConfirmation = !AUTO_CONFIRMED_NODE_TYPES.has(nodeType);\r\n\r\n  const applyPendingState = (config: Record<string, any>) => {\r\n    if (requiresConfirmation) {\r\n      config[PENDING_CONFIRMATION_FLAG] = true;\r\n    } else {\r\n      delete config[PENDING_CONFIRMATION_FLAG];\r\n    }\r\n    return config;\r\n  };\r\n\r\n  if (defaultConfig === undefined || defaultConfig === null) {\r\n    return applyPendingState({});\r\n  }\r\n\r\n  const cloned = cloneConfig(defaultConfig);\r\n  if (!isPlainObject(cloned)) {\r\n    if (cloned && typeof cloned === 'object') {\r\n      return applyPendingState(cloned as Record<string, any>);\r\n    }\r\n    return applyPendingState({});\r\n  }\r\n\r\n  Object.entries(cloned).forEach(([key, value]) => {\r\n    if (Array.isArray(value)) {\r\n      const shouldReset = COLUMN_ARRAY_KEY_PATTERNS.some((pattern) => pattern.test(key));\r\n      if (shouldReset) {\r\n        cloned[key] = [];\r\n      }\r\n    } else if (isPlainObject(value)) {\r\n      const shouldResetMap = COLUMN_MAP_KEY_PATTERNS.some((pattern) => pattern.test(key));\r\n      if (shouldResetMap) {\r\n        cloned[key] = {};\r\n      }\r\n    }\r\n  });\r\n\r\n  if ('auto_detect' in cloned) {\r\n    cloned.auto_detect = false;\r\n  }\r\n\r\n  switch (catalogNode?.type) {\r\n    case 'scale_numeric_features':\r\n      cloned.columns = Array.isArray(cloned.columns) ? cloned.columns : [];\r\n      cloned.column_methods = isPlainObject(cloned.column_methods) ? cloned.column_methods : {};\r\n      cloned.skipped_columns = Array.isArray(cloned.skipped_columns) ? cloned.skipped_columns : [];\r\n      cloned.default_method =\r\n        typeof cloned.default_method === 'string' && cloned.default_method.trim() ? cloned.default_method : 'standard';\r\n      break;\r\n    case 'polynomial_features':\r\n      cloned.columns = Array.isArray(cloned.columns) ? cloned.columns : [];\r\n      cloned.auto_detect = Boolean(cloned.auto_detect);\r\n      cloned.include_bias = Boolean(cloned.include_bias);\r\n      cloned.interaction_only = Boolean(cloned.interaction_only);\r\n      cloned.include_input_features = Boolean(cloned.include_input_features);\r\n      cloned.degree = typeof cloned.degree === 'number' && Number.isFinite(cloned.degree) ? cloned.degree : 2;\r\n      cloned.output_prefix =\r\n        typeof cloned.output_prefix === 'string' && cloned.output_prefix.trim()\r\n          ? cloned.output_prefix\r\n          : 'poly';\r\n      break;\r\n    case 'drop_missing_columns':\r\n      if ('missing_threshold' in cloned) {\r\n        cloned.missing_threshold = null;\r\n      }\r\n      cloned.columns = Array.isArray(cloned.columns) ? cloned.columns : [];\r\n      break;\r\n    case 'drop_missing_rows':\r\n      if ('missing_threshold' in cloned) {\r\n        cloned.missing_threshold = null;\r\n      }\r\n      if ('drop_if_any_missing' in cloned) {\r\n        cloned.drop_if_any_missing = false;\r\n      }\r\n      break;\r\n    case 'outlier_removal':\r\n      cloned.method = 'manual';\r\n      cloned.columns = Array.isArray(cloned.columns) ? cloned.columns : [];\r\n      cloned.manual_bounds = isPlainObject(cloned.manual_bounds) ? cloned.manual_bounds : {};\r\n      break;\r\n    case 'missing_value_indicator':\r\n      cloned.columns = Array.isArray(cloned.columns) ? cloned.columns : [];\r\n      break;\r\n    case 'remove_duplicates':\r\n      cloned.columns = Array.isArray(cloned.columns) ? cloned.columns : [];\r\n      if (typeof cloned.keep === 'string') {\r\n        const normalized = cloned.keep.trim().toLowerCase();\r\n        cloned.keep = normalized === 'last' || normalized === 'none' ? normalized : 'first';\r\n      } else {\r\n        cloned.keep = 'first';\r\n      }\r\n      break;\r\n    default:\r\n      break;\r\n  }\r\n\r\n  return applyPendingState(cloned as Record<string, any>);\r\n};\r\n\r\nexport const normalizeDescription = (description?: string, catalogType?: string) => {\r\n  if (\r\n    catalogType === 'drop_missing_columns' ||\r\n    description === DROP_MISSING_LEGACY_DESCRIPTION\r\n  ) {\r\n    return DROP_MISSING_DISPLAY_DESCRIPTION;\r\n  }\r\n  return description;\r\n};\r\n\r\nexport const normalizeParameters = (\r\n  rawParameters?: FeatureNodeParameter[] | null\r\n): FeatureNodeParameter[] => {\r\n  if (!Array.isArray(rawParameters)) {\r\n    return [];\r\n  }\r\n  return rawParameters.map((parameter) => ({ ...parameter }));\r\n};\r\n","import type { Edge, Node, ReactFlowInstance } from 'react-flow-renderer';\r\nimport type { FeaturePipelineResponse } from '../../api';\r\n\r\nconst initialNodes: Node[] = [\r\n  {\r\n    id: 'dataset-source',\r\n    type: 'featureNode',\r\n    position: { x: -200, y: 0 },\r\n    data: {\r\n      label: 'Dataset input',\r\n      description: 'Start from the currently selected dataset',\r\n      isDataset: true,\r\n      isRemovable: false,\r\n      isConfigured: true,\r\n    },\r\n    style: {\r\n      background: 'linear-gradient(165deg, rgba(30, 64, 175, 0.9), rgba(59, 130, 246, 0.85))',\r\n      border: '1px solid rgba(59, 130, 246, 0.55)',\r\n      color: '#e0f2fe',\r\n      fontWeight: 600,\r\n    },\r\n  },\r\n];\r\n\r\nconst initialEdges: Edge[] = [];\r\n\r\nconst cloneNode = (node: Node): Node => ({\r\n  ...node,\r\n  data: {\r\n    ...(node.data ?? {}),\r\n  },\r\n});\r\n\r\nexport const getDefaultNodes = () => initialNodes.map((node) => cloneNode(node));\r\n\r\nexport const getDefaultEdges = () => initialEdges.map((edge) => ({ ...edge }));\r\n\r\nexport const HISTORY_LIMIT = 12;\r\n\r\nexport const getSamplePipelineGraph = (datasetLabel?: string | null) => {\r\n  const displayName = datasetLabel && datasetLabel.trim() ? datasetLabel.trim() : 'Demo dataset';\r\n  const datasetNodeLabel = `Dataset input\\n(${displayName})`;\r\n\r\n  const nodes: Node[] = [\r\n    {\r\n      id: 'dataset-source',\r\n      type: 'featureNode',\r\n      position: { x: -200, y: 40 },\r\n      data: {\r\n        label: datasetNodeLabel,\r\n        isDataset: true,\r\n        isRemovable: false,\r\n      },\r\n      style: {\r\n        whiteSpace: 'pre-line',\r\n        background: '#eef2ff',\r\n        border: '1px solid rgba(99, 102, 241, 0.35)',\r\n        color: '#312e81',\r\n        fontWeight: 600,\r\n      },\r\n    },\r\n    {\r\n      id: 'node-1',\r\n      type: 'featureNode',\r\n      position: { x: 260, y: 40 },\r\n      data: {\r\n        label: 'Profile columns\\n(assess types & nulls)',\r\n      },\r\n      style: {\r\n        whiteSpace: 'pre-line',\r\n        background: 'linear-gradient(165deg, rgba(30, 41, 59, 0.95), rgba(15, 23, 42, 0.85))',\r\n      },\r\n    },\r\n    {\r\n      id: 'node-4',\r\n      type: 'featureNode',\r\n      position: { x: 600, y: 60 },\r\n      data: {\r\n        label: 'Feature preview\\n(sample rows)',\r\n      },\r\n      style: {\r\n        whiteSpace: 'pre-line',\r\n        background: 'linear-gradient(165deg, rgba(8, 145, 178, 0.42), rgba(2, 132, 199, 0.32))',\r\n      },\r\n    },\r\n  ];\r\n\r\n  const edges: Edge[] = [\r\n    {\r\n      id: 'edge-dataset-profile',\r\n      source: 'dataset-source',\r\n      target: 'node-1',\r\n      animated: true,\r\n      type: 'animatedEdge',\r\n      sourceHandle: 'dataset-source-source',\r\n      targetHandle: 'node-1-target',\r\n    },\r\n    {\r\n      id: 'edge-profile-preview',\r\n      source: 'node-1',\r\n      target: 'node-4',\r\n      animated: true,\r\n      type: 'animatedEdge',\r\n      sourceHandle: 'node-1-source',\r\n      targetHandle: 'node-4-target',\r\n    },\r\n  ];\r\n\r\n  return { nodes, edges };\r\n};\r\n\r\nexport const resolveDropPosition = (\r\n  currentNodes: Node[],\r\n  instance: ReactFlowInstance | null,\r\n  viewportEl: HTMLDivElement | null\r\n): { x: number; y: number } | undefined => {\r\n  if (!instance || typeof instance.project !== 'function' || !viewportEl) {\r\n    return undefined;\r\n  }\r\n\r\n  const bounds = viewportEl.getBoundingClientRect();\r\n  const projectedCenter = instance.project({ x: bounds.width / 2, y: bounds.height / 2 });\r\n  if (!projectedCenter) {\r\n    return undefined;\r\n  }\r\n\r\n  const nonDatasetCount = currentNodes.filter((node) => node.id !== 'dataset-source').length;\r\n  const pattern = [\r\n    { x: 0, y: 0 },\r\n    { x: 220, y: 0 },\r\n    { x: -220, y: 0 },\r\n    { x: 0, y: 180 },\r\n    { x: 220, y: 180 },\r\n    { x: -220, y: 180 },\r\n    { x: 0, y: -180 },\r\n    { x: 220, y: -180 },\r\n    { x: -220, y: -180 },\r\n  ];\r\n\r\n  const patternIndex = nonDatasetCount % pattern.length;\r\n  const ring = Math.floor(nonDatasetCount / pattern.length);\r\n  const offset = pattern[patternIndex];\r\n  const scale = ring + 1;\r\n\r\n  return {\r\n    x: projectedCenter.x + offset.x * scale,\r\n    y: projectedCenter.y + offset.y * scale,\r\n  };\r\n};\r\n","import type { CSSProperties } from 'react';\r\nimport type { Node } from 'react-flow-renderer';\r\nimport type { FeatureNodeCatalogEntry } from '../../api';\r\nimport type { FeatureNodeData } from '../types/nodes';\r\nimport {\r\n  cloneConfig,\r\n  sanitizeDefaultConfigForNode,\r\n  PENDING_CONFIRMATION_FLAG,\r\n  normalizeDescription,\r\n  normalizeParameters,\r\n  isAutoConfirmedCatalogType,\r\n} from './configSanitizer';\r\nimport { DEFAULT_NODE_MIN_HEIGHT, DEFAULT_NODE_WIDTH } from '../constants/defaults';\r\nimport { sanitizeSplitList, SPLIT_TYPE_ORDER } from '../constants/splits';\r\nimport { NODE_HANDLE_CONFIG, formatConnectionDescriptor } from '../constants/nodeHandles';\r\n\r\nconst RESETTABLE_NODE_TYPES = new Set([\r\n  'binned_distribution',\r\n  'skewness_distribution',\r\n  'skewness_transform',\r\n  'binning_discretization',\r\n  'label_encoding',\r\n  'target_encoding',\r\n  'ordinal_encoding',\r\n  'dummy_encoding',\r\n  'one_hot_encoding',\r\n  'hash_encoding',\r\n  'scale_numeric_features',\r\n  'polynomial_features',\r\n  'feature_selection',\r\n  'feature_math',\r\n  'missing_value_indicator',\r\n  'trim_whitespace',\r\n  'normalize_text_case',\r\n  'replace_aliases_typos',\r\n  'standardize_date_formats',\r\n  'remove_special_characters',\r\n  'replace_invalid_values',\r\n  'regex_replace_fix',\r\n  'class_undersampling',\r\n  'class_oversampling',\r\n  'feature_target_split',\r\n  'train_test_split',\r\n  'train_model_draft',\r\n  'model_evaluation',\r\n  'hyperparameter_tuning',\r\n]);\r\n\r\nexport const isResettableCatalogEntry = (\r\n  catalogType?: string | null,\r\n  catalogEntryMap?: Map<string, FeatureNodeCatalogEntry>\r\n): boolean => {\r\n  if (!catalogType) {\r\n    return false;\r\n  }\r\n  if (RESETTABLE_NODE_TYPES.has(catalogType)) {\r\n    return true;\r\n  }\r\n  const catalogEntry = catalogEntryMap?.get(catalogType);\r\n  if (!catalogEntry) {\r\n    return false;\r\n  }\r\n  const category = typeof catalogEntry.category === 'string' ? catalogEntry.category.toLowerCase() : '';\r\n  return category.includes('preprocess');\r\n};\r\n\r\nexport type NodeInteractionDeps = {\r\n  handleOpenSettings: (nodeId: string) => void;\r\n  handleRemoveNode: (nodeId: string) => void;\r\n  catalogEntryMap: Map<string, FeatureNodeCatalogEntry>;\r\n};\r\n\r\nexport const registerNodeInteractions = (rawNode: Node, deps: NodeInteractionDeps): Node => {\r\n  const { handleOpenSettings, handleRemoveNode, catalogEntryMap } = deps;\r\n  const baseData = rawNode.data ?? {};\r\n  const isDataset = baseData.isDataset ?? rawNode.id === 'dataset-source';\r\n  const normalizedStyle = { ...(rawNode.style ?? {}) } as CSSProperties;\r\n  const catalogType = baseData.catalogType ?? baseData.type ?? rawNode.id;\r\n  const rawParameterSource = Array.isArray(baseData.parameters) ? baseData.parameters : null;\r\n  let effectiveParameterSource = rawParameterSource;\r\n\r\n  if ((!effectiveParameterSource || effectiveParameterSource.length === 0) && typeof catalogType === 'string') {\r\n    const fallbackEntry = catalogEntryMap.get(catalogType) ?? null;\r\n    if (fallbackEntry?.parameters?.length) {\r\n      effectiveParameterSource = fallbackEntry.parameters;\r\n    }\r\n  }\r\n\r\n  const parameterDefs = normalizeParameters(effectiveParameterSource);\r\n\r\n  let resolvedConfig: Record<string, any> | undefined;\r\n  if (parameterDefs.length || (baseData.config && typeof baseData.config === 'object')) {\r\n    const nextConfig = cloneConfig(baseData.config);\r\n    parameterDefs.forEach((parameter) => {\r\n      if (!parameter?.name) {\r\n        return;\r\n      }\r\n      if (nextConfig[parameter.name] !== undefined) {\r\n        return;\r\n      }\r\n      if (parameter.default === undefined) {\r\n        return;\r\n      }\r\n      if (Array.isArray(parameter.default)) {\r\n        nextConfig[parameter.name] = [...parameter.default];\r\n      } else if (parameter.type === 'boolean') {\r\n        nextConfig[parameter.name] = Boolean(parameter.default);\r\n      } else {\r\n        nextConfig[parameter.name] = parameter.default;\r\n      }\r\n    });\r\n    resolvedConfig = nextConfig;\r\n  }\r\n\r\n  if (!normalizedStyle.width) {\r\n    normalizedStyle.width = isDataset ? DEFAULT_NODE_WIDTH + 20 : DEFAULT_NODE_WIDTH;\r\n  }\r\n\r\n  if (!normalizedStyle.minHeight) {\r\n    normalizedStyle.minHeight = DEFAULT_NODE_MIN_HEIGHT;\r\n  }\r\n\r\n  if (!normalizedStyle.padding) {\r\n    normalizedStyle.padding = 12;\r\n  }\r\n\r\n  if (!normalizedStyle.borderRadius) {\r\n    normalizedStyle.borderRadius = 16;\r\n  }\r\n\r\n  normalizedStyle.boxSizing = normalizedStyle.boxSizing ?? 'border-box';\r\n  normalizedStyle.whiteSpace = normalizedStyle.whiteSpace ?? 'pre-line';\r\n\r\n  if (!normalizedStyle.background) {\r\n    normalizedStyle.background = isDataset\r\n      ? 'linear-gradient(165deg, rgba(30, 64, 175, 0.9), rgba(59, 130, 246, 0.85))'\r\n      : 'linear-gradient(160deg, rgba(30, 41, 59, 0.92), rgba(15, 23, 42, 0.92))';\r\n  }\r\n\r\n  if (!normalizedStyle.border) {\r\n    normalizedStyle.border = isDataset\r\n      ? '1px solid rgba(59, 130, 246, 0.55)'\r\n      : '1px solid rgba(148, 163, 184, 0.22)';\r\n  }\r\n\r\n  if (!normalizedStyle.boxShadow) {\r\n    normalizedStyle.boxShadow = isDataset\r\n      ? '0 24px 54px rgba(59, 130, 246, 0.28)'\r\n      : '0 18px 42px rgba(2, 6, 23, 0.45)';\r\n  }\r\n\r\n  if (!normalizedStyle.color) {\r\n    normalizedStyle.color = isDataset ? '#e0f2fe' : '#e2e8f0';\r\n  }\r\n\r\n  if (!normalizedStyle.fontWeight) {\r\n    normalizedStyle.fontWeight = isDataset ? 600 : 500;\r\n  }\r\n\r\n  const normalizedDescription = normalizeDescription(baseData.description, catalogType as string);\r\n  const catalogTypeAutoConfirmed = isAutoConfirmedCatalogType(catalogType);\r\n  const clonedConfig =\r\n    resolvedConfig ?? (baseData.config && typeof baseData.config === 'object' ? cloneConfig(baseData.config) : undefined);\r\n  if (clonedConfig && typeof clonedConfig === 'object' && catalogTypeAutoConfirmed) {\r\n    delete (clonedConfig as Record<string, any>)[PENDING_CONFIRMATION_FLAG];\r\n  }\r\n\r\n  const normalizedData: FeatureNodeData = {\r\n    ...baseData,\r\n    label: baseData.label ?? rawNode.id,\r\n    description: normalizedDescription,\r\n    isDataset,\r\n    isRemovable: baseData.isRemovable ?? !isDataset,\r\n    isConfigured: (() => {\r\n      if (isDataset) {\r\n        return true;\r\n      }\r\n      if (baseData.isConfigured === true) {\r\n        return true;\r\n      }\r\n      if (baseData.config && typeof baseData.config === 'object') {\r\n        if (catalogTypeAutoConfirmed) {\r\n          return true;\r\n        }\r\n        return !(baseData.config as Record<string, any>)[PENDING_CONFIRMATION_FLAG];\r\n      }\r\n      return false;\r\n    })(),\r\n    inputs: Array.isArray(baseData.inputs) ? [...baseData.inputs] : baseData.inputs,\r\n    outputs: Array.isArray(baseData.outputs) ? [...baseData.outputs] : baseData.outputs,\r\n    category: baseData.category,\r\n    parameters: parameterDefs,\r\n    config: clonedConfig,\r\n    catalogType: catalogType as string,\r\n    onRemoveNode: handleRemoveNode,\r\n    onOpenSettings: handleOpenSettings,\r\n  };\r\n\r\n  const handleConfig = typeof catalogType === 'string' ? NODE_HANDLE_CONFIG[catalogType] : undefined;\r\n  if (handleConfig) {\r\n    const formattedInputs = handleConfig.inputs?.map((definition) => formatConnectionDescriptor(definition)) ?? [];\r\n    const formattedOutputs = handleConfig.outputs?.map((definition) => definition.label) ?? [];\r\n\r\n    if (formattedInputs.length) {\r\n      normalizedData.inputs = formattedInputs;\r\n    } else {\r\n      delete normalizedData.inputs;\r\n    }\r\n\r\n    if (formattedOutputs.length) {\r\n      normalizedData.outputs = formattedOutputs;\r\n    } else {\r\n      delete normalizedData.outputs;\r\n    }\r\n\r\n    normalizedData.connectionInfo = {\r\n      inputs: handleConfig.inputs?.map((definition) => ({ ...definition })) ?? [],\r\n      outputs: handleConfig.outputs?.map((definition) => ({ ...definition })) ?? [],\r\n    };\r\n  } else {\r\n    if (!normalizedData.inputs || normalizedData.inputs.length === 0) {\r\n      delete normalizedData.inputs;\r\n    }\r\n    if (!normalizedData.outputs || normalizedData.outputs.length === 0) {\r\n      delete normalizedData.outputs;\r\n    }\r\n    delete normalizedData.connectionInfo;\r\n  }\r\n\r\n  const sanitizedSplits = sanitizeSplitList(normalizedData.activeSplits);\r\n  if (sanitizedSplits.length) {\r\n    normalizedData.activeSplits = sanitizedSplits;\r\n  } else {\r\n    delete normalizedData.activeSplits;\r\n  }\r\n\r\n  const sanitizedConnections = sanitizeSplitList(normalizedData.connectedSplits);\r\n  if (sanitizedConnections.length) {\r\n    normalizedData.connectedSplits = sanitizedConnections;\r\n  } else {\r\n    delete normalizedData.connectedSplits;\r\n  }\r\n\r\n  if (catalogType === 'train_test_split') {\r\n    normalizedData.activeSplits = [...SPLIT_TYPE_ORDER];\r\n    if (!sanitizedConnections.length) {\r\n      delete normalizedData.connectedSplits;\r\n    }\r\n  }\r\n\r\n  if (!normalizedData.parameters?.length) {\r\n    delete normalizedData.parameters;\r\n  }\r\n\r\n  if (normalizedData.config === undefined) {\r\n    delete normalizedData.config;\r\n  }\r\n\r\n  return {\r\n    ...rawNode,\r\n    type: 'featureNode',\r\n    position: rawNode.position ?? { x: 0, y: 0 },\r\n    data: normalizedData,\r\n    style: normalizedStyle,\r\n  };\r\n};\r\n\r\nexport const createNewNode = (\r\n  catalogNode: FeatureNodeCatalogEntry | null | undefined,\r\n  nodeId: string,\r\n  position: { x: number; y: number },\r\n  fallbackLabel: string,\r\n  deps: NodeInteractionDeps\r\n): Node => {\r\n  const rawLabel = catalogNode?.label ?? catalogNode?.type ?? fallbackLabel;\r\n  const label = typeof rawLabel === 'string' && rawLabel.trim() ? rawLabel : fallbackLabel;\r\n  const normalizedConfig = sanitizeDefaultConfigForNode(catalogNode);\r\n  const isAutoConfirmed = isAutoConfirmedCatalogType(catalogNode?.type ?? null);\r\n\r\n  return registerNodeInteractions(\r\n    {\r\n      id: nodeId,\r\n      type: 'featureNode',\r\n      position,\r\n      data: {\r\n        label,\r\n        description: catalogNode?.description,\r\n        inputs: catalogNode?.inputs,\r\n        outputs: catalogNode?.outputs,\r\n        category: catalogNode?.category,\r\n        parameters: catalogNode?.parameters,\r\n        config: normalizedConfig,\r\n        catalogType: catalogNode?.type,\r\n        isConfigured: isAutoConfirmed ? true : false,\r\n      },\r\n    },\r\n    deps\r\n  );\r\n};\r\n","import type { Edge, Node } from 'react-flow-renderer';\r\nimport { sanitizeSplitList, SPLIT_TYPE_ORDER, getSplitKeyFromHandle } from '../constants/splits';\r\nimport type { SplitTypeKey } from '../constants/splits';\r\nimport { extractHandleKey, NODE_HANDLE_CONFIG } from '../constants/nodeHandles';\r\n\r\nconst SPLIT_PROPAGATION_BLOCKED_TYPES = new Set([\r\n  'train_model_draft',\r\n  'model_registry_overview',\r\n  'model_evaluation',\r\n  'hyperparameter_tuning',\r\n]);\r\n\r\nconst getNodeRequiredConnections = (catalogType: string): string[] => {\r\n  const config = catalogType ? NODE_HANDLE_CONFIG[catalogType] : undefined;\r\n  if (!config?.inputs?.length) {\r\n    return [];\r\n  }\r\n  return config.inputs\r\n    .filter((definition) => definition.required !== false)\r\n    .map((definition) => definition.key);\r\n};\r\n\r\nexport const checkNodeConnectionStatus = (nodeId: string, catalogType: string, edges: Edge[]): boolean => {\r\n  const required = getNodeRequiredConnections(catalogType);\r\n  if (required.length === 0) {\r\n    return true;\r\n  }\r\n\r\n  const incomingEdges = edges.filter((edge) => edge.target === nodeId);\r\n  const connectedHandles = new Set(\r\n    incomingEdges\r\n      .map((edge) => extractHandleKey(nodeId, edge.targetHandle))\r\n      .filter((value): value is string => Boolean(value))\r\n  );\r\n\r\n  return required.every((req) => connectedHandles.has(req));\r\n};\r\n\r\nexport const computeActiveSplitMap = (nodes: Node[], edges: Edge[]): Map<string, SplitTypeKey[]> => {\r\n  const assignments = new Map<string, Set<SplitTypeKey>>();\r\n  const blockedNodeIds = new Set<string>();\r\n\r\n  nodes.forEach((node) => {\r\n    const catalogType = node?.data?.catalogType;\r\n    if (catalogType && SPLIT_PROPAGATION_BLOCKED_TYPES.has(catalogType)) {\r\n      blockedNodeIds.add(node.id);\r\n      return;\r\n    }\r\n\r\n    if (catalogType === 'train_test_split') {\r\n      assignments.set(node.id, new Set(SPLIT_TYPE_ORDER));\r\n    }\r\n  });\r\n\r\n  let changed = true;\r\n  let iterations = 0;\r\n  const maxIterations = nodes.length * 3;\r\n\r\n  while (changed && iterations < maxIterations) {\r\n    changed = false;\r\n    iterations++;\r\n\r\n    edges.forEach((edge) => {\r\n      if (blockedNodeIds.has(edge.source) || blockedNodeIds.has(edge.target)) {\r\n        return;\r\n      }\r\n\r\n      const sourceSplits = assignments.get(edge.source);\r\n      const splitKey = getSplitKeyFromHandle(edge.sourceHandle);\r\n\r\n      if (!sourceSplits || sourceSplits.size === 0) {\r\n        return;\r\n      }\r\n\r\n      if (!assignments.has(edge.target)) {\r\n        assignments.set(edge.target, new Set());\r\n      }\r\n\r\n      const targetSplits = assignments.get(edge.target)!;\r\n      const initialSize = targetSplits.size;\r\n\r\n      if (splitKey) {\r\n        if (sourceSplits.has(splitKey)) {\r\n          targetSplits.add(splitKey);\r\n        }\r\n      } else {\r\n        sourceSplits.forEach((split) => targetSplits.add(split));\r\n      }\r\n\r\n      if (targetSplits.size > initialSize) {\r\n        changed = true;\r\n      }\r\n    });\r\n  }\r\n\r\n  const orderedAssignments = new Map<string, SplitTypeKey[]>();\r\n  assignments.forEach((splitSet, nodeId) => {\r\n    if (!splitSet.size || blockedNodeIds.has(nodeId)) {\r\n      return;\r\n    }\r\n\r\n    orderedAssignments.set(\r\n      nodeId,\r\n      SPLIT_TYPE_ORDER.filter((key) => splitSet.has(key))\r\n    );\r\n  });\r\n\r\n  return orderedAssignments;\r\n};\r\n\r\nexport const computeSplitConnectionMap = (edges: Edge[]): Map<string, SplitTypeKey[]> => {\r\n  const connections = new Map<string, Set<SplitTypeKey>>();\r\n\r\n  edges.forEach((edge) => {\r\n    const splitKey = getSplitKeyFromHandle(edge.sourceHandle);\r\n    if (!splitKey) {\r\n      return;\r\n    }\r\n\r\n    if (!connections.has(edge.source)) {\r\n      connections.set(edge.source, new Set());\r\n    }\r\n\r\n    connections.get(edge.source)!.add(splitKey);\r\n  });\r\n\r\n  const orderedConnections = new Map<string, SplitTypeKey[]>();\r\n  connections.forEach((splitSet, nodeId) => {\r\n    orderedConnections.set(\r\n      nodeId,\r\n      SPLIT_TYPE_ORDER.filter((key) => splitSet.has(key))\r\n    );\r\n  });\r\n\r\n  return orderedConnections;\r\n};\r\n","import type { Edge, Node } from 'react-flow-renderer';\r\nimport { formatRelativeTime, formatTimestamp, parseServerTimestamp } from '../utils/time';\r\n\r\nexport const buildGraphSnapshot = (nodes: Node[], edges: Edge[]) => {\r\n  const sanitizedNodes = nodes.map((node) => {\r\n    const { data, ...rest } = node;\r\n    const sanitizedData = data ? { ...data } : undefined;\r\n    if (sanitizedData) {\r\n      delete sanitizedData.onRemoveNode;\r\n      delete sanitizedData.onOpenSettings;\r\n    }\r\n    return JSON.parse(\r\n      JSON.stringify({\r\n        ...rest,\r\n        data: sanitizedData,\r\n      })\r\n    );\r\n  });\r\n\r\n  const sanitizedEdges = edges.map((edge) => JSON.parse(JSON.stringify(edge)));\r\n\r\n  return {\r\n    nodes: sanitizedNodes,\r\n    edges: sanitizedEdges,\r\n  };\r\n};\r\n","// @ts-nocheck\r\nimport React, {\r\n  forwardRef,\r\n  useCallback,\r\n  useEffect,\r\n  useImperativeHandle,\r\n  useMemo,\r\n  useRef,\r\n  useState,\r\n} from 'react';\r\nimport ReactFlow, {\r\n  Background,\r\n  Connection,\r\n  ConnectionMode,\r\n  Controls,\r\n  Edge,\r\n  Node,\r\n  ReactFlowInstance,\r\n  addEdge,\r\n  useEdgesState,\r\n  useNodesState,\r\n  useUpdateNodeInternals,\r\n} from 'react-flow-renderer';\r\nimport { useQuery } from '@tanstack/react-query';\r\nimport AnimatedEdge from '../../../components/edges/AnimatedEdge';\r\nimport ConnectionLine from '../../../components/edges/ConnectionLine';\r\nimport { FeatureCanvasSidebar } from '../../../components/FeatureCanvasSidebar';\r\nimport { NodeSettingsModal } from '../../../components/NodeSettingsModal';\r\nimport FeatureCanvasNode from '../FeatureCanvasNode/FeatureCanvasNode';\r\nimport { fetchNodeCatalog, fetchPipeline } from '../../../api';\r\nimport type { FeatureNodeCatalogEntry } from '../../../api';\r\nimport {\r\n  cloneConfig,\r\n  sanitizeDefaultConfigForNode,\r\n  PENDING_CONFIRMATION_FLAG,\r\n  isAutoConfirmedCatalogType,\r\n} from '../../services/configSanitizer';\r\nimport {\r\n  getDefaultEdges,\r\n  getDefaultNodes,\r\n  getSamplePipelineGraph,\r\n  resolveDropPosition,\r\n} from '../../services/layout';\r\nimport {\r\n  registerNodeInteractions,\r\n  createNewNode,\r\n  isResettableCatalogEntry,\r\n} from '../../services/nodeFactory';\r\nimport {\r\n  computeActiveSplitMap,\r\n  computeSplitConnectionMap,\r\n  checkNodeConnectionStatus,\r\n} from '../../services/splitPropagation';\r\nimport {\r\n  areSplitArraysEqual,\r\n  sanitizeSplitList,\r\n  SPLIT_TYPE_ORDER,\r\n} from '../../constants/splits';\r\nimport {\r\n  CONNECTION_ACCEPT_MATCHERS,\r\n  NODE_HANDLE_CONFIG,\r\n  extractHandleKey,\r\n} from '../../constants/nodeHandles';\r\nimport { buildGraphSnapshot } from '../../services/graphSerialization';\r\nimport type { FeatureNodeData } from '../../types/nodes';\r\nimport type { CanvasShellHandle, CanvasShellProps } from '../../types/pipeline';\r\n\r\nconst CanvasShell = forwardRef<CanvasShellHandle, CanvasShellProps>(\r\n    ({ sourceId, datasetName, onGraphChange, onPipelineHydrated, onPipelineError }, ref) => {\r\n      const nodeTypes = useMemo(() => ({ featureNode: FeatureCanvasNode }), []);\r\n      const edgeTypes = useMemo(() => ({ animatedEdge: AnimatedEdge }), []);\r\n      const [nodes, setNodes, onNodesChange] = useNodesState(\r\n        getDefaultNodes().map((node) => ({\r\n          ...node,\r\n          type: 'featureNode',\r\n        }))\r\n      );\r\n      const [edges, setEdges, onEdgesChange] = useEdgesState(getDefaultEdges());\r\n      const hasInitialSampleHydratedRef = useRef(false);\r\n      const [isCatalogOpen, setIsCatalogOpen] = useState(false);\r\n      const [selectedNodeId, setSelectedNodeId] = useState<string | null>(null);\r\n      const [isSettingsModalOpen, setIsSettingsModalOpen] = useState(false);\r\n      const nodeIdRef = useRef(0);\r\n      const reactFlowInstanceRef = useRef<ReactFlowInstance | null>(null);\r\n      const canvasViewportRef = useRef<HTMLDivElement | null>(null);\r\n      const shouldFitViewRef = useRef(false);\r\n      const catalogEntryMapRef = useRef<Map<string, FeatureNodeCatalogEntry>>(new Map());\r\n      const datasetDisplayLabel = datasetName ?? sourceId ?? 'Demo dataset';\r\n      const updateNodeInternals = useUpdateNodeInternals();\r\n\r\n      const scheduleNodeInternalsUpdate = useCallback(\r\n        (nodeIds: string | string[]) => {\r\n          const ids = (Array.isArray(nodeIds) ? nodeIds : [nodeIds]).filter(Boolean);\r\n          if (!ids.length) {\r\n            return;\r\n          }\r\n\r\n          const uniqueIds = Array.from(new Set(ids));\r\n          requestAnimationFrame(() => {\r\n            requestAnimationFrame(() => {\r\n              uniqueIds.forEach((nodeId) => {\r\n                updateNodeInternals(nodeId);\r\n              });\r\n            });\r\n          });\r\n        },\r\n        [updateNodeInternals]\r\n      );\r\n\r\n      const updateNodeCounter = useCallback((list: Node[]) => {\r\n        const highestId = list.reduce((max, node) => {\r\n          if (typeof node.id === 'string' && node.id.startsWith('node-')) {\r\n            const parsed = Number(node.id.replace('node-', ''));\r\n            if (!Number.isNaN(parsed)) {\r\n              return Math.max(max, parsed);\r\n            }\r\n          }\r\n          return max;\r\n        }, 0);\r\n\r\n        if (highestId > nodeIdRef.current) {\r\n          nodeIdRef.current = highestId;\r\n        }\r\n      }, []);\r\n\r\n      useEffect(() => {\r\n        updateNodeCounter(nodes);\r\n      }, [nodes, updateNodeCounter]);\r\n\r\n      useEffect(() => {\r\n        const nodesWithHandleChanges: string[] = [];\r\n\r\n        setNodes((currentNodes) => {\r\n          const activeSplitMap = computeActiveSplitMap(currentNodes, edges);\r\n          const splitConnectionMap = computeSplitConnectionMap(edges);\r\n          let didChange = false;\r\n\r\n          const nextNodes = currentNodes.map((node) => {\r\n            const isSplitNodeType = node?.data?.catalogType === 'train_test_split';\r\n            const desiredSplits = isSplitNodeType\r\n              ? [...SPLIT_TYPE_ORDER]\r\n              : activeSplitMap.get(node.id) ?? [];\r\n            const currentSplits = sanitizeSplitList(node.data?.activeSplits);\r\n            const desiredConnections = sanitizeSplitList(splitConnectionMap.get(node.id));\r\n            const currentConnections = sanitizeSplitList(node.data?.connectedSplits);\r\n\r\n            const catalogType = node?.data?.catalogType ?? '';\r\n            const hasRequiredConnections = checkNodeConnectionStatus(node.id, catalogType, edges);\r\n            const currentHasRequiredConnections = node.data?.hasRequiredConnections ?? true;\r\n\r\n            const splitsChanged = !areSplitArraysEqual(currentSplits, desiredSplits);\r\n            const connectionsChanged = !areSplitArraysEqual(currentConnections, desiredConnections);\r\n            const connectionStatusChanged = hasRequiredConnections !== currentHasRequiredConnections;\r\n\r\n            if (!splitsChanged && !connectionsChanged && !connectionStatusChanged) {\r\n              return node;\r\n            }\r\n\r\n            const nextData = {\r\n              ...node.data,\r\n              hasRequiredConnections,\r\n            } as FeatureNodeData;\r\n\r\n            if (desiredSplits.length) {\r\n              nextData.activeSplits = desiredSplits;\r\n            } else {\r\n              delete nextData.activeSplits;\r\n            }\r\n\r\n            if (desiredConnections.length) {\r\n              nextData.connectedSplits = desiredConnections;\r\n            } else {\r\n              delete nextData.connectedSplits;\r\n            }\r\n\r\n            if (splitsChanged || connectionsChanged) {\r\n              nodesWithHandleChanges.push(node.id);\r\n            }\r\n\r\n            didChange = true;\r\n            return {\r\n              ...node,\r\n              data: nextData,\r\n            };\r\n          });\r\n\r\n          return didChange ? nextNodes : currentNodes;\r\n        });\r\n\r\n        if (nodesWithHandleChanges.length) {\r\n          scheduleNodeInternalsUpdate(nodesWithHandleChanges);\r\n        }\r\n      }, [edges, scheduleNodeInternalsUpdate, setNodes]);\r\n\r\n      const selectedNode = useMemo(\r\n        () => nodes.find((node) => node.id === selectedNodeId) ?? null,\r\n        [nodes, selectedNodeId]\r\n      );\r\n\r\n      const graphSnapshot = useMemo(() => buildGraphSnapshot(nodes, edges), [edges, nodes]);\r\n\r\n      const handleOpenSettings = useCallback((nodeId: string) => {\r\n        setSelectedNodeId(nodeId);\r\n        setIsSettingsModalOpen(true);\r\n      }, []);\r\n\r\n      const handleCloseSettings = useCallback(() => {\r\n        setIsSettingsModalOpen(false);\r\n        setSelectedNodeId(null);\r\n      }, []);\r\n\r\n      const scheduleFitView = useCallback(() => {\r\n        shouldFitViewRef.current = true;\r\n      }, []);\r\n\r\n      useEffect(() => {\r\n        if (!shouldFitViewRef.current) {\r\n          return;\r\n        }\r\n        shouldFitViewRef.current = false;\r\n        requestAnimationFrame(() => {\r\n          reactFlowInstanceRef.current?.fitView({ padding: 0.25, duration: 350 });\r\n        });\r\n      }, [edges, nodes]);\r\n\r\n      const handleRemoveNode = useCallback(\r\n        (nodeId: string) => {\r\n          if (nodeId === 'dataset-source') {\r\n            return;\r\n          }\r\n\r\n          setNodes((current) => current.filter((node) => node.id !== nodeId));\r\n          setEdges((current) => current.filter((edge) => edge.source !== nodeId && edge.target !== nodeId));\r\n          setSelectedNodeId((currentSelected) => {\r\n            if (currentSelected === nodeId) {\r\n              setIsSettingsModalOpen(false);\r\n              return null;\r\n            }\r\n            return currentSelected;\r\n          });\r\n        },\r\n        [setEdges, setIsSettingsModalOpen, setNodes]\r\n      );\r\n\r\n      const nodeCatalogQuery = useQuery({\r\n        queryKey: ['feature-canvas', 'node-catalog'],\r\n        queryFn: fetchNodeCatalog,\r\n        staleTime: 5 * 60 * 1000,\r\n      });\r\n\r\n      const nodeCatalog = nodeCatalogQuery.data ?? [];\r\n      const isCatalogLoading = nodeCatalogQuery.isLoading || nodeCatalogQuery.isFetching;\r\n      const catalogErrorMessage = nodeCatalogQuery.error\r\n        ? (nodeCatalogQuery.error as Error)?.message ?? 'Unable to load node catalog'\r\n        : null;\r\n\r\n      const pipelineQuery = useQuery({\r\n        queryKey: ['feature-canvas', 'pipeline', sourceId],\r\n        queryFn: () => fetchPipeline(sourceId as string),\r\n        enabled: Boolean(sourceId),\r\n        staleTime: 60 * 1000,\r\n        retry: 1,\r\n      });\r\n\r\n      const isPipelineLoading = pipelineQuery.isLoading || pipelineQuery.isFetching;\r\n\r\n      useEffect(() => {\r\n        const map = new Map<string, FeatureNodeCatalogEntry>();\r\n        nodeCatalog.forEach((entry) => {\r\n          if (entry && typeof entry.type === 'string' && entry.type.trim()) {\r\n            map.set(entry.type, entry);\r\n          }\r\n        });\r\n        catalogEntryMapRef.current = map;\r\n      }, [nodeCatalog]);\r\n\r\n      const registerNode = useCallback(\r\n        (node: Node) =>\r\n          registerNodeInteractions(node, {\r\n            handleOpenSettings,\r\n            handleRemoveNode,\r\n            catalogEntryMap: catalogEntryMapRef.current,\r\n          }),\r\n        [handleOpenSettings, handleRemoveNode]\r\n      );\r\n\r\n      const clearGraph = useCallback(() => {\r\n        setNodes((current) => {\r\n          const existingDataset = current.find((node) => node.id === 'dataset-source');\r\n\r\n          const datasetNode = registerNode(\r\n            existingDataset\r\n              ? {\r\n                  ...existingDataset,\r\n                  data: {\r\n                    ...(existingDataset.data ?? {}),\r\n                    label: `Dataset input\\n(${datasetDisplayLabel})`,\r\n                    isDataset: true,\r\n                    isRemovable: false,\r\n                    isConfigured: true,\r\n                  },\r\n                }\r\n              : {\r\n                  id: 'dataset-source',\r\n                  type: 'featureNode',\r\n                  position: { x: -200, y: 40 },\r\n                  data: {\r\n                    label: `Dataset input\\n(${datasetDisplayLabel})`,\r\n                    isDataset: true,\r\n                    isRemovable: false,\r\n                    isConfigured: true,\r\n                  },\r\n                }\r\n          );\r\n\r\n          return [datasetNode];\r\n        });\r\n\r\n        setEdges([]);\r\n        setSelectedNodeId(null);\r\n        setIsSettingsModalOpen(false);\r\n        scheduleFitView();\r\n      }, [datasetDisplayLabel, registerNode, scheduleFitView, setEdges, setNodes, setSelectedNodeId, setIsSettingsModalOpen]);\r\n\r\n      useImperativeHandle(\r\n        ref,\r\n        () => ({\r\n          openCatalog: () => setIsCatalogOpen(true),\r\n          closeCatalog: () => setIsCatalogOpen(false),\r\n          clearGraph,\r\n        }),\r\n        [clearGraph]\r\n      );\r\n\r\n      const prepareNodes = useCallback(\r\n        (rawNodes: Node[]) =>\r\n          rawNodes.map((node) => {\r\n            const baseData = {\r\n              ...(node.data ?? {}),\r\n            };\r\n            if (node.id === 'dataset-source') {\r\n              baseData.label = `Dataset input\\n(${datasetDisplayLabel})`;\r\n              baseData.isDataset = true;\r\n              baseData.isRemovable = false;\r\n              baseData.isConfigured = true;\r\n            }\r\n            const catalogType = baseData.catalogType ?? baseData.type ?? node.id;\r\n            if (baseData.config && typeof baseData.config === 'object' && isAutoConfirmedCatalogType(catalogType)) {\r\n              delete (baseData.config as Record<string, any>)[PENDING_CONFIRMATION_FLAG];\r\n            }\r\n            if (baseData.isConfigured === undefined) {\r\n              if (baseData.config && typeof baseData.config === 'object') {\r\n                baseData.isConfigured = isAutoConfirmedCatalogType(catalogType)\r\n                  ? true\r\n                  : !(baseData.config as Record<string, any>)[PENDING_CONFIRMATION_FLAG];\r\n              } else {\r\n                baseData.isConfigured = true;\r\n              }\r\n            }\r\n            return registerNode({\r\n              ...node,\r\n              data: baseData,\r\n            });\r\n          }),\r\n        [datasetDisplayLabel, registerNode]\r\n      );\r\n\r\n      const createNode = useCallback(\r\n        (catalogNode?: FeatureNodeCatalogEntry | null, position?: { x: number; y: number }) => {\r\n          const nextNumericId = nodeIdRef.current + 1;\r\n          const nodeId = `node-${nextNumericId}`;\r\n          nodeIdRef.current = nextNumericId;\r\n\r\n          const basePosition =\r\n            position ?? {\r\n              x: 160 + ((nextNumericId - 1) % 4) * 220,\r\n              y: 40 + Math.floor((nextNumericId - 1) / 4) * 160,\r\n            };\r\n\r\n          return registerNode(\r\n            createNewNode(catalogNode ?? null, nodeId, basePosition, `Step ${nextNumericId}`, {\r\n              handleOpenSettings,\r\n              handleRemoveNode,\r\n              catalogEntryMap: catalogEntryMapRef.current,\r\n            })\r\n          );\r\n        },\r\n        [handleOpenSettings, handleRemoveNode, registerNode]\r\n      );\r\n\r\n      const handleAddNode = useCallback(\r\n        (catalogNode: FeatureNodeCatalogEntry) => {\r\n          setNodes((current) => {\r\n            const dropPosition = resolveDropPosition(current, reactFlowInstanceRef.current, canvasViewportRef.current);\r\n            const newNode = createNode(catalogNode, dropPosition);\r\n            return [...current, newNode];\r\n          });\r\n          scheduleFitView();\r\n        },\r\n        [createNode, scheduleFitView, setNodes]\r\n      );\r\n\r\n      const handleUpdateNodeConfig = useCallback(\r\n        (nodeId: string, nextConfig: Record<string, any>) => {\r\n          setNodes((current) =>\r\n            current.map((node) => {\r\n              if (node.id !== nodeId) {\r\n                return node;\r\n              }\r\n\r\n              const sanitizedConfig = cloneConfig(nextConfig);\r\n              if (sanitizedConfig && typeof sanitizedConfig === 'object') {\r\n                delete (sanitizedConfig as Record<string, any>)[PENDING_CONFIRMATION_FLAG];\r\n              }\r\n\r\n              const baseData = {\r\n                ...(node.data ?? {}),\r\n                config: sanitizedConfig,\r\n                isConfigured: true,\r\n              };\r\n\r\n              return registerNode({\r\n                ...node,\r\n                data: baseData,\r\n              });\r\n            })\r\n          );\r\n        },\r\n        [registerNode, setNodes]\r\n      );\r\n\r\n      const handleUpdateNodeData = useCallback(\r\n        (nodeId: string, dataUpdates: Partial<FeatureNodeData>) => {\r\n          setNodes((current) =>\r\n            current.map((node) => {\r\n              if (node.id !== nodeId) {\r\n                return node;\r\n              }\r\n\r\n              const baseData = {\r\n                ...(node.data ?? {}),\r\n                ...dataUpdates,\r\n              };\r\n\r\n              return registerNode({\r\n                ...node,\r\n                data: baseData,\r\n              });\r\n            })\r\n          );\r\n        },\r\n        [registerNode, setNodes]\r\n      );\r\n\r\n      const handleResetNodeConfig = useCallback(\r\n        (nodeId: string, template?: Record<string, any> | null) => {\r\n          setNodes((current) =>\r\n            current.map((node) => {\r\n              if (node.id !== nodeId) {\r\n                return node;\r\n              }\r\n\r\n              const catalogType = node?.data?.catalogType;\r\n              const catalogEntry = catalogType ? catalogEntryMapRef.current.get(catalogType) ?? null : null;\r\n              const resolvedTemplate =\r\n                template && typeof template === 'object' ? cloneConfig(template) : sanitizeDefaultConfigForNode(catalogEntry ?? null);\r\n\r\n              const baseData = {\r\n                ...(node.data ?? {}),\r\n                config: resolvedTemplate,\r\n                isConfigured: false,\r\n                backgroundExecutionStatus: 'idle',\r\n              };\r\n\r\n              return registerNode({\r\n                ...node,\r\n                data: baseData,\r\n              });\r\n            })\r\n          );\r\n        },\r\n        [registerNode, setNodes]\r\n      );\r\n\r\n      const handleResetAllNodes = useCallback(() => {\r\n        setNodes((current) =>\r\n          current.map((node) => {\r\n            if (!isResettableCatalogEntry(node?.data?.catalogType, catalogEntryMapRef.current)) {\r\n              return node;\r\n            }\r\n\r\n            const catalogType = node?.data?.catalogType;\r\n            const catalogEntry = catalogType ? catalogEntryMapRef.current.get(catalogType) ?? null : null;\r\n            const sanitizedConfig = sanitizeDefaultConfigForNode(catalogEntry ?? null);\r\n\r\n            const baseData = {\r\n              ...(node.data ?? {}),\r\n              config: sanitizedConfig,\r\n              isConfigured: false,\r\n              backgroundExecutionStatus: 'idle',\r\n            };\r\n\r\n            return registerNode({\r\n              ...node,\r\n              data: baseData,\r\n            });\r\n          })\r\n        );\r\n      }, [registerNode, setNodes]);\r\n\r\n      const isValidConnection = useCallback(\r\n        (connection: Connection) => {\r\n          const { source, target, sourceHandle, targetHandle } = connection;\r\n\r\n          if (!source || !target || !targetHandle) {\r\n            return false;\r\n          }\r\n\r\n          if (source === target) {\r\n            return false;\r\n          }\r\n\r\n          const targetNode = nodes.find((node) => node.id === target);\r\n          if (!targetNode) {\r\n            return false;\r\n          }\r\n\r\n          const targetCatalogType = targetNode?.data?.catalogType ?? '';\r\n          const handleConfig = targetCatalogType ? NODE_HANDLE_CONFIG[targetCatalogType] : undefined;\r\n\r\n          if (handleConfig?.inputs?.length) {\r\n            const handleKey = extractHandleKey(target, targetHandle);\r\n            if (!handleKey) {\r\n              return false;\r\n            }\r\n\r\n            const inputDefinition = handleConfig.inputs.find((definition) => definition.key === handleKey);\r\n            if (!inputDefinition) {\r\n              return false;\r\n            }\r\n\r\n            if (!sourceHandle) {\r\n              return false;\r\n            }\r\n\r\n            if (inputDefinition.accepts && inputDefinition.accepts.length > 0) {\r\n              return inputDefinition.accepts.some((matcherKey) => {\r\n                const matcher = CONNECTION_ACCEPT_MATCHERS[matcherKey];\r\n                return matcher ? matcher(sourceHandle) : false;\r\n              });\r\n            }\r\n\r\n            return true;\r\n          }\r\n\r\n          return true;\r\n        },\r\n        [nodes]\r\n      );\r\n\r\n      const onConnect = useCallback(\r\n        (params: Edge | Connection) => {\r\n          setEdges((eds) =>\r\n            addEdge(\r\n              {\r\n                ...params,\r\n                type: 'animatedEdge',\r\n                animated: true,\r\n              },\r\n              eds\r\n            )\r\n          );\r\n\r\n          const impactedNodes = [params.source as string | undefined, params.target as string | undefined].filter(\r\n            (value): value is string => Boolean(value)\r\n          );\r\n          if (impactedNodes.length) {\r\n            scheduleNodeInternalsUpdate(impactedNodes);\r\n          }\r\n        },\r\n        [scheduleNodeInternalsUpdate, setEdges]\r\n      );\r\n\r\n      useEffect(() => {\r\n        const datasetNodeLabel = `Dataset input\\n(${datasetDisplayLabel})`;\r\n\r\n        if (!sourceId) {\r\n          if (!hasInitialSampleHydratedRef.current) {\r\n            const sample = getSamplePipelineGraph(datasetDisplayLabel);\r\n            const preparedNodes = prepareNodes(sample.nodes);\r\n            hasInitialSampleHydratedRef.current = true;\r\n            setNodes(preparedNodes);\r\n            setEdges(sample.edges);\r\n            updateNodeCounter(preparedNodes);\r\n            scheduleFitView();\r\n            onPipelineHydrated?.({ nodes: preparedNodes, edges: sample.edges, pipeline: null, context: 'sample' });\r\n          } else {\r\n            setNodes((existing) => {\r\n              let changed = false;\r\n              const next = existing.map((node) => {\r\n                if (node.id !== 'dataset-source') {\r\n                  return node;\r\n                }\r\n                const currentLabel = node?.data?.label ?? '';\r\n                if (currentLabel === datasetNodeLabel) {\r\n                  return node;\r\n                }\r\n                changed = true;\r\n                return registerNode({\r\n                  ...node,\r\n                  data: {\r\n                    ...(node.data ?? {}),\r\n                    label: datasetNodeLabel,\r\n                    isDataset: true,\r\n                    isRemovable: false,\r\n                  },\r\n                });\r\n              });\r\n              return changed ? next : existing;\r\n            });\r\n          }\r\n\r\n          return;\r\n        }\r\n\r\n        hasInitialSampleHydratedRef.current = false;\r\n\r\n        if (pipelineQuery.isLoading) {\r\n          setNodes((existing) =>\r\n            existing.map((node) =>\r\n              node.id === 'dataset-source'\r\n                ? registerNode({\r\n                    ...node,\r\n                    data: {\r\n                      ...(node.data ?? {}),\r\n                      label: datasetNodeLabel,\r\n                      isDataset: true,\r\n                      isRemovable: false,\r\n                    },\r\n                  })\r\n                : node\r\n            )\r\n          );\r\n          return;\r\n        }\r\n\r\n        if (pipelineQuery.isError) {\r\n          const pipelineError = (pipelineQuery.error as Error) ?? new Error('Failed to load saved pipeline');\r\n          console.error('Failed to load saved pipeline', pipelineError);\r\n          onPipelineError?.(pipelineError);\r\n          const defaultNodes = getDefaultNodes().map((n) =>\r\n            n.id === 'dataset-source'\r\n              ? {\r\n                  ...n,\r\n                  data: {\r\n                    ...(n.data ?? {}),\r\n                    label: datasetNodeLabel,\r\n                    isDataset: true,\r\n                    isRemovable: false,\r\n                  },\r\n                }\r\n              : n\r\n          );\r\n          const preparedNodes = prepareNodes(defaultNodes);\r\n          setNodes(preparedNodes);\r\n          setEdges([]);\r\n          updateNodeCounter(preparedNodes);\r\n          scheduleFitView();\r\n          onPipelineHydrated?.({ nodes: preparedNodes, edges: [], pipeline: null, context: 'reset' });\r\n          return;\r\n        }\r\n\r\n        if (pipelineQuery.data) {\r\n          const graph = pipelineQuery.data.graph ?? {};\r\n          const rawNodes = Array.isArray(graph?.nodes) && graph.nodes.length ? (graph.nodes as Node[]) : getDefaultNodes();\r\n          const hydratedNodes = prepareNodes(rawNodes);\r\n          const rawEdges = Array.isArray(graph?.edges) ? graph.edges : [];\r\n          const hydratedEdges = rawEdges.map((edge: any) => {\r\n            const existingType = edge?.type;\r\n            const type = !existingType || existingType === 'smoothstep' || existingType === 'default' ? 'animatedEdge' : existingType;\r\n            const sourceNodeId = edge?.source;\r\n            const targetNodeId = edge?.target;\r\n            const targetNode = hydratedNodes.find((node) => node.id === targetNodeId);\r\n            const normalizedSourceHandle = edge?.sourceHandle ?? (sourceNodeId ? `${sourceNodeId}-source` : undefined);\r\n            const normalizedTargetHandle =\r\n              edge?.targetHandle ?? (targetNode?.data?.isDataset ? undefined : targetNodeId ? `${targetNodeId}-target` : undefined);\r\n            return {\r\n              ...edge,\r\n              animated: edge?.animated ?? true,\r\n              type,\r\n              sourceHandle: normalizedSourceHandle,\r\n              targetHandle: normalizedTargetHandle,\r\n            };\r\n          });\r\n\r\n          setNodes(hydratedNodes);\r\n          setEdges(hydratedEdges);\r\n          updateNodeCounter(hydratedNodes);\r\n          scheduleFitView();\r\n          onPipelineHydrated?.({\r\n            nodes: hydratedNodes,\r\n            edges: hydratedEdges,\r\n            pipeline: pipelineQuery.data ?? null,\r\n            context: 'stored',\r\n          });\r\n          return;\r\n        }\r\n\r\n        if (pipelineQuery.isFetched && !pipelineQuery.data) {\r\n          const defaultNodes = getDefaultNodes().map((n) =>\r\n            n.id === 'dataset-source'\r\n              ? {\r\n                  ...n,\r\n                  data: {\r\n                    ...(n.data ?? {}),\r\n                    label: datasetNodeLabel,\r\n                    isDataset: true,\r\n                    isRemovable: false,\r\n                  },\r\n                }\r\n              : n\r\n          );\r\n          const preparedNodes = prepareNodes(defaultNodes);\r\n          setNodes(preparedNodes);\r\n          setEdges([]);\r\n          updateNodeCounter(preparedNodes);\r\n          scheduleFitView();\r\n          onPipelineHydrated?.({ nodes: preparedNodes, edges: [], pipeline: null, context: 'sample' });\r\n        }\r\n      }, [\r\n        datasetDisplayLabel,\r\n        onPipelineHydrated,\r\n        onPipelineError,\r\n        pipelineQuery.data,\r\n        pipelineQuery.error,\r\n        pipelineQuery.isError,\r\n        pipelineQuery.isFetched,\r\n        pipelineQuery.isLoading,\r\n        prepareNodes,\r\n        registerNode,\r\n        scheduleFitView,\r\n        setEdges,\r\n        setNodes,\r\n        sourceId,\r\n        updateNodeCounter,\r\n      ]);\r\n\r\n      useEffect(() => {\r\n        onGraphChange?.(nodes, edges);\r\n      }, [edges, nodes, onGraphChange]);\r\n\r\n      const selectedNodeDefaultConfig = useMemo(() => {\r\n        if (!selectedNode) {\r\n          return null;\r\n        }\r\n        const catalogType = selectedNode?.data?.catalogType;\r\n        if (!catalogType) {\r\n          return null;\r\n        }\r\n        const catalogEntry = catalogEntryMapRef.current.get(catalogType);\r\n        if (!catalogEntry) {\r\n          return null;\r\n        }\r\n        return sanitizeDefaultConfigForNode(catalogEntry);\r\n      }, [selectedNode]);\r\n\r\n      const canResetSelectedNode = useMemo(() => {\r\n        if (!selectedNode) {\r\n          return false;\r\n        }\r\n        if (selectedNode.data?.isDataset) {\r\n          return false;\r\n        }\r\n        const catalogType = selectedNode?.data?.catalogType;\r\n        return isResettableCatalogEntry(typeof catalogType === 'string' ? catalogType : null, catalogEntryMapRef.current);\r\n      }, [selectedNode]);\r\n\r\n      const sidebarContent = useMemo(() => {\r\n        if (isCatalogLoading) {\r\n          return <p className=\"text-muted\">Loading node catalog</p>;\r\n        }\r\n        if (catalogErrorMessage) {\r\n          return <p className=\"text-danger\">{catalogErrorMessage}</p>;\r\n        }\r\n        if (!nodeCatalog.length) {\r\n          return <p className=\"text-muted\">Node catalog unavailable. Define nodes in the backend to continue.</p>;\r\n        }\r\n        return <FeatureCanvasSidebar nodes={nodeCatalog} onAddNode={handleAddNode} />;\r\n      }, [catalogErrorMessage, handleAddNode, isCatalogLoading, nodeCatalog]);\r\n\r\n      const handleNodeClick = useCallback(\r\n        (_: React.MouseEvent, node: Node) => {\r\n          handleOpenSettings(node.id);\r\n        },\r\n        [handleOpenSettings]\r\n      );\r\n\r\n      return (\r\n        <div\r\n          className=\"canvas-stage\"\r\n          data-pipeline-loading={isPipelineLoading ? 'true' : 'false'}\r\n          aria-busy={isPipelineLoading}\r\n        >\r\n          <div\r\n            className=\"canvas-stage__viewport\"\r\n            ref={canvasViewportRef}\r\n          >\r\n            <ReactFlow\r\n              style={{ width: '100%', height: '100%' }}\r\n              nodes={nodes}\r\n              edges={edges}\r\n              nodeTypes={nodeTypes}\r\n              edgeTypes={edgeTypes}\r\n              onNodesChange={onNodesChange}\r\n              onEdgesChange={onEdgesChange}\r\n              onConnect={onConnect}\r\n              isValidConnection={isValidConnection}\r\n              onNodeClick={handleNodeClick}\r\n              onInit={(instance) => {\r\n                reactFlowInstanceRef.current = instance;\r\n                requestAnimationFrame(() => instance.fitView({ padding: 0.25 }));\r\n              }}\r\n              minZoom={0.5}\r\n              maxZoom={1.75}\r\n              connectionRadius={180}\r\n              connectionMode={ConnectionMode.Loose}\r\n              connectOnClick\r\n              nodeDragHandle=\".feature-node__drag-handle\"\r\n              proOptions={{ hideAttribution: true }}\r\n              defaultEdgeOptions={{\r\n                type: 'animatedEdge',\r\n                animated: true,\r\n                style: { strokeWidth: 3 },\r\n              }}\r\n              connectionLineComponent={ConnectionLine}\r\n              elevateEdgesOnSelect={true}\r\n              edgesUpdatable={false}\r\n            >\r\n              <Controls position=\"bottom-left\" />\r\n              <Background gap={16} />\r\n            </ReactFlow>\r\n\r\n            <button\r\n              type=\"button\"\r\n              className=\"canvas-fab canvas-fab--reset\"\r\n              onClick={handleResetAllNodes}\r\n              aria-label=\"Reset preprocessing nodes\"\r\n            >\r\n              \r\n            </button>\r\n\r\n            <button\r\n              type=\"button\"\r\n              className=\"canvas-fab\"\r\n              onClick={() => setIsCatalogOpen(true)}\r\n              aria-label=\"Open node catalog\"\r\n            >\r\n              +\r\n            </button>\r\n          </div>\r\n\r\n          <div className={`canvas-drawer${isCatalogOpen ? ' canvas-drawer--open' : ''}`}>\r\n            <div className=\"canvas-drawer__header\">\r\n              <h2>Node catalog</h2>\r\n              <button\r\n                type=\"button\"\r\n                className=\"canvas-drawer__close\"\r\n                onClick={() => setIsCatalogOpen(false)}\r\n                aria-label=\"Close catalog\"\r\n              >\r\n                \r\n              </button>\r\n            </div>\r\n            <div className=\"canvas-drawer__body\">{sidebarContent}</div>\r\n          </div>\r\n\r\n          {isCatalogOpen && <div className=\"canvas-drawer__backdrop\" onClick={() => setIsCatalogOpen(false)} />}\r\n\r\n          {isSettingsModalOpen && selectedNode && (\r\n            <NodeSettingsModal\r\n              node={selectedNode}\r\n              sourceId={sourceId ?? null}\r\n              graphSnapshot={graphSnapshot}\r\n              onClose={handleCloseSettings}\r\n              onUpdateConfig={handleUpdateNodeConfig}\r\n              onUpdateNodeData={handleUpdateNodeData}\r\n              onResetConfig={handleResetNodeConfig}\r\n              defaultConfigTemplate={selectedNodeDefaultConfig}\r\n              isResetAvailable={canResetSelectedNode}\r\n            />\r\n          )}\r\n        </div>\r\n      );\r\n    }\r\n  );\r\n\r\n  export default CanvasShell;\r\n","export const parseServerTimestamp = (value?: string | null): Date | null => {\r\n  if (!value) {\r\n    return null;\r\n  }\r\n\r\n  let normalized = value.trim();\r\n  if (!normalized) {\r\n    return null;\r\n  }\r\n\r\n  if (/^\\d{4}-\\d{2}-\\d{2}\\s+\\d/.test(normalized)) {\r\n    normalized = normalized.replace(' ', 'T');\r\n  }\r\n\r\n  if (!/(Z|z|[+-]\\d{2}:?\\d{2})$/.test(normalized)) {\r\n    normalized = `${normalized}Z`;\r\n  }\r\n\r\n  const parsed = new Date(normalized);\r\n  if (Number.isNaN(parsed.getTime())) {\r\n    return null;\r\n  }\r\n\r\n  return parsed;\r\n};\r\n\r\nexport const formatTimestamp = (value?: string | null) => {\r\n  const date = parseServerTimestamp(value);\r\n  if (!date) {\r\n    return 'Unknown time';\r\n  }\r\n\r\n  return date.toLocaleString(undefined, {\r\n    dateStyle: 'medium',\r\n    timeStyle: 'short',\r\n  });\r\n};\r\n\r\nexport const formatRelativeTime = (value?: string | null) => {\r\n  const parsed = parseServerTimestamp(value);\r\n  if (!parsed) {\r\n    return null;\r\n  }\r\n\r\n  const timestamp = parsed.getTime();\r\n  const diffMs = Date.now() - timestamp;\r\n  const diffMinutes = Math.round(diffMs / 60000);\r\n\r\n  if (diffMinutes < 1) {\r\n    return 'just now';\r\n  }\r\n  if (diffMinutes === 1) {\r\n    return '1 minute ago';\r\n  }\r\n  if (diffMinutes < 60) {\r\n    return `${diffMinutes} minutes ago`;\r\n  }\r\n\r\n  const diffHours = Math.round(diffMinutes / 60);\r\n  if (diffHours === 1) {\r\n    return '1 hour ago';\r\n  }\r\n  if (diffHours < 24) {\r\n    return `${diffHours} hours ago`;\r\n  }\r\n\r\n  const diffDays = Math.round(diffHours / 24);\r\n  if (diffDays === 1) {\r\n    return '1 day ago';\r\n  }\r\n  if (diffDays < 7) {\r\n    return `${diffDays} days ago`;\r\n  }\r\n\r\n  const diffWeeks = Math.round(diffDays / 7);\r\n  if (diffWeeks === 1) {\r\n    return '1 week ago';\r\n  }\r\n\r\n  return `${diffWeeks} weeks ago`;\r\n};\r\n","import React from 'react';\r\nimport type { DatasetSourceSummary, FeaturePipelineResponse } from '../../../api';\r\nimport type { SaveFeedback } from '../../types/feedback';\r\nimport { formatRelativeTime, formatTimestamp } from '../../utils/time';\r\n\r\nexport type DatasetOption = {\r\n  value: string;\r\n  label: string;\r\n  isOwned: boolean;\r\n};\r\n\r\nexport type CanvasSidepanelProps = {\r\n  activePipelineUpdatedAt: string | null;\r\n  datasetErrorMessage: string | null;\r\n  isDatasetLoading: boolean;\r\n  hasDatasets: boolean;\r\n  ownedDatasetsCount: number;\r\n  canSelectDatasets: boolean;\r\n  datasetOptions: DatasetOption[];\r\n  selectedDataset: DatasetSourceSummary | null;\r\n  activeSourceId: string | null;\r\n  canClearCanvas: boolean;\r\n  onDatasetSelection: (value: string) => void;\r\n  onClearCanvas: () => void;\r\n  onRefreshHistory: () => void;\r\n  onSaveClick: () => void;\r\n  isHistoryLoading: boolean;\r\n  historyErrorMessage: string | null;\r\n  historyItems: FeaturePipelineResponse[];\r\n  activePipelineId: number | null;\r\n  isDirty: boolean;\r\n  isSaveDisabled: boolean;\r\n  saveButtonLabel: string;\r\n  saveFeedback: SaveFeedback | null;\r\n  feedbackIcon: string;\r\n  feedbackClass: string;\r\n  onSelectHistory: (item: FeaturePipelineResponse) => void;\r\n};\r\n\r\nexport const CanvasSidepanel: React.FC<CanvasSidepanelProps> = ({\r\n  activePipelineUpdatedAt,\r\n  datasetErrorMessage,\r\n  isDatasetLoading,\r\n  hasDatasets,\r\n  ownedDatasetsCount,\r\n  canSelectDatasets,\r\n  datasetOptions,\r\n  selectedDataset,\r\n  activeSourceId,\r\n  canClearCanvas,\r\n  onDatasetSelection,\r\n  onClearCanvas,\r\n  onRefreshHistory,\r\n  onSaveClick,\r\n  isHistoryLoading,\r\n  historyErrorMessage,\r\n  historyItems,\r\n  activePipelineId,\r\n  isDirty,\r\n  isSaveDisabled,\r\n  saveButtonLabel,\r\n  saveFeedback,\r\n  feedbackIcon,\r\n  feedbackClass,\r\n  onSelectHistory,\r\n}) => {\r\n  const datasetMetaLabel = activeSourceId ? selectedDataset?.name ?? activeSourceId : null;\r\n\r\n  return (\r\n    <aside\r\n      id=\"feature-canvas-sidepanel\"\r\n      className=\"canvas-sidepanel\"\r\n      role=\"complementary\"\r\n      aria-label=\"Canvas details\"\r\n    >\r\n      <div className=\"canvas-sidepanel__content\" role=\"group\" aria-label=\"Canvas controls\">\r\n        <section className=\"canvas-sidepanel__section\">\r\n          <div className=\"canvas-sidepanel__section-heading\">\r\n            <h2>Dataset</h2>\r\n            {activePipelineUpdatedAt && (\r\n              <span className=\"canvas-sidepanel__meta\">\r\n                {formatRelativeTime(activePipelineUpdatedAt) ?? formatTimestamp(activePipelineUpdatedAt)}\r\n              </span>\r\n            )}\r\n          </div>\r\n          {datasetErrorMessage ? (\r\n            <p className=\"text-danger\">{datasetErrorMessage}</p>\r\n          ) : ownedDatasetsCount ? (\r\n            <div className=\"canvas-sidepanel__select-wrapper\">\r\n              <select\r\n                className=\"canvas-sidepanel__select\"\r\n                value={activeSourceId ?? ''}\r\n                onChange={(event) => onDatasetSelection(event.target.value)}\r\n                disabled={isDatasetLoading || !canSelectDatasets}\r\n                aria-label=\"Select dataset\"\r\n              >\r\n                {datasetOptions.map((option) => (\r\n                  <option key={option.value} value={option.value} disabled={!option.isOwned}>\r\n                    {`${option.label}${option.isOwned ? '' : ' (locked)'}`}\r\n                  </option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n          ) : (\r\n            <p className=\"text-muted\">Dataset switching is limited to collections you own.</p>\r\n          )}\r\n          {isDatasetLoading && <p className=\"text-muted\">Loading datasets</p>}\r\n          {!isDatasetLoading && !hasDatasets && !datasetErrorMessage && (\r\n            <p className=\"text-muted\">No datasets available. Send one from EDA to get started.</p>\r\n          )}\r\n          {selectedDataset?.description && (\r\n            <p className=\"canvas-sidepanel__description\">{selectedDataset.description}</p>\r\n          )}\r\n          {datasetMetaLabel && (\r\n            <p className=\"canvas-sidepanel__meta\">\r\n              Working with <strong>{datasetMetaLabel}</strong>\r\n            </p>\r\n          )}\r\n          {!canSelectDatasets && ownedDatasetsCount > 0 && (\r\n            <p className=\"canvas-sidepanel__hint\">Add more owned datasets to switch between them.</p>\r\n          )}\r\n        </section>\r\n\r\n        <section className=\"canvas-sidepanel__section\">\r\n          <div className=\"canvas-sidepanel__section-action\">\r\n            <button\r\n              type=\"button\"\r\n              className=\"canvas-sidepanel__action-button\"\r\n              onClick={onClearCanvas}\r\n              disabled={!canClearCanvas}\r\n              aria-label=\"Clean all nodes\"\r\n              title={canClearCanvas ? 'Remove all nodes and edges from the canvas' : 'Nothing to clean yet'}\r\n            >\r\n              <span aria-hidden=\"true\"></span>\r\n              <span>Clean all nodes</span>\r\n            </button>\r\n          </div>\r\n          <div className=\"canvas-sidepanel__section-heading\">\r\n            <h2>History</h2>\r\n            <div className=\"canvas-sidepanel__section-controls\">\r\n              <button\r\n                type=\"button\"\r\n                className=\"canvas-sidepanel__icon-button\"\r\n                onClick={onRefreshHistory}\r\n                disabled={isHistoryLoading || !activeSourceId}\r\n                aria-label=\"Refresh history\"\r\n                title=\"Refresh history\"\r\n              >\r\n                \r\n              </button>\r\n              <button\r\n                type=\"button\"\r\n                className=\"canvas-sidepanel__icon-button\"\r\n                onClick={onSaveClick}\r\n                disabled={isSaveDisabled}\r\n                aria-label={saveButtonLabel}\r\n                title={saveButtonLabel}\r\n              >\r\n                \r\n              </button>\r\n            </div>\r\n          </div>\r\n          <div className=\"canvas-sidepanel__history\">\r\n            {isHistoryLoading ? (\r\n              <p className=\"text-muted\">Loading history</p>\r\n            ) : historyErrorMessage ? (\r\n              <p className=\"text-danger\">{historyErrorMessage}</p>\r\n            ) : historyItems.length ? (\r\n              historyItems.map((item) => {\r\n                const relative = formatRelativeTime(item.updated_at);\r\n                const timestampLabel = relative ?? formatTimestamp(item.updated_at);\r\n                const matchesActive = item.id === activePipelineId;\r\n                const disableSelection = matchesActive && !isDirty;\r\n\r\n                return (\r\n                  <button\r\n                    key={item.id}\r\n                    type=\"button\"\r\n                    className={`canvas-sidepanel__history-item${\r\n                      matchesActive ? ' canvas-sidepanel__history-item--active' : ''\r\n                    }`}\r\n                    onClick={() => onSelectHistory(item)}\r\n                    disabled={disableSelection}\r\n                  >\r\n                    <span className=\"canvas-sidepanel__history-title\">\r\n                      {item.name || `Pipeline #${item.id}`}\r\n                    </span>\r\n                    <span className=\"canvas-sidepanel__history-meta\">{timestampLabel}</span>\r\n                    {matchesActive && isDirty && (\r\n                      <span className=\"canvas-sidepanel__history-badge\">Unsaved edits</span>\r\n                    )}\r\n                  </button>\r\n                );\r\n              })\r\n            ) : (\r\n              <p className=\"text-muted\">No saved revisions yet. Save a draft to populate history.</p>\r\n            )}\r\n          </div>\r\n        </section>\r\n      </div>\r\n\r\n      {saveFeedback && (\r\n        <p className={`canvas-sidepanel__feedback ${feedbackClass}`}>\r\n          <span className=\"canvas-sidepanel__feedback-icon\" aria-hidden=\"true\">{feedbackIcon}</span>\r\n          <span className=\"canvas-sidepanel__feedback-text\">{saveFeedback.message}</span>\r\n        </p>\r\n      )}\r\n    </aside>\r\n  );\r\n};\r\n","import { useEffect, useMemo, useState } from 'react';\r\nimport { useQuery } from '@tanstack/react-query';\r\nimport type { DatasetSourceSummary } from '../../api';\r\nimport { fetchDatasets } from '../../api';\r\n\r\nexport type DatasetOption = {\r\n  value: string;\r\n  label: string;\r\n  isOwned: boolean;\r\n};\r\n\r\nexport type UseDatasetSelectionResult = {\r\n  datasets: DatasetSourceSummary[];\r\n  ownedDatasets: DatasetSourceSummary[];\r\n  selectedDataset: DatasetSourceSummary | null;\r\n  setSelectedDataset: React.Dispatch<React.SetStateAction<DatasetSourceSummary | null>>;\r\n  activeSourceId: string | null;\r\n  setActiveSourceId: React.Dispatch<React.SetStateAction<string | null>>;\r\n  datasetOptions: DatasetOption[];\r\n  canSelectDatasets: boolean;\r\n  hasDatasets: boolean;\r\n  ownedDatasetsCount: number;\r\n  isDatasetLoading: boolean;\r\n  datasetErrorMessage: string | null;\r\n};\r\n\r\nexport const useDatasetSelection = (initialSourceId?: string | null): UseDatasetSelectionResult => {\r\n  const [activeSourceId, setActiveSourceId] = useState<string | null>(initialSourceId ?? null);\r\n  const [selectedDataset, setSelectedDataset] = useState<DatasetSourceSummary | null>(null);\r\n\r\n  const datasetsQuery = useQuery({\r\n    queryKey: ['feature-canvas', 'datasets'],\r\n    queryFn: () => fetchDatasets(12),\r\n    staleTime: 5 * 60 * 1000,\r\n  });\r\n\r\n  const datasets = datasetsQuery.data ?? [];\r\n  const ownedDatasets = useMemo(\r\n    () => datasets.filter((item) => item?.is_owned !== false),\r\n    [datasets]\r\n  );\r\n\r\n  useEffect(() => {\r\n    if (!datasets.length) {\r\n      setSelectedDataset(null);\r\n      return;\r\n    }\r\n\r\n    if (activeSourceId) {\r\n      const match = datasets.find((item) => item.source_id === activeSourceId);\r\n      if (match) {\r\n        setSelectedDataset((previous) => (previous?.id === match.id ? previous : match));\r\n        return;\r\n      }\r\n    }\r\n\r\n    const fallback = ownedDatasets[0] ?? datasets[0];\r\n    if (!fallback) {\r\n      return;\r\n    }\r\n\r\n    if (!activeSourceId) {\r\n      setActiveSourceId(fallback.source_id ?? String(fallback.id));\r\n    }\r\n    setSelectedDataset(fallback);\r\n  }, [activeSourceId, datasets, ownedDatasets]);\r\n\r\n  const datasetOptions = useMemo(\r\n    () =>\r\n      datasets.map((item) => ({\r\n        value: item.source_id,\r\n        label: item.name ?? item.source_id,\r\n        isOwned: item.is_owned !== false,\r\n      })),\r\n    [datasets]\r\n  );\r\n\r\n  const canSelectDatasets = ownedDatasets.length > 1;\r\n  const hasDatasets = datasets.length > 0;\r\n  const ownedDatasetsCount = ownedDatasets.length;\r\n\r\n  const datasetErrorMessage = datasetsQuery.error\r\n    ? (datasetsQuery.error as Error)?.message ?? 'Unable to load datasets'\r\n    : null;\r\n\r\n  return {\r\n    datasets,\r\n    ownedDatasets,\r\n    selectedDataset,\r\n    setSelectedDataset,\r\n    activeSourceId,\r\n    setActiveSourceId,\r\n    datasetOptions,\r\n    canSelectDatasets,\r\n    hasDatasets,\r\n    ownedDatasetsCount,\r\n    isDatasetLoading: datasetsQuery.isLoading,\r\n    datasetErrorMessage,\r\n  };\r\n};\r\n","import { useCallback, type Dispatch, type MutableRefObject, type SetStateAction } from 'react';\r\nimport { useDatasetSelection } from './useDatasetSelection';\r\nimport type { SaveFeedback } from '../types/feedback';\r\n\r\ntype UseDatasetSelectionHandlerOptions = {\r\n  sourceId?: string | null;\r\n  setIsDirty: Dispatch<SetStateAction<boolean>>;\r\n  setSaveFeedback: Dispatch<SetStateAction<SaveFeedback | null>>;\r\n  isHydratingRef: MutableRefObject<boolean>;\r\n};\r\n\r\nexport const useDatasetSelectionHandler = ({\r\n  sourceId,\r\n  setIsDirty,\r\n  setSaveFeedback,\r\n  isHydratingRef,\r\n}: UseDatasetSelectionHandlerOptions) => {\r\n  const selectionState = useDatasetSelection(sourceId);\r\n  const { datasets, setActiveSourceId, setSelectedDataset } = selectionState;\r\n\r\n  const handleDatasetSelection = useCallback(\r\n    (value: string) => {\r\n      const match = datasets.find((item) => item.source_id === value) ?? null;\r\n      if (!match) {\r\n        setSaveFeedback({ message: 'Dataset unavailable. Choose another option.', tone: 'error' });\r\n        return;\r\n      }\r\n\r\n      if (match.is_owned === false) {\r\n        setSaveFeedback({ message: 'Only datasets you own can be selected.', tone: 'error' });\r\n        return;\r\n      }\r\n\r\n      setActiveSourceId(value);\r\n      setSelectedDataset(match);\r\n      isHydratingRef.current = true;\r\n      setIsDirty(false);\r\n      setSaveFeedback(null);\r\n    },\r\n    [datasets, isHydratingRef, setActiveSourceId, setIsDirty, setSaveFeedback, setSelectedDataset]\r\n  );\r\n\r\n  return {\r\n    ...selectionState,\r\n    handleDatasetSelection,\r\n  };\r\n};\r\n","import { useCallback, useRef, useState, type Dispatch, type MutableRefObject, type SetStateAction } from 'react';\r\nimport type { Edge, Node } from 'react-flow-renderer';\r\nimport type { SaveFeedback } from '../types/feedback';\r\n\r\ntype Snapshot = {\r\n  nodes: Node[];\r\n  edges: Edge[];\r\n};\r\n\r\ntype UseCanvasSnapshotStateOptions = {\r\n  setIsDirty: Dispatch<SetStateAction<boolean>>;\r\n  setSaveFeedback: Dispatch<SetStateAction<SaveFeedback | null>>;\r\n  isHydratingRef: MutableRefObject<boolean>;\r\n};\r\n\r\ntype HydratedSnapshotResult = {\r\n  hasCustomNodes: boolean;\r\n  hasEdges: boolean;\r\n};\r\n\r\ntype UseCanvasSnapshotStateResult = {\r\n  graphSnapshotRef: MutableRefObject<Snapshot>;\r\n  canClearCanvas: boolean;\r\n  handleGraphChange: (nodes: Node[], edges: Edge[]) => void;\r\n  applyHydratedSnapshot: (nodes?: Node[], edges?: Edge[]) => HydratedSnapshotResult;\r\n};\r\n\r\nconst cloneGraphSnapshot = (nodes?: Node[], edges?: Edge[]): Snapshot => ({\r\n  nodes: JSON.parse(JSON.stringify(nodes ?? [])),\r\n  edges: JSON.parse(JSON.stringify(edges ?? [])),\r\n});\r\n\r\nconst hasCustomNodes = (nodes?: Node[]): boolean =>\r\n  Array.isArray(nodes) ? nodes.some((node) => node?.id && node.id !== 'dataset-source') : false;\r\n\r\nconst hasEdgesPresent = (edges?: Edge[]): boolean => (Array.isArray(edges) ? edges.length > 0 : false);\r\n\r\nexport const useCanvasSnapshotState = ({\r\n  setIsDirty,\r\n  setSaveFeedback,\r\n  isHydratingRef,\r\n}: UseCanvasSnapshotStateOptions): UseCanvasSnapshotStateResult => {\r\n  const graphSnapshotRef = useRef<Snapshot>({ nodes: [], edges: [] });\r\n  const [canClearCanvas, setCanClearCanvas] = useState(false);\r\n\r\n  const applyHydratedSnapshot = useCallback((nodes?: Node[], edges?: Edge[]) => {\r\n    const snapshot = cloneGraphSnapshot(nodes, edges);\r\n    graphSnapshotRef.current = snapshot;\r\n    const hasCustom = hasCustomNodes(snapshot.nodes);\r\n    const hasEdges = hasEdgesPresent(snapshot.edges);\r\n    setCanClearCanvas(hasCustom || hasEdges);\r\n    return { hasCustomNodes: hasCustom, hasEdges };\r\n  }, []);\r\n\r\n  const handleGraphChange = useCallback(\r\n    (nodes: Node[], edges: Edge[]) => {\r\n      const nextSnapshot = cloneGraphSnapshot(nodes, edges);\r\n      const previousSnapshot = graphSnapshotRef.current;\r\n      const isSameSnapshot =\r\n        JSON.stringify(previousSnapshot.nodes ?? []) === JSON.stringify(nextSnapshot.nodes ?? []) &&\r\n        JSON.stringify(previousSnapshot.edges ?? []) === JSON.stringify(nextSnapshot.edges ?? []);\r\n\r\n      graphSnapshotRef.current = nextSnapshot;\r\n\r\n      const hasCustom = hasCustomNodes(nextSnapshot.nodes);\r\n      const hasEdges = hasEdgesPresent(nextSnapshot.edges);\r\n      setCanClearCanvas(hasCustom || hasEdges);\r\n\r\n      if (isHydratingRef.current || isSameSnapshot) {\r\n        return;\r\n      }\r\n\r\n      setIsDirty(true);\r\n      setSaveFeedback(null);\r\n    },\r\n    [isHydratingRef, setIsDirty, setSaveFeedback]\r\n  );\r\n\r\n  return {\r\n    graphSnapshotRef,\r\n    canClearCanvas,\r\n    handleGraphChange,\r\n    applyHydratedSnapshot,\r\n  };\r\n};\r\n","import { useCallback, type Dispatch, type MutableRefObject, type SetStateAction } from 'react';\r\nimport type { CanvasShellHandle } from '../types/pipeline';\r\nimport type { SaveFeedback } from '../types/feedback';\r\n\r\ntype UseClearCanvasHandlerOptions = {\r\n  canvasShellRef: MutableRefObject<CanvasShellHandle | null>;\r\n  canClearCanvas: boolean;\r\n  setSaveFeedback: Dispatch<SetStateAction<SaveFeedback | null>>;\r\n};\r\n\r\nexport const useClearCanvasHandler = ({\r\n  canvasShellRef,\r\n  canClearCanvas,\r\n  setSaveFeedback,\r\n}: UseClearCanvasHandlerOptions): (() => void) => {\r\n  return useCallback(() => {\r\n    if (!canClearCanvas) {\r\n      return;\r\n    }\r\n\r\n    if (typeof window !== 'undefined') {\r\n      const confirmClear = window.confirm(\r\n        'Clear all nodes and connections from the canvas? This cannot be undone.'\r\n      );\r\n      if (!confirmClear) {\r\n        return;\r\n      }\r\n    }\r\n\r\n    canvasShellRef.current?.clearGraph();\r\n    setSaveFeedback((previous) => {\r\n      if (previous?.tone === 'error') {\r\n        return previous;\r\n      }\r\n      return { message: 'Canvas cleared. Unsaved edits pending.', tone: 'info' };\r\n    });\r\n  }, [canvasShellRef, canClearCanvas, setSaveFeedback]);\r\n};\r\n","import { useCallback, type Dispatch, type MutableRefObject, type SetStateAction } from 'react';\r\nimport { useQuery, useQueryClient } from '@tanstack/react-query';\r\nimport type { FeaturePipelineResponse } from '../../api';\r\nimport { fetchPipelineHistory } from '../../api';\r\nimport type { SaveFeedback } from '../types/feedback';\r\nimport { HISTORY_LIMIT } from '../services/layout';\r\n\r\ntype UsePipelineHistoryOptions = {\r\n  activeSourceId: string | null;\r\n  isDirty: boolean;\r\n  setSaveFeedback: Dispatch<SetStateAction<SaveFeedback | null>>;\r\n  pipelineQueryKey: readonly unknown[];\r\n  pendingHistoryIdRef: MutableRefObject<number | null>;\r\n  isHydratingRef: MutableRefObject<boolean>;\r\n  historyLimit?: number;\r\n};\r\n\r\ntype UsePipelineHistoryResult = {\r\n  historyItems: FeaturePipelineResponse[];\r\n  isHistoryLoading: boolean;\r\n  historyErrorMessage: string | null;\r\n  refetchHistory: () => Promise<unknown>;\r\n  handleHistorySelection: (pipeline: FeaturePipelineResponse) => void;\r\n};\r\n\r\nexport const usePipelineHistory = ({\r\n  activeSourceId,\r\n  isDirty,\r\n  setSaveFeedback,\r\n  pipelineQueryKey,\r\n  pendingHistoryIdRef,\r\n  isHydratingRef,\r\n  historyLimit = HISTORY_LIMIT,\r\n}: UsePipelineHistoryOptions): UsePipelineHistoryResult => {\r\n  const queryClient = useQueryClient();\r\n\r\n  const historyQuery = useQuery({\r\n    queryKey: ['feature-canvas', 'pipeline-history', activeSourceId],\r\n    queryFn: () => fetchPipelineHistory(activeSourceId as string, historyLimit),\r\n    enabled: Boolean(activeSourceId),\r\n    staleTime: 30 * 1000,\r\n    retry: 1,\r\n  });\r\n\r\n  const handleHistorySelection = useCallback(\r\n    (pipeline: FeaturePipelineResponse) => {\r\n      if (!pipeline?.graph) {\r\n        setSaveFeedback({ message: 'Selected revision is missing pipeline data.', tone: 'error' });\r\n        return;\r\n      }\r\n\r\n      if (isDirty && typeof window !== 'undefined') {\r\n        const confirmReplace = window.confirm(\r\n          'You have unsaved changes. Replace the canvas with the selected revision?'\r\n        );\r\n        if (!confirmReplace) {\r\n          return;\r\n        }\r\n      }\r\n\r\n      pendingHistoryIdRef.current = pipeline.id ?? null;\r\n      isHydratingRef.current = true;\r\n      setSaveFeedback({\r\n        message: `Loading revision ${pipeline.name ?? `#${pipeline.id}`}`,\r\n        tone: 'info',\r\n      });\r\n      queryClient.setQueryData(pipelineQueryKey, pipeline);\r\n    },\r\n    [isDirty, isHydratingRef, pendingHistoryIdRef, pipelineQueryKey, queryClient, setSaveFeedback]\r\n  );\r\n\r\n  return {\r\n    historyItems: historyQuery.data ?? [],\r\n    isHistoryLoading: historyQuery.isLoading || historyQuery.isFetching,\r\n    historyErrorMessage: historyQuery.error\r\n      ? (historyQuery.error as Error)?.message ?? 'Unable to load history'\r\n      : null,\r\n    refetchHistory: historyQuery.refetch,\r\n    handleHistorySelection,\r\n  };\r\n};","import { useCallback } from 'react';\r\nimport type { Dispatch, MutableRefObject, SetStateAction } from 'react';\r\nimport type { DatasetSourceSummary } from '../../api';\r\nimport type { PipelineHydrationPayload } from '../types/pipeline';\r\nimport type { SaveFeedback } from '../types/feedback';\r\nimport { formatRelativeTime, formatTimestamp } from '../utils/time';\r\n\r\ntype UsePipelineHydrationOptions = {\r\n  applyHydratedSnapshot: (nodes?: any[], edges?: any[]) => { hasCustomNodes: boolean };\r\n  selectedDataset: DatasetSourceSummary | null;\r\n  activeSourceId: string | null;\r\n  setActivePipelineId: Dispatch<SetStateAction<number | null>>;\r\n  setActivePipelineName: Dispatch<SetStateAction<string | null>>;\r\n  setActivePipelineUpdatedAt: Dispatch<SetStateAction<string | null>>;\r\n  setIsDirty: Dispatch<SetStateAction<boolean>>;\r\n  setSaveFeedback: Dispatch<SetStateAction<SaveFeedback | null>>;\r\n  pendingHistoryIdRef: MutableRefObject<number | null>;\r\n  isHydratingRef: MutableRefObject<boolean>;\r\n};\r\n\r\ntype UsePipelineHydrationResult = {\r\n  handlePipelineHydrated: (payload: PipelineHydrationPayload) => void;\r\n  handlePipelineError: (error: Error) => void;\r\n};\r\n\r\nexport const usePipelineHydration = ({\r\n  applyHydratedSnapshot,\r\n  selectedDataset,\r\n  activeSourceId,\r\n  setActivePipelineId,\r\n  setActivePipelineName,\r\n  setActivePipelineUpdatedAt,\r\n  setIsDirty,\r\n  setSaveFeedback,\r\n  pendingHistoryIdRef,\r\n  isHydratingRef,\r\n}: UsePipelineHydrationOptions): UsePipelineHydrationResult => {\r\n  const handlePipelineHydrated = useCallback(\r\n    (payload: PipelineHydrationPayload) => {\r\n      const { nodes, edges, pipeline, context } = payload;\r\n      const { hasCustomNodes } = applyHydratedSnapshot(nodes, edges);\r\n      const hydratedPipelineId = pipeline?.id ?? null;\r\n\r\n      setActivePipelineId(hydratedPipelineId);\r\n      setActivePipelineName(pipeline?.name ?? null);\r\n      setActivePipelineUpdatedAt(pipeline?.updated_at ?? null);\r\n\r\n      if (context === 'stored' && pipeline) {\r\n        if (pendingHistoryIdRef.current === pipeline.id) {\r\n          const relative = formatRelativeTime(pipeline.updated_at);\r\n          const timeLabel = relative ?? formatTimestamp(pipeline.updated_at);\r\n          setSaveFeedback({\r\n            message: `Saved revision ${pipeline.name ?? `#${pipeline.id}`} (${timeLabel})`,\r\n            tone: 'info',\r\n          });\r\n          pendingHistoryIdRef.current = null;\r\n        } else if (isHydratingRef.current) {\r\n          setSaveFeedback((previous) => {\r\n            if (previous?.tone === 'error') {\r\n              return previous;\r\n            }\r\n            if (hasCustomNodes) {\r\n              return { message: 'Loaded saved pipeline', tone: 'info' };\r\n            }\r\n            return previous;\r\n          });\r\n        }\r\n      } else if (context === 'sample') {\r\n        pendingHistoryIdRef.current = null;\r\n        setSaveFeedback((previous) => {\r\n          if (previous?.tone === 'error') {\r\n            return previous;\r\n          }\r\n          if (!hasCustomNodes) {\r\n            const datasetLabel =\r\n              selectedDataset?.name ?? selectedDataset?.source_id ?? activeSourceId ?? 'demo dataset';\r\n            return {\r\n              message: `Showing starter pipeline for ${datasetLabel}`,\r\n              tone: 'info',\r\n            };\r\n          }\r\n          return previous;\r\n        });\r\n      } else if (context === 'reset') {\r\n        pendingHistoryIdRef.current = null;\r\n      } else if (!pipeline) {\r\n        pendingHistoryIdRef.current = null;\r\n        setSaveFeedback((previous) => (previous?.tone === 'error' ? previous : null));\r\n      }\r\n\r\n      if (isHydratingRef.current) {\r\n        setIsDirty(false);\r\n      }\r\n\r\n      if (pipeline && pendingHistoryIdRef.current && pendingHistoryIdRef.current !== pipeline.id) {\r\n        pendingHistoryIdRef.current = null;\r\n      }\r\n\r\n      isHydratingRef.current = false;\r\n    },\r\n    [\r\n      activeSourceId,\r\n      applyHydratedSnapshot,\r\n      pendingHistoryIdRef,\r\n      selectedDataset,\r\n      setActivePipelineId,\r\n      setActivePipelineName,\r\n      setActivePipelineUpdatedAt,\r\n      setIsDirty,\r\n      setSaveFeedback,\r\n      isHydratingRef,\r\n    ]\r\n  );\r\n\r\n  const handlePipelineError = useCallback(\r\n    (error: Error) => {\r\n      setSaveFeedback({\r\n        message: error?.message ?? 'Unable to load saved pipeline. Starting fresh.',\r\n        tone: 'error',\r\n      });\r\n    },\r\n    [setSaveFeedback]\r\n  );\r\n\r\n  return { handlePipelineHydrated, handlePipelineError };\r\n};\r\n","import { useMutation, type QueryClient } from '@tanstack/react-query';\r\nimport { type Dispatch, type MutableRefObject, type SetStateAction } from 'react';\r\nimport type { FeaturePipelinePayload } from '../../api';\r\nimport { savePipeline } from '../../api';\r\nimport type { SaveFeedback } from '../types/feedback';\r\n\r\ntype UsePipelineSaveOptions = {\r\n  queryClient: QueryClient;\r\n  setSaveFeedback: Dispatch<SetStateAction<SaveFeedback | null>>;\r\n  setIsDirty: Dispatch<SetStateAction<boolean>>;\r\n  setActivePipelineId: Dispatch<SetStateAction<number | null>>;\r\n  setActivePipelineName: Dispatch<SetStateAction<string | null>>;\r\n  setActivePipelineUpdatedAt: Dispatch<SetStateAction<string | null>>;\r\n  pendingHistoryIdRef: MutableRefObject<number | null>;\r\n};\r\n\r\ntype TriggerSaveArgs = {\r\n  sourceId: string;\r\n  payload: FeaturePipelinePayload;\r\n};\r\n\r\ntype UsePipelineSaveResult = {\r\n  triggerSave: (args: TriggerSaveArgs) => void;\r\n  isSaving: boolean;\r\n};\r\n\r\nexport const usePipelineSave = ({\r\n  queryClient,\r\n  setSaveFeedback,\r\n  setIsDirty,\r\n  setActivePipelineId,\r\n  setActivePipelineName,\r\n  setActivePipelineUpdatedAt,\r\n  pendingHistoryIdRef,\r\n}: UsePipelineSaveOptions): UsePipelineSaveResult => {\r\n  const { mutate, isPending } = useMutation({\r\n    mutationFn: async ({ sourceId, payload }: TriggerSaveArgs) => savePipeline(sourceId, payload),\r\n    onSuccess: (response, variables) => {\r\n      setSaveFeedback({ message: 'Draft saved successfully.', tone: 'success' });\r\n      setIsDirty(false);\r\n      setActivePipelineId(response.id ?? null);\r\n      setActivePipelineName(response.name ?? null);\r\n      setActivePipelineUpdatedAt(response.updated_at ?? null);\r\n      pendingHistoryIdRef.current = response.id ?? null;\r\n      queryClient.setQueryData(['feature-canvas', 'pipeline', variables.sourceId], response);\r\n      queryClient.invalidateQueries({\r\n        queryKey: ['feature-canvas', 'pipeline-history', variables.sourceId],\r\n        exact: false,\r\n      });\r\n    },\r\n    onError: (error: Error) => {\r\n      setSaveFeedback({ message: error?.message ?? 'Failed to save pipeline.', tone: 'error' });\r\n    },\r\n  });\r\n\r\n  return {\r\n    triggerSave: mutate,\r\n    isSaving: isPending,\r\n  };\r\n};","import { useEffect, useMemo, useState, type Dispatch, type SetStateAction } from 'react';\r\nimport type { SaveFeedback } from '../types/feedback';\r\n\r\ntype UseSaveFeedbackStateResult = {\r\n  saveFeedback: SaveFeedback | null;\r\n  setSaveFeedback: Dispatch<SetStateAction<SaveFeedback | null>>;\r\n  feedbackIcon: string;\r\n  feedbackClass: string;\r\n};\r\n\r\nconst resolveFeedbackIcon = (tone?: SaveFeedback['tone']): string => {\r\n  if (tone === 'success') {\r\n    return '';\r\n  }\r\n  if (tone === 'error') {\r\n    return '';\r\n  }\r\n  return '';\r\n};\r\n\r\nconst resolveFeedbackClass = (tone?: SaveFeedback['tone']): string => {\r\n  if (tone === 'error') {\r\n    return 'text-danger';\r\n  }\r\n  if (tone === 'success') {\r\n    return 'text-success';\r\n  }\r\n  return 'text-muted';\r\n};\r\n\r\nexport const useSaveFeedbackState = (): UseSaveFeedbackStateResult => {\r\n  const [saveFeedback, setSaveFeedback] = useState<SaveFeedback | null>(null);\r\n\r\n  useEffect(() => {\r\n    if (!saveFeedback || saveFeedback.tone === 'error' || typeof window === 'undefined') {\r\n      return;\r\n    }\r\n    const timeout = window.setTimeout(\r\n      () => setSaveFeedback(null),\r\n      saveFeedback.tone === 'success' ? 4000 : 2500\r\n    );\r\n    return () => window.clearTimeout(timeout);\r\n  }, [saveFeedback]);\r\n\r\n  const feedbackIcon = useMemo(\r\n    () => resolveFeedbackIcon(saveFeedback?.tone),\r\n    [saveFeedback]\r\n  );\r\n  const feedbackClass = useMemo(\r\n    () => resolveFeedbackClass(saveFeedback?.tone),\r\n    [saveFeedback]\r\n  );\r\n\r\n  return {\r\n    saveFeedback,\r\n    setSaveFeedback,\r\n    feedbackIcon,\r\n    feedbackClass,\r\n  };\r\n};\r\n","import type { DatasetSourceSummary, FeaturePipelineResponse } from '../../api';\r\nimport type { SaveFeedback } from '../types/feedback';\r\nimport type { DatasetOption } from './useDatasetSelection';\r\n\r\ntype UseSidepanelViewModelOptions = {\r\n  activePipelineUpdatedAt: string | null;\r\n  datasetErrorMessage: string | null;\r\n  isDatasetLoading: boolean;\r\n  hasDatasets: boolean;\r\n  ownedDatasetsCount: number;\r\n  canSelectDatasets: boolean;\r\n  datasetOptions: DatasetOption[];\r\n  selectedDataset: DatasetSourceSummary | null;\r\n  activeSourceId: string | null;\r\n  canClearCanvas: boolean;\r\n  onDatasetSelection: (value: string) => void;\r\n  onClearCanvas: () => void;\r\n  onRefreshHistory: () => void;\r\n  onSaveClick: () => void;\r\n  isHistoryLoading: boolean;\r\n  historyErrorMessage: string | null;\r\n  historyItems: FeaturePipelineResponse[];\r\n  activePipelineId: number | null;\r\n  isDirty: boolean;\r\n  isSaving: boolean;\r\n  saveFeedback: SaveFeedback | null;\r\n  feedbackIcon: string;\r\n  feedbackClass: string;\r\n  onSelectHistory: (pipeline: FeaturePipelineResponse) => void;\r\n};\r\n\r\ntype SidepanelProps = {\r\n  activePipelineUpdatedAt: string | null;\r\n  datasetErrorMessage: string | null;\r\n  isDatasetLoading: boolean;\r\n  hasDatasets: boolean;\r\n  ownedDatasetsCount: number;\r\n  canSelectDatasets: boolean;\r\n  datasetOptions: DatasetOption[];\r\n  selectedDataset: DatasetSourceSummary | null;\r\n  activeSourceId: string | null;\r\n  canClearCanvas: boolean;\r\n  onDatasetSelection: (value: string) => void;\r\n  onClearCanvas: () => void;\r\n  onRefreshHistory: () => void;\r\n  onSaveClick: () => void;\r\n  isHistoryLoading: boolean;\r\n  historyErrorMessage: string | null;\r\n  historyItems: FeaturePipelineResponse[];\r\n  activePipelineId: number | null;\r\n  isDirty: boolean;\r\n  isSaveDisabled: boolean;\r\n  saveButtonLabel: string;\r\n  saveFeedback: SaveFeedback | null;\r\n  feedbackIcon: string;\r\n  feedbackClass: string;\r\n  onSelectHistory: (pipeline: FeaturePipelineResponse) => void;\r\n};\r\n\r\ntype UseSidepanelViewModelResult = {\r\n  sidepanelProps: SidepanelProps;\r\n};\r\n\r\nexport const useSidepanelViewModel = ({\r\n  activePipelineUpdatedAt,\r\n  datasetErrorMessage,\r\n  isDatasetLoading,\r\n  hasDatasets,\r\n  ownedDatasetsCount,\r\n  canSelectDatasets,\r\n  datasetOptions,\r\n  selectedDataset,\r\n  activeSourceId,\r\n  canClearCanvas,\r\n  onDatasetSelection,\r\n  onClearCanvas,\r\n  onRefreshHistory,\r\n  onSaveClick,\r\n  isHistoryLoading,\r\n  historyErrorMessage,\r\n  historyItems,\r\n  activePipelineId,\r\n  isDirty,\r\n  isSaving,\r\n  saveFeedback,\r\n  feedbackIcon,\r\n  feedbackClass,\r\n  onSelectHistory,\r\n}: UseSidepanelViewModelOptions): UseSidepanelViewModelResult => {\r\n  const saveButtonLabel = isSaving ? 'Saving' : isDirty ? 'Save draft*' : 'Save draft';\r\n  const isSaveDisabled = !activeSourceId || isSaving;\r\n\r\n  return {\r\n    sidepanelProps: {\r\n      activePipelineUpdatedAt,\r\n      datasetErrorMessage,\r\n      isDatasetLoading,\r\n      hasDatasets,\r\n      ownedDatasetsCount,\r\n      canSelectDatasets,\r\n      datasetOptions,\r\n      selectedDataset,\r\n      activeSourceId,\r\n      canClearCanvas,\r\n      onDatasetSelection,\r\n      onClearCanvas,\r\n      onRefreshHistory,\r\n      onSaveClick,\r\n      isHistoryLoading,\r\n      historyErrorMessage,\r\n      historyItems,\r\n      activePipelineId,\r\n      isDirty,\r\n      isSaveDisabled,\r\n      saveButtonLabel,\r\n      saveFeedback,\r\n      feedbackIcon,\r\n      feedbackClass,\r\n      onSelectHistory,\r\n    },\r\n  };\r\n};\r\n","import { useCallback, useState } from 'react';\r\n\r\ntype UseSidepanelToggleResult = {\r\n  isSidepanelExpanded: boolean;\r\n  handleToggleSidepanel: () => void;\r\n};\r\n\r\nexport const useSidepanelToggle = (initiallyExpanded = true): UseSidepanelToggleResult => {\r\n  const [isSidepanelExpanded, setIsSidepanelExpanded] = useState(initiallyExpanded);\r\n\r\n  const handleToggleSidepanel = useCallback(() => {\r\n    setIsSidepanelExpanded((previous) => !previous);\r\n  }, []);\r\n\r\n  return {\r\n    isSidepanelExpanded,\r\n    handleToggleSidepanel,\r\n  };\r\n};\r\n","import type { Edge, Node } from 'react-flow-renderer';\r\nimport type { DatasetSourceSummary, FeaturePipelinePayload } from '../../api';\r\n\r\ntype GraphSnapshot = {\r\n  nodes: Node[];\r\n  edges: Edge[];\r\n};\r\n\r\ntype BuildPipelineSavePayloadArgs = {\r\n  snapshot: GraphSnapshot;\r\n  selectedDataset: DatasetSourceSummary | null;\r\n  activeSourceId: string;\r\n};\r\n\r\nconst normalizeEdgeType = (edge?: Edge): Edge['type'] => {\r\n  const existingType = edge?.type;\r\n  if (!existingType || existingType === 'smoothstep' || existingType === 'default') {\r\n    return 'animatedEdge';\r\n  }\r\n  return existingType;\r\n};\r\n\r\nexport const buildPipelineSavePayload = ({\r\n  snapshot,\r\n  selectedDataset,\r\n  activeSourceId,\r\n}: BuildPipelineSavePayloadArgs): FeaturePipelinePayload => {\r\n  const nodes = snapshot.nodes ?? [];\r\n  const edges = snapshot.edges ?? [];\r\n\r\n  return {\r\n    name: selectedDataset?.name\r\n      ? `Draft pipeline for ${selectedDataset.name}`\r\n      : `Draft pipeline for ${activeSourceId}`,\r\n    graph: {\r\n      nodes,\r\n      edges: edges.map((edge) => ({\r\n        ...edge,\r\n        animated: edge?.animated ?? true,\r\n        type: normalizeEdgeType(edge),\r\n      })),\r\n    },\r\n    metadata: {\r\n      lastClientSave: new Date().toISOString(),\r\n      nodeCount: nodes.length,\r\n      edgeCount: edges.length,\r\n    },\r\n  };\r\n};\r\n","// @ts-nocheck\r\nimport React, { useCallback, useMemo, useRef, useState } from 'react';\r\nimport { ReactFlowProvider } from 'react-flow-renderer';\r\nimport 'react-flow-renderer/dist/style.css';\r\nimport { useQueryClient } from '@tanstack/react-query';\r\nimport CanvasShell from './canvas/components/CanvasShell/CanvasShell';\r\nimport { CanvasSidepanel } from './canvas/components/CanvasSidepanel/CanvasSidepanel';\r\nimport { useDatasetSelectionHandler } from './canvas/hooks/useDatasetSelectionHandler';\r\nimport { useCanvasSnapshotState } from './canvas/hooks/useCanvasSnapshotState';\r\nimport { useClearCanvasHandler } from './canvas/hooks/useClearCanvasHandler';\r\nimport { usePipelineHistory } from './canvas/hooks/usePipelineHistory';\r\nimport { usePipelineHydration } from './canvas/hooks/usePipelineHydration';\r\nimport { usePipelineSave } from './canvas/hooks/usePipelineSave';\r\nimport { useSaveFeedbackState } from './canvas/hooks/useSaveFeedbackState';\r\nimport { useSidepanelViewModel } from './canvas/hooks/useSidepanelViewModel';\r\nimport { useSidepanelToggle } from './canvas/hooks/useSidepanelToggle';\r\nimport type { CanvasShellHandle } from './canvas/types/pipeline';\r\nimport { FeaturePipelinePayload } from './api';\r\nimport { buildPipelineSavePayload } from './canvas/utils/buildPipelineSavePayload';\r\nimport './styles.css';\r\n\r\nconst App: React.FC<AppProps> = ({ sourceId }) => {\r\n  const queryClient = useQueryClient();\r\n  const canvasShellRef = useRef<CanvasShellHandle | null>(null);\r\n  const isHydratingRef = useRef(true);\r\n  const { isSidepanelExpanded, handleToggleSidepanel } = useSidepanelToggle(true);\r\n  const [isDirty, setIsDirty] = useState(false);\r\n  const { saveFeedback, setSaveFeedback, feedbackIcon, feedbackClass } = useSaveFeedbackState();\r\n  const {\r\n    datasets,\r\n    ownedDatasets,\r\n    selectedDataset,\r\n    setSelectedDataset,\r\n    activeSourceId,\r\n    setActiveSourceId,\r\n    datasetOptions,\r\n    canSelectDatasets,\r\n    hasDatasets,\r\n    ownedDatasetsCount,\r\n    isDatasetLoading,\r\n    datasetErrorMessage,\r\n    handleDatasetSelection,\r\n  } = useDatasetSelectionHandler({\r\n    sourceId,\r\n    setIsDirty,\r\n    setSaveFeedback,\r\n    isHydratingRef,\r\n  });\r\n  const [activePipelineId, setActivePipelineId] = useState<number | null>(null);\r\n  const [activePipelineUpdatedAt, setActivePipelineUpdatedAt] = useState<string | null>(null);\r\n  const [activePipelineName, setActivePipelineName] = useState<string | null>(null);\r\n\r\n  const pipelineQueryKey = useMemo(\r\n    () => ['feature-canvas', 'pipeline', activeSourceId],\r\n    [activeSourceId]\r\n  );\r\n  const pendingHistoryIdRef = useRef<number | null>(null);\r\n  const { graphSnapshotRef, canClearCanvas, handleGraphChange, applyHydratedSnapshot } =\r\n    useCanvasSnapshotState({\r\n      setIsDirty,\r\n      setSaveFeedback,\r\n      isHydratingRef,\r\n    });\r\n\r\n  const handleClearCanvas = useClearCanvasHandler({\r\n    canvasShellRef,\r\n    canClearCanvas,\r\n    setSaveFeedback,\r\n  });\r\n\r\n  const {\r\n    historyItems,\r\n    isHistoryLoading,\r\n    historyErrorMessage,\r\n    refetchHistory,\r\n    handleHistorySelection,\r\n  } = usePipelineHistory({\r\n    activeSourceId,\r\n    isDirty,\r\n    setSaveFeedback,\r\n    pipelineQueryKey,\r\n    pendingHistoryIdRef,\r\n    isHydratingRef,\r\n  });\r\n\r\n  const { triggerSave, isSaving } = usePipelineSave({\r\n    queryClient,\r\n    setSaveFeedback,\r\n    setIsDirty,\r\n    setActivePipelineId,\r\n    setActivePipelineName,\r\n    setActivePipelineUpdatedAt,\r\n    pendingHistoryIdRef,\r\n  });\r\n\r\n  const { handlePipelineHydrated, handlePipelineError } = usePipelineHydration({\r\n    applyHydratedSnapshot,\r\n    selectedDataset,\r\n    activeSourceId,\r\n    setActivePipelineId,\r\n    setActivePipelineName,\r\n    setActivePipelineUpdatedAt,\r\n    setIsDirty,\r\n    setSaveFeedback,\r\n    pendingHistoryIdRef,\r\n    isHydratingRef,\r\n  });\r\n\r\n  const handleSaveClick = useCallback(() => {\r\n    if (!activeSourceId) {\r\n      setSaveFeedback({ message: 'Select a dataset before saving.', tone: 'error' });\r\n      return;\r\n    }\r\n\r\n    const snapshot = graphSnapshotRef.current;\r\n    if (!snapshot.nodes || !snapshot.nodes.length) {\r\n      setSaveFeedback({ message: 'Add nodes to the canvas before saving.', tone: 'error' });\r\n      return;\r\n    }\r\n\r\n    const payload: FeaturePipelinePayload = buildPipelineSavePayload({\r\n      snapshot,\r\n      selectedDataset,\r\n      activeSourceId,\r\n    });\r\n\r\n    setSaveFeedback({ message: 'Saving draft', tone: 'info' });\r\n    triggerSave({ sourceId: activeSourceId, payload });\r\n  }, [activeSourceId, selectedDataset?.name, triggerSave]);\r\n\r\n  const { sidepanelProps } = useSidepanelViewModel({\r\n    activePipelineUpdatedAt,\r\n    datasetErrorMessage,\r\n    isDatasetLoading,\r\n    hasDatasets,\r\n    ownedDatasetsCount,\r\n    canSelectDatasets,\r\n    datasetOptions,\r\n    selectedDataset,\r\n    activeSourceId,\r\n    canClearCanvas,\r\n    onDatasetSelection: handleDatasetSelection,\r\n    onClearCanvas: handleClearCanvas,\r\n    onRefreshHistory: () => {\r\n      void refetchHistory();\r\n    },\r\n    onSaveClick: handleSaveClick,\r\n    isHistoryLoading,\r\n    historyErrorMessage,\r\n    historyItems,\r\n    activePipelineId,\r\n    isDirty,\r\n    isSaving,\r\n    saveFeedback,\r\n    feedbackIcon,\r\n    feedbackClass,\r\n    onSelectHistory: handleHistorySelection,\r\n  });\r\n  return (\r\n    <div\r\n      className=\"feature-canvas-app\"\r\n      data-sidepanel-expanded={isSidepanelExpanded ? 'true' : 'false'}\r\n    >\r\n      <button\r\n        type=\"button\"\r\n        className=\"canvas-sidepanel__toggle\"\r\n        onClick={handleToggleSidepanel}\r\n        aria-label={isSidepanelExpanded ? 'Collapse details panel' : 'Expand details panel'}\r\n        aria-expanded={isSidepanelExpanded}\r\n        aria-controls=\"feature-canvas-sidepanel\"\r\n      >\r\n        {isSidepanelExpanded ? '' : ''}\r\n      </button>\r\n\r\n      {!isSidepanelExpanded && saveFeedback && (\r\n        <div\r\n          className={`canvas-sidepanel__feedback canvas-sidepanel__feedback--floating ${feedbackClass}`}\r\n        >\r\n          <span className=\"canvas-sidepanel__feedback-icon\" aria-hidden=\"true\">{feedbackIcon}</span>\r\n          <span className=\"canvas-sidepanel__feedback-text\">{saveFeedback.message}</span>\r\n        </div>\r\n      )}\r\n\r\n      {isSidepanelExpanded && <CanvasSidepanel {...sidepanelProps} />}\r\n\r\n      <div className=\"feature-canvas-app__viewport\">\r\n        <ReactFlowProvider>\r\n          <CanvasShell\r\n            ref={canvasShellRef}\r\n            sourceId={activeSourceId}\r\n            datasetName={selectedDataset?.name ?? selectedDataset?.source_id ?? null}\r\n            onGraphChange={handleGraphChange}\r\n            onPipelineHydrated={handlePipelineHydrated}\r\n            onPipelineError={handlePipelineError}\r\n          />\r\n        </ReactFlowProvider>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","// @ts-nocheck\r\nimport React from 'react';\r\nimport ReactDOM from 'react-dom/client';\r\nimport { QueryClient, QueryClientProvider } from '@tanstack/react-query';\r\nimport App from './App';\r\nimport './styles.css';\r\n\r\nconst queryClient = new QueryClient();\r\n\r\nconst rootNode = document.getElementById('ml-workflow-root');\r\n\r\nif (!rootNode) {\r\n  throw new Error('ML workflow root element not found');\r\n}\r\n\r\nconst root = ReactDOM.createRoot(rootNode);\r\n\r\nconst sourceId = rootNode.getAttribute('data-source-id') || undefined;\r\n\r\nroot.render(\r\n  <React.StrictMode>\r\n    <QueryClientProvider client={queryClient}>\r\n      <App sourceId={sourceId} />\r\n    </QueryClientProvider>\r\n  </React.StrictMode>\r\n);\r\n"],"names":["l","n","p","q","r","t","u","v","w","x","y","z","A","a","B","C","D","E","b","e","F","G","H","I","J","K","L","M","d","c","k","h","g","f","m","N","O","escape","P","Q","S","T","U","V","W","X","react_production_min","reactModule","require$$0","reactJsxRuntime_production_min","jsxRuntimeModule","exports","R","schedulerModule","aa","ca","require$$1","da","ea","fa","ha","ia","ja","ka","la","ma","oa","pa","qa","ra","sa","ta","ua","va","wa","ya","za","Aa","Ba","Ca","Da","Ea","Fa","Ga","Ha","Ia","Ja","Ka","La","Ma","Na","Oa","Pa","Qa","Ra","Sa","Ta","Ua","Va","Wa","Xa","Ya","Za","ab","bb","cb","db","eb","fb","gb","hb","ib","jb","kb","lb","mb","nb","ob","pb","qb","rb","sb","tb","ub","vb","wb","xb","yb","zb","Ab","Bb","Cb","Db","Eb","Fb","Gb","Hb","Ib","Jb","Kb","Lb","Mb","Nb","Ob","Pb","Qb","Rb","Sb","Tb","Ub","Vb","Wb","Xb","Yb","Zb","$b","ac","bc","cc","dc","ec","fc","gc","hc","ic","jc","kc","lc","mc","oc","nc","pc","qc","rc","sc","tc","uc","vc","wc","xc","yc","zc","Ac","Bc","Cc","Dc","Ec","Fc","Hc","Ic","Jc","Kc","Lc","Mc","Nc","Oc","Pc","Qc","Rc","Sc","Tc","Uc","Vc","Wc","Xc","Yc","Zc","$c","ad","bd","cd","dd","ed","fd","gd","hd","id","jd","kd","ld","md","nd","od","pd","qd","rd","sd","td","ud","vd","wd","xd","yd","Ad","zd","Bd","Cd","Dd","Ed","Fd","Gd","Hd","Id","Jd","Kd","Ld","Md","Nd","Od","Pd","Qd","Rd","Sd","Td","Ud","Vd","Wd","Xd","Yd","Zd","$d","ae","be","ce","de","ee","fe","ge","he","ie","je","ke","le","me","ne","oe","pe","qe","re","se","te","ue","ve","we","xe","ye","ze","Ae","Be","Ce","De","Ee","Fe","Ge","He","Ie","Je","Ke","Le","Me","Ne","Oe","Pe","Qe","Re","Se","Te","Ue","Ve","We","Xe","Ye","Ze","$e","af","bf","cf","df","ef","ff","gf","hf","jf","kf","lf","mf","nf","of","pf","qf","rf","sf","tf","uf","vf","wf","na","xa","$a","ba","xf","yf","zf","Af","Bf","Cf","Df","Ef","Ff","Gf","Hf","Jf","If","Kf","Lf","Mf","Nf","Of","Pf","Qf","Rf","Sf","Tf","Uf","Vf","Wf","Xf","Yf","Zf","$f","ag","bg","cg","dg","eg","fg","gg","hg","ig","jg","kg","lg","mg","ng","og","pg","qg","rg","sg","tg","ug","vg","wg","xg","yg","zg","Ag","Bg","Cg","Dg","Eg","Fg","Gg","Hg","Ig","Jg","Kg","Lg","Mg","Ng","Og","Pg","Qg","Rg","Sg","Tg","Ug","Vg","Wg","Xg","Yg","Zg","$g","ah","bh","ch","dh","eh","fh","gh","hh","ih","jh","kh","lh","mh","nh","oh","ph","qh","rh","sh","th","uh","vh","wh","xh","yh","zh","Bh","Ch","Dh","Eh","Fh","Gh","Hh","Ih","Jh","Kh","Lh","Mh","Nh","Oh","Ph","Qh","Rh","Sh","Th","Uh","Vh","Wh","Xh","Yh","Zh","$h","ai","bi","ci","di","ei","fi","gi","hi","ii","ji","ki","li","mi","ni","oi","pi","qi","ri","si","ti","ui","vi","wi","xi","yi","zi","Ai","Bi","Ci","Di","Ei","Fi","Gi","Hi","Ii","Ji","Ki","Li","Mi","Ni","Oi","Pi","Qi","Ri","Si","Ti","Ui","Vi","Wi","Xi","Yi","Zi","$i","aj","bj","cj","dj","ej","fj","gj","hj","ij","jj","kj","lj","mj","nj","oj","pj","qj","rj","sj","tj","uj","vj","wj","xj","yj","zj","Aj","Bj","Cj","Dj","Ej","Fj","Gj","Hj","Ij","Jj","Kj","Lj","Mj","Nj","Oj","Pj","Qj","Rj","Sj","Tj","Uj","Vj","Wj","Xj","Yj","Zj","ak","bk","ck","dk","ek","fk","gk","hk","ik","jk","kk","lk","mk","nk","ok","Y","Z","pk","qk","rk","sk","tk","uk","vk","wk","xk","yk","zk","Ak","Bk","Ck","Dk","Ek","Fk","Gk","Hk","Ik","Jk","Kk","Lk","Mk","Nk","Ok","Pk","Qk","Rk","Sk","Tk","Uk","Vk","Wk","Xk","Yk","Zk","$k","al","bl","cl","dl","el","fl","gl","hl","il","jl","kl","ll","ml","nl","ol","pl","ql","rl","sl","tl","ul","vl","reactDom_production_min","checkDCE","err","reactDomModule","client","Subscribable","listener","defaultTimeoutProvider","callback","delay","timeoutId","intervalId","TimeoutManager","_a","__privateAdd","_provider","_providerCalled","provider","__privateSet","__privateGet","timeoutManager","systemSetTimeoutZero","isServer","noop","functionalUpdate","updater","input","isValidTimeout","value","timeUntilStale","updatedAt","staleTime","resolveStaleTime","query","resolveEnabled","enabled","matchQuery","filters","type","exact","fetchStatus","predicate","queryKey","stale","hashQueryKeyByOptions","partialMatchKey","isActive","matchMutation","mutation","status","mutationKey","hashKey","options","_","val","isPlainObject","result","key","hasOwn","replaceEqualDeep","array","isPlainArray","aSize","bItems","bSize","copy","equalItems","i","aItem","bItem","shallowEqualObjects","o","hasObjectPrototype","ctor","prot","sleep","timeout","resolve","replaceData","prevData","data","addToEnd","items","item","max","newItems","addToStart","skipToken","ensureQueryFn","fetchOptions","shouldThrowError","throwOnError","params","FocusManager","_b","_focused","_cleanup","_setup","onFocus","setup","focused","isFocused","focusManager","pendingThenable","reject","thenable","_resolve","_reject","finalize","reason","defaultScheduler","createNotifyManager","queue","transactions","notifyFn","batchNotifyFn","scheduleFn","schedule","flush","originalQueue","args","fn","notifyManager","OnlineManager","_c","_online","onOnline","onlineListener","offlineListener","online","onlineManager","defaultRetryDelay","failureCount","canFetch","networkMode","CancelledError","createRetryer","config","isRetryCancelled","continueFn","isResolved","cancel","cancelOptions","error","cancelRetry","continueRetry","canContinue","canStart","pause","continueResolve","run","promiseOrValue","initialPromise","retry","retryDelay","shouldRetry","Removable","_d","_gcTimeout","newGcTime","Query","_e","_Query_instances","_initialState","_revertState","_cache","_client","_retryer","_defaultOptions","_abortSignalConsumed","getDefaultState","defaultState","newData","__privateMethod","dispatch_fn","state","setStateOptions","promise","observer","abortController","addSignalProperty","object","fetchFn","queryFn","queryFnContext","queryFnContext2","context","context2","define_process_env_default","_f","_h","_g","_j","_i","_l","_k","action","reducer","fetchState","newState","hasData","initialDataUpdatedAt","QueryObserver","_QueryObserver_instances","_currentQuery","_currentQueryInitialState","_currentResult","_currentResultState","_currentResultOptions","_currentThenable","_selectError","_selectFn","_selectResult","_lastQueryWithDefinedData","_staleTimeoutId","_refetchIntervalId","_currentRefetchInterval","_trackedProps","shouldFetchOnMount","executeFetch_fn","updateTimers_fn","shouldFetchOn","clearStaleTimeout_fn","clearRefetchInterval_fn","prevOptions","prevQuery","updateQuery_fn","mounted","shouldFetchOptionally","updateStaleTimeout_fn","nextRefetchInterval","computeRefetchInterval_fn","updateRefetchInterval_fn","shouldAssignObserverCurrentProperties","onPropTracked","target","defaultedOptions","prevResult","prevResultState","prevResultOptions","queryInitialState","isPlaceholderData","fetchOnMount","fetchOptionally","errorUpdatedAt","skipSelect","placeholderData","selectError","isFetching","isPending","isError","isLoading","nextResult","isStale","finalizeThenableIfPossible","recreateThenable","pending","prevThenable","shouldNotifyListeners","notifyOnChangeProps","notifyOnChangePropsValue","includedProps","typedKey","notify_fn","nextInterval","notifyOptions","shouldLoadOnMount","field","optimisticResult","infiniteQueryBehavior","pages","direction","oldPages","oldPageParams","currentPage","cancelled","fetchPage","param","previous","page","maxPages","addTo","pageParamFn","getPreviousPageParam","getNextPageParam","oldData","remainingPages","pageParams","lastIndex","Mutation","_Mutation_instances","_observers","_mutationCache","variables","onContinue","mutationFnContext","restored","isPaused","_n","_m","_p","_o","_r","_q","_t","_s","MutationCache","_mutations","_scopes","_mutationId","__privateWrapper","scope","scopeFor","scopedMutations","index","mutationsWithSameScope","firstPendingMutation","foundMutation","defaultedFilters","event","pausedMutations","MutationObserver","_MutationObserver_instances","_currentMutation","_mutateOptions","updateResult_fn","onMutateResult","QueryCache","_queries","queryHash","queryInMap","queries","QueryClient","_queryCache","_queryDefaults","_mutationDefaults","_mountCount","_unsubscribeFocus","_unsubscribeOnline","cachedData","queryCache","defaultedCancelOptions","promises","defaults","queryDefault","QueryClientContext","React.createContext","useQueryClient","queryClient","React.useContext","QueryClientProvider","children","React.useEffect","jsx","IsRestoringContext","useIsRestoring","createValue","isReset","QueryErrorResetBoundaryContext","useQueryErrorResetBoundary","ensurePreventErrorBoundaryRetry","errorResetBoundary","useClearResetErrorBoundary","getHasError","suspense","ensureSuspenseTimers","clamp","originalStaleTime","willFetch","isRestoring","shouldSuspend","fetchOptimistic","useBaseQuery","Observer","isNewCacheEntry","React.useState","shouldSubscribe","React.useSyncExternalStore","React.useCallback","onStoreChange","unsubscribe","useQuery","useMutation","mutate","mutateOptions","createStore","createState","listeners","setState","partial","replace","nextState","previousState","getState","subscribeWithSelector","selector","equalityFn","currentSlice","listenerToAdd","nextSlice","previousSlice","api","useIsomorphicLayoutEffect","useEffect","useLayoutEffect","create","useStore","forceUpdate","useReducer","stateRef","useRef","selectorRef","equalityFnRef","erroredRef","currentSliceRef","newStateSlice","hasNewStateSlice","stateBeforeSubscriptionRef","nextStateSlice","sliceToReturn","useDebugValue","done","createContext","ZustandContext","createContext$1","initialStore","storeRef","createElement","useProviderStore","useContext","useMemo","dispatch","Dispatch","parseTypenames","typenames","types","name","typename","get","set","that","xhtml","namespaces","namespace","prefix","creatorInherit","document","uri","creatorFixed","fullname","creator","none","selector$c","selection_select","select","groups","subgroups","j","group","subgroup","node","subnode","Selection","empty","selectorAll","arrayAll","selection_selectAll","parents","matcher","childMatcher","find","childFind","match","childFirst","selection_selectChild","filter","childrenFilter","selection_selectChildren","selection_filter","sparse","update","selection_enter","EnterNode","parent","datum","child","next","constant$3","bindIndex","enter","exit","groupLength","dataLength","bindKey","nodeByKeyValue","keyValues","keyValue","selection_data","bind","constant","arraylike","enterGroup","updateGroup","exitGroup","i0","i1","selection_exit","selection_join","onenter","onupdate","onexit","selection_merge","selection","groups0","groups1","m0","m1","merges","group0","group1","merge","selection_order","selection_sort","compare","ascending","compareNode","sortgroups","sortgroup","selection_call","selection_nodes","selection_node","selection_size","size","selection_empty","selection_each","attrRemove","attrRemoveNS","attrConstant","attrConstantNS","attrFunction","attrFunctionNS","selection_attr","defaultView","styleRemove","styleConstant","priority","styleFunction","selection_style","styleValue","propertyRemove","propertyConstant","propertyFunction","selection_property","classArray","string","classList","ClassList","classedAdd","names","list","classedRemove","classedTrue","classedFalse","classedFunction","selection_classed","textRemove","textConstant","textFunction","selection_text","htmlRemove","htmlConstant","htmlFunction","selection_html","raise","selection_raise","lower","selection_lower","selection_append","constantNull","selection_insert","before","remove","selection_remove","selection_cloneShallow","clone","selection_cloneDeep","selection_clone","deep","selection_datum","contextListener","onRemove","on","onAdd","selection_on","dispatchEvent","window","dispatchConstant","dispatchFunction","selection_dispatch","selection_iterator","root","selection_selection","sourceEvent","pointer","svg","point","rect","nonpassive","nonpassivecapture","nopropagation","noevent$1","dragDisable","view","noevent","yesdrag","noclick","constant$2","DragEvent","subject","identifier","active","dx","dy","defaultFilter","defaultContainer","defaultSubject","defaultTouchable","drag","container","touchable","gestures","mousedownx","mousedowny","mousemoving","touchending","clickDistance2","mousedowned","touchstarted","touchmoved","touchended","gesture","beforestart","mousemoved","mouseupped","nodrag","touches","touch","s","p0","define","constructor","factory","prototype","extend","definition","Color","darker","brighter","reI","reN","reP","reHex","reRgbInteger","reRgbPercent","reRgbaInteger","reRgbaPercent","reHslPercent","reHslaPercent","named","color","channels","color_formatHex","color_formatHex8","color_formatHsl","color_formatRgb","hslConvert","format","rgbn","Rgb","rgba","hsla","rgbConvert","rgb","opacity","clampi","clampa","rgb_formatHex","rgb_formatHex8","rgb_formatRgb","hex","Hsl","min","hsl","m2","hsl2rgb","clamph","clampt","constant$1","linear","exponential","gamma","nogamma","interpolateRgb","rgbGamma","start","end","colorRgb","interpolateNumber","reA","reB","zero","one","interpolateString","am","bm","bs","number","degrees","identity","decompose","scaleX","scaleY","skewX","svgNode","parseCss","parseSvg","interpolateTransform","parse","pxComma","pxParen","degParen","pop","translate","rotate","scale","interpolateTransformCss","interpolateTransformSvg","epsilon2","cosh","sinh","tanh","interpolateZoom","zoomRho","rho","rho2","rho4","zoom","p1","ux0","uy0","w0","ux1","uy1","w1","d2","d1","b0","b1","r0","r1","coshr0","_1","_2","_4","frame","interval","pokeDelay","taskHead","taskTail","clockLast","clockNow","clockSkew","clock","setFrame","now","clearNow","Timer","timer","time","timerFlush","wake","nap","poke","t0","t1","t2","elapsed","emptyOn","emptyTween","CREATED","SCHEDULED","STARTING","STARTED","RUNNING","ENDING","ENDED","timing","schedules","init","self","tween","stop","tick","interrupt","selection_interrupt","tweenRemove","tween0","tween1","tweenFunction","transition_tween","tweenValue","transition","interpolate","value1","string00","string1","interpolate0","string0","string10","transition_attr","attrInterpolate","attrInterpolateNS","attrTweenNS","attrTween","transition_attrTween","delayFunction","delayConstant","transition_delay","durationFunction","durationConstant","transition_duration","easeConstant","transition_ease","easeVarying","transition_easeVarying","transition_filter","Transition","transition_merge","onFunction","on0","on1","sit","transition_on","removeFunction","transition_remove","transition_select","transition_selectAll","inherit","transition_selection","styleNull","style","styleMaybeRemove","listener0","transition_style","styleInterpolate","styleTween","transition_styleTween","transition_text","textInterpolate","textTween","transition_textTween","transition_transition","id0","id1","newId","transition_end","selection_prototype","cubicInOut","defaultTiming","easeCubicInOut","selection_transition","ZoomEvent","transform","Transform","location","defaultExtent","defaultTransform","defaultWheelDelta","defaultConstrain","extent","translateExtent","dx0","dx1","dy0","dy1","constrain","wheelDelta","scaleExtent","duration","touchstarting","touchfirst","touchDelay","wheelDelay","tapDistance","wheeled","dblclicked","collection","k0","k1","centroid","clean","Gesture","wheelidled","currentTarget","x0","y0","dragEnable","started","l0","l1","dp","_defineProperty","obj","_arrayLikeToArray","arr","len","arr2","_unsupportedIterableToArray","minLen","_arrayWithHoles","_iterableToArrayLimit","_arr","_nonIterableRest","_slicedToArray","ConnectionMode","BackgroundVariant","PanOnScrollMode","ConnectionLineType","MarkerType","Position","getDimensions","clampPosition","position","getHostForElement","element","_element$getRootNode","_window","getBoundsOfBoxes","box1","box2","rectToBox","_ref","width","height","boxToRect","_ref2","x2","y2","isNumeric","internalsSymbol","ownKeys$4","enumerableOnly","keys","symbols","sym","_objectSpread$4","source","handleParentExpand","res","updateItem","extendWidth","extendHeight","_parent$style$width","_parent$style$height","xDiff","yDiff","applyChanges","changes","elements","initElements","currentChange","_updateItem","applyNodeChanges","nodes","applyEdgeChanges","edges","createSelectionChange","selected","getSelectionChanges","selectedIds","willBeSelected","ownKeys$3","_objectSpread$3","getHandleBounds","nodeElement","handles","handlesArray","nodeBounds","handle","handleBounds","getMouseHandler","handler","handleNodeClick","store","_store$getState","addSelectedNodes","unselectNodesAndEdges","multiSelectionActive","nodeInternals","ownKeys$2","_objectSpread$2","isEdge","getEdgeId","sourceHandle","targetHandle","getMarkerId","marker","rfId","idPrefix","connectionExists","edge","addEdge","edgeParams","pointToRendererPoint","_ref3","snapToGrid","_ref4","_ref5","tx","ty","tScale","_ref6","snapX","snapY","getRectOfNodes","box","currBox","_ref7","positionAbsolute","getNodesInside","_ref8","_ref9","partially","excludeNonSelectableNodes","rBox","visibleNodes","_node$selectable","selectable","nBox","xOverlap","yOverlap","overlappingArea","notInitialized","partiallyVisible","area","isVisible","getConnectedEdges","nodeIds","getTransformForBounds","bounds","minZoom","maxZoom","padding","xZoom","yZoom","clampedZoom","boundsCenterX","boundsCenterY","getD3Transition","ownKeys$1","_objectSpread$1","calculateXYZPosition","parentNodes","_result$x","_parentNode$position$","_parentNode$position","_result$y","_parentNode$position$2","_parentNode$position2","_parentNode$internals","_parentNode$internals2","_result$z","_parentNode$internals3","_parentNode$internals4","_result$z2","parentNode","createNodeInternals","nextNodeInternals","_currInternals$intern","currInternals","internals","_node$internalsSymbol","_node$internalsSymbol2","_calculateXYZPosition","fitView","_get","d3Zoom","d3Selection","fitViewOnInitDone","fitViewOnInit","nodesInitialized","_options$minZoom","_options$maxZoom","_options$padding","_getTransformForBound","_getTransformForBound2","nextTransform","zoomIdentity","handleControlledNodeSelectionChange","nodeChanges","change","_objectSpread2","handleControlledEdgeSelectionChange","edgeChanges","updateNodesAndEdgesSelections","changedNodes","changedEdges","_get2","onNodesChange","onEdgesChange","hasDefaultNodes","hasDefaultEdges","infiniteExtent","initialState","ownKeys","_objectSpread","_createContext","Provider","useStoreApi","_get$defaultEdgeOptio","defaultEdgeOptions","nextEdges","updates","fitViewOnInitOptions","domNode","viewportNode","_window$DOMMatrixRead","dimensions","doUpdate","nextFitViewOnInitDone","nodeDragItems","positionChanged","dragging","_get3","selectedNodeIds","_get4","nodeId","selectedEdgeIds","_get5","edgeId","_get6","storeEdges","nodesToUnselect","edgesToUnselect","_get7","_get8","_get9","_get10","nodeExtent","_get11","out","tmp","shallow","objA","objB","keysA","_arrayWithoutHoles","_iterableToArray","iter","_nonIterableSpread","_toConsumableArray","initialViewportHelper","__","useViewportHelper","_useStore","viewportHelperFunctions","zoomLevel","_transform$x","_transform$y","_transform$zoom","_store$getState$trans","_store$getState$trans2","nextZoom","centerX","centerY","_store$getState2","_store$getState3","snapGrid","useReactFlow","viewportHelper","getNodes","useCallback","getNode","getEdges","_store$getState3$edge","getEdge","_store$getState4","_store$getState4$edge","setNodes","payload","_store$getState5","nextNodes","setEdges","_store$getState6","_store$getState6$edge","addNodes","_store$getState7","currentNodes","addEdges","_store$getState8","_store$getState8$edge","toObject","_store$getState9","_store$getState9$edge","_transform","_objectWithoutPropertiesLoose","excluded","sourceKeys","_objectWithoutProperties","sourceSymbolKeys","PlusIcon","React","MinusIcon","FitViewIcon","LockIcon","UnlockIcon","_excluded","ControlButton","className","rest","isInteractiveSelector","Controls","_ref2$showZoom","showZoom","_ref2$showFitView","showFitView","_ref2$showInteractive","showInteractive","fitViewOptions","onZoomIn","onZoomOut","onFitView","onInteractiveChange","_useState","useState","_useState2","setIsVisible","isInteractive","_useReactFlow","zoomIn","zoomOut","onZoomInHandler","onZoomOutHandler","onFitViewHandler","onToggleInteractivity","memo","createGridLinesPath","strokeWidth","stroke","createGridDotsPath","fill","_defaultColors","defaultColors","transformSelector","Background","_ref$variant","variant","_ref$gap","gap","_ref$size","ref","patternId","setPatternId","_useStore2","tX","tY","bgs","scaledGap","xOffset","yOffset","isLines","bgColor","path","useUpdateNodeInternals","updateNodeDimensions","_store$getState$domNo","accounts","Attribution","proOptions","_ref$position","positionClasses","_excluded$2","ownKeys$c","_objectSpread$c","EdgeText","label","_ref$labelStyle","labelStyle","_ref$labelShowBg","labelShowBg","_ref$labelBgStyle","labelBgStyle","_ref$labelBgPadding","labelBgPadding","_ref$labelBgBorderRad","labelBgBorderRadius","edgeRef","edgeTextBbox","setEdgeTextBbox","edgeTextClasses","textBbox","EdgeText$1","BaseEdge","markerEnd","markerStart","text","getControl","pos","x1","y1","ctX","ctY","getSimpleBezierPath","sourceX","sourceY","_ref2$sourcePosition","sourcePosition","targetX","targetY","_ref2$targetPosition","targetPosition","_getControl","_getControl2","sourceControlX","sourceControlY","_getControl3","_getControl4","targetControlX","targetControlY","getSimpleBezierCenter","_ref3$sourcePosition","_ref3$targetPosition","_getControl5","_getControl6","_getControl7","_getControl8","SimpleBezierEdge","_ref4$sourcePosition","_ref4$targetPosition","_getSimpleBezierCente","_getSimpleBezierCente2","ownKeys$b","_objectSpread$b","LeftOrRight","getCenter","_ref$sourcePosition","_ref$targetPosition","sourceIsLeftOrRight","targetIsLeftOrRight","mixedEdge","_xOffset","_centerX","_yOffset","_centerY","bottomLeftCorner","leftBottomCorner","bottomRightCorner","rightBottomCorner","leftTopCorner","topLeftCorner","topRightCorner","rightTopCorner","getSmoothStepPath","_ref$borderRadius","borderRadius","_getCenter","_getCenter2","offsetX","offsetY","cornerWidth","cornerHeight","cornerSize","leftAndRight","cX","cY","firstCornerPath","secondCornerPath","SmoothStepEdge","_ref2$borderRadius","_getCenter3","_getCenter4","ownKeys$a","_objectSpread$a","StepEdge","props","StraightEdge","calculateControlOffset","distance","curvature","getControlWithCurvature","getBezierPath","_ref2$curvature","_getControlWithCurvat","_getControlWithCurvat2","_getControlWithCurvat3","_getControlWithCurvat4","getBezierCenter","_ref3$curvature","_getControlWithCurvat5","_getControlWithCurvat6","_getControlWithCurvat7","_getControlWithCurvat8","BezierEdge","_getBezierCenter","_getBezierCenter2","NodeIdContext","checkElementBelowIsValid","connectionMode","isTarget","handleId","isValidConnection","doc","elementBelow","elementBelowIsTarget","elementBelowIsSource","elementBelowNodeId","elementBelowHandleId","connection","isValid","resetRecentHandle","hoveredHandle","handleMouseDown","onConnect","elementEdgeUpdaterType","onEdgeUpdateEnd","reactFlowNode","_getState","onConnectStart","handleType","containerBounds","recentHoveredHandle","onMouseMove","_checkElementBelowIsV","isHoveringHandle","onMouseUp","_getState2","onConnectStop","onConnectEnd","_checkElementBelowIsV2","_excluded$1","ownKeys$9","_objectSpread$9","alwaysValid","selector$a","Handle","forwardRef","_ref$type","_ref$isValidConnectio","_ref$isConnectable","isConnectable","onMouseDown","connectionStartHandle","connectOnClick","onConnectExtended","onConnectAction","onMouseDownHandler","onClick","onClickConnectStart","onClickConnectStop","onClickConnectEnd","Handle$1","DefaultNode","DefaultNode$1","InputNode","InputNode$1","OutputNode","OutputNode$1","selector$9","areEqual","selectedNodeIdsA","selectedNodeIdsB","selectedEdgeIdsA","selectedEdgeIdsB","SelectionListener","onSelectionChange","selectedNodes","selectedEdges","SelectionListener$1","selector$8","useStoreUpdater","setStoreState","useDirectStoreUpdater","StoreUpdater","defaultNodes","defaultEdges","nodesDraggable","nodesConnectable","elementsSelectable","onNodesDelete","onEdgesDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","setDefaultNodesAndEdges","setMinZoom","setMaxZoom","setTranslateExtent","setNodeExtent","reset","css_248z$1","css","css_248z","theme","shiftX","shift","shiftY","EdgeAnchor","_ref$radius","radius","wrapEdge","EdgeComponent","EdgeWrapper","onEdgeDoubleClick","animated","hidden","sourceHandleId","targetHandleId","onContextMenu","onMouseEnter","onMouseLeave","edgeUpdaterRadius","onEdgeUpdate","onEdgeUpdateStart","updating","setUpdating","onEdgeClick","addSelectedEdges","onEdgeDoubleClickHandler","onEdgeContextMenu","onEdgeMouseEnter","onEdgeMouseMove","onEdgeMouseLeave","handleEdgeUpdater","isSourceHandle","_onEdgeUpdateEnd","evt","onConnectEdge","onEdgeUpdaterSourceMouseDown","onEdgeUpdaterTargetMouseDown","onEdgeUpdaterMouseEnter","onEdgeUpdaterMouseOut","markerStartUrl","markerEndUrl","inactive","handleEdgeUpdate","edgeClasses","ownKeys$8","_objectSpread$8","createEdgeTypes","edgeTypes","standardTypes","wrappedTypes","specialTypes","getHandlePosition","nodeRect","getHandle","getEdgePositions","sourceNodeRect","targetNodeRect","sourceHandlePos","targetHandlePos","isEdgeVisible","sourcePos","targetPos","sourceWidth","sourceHeight","targetWidth","targetHeight","edgeBox","viewBox","getNodeData","_node$positionAbsolut","_node$positionAbsolut2","_node$positionAbsolut3","_node$positionAbsolut4","isInvalid","useKeyPress","keyCode","keyPressed","setKeyPressed","pressedKeys","_useMemo","keyCodeArr","keysFlat","_useMemo2","keyCodes","keysToWatch","_options$target","_options$target2","downHandler","isInputDOMNode","keyOrCode","useKeyOrCode","isMatchingKey","upHandler","resetHandler","_options$target3","_options$target4","isUp","eventCode","_event$composedPath","selector$7","useGlobalKeyHandler","deleteKeyCode","multiSelectionKeyCode","deleteKeyPressed","multiSelectionKeyPressed","nodesToRemove","connectedEdges","edgesToRemove","edgeIdsToRemove","useResizeHandler","rendererNode","resizeObserver","updateDimensions","viewChanged","prevViewport","eventViewport","eventToFlowTransform","isWrappedWithClass","selector$6","ZoomPane","onMove","onMoveStart","onMoveEnd","_ref$zoomOnScroll","zoomOnScroll","_ref$zoomOnPinch","zoomOnPinch","_ref$panOnScroll","panOnScroll","_ref$panOnScrollSpeed","panOnScrollSpeed","_ref$panOnScrollMode","panOnScrollMode","_ref$zoomOnDoubleClic","zoomOnDoubleClick","selectionKeyPressed","_ref$panOnDrag","panOnDrag","_ref$defaultZoom","defaultZoom","_ref$defaultPosition","defaultPosition","zoomActivationKeyCode","_ref$preventScrolling","preventScrolling","noWheelClassName","noPanClassName","isZoomingOrPanning","zoomPane","prevTransform","d3ZoomHandler","zoomActivationKeyPressed","_selection$node","d3ZoomInstance","clampedX","clampedY","updatedTransform","currentZoom","pinchDelta","_zoom","deltaNormalize","deltaX","deltaY","flowTransform","zoomScroll","pinchZoom","ownKeys$7","_objectSpread$7","getMousePosition","selector$5","initialRect","UserSelection","prevSelectedNodesCount","prevSelectedEdgesCount","userSelectionRect","setUserSelectionRect","userSelectionActive","renderUserSelectionPane","resetUserSelection","mousePos","_userSelectionRect$st","_userSelectionRect$st2","startX","startY","nextUserSelectRect","_changes","ownKeys$6","_objectSpread$6","isParentSelected","hasSelector","nodeRef","current","_current","getDragItems","_n$positionAbsolute$x","_n$positionAbsolute","_n$positionAbsolute$y","_n$positionAbsolute2","updatePosition","dragItem","currentExtent","nextPosition","_parent$positionAbsol","_parent$positionAbsol2","_parent$positionAbsol3","_parent$positionAbsol4","_parent","parentX","parentY","parentPosition","_parentNode$positionA","_parentNode$positionA2","_parentNode$positionA3","_parentNode$positionA4","getEventHandlerParams","dragItems","extentedDragItems","wrapSelectionDragFunc","selectionFunc","useDrag","_ref$disabled","disabled","noDragClassName","handleSelector","isSelectable","selectNodesOnDrag","setDragging","lastPos","getPointerPosition","pointerPos","dragHandler","onStart","_nodeInternals$get","_getEventHandlerParam","_getEventHandlerParam2","currentNode","updateNodePositions","onDrag","_getEventHandlerParam3","_getEventHandlerParam4","_updateNodePositions","_nodeInternals","onStop","_getEventHandlerParam5","_getEventHandlerParam6","_currentNode","_nodes","isDraggable","ownKeys$5","_objectSpread$5","selector$4","bboxSelector","NodesSelection","onSelectionContextMenu","transformString","left","top","NodesSelection$1","selector$3","FlowRenderer","onPaneClick","onPaneContextMenu","onPaneScroll","selectionKeyCode","nodesSelectionActive","onWheel","FlowRenderer$1","useVisibleNodes","onlyRenderVisible","selector$2","NodeRenderer","resizeObserverRef","entries","entry","_resizeObserverRef$cu","_node$internalsSymbol3","nodeType","NodeComponent","NodeRenderer$1","_oppositePosition","oppositePosition","ConnectionLine","_fromNode$internalsSy","_fromNode$width","_fromNode$height","_fromNode$positionAbs","_fromNode$positionAbs2","connectionNodeId","connectionHandleType","connectionLineStyle","_ref$connectionLineTy","connectionLineType","CustomConnectionLineComponent","fromNode","toX","toY","fromHandleBounds","handleBound","fromHandle","fromHandleX","fromHandleY","fromX","fromY","fromPosition","toPosition","dAttr","pathParams","_typeof","_MarkerSymbols","ArrowSymbol","_ref$color","_ref$strokeWidth","ArrowClosedSymbol","_ref2$color","_ref2$strokeWidth","MarkerSymbols","useMarkerSymbol","symbol","symbolExists","Marker","_ref$width","_ref$height","_ref$markerUnits","markerUnits","_ref$orient","orient","_Symbol","markerSelector","defaultColor","ids","markers","markerId","MarkerDefinitions","MarkerDefinitions$1","defaultEdgeTree","groupEdgesByZLevel","elevateEdgesOnSelect","maxLevel","levelLookup","tree","hasZIndex","_nodeInternals$get$in","_nodeInternals$get2","_nodeInternals$get2$i","edgeTree","level","useVisibleEdges","sourceNode","targetNode","selector$1","EdgeRenderer","defaultMarkerColor","connectionLineComponent","connectionLineContainerStyle","renderConnectionLine","isMaxLevel","_getNodeData","_getNodeData2","sourceHandleBounds","sourceIsValid","_getNodeData3","_getNodeData4","targetHandleBounds","targetIsValid","edgeType","targetNodeHandles","_getEdgePositions","EdgeRenderer$1","Viewport","useOnInitHandler","onInit","ReactFlowInstance","isInitialized","GraphView","nodeTypes","onNodeClick","onNodeDoubleClick","onNodeMouseEnter","onNodeMouseMove","onNodeMouseLeave","onNodeContextMenu","onlyRenderVisibleElements","GraphView$1","GroupNode","wrapNode","NodeWrapper","xPos","yPos","onDoubleClick","dragHandle","zIndex","isParent","initialized","prevSourcePosition","prevTargetPosition","prevType","hasPointerEvents","onMouseEnterHandler","getMouseHandler$1","onMouseMoveHandler","onMouseLeaveHandler","onContextMenuHandler","onDoubleClickHandler","onSelectNodeHandler","currNode","typeChanged","sourcePosChanged","targetPosChanged","createNodeTypes","useNodeOrEdgeTypes","nodeOrEdgeTypes","createTypes","typesParsed","injectStyle","head","Wrapper","isWrapped","Provider$1","defaultNodeTypes","defaultEdgeTypes","initSnapGrid","initDefaultPosition","ReactFlow","_ref$nodeTypes","_ref$edgeTypes","_ref$connectionMode","_ref$deleteKeyCode","_ref$selectionKeyCode","_ref$multiSelectionKe","_ref$zoomActivationKe","_ref$snapToGrid","_ref$snapGrid","_ref$onlyRenderVisibl","_ref$selectNodesOnDra","_ref$minZoom","_ref$maxZoom","_ref$translateExtent","_ref$defaultMarkerCol","_ref$edgeUpdaterRadiu","_ref$noDragClassName","_ref$noWheelClassName","_ref$noPanClassName","_ref$fitView","_ref$connectOnClick","attributionPosition","_ref$elevateEdgesOnSe","nodeTypesWrapped","edgeTypesWrapped","ReactFlowProvider","createUseItemsState","initialItems","setItems","onItemsChange","useNodesState","useEdgesState","isFiniteNumber","round","buildSmoothPath","sx","sy","horizontalDelta","verticalDelta","baseOffset","controlOffset","verticalAdjustment","c1x","c1y","c2x","c2y","AnimatedEdge","isHovered","setIsHovered","handleMouseEnter","handleMouseLeave","coordinates","edgePath","gradientId","midpointX","midpointY","removeButtonSize","foreignObjectX","foreignObjectY","edgeClassName","removeButtonClassName","jsxs","formatList","FeatureCanvasSidebar","onAddNode","setQuery","expandedCategories","setExpandedCategories","normalizedQuery","filteredNodes","haystacks","groupedNodes","category","categoryA","categoryB","changed","toggleCategory","totalVisible","hasMatches","isExpanded","fetchNodeCatalog","response","fetchDatasets","limit","fetchLabelEncodingRecommendations","sourceId","sampleSize","graph","targetNodeId","body","fetchOrdinalEncodingRecommendations","fetchTargetEncodingRecommendations","fetchHashEncodingRecommendations","fetchOneHotEncodingRecommendations","fetchDummyEncodingRecommendations","fetchDropColumnRecommendations","fetchOutlierRecommendations","normalizedSampleSize","fetchSkewnessRecommendations","transformations","fetchScalingRecommendations","fetchBinningRecommendations","fetchBinnedDistribution","message","errorPayload","detail","trimmed","fetchQuickProfile","fetchOutlierDiagnostics","clampPercentile","fallback","numeric","sanitizeManualBounds","raw","column","upper","lowerCandidate","upperCandidate","parsedLower","parsedUpper","temp","lowerPercentile","upperPercentile","fetchPipeline","savePipeline","fetchPipelineHistory","fetchPipelinePreviewRows","datasetSourceId","offset","mode","url","fetchPipelinePreview","triggerFullDatasetExecution","fullDatasetPayload","fetchFullExecutionStatus","jobId","createTrainingJob","jobs","total","fetchTrainingJob","fetchTrainingJobs","evaluateTrainingJob","createHyperparameterTuningJob","fetchHyperparameterTuningJob","fetchHyperparameterTuningJobs","fetchModelHyperparameters","modelType","fetchBestHyperparameters","sortGraphValue","sortedKeys","toHex","buffer","byte","sha256Hex","encoder","digest","sanitizeGraphForHash","rawNodes","rawEdges","safeNodes","candidate","first","second","safeEdges","sourceCompare","generatePipelineId","safeGraph","graphJson","hash","useDropMissingColumns","hasDropColumnSource","graphContext","hasReachableSource","columnTypeMap","setAvailableColumns","setColumnSearch","setColumnMissingMap","setColumnTypeMap","setColumnSuggestions","availableFilters","setAvailableFilters","activeFilterId","setActiveFilterId","recommendations","setRecommendations","recommendationsError","setRecommendationsError","isFetchingRecommendations","setIsFetchingRecommendations","recommendationsGeneratedAt","setRecommendationsGeneratedAt","suggestedThreshold","setSuggestedThreshold","requestId","setRequestId","columnTypeMapRef","resetState","candidates","sanitizedMissingMap","rawValue","trimmedKey","numericValue","columnSet","orderedColumns","columnTypePayload","trimmedValue","columnRecommendationPayload","values","refreshRecommendations","signalLabelMap","formatSignalName","signal","segment","filteredRecommendations","DropMissingColumnsSection","relativeGeneratedAt","formatMissingPercentage","getPriorityClass","getPriorityLabel","handleToggleColumn","selectedColumns","renderRecommendationOption","checked","priorityClass","priorityLabel","signalLabels","Fragment","DropMissingRowsSection","thresholdParameter","dropIfAnyParameter","renderParameterField","DEFAULT_KEEP_STRATEGY","DEDUP_KEEP_OPTIONS","RemoveDuplicatesSection","removeDuplicatesColumnsParameter","removeDuplicatesKeepParameter","renderMultiSelectField","removeDuplicatesKeepSelectId","removeDuplicatesKeep","onKeepChange","handleSelectChange","option","ensureArrayOfString","COMMON_DTYPE_OPTIONS","CastColumnTypesSection","configState","setConfigState","availableColumns","columnSuggestions","previewColumns","previewStatus","columnOverrides","dtype","castDefaultTarget","castTableRows","originalType","suggestions","recommended","hasOverride","overrideValue","normalizedOverride","optionSet","effectiveTarget","hasRecommendationGap","isRecommendationApplied","isSelected","castTableGroups","needsAttention","row","aligned","castAttentionCount","hasCastRecommendations","castSelectedCount","handleSetColumnOverride","normalizedColumn","currentOverrides","trimmedDtype","nextColumns","skippedColumns","hadSkip","handleApplyAllColumnRecommendations","recommendedEntries","handleCastTargetDropdownChange","rowClasses","selectValue","recommendationApplied","additionalSuggestions","helperText","WINDOW_LIMIT","ROW_STATS_DISPLAY_LIMIT","SAMPLING_ADJUSTMENT_MESSAGES","FULL_EXECUTION_STATUS_LABELS","FULL_EXECUTION_WARNING_MESSAGES","FULL_EXECUTION_JOB_STATUS_LABELS","normaliseFullExecutionTone","resolveFullExecutionWarning","mapped","normalised","resolveFullExecutionSummary","formatMetricValue","jobStatus","tone","statusLabel","processedRows","totalRows","detailParts","metadata","jobStatusLabel","formatted","warnings","warning","stepLabel","plural","createInitialRowWindowState","resolveAdjustmentMessage","requested","PreviewPanel","preview","columns","rows","tableNote","formatCellValue","formatNumericStat","formatModeStat","fullExecutionStepLabel","fullExecutionWarnings","metrics","columnStats","rowStats","appliedSteps","displayedSteps","displayStep","matchIndex","step","sampleRows","rowMissingMap","acc","stat","rowStatsDisplay","rowIndex","precision","DataSnapshotSection","previewState","canTriggerPreview","onRefresh","rowWindow","setRowWindow","fullExecutionSummary","setFullExecutionSummary","expandedContext","setExpandedContext","isRefreshing","isButtonDisabled","baseColumns","rawColumns","basePreviewRows","baseRowCount","totalAvailableInPreview","baseHasMore","summary","pollInterval","updatedSignal","updatedSummary","visibleColumns","visibleRows","effectiveHasMore","isLoadingMore","loadedRowCount","formattedLoaded","formattedTotal","baseMessage","samplingAdjustmentMessages","showLargeDatasetNote","handleLoadMore","currentRows","requestOffset","allPreviewRows","nextChunk","newRows","newOffset","stillHasMore","existingRows","safeColumns","normalizedOffset","returnedRows","mergedRows","returnedCount","hasMore","nextOffsetValue","responseTotal","fallbackTotal","totalRowsValue","PROFILING_SAMPLE_PRESETS","useDatasetProfileController","isDatasetProfileNode","profilingGraphSignature","formatRelativeTime","profileState","setProfileState","profileRequestId","setProfileRequestId","profileCache","setProfileCache","profilingSamplePreset","setProfilingSamplePreset","profilingActiveTab","setProfilingActiveTab","isProfilingWarningsOpen","setIsProfilingWarningsOpen","profilingCacheKey","cachedProfileResult","selectedPreset","preset","requestedSampleSize","profileData","profileGeneratedAtKey","profilingCorrelationCount","handleRefreshDatasetProfile","profilingWarningsListId","profilingSummaryPanelId","profilingCorrelationsPanelId","profilingSummaryTabId","profilingCorrelationsTabId","activeProfilingSamplePreset","relativeProfilingGeneratedAt","DatasetProfileSection","controller","hasProfileData","numericSummary","hasNumericSummary","topValues","sampleValues","magnitude","strength","sign","PlaceholderIcon","NodeSettingsHeader","title","isDataset","onClose","canResetNode","onResetNode","NodeSettingsFooter","showSaveButton","canSave","onSave","isBusy","busyLabel","normalized","BINNING_DEFAULT_EQUAL_WIDTH_BINS","BINNING_DEFAULT_EQUAL_FREQUENCY_BINS","BINNING_DEFAULT_PRECISION","BINNING_DEFAULT_SUFFIX","BINNING_DEFAULT_MISSING_LABEL","KBINS_DEFAULT_N_BINS","KBINS_DEFAULT_ENCODE","KBINS_DEFAULT_STRATEGY","BINNING_STRATEGY_OPTIONS","BINNING_LABEL_FORMAT_OPTIONS","BINNING_STRATEGY_LABELS","BINNING_MISSING_OPTIONS","BINNED_SAMPLE_PRESETS","normalizeBinningConfigValue","rawStrategy","strategy","clampInteger","minimum","maximum","rounded","equalWidthBins","equalFrequencyBins","duplicates","includeLowest","dropOriginal","outputSuffix","rawLabelFormat","labelFormat","missingStrategy","missingLabelCandidate","missingLabel","kbinsNBins","rawKbinsEncode","kbinsEncode","rawKbinsStrategy","kbinsStrategy","parseNumberList","rawBins","uniqueBins","parseLabelList","rawLabels","coerceOptionalInteger","customBins","parsed","customLabels","labels","columnStrategies","rawColumnStrategies","rawOverride","overridePayload","override","rawOverrideStrategy","overrideEqualWidth","overrideEqualFrequency","overrideKbinsNBins","rawOverrideEncode","rawOverrideKbinsStrategy","overrideCustomBins","overrideCustomLabels","buildBinningOverrideSummary","overrideColumns","overrideCount","strategyLabels","parts","BinNumericColumnsSection","fieldIds","onIntegerChange","onBooleanToggle","onSuffixChange","onLabelFormatChange","onMissingStrategyChange","onMissingLabelChange","formatStrategyLabel","formatConfidenceLabel","renderStatsSummary","stats","hasMin","hasMax","minDisplay","maxDisplay","BinningInsightsSection","hasSource","binningConfig","binningDefaultLabel","binningOverrideCount","binningOverrideSummary","excludedColumns","numericColumnCount","canApplyAllNumeric","onApplyAllNumeric","onApplyStrategies","onClearOverrides","customEdgeDrafts","customLabelDrafts","onOverrideStrategyChange","onOverrideNumberChange","onOverrideKbinsEncodeChange","onOverrideKbinsStrategyChange","onOverrideClear","onCustomBinsChange","onCustomLabelsChange","onClearCustomColumn","summaryLabel","excludedPreview","remaining","recommendationMap","map","allColumns","resolveSelectValue","defaultStrategy","hasValidContext","buildOverrideDetails","recommendation","effectiveStrategy","recommendedStrategy","isOverrideApplied","recommendedBinsRaw","recommendedBinsNumber","recommendedBins","equalWidthValue","equalFrequencyValue","kbinsNBinsValue","kbinsEncodeValue","kbinsStrategyValue","statsSummary","reasons","overrideDetails","details","hasCustomBins","hasCustomLabels","merged","confidenceLabel","customEdgesDraft","customLabelsDraft","hasCustomValues","BinnedDistributionSection","cards","onSelectPreset","canRefresh","activePreset","card","topPercentageLabel","summaryValue","bin","labelClass","barWidth","BASIC_IMPUTATION_METHOD_OPTIONS","ADVANCED_IMPUTATION_METHOD_OPTIONS","IMPUTATION_METHOD_OPTIONS","IMPUTER_MISSING_FILTER_PRESETS","NUMERIC_DTYPE_TOKENS","BOOLEAN_DTYPE_TOKENS","NON_NUMERIC_DTYPE_TOKENS","isLikelyNumericColumn","rawDtype","token","isNumericImputationMethod","method","buildDefaultOptionsForMethod","sanitizeOptionsForMethod","normalizeImputationStrategies","allowedMethods","methodFallback","allowedSet","rawMethod","rawOptions","sanitizedOptions","serializeImputationStrategies","strategies","ImputationStrategiesSection","columnOptions","methodOptions","missingFilter","missingFilterMax","missingFilterActive","filteredOptionCount","collapsedStrategies","onToggleStrategy","onRemoveStrategy","onAddStrategy","onMethodChange","onOptionNumberChange","onColumnsChange","onColumnToggle","onMissingFilterChange","schemaDiagnostics","schemaDiagnosticsMap","sliderMax","hasCatalog","renderMethodSummary","baseLabel","columnsValue","requiresNumericColumns","columnOptionsForStrategy","missingValue","methodSummary","columnSummary","isCollapsed","selectAllCandidates","dtypeIssues","dtypeSummary","handleSelectAllColumns","combined","hasMean","hasMedian","hasMode","showStats","SCALING_METHOD_ORDER","SCALING_METHOD_FALLBACK_LABELS","SCALING_CONFIDENCE_LABEL","normalizeColumnList","normalizeScalingConfigValue","rawDefaultMethod","defaultMethod","columnMethods","rawColumnMethods","methodKey","autoDetect","createScalingMethodLabelMap","methods","createScalingMethodDetailMap","createScalingMethodOptions","labelMap","buildScalingRecommendationRows","scalingConfig","scalingMethodLabelMap","scalingSelectedSet","scalingSkippedColumns","scalingExcludedColumns","recommendedMethod","recommendedLabel","fallbackLabels","confidence","currentOverride","currentMethod","currentMethodLabel","isExcluded","isSkipped","buildScalingOverrideSummary","ScalingInsightsSection","isFetchingScaling","scalingMethodOptions","scalingMethodDetailMap","scalingDefaultDetail","scalingAutoDetectEnabled","scalingSelectedCount","scalingDefaultLabel","scalingOverrideCount","scalingOverrideExampleSummary","scalingRecommendationRows","scalingHasRecommendations","scalingStatusMessage","scalingError","scalingSampleSize","relativeScalingGeneratedAt","onApplyAllRecommendations","onDefaultMethodChange","onAutoDetectToggle","onOverrideSelect","defaultDetail","methodDetail","rowNeedsAttention","overrideHelper","statsParts","SKEWNESS_METHOD_ORDER","DEFAULT_SKEWNESS_METHOD","isSkewnessTransformationMethod","normalizeSkewnessTransformations","rawColumn","dedupeSkewnessTransformations","seen","SKEWNESS_DIRECTION_LABEL","FALLBACK_SKEWNESS_LABELS","createSkewnessMethodLabelMap","rawKey","buildSkewnessRows","viewMode","transformationMap","sourceColumns","recommendedMethods","primaryMethod","directionLabel","magnitudeLabel","skewnessValue","selectedMethod","aValue","bValue","aHasRecommendation","bHasRecommendation","buildSkewnessTableGroups","groupByMethod","resolveLabel","fallbackKey","bucket","weight","diff","aLabel","bLabel","SkewnessInsightsSection","isFetchingSkewness","skewnessThreshold","skewnessError","skewnessViewMode","skewnessRecommendedCount","skewnessNumericCount","skewnessGroupByMethod","skewnessRows","skewnessTableGroups","hasSkewnessAutoRecommendations","skewnessTransformationsCount","getSkewnessMethodLabel","getSkewnessMethodStatus","onApplyRecommendations","onViewModeChange","onGroupByToggle","onOverrideChange","onClearSelections","skewnessText","currentValue","recommendedSet","optionEntries","currentStatus","recommendedStatus","labelWithReason","statusToken","DEFAULT_SUFFIX","resolveMissingIndicatorSuffix","primary","normalizedPrimary","normalizedFallback","isFlaggedColumnName","suffix","normalizedSuffix","buildMissingIndicatorInsights","columnMissingMap","datasetColumns","datasetColumnSet","uniqueSelectedColumns","flagColumn","rawMissingValue","missingPercentage","flagCounts","aMissing","bMissing","aHas","bHas","flaggedColumnsInDataset","conflictCount","MissingIndicatorInsightsSection","insights","hasRows","suffixDisplay","flaggedPreview","remainingFlagged","statusParts","hasConflict","chipClass","rowClass","ALIAS_MODES","DEFAULT_ALIAS_MODE","aliasModeSet","TEXTUAL_TYPE_TOKENS","PREVIEW_PAIR_LIMIT","PREVIEW_COLUMN_LIMIT","PREVIEW_WARNING_LIMIT","PREVIEW_SAMPLE_LIMIT","PREVIEW_SAMPLE_LENGTH","PREVIEW_COLUMN_SAMPLE_LIMIT","MODE_METADATA","ALIAS_MODE_OPTIONS","TRUE_TOKEN_SET","FALSE_TOKEN_SET","coerceBooleanLike","coerceColumnList","normalizeAliasStrategy","resolveAliasMode","normalizeAliasStrategies","sanitizedFallback","single","serializeAliasStrategies","normalizeAliasKey","truncateSampleValue","isAliasMode","isTextLikeType","getAliasModeDetails","buildAliasColumnSummary","autoDetectEnabled","uniqueSelected","selectedSet","textColumns","recommendedColumns","nonTextSelected","autoDetectionActive","ENTRY_SPLIT_REGEX","formatPreviewList","splitPairText","delimiter","alias","replacement","parseCustomAliasPairs","invalidEntries","previewPairs","totalPairs","registerPair","aliasRaw","replacementRaw","duplicateList","duplicatePreview","invalidPreview","summarizeRecommendedColumns","summarizeNonTextColumns","formatSampleValue","serialized","buildAliasSampleMap","summarizeAliasSamples","sampleMap","previews","samples","normalizePreviewToken","COUNTRY_ALIAS_PREVIEW","COUNTRY_ALIAS_HINTS","pair","BOOLEAN_ALIAS_PREVIEW","BOOLEAN_ALIAS_HINTS","PUNCTUATION_ALIAS_PREVIEW","COUNTRY_CODE_REGEX","PUNCTUATION_REGEX","TOKEN_SPLIT_REGEX","MODE_REFERENCE_INFO","collectTokens","tokens","sample","piece","hasModeAffinity","formatSamplePreview","ReplaceAliasesSection","modeOptions","customPairSummary","customPairsParameter","onModeChange","hasStrategies","selectedCount","recommendedSummary","nonTextSummary","samplePreviews","disconnectedWarning","duplicateCount","invalidCount","duplicatePreviewText","invalidPreviewText","hasCustomStrategy","columnUsage","usage","expandedColumnLists","setExpandedColumnLists","toggleAdditionalColumns","modePreview","setModePreview","columnSamples","cache","baseSamples","extended","modeColumnAffinity","affinity","inspectionSamples","handleOpenModePreview","handleCloseModePreview","customPairsRendered","modeDetails","modeLabel","columnCount","columnSummaryLabel","isOtherExpanded","affinityColumns","showCustomPairsField","showCustomPairsNotice","sortedOptions","hasAffinity","hasAffinitySuggestions","primaryOptions","primarySet","otherOptions","assignedElsewhere","DATE_MODES","DEFAULT_DATE_MODE","DATE_TYPE_TOKENS","DATE_MODE_OPTIONS","DATE_SAMPLE_PATTERNS","isDateLikeType","matchesDatePattern","pattern","resolveDateMode","analyzeSampleCandidates","matches","buildDateColumnSummary","typeMatchedDates","sampleCandidates","nonDateSelected","sortedSampleCandidates","normalizeDateMode","normalizeAutoDetect","normalizeDateFormatStrategies","signature","serializeDateFormatStrategies","formatDateModeLabel","buildDateSampleMap","EMPTY_DATE_COLUMN_SUMMARY","StandardizeDatesSection","autoDetectActive","recommendedPreview","nonDateSummary","toggleId","autoDetectId","TRIM_MODES","DEFAULT_TRIM_MODE","normalizeSampleDisplay","sanitized","detectWhitespaceIssue","resolveTrimMode","getTrimModeDetails","analyzeWhitespaceCandidates","issueCount","count","share","buildTrimColumnSummary","whitespaceCandidates","summarizeTrimRecommendations","summarizeNonTextSelections","summarizeWhitespaceCandidates","buildTrimSampleMap","hasIssue","display","summarizeTrimSamples","EMPTY_TRIM_COLUMN_SUMMARY","TrimWhitespaceSection","columnsParameter","modeParameter","recommendationSummary","whitespaceSummary","hasDatasetContextWarning","REMOVE_SPECIAL_MODES","DEFAULT_REMOVE_SPECIAL_MODE","hasSpecialCharacter","hasLetter","hasDigit","resolveRemoveSpecialMode","getRemoveSpecialModeDetails","analyzeSpecialCandidates","specialCandidates","digitsOnly","lettersOnly","specialCount","digitsCount","lettersCount","sortedSpecial","sortedDigitsOnly","sortedLettersOnly","buildSpecialColumnSummary","digitsOnlyCandidates","lettersOnlyCandidates","summarizeSpecialRecommendations","summarizeSpecialWarnings","buildSpecialSampleMap","hasSpecial","summarizeSpecialSamples","EMPTY_SPECIAL_COLUMN_SUMMARY","RemoveSpecialCharactersSection","replacementParameter","specialSummary","digitsOnlySummary","lettersOnlySummary","CASE_MODES","DEFAULT_CASE_MODE","normalizeDisplay","toTitleCase","toSentenceCase","resolveCaseMode","getCaseModeDetails","detectInconsistentColumns","inconsistent","expected","buildCaseColumnSummary","inconsistentColumns","summarizeCaseRecommendations","summarizeCaseWarnings","buildCaseSampleMap","original","summarizeCaseSamples","EMPTY_CASE_COLUMN_SUMMARY","NormalizeTextCaseSection","selectedMode","inconsistentSummary","REGEX_MODES","DEFAULT_REGEX_MODE","collapseWhitespace","resolveRegexMode","getRegexModeDetails","analyzeRegexCandidates","digitsCandidates","lettersCandidates","sort","buildRegexColumnSummary","digits","letters","whitespace","summarizeRegexRecommendations","summarizeRegexWarnings","buildRegexSampleMap","formatSamplePair","replacementText","regex","summarizeRegexSamples","EMPTY_REGEX_COLUMN_SUMMARY","describeReplacementValue","flags","RegexCleanupSection","patternParameter","replacementValue","digitsSummary","lettersSummary","replacementDescription","isCustomMode","INVALID_VALUE_MODES","DEFAULT_INVALID_VALUE_MODE","NUMERIC_TYPE_TOKENS","SAMPLE_LIMIT","WARNING_PREVIEW_LIMIT","SAMPLE_PREVIEW_LIMIT","coerceNumber","isNumericType","resolveInvalidValueMode","getInvalidValueModeDetails","analyzeSampleMap","negative","zeros","percentage","age","buildInvalidValueColumnSummary","numericColumns","numericSet","nonNumericSelected","summarizeInvalidRecommendations","summarizeInvalidWarnings","buildInvalidValueSampleMap","DEFAULT_PERCENTAGE_LOWER","DEFAULT_PERCENTAGE_UPPER","DEFAULT_AGE_LOWER","DEFAULT_AGE_UPPER","evaluateSampleFlag","minValue","maxValue","threshold","hasLower","hasUpper","formatPreviewLine","flagged","summarizeInvalidSamples","EMPTY_INVALID_VALUE_COLUMN_SUMMARY","formatBoundsDescription","ReplaceInvalidValuesSection","minValueParameter","maxValueParameter","negativeSummary","zeroSummary","percentageSummary","ageSummary","nonNumericSummary","boundsDescription","urlAlphabet","nanoid","ARITHMETIC_METHODS","STAT_METHODS","SIMILARITY_METHODS","DATETIME_FEATURE_OPTIONS","DATETIME_FEATURE_SET","FEATURE_MATH_TYPE_OPTIONS","DEFAULT_TIMEZONE","coerceStringArray","coerceNumberArray","coerceBoolean","normalizeMethod","normalizeType","normalizeDatetimeFeatures","normalizeTimezone","normalizeFeatureMathOperations","operations","idValue","inputColumns","secondaryColumns","constants","outputColumn","outputPrefix","datetimeFeatures","timezone","fillna","roundDigits","epsilon","normalizeValue","allowOverwrite","description","sanitizeOperation","operation","serializeFeatureMathOperations","DEFAULT_OPERATION_INIT","createFeatureMathOperation","existingIds","defaultConfig","buildFeatureMathSummaries","signals","signalMap","getMethodOptions","getSimilarityMethodDescription","STATUS_LABELS","STATUS_CHIP_CLASS","DATETIME_FEATURE_KEY_SET","formatColumnPreview","remainder","parseColumnList","parseConstantsList","getSummaryNoteClass","FeatureMathOperationCard","onToggleCollapsed","onDuplicate","onReorder","onChange","typeLabel","methodLabel","similarityDescription","inputColumnsValue","setInputColumnsValue","secondaryColumnsValue","setSecondaryColumnsValue","constantsValue","setConstantsValue","handleInputColumnsCommit","handleSecondaryColumnsCommit","handleConstantsCommit","bodyId","inputListId","secondaryListId","chipStatus","statusChip","summaryMessage","summaryNoteClass","outputColumnsPreview","columnsPreview","showSecondaryField","showConstantsField","showNumericTuning","showSimilarityOptions","showDatetimeFields","showPrefixField","availableColumnsPreview","handleDateFeatureToggle","feature","handleNumberChange","allowOverwriteValue","checkboxId","FeatureMathSection","summaries","collapsed","onAddOperation","onDuplicateOperation","onRemoveOperation","onReorderOperation","onOperationChange","errorHandlingParameter","allowOverwriteParameter","defaultTimezoneParameter","epsilonParameter","pendingType","setPendingType","summaryMap","latestSignal","latestWarnings","handleAddOperation","STATUS_BADGE_CLASS","formatMetric","LabelEncodingSection","autoDetectParameter","maxUniqueParameter","outputSuffixParameter","dropOriginalParameter","missingStrategyParameter","missingCodeParameter","onToggleColumn","onApplyRecommended","aggregate","connectionNote","hasSuggestions","showErrorMessage","note","suggestion","statusClass","uniqueDisplay","missingDisplay","TargetEncodingSection","targetColumnParameter","maxCategoriesParameter","smoothingParameter","encodeMissingParameter","handleUnknownParameter","fallbackDisplay","HashEncodingSection","bucketsParameter","bucketDefaultNote","bucketDisplay","PolynomialFeaturesSection","degreeParameter","includeBiasParameter","interactionOnlyParameter","includeInputFeaturesParameter","outputPrefixParameter","parameterList","parameter","generatedFeatures","filledColumns","notes","featureCount","filledSummary","isDefinedParameter","formatNumber","fractionDigits","formatPValue","FeatureSelectionSection","methodParameter","scoreFuncParameter","problemTypeParameter","kParameter","percentileParameter","alphaParameter","estimatorParameter","stepParameter","minFeaturesParameter","maxFeaturesParameter","dropUnselectedParameter","primaryParameters","tuningParameters","configuredColumns","evaluatedColumns","droppedColumns","dropUnselected","evaluationSummary","additional","selectedSummary","droppedSummary","OrdinalEncodingSection","unknownValueParameter","unknownDisplay","DummyEncodingSection","dropFirstParameter","includeMissingParameter","prefixSeparatorParameter","dummyDisplay","OneHotEncodingSection","ACTION_LABELS","formatTimestamp","formatRowCount","getSplitActivity","split","activity","renderSplitCell","rowSummary","extraSplitNote","extras","getMethodLabel","TransformerAuditSection","onRefreshPreview","totalTransformers","summaryText","disableRefresh","rowKey","extraNote","nodeLabel","updatedDisplay","columnDisplay","summarizeList","findSplitSummary","steps","resolveSignal","matching","FeatureTargetSplitSection","rawSignals","activeSignal","configuredTarget","resolvedTarget","configuredFeatures","columnStatsMap","resolvedFeatures","autoIncludedFeatures","missingConfiguredFeatures","targetMissingCount","targetMissingPercentage","targetDtype","previewRowCount","autoCount","excludedCount","missingConfiguredCount","splitSummary","summaryItems","formattedMissing","formattedPercentage","previewIdleNote","targetMissingNote","canRefreshPreview","formatPercentage","TrainTestSplitSection","parameters","testSize","validationSize","randomState","stratify","targetColumn","showValidation","splitInfo","testSizeParam","validationSizeParam","randomStateParam","shuffleParam","stratifyParam","targetColumnParam","PROBLEM_TYPE_LABEL","isNumericFamily","family","isNumericDtype","lowered","findTrainSummary","TrainModelDraftSection","schemaColumns","previewColumnNames","effectiveSchemaColumns","schemaByName","selectedProblemType","targetStat","targetPresentInSchema","featureNames","numericFeatureNames","schema","numericFeatureSet","nonNumericFeatureNames","featureMissingNames","targetDistinctCount","missingTargetCount","readinessIssues","issues","detectionLabel","missingCountLabel","missingPercentageLabel","trainSummary","readyMessage","issue","formatColumnType","parseServerTimestamp","diffMinutes","diffHours","diffDays","formatPresetScore","score","BestHyperparamsModal","presets","isOpen","onApply","activePresetId","fieldMetadata","selectedId","setSelectedId","handleKey","currentIsApplied","content","logisticSolverRaw","logisticSolver","scalingNotice","paramEntries","findOption","optionValue","formatPrimitive","formatOption","valueText","fallbackToDefault","resolveValue","allowFallback","optionMatch","resolved","relativeFinished","presetRelative","createPortal","SCALING_NODE_TYPES","SCALING_CONVERGENCE_PATTERNS","treeInsensitiveKeywords","bayesInsensitiveKeywords","requiresScaling","modelKey","collectUpstreamNodeIds","upstreamIds","stack","sourceRaw","targetRaw","hasScalingUpstream","catalogType","resolveModelLabel","modelTypeOptions","gatherStringCandidates","depth","results","hasScalingConvergenceMessage","detectScalingConvergenceFromJob","job","candidateFields","buildWarning","modelLabel","problemType","useScalingWarning","required","STATUS_LABEL","METRIC_PREFERENCE","filterHyperparametersByFields","fieldNames","filtered","valuesEqual","sanitizeHyperparametersForPayload","fieldMap","normalizedMulti","defaultTrimmed","valueTrimmed","isRecord","cloneJson","resolveMetricPreference","hinted","pickPrimaryMetric","metricBuckets","cvMean","candidateBuckets","orderedKeys","ModelTrainingSection","runtimeConfig","cvConfig","draftConfigState","modelTypeParameter","hyperparametersParameter","cvEnabledParameter","cvStrategyParameter","cvFoldsParameter","cvShuffleParameter","cvRandomStateParameter","cvRefitStrategyParameter","onSaveDraftConfig","pipelineId","setPipelineId","pipelineError","setPipelineError","lastCreatedJob","setLastCreatedJob","lastCreatedJobCount","setLastCreatedJobCount","hyperparamValues","setHyperparamValues","showAdvanced","setShowAdvanced","advancedInitializedRef","pipelineIdFromSavedConfig","setPipelineIdFromSavedConfig","hasDraftChanges","setHasDraftChanges","isPresetModalOpen","setPresetModalOpen","lastAppliedPresetId","setLastAppliedPresetId","applyStatus","setApplyStatus","showScalingDetails","setShowScalingDetails","hyperparameters","hyperparametersError","cvEnabled","cvStrategy","cvFolds","cvShuffle","cvRandomState","cvRefitStrategy","filteredModelTypeParameter","hyperparamQuery","bestParamsQuery","hyperparamFields","hyperparamDefaults","allowedHyperparamNames","hyperparamFieldMap","filteredRuntimeHyperparams","prev","prevKeys","nextKeys","filteredDefaults","sanitizedHyperparameters","handleToggleAdvanced","graphPayload","graphWithDraftConfig","clonedGraph","existingData","mergedConfig","graphForHash","trainingJobsQueryKey","tuningJobsQueryKey","shouldFetchJobs","tuningJobsQuery","baseParams","scoped","currentData","trainingJobsQuery","enqueueTrainingJob","isCreatingJob","createJobError","jobCount","firstJob","tuningJobsError","isTuningJobsLoading","tuningJobs","bestParamsData","buildPresetParams","rawParams","rawKeys","filteredKeys","succeededTuningJobs","hyperparamPresets","seenJobIds","normalizedTarget","matchesTarget","candidateTarget","paramInfo","labelSegments","presetId","metadataTarget","rawLabel","scoringMetric","iterationCount","aTime","bTime","primaryPreset","hasPresetOptions","applyButtonDisabled","browsePresetsDisabled","latestTuningJob","latestTuningTimestamp","latestTuningRelative","latestTuningRunNumber","primaryPresetRelative","primaryPresetScoreLabel","applyPreset","messageOverride","handleApplyBestParams","successMessage","applyStatusColor","prerequisites","filteredJobs","normalizedProblemType","jobProblemType","direct","metaProblem","modelTypeValue","hasScalingConvergenceSignals","scalingWarning","hiddenJobCount","isJobsLoading","jobsError","isActionDisabled","handleHyperparamChange","renderHyperparamField","fieldId","num","opt","handleEnqueueTraining","maybeResult","graphForTraining","metadataPayload","enhancedGraph","existingConfig","requestedModelTypes","handleRefreshJobs","renderJobSummary","metric","updatedLabel","fallbackUpdated","timestampLabel","cvMetadata","cvMetrics","jobError","strategyKey","strategyLabel","foldLabel","normalizedError","tip","TRUE_CONFIG_TOKENS","FALSE_CONFIG_TOKENS","AUTO_DETECT_CONFIG_KEYS","BOOLEAN_TRUE_TOKENS","BOOLEAN_FALSE_TOKENS","normalizeConfigBoolean","pickAutoDetectValue","cloneConfig","sortValue","stableStringify","arraysAreEqual","inferColumnSuggestions","pushSuggestion","normalizedDtype","presentValues","numericConvertibleCount","booleanConvertibleCount","uniqueTokenCount","numericShare","booleanShare","integerConvertibleCount","SPLIT_OPTIONS","SPLIT_PRIORITY","DEFAULT_SPLITS","ensureStringArray","normalizeSplits","splits","allowed","arraysEqual","right","parseBooleanConfig","parsePositiveIntegerConfig","asNumber","toTimestamp","friendlySplitLabel","buildJobLabel","relative","clamp01","extractNumericMetrics","EvaluationPackSection","_renderParameterField","connectedSplitHandles","upstreamTrainingNodeIds","nodeLookup","upstreamKey","selectedJobId","configSplits","defaultSplitSelection","previousConfig","existing","nextConfig","selectedSplits","missingSplitLabels","missingSplitSummary","last","hasSelectableSplits","includeConfusion","includeCurves","includeResiduals","maxCurvePoints","maxScatterPoints","lastEvaluatedAt","report","setReport","activeResultsTab","setActiveResultsTab","userModifiedSplitsRef","aggregated","encounteredErrors","datasetResponse","appendJobs","safeFetch","jobList","jobLookup","successfulJobs","jobOptions","selectedJob","jobDetailQuery","evaluation","rawSplits","normalizedSplits","generatedAt","hydratedReport","splitKeys","evaluationMutation","handleSelectJob","handleToggleSplit","base","hasSplit","nextSplits","handleToggleInclude","handleRunEvaluation","request","lastRunRelative","orderedSplitEntries","keyA","keyB","priorityA","priorityB","comparisonMatrix","splitKey","splitPayload","metricKeys","comparisonDisabledReason","handleSelectTab","tab","isConnected","EvaluationComparisonPanel","EvaluationSplitCard","comparison","metricEntries","hasMetrics","ConfusionMatrixTable","curve","RocCurveChart","PrecisionRecallCurveChart","RegressionDiagnostics","matrix","totals","accuracy","normalizedRow","columnIndex","margin","span","verticalSpan","RESIDUAL_SUMMARY_LABELS","residuals","summaryEntries","ResidualHistogramChart","ResidualScatterPlot","histogram","counts","binEdges","maxCount","points","actualValues","predictedValues","globalMin","globalMax","projectX","projectY","STATUS_TONE","CLASSIFICATION_METRICS","REGRESSION_METRICS","LOWER_IS_BETTER","MODEL_LABEL_OVERRIDES","parseConfigBoolean","selectMetricBucket","formatModelType","chunk","normalizeProblemType","collectKeys","hasClassification","hasRegression","normalizeJobs","coefficientForMetric","ModelRegistrySection","directTrainNodes","showNonSuccess","aggregatedJobs","allJobs","scopedJobs","normalizedJobs","statusScopedJobs","classificationJobs","regressionJobs","fallbackProblemType","defaultProblemSetting","resolvedDefaultProblemType","activeProblemType","setActiveProblemType","selectedJobs","meta","defaultMethodSetting","activeMethod","setActiveMethod","matched","sortedJobs","methodSummaries","jobsForMethod","bestJob","best","candidateScore","bestScore","registryParameters","metricColumns","loadError","hasJobs","metricLabel","metricValue","primaryMetric","metricBucket","bucketValues","bucketLabel","metricKey","TUNING_STRATEGIES_KEY","TUNING_ACTIVE_ID_KEY","TUNING_EXPANDED_KEY","SEARCH_STRATEGY_FALLBACKS","normalizeSearchStrategyValue","knownValues","fallbackMatch","parseJsonObject","normalizeSearchSpace","cleaned","KNOWN_SPLITS","sanitizeSplitList","unique","filterSearchSpaceByFields","parseSearchInput","rawText","invalidTokens","selectOptions","dedupedValues","seenKeys","formatSearchValue","formatValuePreview","toFiniteNumber","clampNumber","buildDefaultSearchSpace","fields","space","solverField","penaltyField","isLogisticRegressionConfig","logisticSafeSolvers","logisticSafePenalties","candidateMap","addCandidate","defaultValue","solver","penalty","numericDefault","numericMin","numericMax","collected","SCORING_SUGGESTIONS","createStrategyId","stripTuningMetadata","cloned","cloneConfigForStrategy","createStrategyDraft","createStrategyLabel","ordinal","sanitizeStringMap","accumulator","sanitizeNullableStringMap","extractStoredStrategyMetadataFields","createEmptyPersistedMetadata","convertConfigToPersistedMetadata","rawStrategies","seenIds","labelRaw","baseConfig","strategyEntry","availableIds","rawActiveId","candidateActiveId","rawExpanded","expandedIds","buildStrategyDraftFromPersisted","convertDraftStateToPersistedMetadata","activeStrategyId","expandedStrategyIds","persistedStrategies","resolvedActiveId","expandedArray","resolveActiveStrategyId","requestedId","resolveExpandedStrategyIds","requestedIds","available","buildMetadataSignature","shallowEqualRecord","keysB","HyperparameterTuningSection","searchStrategyParameter","searchIterationsParameter","searchRandomStateParameter","scoringMetricParameter","setDraftConfigState","batchEnqueueError","setBatchEnqueueError","modelTypeParameterName","searchStrategyParameterName","searchIterationsParameterName","searchRandomStateParameterName","scoringMetricParameterName","selectedModelTypeRaw","searchStrategyOptions","availableSearchStrategies","parameterDefaultStrategy","searchStrategy","rawIterations","searchIterations","rawSearchRandomState","searchRandomState","searchIterationsDefault","searchRandomStateDefault","rawScoringMetric","baselineParse","searchSpaceParse","normalizedSearchSpace","baselineHyperparameters","baselineError","sanitizedSearchSpace","searchSpaceError","filteredBaselineOverrides","filteredSearchOverrides","baselineOverrideCount","searchOverrideCount","hasSearchSpaceEntries","searchSpaceTexts","setSearchSpaceTexts","searchSpaceFieldErrors","setSearchSpaceFieldErrors","hasAutoFilledSearchSpace","setHasAutoFilledSearchSpace","searchSpaceManuallyCleared","setSearchSpaceManuallyCleared","initialMetadataRef","persistedMetadata","initialStrategies","resolvedActive","resolvedExpanded","initialSignature","setStrategies","setExpandedStrategyIds","setActiveStrategyId","persistedMetadataSignatureRef","lastAppliedStrategyRef","lastModelTypeRef","activeStrategy","persistedMetadataFromConfig","configMetadataSignature","nextStrategies","nextActiveId","nextExpandedSet","nextSignature","previousMetadata","previousSignature","strategyModelType","configChanged","textsChanged","errorsChanged","autoFillChanged","clearedChanged","handleAddStrategy","nextOrdinal","usedStrategies","nextStrategyValue","configCloneRaw","configWithStrategy","iterationsValue","randomStateValue","newStrategy","handleToggleStrategy","strategyId","handleActivateStrategy","handleRemoveStrategy","relabeled","fallbackId","strategySummaries","modelValueRaw","modelValue","searchStrategyValueRaw","searchStrategyValue","searchLabel","scoringValueRaw","scoringValue","searchParse","parameterCount","candidateCount","hasErrors","generated","currentState","scoringDraft","setScoringDraft","scoringSuggestions","scoringLabel","scoringDescription","scoringInputId","hasSearchSpaceFieldErrors","updateBaselineValue","fieldName","nextValue","updated","handleSearchSpaceInputChange","clearBaselineValue","handleResetBaselineOverrides","handleClearSearchSpace","handleScoringChange","renderBaselineField","defaultHint","control","textValue","renderSearchSpaceField","configuredValues","configuredCount","errorMessage","placeholder","previewValues","searchSpaceDimension","candidateProduct","product","overflow","mergeConfigIntoGraph","configToMerge","sanitizedConfig","hasSanitizedConfig","sanitizedExistingConfig","validationConnectionStatus","upstreamNode","enqueueTuningJob","handleEnqueueTuning","buildStrategyPlans","plans","resolveAllowedNamesForModel","resolvedModelType","cached","collectNames","strategyConfig","rawModelType","resolvedSearchStrategy","strategyAllowedNames","baselineValues","sanitizedBaseline","normalizedSearch","rawSearchSpace","scoringRaw","resolvedScoring","resolveIterations","iterations","resolveRandomState","rawState","resolvedIterations","resolvedRandomState","graphForStrategy","baselinePayload","searchSpacePayload","latestJob","scoring","summaryParts","candidateLabel","STRATEGY_DESCRIPTIONS","normalizeStrategyLabel","clamped","formattedRatio","descriptor","findResamplingSummary","keywords","keyword","describeClassLabel","isMissing","ClassResamplingSection","samplingStrategyParameter","randomStateParameter","kNeighborsParameter","schemaGuard","resamplingSummary","randomStateLabel","kNeighborsLabel","configured","replacementLabel","classCountSummary","totalCount","truncated","schemaGuardSummary","targetNotConfigured","previewMissingTarget","heading","connectionGuidance","isDatasetNode","INSPECTION_NODE_TYPES","DATA_CONSISTENCY_TYPES","useCatalogFlags","isImputerNode","isMissingIndicatorNode","isReplaceAliasesNode","isTrimWhitespaceNode","isRemoveSpecialCharsNode","isReplaceInvalidValuesNode","isRegexCleanupNode","isNormalizeTextCaseNode","isStandardizeDatesNode","isLabelEncodingNode","isTargetEncodingNode","isHashEncodingNode","isTrainModelDraftNode","isModelEvaluationNode","isModelRegistryNode","isHyperparameterTuningNode","isFeatureTargetSplitNode","isTrainTestSplitNode","isClassUndersamplingNode","isClassOversamplingNode","isOrdinalEncodingNode","isDummyEncodingNode","isOneHotEncodingNode","isFeatureMathNode","isCastNode","isBinningNode","isScalingNode","isPolynomialFeaturesNode","isFeatureSelectionNode","isTransformerAuditNode","isOutlierNode","isSkewnessNode","isSkewnessDistributionNode","isBinnedDistributionNode","isDataConsistencyNode","isInspectionNode","isRemoveDuplicatesNode","isDropMissingColumnsNode","isDropMissingRowsNode","useScalingInsights","scalingData","setScalingData","setScalingError","setIsFetchingScaling","refreshScaling","useBinningInsights","binningData","setBinningData","binningError","setBinningError","isFetchingBinning","setIsFetchingBinning","refreshBinning","useSkewnessInsights","shouldLoad","skewnessData","setSkewnessData","setSkewnessError","setIsFetchingSkewness","debounceTimerRef","refreshSkewness","transformationsPayload","useBinnedDistribution","samplePreset","binnedDistributionData","setBinnedDistributionData","binnedDistributionError","setBinnedDistributionError","isFetchingBinnedDistribution","setIsFetchingBinnedDistribution","refreshBinnedDistribution","idleState","DEFAULT_PREVIEW_SAMPLE_SIZE","usePipelinePreview","shouldFetchPreview","graphSnapshot","isPreviewNode","previewSignature","skipPreview","requestPreviewRows","includeSignals","setPreviewState","lastSignatureRef","lastRequestRef","refreshPreview","fallbackSignature","edgePairs","effectiveSignature","signatureChanged","isMounted","wantRows","wantSignals","previewRequest","useDropColumnRecommendations","setIsFetching","setError","refreshDropColumnRecommendations","rawName","fetchError","DEFAULT_META","EMPTY_COLUMN_SUMMARY","EMPTY_CUSTOM_PAIR_SUMMARY","EMPTY_SAMPLE_MAP","EMPTY_OPTIONS","useAliasConfiguration","nodeConfig","previewSampleRows","aliasAutoDetectMeta","localValue","nodeValue","aliasStrategies","fallbackColumns","fallbackMode","fallbackAutoDetect","aliasSelectedColumns","aliasAutoDetectEnabled","replaceAliasesCustomPairsValue","aliasSampleMap","aliasColumnSummary","aliasCustomPairSummary","aliasColumnOptions","textSet","useOutlierRecommendations","outlierData","setOutlierData","outlierError","setOutlierError","isFetchingOutliers","setIsFetchingOutliers","refreshOutliers","TEMPORAL_TYPE_TOKENS","useNumericColumnAnalysis","shouldAnalyze","analysis","rawType","hasNumericTypeToken","isTemporalType","isTextualType","numericConvertible","hasNumericSample","encounteredNonBinaryNumeric","binaryTokens","parseNumericCandidate","useNumericRangeSummaries","numericExcludedColumns","recommendedColumnSet","selectedColumnSet","binningExcludedColumns","binningColumnPreviewMap","rangeMap","distinctValues","distinct","OUTLIER_METHOD_ORDER","OUTLIER_METHOD_FALLBACK_LABELS","OUTLIER_PARAMETER_KEYS","OUTLIER_METHOD_DEFAULT_PARAMETERS","normalizeMethodParameters","normalizedMethod","parameterKey","normalizedKey","normalizeColumnParameters","columnKey","normalizedParameters","normalizeOutlierConfigValue","rawDefault","methodValue","methodParameters","columnParameters","createOutlierMethodLabelMap","createOutlierMethodDetailMap","createOutlierMethodOptions","buildOutlierRecommendationRows","outlierConfig","insight","columnOverride","hasMissing","buildOutlierOverrideSummary","usePruneColumnSelections","outlierExcludedColumns","currentColumns","filteredColumns","nextMethods","hadExcludedMethod","removedColumns","nextBins","nextLabels","columnsChanged","filteredSkipped","skippedChanged","ensureState","methodsChanged","parametersChanged","nextParameters","useTextCleanupConfiguration","trimWhitespaceMode","trimWhitespaceColumns","trimWhitespaceSampleMap","trimWhitespaceColumnSummary","trimWhitespaceModeDetails","removeSpecialMode","removeSpecialColumns","removeSpecialSampleMap","removeSpecialColumnSummary","removeSpecialModeDetails","regexCleanupMode","regexCleanupColumns","regexCleanupSampleMap","regexCleanupColumnSummary","regexCleanupModeDetails","regexCleanupReplacementValue","configValue","normalizeCaseMode","normalizeCaseColumns","normalizeCaseSampleMap","normalizeCaseColumnSummary","normalizeCaseModeDetails","useReplaceInvalidConfiguration","useStandardizeDatesConfiguration","legacyColumns","hasAutoDetectStrategy","candidateSet","rawSamples","useScalingConfiguration","scalingOverrideSet","scalingRecommendations","scalingOverrideColumns","scalingOverridesPreview","scalingRecommendationCount","scalingAttentionCount","scalingConfiguredCount","scalingSkippedCount","useOutlierConfiguration","outlierRecommendations","outlierSkippedColumns","outlierSelectedColumns","exemptColumns","outlierOverrideSet","outlierMethodLabelMap","outlierMethodDetailMap","outlierRecommendationRows","outlierMethodOptions","outlierOverrideColumns","outlierOverridePreview","outlierSelectedCount","outlierOverrideCount","outlierParameterOverrideCount","outlierAutoDetectEnabled","outlierDefaultDetail","outlierDefaultLabel","outlierHasRecommendations","outlierAttentionCount","outlierConfiguredCount","outlierSkippedCount","outlierStatusMessage","outlierOverrideExampleSummary","useBinningConfiguration","binningSelectedCount","binningOverrideColumns","fieldPrefix","setCustomEdgeDrafts","setCustomLabelDrafts","activeColumns","useImputationConfiguration","imputerStrategies","previewColumnStats","nodeColumns","imputerMissingFilter","imputerColumnOptions","previewColumnSet","requiredColumns","shouldExcludeColumn","optionMap","registerColumn","aHasMissing","bHasMissing","imputerMissingSliderMax","highest","imputerFilteredOptionCount","imputerMissingFilterActive","useModelingConfiguration","isClassResamplingNode","upstreamTargetColumn","isModelingNode","featureTargetSplitConfig","featureColumns","trainTestSplitConfig","test_size","validation_size","random_state","shuffle","target_column","resamplingConfig","rawSampling","samplingStrategy","rawRandomState","rawReplacement","kNeighbors","rawK","rawProblemType","availableModelTypeOptions","modelTypeBuckets","buckets","metadataType","filteredModelTypeOptions","trainModelDraftConfig","trainModelCVConfig","foldsValue","folds","refitStrategy","allowedValues","currentModelType","fallbackModelType","previousValue","trainModelRuntimeConfig","rawHyperparameters","useSkewnessConfiguration","shouldLoadInsights","skewnessTransformations","updateSkewnessTransformations","setSkewnessViewMode","setSkewnessGroupByMethod","skewnessDistributionView","setSkewnessDistributionView","skewnessMethods","skewnessMethodLabelMap","skewnessRecommendations","skewnessColumnMap","skewnessColumnOptions","applySkewnessRecommendations","skewnessTransformationMap","setSkewnessTransformationForColumn","handleSkewnessOverrideChange","clearSkewnessTransformations","skewnessDistributionCards","after","backendApplied","configuredMethod","appliedMethod","appliedLabel","aAbs","bAbs","DEFAULT_METADATA","normalizeStatus","sanitizeSuggestions","uniqueCount","uniquePercentage","textCategory","extractMetadata","totalTextColumns","recommendedCount","autoDetectDefault","highCardinalityColumns","useLabelEncodingRecommendations","setSuggestions","setMetadata","refresh","memoizedMetadata","memoizedSuggestions","recommendedUseGlobalFallback","enableGlobalFallbackDefault","useTargetEncodingRecommendations","recommendedBucketCount","suggestedBucketDefault","useHashEncodingRecommendations","recommendedHandleUnknown","enableUnknownDefault","useOrdinalEncodingRecommendations","estimatedDummyColumns","recommendedDropFirst","cautionedCount","useDummyEncodingRecommendations","useOneHotEncodingRecommendations","DATA_CONSISTENCY_GUIDANCE","formatParameterLabel","help","resolvePreviewSummary","skipped","resolveParameterValue","columnParameterMap","globalValue","resolvePlaceholder","PARAMETER_SUFFIX","OutlierInsightsSection","outlierHasOverrides","outlierSampleSize","relativeOutlierGeneratedAt","outlierPreviewSignal","onMethodParameterChange","onColumnParameterChange","previewSummary","parameterKeys","toHandleKey","HistogramSparkline","useId","wrapperClass","safeMax","binWidth","FEATURE_MATH_DATETIME_KEYS","sanitizeStringList","sanitizeConstantsList","sanitizeDatetimeFeaturesList","sanitizeNumberValue","sanitizeIntegerValue","sanitizeTimezoneValue","NodeSettingsModal","onUpdateConfig","onUpdateNodeData","onResetConfig","defaultConfigTemplate","isResetAvailable","isDropMissingNode","datasetBadge","imputationMethodOptions","imputationMethodValues","dataConsistencyHint","connectionInfo","rawInfo","cloneHandles","hasRequiredConnections","connectedHandleKeys","connectedOutputHandleKeys","evaluationSplitConnectivity","hasRelevant","mapping","acceptKey","requiredInputHandles","missingRequiredInputs","connectionReady","gatedSectionStyle","gatedAriaDisabled","replaceAliasesCustomPairsParameter","trimWhitespaceColumnsParameter","trimWhitespaceModeParameter","removeSpecialColumnsParameter","removeSpecialModeParameter","removeSpecialReplacementParameter","replaceInvalidColumnsParameter","replaceInvalidModeParameter","replaceInvalidMinValueParameter","replaceInvalidMaxValueParameter","regexCleanupColumnsParameter","regexCleanupModeParameter","regexCleanupPatternParameter","regexCleanupReplacementParameter","normalizeCaseColumnsParameter","normalizeCaseModeParameter","labelEncodingColumnsParameter","labelEncodingAutoDetectParameter","labelEncodingMaxUniqueParameter","labelEncodingOutputSuffixParameter","labelEncodingDropOriginalParameter","labelEncodingMissingStrategyParameter","labelEncodingMissingCodeParameter","hashEncodingColumnsParameter","hashEncodingAutoDetectParameter","hashEncodingMaxCategoriesParameter","hashEncodingBucketsParameter","hashEncodingOutputSuffixParameter","hashEncodingDropOriginalParameter","hashEncodingEncodeMissingParameter","polynomialColumnsParameter","polynomialAutoDetectParameter","polynomialDegreeParameter","polynomialIncludeBiasParameter","polynomialInteractionOnlyParameter","polynomialIncludeInputFeaturesParameter","polynomialOutputPrefixParameter","featureSelectionColumnsParameter","featureSelectionAutoDetectParameter","featureSelectionTargetColumnParameter","featureSelectionMethodParameter","featureSelectionScoreFuncParameter","featureSelectionProblemTypeParameter","featureSelectionKParameter","featureSelectionPercentileParameter","featureSelectionAlphaParameter","featureSelectionThresholdParameter","featureSelectionModeParameter","featureSelectionEstimatorParameter","featureSelectionStepParameter","featureSelectionMinFeaturesParameter","featureSelectionMaxFeaturesParameter","featureSelectionDropUnselectedParameter","featureMathErrorHandlingParameter","featureMathAllowOverwriteParameter","featureMathDefaultTimezoneParameter","featureMathEpsilonParameter","resamplingMethodParameter","resamplingTargetColumnParameter","resamplingSamplingStrategyParameter","resamplingRandomStateParameter","resamplingKNeighborsParameter","resamplingReplacementParameter","featureTargetSplitTargetColumnParameter","trainModelTargetColumnParameter","trainModelProblemTypeParameter","trainModelModelTypeParameter","trainModelHyperparametersParameter","hyperparameterTuningSearchStrategyParameter","hyperparameterTuningSearchIterationsParameter","hyperparameterTuningSearchRandomStateParameter","hyperparameterTuningScoringMetricParameter","trainModelCvEnabledParameter","trainModelCvStrategyParameter","trainModelCvFoldsParameter","trainModelCvShuffleParameter","trainModelCvRandomStateParameter","trainModelCvRefitStrategyParameter","targetEncodingColumnsParameter","targetEncodingTargetColumnParameter","targetEncodingAutoDetectParameter","targetEncodingMaxCategoriesParameter","targetEncodingOutputSuffixParameter","targetEncodingDropOriginalParameter","targetEncodingSmoothingParameter","targetEncodingEncodeMissingParameter","targetEncodingHandleUnknownParameter","ordinalEncodingColumnsParameter","ordinalEncodingAutoDetectParameter","ordinalEncodingMaxCategoriesParameter","ordinalEncodingOutputSuffixParameter","ordinalEncodingDropOriginalParameter","ordinalEncodingEncodeMissingParameter","ordinalEncodingHandleUnknownParameter","ordinalEncodingUnknownValueParameter","dummyEncodingColumnsParameter","dummyEncodingAutoDetectParameter","dummyEncodingMaxCategoriesParameter","dummyEncodingDropFirstParameter","dummyEncodingIncludeMissingParameter","dummyEncodingDropOriginalParameter","dummyEncodingPrefixSeparatorParameter","oneHotEncodingColumnsParameter","oneHotEncodingAutoDetectParameter","oneHotEncodingMaxCategoriesParameter","oneHotEncodingDropFirstParameter","oneHotEncodingIncludeMissingParameter","oneHotEncodingDropOriginalParameter","oneHotEncodingPrefixSeparatorParameter","missingIndicatorColumnsParameter","missingIndicatorSuffixParameter","requiresColumnCatalog","dropColumnParameter","dropRowsAnyParameter","filteredParameters","dataConsistencyParameters","shouldLoadSkewnessInsights","initialConfig","targetEncodingFallbackAppliedRef","stableInitialConfig","stableCurrentConfig","modelRegistryConfig","imputerStrategyCount","graphNodes","graphEdges","graphNodeCount","upstreamNodeIds","visited","ordered","featureTargetSplitColumn","trainTestSplitColumn","upstreamId","targetCol","featureMathOperations","upstreamConfigFingerprints","configPayload","cachedPreviewSchema","setCachedPreviewSchema","cachedSchemaColumns","datasetNodeIds","entryId","entryData","adjacency","rawSource","rawTarget","neighbors","neighbor","oversamplingSchemaGuard","allowedFamilies","blockedDetails","imputationSchemaDiagnostics","numericFamilies","columnLookup","invalidDetails","columnName","columnSearch","setImputerMissingFilter","hasDropColumnParameter","isFetchingLabelEncoding","labelEncodingError","labelEncodingSuggestions","labelEncodingMetadata","isFetchingTargetEncoding","targetEncodingError","targetEncodingSuggestions","targetEncodingMetadata","isFetchingHashEncoding","hashEncodingError","hashEncodingSuggestions","hashEncodingMetadata","isFetchingOrdinalEncoding","ordinalEncodingError","ordinalEncodingSuggestions","ordinalEncodingMetadata","isFetchingDummyEncoding","dummyEncodingError","dummyEncodingSuggestions","dummyEncodingMetadata","isFetchingOneHotEncoding","oneHotEncodingError","oneHotEncodingSuggestions","oneHotEncodingMetadata","suggestedBuckets","numericBuckets","numericCurrent","encodeMissingActive","currentHandleUnknown","previousEncodeMissing","previousHandleUnknown","currentNodeId","lastNodeIdRef","binnedSamplePreset","setBinnedSamplePreset","setCollapsedStrategies","collapsedFeatureMath","setCollapsedFeatureMath","datasetProfileController","shouldIncludeSignals","featureMathSignals","polynomialSignal","featureSelectionSignal","normalizedSignalTarget","fallbackTarget","backendK","normalizedCurrent","featureMathSummaries","validIds","handleRefreshPreview","nextSchema","activeFlagSuffix","missingIndicatorColumns","missingIndicatorInsights","aliasStrategyCount","replaceInvalidMode","replaceInvalidModeDetails","replaceInvalidSampleMap","replaceInvalidColumnSummary","replaceInvalidMinValue","replaceInvalidMaxValue","standardizeDatesMode","dateStrategies","standardizeDatesSampleMap","standardizeDatesColumnSummary","dateColumnOptions","shouldAnalyzeNumericColumns","outlierOverrideSummaryDisplay","binningFieldIds","binningCustomEdgeDrafts","setBinningCustomEdgeDrafts","binningCustomLabelDrafts","setBinningCustomLabelDrafts","binningInsightsRecommendations","binningRecommendedColumnSet","binningAllNumericColumns","canApplyAllBinningNumeric","binningInsightsExcludedColumns","_v","_u","transformerAuditSignal","_x","_w","nextTypeMap","nextSuggestionMap","sampledValues","previousEntries","nextEntries","previousKeys","_y","previewStats","nextMissingMap","_z","_A","_B","normalizedColumnSearch","filteredColumnOptions","currentTransformations","nextTransformations","handleApplySkewnessRecommendations","_C","thresholdParameterName","normalizedSuggestedThreshold","thresholdMatchesSuggestion","showDropMissingRowsSection","handleParameterChange","bound","normalizedLower","normalizedUpper","nextBounds","handleBooleanChange","handleTextChange","handleBinningIntegerChange","handleBinningBooleanToggle","handleBinningSuffixChange","handleBinningLabelFormatChange","handleBinningMissingStrategyChange","handleBinningMissingLabelChange","handleBinningCustomBinsChange","existingRaw","existingEntry","hasValidEntry","handleBinningCustomLabelsChange","handleBinningClearCustomColumn","updateBinningColumnOverride","mutator","workingOverrides","rawExisting","existingOverride","mutated","handleBinningOverrideStrategyChange","resolveBins","handleBinningOverrideNumberChange","handleBinningOverrideKbinsEncodeChange","handleBinningOverrideKbinsStrategyChange","handleBinningClearOverride","handleBinningClearOverrides","handleBinningApplyStrategies","handleBinningApplyColumns","normalizedColumns","handleApplyAllBinningNumeric","exists","manualChanged","manualBounds","nextOverrides","handleApplyAllRecommended","handleApplyLabelEncodingRecommended","handleApplyTargetEncodingRecommended","shouldEnableFallback","handleApplyHashEncodingRecommended","recommendedBuckets","currentBuckets","handleApplyOrdinalEncodingRecommended","shouldEnableUnknown","shouldEncodeMissing","handleApplyDummyEncodingRecommended","enforceDropFirst","handleApplyOneHotEncodingRecommended","shouldEnableDropFirst","handleOutlierDefaultMethodChange","handleOutlierAutoDetectToggle","setOutlierColumnMethod","existingMethods","handleOutlierClearOverrides","hasColumnMethods","hasColumnParameters","handleOutlierApplyAllRecommendations","skippedSet","handleOutlierSkipColumn","skipSize","skipChanged","hadMethod","existingParameters","hadParameters","handleOutlierUnskipColumn","nextSkipped","handleOutlierOverrideSelect","handleOutlierMethodParameterChange","normalizedParameter","baseParameters","handleOutlierColumnParameterChange","handleScalingDefaultMethodChange","handleScalingAutoDetectToggle","setScalingColumnMethod","hasColumn","needsMethodUpdate","needsColumnUpdate","handleScalingClearOverrides","handleScalingApplyAllRecommendations","handleScalingSkipColumn","sizeBefore","handleScalingUnskipColumn","nextSkippedSet","handleScalingOverrideSelect","handleClearColumns","handleRemoveColumn","handleApplySuggestedThreshold","handleResetNode","template","handleSave","canApplySuggestedThreshold","selectionCount","relativeBinningGeneratedAt","relativeBinnedGeneratedAt","scalingSampleSizeNumeric","binningSampleSizeNumeric","binningSampleSize","binnedSampleSizeNumeric","binnedSampleSize","showRecommendations","isProfileLoading","isPreviewLoading","hasActiveAsyncWork","footerBusyLabel","updateImputerStrategies","currentStrategies","updateAliasStrategies","unionColumns","primaryMode","autoDetectAny","_D","updateDateStrategies","_F","_E","_H","_G","_J","_I","handleRefreshBinnedDistribution","binnedDistributionCards","totalRowsNumeric","sanitizedBins","numericCount","safeCount","numericPercentage","clampedPercentage","roundedPercentage","totalBinCount","MAX_BINS","hasMoreBins","bins","missingRowsNumeric","missingRows","distinctBinsNumeric","distinctBins","rawTopLabel","topLabel","topCountNumeric","topCount","topPercentageNumeric","topPercentage","sourceColumn","handleAddImputerStrategy","nextIndex","handleRemoveImputerStrategy","idx","toggleImputerStrategySection","handleImputerMethodChange","handleImputerOptionNumberChange","nextOptions","handleImputerColumnsChange","handleImputerColumnToggle","handleImputerMissingFilterChange","handleAddDateStrategy","assigned","suggested","nextStrategy","handleRemoveDateStrategy","toggleDateStrategySection","handleDateStrategyModeChange","handleDateStrategyColumnsChange","handleDateStrategyColumnToggle","handleDateStrategyAutoDetectToggle","updateFeatureMathOperations","existingOperations","nextOperations","handleAddFeatureMathOperation","operationType","createdOperationId","draft","handleDuplicateFeatureMathOperation","operationId","seed","duplicate","handleRemoveFeatureMathOperation","handleReorderFeatureMathOperation","targetIndex","moved","handleToggleFeatureMathOperation","handleFeatureMathOperationChange","resolvedType","methodChoices","handleAddAliasStrategy","handleRemoveAliasStrategy","toggleAliasStrategySection","handleAliasModeChange","handleAliasColumnToggle","handleAliasColumnsChange","handleAliasAutoDetectToggle","requiresRecommendations","isCatalogOnly","isCatalogLoading","isBinningColumnsParameter","isScalingColumnsParameter","binningCandidateColumns","displayedColumns","renderedColumnOptions","selectionDisplayCount","allColumnsSelected","showMissingMetric","availableColumnSet","suggestionSummaries","binningExcludedPreview","scalingExcludedPreview","hasBackendRecommendations","canAddRecommendedColumns","columnType","columnSuggestionList","rangeMeta","hasRangeMeta","distinctCount","hasDistinctMeta","distinctDisplayValue","showTypeMeta","shouldShowMetaRow","hasSuggestionHints","inputId","displayValue","internalValue","lines","line","colonIndex","valueStr","handleRemoveDuplicatesKeepChange","isRequired","renderDistributionSection","distribution","sectionLabel","validSamples","missingSamples","afterDistribution","showBefore","showAfter","showAfterPlaceholder","footnoteMessage","SPLIT_DEFINITIONS","SPLIT_TYPE_ORDER","SPLIT_LABEL_MAP","isValidSplitKey","uniqueKeys","areSplitArraysEqual","getSplitKeyFromHandle","getSplitHandlePosition","CONNECTION_ACCEPT_MATCHERS","NODE_HANDLE_CONFIG","resolveHandleTopPosition","formatHandleDisplayLabel","formatConnectionDescriptor","extractHandleKey","HANDLE_BASE_SIZE","DEFAULT_NODE_WIDTH","DEFAULT_NODE_MIN_HEIGHT","DROP_MISSING_LEGACY_DESCRIPTION","DROP_MISSING_DISPLAY_DESCRIPTION","AUTO_CONFIRMED_NODE_TYPES","buildHandleStyle","FeatureCanvasNode","isRemovable","isSplitNode","defaultDescription","rawDescription","backgroundStatus","needsConnection","handleRemove","targetHandles","handleConfig","sourceHandles","activeSplits","connectedSplits","renderHandle","isSplitHandle","PENDING_CONFIRMATION_FLAG","COLUMN_ARRAY_KEY_PATTERNS","COLUMN_MAP_KEY_PATTERNS","isAutoConfirmedCatalogType","sanitizeDefaultConfigForNode","catalogNode","requiresConfirmation","applyPendingState","normalizeDescription","normalizeParameters","rawParameters","initialNodes","initialEdges","cloneNode","getDefaultNodes","getDefaultEdges","HISTORY_LIMIT","getSamplePipelineGraph","datasetLabel","datasetNodeLabel","resolveDropPosition","instance","viewportEl","projectedCenter","nonDatasetCount","patternIndex","ring","RESETTABLE_NODE_TYPES","isResettableCatalogEntry","catalogEntryMap","catalogEntry","registerNodeInteractions","rawNode","deps","handleOpenSettings","handleRemoveNode","baseData","normalizedStyle","effectiveParameterSource","fallbackEntry","parameterDefs","resolvedConfig","normalizedDescription","catalogTypeAutoConfirmed","clonedConfig","normalizedData","formattedInputs","formattedOutputs","sanitizedSplits","sanitizedConnections","createNewNode","fallbackLabel","normalizedConfig","isAutoConfirmed","SPLIT_PROPAGATION_BLOCKED_TYPES","getNodeRequiredConnections","checkNodeConnectionStatus","incomingEdges","connectedHandles","req","computeActiveSplitMap","assignments","blockedNodeIds","maxIterations","sourceSplits","targetSplits","initialSize","orderedAssignments","splitSet","computeSplitConnectionMap","connections","orderedConnections","buildGraphSnapshot","sanitizedNodes","sanitizedData","sanitizedEdges","CanvasShell","datasetName","onGraphChange","onPipelineHydrated","onPipelineError","hasInitialSampleHydratedRef","isCatalogOpen","setIsCatalogOpen","selectedNodeId","setSelectedNodeId","isSettingsModalOpen","setIsSettingsModalOpen","nodeIdRef","reactFlowInstanceRef","canvasViewportRef","shouldFitViewRef","catalogEntryMapRef","datasetDisplayLabel","updateNodeInternals","scheduleNodeInternalsUpdate","uniqueIds","updateNodeCounter","highestId","nodesWithHandleChanges","activeSplitMap","splitConnectionMap","didChange","desiredSplits","currentSplits","desiredConnections","currentConnections","currentHasRequiredConnections","splitsChanged","connectionsChanged","nextData","selectedNode","handleCloseSettings","scheduleFitView","currentSelected","nodeCatalogQuery","nodeCatalog","catalogErrorMessage","pipelineQuery","isPipelineLoading","registerNode","clearGraph","existingDataset","useImperativeHandle","prepareNodes","createNode","nextNumericId","basePosition","handleAddNode","dropPosition","newNode","handleUpdateNodeConfig","handleUpdateNodeData","dataUpdates","handleResetNodeConfig","resolvedTemplate","handleResetAllNodes","targetCatalogType","inputDefinition","matcherKey","eds","impactedNodes","preparedNodes","hydratedNodes","hydratedEdges","existingType","sourceNodeId","normalizedSourceHandle","normalizedTargetHandle","selectedNodeDefaultConfig","canResetSelectedNode","sidebarContent","date","timestamp","diffMs","diffWeeks","CanvasSidepanel","activePipelineUpdatedAt","datasetErrorMessage","isDatasetLoading","hasDatasets","ownedDatasetsCount","canSelectDatasets","datasetOptions","selectedDataset","activeSourceId","canClearCanvas","onDatasetSelection","onClearCanvas","onRefreshHistory","onSaveClick","isHistoryLoading","historyErrorMessage","historyItems","activePipelineId","isDirty","isSaveDisabled","saveButtonLabel","saveFeedback","feedbackIcon","feedbackClass","onSelectHistory","datasetMetaLabel","matchesActive","disableSelection","useDatasetSelection","initialSourceId","setActiveSourceId","setSelectedDataset","datasetsQuery","datasets","ownedDatasets","useDatasetSelectionHandler","setIsDirty","setSaveFeedback","isHydratingRef","selectionState","handleDatasetSelection","cloneGraphSnapshot","hasCustomNodes","hasEdgesPresent","useCanvasSnapshotState","graphSnapshotRef","setCanClearCanvas","applyHydratedSnapshot","snapshot","hasCustom","hasEdges","handleGraphChange","nextSnapshot","previousSnapshot","isSameSnapshot","useClearCanvasHandler","canvasShellRef","usePipelineHistory","pipelineQueryKey","pendingHistoryIdRef","historyLimit","historyQuery","handleHistorySelection","pipeline","usePipelineHydration","setActivePipelineId","setActivePipelineName","setActivePipelineUpdatedAt","handlePipelineHydrated","hydratedPipelineId","timeLabel","handlePipelineError","usePipelineSave","resolveFeedbackIcon","resolveFeedbackClass","useSaveFeedbackState","useSidepanelViewModel","isSaving","useSidepanelToggle","initiallyExpanded","isSidepanelExpanded","setIsSidepanelExpanded","handleToggleSidepanel","normalizeEdgeType","buildPipelineSavePayload","App","activePipelineName","handleClearCanvas","refetchHistory","triggerSave","handleSaveClick","sidepanelProps","rootNode","ReactDOM"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,198]}